"use strict";(self.webpackChunkdinky_web=self.webpackChunkdinky_web||[]).push([[8420],{31484:function(C,s,e){e.d(s,{Z:function(){return T}});var a=e(87462),d=e(67294),_={icon:function(E,R){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M292.7 840h438.6l24.2-512h-487z",fill:R}},{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-504-72h304v72H360v-72zm371.3 656H292.7l-24.2-512h487l-24.2 512z",fill:E}}]}},name:"delete",theme:"twotone"},n=_,o=e(13401),r=function(E,R){return d.createElement(o.Z,(0,a.Z)({},E,{ref:R,icon:n}))},t=d.forwardRef(r),T=t},65987:function(C,s,e){e.d(s,{Z:function(){return T}});var a=e(87462),d=e(67294),_={icon:function(E,R){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M761.1 288.3L687.8 215 325.1 577.6l-15.6 89 88.9-15.7z",fill:R}},{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89z",fill:E}}]}},name:"edit",theme:"twotone"},n=_,o=e(13401),r=function(E,R){return d.createElement(o.Z,(0,a.Z)({},E,{ref:R,icon:n}))},t=d.forwardRef(r),T=t},31199:function(C,s,e){var a=e(1413),d=e(45987),_=e(67294),n=e(31649),o=e(85893),r=["fieldProps","min","proFieldProps","max"],t=function(E,R){var g=E.fieldProps,L=E.min,p=E.proFieldProps,I=E.max,f=(0,d.Z)(E,r);return(0,o.jsx)(n.Z,(0,a.Z)({valueType:"digit",fieldProps:(0,a.Z)({min:L,max:I},g),ref:R,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:p},f))},T=_.forwardRef(t);s.Z=T},86615:function(C,s,e){var a=e(1413),d=e(45987),_=e(22270),n=e(55742),o=e(67294),r=e(74115),t=e(31649),T=e(85893),v=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],E=o.forwardRef(function(p,I){var f=p.fieldProps,h=p.options,j=p.radioType,D=p.layout,l=p.proFieldProps,N=p.valueEnum,S=(0,d.Z)(p,v);return(0,T.jsx)(t.Z,(0,a.Z)((0,a.Z)({valueType:j==="button"?"radioButton":"radio",ref:I,valueEnum:(0,_.h)(N,void 0)},S),{},{fieldProps:(0,a.Z)({options:h,layout:D},f),proFieldProps:l,filedConfig:{customLightMode:!0}}))}),R=o.forwardRef(function(p,I){var f=p.fieldProps,h=p.children;return(0,T.jsx)(n.ZP,(0,a.Z)((0,a.Z)({},f),{},{ref:I,children:h}))}),g=(0,r.G)(R,{valuePropName:"checked",ignoreWidth:!0}),L=g;L.Group=E,L.Button=n.ZP.Button,L.displayName="ProFormComponent",s.Z=L},64317:function(C,s,e){var a=e(1413),d=e(45987),_=e(22270),n=e(67294),o=e(66758),r=e(31649),t=e(85893),T=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],v=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],E=function(f,h){var j=f.fieldProps,D=f.children,l=f.params,N=f.proFieldProps,S=f.mode,W=f.valueEnum,H=f.request,V=f.showSearch,y=f.options,x=(0,d.Z)(f,T),Y=(0,n.useContext)(o.Z);return(0,t.jsx)(r.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,_.h)(W),request:H,params:l,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:y,mode:S,showSearch:V,getPopupContainer:Y.getPopupContainer},j),ref:h,proFieldProps:N},x),{},{children:D}))},R=n.forwardRef(function(I,f){var h=I.fieldProps,j=I.children,D=I.params,l=I.proFieldProps,N=I.mode,S=I.valueEnum,W=I.request,H=I.options,V=(0,d.Z)(I,v),y=(0,a.Z)({options:H,mode:N||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},h),x=(0,n.useContext)(o.Z);return(0,t.jsx)(r.Z,(0,a.Z)((0,a.Z)({valueEnum:(0,_.h)(S),request:W,params:D,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({getPopupContainer:x.getPopupContainer},y),ref:f,proFieldProps:l},V),{},{children:j}))}),g=n.forwardRef(E),L=R,p=g;p.SearchSelect=L,p.displayName="ProFormComponent",s.Z=p},52688:function(C,s,e){var a=e(1413),d=e(45987),_=e(67294),n=e(31649),o=e(85893),r=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],t=_.forwardRef(function(T,v){var E=T.fieldProps,R=T.unCheckedChildren,g=T.checkedChildren,L=T.proFieldProps,p=(0,d.Z)(T,r);return(0,o.jsx)(n.Z,(0,a.Z)({valueType:"switch",fieldProps:(0,a.Z)({unCheckedChildren:R,checkedChildren:g},E),ref:v,valuePropName:"checked",proFieldProps:L,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},p))});s.Z=t},5966:function(C,s,e){var a=e(97685),d=e(1413),_=e(45987),n=e(21770),o=e(18922),r=e(55241),t=e(97435),T=e(67294),v=e(31649),E=e(85893),R=["fieldProps","proFieldProps"],g=["fieldProps","proFieldProps"],L="text",p=function(D){var l=D.fieldProps,N=D.proFieldProps,S=(0,_.Z)(D,R);return(0,E.jsx)(v.Z,(0,d.Z)({valueType:L,fieldProps:l,filedConfig:{valueType:L},proFieldProps:N},S))},I=function(D){var l=(0,n.Z)(D.open||!1,{value:D.open,onChange:D.onOpenChange}),N=(0,a.Z)(l,2),S=N[0],W=N[1];return(0,E.jsx)(o.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(V){var y,x=V.getFieldValue(D.name||[]);return(0,E.jsx)(r.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(P){return P&&P.parentNode?P.parentNode:P},onOpenChange:W,content:(0,E.jsxs)("div",{style:{padding:"4px 0"},children:[(y=D.statusRender)===null||y===void 0?void 0:y.call(D,x),D.strengthText?(0,E.jsx)("div",{style:{marginTop:10},children:(0,E.jsx)("span",{children:D.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},D.popoverProps),{},{open:S,children:D.children}))}})},f=function(D){var l=D.fieldProps,N=D.proFieldProps,S=(0,_.Z)(D,g),W=(0,T.useState)(!1),H=(0,a.Z)(W,2),V=H[0],y=H[1];return l!=null&&l.statusRender&&S.name?(0,E.jsx)(I,{name:S.name,statusRender:l==null?void 0:l.statusRender,popoverProps:l==null?void 0:l.popoverProps,strengthText:l==null?void 0:l.strengthText,open:V,onOpenChange:y,children:(0,E.jsx)("div",{children:(0,E.jsx)(v.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,t.default)(l,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(Y){var P;l==null||(P=l.onBlur)===null||P===void 0||P.call(l,Y),y(!1)},onClick:function(Y){var P;l==null||(P=l.onClick)===null||P===void 0||P.call(l,Y),y(!0)}}),proFieldProps:N,filedConfig:{valueType:L}},S))})}):(0,E.jsx)(v.Z,(0,d.Z)({valueType:"password",fieldProps:l,proFieldProps:N,filedConfig:{valueType:L}},S))},h=p;h.Password=f,h.displayName="ProFormComponent",s.Z=h},90672:function(C,s,e){var a=e(1413),d=e(45987),_=e(67294),n=e(31649),o=e(85893),r=["fieldProps","proFieldProps"],t=function(v,E){var R=v.fieldProps,g=v.proFieldProps,L=(0,d.Z)(v,r);return(0,o.jsx)(n.Z,(0,a.Z)({ref:E,valueType:"textarea",fieldProps:R,proFieldProps:g},L))};s.Z=_.forwardRef(t)},68166:function(C,s,e){var a=e(96012),d=e(85893),_=function(o){var r=o.children,t=(0,a.q_)({opacity:1,from:{opacity:0},config:{duration:100}});return(0,d.jsx)(a.q.h1,{style:t,children:r})};s.Z=_},60982:function(C,s,e){e.d(s,{q:function(){return r}});var a=e(41913),d=e(24969),_=e(14726),n=e(67294),o=e(85893),r=function(T){var v=T.onClick;return(0,o.jsxs)(_.ZP,{type:"primary",onClick:v,children:[(0,o.jsx)(d.Z,{}),(0,a.l)("button.create")]})}},28712:function(C,s,e){e.d(s,{m:function(){return r}});var a=e(41913),d=e(65987),_=e(14726),n=e(67294),o=e(85893),r=function(T){var v=T.onClick,E=T.disabled,R=E===void 0?!1:E;return(0,o.jsx)(_.ZP,{className:"options-button",icon:(0,o.jsx)(d.Z,{}),disabled:R,title:(0,a.l)("button.edit"),onClick:function(){return v()}})}},95423:function(C,s,e){e.d(s,{t:function(){return T}});var a=e(97857),d=e.n(a),_=e(79935),n=e(42075),o=e(72269),r=e(67294),t=e(85893),T=function(E){var R=E.record,g=E.onChange,L=E.disabled,p=L===void 0?!1:L;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.Z,{className:"hidden-overflow",children:(0,t.jsx)(o.Z,d()(d()({},(0,_.uP)()),{},{checked:R.enabled,disabled:p,onChange:function(){return g()}}))})})}},63167:function(C,s,e){e.d(s,{i:function(){return v}});var a=e(97857),d=e.n(a),_=e(58461),n=e(41913),o=e(86738),r=e(14726),t=e(67294),T=e(85893),v=function(R){var g=R.onClick,L=R.description,p=R.disabled,I=p===void 0?!1:p,f=R.buttonIcon,h=R.title,j=R.options;return(0,T.jsx)("span",{onClick:function(l){return l.stopPropagation()},children:(0,T.jsx)(o.Z,{placement:"topRight",title:h!=null?h:(0,n.l)("button.delete"),description:(0,T.jsxs)("div",{className:"needWrap",children:[L," "]}),onConfirm:g,disabled:I,okText:(0,n.l)("button.confirm"),cancelText:(0,n.l)("button.cancel"),children:(0,t.createElement)(r.ZP,d()(d()({},j),{},{title:h!=null?h:(0,n.l)("button.delete"),key:"DeleteIcon",disabled:I,htmlType:"submit",autoFocus:!0,icon:f!=null?f:(0,T.jsx)(_.M3,{})}))})})}},60860:function(C,s,e){e.d(s,{LE:function(){return n},Lu:function(){return o},Z4:function(){return a},g$:function(){return _},jf:function(){return d}});var a=function(r){return r[r.UNKNOWN=0]="UNKNOWN",r[r.DEVELOP=1]="DEVELOP",r[r.PUBLISH=2]="PUBLISH",r}({}),d=function(r){return r.FINISHED="FINISHED",r.RUNNING="RUNNING",r.FAILED="FAILED",r.CANCELED="CANCELED",r.INITIALIZING="INITIALIZING",r.RESTARTING="RESTARTING",r.CREATED="CREATED",r.FAILING="FAILING",r.SUSPENDED="SUSPENDED",r.CANCELLING="CANCELLING",r.RECONNECTING="RECONNECTING",r.UNKNOWN="UNKNOWN",r}({}),_=function(r){return r.INITIALIZE="INITIALIZE",r.RUNNING="RUNNING",r.SUCCESS="SUCCESS",r.FAILED="FAILED",r.CANCEL="CANCEL",r}({}),n=function(r){return r.OK="ok",r.HIGH="high",r}({}),o={METRICS:"/TOPIC/METRICS",PROCESS_CONSOLE:"/TOPIC/PROCESS_CONSOLE",PRINT_TABLE:"/TOPIC/PRINT_TABLE"}},99384:function(C,s,e){e.d(s,{Eg:function(){return _},Lp:function(){return n},Wm:function(){return a},yY:function(){return d}});var a=function(o){return o.STANDALONE="standalone",o.YARN="yarn-application",o.YARN_SESSION="yarn-session",o.KUBERNETES_SESSION="kubernetes-session",o.KUBERNETES_APPLICATION="kubernetes-application",o.KUBERNETES_OPERATOR="kubernetes-application-operator",o.YARN_APPLICATION="yarn-application",o.LOCAL="local",o}({}),d=[{value:a.STANDALONE,label:"Standalone",key:a.STANDALONE},{value:a.YARN_SESSION,label:"Yarn Session",key:a.YARN_SESSION},{value:a.KUBERNETES_SESSION,label:"Kubernetes Session",key:a.KUBERNETES_SESSION},{value:a.KUBERNETES_APPLICATION,label:"Kubernetes Application",key:a.KUBERNETES_APPLICATION},{value:a.KUBERNETES_OPERATOR,label:"Kubernetes Operator",key:a.KUBERNETES_OPERATOR},{value:a.YARN_APPLICATION,label:"Yarn Application",key:a.YARN_APPLICATION},{value:a.LOCAL,label:"Local",key:a.LOCAL}],_=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return d.filter(function(t){return!r.includes(t.value)})},n=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return d.filter(function(t){return r.includes(t.value)})}},99426:function(C,s,e){e.r(s),e.d(s,{default:function(){return be}});var a=e(68166),d=e(11774),_=e(15009),n=e.n(_),o=e(97857),r=e.n(o),t=e(99289),T=e.n(t),v=e(5574),E=e.n(v),R=e(60982),g=e(28712),L=e(95423),p=e(63167),I=e(49881),f=e(19632),h=e.n(f),j=e(60860),D=e(99384),l=e(41913),N=function(U){return U.SYSTEM="SYSTEM",U.CUSTOM="CUSTOM",U}({}),S=function(U){return U.OPTIONS_SEL="OPTIONS_SEL",U.STR_VALUE="STR_VALUE",U.NUMBER_VALUE="NUMBER_VALUE",U}({}),W=[{label:(0,l.l)("sys.alert.rule.anyRule"),value:" or "},{label:(0,l.l)("sys.alert.rule.allRule"),value:" and "}],H=[{label:">",value:"GT"},{label:"<",value:"LT"},{label:"=",value:"EQ"},{label:"!=",value:"NE"},{label:">=",value:"GE"},{label:"<=",value:"LE"}],V=[{label:"=",value:"EQ"}],y=[{label:"True",value:"true"},{label:"False",value:"false"}],x={taskId:{label:(0,l.l)("sys.alert.rule.label.taskId"),valueType:S.NUMBER_VALUE},duration:{label:(0,l.l)("sys.alert.rule.label.duration"),valueType:S.NUMBER_VALUE},jobStatus:{label:(0,l.l)("sys.alert.rule.label.jobStatus"),valueType:S.OPTIONS_SEL,valueEnum:Object.values(j.jf).map(function(U){return"'".concat(U,"'")})},batchModel:{label:(0,l.l)("sys.alert.rule.label.batchModel"),valueType:S.OPTIONS_SEL,valueEnum:y},clusterType:{label:(0,l.l)("sys.alert.rule.label.jobType"),valueType:S.OPTIONS_SEL,valueEnum:Object.values(D.Wm).map(function(U){return"'".concat(U,"'")})},checkpointCostTime:{label:(0,l.l)("sys.alert.rule.label.checkpointTime"),valueType:S.NUMBER_VALUE},isCheckpointFailed:{label:(0,l.l)("sys.alert.rule.label.checkpointFailed"),valueType:S.OPTIONS_SEL,valueEnum:y},isException:{label:(0,l.l)("sys.alert.rule.label.jobException"),valueType:S.OPTIONS_SEL,valueEnum:y}},Y=e(31199),P=e(5966),k=e(64317),u=e(85893),Re=function(){for(var m=[],F=0,b=Object.entries(x);F<b.length;F++){var K=E()(b[F],2),$=K[0],Z=K[1];m.push({label:Z.label,value:$})}return m},Ae=function(m){return m&&m in x?x[m].valueType==S.NUMBER_VALUE?H:V:[]},Oe=function(m,F){var b=(0,l.l)("pages.datastudio.label.jobConfig.addConfig.value");if(m&&m in x)switch(x[m].valueType){case S.NUMBER_VALUE:return(0,u.jsx)(Y.Z,{disabled:F,name:"ruleValue",fieldProps:{precision:0},placeholder:b,width:"sm"});case S.STR_VALUE:return(0,u.jsx)(P.Z,{width:"sm",disabled:F,name:"ruleValue",placeholder:b});case S.OPTIONS_SEL:return(0,u.jsx)(k.Z,{width:"sm",disabled:F,name:"ruleValue",mode:"single",placeholder:b,options:x[m].valueEnum})}return(0,u.jsx)("span",{})},de=e(25538),J=e(79935),q=e(58023),Ie=e(184),re=e(24739),ve=e(90672),pe=e(52688),De=e(86615),Se=e(17186),fe=e(38345),Le=e(30710),oe=e(97462),he=e(17057),ge=e(18922),ie=e(96074),Ee=e(14726),Ne=e(42075),me=he.Z.Link,Pe=function(m){var F=m.onSubmit,b=m.onCancel,K=m.modalVisible,$=m.values,Z=$.ruleType==N.SYSTEM,le=ge.Z.useForm(),Q=E()(le,1),z=Q[0],X=function(){var O=T()(n()().mark(function i(){var A;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,de.Yu)(q.Z.ALERT_TEMPLATE);case 2:return A=c.sent.data,c.abrupt("return",A.map(function(B){return{label:B.name,value:B.id}}));case 4:case"end":return c.stop()}},i)}));return function(){return O.apply(this,arguments)}}(),ae=function(){var O=T()(n()().mark(function i(){var A;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,z.validateFields();case 2:return A=c.sent,c.abrupt("return",F(r()(r()({},A),{},{rule:JSON.stringify(A.rule)})));case 4:case"end":return c.stop()}},i)}));return function(){return O.apply(this,arguments)}}(),ne=function(i){return(0,u.jsxs)(u.Fragment,{children:[i,(0,u.jsx)(I.FY,{path:"/registration/alert/template/add",children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ie.Z,{style:{margin:"8px 0"}}),(0,u.jsxs)(me,{href:"#/registration/alert/template",children:["+ ",(0,l.l)("rc.alert.template.new")]})]})},"create")]})},G=function(){return[(0,u.jsx)(Ee.ZP,{onClick:function(){return b(!1)},children:(0,l.l)("button.cancel")},"RuleCancel"),(0,u.jsx)(Ee.ZP,{type:"primary",htmlType:"submit",autoFocus:!0,onClick:function(){return ae()},children:(0,l.l)("button.finish")},"RuleFinish")]};return(0,u.jsxs)(Ie.a,{layout:"vertical",form:z,open:K,submitter:{render:function(){return h()(G())}},drawerProps:{onClose:function(){return b(!1)},destroyOnClose:!0},initialValues:$,children:[(0,u.jsxs)(re.UW,{children:[(0,u.jsx)(P.Z,{name:"id",hidden:!0}),(0,u.jsx)(P.Z,{name:"ruleType",hidden:!0}),(0,u.jsx)(P.Z,{disabled:Z,rules:[{required:!0}],name:"name",width:"md",label:(0,l.l)("sys.alert.rule.name"),placeholder:(0,l.l)("sys.alert.rule.name")}),(0,u.jsx)(k.Z,{label:(0,l.l)("sys.alert.rule.template"),width:"md",name:"templateId",request:T()(n()().mark(function O(){return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",X());case 1:case"end":return A.stop()}},O)})),placeholder:(0,l.l)("sys.alert.rule.template"),rules:[{required:!0,message:(0,l.l)("sys.alert.rule.template")}],fieldProps:{dropdownRender:function(i){return ne(i)}}})]}),(0,u.jsxs)(re.UW,{children:[(0,u.jsx)(ve.Z,{width:"md",name:"description",label:(0,l.l)("global.table.note")}),(0,u.jsx)(pe.Z,r()(r()({name:"enabled"},(0,J.uP)()),{},{label:(0,l.l)("global.table.isEnable")}))]}),(0,u.jsx)(ie.Z,{orientation:"left",children:(0,l.l)("sys.alert.rule.trigger")}),(0,u.jsx)(De.Z.Group,{disabled:Z,name:"triggerConditions",label:(0,l.l)("sys.alert.rule.triggerConditions"),rules:[{required:!0}],options:W}),(0,u.jsx)(Se.u,{name:"rule",label:(0,l.l)("sys.alert.rule.triggerRule"),creatorButtonProps:Z?!1:{creatorButtonText:(0,l.l)("sys.alert.rule.addRule")},copyIconProps:!1,min:1,itemRender:function(i,A){var M=i.listDom,c=i.action,B=A.index;return(0,u.jsx)(fe.Z,{bordered:!0,style:{marginBlockEnd:8},title:"".concat((0,l.l)("sys.alert.rule.rule")).concat(B+1),extra:c,bodyStyle:{paddingBlockEnd:0},children:M})},children:(0,u.jsx)(re.UW,{children:(0,u.jsxs)(Ne.Z,{align:"baseline",children:[(0,u.jsx)(Le.Z,{children:"IF:"}),(0,u.jsx)(k.Z,{disabled:Z,name:"ruleKey",width:"sm",mode:"single",options:Re()}),(0,u.jsx)(oe.Z,{name:["ruleKey"],children:function(i){return(0,u.jsx)(k.Z,{disabled:Z,name:"ruleOperator",mode:"single",width:"sm",options:Ae(i.ruleKey)})}}),(0,u.jsx)(oe.Z,{name:["ruleKey"],children:function(i){return Oe(i.ruleKey,Z)}})]},"config")})})]})},Te=Pe,_e=e(21953),ee=e(81029),se={addedOpen:!1,editOpen:!1,value:{}},Ue=e(88028),ce=e(67294),Me=function(){var m=(0,ce.useState)(se),F=E()(m,2),b=F[0],K=F[1],$=(0,ce.useRef)(),Z=function(){var G=T()(n()().mark(function O(i){var A,M;return n()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return K(function(te){return r()(r()({},te),{},{loading:!0})}),B.next=3,i();case 3:K(function(te){return r()(r()({},te),{},{loading:!1})}),(A=$.current)===null||A===void 0||(M=A.reload)===null||M===void 0||M.call(A);case 5:case"end":return B.stop()}},O)}));return function(i){return G.apply(this,arguments)}}(),le=function(){var G=T()(n()().mark(function O(i){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Z(function(){return K(function(c){return r()(r()({},c),{},{editOpen:!c.editOpen,value:i})})});case 2:case"end":return M.stop()}},O)}));return function(i){return G.apply(this,arguments)}}(),Q=function(){K(se)};function z(G){return X.apply(this,arguments)}function X(){return X=T()(n()().mark(function G(O){return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return O.ruleType!=N.SYSTEM&&(O.ruleType=N.CUSTOM),A.next=3,Z(function(){return(0,_e.On)(q.Z.ALERT_RULE,O)});case 3:Q();case 4:case"end":return A.stop()}},G)})),X.apply(this,arguments)}var ae=function(){var G=T()(n()().mark(function O(i,A,M){var c,B;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,de.et)(q.Z.ALERT_RULE_LIST,r()(r()({},i),{},{sorter:A,filter:M}));case 2:return c=w.sent,B=c.data.map(function(ue){return ue.rule=JSON.parse(ue.rule),ue}),w.abrupt("return",{data:B});case 5:case"end":return w.stop()}},O)}));return function(i,A,M){return G.apply(this,arguments)}}(),ne=[{title:"id",dataIndex:"id"},{title:(0,l.l)("sys.alert.rule.name"),dataIndex:"name"},{title:(0,l.l)("sys.alert.rule.triggerConditions"),dataIndex:"triggerConditions",valueEnum:{" or ":(0,l.l)("sys.alert.rule.anyRule")," and ":(0,l.l)("sys.alert.rule.allRule")}},{title:(0,l.l)("sys.alert.rule.ruleType"),dataIndex:"ruleType"},{title:(0,l.l)("global.table.isEnable"),dataIndex:"enabled",hideInSearch:!0,render:function(O,i){return(0,u.jsx)(L.t,{record:i,disabled:!(0,I.ux)(ee.k5.SYSTEM_ALERT_RULE_EDIT),onChange:T()(n()().mark(function A(){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i.enabled=!i.enabled,i.rule=JSON.stringify(i.rule),c.next=4,z(i);case 4:case"end":return c.stop()}},A)}))},"".concat(i.id,"_enable"))},filters:(0,J.em)(),filterMultiple:!1,valueEnum:(0,J.ze)()},{title:(0,l.l)("global.table.createTime"),dataIndex:"createTime",valueType:"dateTime"},{title:(0,l.l)("global.table.updateTime"),dataIndex:"updateTime",valueType:"dateTime"},{title:(0,l.l)("global.table.operate"),valueType:"option",render:function(O,i){return[(0,u.jsx)(I.FY,{path:ee.k5.SYSTEM_ALERT_RULE_EDIT,children:(0,u.jsx)(g.m,{onClick:function(){return le(i)}},"".concat(i.id,"_edit"))},"".concat(i.id,"_edit_auth")),(0,u.jsx)(I.FY,{path:ee.k5.SYSTEM_ALERT_RULE_DELETE,children:(0,u.jsx)(u.Fragment,{children:i.ruleType!=N.SYSTEM&&(0,u.jsx)(p.i,{onClick:T()(n()().mark(function A(){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,_e.m0)(q.Z.ALERT_RULE,i.id);case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},A)})),description:(0,l.l)("sys.alert.rule.delete")},"".concat(i.id,"_delete"))})},"".concat(i.id,"_delete_auth"))]}}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Ue.Z,r()(r()({actionRef:$,headerTitle:!1,loading:b.loading},J.xc),{},{toolBarRender:function(){return[(0,u.jsx)(I.FY,{path:ee.k5.SYSTEM_ALERT_RULE_ADD,children:(0,u.jsx)(R.q,{onClick:function(){return K(function(i){return r()(r()({},i),{},{addedOpen:!0})})}},"CreateRule")},"CreateRule_auth")]},rowKey:"id",size:"small",search:!1,columns:ne,request:ae})),(0,u.jsx)(Te,{onSubmit:z,onCancel:Q,modalVisible:b.addedOpen,values:{}}),b.value&&Object.keys(b.value).length>0&&(0,u.jsx)(Te,{onSubmit:z,onCancel:Q,modalVisible:b.editOpen,values:b.value})]})},Ce=Me,be=function(){return(0,u.jsx)(a.Z,{children:(0,u.jsx)(d._z,{title:!1,children:(0,u.jsx)(Ce,{})})})}},81029:function(C,s,e){e.d(s,{ef:function(){return n},k5:function(){return r},oF:function(){return o}});var a=e(41913),d=e(66309),_=e(85893),n={true:{text:(0,_.jsx)(d.Z,{color:"success",children:(0,a.l)("global.yes")}),status:"Success"},false:{text:(0,_.jsx)(d.Z,{color:"error",children:(0,a.l)("global.no")}),status:"Error"}},o=[{value:1,text:(0,a.l)("global.yes")},{value:0,text:(0,a.l)("global.no")}],r=function(t){return t.DATA_STUDIO_LEFT_PROJECT="/datastudio/left/project",t.DATASTUDIO_LEFT_CATALOG="/datastudio/left/catalog",t.DATASTUDIO_LEFT_DATASOURCE="/datastudio/left/datasource",t.DATASTUDIO_LEFT_GLOBAL_VARIABLE="/datastudio/left/globalVariable",t.DATASTUDIO_RIGHT_JOB_CONFIG="/datastudio/right/jobConfig",t.DATASTUDIO_RIGHT_PREVIEW_CONFIG="/datastudio/right/previewConfig",t.DATASTUDIO_RIGHT_SAVE_POINT="/datastudio/right/savePoint",t.DATASTUDIO_RIGHT_HISTORY_VISION="/datastudio/right/historyVision",t.DATASTUDIO_RIGHT_JOB_INFO="/datastudio/right/jobInfo",t.DATASTUDIO_LEFT_BOTTOM_CONSOLE="/datastudio/bottom/console",t.DATASTUDIO_LEFT_BOTTOM_RESULT="/datastudio/bottom/result",t.DATASTUDIO_LEFT_BOTTOM_LINEAGE="/datastudio/bottom/lineage",t.DATASTUDIO_LEFT_BOTTOM_HISTORY="/datastudio/bottom/history",t.DATASTUDIO_LEFT_BOTTOM_TABLE_DATA="/datastudio/bottom/table-data",t.DATASTUDIO_LEFT_BOTTOM_TOOL="/datastudio/bottom/tool",t.REGISTRATION_ALERT_GROUP_ADD="/registration/alert/group/add",t.REGISTRATION_ALERT_GROUP_EDIT="/registration/alert/group/edit",t.REGISTRATION_ALERT_GROUP_DELETE="/registration/alert/group/delete",t.REGISTRATION_ALERT_INSTANCE_ADD="/registration/alert/instance/add",t.REGISTRATION_ALERT_INSTANCE_EDIT="/registration/alert/instance/edit",t.REGISTRATION_ALERT_INSTANCE_DELETE="/registration/alert/instance/delete",t.REGISTRATION_ALERT_TEMPLATE_ADD="/registration/alert/template/add",t.REGISTRATION_ALERT_TEMPLATE_EDIT="/registration/alert/template/edit",t.REGISTRATION_ALERT_TEMPLATE_DELETE="/registration/alert/template/delete",t.REGISTRATION_CLUSTER_CONFIG_ADD="/registration/cluster/config/add",t.REGISTRATION_CLUSTER_CONFIG_EDIT="/registration/cluster/config/edit",t.REGISTRATION_CLUSTER_CONFIG_DELETE="/registration/cluster/config/delete",t.REGISTRATION_CLUSTER_CONFIG_HEARTBEATS="/registration/cluster/config/heartbeat",t.REGISTRATION_CLUSTER_CONFIG_DEPLOY="/registration/cluster/config/deploy",t.REGISTRATION_CLUSTER_INSTANCE_ADD="/registration/cluster/instance/add",t.REGISTRATION_CLUSTER_INSTANCE_EDIT="/registration/cluster/instance/edit",t.REGISTRATION_CLUSTER_INSTANCE_DELETE="/registration/cluster/instance/delete",t.REGISTRATION_CLUSTER_INSTANCE_HEARTBEATS="/registration/cluster/instance/heartbeat",t.REGISTRATION_CLUSTER_INSTANCE_KILL="/registration/cluster/instance/kill",t.REGISTRATION_DATA_SOURCE_LIST="/registration/datasource/list",t.REGISTRATION_DATA_SOURCE_ADD="/registration/datasource/list/add",t.REGISTRATION_DATA_SOURCE_EDIT="/registration/datasource/list/edit",t.REGISTRATION_DATA_SOURCE_DELETE="/registration/datasource/list/delete",t.REGISTRATION_DATA_SOURCE_COPY="/registration/datasource/list/copy",t.REGISTRATION_DATA_SOURCE_CHECK_HEARTBEAT="/registration/datasource/list/heartbeat",t.REGISTRATION_DATA_SOURCE_DETAIL_TREE="/registration/datasource/detail/tree",t.REGISTRATION_DATA_SOURCE_DETAIL_DESC="/registration/datasource/detail/desc",t.REGISTRATION_DATA_SOURCE_DETAIL_QUERY="/registration/datasource/detail/query",t.REGISTRATION_DATA_SOURCE_DETAIL_GENSQL="/registration/datasource/detail/gensql",t.REGISTRATION_DATA_SOURCE_DETAIL_CONSOLE="/registration/datasource/detail/console",t.REGISTRATION_DATA_SOURCE_DETAIL_REFRESH="/registration/datasource/detail/refresh",t.REGISTRATION_DOCUMENT_ADD="/registration/document/add",t.REGISTRATION_DOCUMENT_EDIT="/registration/document/edit",t.REGISTRATION_DOCUMENT_DELETE="/registration/document/delete",t.REGISTRATION_FRAGMENT_ADD="/registration/fragment/add",t.REGISTRATION_FRAGMENT_EDIT="/registration/fragment/edit",t.REGISTRATION_FRAGMENT_DELETE="/registration/fragment/delete",t.REGISTRATION_GIT_PROJECT_ADD="/registration/gitproject/add",t.REGISTRATION_GIT_PROJECT_EDIT="/registration/gitproject/edit",t.REGISTRATION_GIT_PROJECT_DELETE="/registration/gitproject/delete",t.REGISTRATION_GIT_PROJECT_BUILD="/registration/gitproject/build",t.REGISTRATION_GIT_PROJECT_SHOW_LOG="/registration/gitproject/showLog",t.REGISTRATION_UDF_TEMPLATE_ADD="/registration/udf/template/add",t.REGISTRATION_UDF_TEMPLATE_EDIT="/registration/udf/template/edit",t.REGISTRATION_UDF_TEMPLATE_DELETE="/registration/udf/template/delete",t.REGISTRATION_RESOURCE_ADD_FOLDER="/registration/resource/addFolder",t.REGISTRATION_RESOURCE_RENAME="/registration/resource/rename",t.REGISTRATION_RESOURCE_DELETE="/registration/resource/delete",t.REGISTRATION_RESOURCE_UPLOAD="/registration/resource/upload",t.AUTH_MENU_ADD_ROOT="/auth/menu/createRoot",t.AUTH_MENU_ADD_SUB="/auth/menu/addSub",t.AUTH_MENU_EDIT="/auth/menu/edit",t.AUTH_MENU_DELETE="/auth/menu/delete",t.AUTH_MENU_REFRESH="/auth/menu/refresh",t.AUTH_ROLE_ADD="/auth/role/add",t.AUTH_ROLE_EDIT="/auth/role/edit",t.AUTH_ROLE_DELETE="/auth/role/delete",t.AUTH_ROLE_ASSIGN_MENU="/auth/role/assignMenu",t.AUTH_ROLE_VIEW_USER_LIST="/auth/role/viewUser",t.AUTH_ROW_PERMISSIONS_ADD="/auth/rowPermissions/add",t.AUTH_ROW_PERMISSIONS_EDIT="/auth/rowPermissions/edit",t.AUTH_ROW_PERMISSIONS_DELETE="/auth/rowPermissions/delete",t.AUTH_TOKEN_ADD="/auth/token/add",t.AUTH_TOKEN_EDIT="/auth/token/edit",t.AUTH_TOKEN_DELETE="/auth/token/delete",t.AUTH_USER_ADD="/auth/user/add",t.AUTH_USER_EDIT="/auth/user/edit",t.AUTH_USER_DELETE="/auth/user/delete",t.AUTH_USER_CHANGE_PASSWORD="/auth/user/changePassword",t.AUTH_USER_RESET_PASSWORD="/auth/user/reset",t.AUTH_USER_ASSIGN_ROLE="/auth/user/assignRole",t.AUTH_USER_RECOVERY="/auth/user/recovery",t.AUTH_TENANT_ADD="/auth/tenant/add",t.AUTH_TENANT_EDIT="/auth/tenant/edit",t.AUTH_TENANT_DELETE="/auth/tenant/delete",t.AUTH_TENANT_ASSIGN_USER="/auth/tenant/assignUser",t.AUTH_TENANT_SET_USER_TO_TENANT_ADMIN="/auth/tenant/modifyTenantManager",t.AUTH_TENANT_VIEW_USER="/auth/tenant/viewUser",t.SETTING_GLOBAL_DINKY="/settings/globalsetting/dinky",t.SETTING_GLOBAL_DINKY_EDIT="/settings/globalsetting/dinky/edit",t.SETTING_GLOBAL_FLINK="/settings/globalsetting/flink",t.SETTING_GLOBAL_FLINK_EDIT="/settings/globalsetting/flink/edit",t.SETTING_GLOBAL_MAVEN="/settings/globalsetting/maven",t.SETTING_GLOBAL_MAVEN_EDIT="/settings/globalsetting/maven/edit",t.SETTING_GLOBAL_DS="/settings/globalsetting/ds",t.SETTING_GLOBAL_DS_EDIT="/settings/globalsetting/ds/edit",t.SETTING_GLOBAL_LDAP="/settings/globalsetting/ldap",t.SETTING_GLOBAL_LDAP_EDIT="/settings/globalsetting/ldap/edit",t.SETTING_GLOBAL_METRICS="/settings/globalsetting/metrics",t.SETTING_GLOBAL_METRICS_EDIT="/settings/globalsetting/metrics/edit",t.SETTING_GLOBAL_RESOURCE="/settings/globalsetting/resource",t.SETTING_GLOBAL_RESOURCE_EDIT="/settings/globalsetting/resource/edit",t.SYSTEM_SETTING_INFO_LOG_LIST="/settings/systemlog/loglist",t.SYSTEM_SETTING_INFO_ROOT_LOG="/settings/systemlog/rootlog",t.SYSTEM_ALERT_RULE_ADD="/settings/alertrule/add",t.SYSTEM_ALERT_RULE_EDIT="/settings/alertrule/edit",t.SYSTEM_ALERT_RULE_DELETE="/settings/alertrule/delete",t}({})}}]);
