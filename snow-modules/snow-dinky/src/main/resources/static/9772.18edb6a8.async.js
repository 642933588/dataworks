!(function(){var $1=Object.defineProperty;var H1=(bt,O,V)=>O in bt?$1(bt,O,{enumerable:!0,configurable:!0,writable:!0,value:V}):bt[O]=V;var g1=(bt,O,V)=>(H1(bt,typeof O!="symbol"?O+"":O,V),V);(self.webpackChunkdinky_web=self.webpackChunkdinky_web||[]).push([[9772],{46482:function(bt,O,V){"use strict";var J;J={value:!0},O.o=void 0;var ie=V(79298);Object.defineProperty(O,"o",{enumerable:!0,get:function(){return ie.SplitPane}})},18127:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Pane=void 0;const J=V(67294),ie={position:"relative",outline:"none",border:0,overflow:"hidden",display:"flex",flexBasis:"auto"};O.Pane=J.memo(({size:T,minSize:b,split:u,className:a,forwardRef:o,children:l})=>{const r=Object.assign(Object.assign({},ie),{flexGrow:T,flexShrink:T});u==="vertical"?(r.width=0,r.height="100%",r.minWidth=b):(r.width="100%",r.height=0,r.minHeight=b);const e=["Pane",u,a].join(" ");return J.createElement("div",{className:e,style:r,ref:o},l)}),O.Pane.displayName="Pane"},42317:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Resizer=void 0;const J=V(67294),{useCallback:ie}=J;O.Resizer=J.memo(({split:T,className:b,index:u,onDragStarted:a})=>{const o=ie(e=>{e.preventDefault(),a(u,e)},[u,a]),l=ie(e=>{e.preventDefault(),a(u,e.touches[0])},[u,a]),r=["Resizer",T,b].join(" ");return J.createElement("span",{role:"presentation",className:r,style:{flex:"none"},onMouseDown:o,onTouchStart:l})}),O.Resizer.displayName="Resizer"},79298:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.SplitPane=void 0;const J=V(67294),{useCallback:ie,useRef:T,useState:b,useMemo:u,useEffect:a}=J,o=V(18127),l=V(42317),r=V(70781),e=50;function t(x,N){return typeof x=="object"&&x&&x.key!=null?"key."+x.key:"index."+N}function s(x,N){if(typeof N=="number"){if(N>0)return N}else if(N instanceof Array){const F=N[x];if(F>0)return F}return e}function h(x,N){if(N){const F=N[x];if(F>=0)return F}return 1}function m(x,N,F,ae){if(!F||N<0||N+1>=x.length)return 0;const $=s(N,ae),te=s(N+1,ae),fe=x[N]+F,B=x[N+1]-F;if(F<0&&fe<$){const he=fe-$,z=m(x,N-1,he,ae);F-=he-z}else if(F>0&&B<te){const he=te-B,z=m(x,N+1,he,ae);F-=he-z}return x[N]+=F,x[N+1]-=F,F}const d={split:"vertical",className:""};function v(x){const{children:N,split:F,defaultSizes:ae,minSize:$,onDragStarted:te,onChange:fe,onDragFinished:B}=x,[he,z]=b(new Map),ee=T(new Map),pe=ie(Ce=>{const xe=N.map((Oe,Le)=>he.get(t(Oe,Le))||h(Le,ae));if(Ce){const{offset:Oe,extraState:{index:Le}}=Ce;m(xe,Le,Oe,$)}return xe},[N,ae,$,he]),S=ie(Ce=>{const xe=pe(Ce);z(new Map(N.map((Oe,Le)=>[t(Oe,Le),xe[Le]]))),B&&B(xe)},[N,pe,B]),[q,M]=(0,r.useDragState)(F,S),I=u(()=>pe(q),[q,pe]),j=q?q.extraState:null;a(()=>{fe&&q&&fe(I)},[q,I,fe]);const ue=u(()=>{const Ce=ee.current;return ee.current=new Map,N.map((xe,Oe)=>{const Le=t(xe,Oe),Ge=Ce.get(Le)||J.createRef();ee.current.set(Le,Ge);const He=s(Oe,$);return{key:Le,node:xe,ref:Ge,minSize:He}})},[N,$]),se=u(()=>ue.map((Ce,xe)=>{const Oe=I[xe];return Object.assign(Object.assign({},Ce),{size:Oe})}),[ue,I]),Ee=ie((Ce,xe)=>{const Oe=F==="vertical"?"width":"height",Le=new Map(ue.map(({key:Ge,ref:He})=>{const Et=He.current?He.current.getBoundingClientRect()[Oe]:0;return[Ge,Et]}));te&&te(),M(xe,{index:Ce}),z(Le)},[M,ue,te,F]);return{childPanes:se,resizeState:j,handleDragStart:Ee}}O.SplitPane=J.memo(x=>{const N=Object.assign(Object.assign({},d),x),{split:F,className:ae,resizerClassName:$}=N,{childPanes:te,resizeState:fe,handleDragStart:B}=v(N),z=Object.assign({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden"},F==="vertical"?{left:0,right:0,flexDirection:"row"}:{bottom:0,top:0,flexDirection:"column",minHeight:"100%",width:"100%"}),ee=["SplitPane",F,ae].join(" "),pe={position:"absolute",top:0,right:0,bottom:0,left:0},S=["DragLayer",F,fe?"resizing":"",ae].join(" "),q=[];return te.forEach(({key:M,node:I,ref:j,size:ue,minSize:se},Ee)=>{if(Ee!==0){const Ce=fe&&fe.index===Ee-1;q.push(J.createElement(l.Resizer,{key:"resizer."+Ee,split:F,className:ae+(Ce?" resizing":"")+($?` ${$}`:""),index:Ee-1,onDragStarted:B}))}q.push(J.createElement(o.Pane,{key:"pane."+M,forwardRef:j,size:ue,minSize:se,split:F,className:ae},I))}),J.createElement("div",{className:ee,style:z},J.createElement("div",{className:S,style:pe}),q)}),O.SplitPane.displayName="SplitPane"},70781:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.useDragState=O.useEventListener=void 0;const J=V(67294),ie=V(73935),{useCallback:T,useMemo:b,useState:u,useEffect:a}=J;function o(e,t){a(()=>{if(t)return document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}},[e,t])}O.useEventListener=o;function l(e,t){const[s,h]=u(null),[m,d]=u(0),v=T(($,te)=>{const fe=e==="vertical"?$.clientX:$.clientY;h([te,fe]),d(fe)},[e]),[x,N]=b(()=>{if(!s)return[null,void 0];const[$,te]=s,fe={offset:m-te,extraState:$};return[fe,()=>{ie.unstable_batchedUpdates(()=>{h(null),t(fe)})}]},[m,s,t]),[F,ae]=b(()=>{if(!s)return[void 0,void 0];const $=fe=>{const B=e==="vertical"?fe.clientX:fe.clientY;d(B)};return[$,fe=>{$(fe.touches[0])}]},[s,e]);return{beginDrag:v,dragState:x,onMouseMove:F,onTouchMove:ae,onMouseUp:N}}function r(e,t){const{beginDrag:s,dragState:h,onMouseMove:m,onTouchMove:d,onMouseUp:v}=l(e,t);return o("mousemove",m),o("touchmove",d),o("mouseup",v),[h,s]}O.useDragState=r},64317:function(bt,O,V){"use strict";var J=V(1413),ie=V(45987),T=V(22270),b=V(67294),u=V(66758),a=V(31649),o=V(85893),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],r=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],e=function(v,x){var N=v.fieldProps,F=v.children,ae=v.params,$=v.proFieldProps,te=v.mode,fe=v.valueEnum,B=v.request,he=v.showSearch,z=v.options,ee=(0,ie.Z)(v,l),pe=(0,b.useContext)(u.Z);return(0,o.jsx)(a.Z,(0,J.Z)((0,J.Z)({valueEnum:(0,T.h)(fe),request:B,params:ae,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,J.Z)({options:z,mode:te,showSearch:he,getPopupContainer:pe.getPopupContainer},N),ref:x,proFieldProps:$},ee),{},{children:F}))},t=b.forwardRef(function(d,v){var x=d.fieldProps,N=d.children,F=d.params,ae=d.proFieldProps,$=d.mode,te=d.valueEnum,fe=d.request,B=d.options,he=(0,ie.Z)(d,r),z=(0,J.Z)({options:B,mode:$||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},x),ee=(0,b.useContext)(u.Z);return(0,o.jsx)(a.Z,(0,J.Z)((0,J.Z)({valueEnum:(0,T.h)(te),request:fe,params:F,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,J.Z)({getPopupContainer:ee.getPopupContainer},z),ref:v,proFieldProps:ae},he),{},{children:N}))}),s=b.forwardRef(e),h=t,m=s;m.SearchSelect=h,m.displayName="ProFormComponent",O.Z=m},20499:function(){},64851:function(){},59518:function(){},26199:function(){},14156:function(){},71468:function(){},48871:function(){},9871:function(){},25612:function(){},92777:function(){},20159:function(){},6727:function(){},27794:function(bt,O){"use strict";var V;V={value:!0};var J;(function(S){S.TextureCompressionBC="texture-compression-bc"})(J=O.UX||(O.UX={}));var ie;(function(S){S.ClampToEdge="clamp-to-edge",S.Repeat="repeat",S.MirrorRepeat="mirror-repeat"})(ie=O.OB||(O.OB={}));var T;(function(S){S.UniformBuffer="uniform-buffer",S.StorageBuffer="storage-buffer",S.ReadonlyStorageBuffer="readonly-storage-buffer",S.Sampler="sampler",S.ComparisonSampler="comparison-sampler",S.SampledTexture="sampled-texture",S.ReadonlyStorageTexture="readonly-storage-texture",S.WriteonlyStorageTexture="writeonly-storage-texture"})(T=O.$l||(O.$l={}));var b;(function(S){S.Zero="zero",S.One="one",S.SrcColor="src-color",S.OneMinusSrcColor="one-minus-src-color",S.SrcAlpha="src-alpha",S.OneMinusSrcAlpha="one-minus-src-alpha",S.DstColor="dst-color",S.OneMinusDstColor="one-minus-dst-color",S.DstAlpha="dst-alpha",S.OneMinusDstAlpha="one-minus-dst-alpha",S.SrcAlphaSaturated="src-alpha-saturated",S.BlendColor="blend-color",S.OneMinusBlendColor="one-minus-blend-color"})(b=O.zi||(O.zi={}));var u;(function(S){S.Add="add",S.Subtract="subtract",S.ReverseSubtract="reverse-subtract",S.Min="min",S.Max="max"})(u=O.db||(O.db={}));var a;(function(S){S.Never="never",S.Less="less",S.Equal="equal",S.LessEqual="less-equal",S.Greater="greater",S.NotEqual="not-equal",S.GreaterEqual="greater-equal",S.Always="always"})(a=O.wb||(O.wb={}));var o;(function(S){S.None="none",S.Front="front",S.Back="back"})(o=O.Wf||(O.Wf={}));var l;(function(S){S.Nearest="nearest",S.Linear="linear"})(l=O.X9||(O.X9={}));var r;(function(S){S.CCW="ccw",S.CW="cw"})(r=O.zX||(O.zX={}));var e;(function(S){S.Uint16="uint16",S.Uint32="uint32"})(e=O.iD||(O.iD={}));var t;(function(S){S.Vertex="vertex",S.Instance="instance"})(t=O.V||(O.V={}));var s;(function(S){S.Load="load"})(s=O.Ws||(O.Ws={}));var h;(function(S){S.PointList="point-list",S.LineList="line-list",S.LineStrip="line-strip",S.TriangleList="triangle-list",S.TriangleStrip="triangle-strip"})(h=O.YV||(O.YV={}));var m;(function(S){S.Keep="keep",S.Zero="zero",S.Replace="replace",S.Invert="invert",S.IncrementClamp="increment-clamp",S.DecrementClamp="decrement-clamp",S.IncrementWrap="increment-wrap",S.DecrementWrap="decrement-wrap"})(m=O.xS||(O.xS={}));var d;(function(S){S.Store="store",S.Clear="clear"})(d=O.EG||(O.EG={}));var v;(function(S){S.E1d="1d",S.E2d="2d",S.E3d="3d"})(v=O.kd||(O.kd={}));var x;(function(S){S.R8Unorm="r8unorm",S.R8Snorm="r8snorm",S.R8Uint="r8uint",S.R8Sint="r8sint",S.R16Uint="r16uint",S.R16Sint="r16sint",S.R16Float="r16float",S.RG8Unorm="rg8unorm",S.RG8Snorm="rg8snorm",S.RG8Uint="rg8uint",S.RG8Sint="rg8sint",S.R32Uint="r32uint",S.R32Sint="r32sint",S.R32Float="r32float",S.RG16Uint="rg16uint",S.RG16Sint="rg16sint",S.RG16Float="rg16float",S.RGBA8Unorm="rgba8unorm",S.RGBA8UnormSRGB="rgba8unorm-srgb",S.RGBA8Snorm="rgba8snorm",S.RGBA8Uint="rgba8uint",S.RGBA8Sint="rgba8sint",S.BGRA8Unorm="bgra8unorm",S.BGRA8UnormSRGB="bgra8unorm-srgb",S.RGB10A2Unorm="rgb10a2unorm",S.RG11B10Float="rg11b10float",S.RG32Uint="rg32uint",S.RG32Sint="rg32sint",S.RG32Float="rg32float",S.RGBA16Uint="rgba16uint",S.RGBA16Sint="rgba16sint",S.RGBA16Float="rgba16float",S.RGBA32Uint="rgba32uint",S.RGBA32Sint="rgba32sint",S.RGBA32Float="rgba32float",S.Depth32Float="depth32float",S.Depth24Plus="depth24plus",S.Depth24PlusStencil8="depth24plus-stencil8"})(x=O.EV||(O.EV={}));var N;(function(S){S.Float="float",S.Sint="sint",S.Uint="uint"})(N=O.Ek||(O.Ek={}));var F;(function(S){S.E1d="1d",S.E2d="2d",S.E2dArray="2d-array",S.Cube="cube",S.CubeArray="cube-array",S.E3d="3d"})(F=O.p_||(O.p_={}));var ae;(function(S){S.Uchar2="uchar2",S.Uchar4="uchar4",S.Char2="char2",S.Char4="char4",S.Uchar2Norm="uchar2norm",S.Uchar4Norm="uchar4norm",S.Char2Norm="char2norm",S.Char4Norm="char4norm",S.Ushort2="ushort2",S.Ushort4="ushort4",S.Short2="short2",S.Short4="short4",S.Ushort2Norm="ushort2norm",S.Ushort4Norm="ushort4norm",S.Short2Norm="short2norm",S.Short4Norm="short4norm",S.Half2="half2",S.Half4="half4",S.Float="float",S.Float2="float2",S.Float3="float3",S.Float4="float4",S.Uint="uint",S.Uint2="uint2",S.Uint3="uint3",S.Uint4="uint4",S.Int="int",S.Int2="int2",S.Int3="int3",S.Int4="int4"})(ae=O.gB||(O.gB={}));var $;(function(S){S.All="all",S.StencilOnly="stencil-only",S.DepthOnly="depth-only"})($=O.H7||(O.H7={}));var te;(function(S){S.Error="error",S.Warning="warning",S.Info="info"})(te=O.mj||(O.mj={}));var fe;(function(S){S.Occlusion="occlusion"})(fe=O.xL||(O.xL={}));var B;(function(S){S[S.MapRead=1]="MapRead",S[S.MapWrite=2]="MapWrite",S[S.CopySrc=4]="CopySrc",S[S.CopyDst=8]="CopyDst",S[S.Index=16]="Index",S[S.Vertex=32]="Vertex",S[S.Uniform=64]="Uniform",S[S.Storage=128]="Storage",S[S.Indirect=256]="Indirect",S[S.QueryResolve=512]="QueryResolve"})(B=O.FB||(O.FB={}));var he;(function(S){S[S.Red=1]="Red",S[S.Green=2]="Green",S[S.Blue=4]="Blue",S[S.Alpha=8]="Alpha",S[S.All=15]="All"})(he=O.Yw||(O.Yw={}));var z;(function(S){S[S.Vertex=1]="Vertex",S[S.Fragment=2]="Fragment",S[S.Compute=4]="Compute"})(z=O.$X||(O.$X={}));var ee;(function(S){S[S.CopySrc=1]="CopySrc",S[S.CopyDst=2]="CopyDst",S[S.Sampled=4]="Sampled",S[S.Storage=8]="Storage",S[S.OutputAttachment=16]="OutputAttachment"})(ee=O.v2||(O.v2={}));var pe;(function(S){S[S.Read=1]="Read",S[S.Write=2]="Write"})(pe=O.gc||(O.gc={}))},48404:function(bt,O){"use strict";var V;V={value:!0};var J;(function(S){S.TextureCompressionBC="texture-compression-bc"})(J=O.UX||(O.UX={}));var ie;(function(S){S.ClampToEdge="clamp-to-edge",S.Repeat="repeat",S.MirrorRepeat="mirror-repeat"})(ie=O.OB||(O.OB={}));var T;(function(S){S.UniformBuffer="uniform-buffer",S.StorageBuffer="storage-buffer",S.ReadonlyStorageBuffer="readonly-storage-buffer",S.Sampler="sampler",S.ComparisonSampler="comparison-sampler",S.SampledTexture="sampled-texture",S.ReadonlyStorageTexture="readonly-storage-texture",S.WriteonlyStorageTexture="writeonly-storage-texture"})(T=O.$l||(O.$l={}));var b;(function(S){S.Zero="zero",S.One="one",S.SrcColor="src-color",S.OneMinusSrcColor="one-minus-src-color",S.SrcAlpha="src-alpha",S.OneMinusSrcAlpha="one-minus-src-alpha",S.DstColor="dst-color",S.OneMinusDstColor="one-minus-dst-color",S.DstAlpha="dst-alpha",S.OneMinusDstAlpha="one-minus-dst-alpha",S.SrcAlphaSaturated="src-alpha-saturated",S.BlendColor="blend-color",S.OneMinusBlendColor="one-minus-blend-color"})(b=O.zi||(O.zi={}));var u;(function(S){S.Add="add",S.Subtract="subtract",S.ReverseSubtract="reverse-subtract",S.Min="min",S.Max="max"})(u=O.db||(O.db={}));var a;(function(S){S.Never="never",S.Less="less",S.Equal="equal",S.LessEqual="less-equal",S.Greater="greater",S.NotEqual="not-equal",S.GreaterEqual="greater-equal",S.Always="always"})(a=O.wb||(O.wb={}));var o;(function(S){S.None="none",S.Front="front",S.Back="back"})(o=O.Wf||(O.Wf={}));var l;(function(S){S.Nearest="nearest",S.Linear="linear"})(l=O.X9||(O.X9={}));var r;(function(S){S.CCW="ccw",S.CW="cw"})(r=O.zX||(O.zX={}));var e;(function(S){S.Uint16="uint16",S.Uint32="uint32"})(e=O.iD||(O.iD={}));var t;(function(S){S.Vertex="vertex",S.Instance="instance"})(t=O.V||(O.V={}));var s;(function(S){S.Load="load"})(s=O.Ws||(O.Ws={}));var h;(function(S){S.PointList="point-list",S.LineList="line-list",S.LineStrip="line-strip",S.TriangleList="triangle-list",S.TriangleStrip="triangle-strip"})(h=O.YV||(O.YV={}));var m;(function(S){S.Keep="keep",S.Zero="zero",S.Replace="replace",S.Invert="invert",S.IncrementClamp="increment-clamp",S.DecrementClamp="decrement-clamp",S.IncrementWrap="increment-wrap",S.DecrementWrap="decrement-wrap"})(m=O.xS||(O.xS={}));var d;(function(S){S.Store="store",S.Clear="clear"})(d=O.EG||(O.EG={}));var v;(function(S){S.E1d="1d",S.E2d="2d",S.E3d="3d"})(v=O.kd||(O.kd={}));var x;(function(S){S.R8Unorm="r8unorm",S.R8Snorm="r8snorm",S.R8Uint="r8uint",S.R8Sint="r8sint",S.R16Uint="r16uint",S.R16Sint="r16sint",S.R16Float="r16float",S.RG8Unorm="rg8unorm",S.RG8Snorm="rg8snorm",S.RG8Uint="rg8uint",S.RG8Sint="rg8sint",S.R32Uint="r32uint",S.R32Sint="r32sint",S.R32Float="r32float",S.RG16Uint="rg16uint",S.RG16Sint="rg16sint",S.RG16Float="rg16float",S.RGBA8Unorm="rgba8unorm",S.RGBA8UnormSRGB="rgba8unorm-srgb",S.RGBA8Snorm="rgba8snorm",S.RGBA8Uint="rgba8uint",S.RGBA8Sint="rgba8sint",S.BGRA8Unorm="bgra8unorm",S.BGRA8UnormSRGB="bgra8unorm-srgb",S.RGB10A2Unorm="rgb10a2unorm",S.RG11B10Float="rg11b10float",S.RG32Uint="rg32uint",S.RG32Sint="rg32sint",S.RG32Float="rg32float",S.RGBA16Uint="rgba16uint",S.RGBA16Sint="rgba16sint",S.RGBA16Float="rgba16float",S.RGBA32Uint="rgba32uint",S.RGBA32Sint="rgba32sint",S.RGBA32Float="rgba32float",S.Depth32Float="depth32float",S.Depth24Plus="depth24plus",S.Depth24PlusStencil8="depth24plus-stencil8"})(x=O.EV||(O.EV={}));var N;(function(S){S.Float="float",S.Sint="sint",S.Uint="uint"})(N=O.Ek||(O.Ek={}));var F;(function(S){S.E1d="1d",S.E2d="2d",S.E2dArray="2d-array",S.Cube="cube",S.CubeArray="cube-array",S.E3d="3d"})(F=O.p_||(O.p_={}));var ae;(function(S){S.Uchar2="uchar2",S.Uchar4="uchar4",S.Char2="char2",S.Char4="char4",S.Uchar2Norm="uchar2norm",S.Uchar4Norm="uchar4norm",S.Char2Norm="char2norm",S.Char4Norm="char4norm",S.Ushort2="ushort2",S.Ushort4="ushort4",S.Short2="short2",S.Short4="short4",S.Ushort2Norm="ushort2norm",S.Ushort4Norm="ushort4norm",S.Short2Norm="short2norm",S.Short4Norm="short4norm",S.Half2="half2",S.Half4="half4",S.Float="float",S.Float2="float2",S.Float3="float3",S.Float4="float4",S.Uint="uint",S.Uint2="uint2",S.Uint3="uint3",S.Uint4="uint4",S.Int="int",S.Int2="int2",S.Int3="int3",S.Int4="int4"})(ae=O.gB||(O.gB={}));var $;(function(S){S.All="all",S.StencilOnly="stencil-only",S.DepthOnly="depth-only"})($=O.H7||(O.H7={}));var te;(function(S){S.Error="error",S.Warning="warning",S.Info="info"})(te=O.mj||(O.mj={}));var fe;(function(S){S.Occlusion="occlusion"})(fe=O.xL||(O.xL={}));var B;(function(S){S[S.MapRead=1]="MapRead",S[S.MapWrite=2]="MapWrite",S[S.CopySrc=4]="CopySrc",S[S.CopyDst=8]="CopyDst",S[S.Index=16]="Index",S[S.Vertex=32]="Vertex",S[S.Uniform=64]="Uniform",S[S.Storage=128]="Storage",S[S.Indirect=256]="Indirect",S[S.QueryResolve=512]="QueryResolve"})(B=O.FB||(O.FB={}));var he;(function(S){S[S.Red=1]="Red",S[S.Green=2]="Green",S[S.Blue=4]="Blue",S[S.Alpha=8]="Alpha",S[S.All=15]="All"})(he=O.Yw||(O.Yw={}));var z;(function(S){S[S.Vertex=1]="Vertex",S[S.Fragment=2]="Fragment",S[S.Compute=4]="Compute"})(z=O.$X||(O.$X={}));var ee;(function(S){S[S.CopySrc=1]="CopySrc",S[S.CopyDst=2]="CopyDst",S[S.Sampled=4]="Sampled",S[S.Storage=8]="Storage",S[S.OutputAttachment=16]="OutputAttachment"})(ee=O.v2||(O.v2={}));var pe;(function(S){S[S.Read=1]="Read",S[S.Write=2]="Write"})(pe=O.gc||(O.gc={}))},48240:function(bt,O,V){"use strict";V.d(O,{Vq:function(){return fc}});const J=i=>typeof i=="string",ie=i=>{const c=Object.create(null);return g=>c[g]||(c[g]=i(g))},T=/-(\w)/g,b=ie(i=>i.replace(T,(c,g)=>g?g.toUpperCase():"")),u=Array.isArray,a=i=>typeof i=="number",o=i=>Number.isNaN(Number(i)),l=i=>{const c=parseFloat(i);return o(c)?i:c},r=i=>i!==null&&typeof i=="object",e=i=>{if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){const c=[];return i.forEach(g=>{c.push(g)}),c.map(g=>e(g))}if(typeof i=="object"&&i!=={}){const c=Object.assign({},i);return Object.keys(c).forEach(g=>{c[g]=e(c[g])}),c}return i},t=(i,c)=>{const g=i[c];return r(g)?g.cell:g},s=(i,c,g)=>{const y=[];for(let E=0;E<i;E++)y[E]=0;return g&&g.forEach(E=>{const D=t(E,"source"),G=t(E,"target");D&&(y[c[D]]+=1),G&&(y[c[G]]+=1)}),y},h=i=>{const c=[],g=i.length;for(let y=0;y<g;y+=1){c[y]=[];for(let E=0;E<g;E+=1)y===E?c[y][E]=0:i[y][E]===0||!i[y][E]?c[y][E]=1/0:c[y][E]=i[y][E]}for(let y=0;y<g;y+=1)for(let E=0;E<g;E+=1)for(let D=0;D<g;D+=1)c[E][D]>c[E][y]+c[y][D]&&(c[E][D]=c[E][y]+c[y][D]);return c},m=(i,c)=>{const{nodes:g,edges:y}=i,E=[],D={};if(!g)throw new Error("invalid nodes data!");return g&&g.forEach((G,K)=>{D[G.id]=K;const re=[];E.push(re)}),y&&y.forEach(G=>{const K=t(G,"source"),re=t(G,"target"),de=D[K],we=D[re];E[de][we]=1,c||(E[we][de]=1)}),E},d=(i,c)=>{const g=[];return i.forEach(y=>{const E=[];y.forEach(D=>{E.push(D*c)}),g.push(E)}),g},v=(i,c)=>{if(i&&i.children){for(let g=i.children.length-1;g>=0;g--)if(!v(i.children[g],c))return}return!!c(i)},x=(i,c)=>{typeof c=="function"&&v(i,c)},N=i=>typeof i=="function",F=new Map,ae=(i,c)=>{if(F.get(i)&&console.warn(`The layout with the name ${i} exists already, it will be overridden`),isObject(c)){class g extends Base{constructor(E){super();const D=this,G={},K=D.getDefaultCfg();Object.assign(G,K,c,E),Object.keys(G).forEach(re=>{const de=G[re];D[re]=de})}}F.set(i,g)}else F.set(i,c);return F.get(i)},$=i=>{F.has(i)&&F.delete(i)},te=i=>F.has(i)?F.get(i):null;class fe{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(c){return this.init(c),this.execute(!0)}init(c){this.nodes=c.nodes||[],this.edges=c.edges||[],this.combos=c.combos||[]}execute(c){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(c){c&&Object.assign(this,c)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class B extends fe{constructor(c){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodeSize=30,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(c)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const c=this,g=c.nodes,y=c.edges,E=g.length,D=c.begin;if(E===0)return c.onLayoutEnd&&c.onLayoutEnd(),{nodes:g,edges:y};if(E===1)return g[0].x=D[0],g[0].y=D[1],c.onLayoutEnd&&c.onLayoutEnd(),{nodes:g,edges:y};const G=[];g.forEach(we=>{G.push(we)});const K={};if(G.forEach((we,Pe)=>{K[we.id]=Pe}),(c.sortBy==="degree"||!J(c.sortBy)||G[0][c.sortBy]===void 0)&&(c.sortBy="degree",o(g[0].degree))){const we=s(G.length,K,y);G.forEach((Pe,We)=>{Pe.degree=we[We]})}G.sort((we,Pe)=>Pe[c.sortBy]-we[c.sortBy]),!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight);const re=c.rows,de=c.cols!=null?c.cols:c.columns;if(c.cells=E,re!=null&&de!=null?(c.rows=re,c.cols=de):re!=null&&de==null?(c.rows=re,c.cols=Math.ceil(c.cells/c.rows)):re==null&&de!=null?(c.cols=de,c.rows=Math.ceil(c.cells/c.cols)):(c.splits=Math.sqrt(c.cells*c.height/c.width),c.rows=Math.round(c.splits),c.cols=Math.round(c.width/c.height*c.splits)),c.cols*c.rows>c.cells){const we=c.small(),Pe=c.large();(we-1)*Pe>=c.cells?c.small(we-1):(Pe-1)*we>=c.cells&&c.large(Pe-1)}else for(;c.cols*c.rows<c.cells;){const we=c.small(),Pe=c.large();(Pe+1)*we>=c.cells?c.large(Pe+1):c.small(we+1)}c.cellWidth=c.width/c.cols,c.cellHeight=c.height/c.rows,c.condense&&(c.cellWidth=0,c.cellHeight=0),c.preventOverlap&&G.forEach(we=>{(!we.x||!we.y)&&(we.x=0,we.y=0);let Pe,We;u(we.size)?(Pe=we.size[0],We=we.size[1]):a(we.size)?(Pe=we.size,We=we.size):r(we.size)&&(Pe=we.size.width,We=we.size.height),(Pe===void 0||We===void 0)&&(u(c.nodeSize)?(Pe=c.nodeSize[0],We=c.nodeSize[1]):a(c.nodeSize)?(Pe=c.nodeSize,We=c.nodeSize):(Pe=30,We=30));const je=c.preventOverlapPadding,tt=Pe+je,Qe=We+je;c.cellWidth=Math.max(c.cellWidth,tt),c.cellHeight=Math.max(c.cellHeight,Qe)}),c.cellUsed={},c.row=0,c.col=0,c.id2manPos={};for(let we=0;we<G.length;we++){const Pe=G[we];let We;if(c.position&&(We=c.position(Pe)),We&&(We.row!==void 0||We.col!==void 0)){const je={row:We.row,col:We.col};if(je.col===void 0)for(je.col=0;c.used(je.row,je.col);)je.col++;else if(je.row===void 0)for(je.row=0;c.used(je.row,je.col);)je.row++;c.id2manPos[Pe.id]=je,c.use(je.row,je.col)}c.getPos(Pe)}return c.onLayoutEnd&&c.onLayoutEnd(),{edges:y,nodes:G}}small(c){const g=this;let y;const E=g.rows||5,D=g.cols||5;return c==null?y=Math.min(E,D):Math.min(E,D)===g.rows?g.rows=c:g.cols=c,y}large(c){const g=this;let y;const E=g.rows||5,D=g.cols||5;return c==null?y=Math.max(E,D):Math.max(E,D)===g.rows?g.rows=c:g.cols=c,y}used(c,g){return this.cellUsed[`c-${c}-${g}`]||!1}use(c,g){const y=this;y.cellUsed[`c-${c}-${g}`]=!0}moveToNextCell(){const c=this,g=c.cols||5;c.col++,c.col>=g&&(c.col=0,c.row++)}getPos(c){const g=this,y=g.begin,E=g.cellWidth,D=g.cellHeight;let G,K;const re=g.id2manPos[c.id];if(re)G=re.col*E+E/2+y[0],K=re.row*D+D/2+y[1];else{for(;g.used(g.row,g.col);)g.moveToNextCell();G=g.col*E+E/2+y[0],K=g.row*D+D/2+y[1],g.use(g.row,g.col),g.moveToNextCell()}c.x=G,c.y=K}getType(){return"grid"}}const he=(i,c)=>{let g;return i?a(i)?g=y=>i:g=i:g=y=>c||1,g};class z extends fe{constructor(c){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(c)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0}}execute(){var c,g;const y=this,E=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!E||E.length===0){(c=y.onLayoutEnd)===null||c===void 0||c.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);const D=y.center;if(E.length===1){E[0].x=D[0],E[0].y=D[1],(g=y.onLayoutEnd)===null||g===void 0||g.call(y);return}const G={},K={};E.forEach((Pe,We)=>{a(Pe.x)||(Pe.x=Math.random()*y.width),a(Pe.y)||(Pe.y=Math.random()*y.height),G[Pe.id]=Pe,K[Pe.id]=We}),y.nodeMap=G,y.nodeIdxMap=K,y.linkDistance=he(y.linkDistance,1),y.nodeStrength=he(y.nodeStrength,1),y.edgeStrength=he(y.edgeStrength,1);const re=y.nodeSize;let de;if(y.preventOverlap){const Pe=y.nodeSpacing;let We;a(Pe)?We=()=>Pe:N(Pe)?We=Pe:We=()=>0,re?u(re)?de=je=>(re[0]>re[1]?re[0]:re[1])+We(je):de=je=>re+We(je):de=je=>je.size?u(je.size)?(je.size[0]>je.size[1]?je.size[0]:je.size[1])+We(je):r(je.size)?(je.size.width>je.size.height?je.size.width:je.size.height)+We(je):je.size+We(je):10+We(je)}y.nodeSize=de;const we=y.edges;y.degrees=s(E.length,y.nodeIdxMap,we),y.getMass||(y.getMass=Pe=>y.degrees[y.nodeIdxMap[Pe.id]]||1),y.run()}run(){var c;const g=this,{maxIteration:y,nodes:E,workerEnabled:D,minMovement:G}=g;if(E)if(D){for(let K=0;K<y;K++){const re=g.runOneStep(K);if(g.reachMoveThreshold(E,re,G))break}(c=g.onLayoutEnd)===null||c===void 0||c.call(g)}else{if(typeof window=="undefined")return;let K=0;this.timeInterval=window.setInterval(()=>{var re,de;if(!E)return;const we=g.runOneStep(K)||[];g.reachMoveThreshold(E,we,G)&&((re=g.onLayoutEnd)===null||re===void 0||re.call(g),window.clearInterval(g.timeInterval)),K++,K>=y&&((de=g.onLayoutEnd)===null||de===void 0||de.call(g),window.clearInterval(g.timeInterval))},0)}}reachMoveThreshold(c,g,y){let E=0;return c.forEach((D,G)=>{const K=D.x-g[G].x,re=D.y-g[G].y;E+=Math.sqrt(K*K+re*re)}),E/=c.length,E<y}runOneStep(c){var g;const y=this,{nodes:E,edges:D}=y,G=[],K=[];if(!E)return;E.forEach((we,Pe)=>{G[2*Pe]=0,G[2*Pe+1]=0,K[2*Pe]=0,K[2*Pe+1]=0}),y.calRepulsive(G,E),D&&y.calAttractive(G,D),y.calGravity(G,E);const re=Math.max(.02,y.interval-c*.002);y.updateVelocity(G,K,re,E);const de=[];return E.forEach(we=>{de.push({x:we.x,y:we.y})}),y.updatePosition(K,re,E),(g=y.tick)===null||g===void 0||g.call(y),de}calRepulsive(c,g){const y=this,E=y.getMass,D=y.nodeStrength,G=y.factor,K=y.coulombDisScale,re=y.preventOverlap,de=y.nodeSize;g.forEach((we,Pe)=>{const We=E?E(we):1;g.forEach((je,tt)=>{if(Pe>=tt)return;const Qe=we.x-je.x,Je=we.y-je.y,yt=Math.sqrt(Qe*Qe+Je*Je)+.01,Nt=(yt+.1)*K,Jt=Qe/yt,gn=Je/yt,dn=(D(we)+D(je))/2*G/(Nt*Nt),Hn=E?E(je):1;if(c[2*Pe]+=Jt*dn,c[2*Pe+1]+=gn*dn,c[2*tt]-=Jt*dn,c[2*tt+1]-=gn*dn,re&&yt<(de(we)+de(je))/2){const Ur=(D(we)+D(je))/2/(yt*yt);c[2*Pe]+=Jt*Ur/We,c[2*Pe+1]+=gn*Ur/We,c[2*tt]-=Jt*Ur/Hn,c[2*tt+1]-=gn*Ur/Hn}})})}calAttractive(c,g){const y=this,E=y.nodeMap,D=y.nodeIdxMap,G=y.linkDistance,K=y.edgeStrength,re=y.getMass;g.forEach((de,we)=>{const Pe=t(de,"source"),We=t(de,"target"),je=E[Pe],tt=E[We],Qe=tt.x-je.x,Je=tt.y-je.y,yt=Math.sqrt(Qe*Qe+Je*Je)+.01,Nt=Qe/yt,Jt=Je/yt,Hn=((G(de)||1)-yt)*K(de),Ur=D[Pe],Br=D[We],Hi=re?re(je):1,zr=re?re(tt):1;c[2*Ur]-=Nt*Hn/Hi,c[2*Ur+1]-=Jt*Hn/Hi,c[2*Br]+=Nt*Hn/zr,c[2*Br+1]+=Jt*Hn/zr})}calGravity(c,g){const y=this,E=y.center,D=y.gravity,G=y.degrees,K=g.length;for(let re=0;re<K;re++){const de=g[re];let we=de.x-E[0],Pe=de.y-E[1],We=D;if(y.getCenter){const je=y.getCenter(de,G[re]);je&&a(je[0])&&a(je[1])&&a(je[2])&&(we=de.x-je[0],Pe=de.y-je[1],We=je[2])}We&&(c[2*re]-=We*we,c[2*re+1]-=We*Pe)}}updateVelocity(c,g,y,E){const D=this,G=y*D.damping;E.forEach((K,re)=>{let de=c[2*re]*G||.01,we=c[2*re+1]*G||.01;const Pe=Math.sqrt(de*de+we*we);if(Pe>D.maxSpeed){const We=D.maxSpeed/Pe;de=We*de,we=We*we}g[2*re]=de,g[2*re+1]=we})}updatePosition(c,g,y){y.forEach((E,D)=>{if(a(E.fx)&&a(E.fy)){E.x=E.fx,E.y=E.fy;return}const G=c[2*D]*g,K=c[2*D+1]*g;E.x+=G,E.y+=K})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const c=this;c.stop(),c.tick=null,c.nodes=null,c.edges=null,c.destroyed=!0}getType(){return"gForce"}}function ee(i){const c=+this._x.call(null,i),g=+this._y.call(null,i);return pe(this.cover(c,g),c,g,i)}function pe(i,c,g,y){if(isNaN(c)||isNaN(g))return i;var E,D=i._root,G={data:y},K=i._x0,re=i._y0,de=i._x1,we=i._y1,Pe,We,je,tt,Qe,Je,yt,Nt;if(!D)return i._root=G,i;for(;D.length;)if((Qe=c>=(Pe=(K+de)/2))?K=Pe:de=Pe,(Je=g>=(We=(re+we)/2))?re=We:we=We,E=D,!(D=D[yt=Je<<1|Qe]))return E[yt]=G,i;if(je=+i._x.call(null,D.data),tt=+i._y.call(null,D.data),c===je&&g===tt)return G.next=D,E?E[yt]=G:i._root=G,i;do E=E?E[yt]=new Array(4):i._root=new Array(4),(Qe=c>=(Pe=(K+de)/2))?K=Pe:de=Pe,(Je=g>=(We=(re+we)/2))?re=We:we=We;while((yt=Je<<1|Qe)===(Nt=(tt>=We)<<1|je>=Pe));return E[Nt]=D,E[yt]=G,i}function S(i){var c,g,y=i.length,E,D,G=new Array(y),K=new Array(y),re=1/0,de=1/0,we=-1/0,Pe=-1/0;for(g=0;g<y;++g)isNaN(E=+this._x.call(null,c=i[g]))||isNaN(D=+this._y.call(null,c))||(G[g]=E,K[g]=D,E<re&&(re=E),E>we&&(we=E),D<de&&(de=D),D>Pe&&(Pe=D));if(re>we||de>Pe)return this;for(this.cover(re,de).cover(we,Pe),g=0;g<y;++g)pe(this,G[g],K[g],i[g]);return this}function q(i,c){if(isNaN(i=+i)||isNaN(c=+c))return this;var g=this._x0,y=this._y0,E=this._x1,D=this._y1;if(isNaN(g))E=(g=Math.floor(i))+1,D=(y=Math.floor(c))+1;else{for(var G=E-g||1,K=this._root,re,de;g>i||i>=E||y>c||c>=D;)switch(de=(c<y)<<1|i<g,re=new Array(4),re[de]=K,K=re,G*=2,de){case 0:E=g+G,D=y+G;break;case 1:g=E-G,D=y+G;break;case 2:E=g+G,y=D-G;break;case 3:g=E-G,y=D-G;break}this._root&&this._root.length&&(this._root=K)}return this._x0=g,this._y0=y,this._x1=E,this._y1=D,this}function M(){var i=[];return this.visit(function(c){if(!c.length)do i.push(c.data);while(c=c.next)}),i}function I(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function j(i,c,g,y,E){this.node=i,this.x0=c,this.y0=g,this.x1=y,this.y1=E}function ue(i,c,g){var y,E=this._x0,D=this._y0,G,K,re,de,we=this._x1,Pe=this._y1,We=[],je=this._root,tt,Qe;for(je&&We.push(new j(je,E,D,we,Pe)),g==null?g=1/0:(E=i-g,D=c-g,we=i+g,Pe=c+g,g*=g);tt=We.pop();)if(!(!(je=tt.node)||(G=tt.x0)>we||(K=tt.y0)>Pe||(re=tt.x1)<E||(de=tt.y1)<D))if(je.length){var Je=(G+re)/2,yt=(K+de)/2;We.push(new j(je[3],Je,yt,re,de),new j(je[2],G,yt,Je,de),new j(je[1],Je,K,re,yt),new j(je[0],G,K,Je,yt)),(Qe=(c>=yt)<<1|i>=Je)&&(tt=We[We.length-1],We[We.length-1]=We[We.length-1-Qe],We[We.length-1-Qe]=tt)}else{var Nt=i-+this._x.call(null,je.data),Jt=c-+this._y.call(null,je.data),gn=Nt*Nt+Jt*Jt;if(gn<g){var dn=Math.sqrt(g=gn);E=i-dn,D=c-dn,we=i+dn,Pe=c+dn,y=je.data}}return y}function se(i){if(isNaN(we=+this._x.call(null,i))||isNaN(Pe=+this._y.call(null,i)))return this;var c,g=this._root,y,E,D,G=this._x0,K=this._y0,re=this._x1,de=this._y1,we,Pe,We,je,tt,Qe,Je,yt;if(!g)return this;if(g.length)for(;;){if((tt=we>=(We=(G+re)/2))?G=We:re=We,(Qe=Pe>=(je=(K+de)/2))?K=je:de=je,c=g,!(g=g[Je=Qe<<1|tt]))return this;if(!g.length)break;(c[Je+1&3]||c[Je+2&3]||c[Je+3&3])&&(y=c,yt=Je)}for(;g.data!==i;)if(E=g,!(g=g.next))return this;return(D=g.next)&&delete g.next,E?(D?E.next=D:delete E.next,this):c?(D?c[Je]=D:delete c[Je],(g=c[0]||c[1]||c[2]||c[3])&&g===(c[3]||c[2]||c[1]||c[0])&&!g.length&&(y?y[yt]=g:this._root=g),this):(this._root=D,this)}function Ee(i){for(var c=0,g=i.length;c<g;++c)this.remove(i[c]);return this}function Ce(){return this._root}function xe(){var i=0;return this.visit(function(c){if(!c.length)do++i;while(c=c.next)}),i}function Oe(i){var c=[],g,y=this._root,E,D,G,K,re;for(y&&c.push(new j(y,this._x0,this._y0,this._x1,this._y1));g=c.pop();)if(!i(y=g.node,D=g.x0,G=g.y0,K=g.x1,re=g.y1)&&y.length){var de=(D+K)/2,we=(G+re)/2;(E=y[3])&&c.push(new j(E,de,we,K,re)),(E=y[2])&&c.push(new j(E,D,we,de,re)),(E=y[1])&&c.push(new j(E,de,G,K,we)),(E=y[0])&&c.push(new j(E,D,G,de,we))}return this}function Le(i){var c=[],g=[],y;for(this._root&&c.push(new j(this._root,this._x0,this._y0,this._x1,this._y1));y=c.pop();){var E=y.node;if(E.length){var D,G=y.x0,K=y.y0,re=y.x1,de=y.y1,we=(G+re)/2,Pe=(K+de)/2;(D=E[0])&&c.push(new j(D,G,K,we,Pe)),(D=E[1])&&c.push(new j(D,we,K,re,Pe)),(D=E[2])&&c.push(new j(D,G,Pe,we,de)),(D=E[3])&&c.push(new j(D,we,Pe,re,de))}g.push(y)}for(;y=g.pop();)i(y.node,y.x0,y.y0,y.x1,y.y1);return this}function Ge(i){return i[0]}function He(i){return arguments.length?(this._x=i,this):this._x}function Et(i){return i[1]}function Ct(i){return arguments.length?(this._y=i,this):this._y}function Gt(i,c,g){var y=new At(c==null?Ge:c,g==null?Et:g,NaN,NaN,NaN,NaN);return i==null?y:y.addAll(i)}function At(i,c,g,y,E,D){this._x=i,this._y=c,this._x0=g,this._y0=y,this._x1=E,this._y1=D,this._root=void 0}function vt(i){for(var c={data:i.data},g=c;i=i.next;)g=g.next={data:i.data};return c}var cn=Gt.prototype=At.prototype;cn.copy=function(){var i=new At(this._x,this._y,this._x0,this._y0,this._x1,this._y1),c=this._root,g,y;if(!c)return i;if(!c.length)return i._root=vt(c),i;for(g=[{source:c,target:i._root=new Array(4)}];c=g.pop();)for(var E=0;E<4;++E)(y=c.source[E])&&(y.length?g.push({source:y,target:c.target[E]=new Array(4)}):c.target[E]=vt(y));return i},cn.add=ee,cn.addAll=S,cn.cover=q,cn.data=M,cn.extent=I,cn.find=ue,cn.remove=se,cn.removeAll=Ee,cn.root=Ce,cn.size=xe,cn.visit=Oe,cn.visitAfter=Le,cn.x=He,cn.y=Ct;function hn(i){return function(){return i}}function Bn(i){return(i()-.5)*1e-6}var Fn={value:function(){}};function ir(){for(var i=0,c=arguments.length,g={},y;i<c;++i){if(!(y=arguments[i]+"")||y in g||/[\s.]/.test(y))throw new Error("illegal type: "+y);g[y]=[]}return new Nr(g)}function Nr(i){this._=i}function Ei(i,c){return i.trim().split(/^|\s+/).map(function(g){var y="",E=g.indexOf(".");if(E>=0&&(y=g.slice(E+1),g=g.slice(0,E)),g&&!c.hasOwnProperty(g))throw new Error("unknown type: "+g);return{type:g,name:y}})}Nr.prototype=ir.prototype={constructor:Nr,on:function(c,g){var y=this._,E=Ei(c+"",y),D,G=-1,K=E.length;if(arguments.length<2){for(;++G<K;)if((D=(c=E[G]).type)&&(D=ci(y[D],c.name)))return D;return}if(g!=null&&typeof g!="function")throw new Error("invalid callback: "+g);for(;++G<K;)if(D=(c=E[G]).type)y[D]=Ot(y[D],c.name,g);else if(g==null)for(D in y)y[D]=Ot(y[D],c.name,null);return this},copy:function(){var c={},g=this._;for(var y in g)c[y]=g[y].slice();return new Nr(c)},call:function(c,g){if((D=arguments.length-2)>0)for(var y=new Array(D),E=0,D,G;E<D;++E)y[E]=arguments[E+2];if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(G=this._[c],E=0,D=G.length;E<D;++E)G[E].value.apply(g,y)},apply:function(c,g,y){if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(var E=this._[c],D=0,G=E.length;D<G;++D)E[D].value.apply(g,y)}};function ci(i,c){for(var g=0,y=i.length,E;g<y;++g)if((E=i[g]).name===c)return E.value}function Ot(i,c,g){for(var y=0,E=i.length;y<E;++y)if(i[y].name===c){i[y]=Fn,i=i.slice(0,y).concat(i.slice(y+1));break}return g!=null&&i.push({name:c,value:g}),i}var fr=ir,Pi=V(35374),Li=1664525,zn=1013904223,$e=4294967296;function Xt(){var i=1;return function(){return(i=(Li*i+zn)%$e)/$e}}function Rt(i){return i.x}function _t(i){return i.y}var Tt=10,at=Math.PI*(3-Math.sqrt(5));function ce(i){var c,g=1,y=.001,E=1-Math.pow(y,1/300),D=0,G=.6,K=new Map,re=(0,Pi.HT)(Pe),de=fr("tick","end"),we=Xt();i==null&&(i=[]);function Pe(){We(),de.call("tick",c),g<y&&(re.stop(),de.call("end",c))}function We(Qe){var Je,yt=i.length,Nt;Qe===void 0&&(Qe=1);for(var Jt=0;Jt<Qe;++Jt)for(g+=(D-g)*E,K.forEach(function(gn){gn(g)}),Je=0;Je<yt;++Je)Nt=i[Je],Nt.fx==null?Nt.x+=Nt.vx*=G:(Nt.x=Nt.fx,Nt.vx=0),Nt.fy==null?Nt.y+=Nt.vy*=G:(Nt.y=Nt.fy,Nt.vy=0);return c}function je(){for(var Qe=0,Je=i.length,yt;Qe<Je;++Qe){if(yt=i[Qe],yt.index=Qe,yt.fx!=null&&(yt.x=yt.fx),yt.fy!=null&&(yt.y=yt.fy),isNaN(yt.x)||isNaN(yt.y)){var Nt=Tt*Math.sqrt(.5+Qe),Jt=Qe*at;yt.x=Nt*Math.cos(Jt),yt.y=Nt*Math.sin(Jt)}(isNaN(yt.vx)||isNaN(yt.vy))&&(yt.vx=yt.vy=0)}}function tt(Qe){return Qe.initialize&&Qe.initialize(i,we),Qe}return je(),c={tick:We,restart:function(){return re.restart(Pe),c},stop:function(){return re.stop(),c},nodes:function(Je){return arguments.length?(i=Je,je(),K.forEach(tt),c):i},alpha:function(Je){return arguments.length?(g=+Je,c):g},alphaMin:function(Je){return arguments.length?(y=+Je,c):y},alphaDecay:function(Je){return arguments.length?(E=+Je,c):+E},alphaTarget:function(Je){return arguments.length?(D=+Je,c):D},velocityDecay:function(Je){return arguments.length?(G=1-Je,c):1-G},randomSource:function(Je){return arguments.length?(we=Je,K.forEach(tt),c):we},force:function(Je,yt){return arguments.length>1?(yt==null?K.delete(Je):K.set(Je,tt(yt)),c):K.get(Je)},find:function(Je,yt,Nt){var Jt=0,gn=i.length,dn,Hn,Ur,Br,Hi;for(Nt==null?Nt=1/0:Nt*=Nt,Jt=0;Jt<gn;++Jt)Br=i[Jt],dn=Je-Br.x,Hn=yt-Br.y,Ur=dn*dn+Hn*Hn,Ur<Nt&&(Hi=Br,Nt=Ur);return Hi},on:function(Je,yt){return arguments.length>1?(de.on(Je,yt),c):de.on(Je)}}}function ut(){var i,c,g,y,E=hn(-30),D,G=1,K=1/0,re=.81;function de(je){var tt,Qe=i.length,Je=Gt(i,Rt,_t).visitAfter(Pe);for(y=je,tt=0;tt<Qe;++tt)c=i[tt],Je.visit(We)}function we(){if(i){var je,tt=i.length,Qe;for(D=new Array(tt),je=0;je<tt;++je)Qe=i[je],D[Qe.index]=+E(Qe,je,i)}}function Pe(je){var tt=0,Qe,Je,yt=0,Nt,Jt,gn;if(je.length){for(Nt=Jt=gn=0;gn<4;++gn)(Qe=je[gn])&&(Je=Math.abs(Qe.value))&&(tt+=Qe.value,yt+=Je,Nt+=Je*Qe.x,Jt+=Je*Qe.y);je.x=Nt/yt,je.y=Jt/yt}else{Qe=je,Qe.x=Qe.data.x,Qe.y=Qe.data.y;do tt+=D[Qe.data.index];while(Qe=Qe.next)}je.value=tt}function We(je,tt,Qe,Je){if(!je.value)return!0;var yt=je.x-c.x,Nt=je.y-c.y,Jt=Je-tt,gn=yt*yt+Nt*Nt;if(Jt*Jt/re<gn)return gn<K&&(yt===0&&(yt=Bn(g),gn+=yt*yt),Nt===0&&(Nt=Bn(g),gn+=Nt*Nt),gn<G&&(gn=Math.sqrt(G*gn)),c.vx+=yt*je.value*y/gn,c.vy+=Nt*je.value*y/gn),!0;if(je.length||gn>=K)return;(je.data!==c||je.next)&&(yt===0&&(yt=Bn(g),gn+=yt*yt),Nt===0&&(Nt=Bn(g),gn+=Nt*Nt),gn<G&&(gn=Math.sqrt(G*gn)));do je.data!==c&&(Jt=D[je.data.index]*y/gn,c.vx+=yt*Jt,c.vy+=Nt*Jt);while(je=je.next)}return de.initialize=function(je,tt){i=je,g=tt,we()},de.strength=function(je){return arguments.length?(E=typeof je=="function"?je:hn(+je),we(),de):E},de.distanceMin=function(je){return arguments.length?(G=je*je,de):Math.sqrt(G)},de.distanceMax=function(je){return arguments.length?(K=je*je,de):Math.sqrt(K)},de.theta=function(je){return arguments.length?(re=je*je,de):Math.sqrt(re)},de}function Ze(i,c){var g,y=1;i==null&&(i=0),c==null&&(c=0);function E(){var D,G=g.length,K,re=0,de=0;for(D=0;D<G;++D)K=g[D],re+=K.x,de+=K.y;for(re=(re/G-i)*y,de=(de/G-c)*y,D=0;D<G;++D)K=g[D],K.x-=re,K.y-=de}return E.initialize=function(D){g=D},E.x=function(D){return arguments.length?(i=+D,E):i},E.y=function(D){return arguments.length?(c=+D,E):c},E.strength=function(D){return arguments.length?(y=+D,E):y},E}var Wt=V(52677),Ut=V.n(Wt);function jt(i){return i.index}function xt(i,c){var g=i.get(c);if(!g)throw new Error("node not found: "+c);return g}function $t(i){var c=jt,g=Pe,y,E=hn(30),D,G,K,re,de,we=1;i==null&&(i=[]);function Pe(Je){return 1/Math.min(K[Je.source.index],K[Je.target.index])}function We(Je){for(var yt=0,Nt=i.length;yt<we;++yt)for(var Jt=0,gn,dn,Hn,Ur,Br,Hi,zr;Jt<Nt;++Jt)gn=i[Jt],dn=gn.source,Hn=gn.target,Ur=Hn.x+Hn.vx-dn.x-dn.vx||Bn(de),Br=Hn.y+Hn.vy-dn.y-dn.vy||Bn(de),Hi=Math.sqrt(Ur*Ur+Br*Br),Hi=(Hi-D[Jt])/Hi*Je*y[Jt],Ur*=Hi,Br*=Hi,Hn.vx-=Ur*(zr=re[Jt]),Hn.vy-=Br*zr,dn.vx+=Ur*(zr=1-zr),dn.vy+=Br*zr}function je(){if(G){var Je,yt=G.length,Nt=i.length,Jt=new Map(G.map(function(dn,Hn){return[c(dn,Hn,G),dn]})),gn;for(Je=0,K=new Array(yt);Je<Nt;++Je)gn=i[Je],gn.index=Je,Ut()(gn.source)!=="object"&&(gn.source=xt(Jt,gn.source)),Ut()(gn.target)!=="object"&&(gn.target=xt(Jt,gn.target)),K[gn.source.index]=(K[gn.source.index]||0)+1,K[gn.target.index]=(K[gn.target.index]||0)+1;for(Je=0,re=new Array(Nt);Je<Nt;++Je)gn=i[Je],re[Je]=K[gn.source.index]/(K[gn.source.index]+K[gn.target.index]);y=new Array(Nt),tt(),D=new Array(Nt),Qe()}}function tt(){if(G)for(var Je=0,yt=i.length;Je<yt;++Je)y[Je]=+g(i[Je],Je,i)}function Qe(){if(G)for(var Je=0,yt=i.length;Je<yt;++Je)D[Je]=+E(i[Je],Je,i)}return We.initialize=function(Je,yt){G=Je,de=yt,je()},We.links=function(Je){return arguments.length?(i=Je,je(),We):i},We.id=function(Je){return arguments.length?(c=Je,We):c},We.iterations=function(Je){return arguments.length?(we=+Je,We):we},We.strength=function(Je){return arguments.length?(g=typeof Je=="function"?Je:hn(+Je),tt(),We):g},We.distance=function(Je){return arguments.length?(E=typeof Je=="function"?Je:hn(+Je),Qe(),We):E},We}function Un(i){return i.x+i.vx}function qn(i){return i.y+i.vy}function rr(i){var c,g,y,E=1,D=1;typeof i!="function"&&(i=hn(i==null?1:+i));function G(){for(var de,we=c.length,Pe,We,je,tt,Qe,Je,yt=0;yt<D;++yt)for(Pe=Gt(c,Un,qn).visitAfter(K),de=0;de<we;++de)We=c[de],Qe=g[We.index],Je=Qe*Qe,je=We.x+We.vx,tt=We.y+We.vy,Pe.visit(Nt);function Nt(Jt,gn,dn,Hn,Ur){var Br=Jt.data,Hi=Jt.r,zr=Qe+Hi;if(Br){if(Br.index>We.index){var Mi=je-Br.x-Br.vx,si=tt-Br.y-Br.vy,mo=Mi*Mi+si*si;mo<zr*zr&&(Mi===0&&(Mi=Bn(y),mo+=Mi*Mi),si===0&&(si=Bn(y),mo+=si*si),mo=(zr-(mo=Math.sqrt(mo)))/mo*E,We.vx+=(Mi*=mo)*(zr=(Hi*=Hi)/(Je+Hi)),We.vy+=(si*=mo)*zr,Br.vx-=Mi*(zr=1-zr),Br.vy-=si*zr)}return}return gn>je+zr||Hn<je-zr||dn>tt+zr||Ur<tt-zr}}function K(de){if(de.data)return de.r=g[de.data.index];for(var we=de.r=0;we<4;++we)de[we]&&de[we].r>de.r&&(de.r=de[we].r)}function re(){if(c){var de,we=c.length,Pe;for(g=new Array(we),de=0;de<we;++de)Pe=c[de],g[Pe.index]=+i(Pe,de,c)}}return G.initialize=function(de,we){c=de,y=we,re()},G.iterations=function(de){return arguments.length?(D=+de,G):D},G.strength=function(de){return arguments.length?(E=+de,G):E},G.radius=function(de){return arguments.length?(i=typeof de=="function"?de:hn(+de),re(),G):i},G}function xn(i){var c=hn(.1),g,y,E;typeof i!="function"&&(i=hn(i==null?0:+i));function D(K){for(var re=0,de=g.length,we;re<de;++re)we=g[re],we.vx+=(E[re]-we.x)*y[re]*K}function G(){if(g){var K,re=g.length;for(y=new Array(re),E=new Array(re),K=0;K<re;++K)y[K]=isNaN(E[K]=+i(g[K],K,g))?0:+c(g[K],K,g)}}return D.initialize=function(K){g=K,G()},D.strength=function(K){return arguments.length?(c=typeof K=="function"?K:hn(+K),G(),D):c},D.x=function(K){return arguments.length?(i=typeof K=="function"?K:hn(+K),G(),D):i},D}function Or(i){var c=hn(.1),g,y,E;typeof i!="function"&&(i=hn(i==null?0:+i));function D(K){for(var re=0,de=g.length,we;re<de;++re)we=g[re],we.vy+=(E[re]-we.y)*y[re]*K}function G(){if(g){var K,re=g.length;for(y=new Array(re),E=new Array(re),K=0;K<re;++K)y[K]=isNaN(E[K]=+i(g[K],K,g))?0:+c(g[K],K,g)}}return D.initialize=function(K){g=K,G()},D.strength=function(K){return arguments.length?(c=typeof K=="function"?K:hn(+K),G(),D):c},D.y=function(K){return arguments.length?(i=typeof K=="function"?K:hn(+K),G(),D):i},D}function Pr(){function i(Ro){return()=>Ro}let c=Ro=>Ro.cluster,g=i(1),y=i(-1),E=i(100),D=i(.1),G=[0,0],K=[],re={},de=[],we=100,Pe=100,We={none:{x:0,y:0}},je=[],tt,Qe="force",Je=!0,yt=.1;function Nt(Ro){if(!Je)return Nt;tt.tick(),Br();for(let $a=0,Ec=K.length,Ou,Au=Ro*yt;$a<Ec;++$a)Ou=K[$a],Ou.vx+=(We[c(Ou)].x-Ou.x)*Au,Ou.vy+=(We[c(Ou)].y-Ou.y)*Au}function Jt(){K&&gn()}function gn(){if(!K||!K.length)return;if(c(K[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const Ro=dn();tt=ce(Ro.nodes).force("x",xn(we).strength(.1)).force("y",Or(Pe).strength(.1)).force("collide",rr($a=>$a.r).iterations(4)).force("charge",ut().strength(y)).force("links",$t(Ro.nodes.length?Ro.links:[]).distance(E).strength(D)),je=tt.nodes(),Br()}function dn(){const Ro=[],$a=[],Ec={};let Ou=[],Au={},Nl=[];return Au=Hn(K),Nl=Ur(de),Ou=Object.keys(Au),Ou.forEach((Il,Lv)=>{const J0=Au[Il];Ro.push({id:Il,size:J0.count,r:Math.sqrt(J0.sumforceNodeSize/Math.PI)}),Ec[Il]=Lv}),Nl.forEach(Il=>{const Lv=t(Il,"source"),J0=t(Il,"target"),h1=Ec[Lv],d1=Ec[J0];h1!==void 0&&d1!==void 0&&$a.push({source:h1,target:d1,count:Il.count})}),{nodes:Ro,links:$a}}function Hn(Ro){const $a={};return Ro.forEach(Ec=>{const Ou=c(Ec);$a[Ou]||($a[Ou]={count:0,sumforceNodeSize:0})}),Ro.forEach(Ec=>{const Ou=c(Ec),Au=g(Ec),Nl=$a[Ou];Nl.count=Nl.count+1,Nl.sumforceNodeSize=Nl.sumforceNodeSize+Math.PI*(Au*Au)*1.3,$a[Ou]=Nl}),$a}function Ur(Ro){const $a={},Ec=[];return Ro.forEach(Au=>{const Nl=Hi(Au);let Il=0;$a[Nl]!==void 0&&(Il=$a[Nl]),Il+=1,$a[Nl]=Il}),Object.entries($a).forEach(([Au,Nl])=>{const Il=Au.split("~")[0],Lv=Au.split("~")[1];Il!==void 0&&Lv!==void 0&&Ec.push({source:Il,target:Lv,count:Nl})}),Ec}function Br(){return We={none:{x:0,y:0}},je.forEach(Ro=>{We[Ro.id]={x:Ro.x-G[0],y:Ro.y-G[1]}}),We}function Hi(Ro){const $a=t(Ro,"source"),Ec=t(Ro,"target"),Ou=c(re[$a]),Au=c(re[Ec]);return Ou<=Au?`${Ou}~${Au}`:`${Au}~${Ou}`}function zr(Ro){re={},Ro.forEach($a=>{re[$a.id]=$a})}function Mi(Ro){return arguments.length?(Qe=Ro,Jt(),Nt):Qe}function si(Ro){return arguments.length?typeof Ro=="string"?(c=$a=>$a[Ro],Nt):(c=Ro,Nt):c}function mo(Ro){return arguments.length?(Je=Ro,Nt):Je}function so(Ro){return arguments.length?(yt=Ro,Nt):yt}function Xo(Ro){return arguments.length?(we=Ro,Nt):we}function Wa(Ro){return arguments.length?(Pe=Ro,Nt):Pe}function ac(Ro){return arguments.length?(zr(Ro||[]),K=Ro||[],Nt):K}function ia(Ro){return arguments.length?(de=Ro||[],Jt(),Nt):de}function Tf(Ro){return arguments.length?(typeof Ro=="function"?g=Ro:g=i(+Ro),Jt(),Nt):g}function qh(Ro){return arguments.length?(typeof Ro=="function"?y=Ro:y=i(+Ro),Jt(),Nt):y}function ed(Ro){return arguments.length?(typeof Ro=="function"?E=Ro:E=i(+Ro),Jt(),Nt):E}function td(Ro){return arguments.length?(typeof Ro=="function"?D=Ro:D=i(+Ro),Jt(),Nt):D}function kd(Ro){return arguments.length?(G=Ro,Nt):G}return Nt.initialize=Ro=>{K=Ro,Jt()},Nt.template=Mi,Nt.groupBy=si,Nt.enableGrouping=mo,Nt.strength=so,Nt.centerX=Xo,Nt.centerY=Wa,Nt.nodes=ac,Nt.links=ia,Nt.forceNodeSize=Tf,Nt.nodeSize=Nt.forceNodeSize,Nt.forceCharge=qh,Nt.forceLinkDistance=ed,Nt.forceLinkStrength=td,Nt.offset=kd,Nt.getFocis=Br,Nt}const cr={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};class ki extends fe{constructor(c){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,c&&this.updateCfg(c)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(c){const g=this;g.nodes=c.nodes||[];const y=c.edges||[];g.edges=y.map(E=>{const D={},G=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(E).forEach(K=>{G.indexOf(K)>-1||(D[K]=E[K])}),D}),g.ticking=!1}execute(c){const g=this,y=g.nodes,E=g.edges;if(g.ticking)return;let D=g.forceSimulation;const G=g.alphaMin,K=g.alphaDecay,re=g.alpha;if(D){if(c){if(g.clustering&&g.clusterForce&&(g.clusterForce.nodes(y),g.clusterForce.links(E)),D.nodes(y),E&&g.edgeForce)g.edgeForce.links(E);else if(E&&!g.edgeForce){const de=$t().id(we=>we.id).links(E);g.edgeStrength&&de.strength(g.edgeStrength),g.linkDistance&&de.distance(g.linkDistance),g.edgeForce=de,D.force("link",de)}}g.preventOverlap&&g.overlapProcess(D),D.alpha(re).restart(),this.ticking=!0}else try{const de=ut();if(g.nodeStrength&&de.strength(g.nodeStrength),D=ce().nodes(y),g.clustering){const we=Pr();we.centerX(g.center[0]).centerY(g.center[1]).template("force").strength(g.clusterFociStrength),E&&we.links(E),y&&we.nodes(y),we.forceLinkDistance(g.clusterEdgeDistance).forceLinkStrength(g.clusterEdgeStrength).forceCharge(g.clusterNodeStrength).forceNodeSize(g.clusterNodeSize),g.clusterForce=we,D.force("group",we)}if(D.force("center",Ze(g.center[0],g.center[1])).force("charge",de).alpha(re).alphaDecay(K).alphaMin(G),g.preventOverlap&&g.overlapProcess(D),E){const we=$t().id(Pe=>Pe.id).links(E);g.edgeStrength&&we.strength(g.edgeStrength),g.linkDistance&&we.distance(g.linkDistance),g.edgeForce=we,D.force("link",we)}if(g.workerEnabled&&!kr()&&(g.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!g.workerEnabled)D.on("tick",()=>{g.tick()}).on("end",()=>{g.ticking=!1,g.onLayoutEnd&&g.onLayoutEnd()}),g.ticking=!0;else{D.stop();const we=Vr(D);for(let Pe=1;Pe<=we;Pe++)D.tick(),postMessage({nodes:y,currentTick:Pe,totalTicks:we,type:cr.TICK},void 0);g.ticking=!1}g.forceSimulation=D,g.ticking=!0}catch(de){g.ticking=!1,console.warn(de)}}overlapProcess(c){const g=this,y=g.nodeSize,E=g.nodeSpacing;let D,G;const K=g.collideStrength;if(a(E)?G=()=>E:N(E)?G=E:G=()=>0,!y)D=re=>re.size?u(re.size)?(re.size[0]>re.size[1]?re.size[0]:re.size[1])/2+G(re):r(re.size)?(re.size.width>re.size.height?re.size.width:re.size.height)/2+G(re):re.size/2+G(re):10+G(re);else if(N(y))D=re=>y(re)+G(re);else if(u(y)){const de=(y[0]>y[1]?y[0]:y[1])/2;D=we=>de+G(we)}else if(a(y)){const re=y/2;D=de=>re+G(de)}else D=()=>10;c.force("collisionForce",rr(D).strength(K))}updateCfg(c){const g=this;g.ticking&&(g.forceSimulation.stop(),g.ticking=!1),g.forceSimulation=null,Object.assign(g,c)}destroy(){const c=this;c.ticking&&(c.forceSimulation.stop(),c.ticking=!1),c.nodes=null,c.edges=null,c.destroyed=!0}}function Vr(i){const c=i.alphaMin(),g=i.alphaTarget(),y=i.alpha(),E=Math.log((c-g)/(y-g))/Math.log(1-i.alphaDecay());return Math.ceil(E)}function kr(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Ui(i,c,g,y){i.forEach((E,D)=>{i[D].children=[],i[D].parent=[]}),y?c.forEach(E=>{const D=t(E,"source"),G=t(E,"target");let K=0;D&&(K=g[D]);let re=0;G&&(re=g[G]);const de=i[K].children,we=i[re].parent;de.push(i[re].id),we.push(i[K].id)}):c.forEach(E=>{const D=t(E,"source"),G=t(E,"target");let K=0;D&&(K=g[D]);let re=0;G&&(re=g[G]);const de=i[K].children,we=i[re].children;de.push(i[re].id),we.push(i[K].id)})}function Wr(i,c,g){const y=g.length;for(let E=0;E<y;E++){const D=t(g[E],"source"),G=t(g[E],"target");if(i.id===D&&c.id===G||c.id===D&&i.id===G)return!0}return!1}function no(i,c){const g=i.degree,y=c.degree;return g<y?-1:g>y?1:0}class uo extends fe{constructor(c){super(),this.radius=null,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(c)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){const c=this,g=c.nodes,y=c.edges,E=g.length;if(E===0){c.onLayoutEnd&&c.onLayoutEnd();return}!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight),c.center||(c.center=[c.width/2,c.height/2]);const D=c.center;if(E===1){g[0].x=D[0],g[0].y=D[1],c.onLayoutEnd&&c.onLayoutEnd();return}let G=c.radius,K=c.startRadius,re=c.endRadius;const de=c.divisions,we=c.startAngle,Pe=c.endAngle,We=(Pe-we)/E,je={};g.forEach((dn,Hn)=>{je[dn.id]=Hn}),c.nodeMap=je;const tt=s(g.length,je,y);c.degrees=tt,!G&&!K&&!re?G=c.height>c.width?c.width/2:c.height/2:!K&&re?K=re:K&&!re&&(re=K);const Qe=c.angleRatio,Je=We*Qe,yt=c.ordering;let Nt=[];yt==="topology"?Nt=c.topologyOrdering():yt==="topology-directed"?Nt=c.topologyOrdering(!0):yt==="degree"?Nt=c.degreeOrdering():Nt=g;const Jt=c.clockwise,gn=Math.ceil(E/de);for(let dn=0;dn<E;++dn){let Hn=G;!Hn&&K!==null&&re!==null&&(Hn=K+dn*(re-K)/(E-1)),Hn||(Hn=10+dn*100/(E-1));let Ur=we+dn%gn*Je+2*Math.PI/de*Math.floor(dn/gn);Jt||(Ur=Pe-dn%gn*Je-2*Math.PI/de*Math.floor(dn/gn)),Nt[dn].x=D[0]+Math.cos(Ur)*Hn,Nt[dn].y=D[1]+Math.sin(Ur)*Hn,Nt[dn].weight=tt[dn]}return c.onLayoutEnd&&c.onLayoutEnd(),{nodes:Nt,edges:this.edges}}topologyOrdering(c=!1){const g=this,y=g.degrees,E=g.edges,D=g.nodes,G=e(D),K=g.nodeMap,re=[G[0]],de=[D[0]],we=[],Pe=D.length;we[0]=!0,Ui(G,E,K,c);let We=0;return G.forEach((je,tt)=>{if(tt!==0)if((tt===Pe-1||y[tt]!==y[tt+1]||Wr(re[We],je,E))&&!we[tt])re.push(je),de.push(D[K[je.id]]),we[tt]=!0,We++;else{const Qe=re[We].children;let Je=!1;for(let Nt=0;Nt<Qe.length;Nt++){const Jt=K[Qe[Nt]];if(y[Jt]===y[tt]&&!we[Jt]){re.push(G[Jt]),de.push(D[K[G[Jt].id]]),we[Jt]=!0,Je=!0;break}}let yt=0;for(;!Je&&(we[yt]||(re.push(G[yt]),de.push(D[K[G[yt].id]]),we[yt]=!0,Je=!0),yt++,yt!==Pe););}}),de}degreeOrdering(){const c=this,g=c.nodes,y=[],E=c.degrees;return g.forEach((D,G)=>{D.degree=E[G],y.push(D)}),y.sort(no),y}getType(){return"circular"}}var wi=V(85788),wo=V.n(wi);let fs=wo();!fs&&typeof window!="undefined"&&(fs=window.graphlib),Array.prototype.flat||(Array.prototype.flat=function(i){let c=i||1;if(!isFinite(c))return;const g=this.length;let y=[];if(this.length===0)return this;for(;c--;){const E=[];let D=!1;if(y.length===0){D=!0;for(let G=0;G<g;G++)this[G]instanceof Array?y.push(...this[G]):y.push(this[G])}else{for(let G=0;G<y.length;G++)y[G]instanceof Array?(D=!0,E.push(...y[G])):E.push(y[G]);y=E}if(!D&&c===1/0)break}return y});var zo=fs;const hs=i=>{i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev},ks=(i,c)=>{if(i!=="_next"&&i!=="_prev")return c};class rs{constructor(){const c={};c._next=c._prev=c,this.isentinel=c}dequeue(){const c=this.isentinel,g=c._prev;if(g!==c)return hs(g),g}enqueue(){const c=this.isentinel,g=c._prev;if(g!==c)return hs(g),g}toString(){const c=[],g=this.isentinel;let y=g._prev;for(;y!==g;)c.push(JSON.stringify(y,ks)),y=y._prev;return`[${c.join(", ")}]`}}var Eo=rs;const Qo=zo.Graph,Xs=()=>1,Ys=(i,c)=>{var g;if(i.nodeCount()<=1)return[];const y=_e(i,c||Xs);return(g=ot(y.graph,y.buckets,y.zeroIdx).map(D=>i.outEdges(D.v,D.w)))===null||g===void 0?void 0:g.flat()},ot=(i,c,g)=>{let y=[];const E=c[c.length-1],D=c[0];let G;for(;i.nodeCount();){for(;G=D.dequeue();)mt(i,c,g,G);for(;G=E.dequeue();)mt(i,c,g,G);if(i.nodeCount()){for(let K=c.length-2;K>0;--K)if(G=c[K].dequeue(),G){y=y.concat(mt(i,c,g,G,!0));break}}}return y},mt=(i,c,g,y,E)=>{var D,G;const K=E?[]:void 0;return(D=i.inEdges(y.v))===null||D===void 0||D.forEach(re=>{const de=i.edge(re),we=i.node(re.v);E&&K.push({v:re.v,w:re.w}),we.out===void 0&&(we.out=0),we.out-=de,Z(c,g,we)}),(G=i.outEdges(y.v))===null||G===void 0||G.forEach(re=>{const de=i.edge(re),we=re.w,Pe=i.node(we);Pe.in===void 0&&(Pe.in=0),Pe.in-=de,Z(c,g,Pe)}),i.removeNode(y.v),K},_e=(i,c)=>{const g=new Qo;let y=0,E=0;i.nodes().forEach(re=>{g.setNode(re,{v:re,in:0,out:0})}),i.edges().forEach(re=>{const de=g.edge(re.v,re.w)||0,we=c==null?void 0:c(re),Pe=de+we;g.setEdge(re.v,re.w,Pe),E=Math.max(E,g.node(re.v).out+=we),y=Math.max(y,g.node(re.w).in+=we)});const D=[],G=E+y+3;for(let re=0;re<G;re++)D.push(new Eo);const K=y+1;return g.nodes().forEach(re=>{Z(D,K,g.node(re))}),{buckets:D,zeroIdx:K,graph:g}},Z=(i,c,g)=>{g.out?g.in?i[g.out-g.in+c].enqueue(g):i[i.length-1].enqueue(g):i[0].enqueue(g)};var Q=Ys;const le=i=>{const c=y=>E=>y.edge(E).weight,g=i.graph().acyclicer==="greedy"?Q(i,c(i)):Xe(i);g==null||g.forEach(y=>{const E=i.edge(y);i.removeEdge(y),E.forwardName=y.name,E.reversed=!0,i.setEdge(y.w,y.v,E,`rev-${Math.random()}`)})},Xe=i=>{const c=[],g={},y={},E=D=>{var G;y.hasOwnProperty(D)||(y[D]=!0,g[D]=!0,(G=i.outEdges(D))===null||G===void 0||G.forEach(K=>{g.hasOwnProperty(K.w)?c.push(K):E(K.w)}),delete g[D])};return i.nodes().forEach(E),c};var ft={run:le,undo:i=>{i.edges().forEach(c=>{const g=i.edge(c);if(g.reversed){i.removeEdge(c);const y=g.forwardName;delete g.reversed,delete g.forwardName,i.setEdge(c.w,c.v,g,y)}})}};const gt=zo.Graph,ln=(i,c,g,y)=>{let E;do E=`${y}${Math.random()}`;while(i.hasNode(E));return g.dummy=c,i.setNode(E,g),E},bn=i=>{const c=new gt().setGraph(i.graph());return i.nodes().forEach(g=>{c.setNode(g,i.node(g))}),i.edges().forEach(g=>{const y=c.edge(g.v,g.w)||{weight:0,minlen:1},E=i.edge(g);c.setEdge(g.v,g.w,{weight:y.weight+E.weight,minlen:Math.max(y.minlen,E.minlen)})}),c},En=i=>{const c=new gt({multigraph:i.isMultigraph()}).setGraph(i.graph());return i.nodes().forEach(g=>{var y;!((y=i.children(g))===null||y===void 0)&&y.length||c.setNode(g,i.node(g))}),i.edges().forEach(g=>c.setEdge(g,i.edge(g))),c},Cr=(i,c)=>{const g={};return i==null||i.forEach((y,E)=>{g[y]=c[E]}),g},tr=i=>{const c=i.nodes().map(g=>{var y;const E={};return(y=i.outEdges(g))===null||y===void 0||y.forEach(D=>{E[D.w]=(E[D.w]||0)+i.edge(D).weight}),E});return Cr(i.nodes(),c)},ii=i=>{const c=i.nodes().map(g=>{var y;const E={};return(y=i.inEdges(g))===null||y===void 0||y.forEach(D=>{E[D.v]=(E[D.v]||0)+i.edge(D).weight}),E});return Cr(i.nodes(),c)},Zi=(i,c)=>{const g=i.x,y=i.y,E=c.x-g,D=c.y-y;let G=i.width/2,K=i.height/2;if(!E&&!D)return{x:0,y:0};let re,de;return Math.abs(D)*G>Math.abs(E)*K?(D<0&&(K=-K),re=K*E/D,de=K):(E<0&&(G=-G),re=G,de=G*D/E),{x:g+re,y:y+de}},Mn=i=>{const c=[],g=[],y=Ne(i)+1;for(let E=0;E<y;E++)c.push([]),g.push([]);return i.nodes().forEach(E=>{const G=i.node(E).rank;G!==void 0&&c[G]&&g[G].push(E)}),g==null||g.forEach((E,D)=>{E==null||E.sort((G,K)=>{var re,de;return((re=i.node(G))===null||re===void 0?void 0:re.order)-((de=i.node(K))===null||de===void 0?void 0:de.order)}),E.forEach(G=>{c[D].push(G)})}),c},Xn=i=>{const c=i.nodes().filter(y=>i.node(y).rank!==void 0).map(y=>i.node(y).rank),g=Math.min(...c);i.nodes().forEach(y=>{const E=i.node(y);E.hasOwnProperty("rank")&&(E.rank||(E.rank=0),E.rank-=g)})},$r=i=>{const c=i.nodes().filter(G=>i.node(G).rank!==void 0).map(G=>i.node(G).rank),g=Math.min(...c),y=[];i.nodes().forEach(G=>{var K;const re=(((K=i.node(G))===null||K===void 0?void 0:K.rank)||0)-g;y[re]||(y[re]=[]),y[re].push(G)});let E=0;const D=i.graph().nodeRankFactor||0;for(let G=0;G<y.length;G++){const K=y[G];K===void 0&&G%D!==0?--E:E&&(K==null||K.forEach(re=>{i.node(re).rank||(i.node(re).rank=0),i.node(re).rank+=E}))}},Re=(i,c,g,y)=>{const E={width:0,height:0};return a(g)&&a(y)&&(E.rank=g,E.order=y),ln(i,"border",E,c)},Ne=i=>{const c=i.nodes().map(g=>{const y=i.node(g).rank;return y!==void 0?y:-1/0});return Math.max(...c)},Te=(i,c)=>{const g={lhs:[],rhs:[]};return i==null||i.forEach(y=>{c(y)?g.lhs.push(y):g.rhs.push(y)}),g},U=(i,c)=>{const g=Date.now();try{return c()}finally{console.log(`${i} time: ${Date.now()-g}ms`)}},Y=(i,c)=>c(),ge=(i,c)=>{let g=1/0,y;return i==null||i.forEach(E=>{const D=c(E);g>D&&(g=D,y=E)}),y};var Ye={addDummyNode:ln,simplify:bn,asNonCompoundGraph:En,successorWeights:tr,predecessorWeights:ii,intersectRect:Zi,buildLayerMatrix:Mn,normalizeRanks:Xn,removeEmptyRanks:$r,addBorderNode:Re,maxRank:Ne,partition:Te,time:U,notime:Y,zipObject:Cr,minBy:ge};const ct=i=>{i.graph().dummyChains=[],i.edges().forEach(c=>nt(i,c))},nt=(i,c)=>{var g,y;let E=c.v,D=i.node(E).rank;const G=c.w,K=i.node(G).rank,re=c.name,de=i.edge(c),we=de.labelRank;if(K===D+1)return;i.removeEdge(c);let Pe,We,je;for(je=0,++D;D<K;++je,++D)de.points=[],We={edgeLabel:de,width:0,height:0,edgeObj:c,rank:D},Pe=Ye.addDummyNode(i,"edge",We,"_d"),D===we&&(We.width=de.width,We.height=de.height,We.dummy="edge-label",We.labelpos=de.labelpos),i.setEdge(E,Pe,{weight:de.weight},re),je===0&&(i.graph().dummyChains||(i.graph().dummyChains=[]),(y=(g=i.graph())===null||g===void 0?void 0:g.dummyChains)===null||y===void 0||y.push(Pe)),E=Pe;i.setEdge(E,G,{weight:de.weight},re)};var fn={run:ct,undo:i=>{var c;(c=i.graph().dummyChains)===null||c===void 0||c.forEach(g=>{var y;let E=i.node(g);const D=E.edgeLabel;let G;E.edgeObj&&i.setEdge(E.edgeObj,D);let K=g;for(;E.dummy;)G=(y=i.successors(K))===null||y===void 0?void 0:y[0],i.removeNode(K),D.points.push({x:E.x,y:E.y}),E.dummy==="edge-label"&&(D.x=E.x,D.y=E.y,D.width=E.width,D.height=E.height),K=G,E=i.node(K)})}};const on=i=>{var c;const g={},y=E=>{var D;const G=i.node(E);if(g.hasOwnProperty(E))return G.rank;g[E]=!0;const K=(D=i.outEdges(E))===null||D===void 0?void 0:D.map(de=>y(de.w)-i.edge(de).minlen||1/0);let re=Math.min(...K);return(re===Number.POSITIVE_INFINITY||re===void 0||re===null)&&(re=0),G.rank=re,re};(c=i.sources())===null||c===void 0||c.forEach(E=>y(E))},Gn=i=>{var c;const g={};let y=0;const E=G=>{var K;const re=i.node(G);if(g.hasOwnProperty(G))return re.rank;g[G]=!0;const de=(K=i.outEdges(G))===null||K===void 0?void 0:K.map(Pe=>E(Pe.w)-i.edge(Pe).minlen||1/0);let we=Math.min(...de);return(we===Number.POSITIVE_INFINITY||we===void 0||we===null)&&(we=0),re.rank=we,y=Math.min(re.rank,y),re.rank};(c=i.sources())===null||c===void 0||c.forEach(G=>E(G)),y+=1;const D=(G,K)=>{var re;const de=i.node(G),we=isNaN(de.layer)?K:de.layer;(de.rank===void 0||de.rank<we)&&(de.rank=we),(re=i.outEdges(G))===null||re===void 0||re.map(Pe=>{D(Pe.w,we+i.edge(Pe).minlen)})};i.nodes().forEach(G=>{const K=i.node(G);isNaN(K.layer)?K.rank-=y:D(G,K.layer)})},er=(i,c)=>i.node(c.w).rank-i.node(c.v).rank-i.edge(c).minlen;var Kn={longestPath:on,longestPathWithLayer:Gn,slack:er};const qr=zo.Graph,xi=i=>{const c=new qr({directed:!1}),g=i.nodes()[0],y=i.nodeCount();c.setNode(g,{});let E,D;for(;Pn(c,i)<y;)E=Di(c,i),D=c.hasNode(E.v)?er(i,E):-er(i,E),Jr(c,i,D);return c},Pn=(i,c)=>{const g=y=>{c.nodeEdges(y).forEach(E=>{const D=E.v,G=y===D?E.w:D;!i.hasNode(G)&&!er(c,E)&&(i.setNode(G,{}),i.setEdge(y,G,{}),g(G))})};return i.nodes().forEach(g),i.nodeCount()},$n=i=>{const c=new qr({directed:!1}),g=i.nodes()[0],y=i.nodeCount();c.setNode(g,{});let E,D;for(;Rr(c,i)<y;)E=Di(c,i),D=c.hasNode(E.v)?er(i,E):-er(i,E),Jr(c,i,D);return c},Rr=(i,c)=>{const g=y=>{var E;(E=c.nodeEdges(y))===null||E===void 0||E.forEach(D=>{const G=D.v,K=y===G?D.w:G;!i.hasNode(K)&&(c.node(K).layer!==void 0||!er(c,D))&&(i.setNode(K,{}),i.setEdge(y,K,{}),g(K))})};return i.nodes().forEach(g),i.nodeCount()},Di=(i,c)=>ge(c.edges(),g=>i.hasNode(g.v)!==i.hasNode(g.w)?er(c,g):1/0),Jr=(i,c,g)=>{i.nodes().forEach(y=>{c.node(y).rank||(c.node(y).rank=0),c.node(y).rank+=g})};var $o={feasibleTree:xi,feasibleTreeWithLayer:$n};const Vo=zo.alg,{preorder:lo,postorder:Xi}=Vo,Ho=i=>{i=bn(i),on(i);const c=xi(i);Ae(c),cs(c,i);let g,y;for(;g=pt(c);)y=Ht(c,i,g),an(c,i,g,y)},cs=(i,c)=>{let g=Xi(i,i.nodes());g=g==null?void 0:g.slice(0,(g==null?void 0:g.length)-1),g==null||g.forEach(y=>{li(i,c,y)})},li=(i,c,g)=>{const E=i.node(g).parent;i.edge(g,E).cutvalue=xs(i,c,g)},xs=(i,c,g)=>{var y;const D=i.node(g).parent;let G=!0,K=c.edge(g,D),re=0;return K||(G=!1,K=c.edge(D,g)),re=K.weight,(y=c.nodeEdges(g))===null||y===void 0||y.forEach(de=>{const we=de.v===g,Pe=we?de.w:de.v;if(Pe!==D){const We=we===G,je=c.edge(de).weight;if(re+=We?je:-je,wr(i,g,Pe)){const tt=i.edge(g,Pe).cutvalue;re+=We?-tt:tt}}}),re},Ae=(i,c)=>{c!==void 0&&(c=i.nodes()[0]),Ke(i,{},1,c)},Ke=(i,c,g,y,E)=>{var D;const G=g;let K=g;const re=i.node(y);return c[y]=!0,(D=i.neighbors(y))===null||D===void 0||D.forEach(de=>{c.hasOwnProperty(de)||(K=Ke(i,c,K,de,y))}),re.low=G,re.lim=K++,E?re.parent=E:delete re.parent,K},pt=i=>i.edges().find(c=>i.edge(c).cutvalue<0),Ht=(i,c,g)=>{let y=g.v,E=g.w;c.hasEdge(y,E)||(y=g.w,E=g.v);const D=i.node(y),G=i.node(E);let K=D,re=!1;D.lim>G.lim&&(K=G,re=!0);const de=c.edges().filter(we=>re===yr(i,i.node(we.v),K)&&re!==yr(i,i.node(we.w),K));return ge(de,we=>er(c,we))},an=(i,c,g,y)=>{const E=g.v,D=g.w;i.removeEdge(E,D),i.setEdge(y.v,y.w,{}),Ae(i),cs(i,c),Ln(i,c)},Ln=(i,c)=>{const g=i.nodes().find(E=>!c.node(E).parent);let y=lo(i,g);y=y==null?void 0:y.slice(1),y==null||y.forEach(E=>{const D=i.node(E).parent;let G=c.edge(E,D),K=!1;G||(G=c.edge(D,E),K=!0),c.node(E).rank=c.node(D).rank+(K?G.minlen:-G.minlen)})},wr=(i,c,g)=>i.hasEdge(c,g),yr=(i,c,g)=>g.low<=c.lim&&c.lim<=g.lim;Ho.initLowLimValues=Ae,Ho.initCutValues=cs,Ho.calcCutValue=xs,Ho.leaveEdge=pt,Ho.enterEdge=Ht,Ho.exchangeEdges=an;var ei=Ho;const Ii=i=>{switch(i.graph().ranker){case"network-simplex":Yi(i);break;case"tight-tree":Ji(i);break;case"longest-path":to(i);break;default:Ji(i)}},to=on,Ji=i=>{Gn(i),$n(i)},Yi=i=>{ei(i)};var Uo=Ii;const Oi=i=>{var c;const g=Fs(i);(c=i.graph().dummyChains)===null||c===void 0||c.forEach(y=>{var E,D;let G=i.node(y);const K=G.edgeObj;if(!K)return;const re=Co(i,g,K.v,K.w),de=re.path,we=re.lca;let Pe=0,We=de[Pe],je=!0;for(;y!==K.w;){if(G=i.node(y),je){for(;(We=de[Pe])!==we&&i.node(We).maxRank<G.rank;)Pe++;We===we&&(je=!1)}if(!je){for(;Pe<de.length-1&&((E=i.node(We=de[Pe+1]))===null||E===void 0?void 0:E.minRank)<=G.rank;)Pe++;We=de[Pe]}i.setParent(y,We),y=(D=i.successors(y))===null||D===void 0?void 0:D[0]}})},Co=(i,c,g,y)=>{const E=[],D=[],G=Math.min(c[g].low,c[y].low),K=Math.max(c[g].lim,c[y].lim);let re,de;re=g;do re=i.parent(re),E.push(re);while(re&&(c[re].low>G||K>c[re].lim));for(de=re,re=y;(re=i.parent(re))!==de;)D.push(re);return{lca:de,path:E.concat(D.reverse())}},Fs=i=>{var c;const g={};let y=0;const E=D=>{var G;const K=y;(G=i.children(D))===null||G===void 0||G.forEach(E),g[D]={low:K,lim:y++}};return(c=i.children())===null||c===void 0||c.forEach(E),g};var ss=Oi;const qo=i=>{var c;const g=Ye.addDummyNode(i,"root",{},"_root"),y=Zs(i),E=Math.max(...Object.values(y))-1,D=2*E+1;i.graph().nestingRoot=g,i.edges().forEach(K=>{i.edge(K).minlen*=D});const G=Mo(i)+1;(c=i.children())===null||c===void 0||c.forEach(K=>{js(i,g,D,G,E,y,K)}),i.graph().nodeRankFactor=D},js=(i,c,g,y,E,D,G)=>{const K=i.children(G);if(!(K!=null&&K.length)){G!==c&&i.setEdge(c,G,{weight:0,minlen:g});return}const re=Ye.addBorderNode(i,"_bt"),de=Ye.addBorderNode(i,"_bb"),we=i.node(G);i.setParent(re,G),we.borderTop=re,i.setParent(de,G),we.borderBottom=de,K==null||K.forEach(Pe=>{js(i,c,g,y,E,D,Pe);const We=i.node(Pe),je=We.borderTop?We.borderTop:Pe,tt=We.borderBottom?We.borderBottom:Pe,Qe=We.borderTop?y:2*y,Je=je!==tt?1:E-D[G]+1;i.setEdge(re,je,{minlen:Je,weight:Qe,nestingEdge:!0}),i.setEdge(tt,de,{minlen:Je,weight:Qe,nestingEdge:!0})}),i.parent(G)||i.setEdge(c,re,{weight:0,minlen:E+D[G]})},Zs=i=>{var c;const g={},y=(E,D)=>{const G=i.children(E);G==null||G.forEach(K=>y(K,D+1)),g[E]=D};return(c=i.children())===null||c===void 0||c.forEach(E=>y(E,1)),g},Mo=i=>{let c=0;return i.edges().forEach(g=>{c+=i.edge(g).weight}),c};var X={run:qo,cleanup:i=>{const c=i.graph();c.nestingRoot&&i.removeNode(c.nestingRoot),delete c.nestingRoot,i.edges().forEach(g=>{i.edge(g).nestingEdge&&i.removeEdge(g)})}};const ve=i=>{var c;const g=y=>{const E=i.children(y),D=i.node(y);if(E!=null&&E.length&&E.forEach(G=>g(G)),D.hasOwnProperty("minRank")){D.borderLeft=[],D.borderRight=[];for(let G=D.minRank,K=D.maxRank+1;G<K;++G)Ie(i,"borderLeft","_bl",y,D,G),Ie(i,"borderRight","_br",y,D,G)}};(c=i.children())===null||c===void 0||c.forEach(y=>g(y))},Ie=(i,c,g,y,E,D)=>{const G={rank:D,width:0,height:0,borderType:c},K=E[c][D-1],re=Ye.addDummyNode(i,"border",G,g);E[c][D]=re,i.setParent(re,y),K&&i.setEdge(K,re,{weight:1})};var ke=ve;const st=i=>{var c;const g=(c=i.graph().rankdir)===null||c===void 0?void 0:c.toLowerCase();(g==="lr"||g==="rl")&&W(i)},P=i=>{var c;const g=(c=i.graph().rankdir)===null||c===void 0?void 0:c.toLowerCase();(g==="bt"||g==="rl")&&Se(i),(g==="lr"||g==="rl")&&(Fe(i),W(i))},W=i=>{i.nodes().forEach(c=>{ye(i.node(c))}),i.edges().forEach(c=>{ye(i.edge(c))})},ye=i=>{const c=i.width;i.width=i.height,i.height=c},Se=i=>{i.nodes().forEach(c=>{Be(i.node(c))}),i.edges().forEach(c=>{var g;const y=i.edge(c);(g=y.points)===null||g===void 0||g.forEach(E=>Be(E)),y.hasOwnProperty("y")&&Be(y)})},Be=i=>{i.y=-i.y},Fe=i=>{i.nodes().forEach(c=>{qe(i.node(c))}),i.edges().forEach(c=>{var g;const y=i.edge(c);(g=y.points)===null||g===void 0||g.forEach(E=>qe(E)),y.hasOwnProperty("x")&&qe(y)})},qe=i=>{const c=i.x;i.x=i.y,i.y=c};var Mt={adjust:st,undo:P},vn=i=>{const c={},g=i.nodes().filter(we=>{var Pe;return!(!((Pe=i.children(we))===null||Pe===void 0)&&Pe.length)}),y=g.map(we=>i.node(we).rank),E=Math.max(...y),D=[];for(let we=0;we<E+1;we++)D.push([]);const G=we=>{var Pe;if(c.hasOwnProperty(we))return;c[we]=!0;const We=i.node(we);isNaN(We.rank)||D[We.rank].push(we),(Pe=i.successors(we))===null||Pe===void 0||Pe.forEach(je=>G(je))},K=g.sort((we,Pe)=>i.node(we).rank-i.node(Pe).rank),de=K.filter(we=>i.node(we).fixorder!==void 0).sort((we,Pe)=>i.node(we).fixorder-i.node(Pe).fixorder);return de==null||de.forEach(we=>{isNaN(i.node(we).rank)||D[i.node(we).rank].push(we),c[we]=!0}),K==null||K.forEach(G),D};const Zn=(i,c,g)=>{const y=Cr(g,g.map((we,Pe)=>Pe)),D=c.map(we=>{var Pe;const We=(Pe=i.outEdges(we))===null||Pe===void 0?void 0:Pe.map(je=>({pos:y[je.w]||0,weight:i.edge(je).weight}));return We==null?void 0:We.sort((je,tt)=>je.pos-tt.pos)}).flat().filter(we=>we!==void 0);let G=1;for(;G<g.length;)G<<=1;const K=2*G-1;G-=1;const re=Array(K).fill(0,0,K);let de=0;return D==null||D.forEach(we=>{let Pe=we.pos+G;re[Pe]+=we.weight;let We=0;for(;Pe>0;)Pe%2&&(We+=re[Pe+1]),Pe=Pe-1>>1,re[Pe]+=we.weight;de+=we.weight*We}),de};var jn=(i,c)=>{let g=0;for(let y=1;y<(c==null?void 0:c.length);++y)g+=Zn(i,c[y-1],c[y]);return g};const pr=zo.Graph,vi=(i,c,g)=>{const y=co(i),E=new pr({compound:!0}).setGraph({root:y}).setDefaultNodeLabel(D=>i.node(D));return i.nodes().forEach(D=>{const G=i.node(D),K=i.parent(D);(G.rank===c||G.minRank<=c&&c<=G.maxRank)&&(E.setNode(D),E.setParent(D,K||y),i[g](D).forEach(re=>{const de=re.v===D?re.w:re.v,we=E.edge(de,D),Pe=we!==void 0?we.weight:0;E.setEdge(de,D,{weight:i.edge(re).weight+Pe})}),G.hasOwnProperty("minRank")&&E.setNode(D,{borderLeft:G.borderLeft[c],borderRight:G.borderRight[c]}))}),E},co=i=>{let c;for(;i.hasNode(c=`_root${Math.random()}`););return c};var di=vi,qi=(i,c,g)=>{const y={};let E;g==null||g.forEach(D=>{let G=i.parent(D),K,re;for(;G;){if(K=i.parent(G),K?(re=y[K],y[K]=G):(re=E,E=G),re&&re!==G){c.setEdge(re,G);return}G=K}})},Js=(i,c)=>c.map(g=>{const y=i.inEdges(g);if(!(y!=null&&y.length))return{v:g};{const E={sum:0,weight:0};return y==null||y.forEach(D=>{const G=i.edge(D),K=i.node(D.v);E.sum+=G.weight*K.order,E.weight+=G.weight}),{v:g,barycenter:E.sum/E.weight,weight:E.weight}}});const Yo=(i,c)=>{var g,y,E;const D={};i==null||i.forEach((K,re)=>{const de=D[K.v]={i:re,indegree:0,in:[],out:[],vs:[K.v]};K.barycenter!==void 0&&(de.barycenter=K.barycenter,de.weight=K.weight)}),(g=c.edges())===null||g===void 0||g.forEach(K=>{const re=D[K.v],de=D[K.w];re!==void 0&&de!==void 0&&(de.indegree++,re.out.push(D[K.w]))});const G=(E=(y=Object.values(D)).filter)===null||E===void 0?void 0:E.call(y,K=>!K.indegree);return Ss(G)},Ss=i=>{var c,g;const y=[],E=re=>de=>{de.merged||(de.barycenter===void 0||re.barycenter===void 0||de.barycenter>=re.barycenter)&&ko(re,de)},D=re=>de=>{de.in.push(re),--de.indegree===0&&i.push(de)};for(;i!=null&&i.length;){const re=i.pop();y.push(re),(c=re.in.reverse())===null||c===void 0||c.forEach(de=>E(re)(de)),(g=re.out)===null||g===void 0||g.forEach(de=>D(re)(de))}const G=y.filter(re=>!re.merged),K=["vs","i","barycenter","weight"];return G.map(re=>{const de={};return K==null||K.forEach(we=>{re[we]!==void 0&&(de[we]=re[we])}),de})},ko=(i,c)=>{var g;let y=0,E=0;i.weight&&(y+=i.barycenter*i.weight,E+=i.weight),c.weight&&(y+=c.barycenter*c.weight,E+=c.weight),i.vs=(g=c.vs)===null||g===void 0?void 0:g.concat(i.vs),i.barycenter=y/E,i.weight=E,i.i=Math.min(c.i,i.i),c.merged=!0};var vs=Yo;const xa=(i,c,g)=>{const y=Ye.partition(i,Pe=>Pe.hasOwnProperty("fixorder")&&!isNaN(Pe.fixorder)||Pe.hasOwnProperty("barycenter")),E=y.lhs,D=y.rhs.sort((Pe,We)=>-Pe.i- -We.i),G=[];let K=0,re=0,de=0;E==null||E.sort(_s(!!c,!!g)),de=ua(G,D,de),E==null||E.forEach(Pe=>{var We;de+=(We=Pe.vs)===null||We===void 0?void 0:We.length,G.push(Pe.vs),K+=Pe.barycenter*Pe.weight,re+=Pe.weight,de=ua(G,D,de)});const we={vs:G.flat()};return re&&(we.barycenter=K/re,we.weight=re),we},ua=(i,c,g)=>{let y=g,E;for(;c.length&&(E=c[c.length-1]).i<=y;)c.pop(),i==null||i.push(E.vs),y++;return y},_s=(i,c)=>(g,y)=>{if(g.fixorder!==void 0&&y.fixorder!==void 0)return g.fixorder-y.fixorder;if(g.barycenter<y.barycenter)return-1;if(g.barycenter>y.barycenter)return 1;if(c&&g.order!==void 0&&y.order!==void 0){if(g.order<y.order)return-1;if(g.order>y.order)return 1}return i?y.i-g.i:g.i-y.i};var Pa=xa;const Us=(i,c,g,y,E)=>{var D,G,K,re;let de=i.children(c);const we=i.node(c),Pe=we?we.borderLeft:void 0,We=we?we.borderRight:void 0,je={};Pe&&(de=de==null?void 0:de.filter(yt=>yt!==Pe&&yt!==We));const tt=Js(i,de||[]);tt==null||tt.forEach(yt=>{var Nt;if(!((Nt=i.children(yt.v))===null||Nt===void 0)&&Nt.length){const Jt=Us(i,yt.v,g,y);je[yt.v]=Jt,Jt.hasOwnProperty("barycenter")&&La(yt,Jt)}});const Qe=vs(tt,g);ta(Qe,je),(D=Qe.filter(yt=>{var Nt;return!!yt.vs||((Nt=yt.vs)===null||Nt===void 0?void 0:Nt.length)>0}))===null||D===void 0||D.forEach(yt=>{const Nt=i.node(yt.vs[0]);yt.fixorder=Nt.fixorder,yt.order=Nt.order});const Je=Pa(Qe,y,E);if(Pe&&(Je.vs=[Pe,Je.vs,We].flat(),!((G=i.predecessors(Pe))===null||G===void 0)&&G.length)){const yt=i.node(((K=i.predecessors(Pe))===null||K===void 0?void 0:K[0])||{}),Nt=i.node(((re=i.predecessors(We))===null||re===void 0?void 0:re[0])||{});Je.hasOwnProperty("barycenter")||(Je.barycenter=0,Je.weight=0),Je.barycenter=(Je.barycenter*Je.weight+yt.order+Nt.order)/(Je.weight+2),Je.weight+=2}return Je},ta=(i,c)=>{i==null||i.forEach(g=>{var y;const E=(y=g.vs)===null||y===void 0?void 0:y.map(D=>c[D]?c[D].vs:D);g.vs=E.flat()})},La=(i,c)=>{i.barycenter!==void 0?(i.barycenter=(i.barycenter*i.weight+c.barycenter*c.weight)/(i.weight+c.weight),i.weight+=c.weight):(i.barycenter=c.barycenter,i.weight=c.weight)};var qs=Us;const mu=zo.Graph,eo=i=>{const c=Ye.maxRank(i),g=[],y=[];for(let de=1;de<c+1;de++)g.push(de);for(let de=c-1;de>-1;de--)y.push(de);const E=ds(i,g,"inEdges"),D=ds(i,y,"outEdges");let G=vn(i);oa(i,G);let K=Number.POSITIVE_INFINITY,re;for(let de=0,we=0;we<4;++de,++we){Vs(de%2?E:D,de%4>=2),G=Ye.buildLayerMatrix(i);const Pe=jn(i,G);Pe<K&&(we=0,re=e(G),K=Pe)}G=vn(i),oa(i,G);for(let de=0,we=0;we<4;++de,++we){Vs(de%2?E:D,de%4>=2,!0),G=Ye.buildLayerMatrix(i);const Pe=jn(i,G);Pe<K&&(we=0,re=e(G),K=Pe)}oa(i,re)},ds=(i,c,g)=>c.map(y=>di(i,y,g)),Vs=(i,c,g)=>{const y=new mu;i==null||i.forEach(E=>{var D;const G=E.graph().root,K=qs(E,G,y,c,g);for(let re=0;re<((D=K.vs)===null||D===void 0?void 0:D.length);re++)E.node(K.vs[re]).order=re;qi(E,y,K.vs)})},oa=(i,c)=>{c==null||c.forEach(g=>{g==null||g.forEach((y,E)=>{i.node(y).order=E})})};var Oa=eo;const ls=zo.Graph,Ha=(i,c)=>{const g={},y=(E,D)=>{let G=0,K=0;const re=E.length,de=D==null?void 0:D[(D==null?void 0:D.length)-1];return D==null||D.forEach((we,Pe)=>{var We;const je=Xa(i,we),tt=je?i.node(je).order:re;(je||we===de)&&((We=D.slice(K,Pe+1))===null||We===void 0||We.forEach(Qe=>{var Je;(Je=i.predecessors(Qe))===null||Je===void 0||Je.forEach(yt=>{const Nt=i.node(yt),Jt=Nt.order;(Jt<G||tt<Jt)&&!(Nt.dummy&&i.node(Qe).dummy)&&ma(g,yt,Qe)})}),K=Pe+1,G=tt)}),D};return c!=null&&c.length&&c.reduce(y),g},sa=(i,c)=>{const g={},y=(D,G,K,re,de)=>{let we;const Pe=[];for(let We=G;We<K;We++)Pe.push(We);Pe.forEach(We=>{var je;we=D[We],i.node(we).dummy&&((je=i.predecessors(we))===null||je===void 0||je.forEach(tt=>{const Qe=i.node(tt);Qe.dummy&&(Qe.order<re||Qe.order>de)&&ma(g,tt,we)}))})},E=(D,G)=>{let K=-1,re,de=0;return G==null||G.forEach((we,Pe)=>{if(i.node(we).dummy==="border"){const We=i.predecessors(we)||[];We.length&&(re=i.node(We[0]).order,y(G,de,Pe,K,re),de=Pe,K=re)}y(G,de,G.length,re,D.length)}),G};return c!=null&&c.length&&c.reduce(E),g},Xa=(i,c)=>{var g;if(i.node(c).dummy)return(g=i.predecessors(c))===null||g===void 0?void 0:g.find(y=>i.node(y).dummy)},ma=(i,c,g)=>{let y=c,E=g;if(y>E){const G=y;y=E,E=G}let D=i[y];D||(i[y]=D={}),D[E]=!0},uc=(i,c,g)=>{let y=c,E=g;if(y>E){const D=c;y=E,E=D}return i[y]&&i[y].hasOwnProperty(E)},qa=(i,c,g,y)=>{const E={},D={},G={};return c==null||c.forEach(K=>{K==null||K.forEach((re,de)=>{E[re]=re,D[re]=re,G[re]=de})}),c==null||c.forEach(K=>{let re=-1;K==null||K.forEach(de=>{let we=y(de);if(we.length){we=we.sort((We,je)=>G[We]-G[je]);const Pe=(we.length-1)/2;for(let We=Math.floor(Pe),je=Math.ceil(Pe);We<=je;++We){const tt=we[We];D[de]===de&&re<G[tt]&&!uc(g,de,tt)&&(D[tt]=de,D[de]=E[de]=E[tt],re=G[tt])}}})}),{root:E,align:D}},Sa=(i,c,g,y,E)=>{var D;const G={},K=cc(i,c,g,E),re=E?"borderLeft":"borderRight",de=(We,je)=>{let tt=K.nodes(),Qe=tt.pop();const Je={};for(;Qe;)Je[Qe]?We(Qe):(Je[Qe]=!0,tt.push(Qe),tt=tt.concat(je(Qe))),Qe=tt.pop()},we=We=>{G[We]=(K.inEdges(We)||[]).reduce((je,tt)=>Math.max(je,(G[tt.v]||0)+K.edge(tt)),0)},Pe=We=>{const je=(K.outEdges(We)||[]).reduce((Qe,Je)=>Math.min(Qe,(G[Je.w]||0)-K.edge(Je)),Number.POSITIVE_INFINITY),tt=i.node(We);je!==Number.POSITIVE_INFINITY&&tt.borderType!==re&&(G[We]=Math.max(G[We],je))};return de(we,K.predecessors.bind(K)),de(Pe,K.successors.bind(K)),(D=Object.values(y))===null||D===void 0||D.forEach(We=>{G[We]=G[g[We]]}),G},cc=(i,c,g,y)=>{const E=new ls,D=i.graph(),G=Wu(D.nodesep,D.edgesep,y);return c==null||c.forEach(K=>{let re;K==null||K.forEach(de=>{const we=g[de];if(E.setNode(we),re){const Pe=g[re],We=E.edge(Pe,we);E.setEdge(Pe,we,Math.max(G(i,de,re),We||0))}re=de})}),E},eu=(i,c)=>Ye.minBy(Object.values(c),g=>{var y;let E=Number.NEGATIVE_INFINITY,D=Number.POSITIVE_INFINITY;return(y=Object.keys(g))===null||y===void 0||y.forEach(G=>{const K=g[G],re=Lu(i,G)/2;E=Math.max(K+re,E),D=Math.min(K-re,D)}),E-D});function lc(i,c){const g=Object.values(c),y=Math.min(...g),E=Math.max(...g);["u","d"].forEach(D=>{["l","r"].forEach(G=>{const K=D+G,re=i[K];let de;if(re===c)return;const we=Object.values(re);de=G==="l"?y-Math.min(...we):E-Math.max(...we),de&&(i[K]={},Object.keys(re).forEach(Pe=>{i[K][Pe]=re[Pe]+de}))})})}const Aa=(i,c)=>{const g={};return Object.keys(i.ul).forEach(y=>{if(c)g[y]=i[c.toLowerCase()][y];else{const D=Object.values(i).map(G=>G[y]).sort((G,K)=>G-K);g[y]=(D[1]+D[2])/2}}),g},Vu=i=>{const c=Ye.buildLayerMatrix(i),g=Object.assign(Ha(i,c),sa(i,c)),y={};let E;["u","d"].forEach(G=>{E=G==="u"?c:Object.values(c).reverse(),["l","r"].forEach(K=>{K==="r"&&(E=E.map(Pe=>Object.values(Pe).reverse()));const re=(G==="u"?i.predecessors:i.successors).bind(i),de=qa(i,E,g,re);let we=Sa(i,E,de.root,de.align,K==="r");K==="r"&&(we=Object.values(we).map(Pe=>-Pe)),y[G+K]=we})});const D=eu(i,y);return lc(y,D),Aa(y,i.graph().align)},Wu=(i,c,g)=>(y,E,D)=>{const G=y.node(E),K=y.node(D);let re=0,de;if(re+=G.width/2,G.hasOwnProperty("labelpos"))switch((G.labelpos||"").toLowerCase()){case"l":de=-G.width/2;break;case"r":de=G.width/2;break}if(de&&(re+=g?de:-de),de=0,re+=(G.dummy?c:i)/2,re+=(K.dummy?c:i)/2,re+=K.width/2,K.hasOwnProperty("labelpos"))switch((K.labelpos||"").toLowerCase()){case"l":de=K.width/2;break;case"r":de=-K.width/2;break}return de&&(re+=g?de:-de),de=0,re},Lu=(i,c)=>{var g;return((g=i.node(c))===null||g===void 0?void 0:g.width)||0};var Ku={positionX:Vu,findType1Conflicts:Ha,findType2Conflicts:sa,addConflict:ma,hasConflict:uc,verticalAlignment:qa,horizontalCompaction:Sa,alignCoordinates:lc,findSmallestWidthAlignment:eu,balance:Aa};const du=i=>{const c=Ye.buildLayerMatrix(i),g=i.graph().ranksep;let y=0;c==null||c.forEach(E=>{const D=E.map(K=>i.node(K).height),G=Math.max(...D);E==null||E.forEach(K=>{i.node(K).y=y+G/2}),y+=G+g})},qt=i=>{const c=Ye.buildLayerMatrix(i),g=Object.assign(Ha(i,c),sa(i,c)),y={};let E;["u","d"].forEach(G=>{E=G==="u"?c:Object.values(c).reverse(),["l","r"].forEach(K=>{K==="r"&&(E=E.map(Pe=>Object.values(Pe).reverse()));const re=(G==="u"?i.predecessors:i.successors).bind(i),de=qa(i,E,g,re),we=Sa(i,E,de.root,de.align,K==="r");K==="r"&&Object.keys(we).forEach(Pe=>we[Pe]=-we[Pe]),y[G+K]=we})});const D=eu(i,y);return D&&lc(y,D),Aa(y,i.graph().align)};var br=i=>{var c;i=Ye.asNonCompoundGraph(i),du(i);const g=qt(i);(c=Object.keys(g))===null||c===void 0||c.forEach(y=>{i.node(y).x=g[y]})},Yr=(i,c)=>{const y=i.nodes().filter(G=>{var K;return!(!((K=i.children(G))===null||K===void 0)&&K.length)}).map(G=>i.node(G).rank),E=Math.max(...y),D=[];for(let G=0;G<E+1;G++)D.push([]);c==null||c.forEach(G=>{const K=i.node(G);!K||K.dummy||isNaN(K.rank)||(K.fixorder=D[K.rank].length,D[K.rank].push(G))})};const Bt=zo.Graph,nn=(i,c)=>{const g=c&&c.debugTiming?Ye.time:Ye.notime;g("layout",()=>{c&&!c.keepNodeOrder&&c.prevGraph&&g("  inheritOrder",()=>{Dt(i,c.prevGraph)});const y=g("  buildLayoutGraph",()=>$i(i));c&&c.edgeLabelSpace===!1||g("  makeSpaceForEdgeLabels",()=>{Ds(y)});try{g("  runLayout",()=>{Dn(y,g,c)})}catch(E){if(E.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,E);return}throw E}g("  updateInputGraph",()=>{en(i,y)})})},Dn=(i,c,g)=>{c("    removeSelfEdges",()=>{ef(i)}),c("    acyclic",()=>{ft.run(i)}),c("    nestingGraph.run",()=>{X.run(i)}),c("    rank",()=>{Uo(Ye.asNonCompoundGraph(i))}),c("    injectEdgeLabelProxies",()=>{Ws(i)}),c("    removeEmptyRanks",()=>{$r(i)}),c("    nestingGraph.cleanup",()=>{X.cleanup(i)}),c("    normalizeRanks",()=>{Xn(i)}),c("    assignRankMinMax",()=>{ya(i)}),c("    removeEdgeLabelProxies",()=>{au(i)}),c("    normalize.run",()=>{fn.run(i)}),c("    parentDummyChains",()=>{ss(i)}),c("    addBorderSegments",()=>{ke(i)}),g&&g.keepNodeOrder&&c("    initDataOrder",()=>{Yr(i,g.nodeOrder)}),c("    order",()=>{Oa(i)}),c("    insertSelfEdges",()=>{nh(i)}),c("    adjustCoordinateSystem",()=>{Mt.adjust(i)}),c("    position",()=>{br(i)}),c("    positionSelfEdges",()=>{kc(i)}),c("    removeBorderNodes",()=>{Ua(i)}),c("    normalize.undo",()=>{fn.undo(i)}),c("    fixupEdgeLabelCoords",()=>{uu(i)}),c("    undoCoordinateSystem",()=>{Mt.undo(i)}),c("    translateGraph",()=>{yu(i)}),c("    assignNodeIntersects",()=>{Rs(i)}),c("    reversePoints",()=>{Bc(i)}),c("    acyclic.undo",()=>{ft.undo(i)})},Dt=(i,c)=>{const g=c._nodes||{};i.nodes().forEach(y=>{const E=i.node(y);g[y]!==void 0?(E.fixorder=g[y]._order,delete g[y]._order):delete E.fixorder})},en=(i,c)=>{i.nodes().forEach(g=>{var y;const E=i.node(g),D=c.node(g);E&&(E.x=D.x,E.y=D.y,E._order=D.order,E._rank=D.rank,!((y=c.children(g))===null||y===void 0)&&y.length&&(E.width=D.width,E.height=D.height))}),i.edges().forEach(g=>{const y=i.edge(g),E=c.edge(g);y.points=E.points,E.hasOwnProperty("x")&&(y.x=E.x,y.y=E.y)}),i.graph().width=c.graph().width,i.graph().height=c.graph().height},un=["nodesep","edgesep","ranksep","marginx","marginy"],Jn={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Tr=["acyclicer","ranker","rankdir","align"],Sr=["width","height","layer","fixorder"],Wi={width:0,height:0},Fi=["minlen","weight","width","height","labeloffset"],ro={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_o=["labelpos"],$i=i=>{const c=new Bt({multigraph:!0,compound:!0}),g=Ju(i.graph()),y={};return Tr==null||Tr.forEach(E=>{g[E]!==void 0&&(y[E]=g[E])}),c.setGraph(Object.assign({},Jn,Jc(g,un),y)),i.nodes().forEach(E=>{const D=Ju(i.node(E)),G=Jc(D,Sr);Object.keys(Wi).forEach(K=>{G[K]===void 0&&(G[K]=Wi[K])}),c.setNode(E,G),c.setParent(E,i.parent(E))}),i.edges().forEach(E=>{const D=Ju(i.edge(E)),G={};_o==null||_o.forEach(K=>{D[K]!==void 0&&(G[K]=D[K])}),c.setEdge(E,Object.assign({},ro,Jc(D,Fi),G))}),c},Ds=i=>{const c=i.graph();c.ranksep||(c.ranksep=0),c.ranksep/=2,i.nodes().forEach(g=>{const y=i.node(g);isNaN(y.layer)||(y.layer?y.layer*=2:y.layer=0)}),i.edges().forEach(g=>{var y;const E=i.edge(g);E.minlen*=2,((y=E.labelpos)===null||y===void 0?void 0:y.toLowerCase())!=="c"&&(c.rankdir==="TB"||c.rankdir==="BT"?E.width+=E.labeloffset:E.height+=E.labeloffset)})},Ws=i=>{i.edges().forEach(c=>{const g=i.edge(c);if(g.width&&g.height){const y=i.node(c.v),E=i.node(c.w),D={e:c,rank:(E.rank-y.rank)/2+y.rank};Ye.addDummyNode(i,"edge-proxy",D,"_ep")}})},ya=i=>{let c=0;i.nodes().forEach(g=>{const y=i.node(g);y.borderTop&&(y.minRank=i.node(y.borderTop).rank,y.maxRank=i.node(y.borderBottom).rank,c=Math.max(c,y.maxRank||-1/0))}),i.graph().maxRank=c},au=i=>{i.nodes().forEach(c=>{const g=i.node(c);g.dummy==="edge-proxy"&&(i.edge(g.e).labelRank=g.rank,i.removeNode(c))})},yu=i=>{let c=Number.POSITIVE_INFINITY,g=0,y=Number.POSITIVE_INFINITY,E=0;const D=i.graph(),G=D.marginx||0,K=D.marginy||0,re=de=>{if(!de)return;const we=de.x,Pe=de.y,We=de.width,je=de.height;!isNaN(we)&&!isNaN(We)&&(c=Math.min(c,we-We/2),g=Math.max(g,we+We/2)),!isNaN(Pe)&&!isNaN(je)&&(y=Math.min(y,Pe-je/2),E=Math.max(E,Pe+je/2))};i.nodes().forEach(de=>{re(i.node(de))}),i.edges().forEach(de=>{const we=i.edge(de);we.hasOwnProperty("x")&&re(we)}),c-=G,y-=K,i.nodes().forEach(de=>{const we=i.node(de);we.x-=c,we.y-=y}),i.edges().forEach(de=>{var we;const Pe=i.edge(de);(we=Pe.points)===null||we===void 0||we.forEach(We=>{We.x-=c,We.y-=y}),Pe.hasOwnProperty("x")&&(Pe.x-=c),Pe.hasOwnProperty("y")&&(Pe.y-=y)}),D.width=g-c+G,D.height=E-y+K},Rs=i=>{i.edges().forEach(c=>{const g=i.edge(c),y=i.node(c.v),E=i.node(c.w);let D,G;g.points?(D=g.points[0],G=g.points[g.points.length-1]):(g.points=[],D=E,G=y),g.points.unshift(Ye.intersectRect(y,D)),g.points.push(Ye.intersectRect(E,G))})},uu=i=>{i.edges().forEach(c=>{const g=i.edge(c);if(g.hasOwnProperty("x"))switch((g.labelpos==="l"||g.labelpos==="r")&&(g.width-=g.labeloffset),g.labelpos){case"l":g.x-=g.width/2+g.labeloffset;break;case"r":g.x+=g.width/2+g.labeloffset;break}})},Bc=i=>{i.edges().forEach(c=>{const g=i.edge(c);g.reversed&&g.points.reverse()})},Ua=i=>{i.nodes().forEach(c=>{var g,y,E;if(!((g=i.children(c))===null||g===void 0)&&g.length){const D=i.node(c),G=i.node(D.borderTop),K=i.node(D.borderBottom),re=i.node(D.borderLeft[((y=D.borderLeft)===null||y===void 0?void 0:y.length)-1]),de=i.node(D.borderRight[((E=D.borderRight)===null||E===void 0?void 0:E.length)-1]);D.width=Math.abs((de==null?void 0:de.x)-(re==null?void 0:re.x))||10,D.height=Math.abs((K==null?void 0:K.y)-(G==null?void 0:G.y))||10,D.x=((re==null?void 0:re.x)||0)+D.width/2,D.y=((G==null?void 0:G.y)||0)+D.height/2}}),i.nodes().forEach(c=>{i.node(c).dummy==="border"&&i.removeNode(c)})},ef=i=>{i.edges().forEach(c=>{if(c.v===c.w){const g=i.node(c.v);g.selfEdges||(g.selfEdges=[]),g.selfEdges.push({e:c,label:i.edge(c)}),i.removeEdge(c)}})},nh=i=>{const c=Ye.buildLayerMatrix(i);c==null||c.forEach(g=>{let y=0;g==null||g.forEach((E,D)=>{var G;const K=i.node(E);K.order=D+y,(G=K.selfEdges)===null||G===void 0||G.forEach(re=>{Ye.addDummyNode(i,"selfedge",{width:re.label.width,height:re.label.height,rank:K.rank,order:D+ ++y,e:re.e,label:re.label},"_se")}),delete K.selfEdges})})},kc=i=>{i.nodes().forEach(c=>{const g=i.node(c);if(g.dummy==="selfedge"){const y=i.node(g.e.v),E=y.x+y.width/2,D=y.y,G=g.x-E,K=y.height/2;i.setEdge(g.e,g.label),i.removeNode(c),g.label.points=[{x:E+2*G/3,y:D-K},{x:E+5*G/6,y:D-K},{y:D,x:E+G},{x:E+5*G/6,y:D+K},{x:E+2*G/3,y:D+K}],g.label.x=g.x,g.label.y=g.y}})},Jc=(i,c)=>{const g={};return c==null||c.forEach(y=>{i[y]!==void 0&&(g[y]=+i[y])}),g},Ju=i=>{const c={};return Object.keys(i).forEach(g=>{const y=i[g];c[g.toLowerCase()]=y}),c};var Rl=nn,tf={graphlib:zo,layout:Rl,util:{time:U,notime:Y}};class fc extends fe{constructor(c){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=g=>{const y=this,{nodes:E}=y,D=E.find(G=>G.id===g);return D?D.layout!==!1:!0},this.updateCfg(c)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}execute(){const c=this,{nodes:g,nodeSize:y,rankdir:E,combos:D,begin:G}=c;if(!g)return;const K=c.edges||[],re=new tf.graphlib.Graph({multigraph:!0,compound:!0});let de;y?u(y)?de=()=>y:de=()=>[y,y]:de=Qe=>Qe.size?u(Qe.size)?Qe.size:r(Qe.size)?[Qe.size.width||40,Qe.size.height||40]:[Qe.size,Qe.size]:[40,40];let we=Gc(c.nodesepFunc,c.nodesep,50),Pe=Gc(c.ranksepFunc,c.ranksep,50);(E==="LR"||E==="RL")&&(we=Gc(c.ranksepFunc,c.ranksep,50),Pe=Gc(c.nodesepFunc,c.nodesep,50)),re.setDefaultEdgeLabel(()=>({})),re.setGraph(c);const We={};g.filter(Qe=>Qe.layout!==!1).forEach(Qe=>{const Je=de(Qe),yt=Pe(Qe),Nt=we(Qe),Jt=Je[0]+2*Nt,gn=Je[1]+2*yt,dn=Qe.layer;a(dn)?re.setNode(Qe.id,{width:Jt,height:gn,layer:dn}):re.setNode(Qe.id,{width:Jt,height:gn}),this.sortByCombo&&Qe.comboId&&(We[Qe.comboId]||(We[Qe.comboId]=!0,re.setNode(Qe.comboId,{})),re.setParent(Qe.id,Qe.comboId))}),this.sortByCombo&&D&&D.forEach(Qe=>{Qe.parentId&&(We[Qe.parentId]||(We[Qe.parentId]=!0,re.setNode(Qe.parentId,{})),re.setParent(Qe.id,Qe.parentId))}),K.forEach(Qe=>{const Je=t(Qe,"source"),yt=t(Qe,"target");this.layoutNode(Je)&&this.layoutNode(yt)&&re.setEdge(Je,yt,{weight:Qe.weight||1})});let je;c.preset&&(je=new tf.graphlib.Graph({multigraph:!0,compound:!0}),c.preset.nodes.forEach(Qe=>{je==null||je.setNode(Qe.id,Qe)})),tf.layout(re,{prevGraph:je,edgeLabelSpace:c.edgeLabelSpace,keepNodeOrder:!!c.nodeOrder,nodeOrder:c.nodeOrder});const tt=[0,0];if(G){let Qe=1/0,Je=1/0;re.nodes().forEach(yt=>{const Nt=re.node(yt);Qe>Nt.x&&(Qe=Nt.x),Je>Nt.y&&(Je=Nt.y)}),re.edges().forEach(yt=>{re.edge(yt).points.forEach(Jt=>{Qe>Jt.x&&(Qe=Jt.x),Je>Jt.y&&(Je=Jt.y)})}),tt[0]=G[0]-Qe,tt[1]=G[1]-Je}return re.nodes().forEach(Qe=>{const Je=re.node(Qe),yt=g.findIndex(Nt=>Nt.id===Qe);g[yt]&&(g[yt].x=Je.x+tt[0],g[yt].y=Je.y+tt[1],g[yt]._order=Je._order)}),re.edges().forEach(Qe=>{const Je=re.edge(Qe),yt=K.findIndex(Nt=>{const Jt=t(Nt,"source"),gn=t(Nt,"target");return Jt===Qe.v&&gn===Qe.w});c.edgeLabelSpace&&c.controlPoints&&K[yt].type!=="loop"&&(K[yt].controlPoints=Je.points.slice(1,Je.points.length-1),K[yt].controlPoints.forEach(Nt=>{Nt.x+=tt[0],Nt.y+=tt[1]}))}),c.onLayoutEnd&&c.onLayoutEnd(),{nodes:g,edges:K}}getType(){return"dagre"}}function Gc(i,c,g){let y;return i?y=i:a(c)?y=()=>c:y=()=>g,y}var os=V(49612),Qu=os.XA,rh=os.a_,Fc=os.yQ,Qc=os.Hs,Mf=os.Ec,Pf=os.dx,Ph=os.LU,xc=os.Rm,Tu=os.y3,nf=os.qK,rf=os.pb,qc=os.j,ih=os.sO,Sc=os.BZ,Ah=os.EK,Ba=os.Db,bu=os.Fx,Af=os.tU,qu=os.Ym,fl=os.rs,_f=os.QR,ec=os.TB,Cc=os.oH,hc=os.Sc,Oc=os.BN,Ll=os.it,el=os.$r,of=os.QM,$u=os.AV,sf=(os.y3,os.y3),nd=os.GH,Tc=os.SO,rd=os.uZ,oh=os.yU,tl=os.F1,dc=os.re;class Df{constructor(c){this.distances=c.distances,this.dimension=c.dimension||2,this.linkDistance=c.linkDistance}layout(){const c=this,{dimension:g,distances:y,linkDistance:E}=c;try{const D=Tu.mul(Tu.pow(y,2),-.5),G=D.mean("row"),K=D.mean("column"),re=D.mean();D.add(re).subRowVector(G).subColumnVector(K);const de=new hc(D),we=Tu.sqrt(de.diagonalMatrix).diagonal();return de.leftSingularVectors.toJSON().map(Pe=>Tu.mul([Pe],[we]).toJSON()[0].splice(0,g))}catch(D){const G=[];for(let K=0;K<y.length;K++){const re=Math.random()*E,de=Math.random()*E;G.push([re,de])}return G}}}const It=800;class Hu{constructor(c){this.disp=[],this.positions=c.positions,this.adjMatrix=c.adjMatrix,this.focusID=c.focusID,this.radii=c.radii,this.iterations=c.iterations||10,this.height=c.height||10,this.width=c.width||10,this.speed=c.speed||100,this.gravity=c.gravity||10,this.nodeSizeFunc=c.nodeSizeFunc,this.k=c.k||5,this.strictRadial=c.strictRadial,this.nodes=c.nodes}layout(){const c=this,g=c.positions,y=[],E=c.iterations,D=c.width/10;c.maxDisplace=D,c.disp=y;for(let G=0;G<E;G++)g.forEach((K,re)=>{y[re]={x:0,y:0}}),c.getRepulsion(),c.updatePositions();return g}getRepulsion(){const c=this,g=c.positions,y=c.nodes,E=c.disp,D=c.k,G=c.radii||[];g.forEach((K,re)=>{E[re]={x:0,y:0},g.forEach((de,we)=>{if(re===we||G[re]!==G[we])return;let Pe=K[0]-de[0],We=K[1]-de[1],je=Math.sqrt(Pe*Pe+We*We);if(je===0){je=1;const tt=re>we?1:-1;Pe=.01*tt,We=.01*tt}if(je<c.nodeSizeFunc(y[re])/2+c.nodeSizeFunc(y[we])/2){const tt=D*D/je;E[re].x+=Pe/je*tt,E[re].y+=We/je*tt}})})}updatePositions(){const c=this,g=c.positions,y=c.disp,E=c.speed,D=c.strictRadial,G=c.focusID,K=c.maxDisplace||c.width/10;D&&y.forEach((de,we)=>{const Pe=g[we][0]-g[G][0],We=g[we][1]-g[G][1],je=Math.sqrt(Pe*Pe+We*We);let tt=We/je,Qe=-Pe/je;const Je=Math.sqrt(de.x*de.x+de.y*de.y);let yt=Math.acos((tt*de.x+Qe*de.y)/Je);yt>Math.PI/2&&(yt-=Math.PI/2,tt*=-1,Qe*=-1);const Nt=Math.cos(yt)*Je;de.x=tt*Nt,de.y=Qe*Nt});const re=c.radii;g.forEach((de,we)=>{if(we===G)return;const Pe=Math.sqrt(y[we].x*y[we].x+y[we].y*y[we].y);if(Pe>0&&we!==G){const We=Math.min(K*(E/It),Pe);if(de[0]+=y[we].x/Pe*We,de[1]+=y[we].y/Pe*We,D){let je=de[0]-g[G][0],tt=de[1]-g[G][1];const Qe=Math.sqrt(je*je+tt*tt);je=je/Qe*re[we],tt=tt/Qe*re[we],de[0]=g[G][0]+je,de[1]=g[G][1]+tt}}})}}function af(i){const c=i.length,g=i[0].length,y=[];for(let E=0;E<c;E++){const D=[];for(let G=0;G<g;G++)i[E][G]!==0?D.push(1/(i[E][G]*i[E][G])):D.push(0);y.push(D)}return y}function wu(i,c){let g=-1;return i.forEach((y,E)=>{y.id===c&&(g=E)}),g}function Go(i,c){return Math.sqrt((i[0]-c[0])*(i[0]-c[0])+(i[1]-c[1])*(i[1]-c[1]))}class nl extends fe{constructor(c){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(c)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const c=this,g=c.nodes,y=c.edges||[];if(!g||g.length===0){c.onLayoutEnd&&c.onLayoutEnd();return}!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight),c.center||(c.center=[c.width/2,c.height/2]);const E=c.center;if(g.length===1){g[0].x=E[0],g[0].y=E[1],c.onLayoutEnd&&c.onLayoutEnd();return}const D=c.linkDistance;let G=null;if(J(c.focusNode)){let Mi=!1;for(let si=0;si<g.length;si++)g[si].id===c.focusNode&&(G=g[si],c.focusNode=G,Mi=!0,si=g.length);Mi||(G=null)}else G=c.focusNode;G||(G=g[0],c.focusNode=G);const K=wu(g,G.id);c.focusIndex=K;const re=m({nodes:g,edges:y},!1),de=h(re),we=c.maxToFocus(de,K);c.handleInfinity(de,K,we+1),c.distances=de;const Pe=de[K],We=c.width||500,je=c.height||500;let tt=We-E[0]>E[0]?E[0]:We-E[0],Qe=je-E[1]>E[1]?E[1]:je-E[1];tt===0&&(tt=We/2),Qe===0&&(Qe=je/2);const Je=Qe>tt?tt:Qe,yt=Math.max(...Pe),Nt=[];Pe.forEach((Mi,si)=>{c.unitRadius||(c.unitRadius=Je/yt),Nt[si]=Mi*c.unitRadius}),c.radii=Nt;const Jt=c.eIdealDisMatrix();c.eIdealDistances=Jt;const gn=af(Jt);c.weights=gn;let Hn=new Df({linkDistance:D,distances:Jt}).layout();Hn.forEach(Mi=>{o(Mi[0])&&(Mi[0]=Math.random()*D),o(Mi[1])&&(Mi[1]=Math.random()*D)}),c.positions=Hn,Hn.forEach((Mi,si)=>{g[si].x=Mi[0]+E[0],g[si].y=Mi[1]+E[1]}),Hn.forEach(Mi=>{Mi[0]-=Hn[K][0],Mi[1]-=Hn[K][1]}),c.run();const Ur=c.preventOverlap,Br=c.nodeSize;let Hi;const zr=c.strictRadial;if(Ur){const Mi=c.nodeSpacing;let si;a(Mi)?si=()=>Mi:N(Mi)?si=Mi:si=()=>0,Br?u(Br)?Hi=Xo=>(Br[0]>Br[1]?Br[0]:Br[1])+si(Xo):Hi=Xo=>Br+si(Xo):Hi=Xo=>Xo.size?u(Xo.size)?(Xo.size[0]>Xo.size[1]?Xo.size[0]:Xo.size[1])+si(Xo):r(Xo.size)?(Xo.size.width>Xo.size.height?Xo.size.width:Xo.size.height)+si(Xo):Xo.size+si(Xo):10+si(Xo);const mo={nodes:g,nodeSizeFunc:Hi,adjMatrix:re,positions:Hn,radii:Nt,height:je,width:We,strictRadial:zr,focusID:K,iterations:c.maxPreventOverlapIteration||200,k:Hn.length/4.5};Hn=new Hu(mo).layout()}return Hn.forEach((Mi,si)=>{g[si].x=Mi[0]+E[0],g[si].y=Mi[1]+E[1]}),c.onLayoutEnd&&c.onLayoutEnd(),{nodes:g,edges:y}}run(){const c=this,g=c.maxIteration,y=c.positions||[],E=c.weights||[],D=c.eIdealDistances||[],G=c.radii||[];for(let K=0;K<=g;K++){const re=K/g;c.oneIteration(re,y,G,D,E)}}oneIteration(c,g,y,E,D){const G=this,K=1-c,re=G.focusIndex;g.forEach((de,we)=>{const Pe=Go(de,[0,0]),We=Pe===0?0:1/Pe;if(we===re)return;let je=0,tt=0,Qe=0;g.forEach((yt,Nt)=>{if(we===Nt)return;const Jt=Go(de,yt),gn=Jt===0?0:1/Jt,dn=E[Nt][we];Qe+=D[we][Nt],je+=D[we][Nt]*(yt[0]+dn*(de[0]-yt[0])*gn),tt+=D[we][Nt]*(yt[1]+dn*(de[1]-yt[1])*gn)});const Je=y[we]===0?0:1/y[we];Qe*=K,Qe+=c*Je*Je,je*=K,je+=c*Je*de[0]*We,de[0]=je/Qe,tt*=K,tt+=c*Je*de[1]*We,de[1]=tt/Qe})}eIdealDisMatrix(){const c=this,g=c.nodes;if(!g)return[];const y=c.distances,E=c.linkDistance,D=c.radii||[],G=c.unitRadius||50,K=[];return y&&y.forEach((re,de)=>{const we=[];re.forEach((Pe,We)=>{if(de===We)we.push(0);else if(D[de]===D[We])if(c.sortBy==="data")we.push(Pe*(Math.abs(de-We)*c.sortStrength)/(D[de]/G));else if(c.sortBy){let je=g[de][c.sortBy]||0,tt=g[We][c.sortBy]||0;J(je)&&(je=je.charCodeAt(0)),J(tt)&&(tt=tt.charCodeAt(0)),we.push(Pe*(Math.abs(je-tt)*c.sortStrength)/(D[de]/G))}else we.push(Pe*E/(D[de]/G));else{const je=(E+G)/2;we.push(Pe*je)}}),K.push(we)}),K}handleInfinity(c,g,y){const E=c.length;for(let D=0;D<E;D++)if(c[g][D]===1/0){c[g][D]=y,c[D][g]=y;for(let G=0;G<E;G++)c[D][G]!==1/0&&c[g][G]===1/0&&(c[g][G]=y+c[D][G],c[G][g]=y+c[D][G])}for(let D=0;D<E;D++)if(D!==g){for(let G=0;G<E;G++)if(c[D][G]===1/0){let K=Math.abs(c[g][D]-c[g][G]);K=K===0?1:K,c[D][G]=K}}}maxToFocus(c,g){let y=0;for(let E=0;E<c[g].length;E++)c[g][E]!==1/0&&(y=c[g][E]>y?c[g][E]:y);return y}getType(){return"radial"}}class ba extends fe{constructor(c){super(),this.nodeSize=30,this.minNodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(c)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){const c=this,g=c.nodes,y=c.edges,E=g.length;if(E===0){c.onLayoutEnd&&c.onLayoutEnd();return}!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight),c.center||(c.center=[c.width/2,c.height/2]);const D=c.center;if(E===1){g[0].x=D[0],g[0].y=D[1],c.onLayoutEnd&&c.onLayoutEnd();return}const G=[];let K;u(c.nodeSize)?K=Math.max(c.nodeSize[0],c.nodeSize[1]):K=c.nodeSize,g.forEach(tt=>{G.push(tt);let Qe=K;u(tt.size)?Qe=Math.max(tt.size[0],tt.size[1]):a(tt.size)?Qe=tt.size:r(tt.size)&&(Qe=Math.max(tt.size.width,tt.size.height)),K=Math.max(K,Qe)}),c.clockwise=c.counterclockwise!==void 0?!c.counterclockwise:c.clockwise;const re={},de={};if(G.forEach((tt,Qe)=>{re[tt.id]=tt,de[tt.id]=Qe}),(c.sortBy==="degree"||!J(c.sortBy)||G[0][c.sortBy]===void 0)&&(c.sortBy="degree",!a(g[0].degree))){const tt=s(g.length,de,y);G.forEach((Qe,Je)=>{Qe.degree=tt[Je]})}G.sort((tt,Qe)=>Qe[c.sortBy]-tt[c.sortBy]),c.maxValueNode=G[0],c.maxLevelDiff=c.maxLevelDiff||c.maxValueNode[c.sortBy]/4;const we=[[]];let Pe=we[0];G.forEach(tt=>{if(Pe.length>0){const Qe=Math.abs(Pe[0][c.sortBy]-tt[c.sortBy]);c.maxLevelDiff&&Qe>=c.maxLevelDiff&&(Pe=[],we.push(Pe))}Pe.push(tt)});let We=K+c.minNodeSpacing;if(!c.preventOverlap){const tt=we.length>0&&we[0].length>1,Je=(Math.min(c.width,c.height)/2-We)/(we.length+(tt?1:0));We=Math.min(We,Je)}let je=0;if(we.forEach(tt=>{let Qe=c.sweep;Qe===void 0&&(Qe=2*Math.PI-2*Math.PI/tt.length);const Je=tt.dTheta=Qe/Math.max(1,tt.length-1);if(tt.length>1&&c.preventOverlap){const yt=Math.cos(Je)-Math.cos(0),Nt=Math.sin(Je)-Math.sin(0),Jt=Math.sqrt(We*We/(yt*yt+Nt*Nt));je=Math.max(Jt,je)}tt.r=je,je+=We}),c.equidistant){let tt=0,Qe=0;for(let Je=0;Je<we.length;Je++){const Nt=we[Je].r-Qe;tt=Math.max(tt,Nt)}Qe=0,we.forEach((Je,yt)=>{yt===0&&(Qe=Je.r),Je.r=Qe,Qe+=tt})}return we.forEach(tt=>{const Qe=tt.dTheta,Je=tt.r;tt.forEach((yt,Nt)=>{const Jt=c.startAngle+(c.clockwise?1:-1)*Qe*Nt;yt.x=D[0]+Je*Math.cos(Jt),yt.y=D[1]+Je*Math.sin(Jt)})}),c.onLayoutEnd&&c.onLayoutEnd(),{nodes:g,edges:y}}getType(){return"concentric"}}class _h extends fe{constructor(c){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(c)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const c=this,{nodes:g,edges:y=[]}=c,E=c.center;if(!g||g.length===0){c.onLayoutEnd&&c.onLayoutEnd();return}if(g.length===1){g[0].x=E[0],g[0].y=E[1],c.onLayoutEnd&&c.onLayoutEnd();return}const D=c.linkDistance,G=m({nodes:g,edges:y},!1),K=h(G);c.handleInfinity(K);const re=d(K,D);c.scaledDistances=re;const de=c.runMDS();return c.positions=de,de.forEach((we,Pe)=>{g[Pe].x=we[0]+E[0],g[Pe].y=we[1]+E[1]}),c.onLayoutEnd&&c.onLayoutEnd(),{nodes:g,edges:y}}runMDS(){const c=this,g=2,y=c.scaledDistances,E=Tu.mul(Tu.pow(y,2),-.5),D=E.mean("row"),G=E.mean("column"),K=E.mean();E.add(K).subRowVector(D).subColumnVector(G);const re=new hc(E),de=Tu.sqrt(re.diagonalMatrix).diagonal();return re.leftSingularVectors.toJSON().map(we=>Tu.mul([we],[de]).toJSON()[0].splice(0,g))}handleInfinity(c){let g=-999999;c.forEach(y=>{y.forEach(E=>{E!==1/0&&g<E&&(g=E)})}),c.forEach((y,E)=>{y.forEach((D,G)=>{D===1/0&&(c[E][G]=g)})})}getType(){return"mds"}}const gc=800;class hl extends fe{constructor(c){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.updateCfg(c)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){var c,g;const y=this,E=y.nodes;if(y.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(y.timeInterval),!E||E.length===0){(c=y.onLayoutEnd)===null||c===void 0||c.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);const D=y.center;if(E.length===1){E[0].x=D[0],E[0].y=D[1],(g=y.onLayoutEnd)===null||g===void 0||g.call(y);return}const G={},K={};return E.forEach((re,de)=>{a(re.x)||(re.x=Math.random()*this.width),a(re.y)||(re.y=Math.random()*this.height),G[re.id]=re,K[re.id]=de}),y.nodeMap=G,y.nodeIdxMap=K,y.run()}run(){var c;const g=this,y=g.nodes;if(!y)return;const{edges:E,maxIteration:D,workerEnabled:G,clustering:K}=g,re={};if(K&&y.forEach(de=>{re[de.cluster]===void 0&&(re[de.cluster]={name:de.cluster,cx:0,cy:0,count:0})}),G){for(let de=0;de<D;de++)g.runOneStep(re);(c=g.onLayoutEnd)===null||c===void 0||c.call(g)}else{if(typeof window=="undefined")return;let de=0;this.timeInterval=window.setInterval(()=>{var we;g.runOneStep(re),de++,de>=D&&((we=g.onLayoutEnd)===null||we===void 0||we.call(g),window.clearInterval(g.timeInterval))},0)}return{nodes:y,edges:E}}runOneStep(c){var g;const y=this,E=y.nodes;if(!E)return;const{edges:D,center:G,gravity:K,speed:re,clustering:de}=y,we=y.height*y.width,Pe=Math.sqrt(we)/10,We=we/(E.length+1),je=Math.sqrt(We),tt=[];if(E.forEach((Qe,Je)=>{tt[Je]={x:0,y:0}}),y.applyCalculate(E,D,tt,je,We),de){for(const Je in c)c[Je].cx=0,c[Je].cy=0,c[Je].count=0;E.forEach(Je=>{const yt=c[Je.cluster];a(Je.x)&&(yt.cx+=Je.x),a(Je.y)&&(yt.cy+=Je.y),yt.count++});for(const Je in c)c[Je].cx/=c[Je].count,c[Je].cy/=c[Je].count;const Qe=y.clusterGravity||K;E.forEach((Je,yt)=>{if(!a(Je.x)||!a(Je.y))return;const Nt=c[Je.cluster],Jt=Math.sqrt((Je.x-Nt.cx)*(Je.x-Nt.cx)+(Je.y-Nt.cy)*(Je.y-Nt.cy)),gn=je*Qe;tt[yt].x-=gn*(Je.x-Nt.cx)/Jt,tt[yt].y-=gn*(Je.y-Nt.cy)/Jt})}E.forEach((Qe,Je)=>{if(!a(Qe.x)||!a(Qe.y))return;const yt=.01*je*K;tt[Je].x-=yt*(Qe.x-G[0]),tt[Je].y-=yt*(Qe.y-G[1])}),E.forEach((Qe,Je)=>{if(a(Qe.fx)&&a(Qe.fy)){Qe.x=Qe.fx,Qe.y=Qe.fy;return}if(!a(Qe.x)||!a(Qe.y))return;const yt=Math.sqrt(tt[Je].x*tt[Je].x+tt[Je].y*tt[Je].y);if(yt>0){const Nt=Math.min(Pe*(re/gc),yt);Qe.x+=tt[Je].x/yt*Nt,Qe.y+=tt[Je].y/yt*Nt}}),(g=y.tick)===null||g===void 0||g.call(y)}applyCalculate(c,g,y,E,D){const G=this;G.calRepulsive(c,y,D),g&&G.calAttractive(g,y,E)}calRepulsive(c,g,y){c.forEach((E,D)=>{g[D]={x:0,y:0},c.forEach((G,K)=>{if(D===K||!a(E.x)||!a(G.x)||!a(E.y)||!a(G.y))return;let re=E.x-G.x,de=E.y-G.y,we=re*re+de*de;if(we===0){we=1;const We=D>K?1:-1;re=.01*We,de=.01*We}const Pe=y/we;g[D].x+=re*Pe,g[D].y+=de*Pe})})}calAttractive(c,g,y){c.forEach(E=>{const D=t(E,"source"),G=t(E,"target");if(!D||!G)return;const K=this.nodeIdxMap[D],re=this.nodeIdxMap[G];if(K===re)return;const de=this.nodeMap[D],we=this.nodeMap[G];if(!a(we.x)||!a(de.x)||!a(we.y)||!a(de.y))return;const Pe=we.x-de.x,We=we.y-de.y,je=Math.sqrt(Pe*Pe+We*We),tt=je*je/y;g[re].x-=Pe/je*tt,g[re].y-=We/je*tt,g[K].x+=Pe/je*tt,g[K].y+=We/je*tt})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const c=this;c.stop(),c.tick=null,c.nodes=null,c.edges=null,c.destroyed=!0}getType(){return"fruchterman"}}function ho(i,c,g,y){g&&Object.defineProperty(i,c,{enumerable:g.enumerable,configurable:g.configurable,writable:g.writable,value:g.initializer?g.initializer.call(y):void 0})}var So=V(15671),No=V(43144);function Bo(i,c,g,y,E){var D={};return Object.keys(y).forEach(function(G){D[G]=y[G]}),D.enumerable=!!D.enumerable,D.configurable=!!D.configurable,("value"in D||D.initializer)&&(D.writable=!0),D=g.slice().reverse().reduce(function(G,K){return K(i,c,G)||G},D),E&&D.initializer!==void 0&&(D.value=D.initializer?D.initializer.call(E):void 0,D.initializer=void 0),D.initializer===void 0&&(Object.defineProperty(i,c,D),D=null),D}var jc=V(28660),Dh=V(64687),oo=V.n(Dh),Os=V(15861),Nh=-1,id=1;function tu(){return id++}var _u=function i(c){(0,So.Z)(this,i)},dl=function(){function i(c){(0,So.Z)(this,i),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=c}return(0,No.Z)(i,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(g){return this.lookup[g]>-1}},{key:"create",value:function(g,y){this.lookup[g]=this.components.length;var E=new this.clazz(y||{});return this.components.push(E),this.entities.push(g),E}},{key:"remove",value:function(g){var y=this.lookup[g];y>-1&&y<this.components.length-1&&(this.components[y]=this.components[this.components.length-1],this.entities[y]=this.entities[this.entities.length-1],this.lookup[this.entities[y]]=y),this.components.pop(),this.entities.pop(),delete this.lookup[g]}},{key:"removeKeepSorted",value:function(g){var y=this.lookup[g];if(y>-1){var E=this.entities[y];if(y<this.components.length-1){for(var D=y+1;D<this.components.length;++D)this.components[D-1]=this.components[D];for(var G=y+1;G<this.entities.length;++G)this.entities[G-1]=this.entities[G],this.lookup[this.entities[G-1]]=G-1}this.components.pop(),this.entities.pop(),delete this.lookup[E]}}},{key:"moveItem",value:function(g,y){if(g!==y){for(var E=this.components[g],D=this.entities[g],G=g<y?1:-1,K=g;K!==y;K+=G){var re=K+G;this.components[K]=this.components[re],this.entities[K]=this.entities[re],this.lookup[this.entities[K]]=K}this.components[y]=E,this.entities[y]=D,this.lookup[D]=y}}},{key:"getEntity",value:function(g){return this.entities[g]}},{key:"getComponent",value:function(g){return this.components[g]}},{key:"getComponentByEntity",value:function(g){var y=this.lookup[g];return y>-1?this.components[y]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(g){for(var y=0,E=Object.keys(this.lookup);y<E.length;y++){var D=E[y],G=Number(D);if(this.lookup[G]===g)return G}return Nh}},{key:"find",value:function(g){for(var y=0;y<this.getCount();y++){var E=this.getComponent(y);if(g(E,y))return E}return null}},{key:"findIndex",value:function(g){for(var y=0;y<this.getCount();y++){var E=this.getComponent(y);if(g(E,y))return y}return-1}},{key:"forEach",value:function(g){for(var y=0,E=Object.keys(this.lookup);y<E.length;y++){var D=E[y],G=Number(D),K=this.lookup[G];g(G,this.getComponent(K))}}},{key:"forEachAsync",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){var D,G,K,re,de;return oo().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:D=0,G=Object.keys(this.lookup);case 1:if(!(D<G.length)){Pe.next=10;break}return K=G[D],re=Number(K),de=this.lookup[re],Pe.next=7,E(re,this.getComponent(de));case 7:D++,Pe.next=1;break;case 10:case"end":return Pe.stop()}},y,this)}));function g(y){return c.apply(this,arguments)}return g}()},{key:"map",value:function(g){for(var y=[],E=0,D=Object.keys(this.lookup);E<D.length;E++){var G=D[E],K=Number(G),re=this.lookup[K];y.push(g(K,this.getComponent(re)))}return y}}]),i}(),uf=V(97685),Si=V(86700),Kr={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")},rl=function i(){(0,So.Z)(this,i),this.index=void 0},od=function i(){(0,So.Z)(this,i),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},sd=function(){function i(){(0,So.Z)(this,i),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return(0,No.Z)(i,[{key:"read",value:function(g){return this.reads.find(function(y){return y.index===g.index})||this.reads.push(g),g}},{key:"sample",value:function(g){return this.read(g),g}},{key:"write",value:function(g,y){var E=this.writes.find(function(re){return re.index===y.index});if(E)return y;var D=g.getResourceNode(y);D.resource.version++,D.resource.imported&&(this.hasSideEffect=!0);var G=g.createResourceNode(D.resource),K=g.getResourceNode(G);return K.writer=this,this.writes.push(G),G}}]),i}(),aa=V(32531),fa=V(82963),zs=V(61120),Mc=function i(){(0,So.Z)(this,i),this.first=void 0,this.last=void 0};function gl(i){var c=Mu();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function Mu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Nf=function(i){(0,aa.Z)(g,i);var c=gl(g);function g(){var y;(0,So.Z)(this,g);for(var E=arguments.length,D=new Array(E),G=0;G<E;G++)D[G]=arguments[G];return y=c.call.apply(c,[this].concat(D)),y.version=0,y.refs=0,y.name=void 0,y.imported=void 0,y.priority=void 0,y.discardStart=!0,y.discardEnd=!1,y.descriptor=void 0,y.resource=void 0,y}return(0,No.Z)(g,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),g}(Mc),Ta=function i(){(0,So.Z)(this,i),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},If,Pc,pl,Xu,vl,ha;function Eu(i,c){var g;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(g=cf(i))||c&&i&&typeof i.length=="number"){g&&(i=g);var y=0,E=function(){};return{s:E,n:function(){return y>=i.length?{done:!0}:{done:!1,value:i[y++]}},e:function(de){throw de},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,G=!1,K;return{s:function(){g=i[Symbol.iterator]()},n:function(){var de=g.next();return D=de.done,de},e:function(de){G=!0,K=de},f:function(){try{!D&&g.return!=null&&g.return()}finally{if(G)throw K}}}}function cf(i,c){if(i){if(typeof i=="string")return tc(i,c);var g=Object.prototype.toString.call(i).slice(8,-1);if(g==="Object"&&i.constructor&&(g=i.constructor.name),g==="Map"||g==="Set")return Array.from(i);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return tc(i,c)}}function tc(i,c){(c==null||c>i.length)&&(c=i.length);for(var g=0,y=new Array(c);g<c;g++)y[g]=i[g];return y}var pc=(If=(0,Si.b2)(),Pc=(0,Si.f3)(Kr.RenderEngine),If(pl=(Xu=(ha=function(){function i(){(0,So.Z)(this,i),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],ho(this,"engine",vl,this)}return(0,No.Z)(i,[{key:"execute",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){return oo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return this.compile(),G.next=3,this.executePassNodes(E);case 3:case"end":return G.stop()}},y,this)}));function g(y){return c.apply(this,arguments)}return g}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(g){g.tearDown&&g.tearDown()}),this.reset()}},{key:"addPass",value:function(g,y,E,D){var G=new od;G.execute=E,D&&(G.tearDown=D),G.name=g;var K=new sd;return K.name=g,this.passNodes.push(K),this.frameGraphPasses.push(G),y(this,K,G),G}},{key:"getPass",value:function(g){return this.frameGraphPasses.find(function(y){return y.name===g})}},{key:"compile",value:function(){var g=this,y=Eu(this.passNodes),E;try{for(y.s();!(E=y.n()).done;){var D=E.value;D.refCount=D.writes.length+(D.hasSideEffect?1:0),D.reads.forEach(function(ia){g.resourceNodes[ia.index].readerCount++})}}catch(ia){y.e(ia)}finally{y.f()}var G=[],K=Eu(this.resourceNodes),re;try{for(K.s();!(re=K.n()).done;){var de=re.value;de.readerCount===0&&G.push(de)}}catch(ia){K.e(ia)}finally{K.f()}for(;G.length;){var we=G.pop(),Pe=we&&we.writer;if(Pe&&--Pe.refCount===0){var We=Eu(Pe.reads),je;try{for(We.s();!(je=We.n()).done;){var tt=je.value,Qe=this.resourceNodes[tt.index];--Qe.readerCount===0&&G.push(Qe)}}catch(ia){We.e(ia)}finally{We.f()}}}this.resourceNodes.forEach(function(ia){ia.resource.refs+=ia.readerCount});var Je=Eu(this.passNodes),yt;try{for(Je.s();!(yt=Je.n()).done;){var Nt=yt.value;if(Nt.refCount){var Jt=Eu(Nt.reads),gn;try{for(Jt.s();!(gn=Jt.n()).done;){var dn=gn.value,Hn=this.resourceNodes[dn.index].resource;Hn.first=Hn.first?Hn.first:Nt,Hn.last=Nt}}catch(ia){Jt.e(ia)}finally{Jt.f()}var Ur=Eu(Nt.writes),Br;try{for(Ur.s();!(Br=Ur.n()).done;){var Hi=Br.value,zr=this.resourceNodes[Hi.index].resource;zr.first=zr.first?zr.first:Nt,zr.last=Nt}}catch(ia){Ur.e(ia)}finally{Ur.f()}}}}catch(ia){Je.e(ia)}finally{Je.f()}for(var Mi=0;Mi<2;Mi++){var si=Eu(this.resourceNodes),mo;try{for(si.s();!(mo=si.n()).done;){var so=mo.value,Xo=so.resource;if(Xo.priority===Mi&&Xo.refs){var Wa=Xo.first,ac=Xo.last;Wa&&ac&&(Wa.devirtualize.push(Xo),ac.destroy.push(Xo))}}}catch(ia){si.e(ia)}finally{si.f()}}}},{key:"executePassNodes",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){var D,G,K,re,de,we,Pe,We,je,tt,Qe,Je,yt,Nt,Jt,gn,dn;return oo().wrap(function(Ur){for(;;)switch(Ur.prev=Ur.next){case 0:D=Eu(this.passNodes.entries()),Ur.prev=1,D.s();case 3:if((G=D.n()).done){Ur.next=18;break}if(K=(0,uf.Z)(G.value,2),re=K[0],de=K[1],!de.refCount){Ur.next=16;break}we=Eu(de.devirtualize);try{for(we.s();!(Pe=we.n()).done;)We=Pe.value,We.preExecuteDevirtualize(this.engine)}catch(Br){we.e(Br)}finally{we.f()}je=Eu(de.destroy);try{for(je.s();!(tt=je.n()).done;)Qe=tt.value,Qe.preExecuteDestroy(this.engine)}catch(Br){je.e(Br)}finally{je.f()}return Ur.next=12,this.frameGraphPasses[re].execute(this,this.frameGraphPasses[re],E);case 12:Je=Eu(de.devirtualize);try{for(Je.s();!(yt=Je.n()).done;)Nt=yt.value,Nt.postExecuteDevirtualize(this.engine)}catch(Br){Je.e(Br)}finally{Je.f()}Jt=Eu(de.destroy);try{for(Jt.s();!(gn=Jt.n()).done;)dn=gn.value,dn.postExecuteDestroy(this.engine)}catch(Br){Jt.e(Br)}finally{Jt.f()}case 16:Ur.next=3;break;case 18:Ur.next=23;break;case 20:Ur.prev=20,Ur.t0=Ur.catch(1),D.e(Ur.t0);case 23:return Ur.prev=23,D.f(),Ur.finish(23);case 26:this.reset();case 27:case"end":return Ur.stop()}},y,this,[[1,20,23,26]])}));function g(y){return c.apply(this,arguments)}return g}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(g){return this.resourceNodes[g.index]}},{key:"createResourceNode",value:function(g){var y=new Ta;y.resource=g,y.version=g.version,this.resourceNodes.push(y);var E=new rl;return E.index=this.resourceNodes.length-1,E}},{key:"createTexture",value:function(g,y,E){var D=new Nf;return D.name=y,D.descriptor=E,this.createResourceNode(D)}},{key:"createRenderTarget",value:function(g,y,E){var D=new Nf;return D.name=y,D.descriptor=E,this.createResourceNode(D)}},{key:"present",value:function(g){this.addPass("Present",function(y,E){E.read(g),E.hasSideEffect=!0},(0,Os.Z)(oo().mark(function y(){return oo().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:case"end":return D.stop()}},y)})))}}]),i}(),ha),vl=Bo(Xu.prototype,"engine",[Pc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xu))||pl),_r=V(4942),Ts=V(97326),Ya=V(49685);function nc(){var i=new Ya.WT(4);return Ya.WT!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0,i[3]=0),i}function Rf(i){var c=new Ya.WT(4);return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c}function Bu(i,c,g,y){var E=new Ya.WT(4);return E[0]=i,E[1]=c,E[2]=g,E[3]=y,E}function vc(i,c){return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i}function Yu(i,c,g,y,E){return i[0]=c,i[1]=g,i[2]=y,i[3]=E,i}function Bl(i,c,g){return i[0]=c[0]+g[0],i[1]=c[1]+g[1],i[2]=c[2]+g[2],i[3]=c[3]+g[3],i}function ka(i,c,g){return i[0]=c[0]-g[0],i[1]=c[1]-g[1],i[2]=c[2]-g[2],i[3]=c[3]-g[3],i}function lf(i,c,g){return i[0]=c[0]*g[0],i[1]=c[1]*g[1],i[2]=c[2]*g[2],i[3]=c[3]*g[3],i}function kl(i,c,g){return i[0]=c[0]/g[0],i[1]=c[1]/g[1],i[2]=c[2]/g[2],i[3]=c[3]/g[3],i}function Ga(i,c){return i[0]=Math.ceil(c[0]),i[1]=Math.ceil(c[1]),i[2]=Math.ceil(c[2]),i[3]=Math.ceil(c[3]),i}function Gl(i,c){return i[0]=Math.floor(c[0]),i[1]=Math.floor(c[1]),i[2]=Math.floor(c[2]),i[3]=Math.floor(c[3]),i}function Lf(i,c,g){return i[0]=Math.min(c[0],g[0]),i[1]=Math.min(c[1],g[1]),i[2]=Math.min(c[2],g[2]),i[3]=Math.min(c[3],g[3]),i}function mc(i,c,g){return i[0]=Math.max(c[0],g[0]),i[1]=Math.max(c[1],g[1]),i[2]=Math.max(c[2],g[2]),i[3]=Math.max(c[3],g[3]),i}function il(i,c){return i[0]=Math.round(c[0]),i[1]=Math.round(c[1]),i[2]=Math.round(c[2]),i[3]=Math.round(c[3]),i}function Fl(i,c,g){return i[0]=c[0]*g,i[1]=c[1]*g,i[2]=c[2]*g,i[3]=c[3]*g,i}function Ac(i,c,g,y){return i[0]=c[0]+g[0]*y,i[1]=c[1]+g[1]*y,i[2]=c[2]+g[2]*y,i[3]=c[3]+g[3]*y,i}function Bf(i,c){var g=c[0]-i[0],y=c[1]-i[1],E=c[2]-i[2],D=c[3]-i[3];return Math.hypot(g,y,E,D)}function na(i,c){var g=c[0]-i[0],y=c[1]-i[1],E=c[2]-i[2],D=c[3]-i[3];return g*g+y*y+E*E+D*D}function ol(i){var c=i[0],g=i[1],y=i[2],E=i[3];return Math.hypot(c,g,y,E)}function sh(i){var c=i[0],g=i[1],y=i[2],E=i[3];return c*c+g*g+y*y+E*E}function zc(i,c){return i[0]=-c[0],i[1]=-c[1],i[2]=-c[2],i[3]=-c[3],i}function H(i,c){return i[0]=1/c[0],i[1]=1/c[1],i[2]=1/c[2],i[3]=1/c[3],i}function n(i,c){var g=c[0],y=c[1],E=c[2],D=c[3],G=g*g+y*y+E*E+D*D;return G>0&&(G=1/Math.sqrt(G)),i[0]=g*G,i[1]=y*G,i[2]=E*G,i[3]=D*G,i}function f(i,c){return i[0]*c[0]+i[1]*c[1]+i[2]*c[2]+i[3]*c[3]}function p(i,c,g,y){var E=g[0]*y[1]-g[1]*y[0],D=g[0]*y[2]-g[2]*y[0],G=g[0]*y[3]-g[3]*y[0],K=g[1]*y[2]-g[2]*y[1],re=g[1]*y[3]-g[3]*y[1],de=g[2]*y[3]-g[3]*y[2],we=c[0],Pe=c[1],We=c[2],je=c[3];return i[0]=Pe*de-We*re+je*K,i[1]=-(we*de)+We*G-je*D,i[2]=we*re-Pe*G+je*E,i[3]=-(we*K)+Pe*D-We*E,i}function w(i,c,g,y){var E=c[0],D=c[1],G=c[2],K=c[3];return i[0]=E+y*(g[0]-E),i[1]=D+y*(g[1]-D),i[2]=G+y*(g[2]-G),i[3]=K+y*(g[3]-K),i}function k(i,c){c=c||1;var g,y,E,D,G,K;do g=glMatrix.RANDOM()*2-1,y=glMatrix.RANDOM()*2-1,G=g*g+y*y;while(G>=1);do E=glMatrix.RANDOM()*2-1,D=glMatrix.RANDOM()*2-1,K=E*E+D*D;while(K>=1);var re=Math.sqrt((1-G)/K);return i[0]=c*g,i[1]=c*y,i[2]=c*E*re,i[3]=c*D*re,i}function ne(i,c,g){var y=c[0],E=c[1],D=c[2],G=c[3];return i[0]=g[0]*y+g[4]*E+g[8]*D+g[12]*G,i[1]=g[1]*y+g[5]*E+g[9]*D+g[13]*G,i[2]=g[2]*y+g[6]*E+g[10]*D+g[14]*G,i[3]=g[3]*y+g[7]*E+g[11]*D+g[15]*G,i}function me(i,c,g){var y=c[0],E=c[1],D=c[2],G=g[0],K=g[1],re=g[2],de=g[3],we=de*y+K*D-re*E,Pe=de*E+re*y-G*D,We=de*D+G*E-K*y,je=-G*y-K*E-re*D;return i[0]=we*de+je*-G+Pe*-re-We*-K,i[1]=Pe*de+je*-K+We*-G-we*-re,i[2]=We*de+je*-re+we*-K-Pe*-G,i[3]=c[3],i}function De(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}function ze(i){return"vec4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"}function it(i,c){return i[0]===c[0]&&i[1]===c[1]&&i[2]===c[2]&&i[3]===c[3]}function Pt(i,c){var g=i[0],y=i[1],E=i[2],D=i[3],G=c[0],K=c[1],re=c[2],de=c[3];return Math.abs(g-G)<=Ya.Ib*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(y-K)<=Ya.Ib*Math.max(1,Math.abs(y),Math.abs(K))&&Math.abs(E-re)<=Ya.Ib*Math.max(1,Math.abs(E),Math.abs(re))&&Math.abs(D-de)<=Ya.Ib*Math.max(1,Math.abs(D),Math.abs(de))}var ht=null,Ft=null,tn=null,On=null,Rn=null,nr=null,or=null,Dr=function(){var i=nc();return function(c,g,y,E,D,G){var K,re;for(g||(g=4),y||(y=0),E?re=Math.min(E*g+y,c.length):re=c.length,K=y;K<re;K+=g)i[0]=c[K],i[1]=c[K+1],i[2]=c[K+2],i[3]=c[K+3],D(i,i,G),c[K]=i[0],c[K+1]=i[1],c[K+2]=i[2],c[K+3]=i[3];return c}}(),ri=V(35600),yn=V(36650),ao=V(71002),Ks=9007199254740991,Qs="[object Arguments]",Za="[object Array]",_a="[object Boolean]",da="[object Date]",Ka="[object Error]",sl="[object Function]",ff="[object Map]",jl="[object Number]",ml="[object Object]",ah="[object RegExp]",Ms="[object Set]",hf="[object String]",Uc="[object WeakMap]",Pu="[object ArrayBuffer]",zl="[object DataView]",df="[object Float32Array]",Ul="[object Float64Array]",Du="[object Int8Array]",gf="[object Int16Array]",yl="[object Int32Array]",kf="[object Uint8Array]",Gf="[object Uint8ClampedArray]",Ff="[object Uint16Array]",Nu="[object Uint32Array]",$s={};$s[df]=$s[Ul]=$s[Du]=$s[gf]=$s[yl]=$s[kf]=$s[Gf]=$s[Ff]=$s[Nu]=!0,$s[Qs]=$s[Za]=$s[Pu]=$s[_a]=$s[zl]=$s[da]=$s[Ka]=$s[sl]=$s[ff]=$s[jl]=$s[ml]=$s[ah]=$s[Ms]=$s[hf]=$s[Uc]=!1;function Vl(i){return function(c){return i(c)}}var bl=Object.prototype,wl=bl.toString;function pf(i){return Wl(i)&&uh(i.length)&&!!$s[wl.call(i)]}function uh(i){return typeof i=="number"&&i>-1&&i%1===0&&i<=Ks}function Wl(i){return!!i&&(0,ao.Z)(i)==="object"}var Vc=pf;function jf(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function _c(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?jf(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):jf(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}function ad(i){var c=El();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function El(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var ud=function(i){(0,aa.Z)(g,i);var c=ad(g);function g(y){var E;return(0,So.Z)(this,g),E=c.call(this,y),E.dirty=!0,E.attributes=[],E.indices=void 0,E.indicesBuffer=void 0,E.vertexCount=0,E.maxInstancedCount=void 0,E.aabb=void 0,E.entity=void 0,Object.assign((0,Ts.Z)(E),y),E}return(0,No.Z)(g,[{key:"setAttribute",value:function(E,D,G,K){var re=this.attributes.find(function(de){return de.name===E});return re?(re.data=D,re.dirty=!0):this.attributes.push(_c(_c({dirty:!0,name:E,data:D},G),{},{bufferGetter:K})),this.dirty=!0,this}},{key:"setIndex",value:function(E){return this.indices=new Uint32Array(E.buffer?E.buffer:E),this.dirty=!0,this}},{key:"applyMatrix",value:function(E){var D=this.attributes.find(function(We){var je=We.name;return je==="position"}),G=this.attributes.find(function(We){var je=We.name;return je==="normal"});if(D&&(D.dirty=!0,D.data&&D.data.length))for(var K=0;K<D.data.length;K+=3){var re=Bu(D.data[K],D.data[K+1],D.data[K+2],1);ne(re,re,E),Vc(D.data)?D.data.set([re[0],re[1],re[2]],K):(D.data[K]=re[0],D.data[K+1]=re[1],D.data[K+2]=re[2])}if(G){var de=ri.XL(ri.Ue(),E);if(G.data&&G.data.length)for(var we=0;we<G.data.length;we+=3){var Pe=yn.al(G.data[we],G.data[we+1],G.data[we+2]);yn.kK(Pe,Pe,de),yn.Fv(Pe,Pe),Vc(G.data)?G.data.set([Pe[0],Pe[1],Pe[2]],we):(G.data[we]=Pe[0],G.data[we+1]=Pe[1],G.data[we+2]=Pe[2])}}}}]),g}(_u),Vn;(function(i){i[i.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",i[i.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",i[i.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",i[i.ZERO=0]="ZERO",i[i.ONE=1]="ONE",i[i.SRC_COLOR=768]="SRC_COLOR",i[i.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",i[i.SRC_ALPHA=770]="SRC_ALPHA",i[i.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",i[i.DST_ALPHA=772]="DST_ALPHA",i[i.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",i[i.DST_COLOR=774]="DST_COLOR",i[i.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",i[i.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",i[i.FUNC_ADD=32774]="FUNC_ADD",i[i.BLEND_EQUATION=32777]="BLEND_EQUATION",i[i.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",i[i.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",i[i.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",i[i.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",i[i.MAX_EXT=32776]="MAX_EXT",i[i.MIN_EXT=32775]="MIN_EXT",i[i.BLEND_DST_RGB=32968]="BLEND_DST_RGB",i[i.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",i[i.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",i[i.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",i[i.CONSTANT_COLOR=32769]="CONSTANT_COLOR",i[i.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",i[i.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",i[i.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",i[i.BLEND_COLOR=32773]="BLEND_COLOR",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",i[i.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",i[i.STREAM_DRAW=35040]="STREAM_DRAW",i[i.STATIC_DRAW=35044]="STATIC_DRAW",i[i.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",i[i.BUFFER_SIZE=34660]="BUFFER_SIZE",i[i.BUFFER_USAGE=34661]="BUFFER_USAGE",i[i.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",i[i.FRONT=1028]="FRONT",i[i.BACK=1029]="BACK",i[i.FRONT_AND_BACK=1032]="FRONT_AND_BACK",i[i.CULL_FACE=2884]="CULL_FACE",i[i.BLEND=3042]="BLEND",i[i.DITHER=3024]="DITHER",i[i.STENCIL_TEST=2960]="STENCIL_TEST",i[i.DEPTH_TEST=2929]="DEPTH_TEST",i[i.SCISSOR_TEST=3089]="SCISSOR_TEST",i[i.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",i[i.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",i[i.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",i[i.NO_ERROR=0]="NO_ERROR",i[i.INVALID_ENUM=1280]="INVALID_ENUM",i[i.INVALID_VALUE=1281]="INVALID_VALUE",i[i.INVALID_OPERATION=1282]="INVALID_OPERATION",i[i.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",i[i.CW=2304]="CW",i[i.CCW=2305]="CCW",i[i.LINE_WIDTH=2849]="LINE_WIDTH",i[i.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",i[i.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",i[i.CULL_FACE_MODE=2885]="CULL_FACE_MODE",i[i.FRONT_FACE=2886]="FRONT_FACE",i[i.DEPTH_RANGE=2928]="DEPTH_RANGE",i[i.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",i[i.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",i[i.DEPTH_FUNC=2932]="DEPTH_FUNC",i[i.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",i[i.STENCIL_FUNC=2962]="STENCIL_FUNC",i[i.STENCIL_FAIL=2964]="STENCIL_FAIL",i[i.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",i[i.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",i[i.STENCIL_REF=2967]="STENCIL_REF",i[i.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",i[i.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",i[i.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",i[i.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",i[i.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",i[i.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",i[i.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",i[i.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",i[i.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",i[i.VIEWPORT=2978]="VIEWPORT",i[i.SCISSOR_BOX=3088]="SCISSOR_BOX",i[i.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",i[i.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",i[i.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",i[i.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",i[i.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",i[i.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",i[i.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",i[i.RED_BITS=3410]="RED_BITS",i[i.GREEN_BITS=3411]="GREEN_BITS",i[i.BLUE_BITS=3412]="BLUE_BITS",i[i.ALPHA_BITS=3413]="ALPHA_BITS",i[i.DEPTH_BITS=3414]="DEPTH_BITS",i[i.STENCIL_BITS=3415]="STENCIL_BITS",i[i.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",i[i.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",i[i.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",i[i.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",i[i.SAMPLES=32937]="SAMPLES",i[i.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",i[i.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",i[i.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",i[i.DONT_CARE=4352]="DONT_CARE",i[i.FASTEST=4353]="FASTEST",i[i.NICEST=4354]="NICEST",i[i.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",i[i.BYTE=5120]="BYTE",i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.SHORT=5122]="SHORT",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.INT=5124]="INT",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.FLOAT=5126]="FLOAT",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.ALPHA=6406]="ALPHA",i[i.RGB=6407]="RGB",i[i.RGBA=6408]="RGBA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",i[i.VERTEX_SHADER=35633]="VERTEX_SHADER",i[i.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",i[i.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",i[i.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",i[i.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",i[i.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",i[i.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",i[i.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",i[i.SHADER_TYPE=35663]="SHADER_TYPE",i[i.DELETE_STATUS=35712]="DELETE_STATUS",i[i.LINK_STATUS=35714]="LINK_STATUS",i[i.VALIDATE_STATUS=35715]="VALIDATE_STATUS",i[i.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",i[i.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",i[i.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",i[i.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",i[i.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",i[i.NEVER=512]="NEVER",i[i.LESS=513]="LESS",i[i.EQUAL=514]="EQUAL",i[i.LEQUAL=515]="LEQUAL",i[i.GREATER=516]="GREATER",i[i.NOTEQUAL=517]="NOTEQUAL",i[i.GEQUAL=518]="GEQUAL",i[i.ALWAYS=519]="ALWAYS",i[i.KEEP=7680]="KEEP",i[i.REPLACE=7681]="REPLACE",i[i.INCR=7682]="INCR",i[i.DECR=7683]="DECR",i[i.INVERT=5386]="INVERT",i[i.INCR_WRAP=34055]="INCR_WRAP",i[i.DECR_WRAP=34056]="DECR_WRAP",i[i.VENDOR=7936]="VENDOR",i[i.RENDERER=7937]="RENDERER",i[i.VERSION=7938]="VERSION",i[i.NEAREST=9728]="NEAREST",i[i.LINEAR=9729]="LINEAR",i[i.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",i[i.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",i[i.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",i[i.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",i[i.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",i[i.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",i[i.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",i[i.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE=5890]="TEXTURE",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i[i.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",i[i.TEXTURE0=33984]="TEXTURE0",i[i.TEXTURE1=33985]="TEXTURE1",i[i.TEXTURE2=33986]="TEXTURE2",i[i.TEXTURE3=33987]="TEXTURE3",i[i.TEXTURE4=33988]="TEXTURE4",i[i.TEXTURE5=33989]="TEXTURE5",i[i.TEXTURE6=33990]="TEXTURE6",i[i.TEXTURE7=33991]="TEXTURE7",i[i.TEXTURE8=33992]="TEXTURE8",i[i.TEXTURE9=33993]="TEXTURE9",i[i.TEXTURE10=33994]="TEXTURE10",i[i.TEXTURE11=33995]="TEXTURE11",i[i.TEXTURE12=33996]="TEXTURE12",i[i.TEXTURE13=33997]="TEXTURE13",i[i.TEXTURE14=33998]="TEXTURE14",i[i.TEXTURE15=33999]="TEXTURE15",i[i.TEXTURE16=34e3]="TEXTURE16",i[i.TEXTURE17=34001]="TEXTURE17",i[i.TEXTURE18=34002]="TEXTURE18",i[i.TEXTURE19=34003]="TEXTURE19",i[i.TEXTURE20=34004]="TEXTURE20",i[i.TEXTURE21=34005]="TEXTURE21",i[i.TEXTURE22=34006]="TEXTURE22",i[i.TEXTURE23=34007]="TEXTURE23",i[i.TEXTURE24=34008]="TEXTURE24",i[i.TEXTURE25=34009]="TEXTURE25",i[i.TEXTURE26=34010]="TEXTURE26",i[i.TEXTURE27=34011]="TEXTURE27",i[i.TEXTURE28=34012]="TEXTURE28",i[i.TEXTURE29=34013]="TEXTURE29",i[i.TEXTURE30=34014]="TEXTURE30",i[i.TEXTURE31=34015]="TEXTURE31",i[i.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",i[i.REPEAT=10497]="REPEAT",i[i.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i[i.FLOAT_VEC2=35664]="FLOAT_VEC2",i[i.FLOAT_VEC3=35665]="FLOAT_VEC3",i[i.FLOAT_VEC4=35666]="FLOAT_VEC4",i[i.INT_VEC2=35667]="INT_VEC2",i[i.INT_VEC3=35668]="INT_VEC3",i[i.INT_VEC4=35669]="INT_VEC4",i[i.BOOL=35670]="BOOL",i[i.BOOL_VEC2=35671]="BOOL_VEC2",i[i.BOOL_VEC3=35672]="BOOL_VEC3",i[i.BOOL_VEC4=35673]="BOOL_VEC4",i[i.FLOAT_MAT2=35674]="FLOAT_MAT2",i[i.FLOAT_MAT3=35675]="FLOAT_MAT3",i[i.FLOAT_MAT4=35676]="FLOAT_MAT4",i[i.SAMPLER_2D=35678]="SAMPLER_2D",i[i.SAMPLER_CUBE=35680]="SAMPLER_CUBE",i[i.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",i[i.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",i[i.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",i[i.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",i[i.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",i[i.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",i[i.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",i[i.COMPILE_STATUS=35713]="COMPILE_STATUS",i[i.LOW_FLOAT=36336]="LOW_FLOAT",i[i.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",i[i.HIGH_FLOAT=36338]="HIGH_FLOAT",i[i.LOW_INT=36339]="LOW_INT",i[i.MEDIUM_INT=36340]="MEDIUM_INT",i[i.HIGH_INT=36341]="HIGH_INT",i[i.FRAMEBUFFER=36160]="FRAMEBUFFER",i[i.RENDERBUFFER=36161]="RENDERBUFFER",i[i.RGBA4=32854]="RGBA4",i[i.RGB5_A1=32855]="RGB5_A1",i[i.RGB565=36194]="RGB565",i[i.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",i[i.STENCIL_INDEX=6401]="STENCIL_INDEX",i[i.STENCIL_INDEX8=36168]="STENCIL_INDEX8",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i[i.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",i[i.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",i[i.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",i[i.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",i[i.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",i[i.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",i[i.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",i[i.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",i[i.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",i[i.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",i[i.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",i[i.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",i[i.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",i[i.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",i[i.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",i[i.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",i[i.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",i[i.NONE=0]="NONE",i[i.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",i[i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",i[i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",i[i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",i[i.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",i[i.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",i[i.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",i[i.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",i[i.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",i[i.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",i[i.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",i[i.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",i[i.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",i[i.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",i[i.COPY_SRC=1]="COPY_SRC",i[i.COPY_DST=2]="COPY_DST",i[i.SAMPLED=4]="SAMPLED",i[i.STORAGE=8]="STORAGE",i[i.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Vn||(Vn={}));var zf,Uf,Ih,cd,vf,Rh,Dc,Vf,$l=(zf=(0,Si.b2)(),Uf=(0,Si.f3)(Kr.GeometryComponentManager),Ih=(0,Si.f3)(Kr.RenderEngine),zf(cd=(vf=(Vf=function(){function i(){(0,So.Z)(this,i),ho(this,"geometry",Rh,this),ho(this,"engine",Dc,this)}return(0,No.Z)(i,[{key:"execute",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E=this;return oo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:this.geometry.forEach(function(K,re){re.dirty&&(re.attributes.forEach(function(de){if(de.dirty&&de.data){if(!de.buffer)de.buffer=E.engine.createBuffer({data:de.data,type:Vn.FLOAT});else{var we;(we=de.buffer)===null||we===void 0||we.subData({data:de.data,offset:0})}de.dirty=!1}}),re.indices&&(re.indicesBuffer?re.indicesBuffer.subData({data:re.indices,offset:0}):re.indicesBuffer=E.engine.createElements({data:re.indices,count:re.indices.length,type:Vn.UNSIGNED_INT,usage:Vn.STATIC_DRAW})),re.dirty=!1)});case 1:case"end":return G.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"tearDown",value:function(){this.geometry.forEach(function(g,y){y.indicesBuffer&&y.indicesBuffer.destroy(),y.attributes.forEach(function(E){E.buffer&&E.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},y=g.vertexCount,E=tu();return this.geometry.create(E,{vertexCount:y})}},{key:"createInstancedBufferGeometry",value:function(g){var y=g.maxInstancedCount,E=g.vertexCount,D=tu();return this.geometry.create(D,{maxInstancedCount:y,vertexCount:E})}}]),i}(),Vf),Rh=Bo(vf.prototype,"geometry",[Uf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dc=Bo(vf.prototype,"engine",[Ih],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vf))||cd);function Ma(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function yc(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Ma(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Ma(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}function Wf(i){var c=ch();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function ch(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var $f=function(i){(0,aa.Z)(g,i);var c=Wf(g);function g(y){var E;return(0,So.Z)(this,g),E=c.call(this,y),E.vertexShaderGLSL=void 0,E.fragmentShaderGLSL=void 0,E.defines={},E.dirty=!0,E.uniforms=[],E.cull={enable:!0,face:Vn.BACK},E.depth={enable:!0},E.blend=void 0,E.entity=void 0,E.type=void 0,Object.assign((0,Ts.Z)(E),y),E}return(0,No.Z)(g,[{key:"setDefines",value:function(E){return this.defines=yc(yc({},this.defines),E),this}},{key:"setCull",value:function(E){return this.cull=E,this}},{key:"setDepth",value:function(E){return this.depth=E,this}},{key:"setBlend",value:function(E){return this.blend=E,this}},{key:"setUniform",value:function(E,D){var G=this;if(typeof E!="string")return Object.keys(E).forEach(function(re){return G.setUniform(re,E[re])}),this;var K=this.uniforms.find(function(re){return re.name===E});return K?(K.dirty=!0,K.data=D):this.uniforms.push({name:E,dirty:!0,data:D}),this.dirty=!0,this}}]),g}(_u),gu,Wc,Fa,ku,mf,$c,xl,ld,Sl,lh;function Hl(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function fh(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Hl(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Hl(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}var hh=(gu=(0,Si.b2)(),Wc=(0,Si.f3)(Kr.MaterialComponentManager),Fa=(0,Si.f3)(Kr.RenderEngine),ku=(0,Si.f3)(Kr.ShaderModuleService),gu(mf=($c=(lh=function(){function i(){(0,So.Z)(this,i),ho(this,"material",xl,this),ho(this,"engine",ld,this),ho(this,"shaderModule",Sl,this)}return(0,No.Z)(i,[{key:"execute",value:function(){var c=(0,Os.Z)(oo().mark(function y(){return oo().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:case"end":return D.stop()}},y)}));function g(){return c.apply(this,arguments)}return g}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(g){var y=tu(),E=g.vertexShader,D=g.fragmentShader,G=[];if(!this.engine.supportWebGPU){var K="material-".concat(y);this.shaderModule.registerModule(K,{vs:g.vertexShader,fs:g.fragmentShader});var re=this.shaderModule.getModule(K);E=re.vs,D=re.fs,re.uniforms&&(G=Object.keys(re.uniforms).map(function(de){return{dirty:!0,name:de,data:re.uniforms[de]}}))}return this.material.create(y,fh(fh({vertexShaderGLSL:E,fragmentShaderGLSL:D},g),{},{uniforms:G}))}}]),i}(),lh),xl=Bo($c.prototype,"material",[Wc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ld=Bo($c.prototype,"engine",[Fa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sl=Bo($c.prototype,"shaderModule",[ku],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$c))||mf);function dh(i){var c=Hf();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function Hf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Xf;(function(i){i[i.Standard=0]="Standard"})(Xf||(Xf={}));var gh=function(i){(0,aa.Z)(g,i);var c=dh(g);function g(y){var E;return(0,So.Z)(this,g),E=c.call(this,y),E.strategy=Xf.Standard,E.visibilityPlaneMask=0,E.visible=!1,Object.assign((0,Ts.Z)(E),y),E}return g}(_u),Xl=function(){function i(c,g){(0,So.Z)(this,i),this.center=void 0,this.halfExtents=void 0,this.min=yn.Ue(),this.max=yn.Ue(),this.update(c,g)}return(0,No.Z)(i,[{key:"update",value:function(g,y){this.center=g||yn.Ue(),this.halfExtents=y||yn.al(.5,.5,.5),this.min=yn.lu(this.min,this.center,this.halfExtents),this.max=yn.IH(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(g,y){yn.IH(this.center,y,g),yn.bA(this.center,this.center,.5),yn.lu(this.halfExtents,y,g),yn.bA(this.halfExtents,this.halfExtents,.5),yn.JG(this.min,g),yn.JG(this.max,y)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(g){var y=this.center,E=y[0],D=y[1],G=y[2],K=this.halfExtents,re=K[0],de=K[1],we=K[2],Pe=E-re,We=E+re,je=D-de,tt=D+de,Qe=G-we,Je=G+we,yt=g.center,Nt=yt[0],Jt=yt[1],gn=yt[2],dn=g.halfExtents,Hn=dn[0],Ur=dn[1],Br=dn[2],Hi=Nt-Hn,zr=Nt+Hn,Mi=Jt-Ur,si=Jt+Ur,mo=gn-Br,so=gn+Br;Hi<Pe&&(Pe=Hi),zr>We&&(We=zr),Mi<je&&(je=Mi),si>tt&&(tt=si),mo<Qe&&(Qe=mo),so>Je&&(Je=so),y[0]=(Pe+We)*.5,y[1]=(je+tt)*.5,y[2]=(Qe+Je)*.5,K[0]=(We-Pe)*.5,K[1]=(tt-je)*.5,K[2]=(Je-Qe)*.5,this.min[0]=Pe,this.min[1]=je,this.min[2]=Qe,this.max[0]=We,this.max[1]=tt,this.max[2]=Je}},{key:"intersects",value:function(g){var y=this.getMax(),E=this.getMin(),D=g.getMax(),G=g.getMin();return E[0]<=D[0]&&y[0]>=G[0]&&E[1]<=D[1]&&y[1]>=G[1]&&E[2]<=D[2]&&y[2]>=G[2]}},{key:"containsPoint",value:function(g){var y=this.getMin(),E=this.getMax();return!(g[0]<y[0]||g[0]>E[0]||g[1]<y[1]||g[1]>E[1]||g[2]<y[2]||g[2]>E[2])}},{key:"getNegativeFarPoint",value:function(g){return g.pnVertexFlag===273?yn.JG(yn.Ue(),this.min):g.pnVertexFlag===272?yn.al(this.min[0],this.min[1],this.max[2]):g.pnVertexFlag===257?yn.al(this.min[0],this.max[1],this.min[2]):g.pnVertexFlag===256?yn.al(this.min[0],this.max[1],this.max[2]):g.pnVertexFlag===17?yn.al(this.max[0],this.min[1],this.min[2]):g.pnVertexFlag===16?yn.al(this.max[0],this.min[1],this.max[2]):g.pnVertexFlag===1?yn.al(this.max[0],this.max[1],this.min[2]):yn.al(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(g){return g.pnVertexFlag===273?yn.JG(yn.Ue(),this.max):g.pnVertexFlag===272?yn.al(this.max[0],this.max[1],this.min[2]):g.pnVertexFlag===257?yn.al(this.max[0],this.min[1],this.max[2]):g.pnVertexFlag===256?yn.al(this.max[0],this.min[1],this.min[2]):g.pnVertexFlag===17?yn.al(this.min[0],this.max[1],this.max[2]):g.pnVertexFlag===16?yn.al(this.min[0],this.max[1],this.min[2]):g.pnVertexFlag===1?yn.al(this.min[0],this.min[1],this.max[2]):yn.al(this.min[0],this.min[1],this.min[2])}}]),i}();function fd(i){var c=Lh();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function Lh(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var hd=function(i){(0,aa.Z)(g,i);var c=fd(g);function g(y){var E;return(0,So.Z)(this,g),E=c.call(this,y),E.material=void 0,E.geometry=void 0,E.aabb=new Xl,E.aabbDirty=!0,E.model=void 0,E.visible=!0,E.children=[],Object.assign((0,Ts.Z)(E),y),E}return g}(_u),dd=function(){function i(c,g){(0,So.Z)(this,i),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=c||0,this.normal=g||yn.al(0,1,0),this.updatePNVertexFlag()}return(0,No.Z)(i,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(g){return yn.AK(g,this.normal)-this.distance}},{key:"normalize",value:function(){var g=1/yn.Zh(this.normal);yn.bA(this.normal,this.normal,g),this.distance*=g}},{key:"intersectsLine",value:function(g,y,E){var D=this.distanceToPoint(g),G=this.distanceToPoint(y),K=D/(D-G),re=K>=0&&K<=1;return re&&E&&yn.t7(E,g,y,K),re}}]),i}(),et;(function(i){i[i.OUTSIDE=4294967295]="OUTSIDE",i[i.INSIDE=0]="INSIDE",i[i.INDETERMINATE=2147483647]="INDETERMINATE"})(et||(et={}));var Vt=function(){function i(c){if((0,So.Z)(this,i),this.planes=[],c)this.planes=c;else for(var g=0;g<6;g++)this.planes.push(new dd)}return(0,No.Z)(i,[{key:"extractFromVPMatrix",value:function(g){var y=(0,uf.Z)(g,16),E=y[0],D=y[1],G=y[2],K=y[3],re=y[4],de=y[5],we=y[6],Pe=y[7],We=y[8],je=y[9],tt=y[10],Qe=y[11],Je=y[12],yt=y[13],Nt=y[14],Jt=y[15];yn.t8(this.planes[0].normal,K-E,Pe-re,Qe-We),this.planes[0].distance=-(Jt-Je),yn.t8(this.planes[1].normal,K+E,Pe+re,Qe+We),this.planes[1].distance=-(Jt+Je),yn.t8(this.planes[2].normal,K+D,Pe+de,Qe+je),this.planes[2].distance=-(Jt+yt),yn.t8(this.planes[3].normal,K-D,Pe-de,Qe-je),this.planes[3].distance=-(Jt-yt),yn.t8(this.planes[4].normal,K-G,Pe-we,Qe-tt),this.planes[4].distance=-(Jt-Nt),yn.t8(this.planes[5].normal,K+G,Pe+we,Qe+tt),this.planes[5].distance=-(Jt+Nt),this.planes.forEach(function(gn){gn.normalize(),gn.updatePNVertexFlag()})}}]),i}();function mn(i){return typeof i=="number"}function dr(i){return i===void 0?0:i>360||i<-360?i%360:i}function jr(i,c,g){return isNumber(i)?vec3.fromValues(i,c,g):i.length===3?vec3.clone(i):vec3.fromValues(i[0],i[1],i[2])}function gr(i,c){return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[4],c[4]=i[5],c[5]=i[6],c[6]=i[8],c[7]=i[9],c[8]=i[10],c}function Ar(i){var c=(0,uf.Z)(i,3),g=c[0],y=c[1],E=c[2],D=g+y*256+E*65536-1;return D}function Qr(i){return[i+1&255,i+1>>8&255,i+1>>8>>8&255]}var fi,Ai,hi,bi,Ti,hr,Ci,Wn,vr,gi,Bi,Xr,_i,mi;function zi(i,c){var g;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(g=Zr(i))||c&&i&&typeof i.length=="number"){g&&(i=g);var y=0,E=function(){};return{s:E,n:function(){return y>=i.length?{done:!0}:{done:!1,value:i[y++]}},e:function(de){throw de},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,G=!1,K;return{s:function(){g=i[Symbol.iterator]()},n:function(){var de=g.next();return D=de.done,de},e:function(de){G=!0,K=de},f:function(){try{!D&&g.return!=null&&g.return()}finally{if(G)throw K}}}}function Zr(i,c){if(i){if(typeof i=="string")return Ri(i,c);var g=Object.prototype.toString.call(i).slice(8,-1);if(g==="Object"&&i.constructor&&(g=i.constructor.name),g==="Map"||g==="Set")return Array.from(i);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return Ri(i,c)}}function Ri(i,c){(c==null||c>i.length)&&(c=i.length);for(var g=0,y=new Array(c);g<c;g++)y[g]=i[g];return y}var Oo=(fi=(0,Si.b2)(),Ai=(0,Si.f3)(Kr.MeshComponentManager),hi=(0,Si.f3)(Kr.CullableComponentManager),bi=(0,Si.f3)(Kr.GeometryComponentManager),Ti=(0,Si.f3)(Kr.HierarchyComponentManager),hr=(0,Si.f3)(Kr.TransformComponentManager),fi(Ci=(Wn=(mi=function(){function i(){(0,So.Z)(this,i),ho(this,"mesh",vr,this),ho(this,"cullable",gi,this),ho(this,"geometry",Bi,this),ho(this,"hierarchy",Xr,this),ho(this,"transform",_i,this),this.planes=void 0}return(0,No.Z)(i,[{key:"setFrustumPlanes",value:function(g){this.planes=g}},{key:"execute",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){var D,G,K,re,de,we,Pe,We,je,tt,Qe,Je,yt,Nt,Jt,gn,dn,Hn,Ur,Br,Hi;return oo().wrap(function(Mi){for(;;)switch(Mi.prev=Mi.next){case 0:D=zi(E);try{for(D.s();!(G=D.n()).done;){K=G.value,re=K.getScene(),de=K.getCamera(),we=zi(re.getEntities());try{for(we.s();!(Pe=we.n()).done;)We=Pe.value,je=this.mesh.getComponentByEntity(We),je&&(tt=this.hierarchy.getComponentByEntity(We),Qe=this.cullable.getComponentByEntity(We),Je=je.geometry,yt=this.transform.getComponentByEntity(We),Je&&Je.aabb&&yt&&je.aabbDirty&&(Nt=yt.worldTransform,Jt=Je.aabb,gn=Jt.center,dn=Jt.halfExtents,Hn=yn.fF(yn.Ue(),gn,Nt),Ur=gr(Nt,ri.Ue()),Br=yn.kK(yn.Ue(),dn,Ur),je.aabb.update(Hn,Br),je.aabbDirty=!1),Qe&&Je&&(Hi=this.cullable.getComponentByEntity((tt==null?void 0:tt.parentID)||-1),Qe.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(je.aabb,(Hi==null?void 0:Hi.visibilityPlaneMask)||et.INDETERMINATE,this.planes||de.getFrustum().planes),Qe.visible=Qe.visibilityPlaneMask!==et.OUTSIDE))}catch(si){we.e(si)}finally{we.f()}}}catch(si){D.e(si)}finally{D.f()}case 2:case"end":return Mi.stop()}},y,this)}));function g(y){return c.apply(this,arguments)}return g}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(g,y,E){if(y===et.OUTSIDE||y===et.INSIDE)return y;for(var D=et.INSIDE,G=0,K=E.length;G<K;++G){var re=G<31?1<<G:0;if(!(G<31&&!(y&re))){var de=E[G],we=de.normal,Pe=de.distance;if(yn.AK(we,g.getNegativeFarPoint(E[G]))+Pe>0)return et.OUTSIDE;yn.AK(we,g.getPositiveFarPoint(E[G]))+Pe>0&&(D|=re)}}return D}}]),i}(),mi),vr=Bo(Wn.prototype,"mesh",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gi=Bo(Wn.prototype,"cullable",[hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bi=Bo(Wn.prototype,"geometry",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xr=Bo(Wn.prototype,"hierarchy",[Ti],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i=Bo(Wn.prototype,"transform",[hr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wn))||Ci);function Po(){var i=new Ya.WT(16);return Ya.WT!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i}function ji(i){var c=new Ya.WT(16);return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c}function pi(i,c){return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],i}function Gr(i,c,g,y,E,D,G,K,re,de,we,Pe,We,je,tt,Qe){var Je=new glMatrix.ARRAY_TYPE(16);return Je[0]=i,Je[1]=c,Je[2]=g,Je[3]=y,Je[4]=E,Je[5]=D,Je[6]=G,Je[7]=K,Je[8]=re,Je[9]=de,Je[10]=we,Je[11]=Pe,Je[12]=We,Je[13]=je,Je[14]=tt,Je[15]=Qe,Je}function To(i,c,g,y,E,D,G,K,re,de,we,Pe,We,je,tt,Qe,Je){return i[0]=c,i[1]=g,i[2]=y,i[3]=E,i[4]=D,i[5]=G,i[6]=K,i[7]=re,i[8]=de,i[9]=we,i[10]=Pe,i[11]=We,i[12]=je,i[13]=tt,i[14]=Qe,i[15]=Je,i}function ms(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function xo(i,c){if(i===c){var g=c[1],y=c[2],E=c[3],D=c[6],G=c[7],K=c[11];i[1]=c[4],i[2]=c[8],i[3]=c[12],i[4]=g,i[6]=c[9],i[7]=c[13],i[8]=y,i[9]=D,i[11]=c[14],i[12]=E,i[13]=G,i[14]=K}else i[0]=c[0],i[1]=c[4],i[2]=c[8],i[3]=c[12],i[4]=c[1],i[5]=c[5],i[6]=c[9],i[7]=c[13],i[8]=c[2],i[9]=c[6],i[10]=c[10],i[11]=c[14],i[12]=c[3],i[13]=c[7],i[14]=c[11],i[15]=c[15];return i}function as(i,c){var g=c[0],y=c[1],E=c[2],D=c[3],G=c[4],K=c[5],re=c[6],de=c[7],we=c[8],Pe=c[9],We=c[10],je=c[11],tt=c[12],Qe=c[13],Je=c[14],yt=c[15],Nt=g*K-y*G,Jt=g*re-E*G,gn=g*de-D*G,dn=y*re-E*K,Hn=y*de-D*K,Ur=E*de-D*re,Br=we*Qe-Pe*tt,Hi=we*Je-We*tt,zr=we*yt-je*tt,Mi=Pe*Je-We*Qe,si=Pe*yt-je*Qe,mo=We*yt-je*Je,so=Nt*mo-Jt*si+gn*Mi+dn*zr-Hn*Hi+Ur*Br;return so?(so=1/so,i[0]=(K*mo-re*si+de*Mi)*so,i[1]=(E*si-y*mo-D*Mi)*so,i[2]=(Qe*Ur-Je*Hn+yt*dn)*so,i[3]=(We*Hn-Pe*Ur-je*dn)*so,i[4]=(re*zr-G*mo-de*Hi)*so,i[5]=(g*mo-E*zr+D*Hi)*so,i[6]=(Je*gn-tt*Ur-yt*Jt)*so,i[7]=(we*Ur-We*gn+je*Jt)*so,i[8]=(G*si-K*zr+de*Br)*so,i[9]=(y*zr-g*si-D*Br)*so,i[10]=(tt*Hn-Qe*gn+yt*Nt)*so,i[11]=(Pe*gn-we*Hn-je*Nt)*so,i[12]=(K*Hi-G*Mi-re*Br)*so,i[13]=(g*Mi-y*Hi+E*Br)*so,i[14]=(Qe*Jt-tt*dn-Je*Nt)*so,i[15]=(we*dn-Pe*Jt+We*Nt)*so,i):null}function es(i,c){var g=c[0],y=c[1],E=c[2],D=c[3],G=c[4],K=c[5],re=c[6],de=c[7],we=c[8],Pe=c[9],We=c[10],je=c[11],tt=c[12],Qe=c[13],Je=c[14],yt=c[15];return i[0]=K*(We*yt-je*Je)-Pe*(re*yt-de*Je)+Qe*(re*je-de*We),i[1]=-(y*(We*yt-je*Je)-Pe*(E*yt-D*Je)+Qe*(E*je-D*We)),i[2]=y*(re*yt-de*Je)-K*(E*yt-D*Je)+Qe*(E*de-D*re),i[3]=-(y*(re*je-de*We)-K*(E*je-D*We)+Pe*(E*de-D*re)),i[4]=-(G*(We*yt-je*Je)-we*(re*yt-de*Je)+tt*(re*je-de*We)),i[5]=g*(We*yt-je*Je)-we*(E*yt-D*Je)+tt*(E*je-D*We),i[6]=-(g*(re*yt-de*Je)-G*(E*yt-D*Je)+tt*(E*de-D*re)),i[7]=g*(re*je-de*We)-G*(E*je-D*We)+we*(E*de-D*re),i[8]=G*(Pe*yt-je*Qe)-we*(K*yt-de*Qe)+tt*(K*je-de*Pe),i[9]=-(g*(Pe*yt-je*Qe)-we*(y*yt-D*Qe)+tt*(y*je-D*Pe)),i[10]=g*(K*yt-de*Qe)-G*(y*yt-D*Qe)+tt*(y*de-D*K),i[11]=-(g*(K*je-de*Pe)-G*(y*je-D*Pe)+we*(y*de-D*K)),i[12]=-(G*(Pe*Je-We*Qe)-we*(K*Je-re*Qe)+tt*(K*We-re*Pe)),i[13]=g*(Pe*Je-We*Qe)-we*(y*Je-E*Qe)+tt*(y*We-E*Pe),i[14]=-(g*(K*Je-re*Qe)-G*(y*Je-E*Qe)+tt*(y*re-E*K)),i[15]=g*(K*We-re*Pe)-G*(y*We-E*Pe)+we*(y*re-E*K),i}function ps(i){var c=i[0],g=i[1],y=i[2],E=i[3],D=i[4],G=i[5],K=i[6],re=i[7],de=i[8],we=i[9],Pe=i[10],We=i[11],je=i[12],tt=i[13],Qe=i[14],Je=i[15],yt=c*G-g*D,Nt=c*K-y*D,Jt=c*re-E*D,gn=g*K-y*G,dn=g*re-E*G,Hn=y*re-E*K,Ur=de*tt-we*je,Br=de*Qe-Pe*je,Hi=de*Je-We*je,zr=we*Qe-Pe*tt,Mi=we*Je-We*tt,si=Pe*Je-We*Qe;return yt*si-Nt*Mi+Jt*zr+gn*Hi-dn*Br+Hn*Ur}function gs(i,c,g){var y=c[0],E=c[1],D=c[2],G=c[3],K=c[4],re=c[5],de=c[6],we=c[7],Pe=c[8],We=c[9],je=c[10],tt=c[11],Qe=c[12],Je=c[13],yt=c[14],Nt=c[15],Jt=g[0],gn=g[1],dn=g[2],Hn=g[3];return i[0]=Jt*y+gn*K+dn*Pe+Hn*Qe,i[1]=Jt*E+gn*re+dn*We+Hn*Je,i[2]=Jt*D+gn*de+dn*je+Hn*yt,i[3]=Jt*G+gn*we+dn*tt+Hn*Nt,Jt=g[4],gn=g[5],dn=g[6],Hn=g[7],i[4]=Jt*y+gn*K+dn*Pe+Hn*Qe,i[5]=Jt*E+gn*re+dn*We+Hn*Je,i[6]=Jt*D+gn*de+dn*je+Hn*yt,i[7]=Jt*G+gn*we+dn*tt+Hn*Nt,Jt=g[8],gn=g[9],dn=g[10],Hn=g[11],i[8]=Jt*y+gn*K+dn*Pe+Hn*Qe,i[9]=Jt*E+gn*re+dn*We+Hn*Je,i[10]=Jt*D+gn*de+dn*je+Hn*yt,i[11]=Jt*G+gn*we+dn*tt+Hn*Nt,Jt=g[12],gn=g[13],dn=g[14],Hn=g[15],i[12]=Jt*y+gn*K+dn*Pe+Hn*Qe,i[13]=Jt*E+gn*re+dn*We+Hn*Je,i[14]=Jt*D+gn*de+dn*je+Hn*yt,i[15]=Jt*G+gn*we+dn*tt+Hn*Nt,i}function Ca(i,c,g){var y=g[0],E=g[1],D=g[2],G,K,re,de,we,Pe,We,je,tt,Qe,Je,yt;return c===i?(i[12]=c[0]*y+c[4]*E+c[8]*D+c[12],i[13]=c[1]*y+c[5]*E+c[9]*D+c[13],i[14]=c[2]*y+c[6]*E+c[10]*D+c[14],i[15]=c[3]*y+c[7]*E+c[11]*D+c[15]):(G=c[0],K=c[1],re=c[2],de=c[3],we=c[4],Pe=c[5],We=c[6],je=c[7],tt=c[8],Qe=c[9],Je=c[10],yt=c[11],i[0]=G,i[1]=K,i[2]=re,i[3]=de,i[4]=we,i[5]=Pe,i[6]=We,i[7]=je,i[8]=tt,i[9]=Qe,i[10]=Je,i[11]=yt,i[12]=G*y+we*E+tt*D+c[12],i[13]=K*y+Pe*E+Qe*D+c[13],i[14]=re*y+We*E+Je*D+c[14],i[15]=de*y+je*E+yt*D+c[15]),i}function cu(i,c,g){var y=g[0],E=g[1],D=g[2];return i[0]=c[0]*y,i[1]=c[1]*y,i[2]=c[2]*y,i[3]=c[3]*y,i[4]=c[4]*E,i[5]=c[5]*E,i[6]=c[6]*E,i[7]=c[7]*E,i[8]=c[8]*D,i[9]=c[9]*D,i[10]=c[10]*D,i[11]=c[11]*D,i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],i}function Ps(i,c,g,y){var E=y[0],D=y[1],G=y[2],K=Math.hypot(E,D,G),re,de,we,Pe,We,je,tt,Qe,Je,yt,Nt,Jt,gn,dn,Hn,Ur,Br,Hi,zr,Mi,si,mo,so,Xo;return K<glMatrix.EPSILON?null:(K=1/K,E*=K,D*=K,G*=K,re=Math.sin(g),de=Math.cos(g),we=1-de,Pe=c[0],We=c[1],je=c[2],tt=c[3],Qe=c[4],Je=c[5],yt=c[6],Nt=c[7],Jt=c[8],gn=c[9],dn=c[10],Hn=c[11],Ur=E*E*we+de,Br=D*E*we+G*re,Hi=G*E*we-D*re,zr=E*D*we-G*re,Mi=D*D*we+de,si=G*D*we+E*re,mo=E*G*we+D*re,so=D*G*we-E*re,Xo=G*G*we+de,i[0]=Pe*Ur+Qe*Br+Jt*Hi,i[1]=We*Ur+Je*Br+gn*Hi,i[2]=je*Ur+yt*Br+dn*Hi,i[3]=tt*Ur+Nt*Br+Hn*Hi,i[4]=Pe*zr+Qe*Mi+Jt*si,i[5]=We*zr+Je*Mi+gn*si,i[6]=je*zr+yt*Mi+dn*si,i[7]=tt*zr+Nt*Mi+Hn*si,i[8]=Pe*mo+Qe*so+Jt*Xo,i[9]=We*mo+Je*so+gn*Xo,i[10]=je*mo+yt*so+dn*Xo,i[11]=tt*mo+Nt*so+Hn*Xo,c!==i&&(i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15]),i)}function nu(i,c,g){var y=Math.sin(g),E=Math.cos(g),D=c[4],G=c[5],K=c[6],re=c[7],de=c[8],we=c[9],Pe=c[10],We=c[11];return c!==i&&(i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15]),i[4]=D*E+de*y,i[5]=G*E+we*y,i[6]=K*E+Pe*y,i[7]=re*E+We*y,i[8]=de*E-D*y,i[9]=we*E-G*y,i[10]=Pe*E-K*y,i[11]=We*E-re*y,i}function wa(i,c,g){var y=Math.sin(g),E=Math.cos(g),D=c[0],G=c[1],K=c[2],re=c[3],de=c[8],we=c[9],Pe=c[10],We=c[11];return c!==i&&(i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15]),i[0]=D*E-de*y,i[1]=G*E-we*y,i[2]=K*E-Pe*y,i[3]=re*E-We*y,i[8]=D*y+de*E,i[9]=G*y+we*E,i[10]=K*y+Pe*E,i[11]=re*y+We*E,i}function ru(i,c,g){var y=Math.sin(g),E=Math.cos(g),D=c[0],G=c[1],K=c[2],re=c[3],de=c[4],we=c[5],Pe=c[6],We=c[7];return c!==i&&(i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15]),i[0]=D*E+de*y,i[1]=G*E+we*y,i[2]=K*E+Pe*y,i[3]=re*E+We*y,i[4]=de*E-D*y,i[5]=we*E-G*y,i[6]=Pe*E-K*y,i[7]=We*E-re*y,i}function iu(i,c){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=c[0],i[13]=c[1],i[14]=c[2],i[15]=1,i}function Ja(i,c){return i[0]=c[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=c[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=c[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function pu(i,c,g){var y=g[0],E=g[1],D=g[2],G=Math.hypot(y,E,D),K,re,de;return G<glMatrix.EPSILON?null:(G=1/G,y*=G,E*=G,D*=G,K=Math.sin(c),re=Math.cos(c),de=1-re,i[0]=y*y*de+re,i[1]=E*y*de+D*K,i[2]=D*y*de-E*K,i[3]=0,i[4]=y*E*de-D*K,i[5]=E*E*de+re,i[6]=D*E*de+y*K,i[7]=0,i[8]=y*D*de+E*K,i[9]=E*D*de-y*K,i[10]=D*D*de+re,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}function xu(i,c){var g=Math.sin(c),y=Math.cos(c);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=g,i[7]=0,i[8]=0,i[9]=-g,i[10]=y,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function ou(i,c){var g=Math.sin(c),y=Math.cos(c);return i[0]=y,i[1]=0,i[2]=-g,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=g,i[9]=0,i[10]=y,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function ts(i,c){var g=Math.sin(c),y=Math.cos(c);return i[0]=y,i[1]=g,i[2]=0,i[3]=0,i[4]=-g,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function lu(i,c,g){var y=c[0],E=c[1],D=c[2],G=c[3],K=y+y,re=E+E,de=D+D,we=y*K,Pe=y*re,We=y*de,je=E*re,tt=E*de,Qe=D*de,Je=G*K,yt=G*re,Nt=G*de;return i[0]=1-(je+Qe),i[1]=Pe+Nt,i[2]=We-yt,i[3]=0,i[4]=Pe-Nt,i[5]=1-(we+Qe),i[6]=tt+Je,i[7]=0,i[8]=We+yt,i[9]=tt-Je,i[10]=1-(we+je),i[11]=0,i[12]=g[0],i[13]=g[1],i[14]=g[2],i[15]=1,i}function Hs(i,c){var g=new glMatrix.ARRAY_TYPE(3),y=-c[0],E=-c[1],D=-c[2],G=c[3],K=c[4],re=c[5],de=c[6],we=c[7],Pe=y*y+E*E+D*D+G*G;return Pe>0?(g[0]=(K*G+we*y+re*D-de*E)*2/Pe,g[1]=(re*G+we*E+de*y-K*D)*2/Pe,g[2]=(de*G+we*D+K*E-re*y)*2/Pe):(g[0]=(K*G+we*y+re*D-de*E)*2,g[1]=(re*G+we*E+de*y-K*D)*2,g[2]=(de*G+we*D+K*E-re*y)*2),lu(i,c,g),i}function Ao(i,c){return i[0]=c[12],i[1]=c[13],i[2]=c[14],i}function ns(i,c){var g=c[0],y=c[1],E=c[2],D=c[4],G=c[5],K=c[6],re=c[8],de=c[9],we=c[10];return i[0]=Math.hypot(g,y,E),i[1]=Math.hypot(D,G,K),i[2]=Math.hypot(re,de,we),i}function bs(i,c){var g=new Ya.WT(3);ns(g,c);var y=1/g[0],E=1/g[1],D=1/g[2],G=c[0]*y,K=c[1]*E,re=c[2]*D,de=c[4]*y,we=c[5]*E,Pe=c[6]*D,We=c[8]*y,je=c[9]*E,tt=c[10]*D,Qe=G+we+tt,Je=0;return Qe>0?(Je=Math.sqrt(Qe+1)*2,i[3]=.25*Je,i[0]=(Pe-je)/Je,i[1]=(We-re)/Je,i[2]=(K-de)/Je):G>we&&G>tt?(Je=Math.sqrt(1+G-we-tt)*2,i[3]=(Pe-je)/Je,i[0]=.25*Je,i[1]=(K+de)/Je,i[2]=(We+re)/Je):we>tt?(Je=Math.sqrt(1+we-G-tt)*2,i[3]=(We-re)/Je,i[0]=(K+de)/Je,i[1]=.25*Je,i[2]=(Pe+je)/Je):(Je=Math.sqrt(1+tt-G-we)*2,i[3]=(K-de)/Je,i[0]=(We+re)/Je,i[1]=(Pe+je)/Je,i[2]=.25*Je),i}function ra(i,c,g,y){var E=c[0],D=c[1],G=c[2],K=c[3],re=E+E,de=D+D,we=G+G,Pe=E*re,We=E*de,je=E*we,tt=D*de,Qe=D*we,Je=G*we,yt=K*re,Nt=K*de,Jt=K*we,gn=y[0],dn=y[1],Hn=y[2];return i[0]=(1-(tt+Je))*gn,i[1]=(We+Jt)*gn,i[2]=(je-Nt)*gn,i[3]=0,i[4]=(We-Jt)*dn,i[5]=(1-(Pe+Je))*dn,i[6]=(Qe+yt)*dn,i[7]=0,i[8]=(je+Nt)*Hn,i[9]=(Qe-yt)*Hn,i[10]=(1-(Pe+tt))*Hn,i[11]=0,i[12]=g[0],i[13]=g[1],i[14]=g[2],i[15]=1,i}function Gu(i,c,g,y,E){var D=c[0],G=c[1],K=c[2],re=c[3],de=D+D,we=G+G,Pe=K+K,We=D*de,je=D*we,tt=D*Pe,Qe=G*we,Je=G*Pe,yt=K*Pe,Nt=re*de,Jt=re*we,gn=re*Pe,dn=y[0],Hn=y[1],Ur=y[2],Br=E[0],Hi=E[1],zr=E[2],Mi=(1-(Qe+yt))*dn,si=(je+gn)*dn,mo=(tt-Jt)*dn,so=(je-gn)*Hn,Xo=(1-(We+yt))*Hn,Wa=(Je+Nt)*Hn,ac=(tt+Jt)*Ur,ia=(Je-Nt)*Ur,Tf=(1-(We+Qe))*Ur;return i[0]=Mi,i[1]=si,i[2]=mo,i[3]=0,i[4]=so,i[5]=Xo,i[6]=Wa,i[7]=0,i[8]=ac,i[9]=ia,i[10]=Tf,i[11]=0,i[12]=g[0]+Br-(Mi*Br+so*Hi+ac*zr),i[13]=g[1]+Hi-(si*Br+Xo*Hi+ia*zr),i[14]=g[2]+zr-(mo*Br+Wa*Hi+Tf*zr),i[15]=1,i}function rn(i,c){var g=c[0],y=c[1],E=c[2],D=c[3],G=g+g,K=y+y,re=E+E,de=g*G,we=y*G,Pe=y*K,We=E*G,je=E*K,tt=E*re,Qe=D*G,Je=D*K,yt=D*re;return i[0]=1-Pe-tt,i[1]=we+yt,i[2]=We-Je,i[3]=0,i[4]=we-yt,i[5]=1-de-tt,i[6]=je+Qe,i[7]=0,i[8]=We+Je,i[9]=je-Qe,i[10]=1-de-Pe,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function xr(i,c,g,y,E,D,G){var K=1/(g-c),re=1/(E-y),de=1/(D-G);return i[0]=D*2*K,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=D*2*re,i[6]=0,i[7]=0,i[8]=(g+c)*K,i[9]=(E+y)*re,i[10]=(G+D)*de,i[11]=-1,i[12]=0,i[13]=0,i[14]=G*D*2*de,i[15]=0,i}function sr(i,c,g,y,E){var D=1/Math.tan(c/2),G;return i[0]=D/g,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=D,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,E!=null&&E!==1/0?(G=1/(y-E),i[10]=(E+y)*G,i[14]=2*E*y*G):(i[10]=-1,i[14]=-2*y),i}var Qi=sr;function ws(i,c,g,y,E){var D=1/Math.tan(c/2),G;return i[0]=D/g,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=D,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,E!=null&&E!==1/0?(G=1/(y-E),i[10]=E*G,i[14]=E*y*G):(i[10]=-1,i[14]=-y),i}function ga(i,c,g,y){var E=Math.tan(c.upDegrees*Math.PI/180),D=Math.tan(c.downDegrees*Math.PI/180),G=Math.tan(c.leftDegrees*Math.PI/180),K=Math.tan(c.rightDegrees*Math.PI/180),re=2/(G+K),de=2/(E+D);return i[0]=re,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=de,i[6]=0,i[7]=0,i[8]=-((G-K)*re*.5),i[9]=(E-D)*de*.5,i[10]=y/(g-y),i[11]=-1,i[12]=0,i[13]=0,i[14]=y*g/(g-y),i[15]=0,i}function kt(i,c,g,y,E,D,G){var K=1/(c-g),re=1/(y-E),de=1/(D-G);return i[0]=-2*K,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*re,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*de,i[11]=0,i[12]=(c+g)*K,i[13]=(E+y)*re,i[14]=(G+D)*de,i[15]=1,i}var Kt=kt;function pn(i,c,g,y,E,D,G){var K=1/(c-g),re=1/(y-E),de=1/(D-G);return i[0]=-2*K,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*re,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=de,i[11]=0,i[12]=(c+g)*K,i[13]=(E+y)*re,i[14]=D*de,i[15]=1,i}function lr(i,c,g,y){var E,D,G,K,re,de,we,Pe,We,je,tt=c[0],Qe=c[1],Je=c[2],yt=y[0],Nt=y[1],Jt=y[2],gn=g[0],dn=g[1],Hn=g[2];return Math.abs(tt-gn)<Ya.Ib&&Math.abs(Qe-dn)<Ya.Ib&&Math.abs(Je-Hn)<Ya.Ib?ms(i):(we=tt-gn,Pe=Qe-dn,We=Je-Hn,je=1/Math.hypot(we,Pe,We),we*=je,Pe*=je,We*=je,E=Nt*We-Jt*Pe,D=Jt*we-yt*We,G=yt*Pe-Nt*we,je=Math.hypot(E,D,G),je?(je=1/je,E*=je,D*=je,G*=je):(E=0,D=0,G=0),K=Pe*G-We*D,re=We*E-we*G,de=we*D-Pe*E,je=Math.hypot(K,re,de),je?(je=1/je,K*=je,re*=je,de*=je):(K=0,re=0,de=0),i[0]=E,i[1]=K,i[2]=we,i[3]=0,i[4]=D,i[5]=re,i[6]=Pe,i[7]=0,i[8]=G,i[9]=de,i[10]=We,i[11]=0,i[12]=-(E*tt+D*Qe+G*Je),i[13]=-(K*tt+re*Qe+de*Je),i[14]=-(we*tt+Pe*Qe+We*Je),i[15]=1,i)}function ar(i,c,g,y){var E=c[0],D=c[1],G=c[2],K=y[0],re=y[1],de=y[2],we=E-g[0],Pe=D-g[1],We=G-g[2],je=we*we+Pe*Pe+We*We;je>0&&(je=1/Math.sqrt(je),we*=je,Pe*=je,We*=je);var tt=re*We-de*Pe,Qe=de*we-K*We,Je=K*Pe-re*we;return je=tt*tt+Qe*Qe+Je*Je,je>0&&(je=1/Math.sqrt(je),tt*=je,Qe*=je,Je*=je),i[0]=tt,i[1]=Qe,i[2]=Je,i[3]=0,i[4]=Pe*Je-We*Qe,i[5]=We*tt-we*Je,i[6]=we*Qe-Pe*tt,i[7]=0,i[8]=we,i[9]=Pe,i[10]=We,i[11]=0,i[12]=E,i[13]=D,i[14]=G,i[15]=1,i}function Cn(i){return"mat4("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+", "+i[4]+", "+i[5]+", "+i[6]+", "+i[7]+", "+i[8]+", "+i[9]+", "+i[10]+", "+i[11]+", "+i[12]+", "+i[13]+", "+i[14]+", "+i[15]+")"}function _n(i){return Math.hypot(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}function Nn(i,c,g){return i[0]=c[0]+g[0],i[1]=c[1]+g[1],i[2]=c[2]+g[2],i[3]=c[3]+g[3],i[4]=c[4]+g[4],i[5]=c[5]+g[5],i[6]=c[6]+g[6],i[7]=c[7]+g[7],i[8]=c[8]+g[8],i[9]=c[9]+g[9],i[10]=c[10]+g[10],i[11]=c[11]+g[11],i[12]=c[12]+g[12],i[13]=c[13]+g[13],i[14]=c[14]+g[14],i[15]=c[15]+g[15],i}function sn(i,c,g){return i[0]=c[0]-g[0],i[1]=c[1]-g[1],i[2]=c[2]-g[2],i[3]=c[3]-g[3],i[4]=c[4]-g[4],i[5]=c[5]-g[5],i[6]=c[6]-g[6],i[7]=c[7]-g[7],i[8]=c[8]-g[8],i[9]=c[9]-g[9],i[10]=c[10]-g[10],i[11]=c[11]-g[11],i[12]=c[12]-g[12],i[13]=c[13]-g[13],i[14]=c[14]-g[14],i[15]=c[15]-g[15],i}function Tn(i,c,g){return i[0]=c[0]*g,i[1]=c[1]*g,i[2]=c[2]*g,i[3]=c[3]*g,i[4]=c[4]*g,i[5]=c[5]*g,i[6]=c[6]*g,i[7]=c[7]*g,i[8]=c[8]*g,i[9]=c[9]*g,i[10]=c[10]*g,i[11]=c[11]*g,i[12]=c[12]*g,i[13]=c[13]*g,i[14]=c[14]*g,i[15]=c[15]*g,i}function Yt(i,c,g,y){return i[0]=c[0]+g[0]*y,i[1]=c[1]+g[1]*y,i[2]=c[2]+g[2]*y,i[3]=c[3]+g[3]*y,i[4]=c[4]+g[4]*y,i[5]=c[5]+g[5]*y,i[6]=c[6]+g[6]*y,i[7]=c[7]+g[7]*y,i[8]=c[8]+g[8]*y,i[9]=c[9]+g[9]*y,i[10]=c[10]+g[10]*y,i[11]=c[11]+g[11]*y,i[12]=c[12]+g[12]*y,i[13]=c[13]+g[13]*y,i[14]=c[14]+g[14]*y,i[15]=c[15]+g[15]*y,i}function An(i,c){return i[0]===c[0]&&i[1]===c[1]&&i[2]===c[2]&&i[3]===c[3]&&i[4]===c[4]&&i[5]===c[5]&&i[6]===c[6]&&i[7]===c[7]&&i[8]===c[8]&&i[9]===c[9]&&i[10]===c[10]&&i[11]===c[11]&&i[12]===c[12]&&i[13]===c[13]&&i[14]===c[14]&&i[15]===c[15]}function Er(i,c){var g=i[0],y=i[1],E=i[2],D=i[3],G=i[4],K=i[5],re=i[6],de=i[7],we=i[8],Pe=i[9],We=i[10],je=i[11],tt=i[12],Qe=i[13],Je=i[14],yt=i[15],Nt=c[0],Jt=c[1],gn=c[2],dn=c[3],Hn=c[4],Ur=c[5],Br=c[6],Hi=c[7],zr=c[8],Mi=c[9],si=c[10],mo=c[11],so=c[12],Xo=c[13],Wa=c[14],ac=c[15];return Math.abs(g-Nt)<=glMatrix.EPSILON*Math.max(1,Math.abs(g),Math.abs(Nt))&&Math.abs(y-Jt)<=glMatrix.EPSILON*Math.max(1,Math.abs(y),Math.abs(Jt))&&Math.abs(E-gn)<=glMatrix.EPSILON*Math.max(1,Math.abs(E),Math.abs(gn))&&Math.abs(D-dn)<=glMatrix.EPSILON*Math.max(1,Math.abs(D),Math.abs(dn))&&Math.abs(G-Hn)<=glMatrix.EPSILON*Math.max(1,Math.abs(G),Math.abs(Hn))&&Math.abs(K-Ur)<=glMatrix.EPSILON*Math.max(1,Math.abs(K),Math.abs(Ur))&&Math.abs(re-Br)<=glMatrix.EPSILON*Math.max(1,Math.abs(re),Math.abs(Br))&&Math.abs(de-Hi)<=glMatrix.EPSILON*Math.max(1,Math.abs(de),Math.abs(Hi))&&Math.abs(we-zr)<=glMatrix.EPSILON*Math.max(1,Math.abs(we),Math.abs(zr))&&Math.abs(Pe-Mi)<=glMatrix.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(Mi))&&Math.abs(We-si)<=glMatrix.EPSILON*Math.max(1,Math.abs(We),Math.abs(si))&&Math.abs(je-mo)<=glMatrix.EPSILON*Math.max(1,Math.abs(je),Math.abs(mo))&&Math.abs(tt-so)<=glMatrix.EPSILON*Math.max(1,Math.abs(tt),Math.abs(so))&&Math.abs(Qe-Xo)<=glMatrix.EPSILON*Math.max(1,Math.abs(Qe),Math.abs(Xo))&&Math.abs(Je-Wa)<=glMatrix.EPSILON*Math.max(1,Math.abs(Je),Math.abs(Wa))&&Math.abs(yt-ac)<=glMatrix.EPSILON*Math.max(1,Math.abs(yt),Math.abs(ac))}var Ir=null,ti=null,Hr,ai,yo,us,io,fo,Ko,Gs,Va,rc,ph,ic,oc,Hc,Yf,Ig,Gd,Rg,Lg,Bg,kg,Gg,Fg,jg;function gd(i,c){var g;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(g=Bv(i))||c&&i&&typeof i.length=="number"){g&&(i=g);var y=0,E=function(){};return{s:E,n:function(){return y>=i.length?{done:!0}:{done:!1,value:i[y++]}},e:function(de){throw de},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,G=!1,K;return{s:function(){g=i[Symbol.iterator]()},n:function(){var de=g.next();return D=de.done,de},e:function(de){G=!0,K=de},f:function(){try{!D&&g.return!=null&&g.return()}finally{if(G)throw K}}}}function Bv(i,c){if(i){if(typeof i=="string")return zg(i,c);var g=Object.prototype.toString.call(i).slice(8,-1);if(g==="Object"&&i.constructor&&(g=i.constructor.name),g==="Map"||g==="Set")return Array.from(i);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return zg(i,c)}}function zg(i,c){(c==null||c>i.length)&&(c=i.length);for(var g=0,y=new Array(c);g<c;g++)y[g]=i[g];return y}var vh=(Hr=(0,Si.b2)(),ai=(0,Si.f3)(Kr.MeshComponentManager),yo=(0,Si.f3)(Kr.GeometryComponentManager),us=(0,Si.f3)(Kr.MaterialComponentManager),io=(0,Si.f3)(Kr.CullableComponentManager),fo=(0,Si.f3)(Kr.TransformComponentManager),Ko=(0,Si.f3)(Kr.HierarchyComponentManager),Gs=(0,Si.f3)(Kr.Systems),Va=(0,Si.t6)(Kr.FrameGraphSystem),rc=(0,Si.f3)(Kr.RenderEngine),ph=(0,Si.f3)(Kr.ResourcePool),Hr(ic=(oc=(jg=Fg=function(){function i(){var c=this;(0,So.Z)(this,i),ho(this,"mesh",Hc,this),ho(this,"geometry",Yf,this),ho(this,"material",Ig,this),ho(this,"cullable",Gd,this),ho(this,"transform",Rg,this),ho(this,"hierarchy",Lg,this),ho(this,"frameGraphSystem",Bg,this),ho(this,"engine",kg,this),ho(this,"resourcePool",Gg,this),this.modelCache={},this.setup=function(g,y,E){var D=g.createRenderTarget(y,"color buffer",{width:1,height:1,usage:Vn.RENDER_ATTACHMENT|Vn.SAMPLED|Vn.COPY_SRC});E.data={output:y.write(g,D)}},this.execute=function(){var g=(0,Os.Z)(oo().mark(function y(E,D,G){var K,re,de,we,Pe,We;return oo().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:K=E.getResourceNode(D.data.output),re=c.resourcePool.getOrCreateResource(K.resource),de=gd(G),tt.prev=3,de.s();case 5:if((we=de.n()).done){tt.next=11;break}return Pe=we.value,tt.next=9,c.initView(Pe);case 9:tt.next=5;break;case 11:tt.next=16;break;case 13:tt.prev=13,tt.t0=tt.catch(3),de.e(tt.t0);case 16:return tt.prev=16,de.f(),tt.finish(16);case 19:We=c.engine.getCanvas(),re.resize({width:We.width,height:We.height}),c.engine.setScissor({enable:!1}),c.engine.clear({framebuffer:re,color:G[0].getClearColor(),depth:1}),c.engine.useFramebuffer(re,function(){var Qe=gd(G),Je;try{for(Qe.s();!(Je=Qe.n()).done;){var yt=Je.value;c.renderView(yt)}}catch(Nt){Qe.e(Nt)}finally{Qe.f()}});case 24:case"end":return tt.stop()}},y,null,[[3,13,16,19]])}));return function(y,E,D){return g.apply(this,arguments)}}()}return(0,No.Z)(i,[{key:"renderView",value:function(g){var y=g.getScene(),E=g.getCamera(),D=E.getViewTransform(),G=gs(Po(),E.getPerspective(),D);E.getFrustum().extractFromVPMatrix(G);var K=g.getViewport(),re=K.x,de=K.y,we=K.width,Pe=K.height;this.engine.viewport({x:re,y:de,width:we,height:Pe});var We=gd(y.getEntities()),je;try{for(We.s();!(je=We.n()).done;){var tt=je.value;this.renderMesh(tt,{camera:E,view:g,viewMatrix:D})}}catch(Qe){We.e(Qe)}finally{We.f()}}},{key:"renderMesh",value:function(g,y){var E=y.camera,D=y.view,G=y.viewMatrix,K=this.mesh.getComponentByEntity(g);if(!(!K||!K.visible)){var re=K.material,de=K.geometry;if(!(!de||de.dirty||!re)){var we=this.transform.getComponentByEntity(g),Pe=gs(Po(),G,we.worldTransform),We=D.getViewport(),je=We.width,tt=We.height;re.setUniform({projectionMatrix:E.getPerspective(),modelViewMatrix:Pe,modelMatrix:we.worldTransform,viewMatrix:G,cameraPosition:E.getPosition(),u_viewport:[je,tt]}),K.model&&(K.model.draw({uniforms:re.uniforms.reduce(function(Qe,Je){return Qe[Je.name]=Je.data,Qe},{})}),re.uniforms.forEach(function(Qe){Qe.dirty=!1}),re.dirty=!1)}}}},{key:"initMesh",value:function(){var c=(0,Os.Z)(oo().mark(function y(E,D){var G,K,re,de,we,Pe,We,je;return oo().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(G=this.mesh.getComponentByEntity(E),G){Qe.next=3;break}return Qe.abrupt("return");case 3:if(K=G.material,re=G.geometry,!(!re||re.dirty||!K)){Qe.next=7;break}return Qe.abrupt("return");case 7:if(G.model){Qe.next=24;break}if(de="m-".concat(K.entity,"-g-").concat(re.entity),!this.modelCache[de]){Qe.next=12;break}return G.model=this.modelCache[de],Qe.abrupt("return");case 12:return K.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),we=this.engine,Pe=we.createModel,We=we.createAttribute,je={vs:K.vertexShaderGLSL,fs:K.fragmentShaderGLSL,defines:K.defines,attributes:re.attributes.reduce(function(Je,yt){return yt.data&&yt.buffer&&(Je[yt.name]=We({buffer:yt.buffer,attributes:yt.attributes,arrayStride:yt.arrayStride,stepMode:yt.stepMode,divisor:yt.stepMode==="vertex"?0:1})),Je},{}),uniforms:K.uniforms.reduce(function(Je,yt){return Je[yt.name]=yt.data,Je},{}),scissor:{enable:!0,box:function(){return D.getViewport()}}},K.cull&&(je.cull=K.cull),K.depth&&(je.depth=K.depth),K.blend&&(je.blend=K.blend),re.indicesBuffer&&(je.elements=re.indicesBuffer),re.maxInstancedCount&&(je.instances=re.maxInstancedCount,je.count=re.vertexCount||3),Qe.next=22,Pe(je);case 22:G.model=Qe.sent,this.modelCache[de]=G.model;case 24:case"end":return Qe.stop()}},y,this)}));function g(y,E){return c.apply(this,arguments)}return g}()},{key:"initView",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){var D,G,K,re;return oo().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:D=E.getScene(),G=gd(D.getEntities()),we.prev=2,G.s();case 4:if((K=G.n()).done){we.next=10;break}return re=K.value,we.next=8,this.initMesh(re,E);case 8:we.next=4;break;case 10:we.next=15;break;case 12:we.prev=12,we.t0=we.catch(2),G.e(we.t0);case 15:return we.prev=15,G.f(),we.finish(15);case 18:case"end":return we.stop()}},y,this,[[2,12,15,18]])}));function g(y){return c.apply(this,arguments)}return g}()}]),i}(),Fg.IDENTIFIER="Render Pass",jg),Hc=Bo(oc.prototype,"mesh",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yf=Bo(oc.prototype,"geometry",[yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ig=Bo(oc.prototype,"material",[us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gd=Bo(oc.prototype,"cullable",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rg=Bo(oc.prototype,"transform",[fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lg=Bo(oc.prototype,"hierarchy",[Ko],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bg=Bo(oc.prototype,"frameGraphSystem",[Gs,Va],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kg=Bo(oc.prototype,"engine",[rc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gg=Bo(oc.prototype,"resourcePool",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oc))||ic),Ug,Vg,Wg,$g,Hg,Da,Yl,Bh,Fd,Xg,Yg,Zg,Kg;function jd(i,c){var g;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(g=kv(i))||c&&i&&typeof i.length=="number"){g&&(i=g);var y=0,E=function(){};return{s:E,n:function(){return y>=i.length?{done:!0}:{done:!1,value:i[y++]}},e:function(de){throw de},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,G=!1,K;return{s:function(){g=i[Symbol.iterator]()},n:function(){var de=g.next();return D=de.done,de},e:function(de){G=!0,K=de},f:function(){try{!D&&g.return!=null&&g.return()}finally{if(G)throw K}}}}function kv(i,c){if(i){if(typeof i=="string")return zd(i,c);var g=Object.prototype.toString.call(i).slice(8,-1);if(g==="Object"&&i.constructor&&(g=i.constructor.name),g==="Map"||g==="Set")return Array.from(i);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return zd(i,c)}}function zd(i,c){(c==null||c>i.length)&&(c=i.length);for(var g=0,y=new Array(c);g<c;g++)y[g]=i[g];return y}var Ud={NONE:0,ENCODE:1,HIGHLIGHT:2},pd=(Ug=(0,Si.b2)(),Vg=(0,Si.f3)(Kr.RenderEngine),Wg=(0,Si.f3)(Kr.ResourcePool),$g=(0,Si.f3)(Kr.RenderPassFactory),Hg=(0,Si.f3)(Kr.MeshComponentManager),Ug(Da=(Yl=(Kg=Zg=function(){function i(){var c=this;(0,So.Z)(this,i),ho(this,"engine",Bh,this),ho(this,"resourcePool",Fd,this),ho(this,"renderPassFactory",Xg,this),ho(this,"mesh",Yg,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(g,y,E){var D=g.createRenderTarget(y,"picking fbo",{width:1,height:1});E.data={output:y.write(g,D)},y.hasSideEffect=!0},this.execute=function(){var g=(0,Os.Z)(oo().mark(function y(E,D,G){var K,re,de;return oo().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(c.views=G,!c.alreadyInRendering){Pe.next=3;break}return Pe.abrupt("return");case 3:K=jd(G);try{for(de=function(){var je=re.value,tt=je.getViewport(),Qe=tt.width,Je=tt.height;c.alreadyInRendering=!0;var yt=E.getResourceNode(D.data.output);c.pickingFBO=c.resourcePool.getOrCreateResource(yt.resource),c.pickingFBO.resize({width:Qe,height:Je}),c.engine.useFramebuffer(c.pickingFBO,function(){c.engine.clear({framebuffer:c.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Nt=c.renderPassFactory(vh.IDENTIFIER),Jt=[],gn=je.getScene(),dn=jd(gn.getEntities()),Hn;try{for(dn.s();!(Hn=dn.n()).done;){var Ur=Hn.value,Br=c.mesh.getComponentByEntity(Ur),Hi=Br.material;Hi.setUniform("u_PickingStage",Ud.ENCODE),Jt.push(Br)}}catch(zr){dn.e(zr)}finally{dn.f()}Nt.renderView(je),Jt.forEach(function(zr){var Mi=zr.material;Mi.setUniform("u_PickingStage",Ud.HIGHLIGHT)}),c.alreadyInRendering=!1})},K.s();!(re=K.n()).done;)de()}catch(We){K.e(We)}finally{K.f()}case 5:case"end":return Pe.stop()}},y)}));return function(y,E,D){return g.apply(this,arguments)}}(),this.pick=function(g,y){var E=g.x,D=g.y,G=c.engine,K=G.readPixels,re=G.useFramebuffer,de=y.getViewport(),we=de.width,Pe=de.height,We=E*window.devicePixelRatio,je=D*window.devicePixelRatio;if(!(We>we||We<0||je>Pe||je<0)){var tt,Qe;return re(c.pickingFBO,function(){tt=K({x:Math.round(We),y:Math.round(Pe-(D+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:c.pickingFBO}),(tt[0]!==0||tt[1]!==0||tt[2]!==0)&&(Qe=Ar(tt),c.highlightEnabled&&c.highlightPickedFeature(tt,y))}),Qe}}}return(0,No.Z)(i,[{key:"enableHighlight",value:function(g){this.highlightEnabled=g}},{key:"setHighlightColor",value:function(g){this.highlightColor=g}},{key:"highlightPickedFeature",value:function(g,y){if(g){var E=jd(y.getScene().getEntities()),D;try{for(E.s();!(D=E.n()).done;){var G=D.value,K=this.mesh.getComponentByEntity(G),re=K.material;re.setUniform("u_PickingStage",Ud.HIGHLIGHT),re.setUniform("u_PickingColor",[g[0],g[1],g[2]]),re.setUniform("u_HighlightColor",this.highlightColor)}}catch(de){E.e(de)}finally{E.f()}}}}]),i}(),Zg.IDENTIFIER="PixelPicking Pass",Kg),Bh=Bo(Yl.prototype,"engine",[Vg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fd=Bo(Yl.prototype,"resourcePool",[Wg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xg=Bo(Yl.prototype,"renderPassFactory",[$g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yg=Bo(Yl.prototype,"mesh",[Hg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yl))||Da),Jg,mh,Qg,qg,vd,ep,tp,Vd,np,rp=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Gv=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Fv=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,jv=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,kh=(Jg=(0,Si.b2)(),mh=(0,Si.f3)(Kr.RenderEngine),Qg=(0,Si.f3)(Kr.ResourcePool),Jg(qg=(vd=(np=Vd=function i(){var c=this;(0,So.Z)(this,i),ho(this,"engine",ep,this),ho(this,"resourcePool",tp,this),this.model=void 0,this.setup=function(g,y,E){var D=g.getPass(vh.IDENTIFIER);if(D){var G=g.createRenderTarget(y,"render to screen",{width:1,height:1});E.data={input:y.read(D.data.output),output:y.write(g,G)}}},this.execute=function(){var g=(0,Os.Z)(oo().mark(function y(E,D){var G,K,re,de,we,Pe,We;return oo().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(G=c.engine,K=G.createModel,re=G.createAttribute,de=G.createBuffer,c.model){tt.next=6;break}return tt.next=4,K({vs:c.engine.supportWebGPU?jv:Gv,fs:c.engine.supportWebGPU?Fv:rp,attributes:{a_Position:re({buffer:de({data:[-4,-4,4,-4,0,4],type:Vn.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:we=tt.sent,c.model=we;case 6:Pe=E.getResourceNode(D.data.input),We=c.resourcePool.getOrCreateResource(Pe.resource),c.engine.useFramebuffer(null,function(){c.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),c.model.draw({uniforms:{u_Texture:We}})});case 9:case"end":return tt.stop()}},y)}));return function(y,E){return g.apply(this,arguments)}}(),this.tearDown=function(){c.model=void 0}},Vd.IDENTIFIER="Copy Pass",np),ep=Bo(vd.prototype,"engine",[mh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tp=Bo(vd.prototype,"resourcePool",[Qg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vd))||qg),ip,op,sp,md,yd,Wd,ap,Zf,up,Kf,Gh,cp,lp,zv=(ip=(0,Si.b2)(),op=(0,Si.f3)(Kr.Systems),sp=(0,Si.t6)(Kr.FrameGraphSystem),md=(0,Si.f3)(Kr.RenderPassFactory),yd=(0,Si.f3)(Kr.ConfigService),Wd=(0,Si.f3)(Kr.ResourcePool),ip(ap=(Zf=(lp=function(){function i(){(0,So.Z)(this,i),ho(this,"frameGraphSystem",up,this),ho(this,"renderPassFactory",Kf,this),ho(this,"configService",Gh,this),ho(this,"resourcePool",cp,this)}return(0,No.Z)(i,[{key:"execute",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){var D,G,K,re,de,we,Pe,We,je;return oo().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:D=this.renderPassFactory(vh.IDENTIFIER),G=D.setup,K=D.execute,re=this.frameGraphSystem.addPass(vh.IDENTIFIER,G,K),de=this.renderPassFactory(kh.IDENTIFIER),we=de.setup,Pe=de.execute,We=de.tearDown,je=this.frameGraphSystem.addPass(kh.IDENTIFIER,we,Pe,We),this.frameGraphSystem.present(je.data.output);case 5:case"end":return Qe.stop()}},y,this)}));function g(y){return c.apply(this,arguments)}return g}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(g,y){var E=this.renderPassFactory(pd.IDENTIFIER);return E.pick(g,y)}}]),i}(),lp),up=Bo(Zf.prototype,"frameGraphSystem",[op,sp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kf=Bo(Zf.prototype,"renderPassFactory",[md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gh=Bo(Zf.prototype,"configService",[yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cp=Bo(Zf.prototype,"resourcePool",[Wd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zf))||ap);function Uv(i){var c=Vv();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function Vv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Wv=function(i){(0,aa.Z)(g,i);var c=Uv(g);function g(y){var E;return(0,So.Z)(this,g),E=c.call(this,y),E.parentID=void 0,Object.assign((0,Ts.Z)(E),y),E}return g}(_u),fp,hp,dp,$d,gp,Zl,pp,Hd,Xd,bd,vp=(fp=(0,Si.b2)(),hp=(0,Si.f3)(Kr.HierarchyComponentManager),dp=(0,Si.f3)(Kr.TransformComponentManager),$d=(0,Si.f3)(Kr.MeshComponentManager),fp(gp=(Zl=(bd=function(){function i(){(0,So.Z)(this,i),ho(this,"hierarchy",pp,this),ho(this,"transform",Hd,this),ho(this,"mesh",Xd,this)}return(0,No.Z)(i,[{key:"execute",value:function(){var c=(0,Os.Z)(oo().mark(function y(){return oo().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return D.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var g=this;this.transform.forEach(function(y,E){(E.isDirty()||E.isLocalDirty())&&(g.setMeshAABBDirty(g.mesh.getComponentByEntity(y)),E.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var g=this;this.hierarchy.forEach(function(y,E){var D=g.transform.getComponentByEntity(y),G=g.transform.getComponentByEntity(E.parentID);D!==null&&G!==null&&D.updateTransformWithParent(G)})}},{key:"attach",value:function(g,y,E){this.hierarchy.contains(g)&&this.detach(g),this.hierarchy.create(g,{parentID:y});var D=this.mesh.getComponentByEntity(y);if(this.setMeshAABBDirty(D),D&&D.children.indexOf(g)===-1&&D.children.push(g),this.hierarchy.getCount()>1)for(var G=this.hierarchy.getCount()-1;G>0;--G)for(var K=this.hierarchy.getEntity(G),re=0;re<G;++re){var de=this.hierarchy.getComponent(re);if(de.parentID===K){this.hierarchy.moveItem(G,re),++G;break}}var we=this.hierarchy.getComponentByEntity(g),Pe=this.transform.getComponentByEntity(y);Pe===null&&(Pe=this.transform.create(y));var We=this.transform.getComponentByEntity(g);We===null&&(We=this.transform.create(g),Pe=this.transform.getComponentByEntity(y)),We.parent=Pe,!E&&Pe&&(We.matrixTransform(as(Po(),Pe.worldTransform)),We.updateTransform()),Pe&&We.updateTransformWithParent(Pe)}},{key:"detach",value:function(g){var y=this.hierarchy.getComponentByEntity(g);if(y!==null){var E=this.transform.getComponentByEntity(g);E!==null&&(E.parent=null,E.applyTransform()),this.hierarchy.removeKeepSorted(g);var D=this.mesh.getComponentByEntity(y.parentID);if(D){var G=D.children.indexOf(g);D.children.splice(G,1)}this.setMeshAABBDirty(D)}}},{key:"detachChildren",value:function(g){var y=this.mesh.getComponentByEntity(g);y&&(y.children=[]);for(var E=0;E<this.hierarchy.getCount();){var D;if(((D=this.hierarchy.getComponent(E))===null||D===void 0?void 0:D.parentID)===g){var G=this.hierarchy.getEntity(E);this.detach(G)}else++E}}},{key:"setMeshAABBDirty",value:function(g){g&&(g.aabbDirty=!0)}}]),i}(),bd),pp=Bo(Zl.prototype,"hierarchy",[hp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hd=Bo(Zl.prototype,"transform",[dp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xd=Bo(Zl.prototype,"mesh",[$d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zl))||gp);function Su(){var i=new Ya.WT(4);return Ya.WT!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function $v(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function Kl(i,c,g){g=g*.5;var y=Math.sin(g);return i[0]=y*c[0],i[1]=y*c[1],i[2]=y*c[2],i[3]=Math.cos(g),i}function sy(i,c){var g=Math.acos(c[3])*2,y=Math.sin(g/2);return y>glMatrix.EPSILON?(i[0]=c[0]/y,i[1]=c[1]/y,i[2]=c[2]/y):(i[0]=1,i[1]=0,i[2]=0),g}function ay(i,c){var g=Jf(i,c);return Math.acos(2*g*g-1)}function Xc(i,c,g){var y=c[0],E=c[1],D=c[2],G=c[3],K=g[0],re=g[1],de=g[2],we=g[3];return i[0]=y*we+G*K+E*de-D*re,i[1]=E*we+G*re+D*K-y*de,i[2]=D*we+G*de+y*re-E*K,i[3]=G*we-y*K-E*re-D*de,i}function Yd(i,c,g){g*=.5;var y=c[0],E=c[1],D=c[2],G=c[3],K=Math.sin(g),re=Math.cos(g);return i[0]=y*re+G*K,i[1]=E*re+D*K,i[2]=D*re-E*K,i[3]=G*re-y*K,i}function Zd(i,c,g){g*=.5;var y=c[0],E=c[1],D=c[2],G=c[3],K=Math.sin(g),re=Math.cos(g);return i[0]=y*re-D*K,i[1]=E*re+G*K,i[2]=D*re+y*K,i[3]=G*re-E*K,i}function uy(i,c,g){g*=.5;var y=c[0],E=c[1],D=c[2],G=c[3],K=Math.sin(g),re=Math.cos(g);return i[0]=y*re+E*K,i[1]=E*re-y*K,i[2]=D*re+G*K,i[3]=G*re-D*K,i}function cy(i,c){var g=c[0],y=c[1],E=c[2];return i[0]=g,i[1]=y,i[2]=E,i[3]=Math.sqrt(Math.abs(1-g*g-y*y-E*E)),i}function Kd(i,c){var g=c[0],y=c[1],E=c[2],D=c[3],G=Math.sqrt(g*g+y*y+E*E),K=Math.exp(D),re=G>0?K*Math.sin(G)/G:0;return i[0]=g*re,i[1]=y*re,i[2]=E*re,i[3]=K*Math.cos(G),i}function mp(i,c){var g=c[0],y=c[1],E=c[2],D=c[3],G=Math.sqrt(g*g+y*y+E*E),K=G>0?Math.atan2(G,D)/G:0;return i[0]=g*K,i[1]=y*K,i[2]=E*K,i[3]=.5*Math.log(g*g+y*y+E*E+D*D),i}function Hv(i,c,g){return mp(i,c),Zv(i,i,g),Kd(i,i),i}function wd(i,c,g,y){var E=c[0],D=c[1],G=c[2],K=c[3],re=g[0],de=g[1],we=g[2],Pe=g[3],We,je,tt,Qe,Je;return je=E*re+D*de+G*we+K*Pe,je<0&&(je=-je,re=-re,de=-de,we=-we,Pe=-Pe),1-je>Ya.Ib?(We=Math.acos(je),tt=Math.sin(We),Qe=Math.sin((1-y)*We)/tt,Je=Math.sin(y*We)/tt):(Qe=1-y,Je=y),i[0]=Qe*E+Je*re,i[1]=Qe*D+Je*de,i[2]=Qe*G+Je*we,i[3]=Qe*K+Je*Pe,i}function ly(i){var c=glMatrix.RANDOM(),g=glMatrix.RANDOM(),y=glMatrix.RANDOM(),E=Math.sqrt(1-c),D=Math.sqrt(c);return i[0]=E*Math.sin(2*Math.PI*g),i[1]=E*Math.cos(2*Math.PI*g),i[2]=D*Math.sin(2*Math.PI*y),i[3]=D*Math.cos(2*Math.PI*y),i}function yp(i,c){var g=c[0],y=c[1],E=c[2],D=c[3],G=g*g+y*y+E*E+D*D,K=G?1/G:0;return i[0]=-g*K,i[1]=-y*K,i[2]=-E*K,i[3]=D*K,i}function fy(i,c){return i[0]=-c[0],i[1]=-c[1],i[2]=-c[2],i[3]=c[3],i}function Xv(i,c){var g=c[0]+c[4]+c[8],y;if(g>0)y=Math.sqrt(g+1),i[3]=.5*y,y=.5/y,i[0]=(c[5]-c[7])*y,i[1]=(c[6]-c[2])*y,i[2]=(c[1]-c[3])*y;else{var E=0;c[4]>c[0]&&(E=1),c[8]>c[E*3+E]&&(E=2);var D=(E+1)%3,G=(E+2)%3;y=Math.sqrt(c[E*3+E]-c[D*3+D]-c[G*3+G]+1),i[E]=.5*y,y=.5/y,i[3]=(c[D*3+G]-c[G*3+D])*y,i[D]=(c[D*3+E]+c[E*3+D])*y,i[G]=(c[G*3+E]+c[E*3+G])*y}return i}function Jd(i,c,g,y){var E=.5*Math.PI/180;c*=E,g*=E,y*=E;var D=Math.sin(c),G=Math.cos(c),K=Math.sin(g),re=Math.cos(g),de=Math.sin(y),we=Math.cos(y);return i[0]=D*re*we-G*K*de,i[1]=G*K*we+D*re*de,i[2]=G*re*de-D*K*we,i[3]=G*re*we+D*K*de,i}function hy(i){return"quat("+i[0]+", "+i[1]+", "+i[2]+", "+i[3]+")"}var dy=Rf,Qd=Bu,Fh=vc,gy=Yu,al=Bl,Yv=Xc,Zv=Fl,Jf=f,Ns=w,py=ol,Nc=null,Cu=sh,vy=null,Ic=n,my=it,yy=Pt,by=function(){var i=yn.Ue(),c=yn.al(1,0,0),g=yn.al(0,1,0);return function(y,E,D){var G=yn.AK(E,D);return G<-.999999?(yn.kC(i,c,E),yn.Zh(i)<1e-6&&yn.kC(i,g,E),yn.Fv(i,i),Kl(y,i,Math.PI),y):G>.999999?(y[0]=0,y[1]=0,y[2]=0,y[3]=1,y):(yn.kC(i,E,D),y[0]=i[0],y[1]=i[1],y[2]=i[2],y[3]=1+G,Ic(y,y))}}(),wy=function(){var i=Su(),c=Su();return function(g,y,E,D,G,K){return wd(i,y,G,K),wd(c,E,D,K),wd(g,i,c,2*K*(1-K)),g}}(),Ey=function(){var i=ri.Ue();return function(c,g,y,E){return i[0]=y[0],i[3]=y[1],i[6]=y[2],i[1]=E[0],i[4]=E[1],i[7]=E[2],i[2]=-g[0],i[5]=-g[1],i[8]=-g[2],Ic(c,Xv(c,i))}}();function qd(i){var c=Kv();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function Kv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Cl=function(i){(0,aa.Z)(g,i);var c=qd(g);function g(y){var E;return(0,So.Z)(this,g),E=c.call(this,y),E.dirtyFlag=void 0,E.localDirtyFlag=void 0,E.parent=null,E.localPosition=yn.al(0,0,0),E.localRotation=Qd(0,0,0,1),E.localScale=yn.al(1,1,1),E.localTransform=Po(),E.position=yn.al(0,0,0),E.rotation=Qd(0,0,0,1),E.scaling=yn.al(1,1,1),E.worldTransform=Po(),E.matrixTransform=function(){var D=Po();return function(G){gs(D,E.getLocalTransform(),G),ns(E.localScale,D),Ao(E.localPosition,D),bs(E.localRotation,D)}}(),E.rotateRollPitchYaw=function(){var D=Su(),G=Su(),K=Su();return function(re,de,we){E.setDirty(),Jd(D,re,0,0),Jd(G,0,de,0),Jd(K,0,0,we),Xc(E.localRotation,D,E.localRotation),Xc(E.localRotation,E.localRotation,G),Xc(E.localRotation,K,E.localRotation),Ic(E.localRotation,E.localRotation)}}(),E.lerp=function(){var D=yn.Ue(),G=Su(),K=yn.Ue(),re=yn.Ue(),de=Su(),we=yn.Ue();return function(Pe,We,je){E.setDirty(),ns(D,Pe.worldTransform),Ao(K,Pe.worldTransform),bs(G,Pe.worldTransform),ns(re,We.worldTransform),Ao(we,We.worldTransform),bs(de,We.worldTransform),yn.t7(E.localScale,D,re,je),wd(E.localRotation,G,de,je),yn.t7(E.localPosition,K,we,je)}}(),E.translate=function(){var D=yn.Ue();return function(G){return yn.IH(D,E.getPosition(),G),E.setPosition(D),E.setDirty(!0),(0,Ts.Z)(E)}}(),E.translateLocal=function(){return function(D){return yn.VC(D,D,E.localRotation),yn.IH(E.localPosition,E.localPosition,D),E.setLocalDirty(!0),(0,Ts.Z)(E)}}(),E.setPosition=function(){var D=Po();return function(G){return E.position=G,E.setLocalDirty(!0),E.parent===null?yn.JG(E.localPosition,G):(pi(D,E.parent.worldTransform),as(D,D),yn.fF(E.localPosition,G,D)),(0,Ts.Z)(E)}}(),E.rotate=function(){var D=Su();return function(G){if(E.parent===null)Xc(E.localRotation,E.localRotation,G),Ic(E.localRotation,E.localRotation);else{var K=E.getRotation(),re=E.parent.getRotation();Fh(D,re),yp(D,D),Xc(D,D,G),Xc(E.localRotation,G,K),Ic(E.localRotation,E.localRotation)}return E.setLocalDirty(),(0,Ts.Z)(E)}}(),E.rotateLocal=function(){return function(D){return Xc(E.localRotation,E.localRotation,D),Ic(E.localRotation,E.localRotation),E.setLocalDirty(!0),(0,Ts.Z)(E)}}(),E.setRotation=function(){var D=Su();return function(G){return E.parent===null?Fh(E.localRotation,G):(Fh(D,E.parent.getRotation()),yp(D,D),Fh(E.localRotation,D),Yv(E.localRotation,E.localRotation,G)),E.setLocalDirty(!0),(0,Ts.Z)(E)}}(),E}return(0,No.Z)(g,[{key:"setLocalPosition",value:function(E){yn.JG(this.localPosition,E),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(E){yn.JG(this.localScale,E),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(E){return Fh(this.localRotation,E),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;E?this.dirtyFlag|=g.DIRTY:this.dirtyFlag&=~g.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;E?(this.localDirtyFlag|=g.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~g.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(pi(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(E){gs(this.worldTransform,E.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),ns(this.localScale,this.worldTransform),Ao(this.localPosition,this.worldTransform),bs(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=yn.al(0,0,0),this.localRotation=Qd(0,0,0,1),this.localScale=yn.al(1,1,1)}},{key:"scaleLocal",value:function(E){return this.setLocalDirty(),yn.Jp(this.localScale,this.localScale,E),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(ra(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return Ao(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return bs(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return ns(this.scaling,this.worldTransform),this.scaling}}]),g}(_u);Cl.DIRTY=1;var bp=V(84879),jh,ja,su,Ed,wp,Ep,Jv=(jh=(0,Si.b2)(),ja=(0,Si.f3)(Kr.RenderEngine),jh(su=(Ed=(Ep=function(){function i(){(0,So.Z)(this,i),ho(this,"engine",wp,this),this.resourcePool={}}return(0,No.Z)(i,[{key:"getOrCreateResource",value:function(g){if(!this.resourcePool[g.name]){var y=g.descriptor,E=y.width,D=y.height,G=y.usage;this.resourcePool[g.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:E,height:D,wrapS:Vn.CLAMP_TO_EDGE,wrapT:Vn.CLAMP_TO_EDGE,usage:G})})}return this.resourcePool[g.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),i}(),Ep),wp=Bo(Ed.prototype,"engine",[ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ed))||su);function Qv(i){var c=qv();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function qv(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var xp=function(i){(0,aa.Z)(g,i);var c=Qv(g);function g(y){var E;return(0,So.Z)(this,g),E=c.call(this,y),E.name=void 0,E.name=y.name||"",E}return g}(_u),eg,yh,xd,em=(eg=(0,Si.b2)(),eg(yh=(xd=function(){function i(){(0,So.Z)(this,i),this.config=void 0}return(0,No.Z)(i,[{key:"get",value:function(){return this.config}},{key:"set",value:function(g){this.config=g}}]),i}(),xd))||yh),tg,zh,bc;(function(i){i.PANSTART="PANSTART",i.PANEND="PANEND",i.PANMOVE="PANMOVE",i.PINCH="PINCH",i.KEYDOWN="KEYDOWN",i.KEYUP="KEYUP",i.HOVER="HOVER"})(bc||(bc={}));var bh=(tg=(0,Si.b2)(),tg(zh=function(){function i(){(0,So.Z)(this,i)}return(0,No.Z)(i,[{key:"listen",value:function(g){}},{key:"on",value:function(g,y){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),i}())||zh);function tm(i){var c=0;switch(i){case"vec2":case"ivec2":c=2;break;case"vec3":case"ivec3":c=3;break;case"vec4":case"ivec4":case"mat2":c=4;break;case"mat3":c=9;break;case"mat4":c=16;break;default:}return c}var nm=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Sp(i){var c={};return i=i.replace(nm,function(g,y,E){var D=E.split(":"),G=D[0].trim(),K="";switch(D.length>1&&(K=D[1].trim()),y){case"bool":K=K==="true";break;case"float":case"int":K=Number(K);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":K?K=K.replace("[","").replace("]","").split(",").reduce(function(re,de){return re.push(Number(de.trim())),re},[]):K=new Array(tm(y)).fill(0);break;default:}return c[G]=K,"uniform ".concat(y," ").concat(G,`;
`)}),{content:i,uniforms:c}}function rm(i){return i.filter(function(c,g,y){return y.indexOf(c)===g})}var Cp,ng,Ol;function Ls(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function wh(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Ls(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Ls(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}var Yc=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,Op=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,im=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,Ea=/precision\s+(high|low|medium)p\s+float/,om=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Tp=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Sd=(Cp=(0,Si.b2)(),Cp(ng=(Ol=function(){function i(){(0,So.Z)(this,i),this.moduleCache={},this.rawContentCache={}}return(0,No.Z)(i,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:Op,fs:Yc}),this.registerModule("sdf2d",{vs:"",fs:im})}},{key:"registerModule",value:function(g,y){if(!this.rawContentCache[g]){var E=y.vs,D=E===void 0?"":E,G=y.fs,K=G===void 0?"":G,re=y.uniforms,de=Sp(D),we=de.content,Pe=de.uniforms,We=Sp(K),je=We.content,tt=We.uniforms;this.rawContentCache[g]={fs:je,uniforms:wh(wh(wh({},Pe),tt),re),vs:we}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(g){var y=this;if(this.moduleCache[g])return this.moduleCache[g];var E=this.rawContentCache[g].vs||"",D=this.rawContentCache[g].fs||"",G=this.processModule(E,[],"vs"),K=G.content,re=G.includeList,de=this.processModule(D,[],"fs"),we=de.content,Pe=de.includeList,We=we,je=rm(re.concat(Pe).concat(g)).reduce(function(tt,Qe){return wh(wh({},tt),y.rawContentCache[Qe].uniforms)},{});return Ea.test(we)||(We=om+we),this.moduleCache[g]={fs:We.trim(),uniforms:je,vs:K.trim()},this.moduleCache[g]}},{key:"processModule",value:function(g,y,E){var D=this,G=g.replace(Tp,function(K,re){var de=re.split(" "),we=de[0].replace(/"/g,"");if(y.indexOf(we)>-1)return"";var Pe=D.rawContentCache[we][E];y.push(we);var We=D.processModule(Pe||"",y,E),je=We.content;return je});return{content:G,includeList:y}}}]),i}(),Ol))||ng),Tl=new Si.W2,Mp=(0,bp.Z)(Tl,!1),xy=function(c){var g=Mp.lazyInject(c);return function(y,E,D){g.call(this,y,E),D&&(D.initializer=function(){return y[E]})}},Sy=function(c){var g=Mp.lazyMultiInject(c);return function(y,E,D){g.call(this,y,E),D&&(D.initializer=function(){return y[E]})}};Tl.bind(Kr.ShaderModuleService).to(Sd).inSingletonScope(),Tl.bind(Kr.NameComponentManager).toConstantValue(new dl(xp)),Tl.bind(Kr.HierarchyComponentManager).toConstantValue(new dl(Wv)),Tl.bind(Kr.TransformComponentManager).toConstantValue(new dl(Cl)),Tl.bind(Kr.MeshComponentManager).toConstantValue(new dl(hd)),Tl.bind(Kr.CullableComponentManager).toConstantValue(new dl(gh)),Tl.bind(Kr.GeometryComponentManager).toConstantValue(new dl(ud)),Tl.bind(Kr.MaterialComponentManager).toConstantValue(new dl($f));function sm(){var i=new Si.W2;return i.parent=Tl,i.bind(Kr.Systems).to(vp).inSingletonScope().whenTargetNamed(Kr.SceneGraphSystem),i.bind(Kr.Systems).to(pc).inSingletonScope().whenTargetNamed(Kr.FrameGraphSystem),i.bind(Kr.Systems).to(Oo).inSingletonScope().whenTargetNamed(Kr.MeshSystem),i.bind(Kr.Systems).to($l).inSingletonScope().whenTargetNamed(Kr.GeometrySystem),i.bind(Kr.Systems).to(hh).inSingletonScope().whenTargetNamed(Kr.MaterialSystem),i.bind(Kr.Systems).to(zv).inSingletonScope().whenTargetNamed(Kr.RendererSystem),i.bind(Kr.ResourcePool).to(Jv).inSingletonScope(),i.bind(Kr.ConfigService).to(em).inSingletonScope(),i.bind(Kr.InteractorService).to(bh).inSingletonScope(),i.bind(Kr.RenderPass).to(vh).inSingletonScope().whenTargetNamed(vh.IDENTIFIER),i.bind(Kr.RenderPass).to(kh).inSingletonScope().whenTargetNamed(kh.IDENTIFIER),i.bind(Kr.RenderPass).to(pd).inSingletonScope().whenTargetNamed(pd.IDENTIFIER),i.bind(Kr.RenderPassFactory).toFactory(function(c){return function(g){return c.container.getNamed(Kr.RenderPass,g)}}),i}function rg(i){for(var c=new Xl,g=yn.al(i[0],i[1],i[2]),y=yn.al(i[0],i[1],i[2]),E=3;E<i.length;){var D=i[E++],G=i[E++],K=i[E++];D<g[0]&&(g[0]=D),G<g[1]&&(g[1]=G),K<g[2]&&(g[2]=K),D>y[0]&&(y[0]=D),G>y[1]&&(y[1]=G),K>y[2]&&(y[2]=K)}return c.setMinMax(g,y),c}var wc=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Cy=yn.Ue(),Oy=null,Ty=yn.Ue(),My=yn.Ue(),Py=yn.Ue(),Ay=yn.Ue(),Pp=yn.Ue(),_y=null,Ap=V(59518),Dy=V(26199),Ny=V(14156),Iy=V(71468),Fu=V(48871),Rc=V(9871),_p;(function(i){i.Normal="normal",i.PostProcessing="post-processing"})(_p||(_p={}));var Ry=V(25612),Ly=V(92777),am=V(20159),By=V(6727),ky=V(20499),Gy=V(64851),yf;(function(i){i.Void="Void",i.Boolean="Boolean",i.Float="Float",i.Uint32="Uint32",i.Int32="Int32",i.Vector="Vector",i.Vector2Float="vec2<f32>",i.Vector3Float="vec3<f32>",i.Vector4Float="vec4<f32>",i.Vector2Boolean="vec2<bool>",i.Vector3Boolean="vec3<bool>",i.Vector4Boolean="vec4<bool>",i.Vector2Uint="vec2<u32>",i.Vector3Uint="vec3<u32>",i.Vector4Uint="vec4<u32>",i.Vector2Int="vec2<i32>",i.Vector3Int="vec3<i32>",i.Vector4Int="vec4<i32>",i.Matrix="Matrix",i.Matrix3x3Float="mat3x3<f32>",i.Matrix4x4Float="mat4x4<i32>",i.Struct="Struct",i.FloatArray="Float[]",i.Vector4FloatArray="vec4<f32>[]"})(yf||(yf={}));var Dp;(function(i){i.Program="Program",i.Identifier="Identifier",i.VariableDeclaration="VariableDeclaration",i.BlockStatement="BlockStatement",i.ReturnStatement="ReturnStatement",i.FunctionDeclaration="FunctionDeclaration",i.VariableDeclarator="VariableDeclarator",i.AssignmentExpression="AssignmentExpression",i.LogicalExpression="LogicalExpression",i.BinaryExpression="BinaryExpression",i.ArrayExpression="ArrayExpression",i.UnaryExpression="UnaryExpression",i.UpdateExpression="UpdateExpression",i.FunctionExpression="FunctionExpression",i.MemberExpression="MemberExpression",i.ConditionalExpression="ConditionalExpression",i.ExpressionStatement="ExpressionStatement",i.CallExpression="CallExpression",i.NumThreadStatement="NumThreadStatement",i.StorageStatement="StorageStatement",i.DoWhileStatement="DoWhileStatement",i.WhileStatement="WhileStatement",i.ForStatement="ForStatement",i.BreakStatement="BreakStatement",i.ContinueStatement="ContinueStatement",i.IfStatement="IfStatement",i.ImportedFunctionStatement="ImportedFunctionStatement"})(Dp||(Dp={}));var bf;(function(i){i.Input="Input",i.Output="Output",i.Uniform="Uniform",i.Workgroup="Workgroup",i.UniformConstant="UniformConstant",i.Image="Image",i.StorageBuffer="StorageBuffer",i.Private="Private",i.Function="Function"})(bf||(bf={}));var Uh;(function(i){i.GLSL100="GLSL100",i.GLSL450="GLSL450",i.WGSL="WGSL"})(Uh||(Uh={}));var Np="__DefineValuePlaceholder__";function Cd(i){return typeof i=="number"}function Ml(i){return i===void 0?0:i>360||i<-360?i%360:i}function Qf(i,c,g){return Cd(i)?yn.al(i,c,g):i.length===3?yn.d9(i):yn.al(i[0],i[1],i[2])}var Ip=function(){function i(c,g){(0,So.Z)(this,i),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=c,this.matrix=ji(g.matrix),this.right=yn.d9(g.right),this.up=yn.d9(g.up),this.forward=yn.d9(g.forward),this.position=yn.d9(g.position),this.focalPoint=yn.d9(g.focalPoint),this.distanceVector=yn.d9(g.distanceVector),this.azimuth=g.azimuth,this.elevation=g.elevation,this.roll=g.roll,this.relAzimuth=g.relAzimuth,this.relElevation=g.relElevation,this.relRoll=g.relRoll,this.dollyingStep=g.dollyingStep,this.distance=g.distance}return(0,No.Z)(i,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(g){g.matrix=pi(g.matrix,this.matrix),g.right=yn.JG(g.right,this.right),g.up=yn.JG(g.up,this.up),g.forward=yn.JG(g.forward,this.forward),g.position=yn.JG(g.position,this.position),g.focalPoint=yn.JG(g.focalPoint,this.focalPoint),g.distanceVector=yn.JG(g.distanceVector,this.distanceVector),g.azimuth=this.azimuth,g.elevation=this.elevation,g.roll=this.roll,g.relAzimuth=this.relAzimuth,g.relElevation=this.relElevation,g.relRoll=this.relRoll,g.dollyingStep=this.dollyingStep,g.distance=this.distance}}]),i}(),Rp,qf,ig,Od,Lp,Bp,kp,pa;(function(i){i.ORBITING="ORBITING",i.EXPLORING="EXPLORING",i.TRACKING="TRACKING"})(pa||(pa={}));var Eh;(function(i){i.DEFAULT="DEFAULT",i.ROTATIONAL="ROTATIONAL",i.TRANSLATIONAL="TRANSLATIONAL",i.CINEMATIC="CINEMATIC"})(Eh||(Eh={}));var eh;(function(i){i.ORTHOGRAPHIC="ORTHOGRAPHIC",i.PERSPECTIVE="PERSPECTIVE"})(eh||(eh={}));var Pl=Math.PI/180,Jl=180/Math.PI,og=(Rp=(0,Si.b2)(),qf=(0,Si.f3)(Kr.InteractorService),Rp(ig=(Od=(kp=Bp=function(){function i(){(0,So.Z)(this,i),this.matrix=Po(),this.right=yn.al(1,0,0),this.up=yn.al(0,1,0),this.forward=yn.al(0,0,1),this.position=yn.al(0,0,1),this.focalPoint=yn.al(0,0,0),this.distanceVector=yn.al(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,ho(this,"interactor",Lp,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Po(),this.view=void 0,this.following=void 0,this.type=pa.EXPLORING,this.trackingMode=Eh.DEFAULT,this.projectionMode=eh.PERSPECTIVE,this.frustum=new Vt,this.landmarks=[],this.landmarkAnimationID=void 0}return(0,No.Z)(i,[{key:"clone",value:function(){var g=new i;return g.setType(this.type,void 0),g.interactor=this.interactor,g}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(g,y){return this.type=g,this.type===pa.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===pa.TRACKING&&y!==void 0&&this.setTrackingMode(y),this}},{key:"setProjectionMode",value:function(g){return this.projectionMode=g,this}},{key:"setTrackingMode",value:function(g){if(this.type!==pa.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=g,this}},{key:"setWorldRotation",value:function(g){this.rotateWorld=g,this._getAngles()}},{key:"getViewTransform",value:function(){return as(Po(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(g){return this.matrix=g,this._update(),this}},{key:"setAspect",value:function(g){return this.setPerspective(this.near,this.far,this.fov,g),this}},{key:"setViewOffset",value:function(g,y,E,D,G,K){return this.aspect=g/y,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=g,this.view.fullHeight=y,this.view.offsetX=E,this.view.offsetY=D,this.view.width=G,this.view.height=K,this.projectionMode===eh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===eh.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(g,y,E,D){return this.projectionMode=eh.PERSPECTIVE,this.fov=E,this.near=g,this.far=y,this.aspect=D,Qi(this.perspective,this.fov*Pl,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(g,y,E,D,G,K){this.projectionMode=eh.ORTHOGRAPHIC,this.rright=y,this.left=g,this.top=E,this.bottom=D,this.near=G,this.far=K;var re=(this.rright-this.left)/(2*this.zoom),de=(this.top-this.bottom)/(2*this.zoom),we=(this.rright+this.left)/2,Pe=(this.top+this.bottom)/2,We=we-re,je=we+re,tt=Pe+de,Qe=Pe-de;if(this.view!==void 0&&this.view.enabled){var Je=(this.rright-this.left)/this.view.fullWidth/this.zoom,yt=(this.top-this.bottom)/this.view.fullHeight/this.zoom;We+=Je*this.view.offsetX,je=We+Je*this.view.width,tt-=yt*this.view.offsetY,Qe=tt-yt*this.view.height}return Kt(this.perspective,We,je,tt,Qe,G,K),this}},{key:"setPosition",value:function(g,y,E){return this._setPosition(g,y,E),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(g,y,E){var D=yn.al(0,1,0);if(this.focalPoint=Qf(g,y,E),this.trackingMode===Eh.CINEMATIC){var G=yn.$X(yn.Ue(),this.focalPoint,this.position);g=G[0],y=G[1],E=G[2];var K=yn.kE(G),re=Math.asin(y/K)*Jl,de=90+Math.atan2(E,g)*Jl,we=Po();wa(we,we,de*Pl),nu(we,we,re*Pl),D=yn.fF(yn.Ue(),[0,1,0],we)}return as(this.matrix,lr(Po(),this.position,this.focalPoint,D)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(g){if(!(this.distance===g||g<0)){this.distance=g,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var y=yn.Ue();g=this.distance;var E=this.forward,D=this.focalPoint;return y[0]=g*E[0]+D[0],y[1]=g*E[1]+D[1],y[2]=g*E[2]+D[2],this._setPosition(y),this}}},{key:"setMaxDistance",value:function(g){return this.maxDistance=g,this}},{key:"setMinDistance",value:function(g){return this.minDistance=g,this}},{key:"changeAzimuth",value:function(g){return this.setAzimuth(this.azimuth+g),this}},{key:"changeElevation",value:function(g){return this.setElevation(this.elevation+g),this}},{key:"changeRoll",value:function(g){return this.setRoll(this.roll+g),this}},{key:"setAzimuth",value:function(g){return this.azimuth=Ml(g),this.computeMatrix(),this._getAxes(),this.type===pa.ORBITING||this.type===pa.EXPLORING?this._getPosition():this.type===pa.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(g){return this.elevation=Ml(g),this.computeMatrix(),this._getAxes(),this.type===pa.ORBITING||this.type===pa.EXPLORING?this._getPosition():this.type===pa.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(g){return this.roll=Ml(g),this.computeMatrix(),this._getAxes(),this.type===pa.ORBITING||this.type===pa.EXPLORING?this._getPosition():this.type===pa.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(g,y,E){if(this.type===pa.EXPLORING){g=Ml(g),y=Ml(y),E=Ml(E);var D=Kl(Su(),[1,0,0],(this.rotateWorld?1:-1)*y*Pl),G=Kl(Su(),[0,1,0],(this.rotateWorld?1:-1)*g*Pl),K=Kl(Su(),[0,0,1],E*Pl),re=Xc(Su(),G,D);re=Xc(Su(),re,K);var de=rn(Po(),re);Ca(this.matrix,this.matrix,[0,0,-this.distance]),gs(this.matrix,this.matrix,de),Ca(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+y)>90)return;this.relElevation=Ml(y),this.relAzimuth=Ml(g),this.relRoll=Ml(E),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===pa.ORBITING||this.type===pa.EXPLORING?this._getPosition():this.type===pa.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(g,y){var E=Qf(g,y,0),D=yn.d9(this.position);return yn.IH(D,D,yn.bA(yn.Ue(),this.right,E[0])),yn.IH(D,D,yn.bA(yn.Ue(),this.up,E[1])),this._setPosition(D),this}},{key:"dolly",value:function(g){var y=this.forward,E=yn.d9(this.position),D=g*this.dollyingStep,G=this.distance+g*this.dollyingStep;return D=Math.max(Math.min(G,this.maxDistance),this.minDistance)-this.distance,E[0]+=D*y[0],E[1]+=D*y[1],E[2]+=D*y[2],this._setPosition(E),this.type===pa.ORBITING||this.type===pa.EXPLORING?this._getDistance():this.type===pa.TRACKING&&yn.IH(this.focalPoint,E,this.distanceVector),this}},{key:"createLandmark",value:function(g,y){var E=this.clone();E.setPosition(y.position),E.setFocalPoint(y.focalPoint),y.roll!==void 0&&E.setRoll(y.roll);var D=new Ip(g,E);return this.landmarks.push(D),D}},{key:"setLandmark",value:function(g){var y=new Ip(g,this);return this.landmarks.push(y),this}},{key:"gotoLandmark",value:function(g){var y=this,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,D=this.landmarks.find(function(Pe){return Pe.name===g});if(D){if(E===0){D.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var G=D.getPosition(),K=D.getFocalPoint(),re=D.getRoll(),de,we=function Pe(We){de===void 0&&(de=We);var je=We-de,tt=(1-Math.cos(je/E*Math.PI))/2,Qe=yn.Ue(),Je=yn.Ue(),yt=0;yn.t7(Qe,y.focalPoint,K,tt),yn.t7(Je,y.position,G,tt),yt=y.roll*(1-tt)+re*tt,y.setFocalPoint(Qe),y.setPosition(Je),y.setRoll(yt),y.computeMatrix();var Nt=yn.TK(Qe,K)+yn.TK(Je,G);if(!(Nt>.01)){y.setFocalPoint(Qe),y.setPosition(Je),y.setRoll(yt),y.computeMatrix(),y.interactor.connect();return}je<E&&(y.landmarkAnimationID=window.requestAnimationFrame(Pe))};window.requestAnimationFrame(we)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var g,y,E=Kl(Su(),[0,0,1],this.roll*Pl);ms(this.matrix),g=Kl(Su(),[1,0,0],(this.rotateWorld&&this.type!==pa.TRACKING||this.type===pa.TRACKING?1:-1)*this.elevation*Pl),y=Kl(Su(),[0,1,0],(this.rotateWorld&&this.type!==pa.TRACKING||this.type===pa.TRACKING?1:-1)*this.azimuth*Pl);var D=Xc(Su(),y,g);D=Xc(Su(),D,E);var G=rn(Po(),D);this.type===pa.ORBITING||this.type===pa.EXPLORING?(Ca(this.matrix,this.matrix,this.focalPoint),gs(this.matrix,this.matrix,G),Ca(this.matrix,this.matrix,[0,0,this.distance])):this.type===pa.TRACKING&&(Ca(this.matrix,this.matrix,this.position),gs(this.matrix,this.matrix,G))}},{key:"_setPosition",value:function(g,y,E){this.position=Qf(g,y,E);var D=this.matrix;D[12]=this.position[0],D[13]=this.position[1],D[14]=this.position[2],D[15]=1}},{key:"_getAxes",value:function(){yn.JG(this.right,Qf(ne(nc(),[1,0,0,0],this.matrix))),yn.JG(this.up,Qf(ne(nc(),[0,1,0,0],this.matrix))),yn.JG(this.forward,Qf(ne(nc(),[0,0,1,0],this.matrix))),yn.Fv(this.right,this.right),yn.Fv(this.up,this.up),yn.Fv(this.forward,this.forward)}},{key:"_getAngles",value:function(){var g=this.distanceVector[0],y=this.distanceVector[1],E=this.distanceVector[2],D=yn.kE(this.distanceVector);if(D===0){this.elevation=0,this.azimuth=0;return}this.type===pa.TRACKING?(this.elevation=Math.asin(y/D)*Jl,this.azimuth=Math.atan2(-g,-E)*Jl):this.rotateWorld?(this.elevation=Math.asin(y/D)*Jl,this.azimuth=Math.atan2(-g,-E)*Jl):(this.elevation=-Math.asin(y/D)*Jl,this.azimuth=-Math.atan2(-g,-E)*Jl)}},{key:"_getPosition",value:function(){yn.JG(this.position,Qf(ne(nc(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){yn.kK(this.distanceVector,[0,0,-this.distance],ri.xO(ri.Ue(),this.matrix)),yn.IH(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=yn.$X(yn.Ue(),this.focalPoint,this.position),this.distance=yn.kE(this.distanceVector),this.dollyingStep=this.distance/100}}]),i}(),Bp.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},kp),Lp=Bo(Od.prototype,"interactor",[qf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Od))||ig),Gp,sg,Fp,Td,ag,Vh,jp,wf=(Gp=(0,Si.b2)(),sg=(0,Si.f3)(Kr.GeometryComponentManager),Gp(Fp=(Td=(jp=Vh=function(){function i(){(0,So.Z)(this,i),this.config=void 0,ho(this,"geometry",ag,this),this.entity=void 0,this.component=void 0}return(0,No.Z)(i,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(g){this.config=g}},{key:"setEntity",value:function(g){this.entity=g,this.component=this.geometry.create(g),this.component.entity=g,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),i}(),Vh.BOX="box",Vh.SPHERE="sphere",Vh.PLANE="plane",Vh.MERGED="merged",jp),ag=Bo(Td.prototype,"geometry",[sg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Td))||Fp),Md=V(48404);function ug(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var xh={}.toString,um=function(c,g){return xh.call(c)==="[object "+g+"]"},zp=um,cm=function(i){return Array.isArray?Array.isArray(i):zp(i,"Array")},Up=9007199254740991,Vp="[object Arguments]",Wp="[object Array]",$p="[object Boolean]",lm="[object Date]",fm="[object Error]",hm="[object Function]",cg="[object Map]",Hp="[object Number]",Xp="[object Object]",dm="[object RegExp]",gm="[object Set]",pm="[object String]",lg="[object WeakMap]",vm="[object ArrayBuffer]",mm="[object DataView]",ym="[object Float32Array]",ju="[object Float64Array]",fg="[object Int8Array]",bm="[object Int16Array]",wm="[object Int32Array]",Em="[object Uint8Array]",xm="[object Uint8ClampedArray]",hg="[object Uint16Array]",Sm="[object Uint32Array]",Na={};Na[ym]=Na[ju]=Na[fg]=Na[bm]=Na[wm]=Na[Em]=Na[xm]=Na[hg]=Na[Sm]=!0,Na[Vp]=Na[Wp]=Na[vm]=Na[$p]=Na[mm]=Na[lm]=Na[fm]=Na[hm]=Na[cg]=Na[Hp]=Na[Xp]=Na[dm]=Na[gm]=Na[pm]=Na[lg]=!1;function Fy(i){return function(c){return i(c)}}var Cm=Object.prototype,Om=Cm.toString;function Tm(i){return Zp(i)&&Yp(i.length)&&!!Na[Om.call(i)]}function Yp(i){return typeof i=="number"&&i>-1&&i%1===0&&i<=Up}function Zp(i){return!!i&&(0,ao.Z)(i)==="object"}var Kp=Tm,Jp,Wh,Pd,Qp,Ad,qp,ev,tv;function _d(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function Dd(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?_d(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):_d(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}var nv=(Jp=(0,Si.b2)(),Wh=(0,Si.f3)(Kr.RenderEngine),Pd=(0,Si.f3)(Kr.ConfigService),Jp(Qp=(Ad=(tv=function(){function i(){(0,So.Z)(this,i),ho(this,"engine",qp,this),ho(this,"configService",ev,this),this.entity=tu(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,No.Z)(i,[{key:"init",value:function(){var g=this.configService.get(),y=g.canvas,E=g.engineOptions;this.initPromise=this.engine.init(Dd({canvas:y||ug(),swapChainFormat:Md.EV.BGRA8Unorm,antialiasing:!1},E))}},{key:"setBundle",value:function(g){this.compiledBundle=JSON.parse(JSON.stringify(g))}},{key:"setDispatch",value:function(g){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=g),this}},{key:"setMaxIteration",value:function(g){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=g),this}},{key:"setBinding",value:function(g,y){var E=this;if(typeof g=="string"){var D=Cd(y)||Kp(y)||cm(y);if(this.compiledBundle&&this.compiledBundle.context){var G=this.compiledBundle.context.defines.find(function(re){return re.name===g});if(G)return G.value=y,this;var K=this.compiledBundle.context.uniforms.find(function(re){return re.name===g});K&&(D?(K.data=y,K.isReferer=!1,K.storageClass===bf.Uniform?this.model&&this.model.updateUniform(g,y):this.model&&this.model.updateBuffer(g,y)):(K.isReferer=!0,K.data=y))}}else Object.keys(g).forEach(function(re){E.setBinding(re,g[re])});return this}},{key:"execute",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E=this,D,G,K=arguments;return oo().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(D=K.length>0&&K[0]!==void 0?K[0]:1,!this.dirty){de.next=6;break}return this.compiledBundle.context&&(D>1?this.compiledBundle.context.maxIteration=D:this.compiledBundle.context.maxIteration++),de.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(we){var Pe=we.isReferer;return Pe}).forEach(function(we){var Pe=we.data,We=we.name;E.model.confirmInput(Pe.model,We)}),G=0;G<D;G++)this.model.run();return this.engine.endFrame(),de.abrupt("return",this);case 12:case"end":return de.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"getOutput",value:function(){var c=(0,Os.Z)(oo().mark(function y(){return oo().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",this.model.readData());case 1:case"end":return D.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"compile",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E,D,G;return oo().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,this.initPromise;case 2:return E=Dd({},this.compiledBundle.context),D=this.engine.supportWebGPU?this.engine.useWGSL?Uh.WGSL:Uh.GLSL450:Uh.GLSL100,G=this.compiledBundle.shaders[D],E.defines.filter(function(de){return de.runtime}).forEach(function(de){var we="".concat(Np).concat(de.name);G=G.replace(we,"".concat(de.value))}),E.shader=G,E.uniforms.forEach(function(de){if(!de.data&&de.storageClass===bf.StorageBuffer){var we=1;de.type===yf.FloatArray?we=1:de.type===yf.Vector4FloatArray&&(we=4),de.data=new Float32Array(E.output.length*we).fill(0)}}),this.compiledBundle.context=E,re.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=re.sent;case 12:case"end":return re.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()}]),i}(),tv),qp=Bo(Ad.prototype,"engine",[Wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ev=Bo(Ad.prototype,"configService",[Pd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ad))||Qp),dg,gg,pg,vg,mg,yg,rv,iv=(dg=(0,Si.b2)(),gg=(0,Si.f3)(Kr.MaterialComponentManager),dg(pg=(vg=(rv=yg=function(){function i(){(0,So.Z)(this,i),this.config=void 0,ho(this,"material",mg,this),this.entity=void 0,this.component=void 0}return(0,No.Z)(i,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(g){this.config=g}},{key:"setEntity",value:function(g,y){this.entity=g,this.component=this.material.create(g),this.component.entity=g,this.component.type=y,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),i}(),yg.BASIC="basic",rv),mg=Bo(vg.prototype,"material",[gg],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vg))||pg),ov,sv,av,uv,cv,C,R,be,Ve,St,Zt,Sn,kn,ur,ni=(ov=(0,Si.b2)(),sv=(0,Si.f3)(Kr.MeshComponentManager),av=(0,Si.f3)(Kr.CullableComponentManager),uv=(0,Si.f3)(Kr.TransformComponentManager),cv=(0,Si.f3)(Kr.Systems),C=(0,Si.t6)(Kr.SceneGraphSystem),ov(R=(be=(ur=kn=function(){function i(){(0,So.Z)(this,i),this.attributes={},this.config=void 0,ho(this,"mesh",Ve,this),ho(this,"cullable",St,this),ho(this,"transform",Zt,this),ho(this,"sceneGraphSystem",Sn,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return(0,No.Z)(i,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(g){this.config=g}},{key:"setEntity",value:function(g){this.entity=g,this.cullable.create(g),this.meshComponent=this.mesh.create(g),this.transformComponent=this.transform.create(g),this.onEntityCreated()}},{key:"setMaterial",value:function(g){return this.meshComponent.material=g,this}},{key:"setGeometry",value:function(g){return this.meshComponent.geometry=g,this}},{key:"setAttributes",value:function(g){var y=this;Object.keys(g).forEach(function(E){g[E]!==void 0&&g[E]!==y.attributes[E]&&(y.onAttributeChanged({name:E,data:g[E]}),y.attributes[E]=g[E])})}},{key:"setVisible",value:function(g){var y=this;return this.meshComponent.visible=g,this.meshComponent.children.forEach(function(E){var D=y.mesh.getComponentByEntity(E);D&&(D.visible=g)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(g){return this.sceneGraphSystem.attach(this.entity,g.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(g){var y=g.name,E=g.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(y),E)}},{key:"convertAttributeName2UniformName",value:function(g){return g}}]),i}(),kn.POINT="point",kn.LINE="line",kn.GRID="grid",ur),Ve=Bo(be.prototype,"mesh",[sv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=Bo(be.prototype,"cullable",[av],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zt=Bo(be.prototype,"transform",[uv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sn=Bo(be.prototype,"sceneGraphSystem",[cv,C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be))||R),ui=V(81550),Ni=V.n(ui),go=function(){function i(c,g){(0,So.Z)(this,i),this.attribute=void 0,this.buffer=void 0;var y=g.buffer,E=g.offset,D=g.stride,G=g.normalized,K=g.size,re=g.divisor;this.buffer=y,this.attribute={buffer:y.get(),offset:E||0,stride:D||0,normalized:G||!1,divisor:re||0},K&&(this.attribute.size=K)}return(0,No.Z)(i,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(g){this.buffer.subData(g)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),i}(),Io,Jo,ys,Wo,Es,Is,zu,Iu,fu,Ia,Ra,Ru,ul,bg,Q0=(Io={},(0,_r.Z)(Io,Vn.POINTS,"points"),(0,_r.Z)(Io,Vn.LINES,"lines"),(0,_r.Z)(Io,Vn.LINE_LOOP,"line loop"),(0,_r.Z)(Io,Vn.LINE_STRIP,"line strip"),(0,_r.Z)(Io,Vn.TRIANGLES,"triangles"),(0,_r.Z)(Io,Vn.TRIANGLE_FAN,"triangle fan"),(0,_r.Z)(Io,Vn.TRIANGLE_STRIP,"triangle strip"),Io),jy=(Jo={},(0,_r.Z)(Jo,Vn.STATIC_DRAW,"static"),(0,_r.Z)(Jo,Vn.DYNAMIC_DRAW,"dynamic"),(0,_r.Z)(Jo,Vn.STREAM_DRAW,"stream"),Jo),Mm=(ys={},(0,_r.Z)(ys,Vn.BYTE,"int8"),(0,_r.Z)(ys,Vn.UNSIGNED_INT,"int16"),(0,_r.Z)(ys,Vn.INT,"int32"),(0,_r.Z)(ys,Vn.UNSIGNED_BYTE,"uint8"),(0,_r.Z)(ys,Vn.UNSIGNED_SHORT,"uint16"),(0,_r.Z)(ys,Vn.UNSIGNED_INT,"uint32"),(0,_r.Z)(ys,Vn.FLOAT,"float"),ys),q0=(Wo={},(0,_r.Z)(Wo,Vn.ALPHA,"alpha"),(0,_r.Z)(Wo,Vn.LUMINANCE,"luminance"),(0,_r.Z)(Wo,Vn.LUMINANCE_ALPHA,"luminance alpha"),(0,_r.Z)(Wo,Vn.RGB,"rgb"),(0,_r.Z)(Wo,Vn.RGBA,"rgba"),(0,_r.Z)(Wo,Vn.RGBA4,"rgba4"),(0,_r.Z)(Wo,Vn.RGB5_A1,"rgb5 a1"),(0,_r.Z)(Wo,Vn.RGB565,"rgb565"),(0,_r.Z)(Wo,Vn.DEPTH_COMPONENT,"depth"),(0,_r.Z)(Wo,Vn.DEPTH_STENCIL,"depth stencil"),Wo),eb=(Es={},(0,_r.Z)(Es,Vn.DONT_CARE,"dont care"),(0,_r.Z)(Es,Vn.NICEST,"nice"),(0,_r.Z)(Es,Vn.FASTEST,"fast"),Es),zy=(Is={},(0,_r.Z)(Is,Vn.NEAREST,"nearest"),(0,_r.Z)(Is,Vn.LINEAR,"linear"),(0,_r.Z)(Is,Vn.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,_r.Z)(Is,Vn.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,_r.Z)(Is,Vn.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,_r.Z)(Is,Vn.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Is),Uy=(zu={},(0,_r.Z)(zu,Vn.REPEAT,"repeat"),(0,_r.Z)(zu,Vn.CLAMP_TO_EDGE,"clamp"),(0,_r.Z)(zu,Vn.MIRRORED_REPEAT,"mirror"),zu),tb=(Iu={},(0,_r.Z)(Iu,Vn.NONE,"none"),(0,_r.Z)(Iu,Vn.BROWSER_DEFAULT_WEBGL,"browser"),Iu),Sh=(fu={},(0,_r.Z)(fu,Vn.NEVER,"never"),(0,_r.Z)(fu,Vn.ALWAYS,"always"),(0,_r.Z)(fu,Vn.LESS,"less"),(0,_r.Z)(fu,Vn.LEQUAL,"lequal"),(0,_r.Z)(fu,Vn.GREATER,"greater"),(0,_r.Z)(fu,Vn.GEQUAL,"gequal"),(0,_r.Z)(fu,Vn.EQUAL,"equal"),(0,_r.Z)(fu,Vn.NOTEQUAL,"notequal"),fu),Vy=(Ia={},(0,_r.Z)(Ia,Vn.FUNC_ADD,"add"),(0,_r.Z)(Ia,Vn.MIN_EXT,"min"),(0,_r.Z)(Ia,Vn.MAX_EXT,"max"),(0,_r.Z)(Ia,Vn.FUNC_SUBTRACT,"subtract"),(0,_r.Z)(Ia,Vn.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ia),lv=(Ra={},(0,_r.Z)(Ra,Vn.ZERO,"zero"),(0,_r.Z)(Ra,Vn.ONE,"one"),(0,_r.Z)(Ra,Vn.SRC_COLOR,"src color"),(0,_r.Z)(Ra,Vn.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,_r.Z)(Ra,Vn.SRC_ALPHA,"src alpha"),(0,_r.Z)(Ra,Vn.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,_r.Z)(Ra,Vn.DST_COLOR,"dst color"),(0,_r.Z)(Ra,Vn.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,_r.Z)(Ra,Vn.DST_ALPHA,"dst alpha"),(0,_r.Z)(Ra,Vn.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,_r.Z)(Ra,Vn.CONSTANT_COLOR,"constant color"),(0,_r.Z)(Ra,Vn.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,_r.Z)(Ra,Vn.CONSTANT_ALPHA,"constant alpha"),(0,_r.Z)(Ra,Vn.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,_r.Z)(Ra,Vn.SRC_ALPHA_SATURATE,"src alpha saturate"),Ra),Wy=(Ru={},(0,_r.Z)(Ru,Vn.NEVER,"never"),(0,_r.Z)(Ru,Vn.ALWAYS,"always"),(0,_r.Z)(Ru,Vn.LESS,"less"),(0,_r.Z)(Ru,Vn.LEQUAL,"lequal"),(0,_r.Z)(Ru,Vn.GREATER,"greater"),(0,_r.Z)(Ru,Vn.GEQUAL,"gequal"),(0,_r.Z)(Ru,Vn.EQUAL,"equal"),(0,_r.Z)(Ru,Vn.NOTEQUAL,"notequal"),Ru),Nd=(ul={},(0,_r.Z)(ul,Vn.ZERO,"zero"),(0,_r.Z)(ul,Vn.KEEP,"keep"),(0,_r.Z)(ul,Vn.REPLACE,"replace"),(0,_r.Z)(ul,Vn.INVERT,"invert"),(0,_r.Z)(ul,Vn.INCR,"increment"),(0,_r.Z)(ul,Vn.DECR,"decrement"),(0,_r.Z)(ul,Vn.INCR_WRAP,"increment wrap"),(0,_r.Z)(ul,Vn.DECR_WRAP,"decrement wrap"),ul),nb=(bg={},(0,_r.Z)(bg,Vn.FRONT,"front"),(0,_r.Z)(bg,Vn.BACK,"back"),bg),rb=function(){function i(c,g){(0,So.Z)(this,i),this.buffer=void 0;var y=g.data,E=g.usage,D=g.type;this.buffer=c.buffer({data:y,usage:jy[E||Vn.STATIC_DRAW],type:Mm[D||Vn.UNSIGNED_BYTE]})}return(0,No.Z)(i,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(g){var y=g.data,E=g.offset;this.buffer.subdata(y,E)}}]),i}(),vu=V(74902),$y=9007199254740991,Hy="[object Arguments]",Xy="[object Array]",Yy="[object Boolean]",Zy="[object Date]",Ky="[object Error]",Jy="[object Function]",Qy="[object Map]",qy="[object Number]",e0="[object Object]",t0="[object RegExp]",n0="[object Set]",r0="[object String]",i0="[object WeakMap]",o0="[object ArrayBuffer]",$h="[object DataView]",Pm="[object Float32Array]",Am="[object Float64Array]",Id="[object Int8Array]",Hh="[object Int16Array]",wg="[object Int32Array]",Eg="[object Uint8Array]",xg="[object Uint8ClampedArray]",_m="[object Uint16Array]",s0="[object Uint32Array]",Qa={};Qa[Pm]=Qa[Am]=Qa[Id]=Qa[Hh]=Qa[wg]=Qa[Eg]=Qa[xg]=Qa[_m]=Qa[s0]=!0,Qa[Hy]=Qa[Xy]=Qa[o0]=Qa[Yy]=Qa[$h]=Qa[Zy]=Qa[Ky]=Qa[Jy]=Qa[Qy]=Qa[qy]=Qa[e0]=Qa[t0]=Qa[n0]=Qa[r0]=Qa[i0]=!1;function Ob(i){return function(c){return i(c)}}var Sg=Object.prototype,Ef=Sg.toString;function Dm(i){return a0(i)&&ib(i.length)&&!!Qa[Ef.call(i)]}function ib(i){return typeof i=="number"&&i>-1&&i%1===0&&i<=$y}function a0(i){return!!i&&(0,ao.Z)(i)==="object"}var Ch=Dm;function Cg(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function Nm(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Cg(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Cg(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}var u0=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Im=0,Og=!1,c0=function(){function i(c,g){var y=this;(0,So.Z)(this,i),this.reGl=c,this.context=g,this.entity=tu(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var E={};this.context.uniforms.forEach(function(de){var we=de.name,Pe=de.type,We=de.data,je=de.isReferer,tt=de.storageClass;if(tt===bf.StorageBuffer){if(je)y.textureCache[we]={data:void 0},E["".concat(we,"Size")]=function(){return We.compiledBundle.context.output.textureSize};else{y.textureCache[we]=y.calcDataTexture(we,Pe,We);var Qe=y.textureCache[we],Je=Qe.textureWidth,yt=Qe.isOutput;E["".concat(we,"Size")]=[Je,Je],yt&&(y.outputTextureName=we,y.context.needPingpong&&(y.outputTextureName="".concat(we,"Output"),y.textureCache[y.outputTextureName]=y.calcDataTexture(we,Pe,We)))}E[we]=function(){return Og&&console.log("[".concat(y.entity,"]: ").concat(we," ").concat(y.textureCache[we].id)),y.textureCache[we].texture}}else if(tt===bf.Uniform){if(We&&(Array.isArray(We)||Ch(We))&&We.length>16)throw new Error("invalid data type ".concat(Pe));E[we]=function(){return de.data}}});var D=this.getOuputDataTexture(),G=D.textureWidth,K=D.texelCount;E.u_OutputTextureSize=[G,G],E.u_OutputTexelCount=K,this.context.output.textureSize=[G,G];var re={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:E,vert:u0,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(re)}return(0,No.Z)(i,[{key:"run",value:function(){var g=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){g.computeCommand()}),Og&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E=this,D,G,K,re,de,we,Pe,We;return oo().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){D=E.reGl.read()}),!D){tt.next=6;break}if(G=this.getOuputDataTexture(),K=G.originalDataLength,re=G.elementsPerTexel,de=G.typedArrayConstructor,we=de===void 0?Float32Array:de,Pe=[],re!==4)for(We=0;We<D.length;We+=4)re===1?Pe.push(D[We]):re===2?Pe.push(D[We],D[We+1]):Pe.push(D[We],D[We+1],D[We+2]);else Pe=D;return tt.abrupt("return",new we(Pe.slice(0,K)));case 6:return tt.abrupt("return",new Float32Array);case 7:case"end":return tt.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"confirmInput",value:function(g,y){var E;this.entity===g.entity?(this.dynamicPingpong=!0,E=this):E=g,this.textureCache[y].id=E.getOuputDataTexture().id,this.textureCache[y].texture=E.getOuputDataTexture().texture,Og&&console.log("[".concat(this.entity,"]: confirm input ").concat(y," from model ").concat(E.entity,", ").concat(E.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(g,y){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,D=this.context.uniforms.find(function(de){var we=de.name;return we===g});if(D){var G=this.calcDataTexture(g,D.type,y),K=G.texture,re=G.data;this.textureCache[g].data=re,this.textureCache[g].texture=K}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var g=this.context.output.name;this.textureCache[g].id=this.getOuputDataTexture().id,this.textureCache[g].texture=this.getOuputDataTexture().texture}var y=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=y,Og&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var g=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=g}},{key:"cloneDataTexture",value:function(g){var y=g.data,E=g.textureWidth;return Nm(Nm({},g),{},{id:Im++,texture:this.reGl.texture({width:E,height:E,data:y,type:"float"})})}},{key:"calcDataTexture",value:function(g,y,E){var D=1;y===yf.Vector4FloatArray&&(D=4);for(var G=[],K=0;K<E.length;K+=D)D===1?G.push(E[K],0,0,0):D===2?G.push(E[K],E[K+1],0,0):D===3?G.push(E[K],E[K+1],E[K+2],0):D===4&&G.push(E[K],E[K+1],E[K+2],E[K+3]);var re=E.length,de=Math.ceil(re/D),we=Math.ceil(Math.sqrt(de)),Pe=we*we;de<Pe&&G.push.apply(G,(0,vu.Z)(new Array((Pe-de)*4).fill(0)));var We=this.reGl.texture({width:we,height:we,data:G,type:"float"});return{id:Im++,data:G,originalDataLength:re,typedArrayConstructor:Ch(E)?E.constructor:void 0,textureWidth:we,texture:We,texelCount:de,elementsPerTexel:D,isOutput:g===this.context.output.name}}}]),i}(),l0=function(){function i(c,g){(0,So.Z)(this,i),this.elements=void 0;var y=g.data,E=g.usage,D=g.type,G=g.count;this.elements=c.elements({data:y,usage:jy[E||Vn.STATIC_DRAW],type:Mm[D||Vn.UNSIGNED_BYTE],count:G})}return(0,No.Z)(i,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(g){var y=g.data;this.elements.subdata(y)}},{key:"destroy",value:function(){this.elements.destroy()}}]),i}(),f0=function(){function i(c,g){(0,So.Z)(this,i),this.framebuffer=void 0;var y=g.width,E=g.height,D=g.color,G=g.colors,K=g.depth,re=g.stencil,de={width:y,height:E};Array.isArray(G)&&(de.colors=G.map(function(we){return we.get()})),D&&typeof D!="boolean"&&(de.color=D.get()),this.framebuffer=c.framebuffer(de)}return(0,No.Z)(i,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(g){var y=g.width,E=g.height;this.framebuffer.resize(y,E)}}]),i}();function h0(i){var c=(0,ao.Z)(i);return i!=null&&(c==="object"||c==="function")}function Xh(i){var c={};return Object.keys(i).forEach(function(g){Tg(g,i[g],c,"")}),c}function Tg(i,c,g,y){if(c===null||typeof c=="number"||typeof c=="boolean"||Array.isArray(c)&&typeof c[0]=="number"||Ch(c)||c===""||c.resize!==void 0){g["".concat(y&&y+".").concat(i)]=c;return}h0(c)&&Object.keys(c).forEach(function(E){Tg(E,c[E],g,"".concat(y&&y+".").concat(i))}),Array.isArray(c)&&c.forEach(function(E,D){Object.keys(E).forEach(function(G){Tg(G,E[G],g,"".concat(y&&y+".").concat(i,"[").concat(D,"]"))})})}function Rm(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function Oh(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Rm(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Rm(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}var ob=function(){function i(c,g){(0,So.Z)(this,i),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=c;var y=g.vs,E=g.fs,D=g.defines,G=g.attributes,K=g.uniforms,re=g.primitive,de=g.count,we=g.elements,Pe=g.depth,We=g.blend,je=g.stencil,tt=g.cull,Qe=g.instances,Je=g.scissor,yt=g.viewport,Nt={};K&&(this.uniforms=Xh(K),Object.keys(K).forEach(function(Hn){Nt[Hn]=c.prop(Hn)}));var Jt={};Object.keys(G).forEach(function(Hn){Jt[Hn]=G[Hn].get()});var gn=D&&this.generateDefines(D)||"",dn={attributes:Jt,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(gn,`
`).concat(E),uniforms:Nt,vert:`
`.concat(gn,`
`).concat(y),primitive:Q0[re===void 0?Vn.TRIANGLES:re]};Qe&&(dn.instances=Qe),de&&(dn.count=de),we&&(dn.elements=we.get()),Je&&(dn.scissor=Je),yt&&(dn.viewport=yt),this.initDepthDrawParams({depth:Pe},dn),this.initBlendDrawParams({blend:We},dn),this.initStencilDrawParams({stencil:je},dn),this.initCullDrawParams({cull:tt},dn),this.drawCommand=c(dn)}return(0,No.Z)(i,[{key:"addUniforms",value:function(g){this.uniforms=Oh(Oh({},this.uniforms),Xh(g))}},{key:"draw",value:function(g){var y=Oh(Oh({},this.uniforms),Xh(g.uniforms||{})),E={};Object.keys(y).forEach(function(D){var G=(0,ao.Z)(y[D]);G==="boolean"||G==="number"||Array.isArray(y[D])||y[D].BYTES_PER_ELEMENT?E[D]=y[D]:G==="string"||(E[D]=y[D].get())}),this.drawCommand(E)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(g,y){var E=g.depth;E&&(y.depth={enable:E.enable===void 0?!0:!!E.enable,mask:E.mask===void 0?!0:!!E.mask,func:Sh[E.func||Vn.LESS],range:E.range||[0,1]})}},{key:"initBlendDrawParams",value:function(g,y){var E=g.blend;if(E){var D=E.enable,G=E.func,K=E.equation,re=E.color,de=re===void 0?[0,0,0,0]:re;y.blend={enable:!!D,func:{srcRGB:lv[G&&G.srcRGB||Vn.SRC_ALPHA],srcAlpha:lv[G&&G.srcAlpha||Vn.SRC_ALPHA],dstRGB:lv[G&&G.dstRGB||Vn.ONE_MINUS_SRC_ALPHA],dstAlpha:lv[G&&G.dstAlpha||Vn.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Vy[K&&K.rgb||Vn.FUNC_ADD],alpha:Vy[K&&K.alpha||Vn.FUNC_ADD]},color:de}}}},{key:"initStencilDrawParams",value:function(g,y){var E=g.stencil;if(E){var D=E.enable,G=E.mask,K=G===void 0?-1:G,re=E.func,de=re===void 0?{cmp:Vn.ALWAYS,ref:0,mask:-1}:re,we=E.opFront,Pe=we===void 0?{fail:Vn.KEEP,zfail:Vn.KEEP,zpass:Vn.KEEP}:we,We=E.opBack,je=We===void 0?{fail:Vn.KEEP,zfail:Vn.KEEP,zpass:Vn.KEEP}:We;y.stencil={enable:!!D,mask:K,func:Oh(Oh({},de),{},{cmp:Wy[de.cmp]}),opFront:{fail:Nd[Pe.fail],zfail:Nd[Pe.zfail],zpass:Nd[Pe.zpass]},opBack:{fail:Nd[je.fail],zfail:Nd[je.zfail],zpass:Nd[je.zpass]}}}}},{key:"initCullDrawParams",value:function(g,y){var E=g.cull;if(E){var D=E.enable,G=E.face,K=G===void 0?Vn.BACK:G;y.cull={enable:!!D,face:nb[K]}}}},{key:"generateDefines",value:function(g){return Object.keys(g).map(function(y){return"#define ".concat(y," ").concat(Number(g[y]))}).join(`
`)}}]),i}(),d0=function(){function i(c,g){(0,So.Z)(this,i),this.texture=void 0,this.width=void 0,this.height=void 0;var y=g.data,E=g.type,D=E===void 0?Vn.UNSIGNED_BYTE:E,G=g.width,K=g.height,re=g.flipY,de=re===void 0?!1:re,we=g.format,Pe=we===void 0?Vn.RGBA:we,We=g.mipmap,je=We===void 0?!1:We,tt=g.wrapS,Qe=tt===void 0?Vn.CLAMP_TO_EDGE:tt,Je=g.wrapT,yt=Je===void 0?Vn.CLAMP_TO_EDGE:Je,Nt=g.aniso,Jt=Nt===void 0?0:Nt,gn=g.alignment,dn=gn===void 0?1:gn,Hn=g.premultiplyAlpha,Ur=Hn===void 0?!1:Hn,Br=g.mag,Hi=Br===void 0?Vn.NEAREST:Br,zr=g.min,Mi=zr===void 0?Vn.NEAREST:zr,si=g.colorSpace,mo=si===void 0?Vn.BROWSER_DEFAULT_WEBGL:si;this.width=G,this.height=K;var so={width:G,height:K,type:Mm[D],format:q0[Pe],wrapS:Uy[Qe],wrapT:Uy[yt],mag:zy[Hi],min:zy[Mi],alignment:dn,flipY:de,colorSpace:tb[mo],premultiplyAlpha:Ur,aniso:Jt};y&&(so.data=y),typeof je=="number"?so.mipmap=eb[je]:typeof je=="boolean"&&(so.mipmap=je),this.texture=c.texture(so)}return(0,No.Z)(i,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(g){var y=g.width,E=g.height;this.texture.resize(y,E),this.width=y,this.height=E}},{key:"destroy",value:function(){this.texture.destroy()}}]),i}(),Lm,g0,p0,v0=(Lm=(0,Si.b2)(),Lm(g0=(p0=function(){function i(){var c=this;(0,So.Z)(this,i),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var g=(0,Os.Z)(oo().mark(function y(E){return oo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!E.uniforms){G.next=3;break}return G.next=3,Promise.all(Object.keys(E.uniforms).map(function(){var K=(0,Os.Z)(oo().mark(function re(de){var we;return oo().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(!(E.uniforms[de]&&E.uniforms[de].load!==void 0)){We.next=5;break}return We.next=3,E.uniforms[de].load();case 3:we=We.sent,E.uniforms[de]=we;case 5:case"end":return We.stop()}},re)}));return function(re){return K.apply(this,arguments)}}()));case 3:return G.abrupt("return",new ob(c.gl,E));case 4:case"end":return G.stop()}},y)}));return function(y){return g.apply(this,arguments)}}(),this.createAttribute=function(g){return new go(c.gl,g)},this.createBuffer=function(g){return new rb(c.gl,g)},this.createElements=function(g){return new l0(c.gl,g)},this.createTexture2D=function(g){return new d0(c.gl,g)},this.createFramebuffer=function(g){return new f0(c.gl,g)},this.useFramebuffer=function(g,y){c.gl({framebuffer:g?g.get():null})(y)},this.createComputeModel=function(){var g=(0,Os.Z)(oo().mark(function y(E){return oo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",new c0(c.gl,E));case 1:case"end":return G.stop()}},y)}));return function(y){return g.apply(this,arguments)}}(),this.clear=function(g){var y=g.color,E=g.depth,D=g.stencil,G=g.framebuffer,K=G===void 0?null:G,re={color:y,depth:E,stencil:D};re.framebuffer=K===null?K:K.get(),c.gl.clear(re)},this.setScissor=function(g){c.gl&&c.gl._gl&&(g.enable&&g.box?(c.gl._gl.enable(Vn.SCISSOR_TEST),c.gl._gl.scissor(g.box.x,g.box.y,g.box.width,g.box.height)):c.gl._gl.disable(Vn.SCISSOR_TEST),c.gl._refresh())},this.viewport=function(g){var y=g.x,E=g.y,D=g.width,G=g.height;c.gl&&c.gl._gl&&(c.gl._gl.viewport(y,E,D,G),c.gl._refresh())},this.readPixels=function(g){var y=g.framebuffer,E=g.x,D=g.y,G=g.width,K=g.height,re={x:E,y:D,width:G,height:K};return y&&(re.framebuffer=y.get()),c.gl.read(re)},this.getCanvas=function(){return c.$canvas},this.getGLContext=function(){return c.gl._gl},this.destroy=function(){c.gl&&(c.gl.destroy(),c.inited=!1)}}return(0,No.Z)(i,[{key:"init",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){return oo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!this.inited){G.next=2;break}return G.abrupt("return");case 2:return this.$canvas=E.canvas,G.next=5,new Promise(function(K,re){Ni()({canvas:E.canvas,attributes:{alpha:!0,antialias:E.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(we,Pe){(we||!Pe)&&re(we),K(Pe)}})});case 5:this.gl=G.sent,this.inited=!0;case 7:case"end":return G.stop()}},y,this)}));function g(y){return c.apply(this,arguments)}return g}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),i}(),p0))||g0),Vi=V(27794);function Bm(){return typeof window!="undefined"}function fv(i,c,g,y){if(Bm()){var E=document.getElementsByTagName("head")[0],D=document.createElement("script");D.setAttribute("type","text/javascript"),D.setAttribute("src",i),y&&(D.id=y),D.onload=function(){c&&c()},D.onerror=function(G){g&&g("Unable to load script '".concat(i,"'"),G)},E.appendChild(D)}}function km(i,c){return new Promise(function(g,y){fv(i,function(){g()},function(E,D){y(D)})})}var sc;function Gm(){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Os.Z)(oo().mark(function i(){return oo().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!sc){g.next=2;break}return g.abrupt("return",sc);case 2:return g.next=4,km("https://preview.babylonjs.com/glslang/glslang.js");case 4:return sc=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),g.abrupt("return",sc);case 6:case"end":return g.stop()}},i)})),Fm.apply(this,arguments)}var Mg=function(){function i(c,g){(0,So.Z)(this,i),this.engine=c,this.options=g,this.attribute=void 0,this.buffer=void 0;var y=g,E=y.buffer,D=y.offset,G=y.stride,K=y.normalized,re=y.size,de=y.divisor,we=y.arrayStride,Pe=y.attributes,We=y.stepMode;this.buffer=E,this.attribute={buffer:E.get(),offset:D||0,stride:G||0,normalized:K||!1,divisor:de||0,arrayStride:we||0,attributes:Pe,stepMode:We||"vertex"},re&&(this.attribute.size=re)}return(0,No.Z)(i,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(g){this.buffer.subData(g)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),i}(),th=function(){function i(c,g){(0,So.Z)(this,i),this.engine=c,this.options=g,this.buffer=void 0;var y=g,E=y.data,D=y.usage,G=y.type;this.buffer=this.createBuffer(E instanceof Array?new Float32Array(E):E,D||Vi.FB.Vertex|Vi.FB.CopyDst)}return(0,No.Z)(i,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(g){var y=g.data,E=g.offset;this.setSubData(this.buffer,E,y instanceof Array?new Float32Array(y):y)}},{key:"createBuffer",value:function(g,y){var E=g.byteLength%4,D={size:g.byteLength+E,usage:y},G=this.engine.device.createBuffer(D);return this.setSubData(G,0,g),G}},{key:"setSubData",value:function(g,y,E){var D=wc?this.engine.device.getQueue():this.engine.device.defaultQueue;D.writeBuffer(g,y,E)}}]),i}();function m0(i){return typeof i=="number"}var sb=function(){function i(c,g){(0,So.Z)(this,i),this.engine=c,this.context=g,this.entity=tu(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return(0,No.Z)(i,[{key:"init",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E=this,D,G,K,re,de,we,Pe;return oo().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:D=je.sent,G=D.computeStage,K=this.context.uniforms.filter(function(tt){return tt.storageClass===bf.StorageBuffer}),re=this.context.uniforms.filter(function(tt){return tt.storageClass===bf.Uniform}),de=re.length?1:0,this.bindGroupEntries=[],de&&(we=0,Pe=[],re.forEach(function(tt){if(m0(tt.data))E.uniformGPUBufferLayout.push({name:tt.name,offset:we}),we+=4,Pe.push(tt.data);else{var Qe,Je=((Qe=tt.data)===null||Qe===void 0?void 0:Qe.length)||1;Je===3&&(Je=4,tt.data.push(0));var yt=we/4%4;if(yt>0){var Nt=4-yt;if(Je>1&&Je<=Nt)Je===2&&(Nt===3&&(we+=4,Pe.push(0)),Pe.push.apply(Pe,(0,vu.Z)(tt.data)),E.uniformGPUBufferLayout.push({name:tt.name,offset:we}));else{for(var Jt=0;Jt<Nt;Jt++)we+=4,Pe.push(0);Pe.push.apply(Pe,(0,vu.Z)(tt.data)),E.uniformGPUBufferLayout.push({name:tt.name,offset:we})}}we+=4*Je}}),this.uniformBuffer=new th(this.engine,{data:Pe instanceof Array?new Float32Array(Pe):Pe,usage:Vi.FB.Uniform|Vi.FB.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),K.forEach(function(tt){if(tt.data!==null&&(tt.type===yf.Vector4FloatArray||tt.type===yf.FloatArray)){var Qe;tt.name===E.context.output.name?(Qe=new th(E.engine,{data:isFinite(Number(tt.data))?[tt.data]:tt.data,usage:Vi.FB.Storage|Vi.FB.CopyDst|Vi.FB.CopySrc}),E.outputBuffer=Qe,E.context.output={name:tt.name,length:isFinite(Number(tt.data))?1:tt.data.length,typedArrayConstructor:Float32Array,gpuBuffer:Qe.get()}):tt.isReferer?tt.data.model&&tt.data.model.outputBuffer&&(Qe=tt.data.model.outputBuffer):Qe=new th(E.engine,{data:isFinite(Number(tt.data))?[tt.data]:tt.data,usage:Vi.FB.Storage|Vi.FB.CopyDst|Vi.FB.CopySrc}),E.vertexBuffers[tt.name]=Qe,E.bindGroupEntries.push({binding:de,resource:{name:tt.name,refer:Qe?void 0:tt.data,buffer:Qe?Qe.get():void 0}}),de++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:G}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return je.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"destroy",value:function(){var g=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(y){return g.vertexBuffers[y].destroy()})}},{key:"readData",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E,D,G,K,re,de,we,Pe,We,je;return oo().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(E=this.context.output,!E){Qe.next=16;break}if(D=E.length,G=E.typedArrayConstructor,K=E.gpuBuffer,!K){Qe.next=16;break}return re=D*G.BYTES_PER_ELEMENT,de=this.engine.device.createBuffer({size:re,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),we=this.engine.device.createCommandEncoder(),we.copyBufferToBuffer(K,0,de,0,re),Pe=wc?this.engine.device.getQueue():this.engine.device.defaultQueue,Pe.submit([we.finish()]),Qe.next=12,de.mapAsync(Vi.gc.Read);case 12:return We=de.getMappedRange(),je=new G(We.slice(0)),de.unmap(),Qe.abrupt("return",je);case 16:return Qe.abrupt("return",new Float32Array);case 17:case"end":return Qe.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"run",value:function(){if(this.engine.currentComputePass){var g;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(g=this.engine.currentComputePass).dispatch.apply(g,(0,vu.Z)(this.context.dispatch))}}},{key:"updateBuffer",value:function(g,y){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,D=this.vertexBuffers[g];D&&D.subData({data:y,offset:E})}},{key:"updateUniform",value:function(g,y){var E=this.uniformGPUBufferLayout.find(function(D){return D.name===g});E&&this.uniformBuffer.subData({data:Number.isFinite(y)?new Float32Array([y]):new Float32Array(y),offset:E.offset})}},{key:"confirmInput",value:function(g,y){var E=this.vertexBuffers[y],D=g.outputBuffer;if(E&&D&&E!==D){var G=this.engine.device.createCommandEncoder(),K=g.context.output,re=K.length,de=K.typedArrayConstructor,we=re*de.BYTES_PER_ELEMENT;G.copyBufferToBuffer(D.get(),0,E.get(),0,we);var Pe=wc?this.engine.device.getQueue():this.engine.device.defaultQueue;Pe.submit([G.finish()])}}},{key:"compileShaderToSpirV",value:function(g,y,E){return this.compileRawShaderToSpirV(E+g,y)}},{key:"compileRawShaderToSpirV",value:function(g,y){return this.engine.glslang.compileGLSL(g,y)}},{key:"compileComputePipelineStageDescriptor",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){var D,G;return oo().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(D=E,G=`#version 450
`,this.engine.options.useWGSL){re.next=6;break}return re.next=5,this.compileShaderToSpirV(E,"compute",G);case 5:D=re.sent;case 6:return re.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:D,isWHLSL:wc}),entryPoint:"main"}});case 7:case"end":return re.stop()}},y,this)}));function g(y){return c.apply(this,arguments)}return g}()}]),i}(),ab=function(){function i(c,g){(0,So.Z)(this,i),this.engine=c,this.options=g,this.indexCount=void 0,this.buffer=void 0;var y=g,E=y.data,D=y.usage,G=y.type,K=y.count;this.indexCount=K||0,this.buffer=new th(c,{data:E instanceof Array?new Uint16Array(E):E,usage:Vi.FB.Index|Vi.FB.CopyDst})}return(0,No.Z)(i,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(g){this.buffer.subData(g)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),i}(),ub=function(){function i(c,g){(0,So.Z)(this,i),this.engine=c,this.options=g,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var y=g,E=y.width,D=y.height,G=y.color,K=y.colors,re=y.depth,de=y.stencil;G&&(this.colorTexture=G),re&&(this.depthTexture=re)}return(0,No.Z)(i,[{key:"get",value:function(){var g,y;return{color:(g=this.colorTexture)===null||g===void 0?void 0:g.get(),depth:(y=this.depthTexture)===null||y===void 0?void 0:y.get()}}},{key:"destroy",value:function(){var g,y;(g=this.colorTexture)===null||g===void 0||g.destroy(),(y=this.depthTexture)===null||y===void 0||y.destroy()}},{key:"resize",value:function(g){var y=g.width,E=g.height;if(y!==this.width||E!==this.height){var D,G;(D=this.colorTexture)===null||D===void 0||D.resize({width:y,height:E}),(G=this.depthTexture)===null||G===void 0||G.resize({width:y,height:E})}this.width=y,this.height=E}}]),i}(),xf,Al,cl,Lc,Th,hv,Pg,jm=(xf={},(0,_r.Z)(xf,Vn.POINTS,Vi.YV.PointList),(0,_r.Z)(xf,Vn.LINES,Vi.YV.LineList),(0,_r.Z)(xf,Vn.LINE_LOOP,Vi.YV.LineList),(0,_r.Z)(xf,Vn.LINE_STRIP,Vi.YV.LineStrip),(0,_r.Z)(xf,Vn.TRIANGLES,Vi.YV.TriangleList),(0,_r.Z)(xf,Vn.TRIANGLE_FAN,Vi.YV.TriangleList),(0,_r.Z)(xf,Vn.TRIANGLE_STRIP,Vi.YV.TriangleStrip),xf),y0=(Al={},(0,_r.Z)(Al,Vn.NEVER,Vi.wb.Never),(0,_r.Z)(Al,Vn.ALWAYS,Vi.wb.Always),(0,_r.Z)(Al,Vn.LESS,Vi.wb.Less),(0,_r.Z)(Al,Vn.LEQUAL,Vi.wb.LessEqual),(0,_r.Z)(Al,Vn.GREATER,Vi.wb.Greater),(0,_r.Z)(Al,Vn.GEQUAL,Vi.wb.GreaterEqual),(0,_r.Z)(Al,Vn.EQUAL,Vi.wb.Equal),(0,_r.Z)(Al,Vn.NOTEQUAL,Vi.wb.NotEqual),Al),zm=(cl={},(0,_r.Z)(cl,Vn.FUNC_ADD,Vi.db.Add),(0,_r.Z)(cl,Vn.MIN_EXT,Vi.db.Min),(0,_r.Z)(cl,Vn.MAX_EXT,Vi.db.Max),(0,_r.Z)(cl,Vn.FUNC_SUBTRACT,Vi.db.Subtract),(0,_r.Z)(cl,Vn.FUNC_REVERSE_SUBTRACT,Vi.db.ReverseSubtract),cl),dv=(Lc={},(0,_r.Z)(Lc,Vn.ZERO,Vi.zi.Zero),(0,_r.Z)(Lc,Vn.ONE,Vi.zi.One),(0,_r.Z)(Lc,Vn.SRC_COLOR,Vi.zi.SrcColor),(0,_r.Z)(Lc,Vn.ONE_MINUS_SRC_COLOR,Vi.zi.OneMinusSrcColor),(0,_r.Z)(Lc,Vn.SRC_ALPHA,Vi.zi.SrcAlpha),(0,_r.Z)(Lc,Vn.ONE_MINUS_SRC_ALPHA,Vi.zi.OneMinusSrcAlpha),(0,_r.Z)(Lc,Vn.DST_COLOR,Vi.zi.DstColor),(0,_r.Z)(Lc,Vn.ONE_MINUS_DST_COLOR,Vi.zi.OneMinusDstColor),(0,_r.Z)(Lc,Vn.DST_ALPHA,Vi.zi.DstAlpha),(0,_r.Z)(Lc,Vn.ONE_MINUS_DST_ALPHA,Vi.zi.OneMinusDstAlpha),(0,_r.Z)(Lc,Vn.CONSTANT_COLOR,Vi.zi.BlendColor),(0,_r.Z)(Lc,Vn.ONE_MINUS_CONSTANT_COLOR,Vi.zi.OneMinusBlendColor),(0,_r.Z)(Lc,Vn.SRC_ALPHA_SATURATE,Vi.zi.SrcAlphaSaturated),Lc),Um=(Th={},(0,_r.Z)(Th,Vn.ALPHA,"r8unorm"),(0,_r.Z)(Th,Vn.RGBA,"rgba8unorm"),(0,_r.Z)(Th,Vn.DEPTH_COMPONENT,"depth32float"),(0,_r.Z)(Th,Vn.DEPTH_STENCIL,"depth24plus-stencil8"),Th),b0=(hv={},(0,_r.Z)(hv,Vn.NEAREST,"nearest"),(0,_r.Z)(hv,Vn.LINEAR,"linear"),hv),gv=(Pg={},(0,_r.Z)(Pg,Vn.REPEAT,"repeat"),(0,_r.Z)(Pg,Vn.CLAMP_TO_EDGE,"clamp-to-edge"),(0,_r.Z)(Pg,Vn.MIRRORED_REPEAT,"mirror-repeat"),Pg);function cb(i){var c=i.cull;if(!c||!c.enable)return Vi.Wf.None;if(c.face)return c.face===Vn.FRONT?Vi.Wf.Front:Vi.Wf.Back}function lb(i){var c=i.depth,g=i.stencil,y={compare:Vi.wb.Always,depthFailOp:Vi.xS.Keep,failOp:Vi.xS.Keep,passOp:Vi.xS.Keep};return{depthWriteEnabled:c&&c.enable,depthCompare:y0[(c==null?void 0:c.func)||Vn.ALWAYS],format:Vi.EV.Depth24PlusStencil8,stencilFront:y,stencilBack:y,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function fb(i,c){var g=i.blend;return[{format:c,alphaBlend:{srcFactor:dv[g&&g.func&&g.func.srcAlpha||Vn.ONE],dstFactor:dv[g&&g.func&&g.func.dstAlpha||Vn.ZERO],operation:zm[g&&g.equation&&g.equation.alpha||Vn.FUNC_ADD]},colorBlend:{srcFactor:dv[g&&g.func&&g.func.srcRGB||Vn.ONE],dstFactor:dv[g&&g.func&&g.func.dstRGB||Vn.ZERO],operation:zm[g&&g.equation&&g.equation.rgb||Vn.FUNC_ADD]},writeMask:Vi.Yw.All}]}function Vm(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function Sf(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Vm(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Vm(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}function Ag(i){for(var c=0,g=arguments.length,y=new Array(g>1?g-1:0),E=1;E<g;E++)y[E-1]=arguments[E];for(var D=0,G=y;D<G.length;D++){var K=G[D];c+=K.length}for(var re=new i(c),de=0,we=0,Pe=y;we<Pe.length;we++){var We=Pe[we];re.set(We,de),de+=We.length}return re}var hb=function(){function i(c,g){(0,So.Z)(this,i),this.engine=c,this.options=g,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return(0,No.Z)(i,[{key:"init",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E=this,D,G,K,re,de,we,Pe,We,je,tt,Qe,Je,yt,Nt,Jt,gn,dn,Hn;return oo().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:return D=this.options,G=D.vs,K=D.fs,re=D.attributes,de=D.uniforms,we=D.primitive,Pe=D.count,We=D.elements,je=D.depth,tt=D.blend,Qe=D.stencil,Je=D.cull,yt=D.instances,Br.next=3,this.compilePipelineStageDescriptor(G,K,null);case 3:Nt=Br.sent,Jt=Nt.vertexStage,gn=Nt.fragmentStage,de&&this.buildUniformBindGroup(de),We&&(this.indexBuffer=We.get(),this.indexCount=We.indexCount),dn={vertexBuffers:Object.keys(re).map(function(Hi,zr){var Mi=re[Hi],si=Mi.get(),mo=si.arrayStride,so=si.stepMode,Xo=si.attributes;return E.attributeCache[Hi]=Mi,{arrayStride:mo,stepMode:so,attributes:Xo}})},Hn={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:jm[we||Vn.TRIANGLES],rasterizationState:Sf(Sf({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:cb({cull:Je})}),depthStencilState:lb({depth:je,stencil:Qe}),colorStates:fb({blend:tt},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:Jt,fragmentStage:gn,vertexState:dn},this.renderPipeline=this.engine.device.createRenderPipeline(Hn);case 11:case"end":return Br.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"addUniforms",value:function(g){this.uniforms=Sf(Sf({},this.uniforms),Xh(g))}},{key:"draw",value:function(g){var y=this,E=this.engine.getCurrentRenderPass(),D=Sf(Sf({},this.uniforms),Xh(g.uniforms||{})),G=[];Object.keys(D).forEach(function(K){var re=(0,ao.Z)(D[K]);if(re==="boolean"||re==="number"||Array.isArray(D[K])||D[K].BYTES_PER_ELEMENT){var de,we=(de=y.uniformGPUBufferLayout.find(function(yt){var Nt=yt.name;return Nt===K}))===null||de===void 0?void 0:de.offset;we!==null&&y.uniformBuffer.subData({data:D[K],offset:we})}else{var Pe,We=(Pe=y.uniformGPUBufferLayout.find(function(yt){var Nt=yt.name;return Nt===K}))===null||Pe===void 0?void 0:Pe.offset;if(We!==null){var je=D[K].get(),tt=je.color||je,Qe=tt.texture,Je=tt.sampler;Je&&(G.push({binding:We,resource:Je}),We++),G.push({binding:We,resource:Qe.createView()})}}}),this.uniformBuffer&&(G[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:G}),this.renderPipeline&&E.setPipeline(this.renderPipeline),E.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&E.setIndexBuffer(this.indexBuffer.get(),Vi.iD.Uint32,0),Object.keys(this.attributeCache).forEach(function(K,re){E.setVertexBuffer(0+re,y.attributeCache[K].get().buffer,0)}),this.indexBuffer?E.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):E.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var c=(0,Os.Z)(oo().mark(function y(E,D,G){var K,re,de;return oo().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(K=`#version 450
`,re=E,de=D,this.engine.options.useWGSL){Pe.next=10;break}return Pe.next=6,this.compileShaderToSpirV(E,"vertex",K);case 6:return re=Pe.sent,Pe.next=9,this.compileShaderToSpirV(D,"fragment",K);case 9:de=Pe.sent;case 10:return Pe.abrupt("return",this.createPipelineStageDescriptor(re,de));case 11:case"end":return Pe.stop()}},y,this)}));function g(y,E,D){return c.apply(this,arguments)}return g}()},{key:"compileShaderToSpirV",value:function(g,y,E){return this.compileRawShaderToSpirV(E+g,y)}},{key:"compileRawShaderToSpirV",value:function(g,y){return this.engine.glslang.compileGLSL(g,y)}},{key:"createPipelineStageDescriptor",value:function(g,y){return{vertexStage:{module:this.engine.device.createShaderModule({code:g,isWHLSL:wc}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:y,isWHLSL:wc}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Vi.zX.CCW,cullMode:Vi.Wf.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(g){var y=this,E=0,D=Ag.apply(void 0,[Float32Array].concat((0,vu.Z)(Object.keys(g).map(function(re){return g[re]?(y.uniformGPUBufferLayout.push({name:re,offset:E}),E+=(g[re].length||1)*4,g[re]):[]})))),G=[],K=!1;D.length&&(K=!0,G.push({binding:0,visibility:Vi.$X.Fragment|Vi.$X.Vertex,type:Vi.$l.UniformBuffer})),Object.keys(g).filter(function(re){return g[re]===null}).forEach(function(re,de){y.uniformGPUBufferLayout.push({name:re,offset:de*2+(K?1:0)}),G.push({binding:de*2+(K?1:0),visibility:Vi.$X.Fragment,type:Vi.$l.Sampler},{binding:de*2+(K?1:0)+1,visibility:Vi.$X.Fragment,type:Vi.$l.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:G}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),K&&(this.uniformBuffer=new th(this.engine,{data:D instanceof Array?new Float32Array(D):D,usage:Vi.FB.Uniform|Vi.FB.CopyDst}))}}]),i}(),w0=function(){function i(c,g){(0,So.Z)(this,i),this.engine=c,this.options=g,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return(0,No.Z)(i,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(g){var y=g.width,E=g.height;(y!==this.width||E!==this.height)&&(this.destroy(),this.createTexture()),this.width=y,this.height=E}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var g=this.options,y=g.data,E=g.type,D=E===void 0?Vn.UNSIGNED_BYTE:E,G=g.width,K=g.height,re=g.flipY,de=re===void 0?!1:re,we=g.format,Pe=we===void 0?Vn.RGBA:we,We=g.mipmap,je=We===void 0?!1:We,tt=g.wrapS,Qe=tt===void 0?Vn.CLAMP_TO_EDGE:tt,Je=g.wrapT,yt=Je===void 0?Vn.CLAMP_TO_EDGE:Je,Nt=g.aniso,Jt=Nt===void 0?0:Nt,gn=g.alignment,dn=gn===void 0?1:gn,Hn=g.premultiplyAlpha,Ur=Hn===void 0?!1:Hn,Br=g.mag,Hi=Br===void 0?Vn.NEAREST:Br,zr=g.min,Mi=zr===void 0?Vn.NEAREST:zr,si=g.colorSpace,mo=si===void 0?Vn.BROWSER_DEFAULT_WEBGL:si,so=g.usage;this.width=G,this.height=K,this.texture=this.engine.device.createTexture({size:[G,K,1],mipLevelCount:1,sampleCount:1,dimension:Vi.kd.E2d,format:Um[Pe],usage:so||Vi.v2.Sampled|Vi.v2.CopyDst}),(!so||so&Vi.v2.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:gv[Qe],addressModeV:gv[yt],addressModeW:gv[Qe],magFilter:b0[Hi],minFilter:b0[Mi],maxAnisotropy:Jt}))}}]),i}(),_g,pv,Wm,E0=(_g=(0,Si.b2)(),_g(pv=(Wm=function(){function i(){var c=this;(0,So.Z)(this,i),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(g){var y=g.framebuffer,E=g.color,D=g.depth,G=g.stencil;c.options.supportCompute&&c.startComputePass(),c.currentRenderTarget?(c.currentRenderPass&&c.endRenderTargetRenderPass(),c.startRenderTargetRenderPass(c.currentRenderTarget,E||null,!!D,!!G)):(c.mainColorAttachments[0].loadValue=E||Vi.Ws.Load,c.mainDepthAttachment.depthLoadValue=D||Vi.Ws.Load,c.mainDepthAttachment.stencilLoadValue=G?c.clearStencilValue:Vi.Ws.Load,c.mainRenderPass&&c.endMainRenderPass(),c.startMainRenderPass())},this.createModel=function(){var g=(0,Os.Z)(oo().mark(function y(E){var D;return oo().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return D=new hb(c,E),K.next=3,D.init();case 3:return K.abrupt("return",D);case 4:case"end":return K.stop()}},y)}));return function(y){return g.apply(this,arguments)}}(),this.createAttribute=function(g){return new Mg(c,g)},this.createBuffer=function(g){return new th(c,g)},this.createElements=function(g){return new ab(c,g)},this.createTexture2D=function(g){return new w0(c,g)},this.createFramebuffer=function(g){return new ub(c,g)},this.useFramebuffer=function(g,y){c.currentRenderTarget&&c.unbindFramebuffer(c.currentRenderTarget),c.currentRenderTarget=g,c.currentRenderTargetViewDescriptor={dimension:Vi.p_.E2d,arrayLayerCount:1,aspect:Vi.H7.All},c.currentRenderPass=null,y()},this.createComputeModel=function(){var g=(0,Os.Z)(oo().mark(function y(E){var D;return oo().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return D=new sb(c,E),K.next=3,D.init();case 3:return K.abrupt("return",D);case 4:case"end":return K.stop()}},y)}));return function(y){return g.apply(this,arguments)}}(),this.getCanvas=function(){return c.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(g){var y=g.x,E=g.y,D=g.width,G=g.height;if(!c.currentRenderPass)c.transientViewport={x:y,y:E,width:D,height:G};else if(c.transientViewport.x!==1/0){var K=c.getCurrentRenderPass();K.setViewport(c.transientViewport.x,c.transientViewport.y,c.transientViewport.width,c.transientViewport.height,0,1)}else if(y!==c.cachedViewport.x||E!==c.cachedViewport.y||D!==c.cachedViewport.width||G!==c.cachedViewport.height){c.cachedViewport={x:y,y:E,width:D,height:G};var re=c.getCurrentRenderPass();re.setViewport(y,E,D,G,0,1)}},this.readPixels=function(g){throw new Error("Method not implemented.")}}return(0,No.Z)(i,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var c=(0,Os.Z)(oo().mark(function y(E){return oo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return this.canvas=E.canvas,this.options=E,this.useWGSL=!!E.useWGSL,this.mainPassSampleCount=E.antialiasing?this.defaultSampleCount:1,G.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return G.stop()}},y,this)}));function g(y){return c.apply(this,arguments)}return g}()},{key:"setScissor",value:function(g){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(g){return g.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),wc?this.device.getQueue().submit(this.commandBuffers.filter(function(g){return g})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(g){return g}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E,D;return oo().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,Gm();case 2:return this.glslang=K.sent,K.next=5,(E=navigator)===null||E===void 0||(D=E.gpu)===null||D===void 0?void 0:D.requestAdapter();case 5:return this.adapter=K.sent,K.next=8,this.adapter.requestDevice();case 8:this.device=K.sent;case 9:case"end":return K.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(wc?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Vi.v2.OutputAttachment|Vi.v2.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var g={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Vi.kd.E2d,format:Vi.EV.BGRA8Unorm,usage:Vi.v2.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(g),this.mainColorAttachments=[{attachment:wc?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Vi.EG.Store}]}else this.mainColorAttachments=[{attachment:wc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Vi.EG.Store}];var y={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Vi.kd.E2d,format:wc?"depth32float-stencil8":Vi.EV.Depth24PlusStencil8,usage:Vi.v2.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(y),this.mainDepthAttachment={attachment:wc?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Vi.EG.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Vi.EG.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=wc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=wc?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(g,y,E){var D,G,K=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,re=(D=g.get().color)===null||D===void 0?void 0:D.texture,de;re&&(de=re.createView(this.currentRenderTargetViewDescriptor));var we=(G=g.get().depth)===null||G===void 0?void 0:G.texture,Pe;we&&(Pe=we.createView());var We=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:de,loadValue:y!==null?y:Vi.Ws.Load,storeOp:Vi.EG.Store}],depthStencilAttachment:we&&Pe?{attachment:Pe,depthLoadValue:E?this.clearDepthValue:Vi.Ws.Load,depthStoreOp:Vi.EG.Store,stencilLoadValue:K?this.clearStencilValue:Vi.Ws.Load,stencilStoreOp:Vi.EG.Store}:void 0});this.currentRenderPass=We,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(g){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),i}(),Wm))||pv),x0,$m;function ca(i){var c=db();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function db(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Hm=4/64,Xm=1-Hm*2,vv=(x0=(0,Si.b2)(),x0($m=function(i){(0,aa.Z)(g,i);var c=ca(g);function g(){return(0,So.Z)(this,g),c.apply(this,arguments)}return(0,No.Z)(g,[{key:"onEntityCreated",value:function(){var E=this.config,D=E.widthSegments,G=D===void 0?1:D,K=E.heightSegments,re=K===void 0?1:K,de=E.depthSegments,we=de===void 0?1:de,Pe=E.halfExtents,We=Pe===void 0?yn.al(.5,.5,.5):Pe,je=G,tt=re,Qe=we,Je=(0,uf.Z)(We,3),yt=Je[0],Nt=Je[1],Jt=Je[2],gn=[yn.al(-yt,-Nt,Jt),yn.al(yt,-Nt,Jt),yn.al(yt,Nt,Jt),yn.al(-yt,Nt,Jt),yn.al(yt,-Nt,-Jt),yn.al(-yt,-Nt,-Jt),yn.al(-yt,Nt,-Jt),yn.al(yt,Nt,-Jt)],dn=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],Hn=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],Ur={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},Br=[],Hi=[],zr=[],Mi=[],si=[],mo=0,so=function(ia,Tf,qh){var ed,td,kd,Ro;for(kd=0;kd<=Tf;kd++)for(Ro=0;Ro<=qh;Ro++){var $a=yn.Ue(),Ec=yn.Ue(),Ou=yn.Ue(),Au=yn.Ue();yn.t7($a,gn[dn[ia][0]],gn[dn[ia][1]],kd/Tf),yn.t7(Ec,gn[dn[ia][0]],gn[dn[ia][2]],Ro/qh),yn.lu(Ou,Ec,gn[dn[ia][0]]),yn.IH(Au,$a,Ou),ed=kd/Tf,td=Ro/qh,Br.push(Au[0],Au[1],Au[2]),Hi.push(Hn[ia][0],Hn[ia][1],Hn[ia][2]),zr.push(ed,td),ed/=3,td/=3,ed=ed*Xm+Hm,td=td*Xm+Hm,ed+=ia%3/3,td+=Math.floor(ia/3)/3,Mi.push(ed,td),kd<Tf&&Ro<qh&&(si.push(mo+qh+1,mo+1,mo),si.push(mo+qh+1,mo+qh+2,mo+1)),mo++}};so(Ur.FRONT,je,tt),so(Ur.BACK,je,tt),so(Ur.TOP,je,Qe),so(Ur.BOTTOM,je,Qe),so(Ur.RIGHT,Qe,tt),so(Ur.LEFT,Qe,tt);var Xo=rg(Br),Wa=this.getComponent();Wa.indices=Uint32Array.from(si),Wa.aabb=Xo,Wa.vertexCount=mo,Wa.attributes=[{dirty:!0,name:"position",data:Float32Array.from(Br),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(Hi),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(zr),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),g}(wf))||$m);function gb(i,c){if(!i&&!c)throw new Error("Please specify valid arguments for parameters a and b.");if(!c||c.length===0)return i;if(!i||i.length===0)return c;if(Object.prototype.toString.call(i)!==Object.prototype.toString.call(c))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var g=new i.constructor(i.length+c.length);return g.set(i),g.set(c,i.length),g}var Ym,Yh;function Zm(i){var c=S0();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function S0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var mv=(Ym=(0,Si.b2)(),Ym(Yh=function(i){(0,aa.Z)(g,i);var c=Zm(g);function g(){return(0,So.Z)(this,g),c.apply(this,arguments)}return(0,No.Z)(g,[{key:"onEntityCreated",value:function(){var E=this.config.geometries,D=E===void 0?[]:E,G=this.getComponent();G.aabb=new Xl;var K=[],re=[],de=0;D.forEach(function(we){var Pe=we.aabb,We=we.indices,je=we.vertexCount,tt=we.attributes;G.aabb.add(Pe),G.vertexCount+=je,We&&re.push.apply(re,(0,vu.Z)(We.map(function(Qe){return Qe+de}))),de+=je,tt.forEach(function(Qe,Je){K[Je]?Qe.data&&(Cd(Qe.data)?K[Je].push(Qe.data):Kp(Qe.data)?K[Je].data=gb(K[Je].data,Qe.data):K[Je].data=K[Je].data.concat(Qe.data)):(K[Je]=Qe,K[Je].dirty=!0)})}),G.attributes=K,G.indices=Uint32Array.from(re),G.dirty=!0}}]),g}(wf))||Yh),Zu,Km;function C0(i){var c=O0();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function O0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var T0=(Zu=(0,Si.b2)(),Zu(Km=function(i){(0,aa.Z)(g,i);var c=C0(g);function g(){return(0,So.Z)(this,g),c.apply(this,arguments)}return(0,No.Z)(g,[{key:"onEntityCreated",value:function(){for(var E=this.config,D=E.halfExtents,G=D===void 0?[.5,.5]:D,K=E.widthSegments,re=K===void 0?5:K,de=E.lengthSegments,we=de===void 0?5:de,Pe=[],We=[],je=[],tt=[],Qe=0,Je=0;Je<=re;Je++)for(var yt=0;yt<=we;yt++){var Nt=-G[0]+2*G[0]*Je/re,Jt=0,gn=-(-G[1]+2*G[1]*yt/we),dn=Je/re,Hn=yt/we;Pe.push(Nt,Jt,gn),We.push(0,1,0),je.push(dn,Hn),Je<re&&yt<we&&(tt.push(Qe+we+1,Qe+1,Qe),tt.push(Qe+we+1,Qe+we+2,Qe+1)),Qe++}var Ur=rg(Pe),Br=this.getComponent();Br.indices=Uint32Array.from(tt),Br.aabb=Ur,Br.vertexCount=Qe,Br.attributes=[{dirty:!0,name:"position",data:Float32Array.from(Pe),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(We),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(je),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),g}(wf))||Km),Jm,yv;function M0(i){var c=P0();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function P0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var A0=(Jm=(0,Si.b2)(),Jm(yv=function(i){(0,aa.Z)(g,i);var c=M0(g);function g(){return(0,So.Z)(this,g),c.apply(this,arguments)}return(0,No.Z)(g,[{key:"onEntityCreated",value:function(){for(var E=this.config,D=E.radius,G=D===void 0?.5:D,K=E.latitudeBands,re=K===void 0?16:K,de=E.longitudeBands,we=de===void 0?16:de,Pe=[],We=[],je=[],tt=[],Qe=0;Qe<=re;Qe++)for(var Je=Qe*Math.PI/re,yt=Math.sin(Je),Nt=Math.cos(Je),Jt=0;Jt<=we;Jt++){var gn=Jt*2*Math.PI/we-Math.PI/2,dn=Math.sin(gn),Hn=Math.cos(gn),Ur=Hn*yt,Br=Nt,Hi=dn*yt,zr=1-Jt/we,Mi=1-Qe/re;Pe.push(Ur*G,Br*G,Hi*G),We.push(Ur,Br,Hi),je.push(zr,Mi)}for(var si=0;si<re;++si)for(var mo=0;mo<we;++mo){var so=si*(we+1)+mo,Xo=so+we+1;tt.push(so+1,Xo,so),tt.push(so+1,Xo+1,Xo)}var Wa=rg(Pe),ac=this.getComponent();ac.indices=Uint32Array.from(tt),ac.aabb=Wa,ac.vertexCount=Pe.length/3,ac.attributes=[{dirty:!0,name:"position",data:Float32Array.from(Pe),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(We),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(je),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),g}(wf))||yv),Qm,qm,bv,_0,wv,ey,D0,N0;function Rd(i){var c=I0();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function I0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Ev=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,R0=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,xv=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,ty=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,L0=(Qm=(0,Si.b2)(),qm=(0,Si.f3)(Kr.RenderEngine),bv=(0,Si.f3)(Kr.ShaderModuleService),Qm(_0=(wv=(N0=function(i){(0,aa.Z)(g,i);var c=Rd(g);function g(){var y;(0,So.Z)(this,g);for(var E=arguments.length,D=new Array(E),G=0;G<E;G++)D[G]=arguments[G];return y=c.call.apply(c,[this].concat(D)),ho(y,"engine",ey,(0,Ts.Z)(y)),ho(y,"shaderModuleService",D0,(0,Ts.Z)(y)),y}return(0,No.Z)(g,[{key:"onEntityCreated",value:function(){var E=this.getComponent(),D=this.engine.supportWebGPU?ty:R0,G=this.engine.supportWebGPU?xv:Ev;this.shaderModuleService.registerModule("material-basic",{vs:D,fs:G});var K=this.shaderModuleService.getModule("material-basic"),re=K.vs,de=K.fs,we=K.uniforms;E.vertexShaderGLSL=re,E.fragmentShaderGLSL=de,E.setUniform(we),this.config.map&&(E.setDefines({USE_UV:1,USE_MAP:1}),E.setUniform({map:this.config.map,uvTransform:ri.Ue()}))}}]),g}(iv),N0),ey=Bo(wv.prototype,"engine",[qm],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D0=Bo(wv.prototype,"shaderModuleService",[bv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wv))||_0),B0,k0,G0,Sv,Cv,Ov,Tv,Zh,F0,ny,Zc,Mh;function Bs(i){var c=Cf();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function Cf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Ld=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,pb=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,Dg=(B0=(0,Si.b2)(),k0=(0,Si.f3)(Kr.Systems),G0=(0,Si.t6)(Kr.MaterialSystem),Sv=(0,Si.f3)(Kr.Systems),Cv=(0,Si.t6)(Kr.GeometrySystem),Ov=(0,Si.f3)(Kr.ShaderModuleService),B0(Tv=(Zh=(Mh=function(i){(0,aa.Z)(g,i);var c=Bs(g);function g(){var y;(0,So.Z)(this,g);for(var E=arguments.length,D=new Array(E),G=0;G<E;G++)D[G]=arguments[G];return y=c.call.apply(c,[this].concat(D)),ho(y,"materialSystem",F0,(0,Ts.Z)(y)),ho(y,"geometrySystem",ny,(0,Ts.Z)(y)),ho(y,"shaderModuleService",Zc,(0,Ts.Z)(y)),y}return(0,No.Z)(g,[{key:"onAttributeChanged",value:function(E){var D=E.name,G=E.data,K=this.getMeshComponent();K&&K.material&&(D==="gridColor"?(K.material.setUniform("u_GridColor",G),K.material.setUniform("u_GridColor2",G)):D==="gridSize"&&(K.material.setUniform("u_GridSize",G),K.material.setUniform("u_GridSize2",G)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:pb,fs:Ld});var E=this.shaderModuleService.getModule("grid"),D=E.vs,G=E.fs,K=E.uniforms,re=this.materialSystem.createShaderMaterial({vertexShader:D,fragmentShader:G});this.setMaterial(re);var de=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(de),re.setCull({enable:!1,face:Vn.BACK}).setDepth({enable:!0,func:Vn.LESS}),re.setUniform(K),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),de.setIndex([0,3,2,2,1,0]),de.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),g}(ni),Mh),F0=Bo(Zh.prototype,"materialSystem",[k0,G0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny=Bo(Zh.prototype,"geometrySystem",[Sv,Cv],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zc=Bo(Zh.prototype,"shaderModuleService",[Ov],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zh))||Tv),Bd=V(32644),Ql=V(40582);function Mv(i,c,g,y,E){Kh(c,y,-E),Kh(c,y,E),i.push(g),i.push(g)}function Kh(i,c,g){i.push([[c[0],c[1]],g])}function vb(i,c,g){var y=[0,0],E=[0,0],D=[0,0],G=[0,0],K=-1,re=!1,de=null,we=(0,Bd.create)(),Pe=g||0,We=3,je=[],tt=[],Qe=[],Je=[0,0];c&&(i=i.slice(),i.push(i[0]));for(var yt=i.length,Nt=1;Nt<yt;Nt++){var Jt=Pe,gn=i[Nt-1],dn=i[Nt],Hn=Nt<i.length-1?i[Nt+1]:null;if(Je.push(Nt/yt,Nt/yt),(0,Ql.o7)(y,dn,gn),de||(de=[0,0],(0,Ql.mJ)(de,y)),re||(re=!0,Mv(tt,je,gn,de,1)),Qe.push([Jt+0,Jt+1,Jt+2]),!Hn)(0,Ql.mJ)(de,y),Mv(tt,je,dn,de,1),Qe.push(K===1?[Jt,Jt+2,Jt+3]:[Jt+2,Jt+1,Jt+3]),Pe+=2;else{(0,Ql.o7)(E,Hn,dn);var Ur=(0,Ql.x7)(D,G,y,E,1),Br=(0,Bd.dot)(D,de)<0?-1:1,Hi=Ur>We;if(!isFinite(Ur)){(0,Ql.mJ)(de,y),Mv(tt,je,dn,de,1),Qe.push(K===1?[Jt,Jt+2,Jt+3]:[Jt+2,Jt+1,Jt+3]),Pe+=2,K=Br;continue}Hi?(Ur=We,Je.push(Nt/yt),Kh(je,de,-Br),tt.push(dn),Kh(je,G,Ur*Br),tt.push(dn),Qe.push(K!==-Br?[Jt,Jt+2,Jt+3]:[Jt+2,Jt+1,Jt+3]),Qe.push([Jt+2,Jt+3,Jt+4]),(0,Ql.mJ)(we,E),(0,Bd.copy)(de,we),Kh(je,de,-Br),tt.push(dn),Pe+=3):(Mv(tt,je,dn,G,Ur),Qe.push(K===1?[Jt,Jt+2,Jt+3]:[Jt+2,Jt+1,Jt+3]),Br=-1,(0,Bd.copy)(de,G),Pe+=2),K=Br}}return{normals:je,attrIndex:Qe,attrPos:tt,attrCounters:Je}}var j0,z0,ry,U0,V0,W0,Pv,Of,Av,ql,$0,_v;function Jh(i){var c=iy();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function iy(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Ng=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,mb=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,yb=(j0=(0,Si.b2)(),z0=(0,Si.f3)(Kr.Systems),ry=(0,Si.t6)(Kr.MaterialSystem),U0=(0,Si.f3)(Kr.Systems),V0=(0,Si.t6)(Kr.GeometrySystem),W0=(0,Si.f3)(Kr.ShaderModuleService),j0(Pv=(Of=(_v=function(i){(0,aa.Z)(g,i);var c=Jh(g);function g(){var y;(0,So.Z)(this,g);for(var E=arguments.length,D=new Array(E),G=0;G<E;G++)D[G]=arguments[G];return y=c.call.apply(c,[this].concat(D)),ho(y,"materialSystem",Av,(0,Ts.Z)(y)),ho(y,"geometrySystem",ql,(0,Ts.Z)(y)),ho(y,"shaderModuleService",$0,(0,Ts.Z)(y)),y.vertexCount=void 0,y}return(0,No.Z)(g,[{key:"onAttributeChanged",value:function(E){var D=E.name,G=E.data,K=this.getMeshComponent();if(K&&K.material)switch(D){case"dashArray":K.material.setUniform("u_dash_array",G);break;case"dashOffset":K.material.setUniform("u_dash_offset",G);break;case"dashRatio":K.material.setUniform("u_dash_ratio",G);break;case"thickness":K.material.setUniform("u_thickness",G);break;case"color":var re=new Array(this.vertexCount).fill(void 0).map(function(){return G}).reduce(function(de,we){return[].concat((0,vu.Z)(de),(0,vu.Z)(we))},[]);K.geometry.setAttribute("a_color",Float32Array.from(re),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var E=this;this.shaderModuleService.registerModule("line",{vs:mb,fs:Ng});var D=this.shaderModuleService.getModule("line"),G=D.vs,K=D.fs,re=D.uniforms,de=this.materialSystem.createShaderMaterial({vertexShader:G,fragmentShader:K}),we=vb(this.config.points,!1),Pe=we.normals,We=we.attrIndex,je=we.attrPos,tt=we.attrCounters,Qe=je.length;this.vertexCount=Qe;var Je=this.geometrySystem.createBufferGeometry({vertexCount:Qe});this.setMaterial(de),this.setGeometry(Je),de.setCull({enable:!1,face:Vn.BACK}).setUniform(re),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var yt=[],Nt=[];Pe.forEach(function(gn){var dn=gn[0],Hn=gn[1];yt.push([dn[0],dn[1]]),Nt.push(Hn)}),Je.setIndex(We.reduce(function(gn,dn){return[].concat((0,vu.Z)(gn),(0,vu.Z)(dn))},[])),Je.setAttribute("a_pos",Float32Array.from(je.reduce(function(gn,dn){return[].concat((0,vu.Z)(gn),(0,vu.Z)(dn))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var Jt=new Array(Qe).fill(void 0).map(function(){return(0,vu.Z)(E.config.color)}).reduce(function(gn,dn){return[].concat((0,vu.Z)(gn),(0,vu.Z)(dn))},[]);Je.setAttribute("a_color",Float32Array.from(Jt),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),Je.setAttribute("a_line_miter",Float32Array.from(Nt),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),Je.setAttribute("a_line_normal",Float32Array.from(yt.reduce(function(gn,dn){return[].concat((0,vu.Z)(gn),(0,vu.Z)(dn))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),Je.setAttribute("a_counters",Float32Array.from(tt),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),g}(ni),_v),Av=Bo(Of.prototype,"materialSystem",[z0,ry],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ql=Bo(Of.prototype,"geometrySystem",[U0,V0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$0=Bo(Of.prototype,"shaderModuleService",[W0],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Of))||Pv);function A(i){return[i+1&255,i+1>>8&255,i+1>>8>>8&255]}var L,oe,Me,Ue,rt,wt,zt,Qt,wn,Yn,mr,Lr;function Fr(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function Gi(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Fr(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Fr(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}function po(i){var c=Ki();return function(){var y=(0,zs.Z)(i),E;if(c){var D=(0,zs.Z)(this).constructor;E=Reflect.construct(y,arguments,D)}else E=y.apply(this,arguments);return(0,fa.Z)(this,E)}}function Ki(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(i){return!1}}var Lo=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,Fo=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,oi=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],vo=(L=(0,Si.b2)(),oe=(0,Si.f3)(Kr.Systems),Me=(0,Si.t6)(Kr.MaterialSystem),Ue=(0,Si.f3)(Kr.Systems),rt=(0,Si.t6)(Kr.GeometrySystem),wt=(0,Si.f3)(Kr.ShaderModuleService),L(zt=(Qt=(Lr=function(i){(0,aa.Z)(g,i);var c=po(g);function g(){var y;(0,So.Z)(this,g);for(var E=arguments.length,D=new Array(E),G=0;G<E;G++)D[G]=arguments[G];return y=c.call.apply(c,[this].concat(D)),ho(y,"materialSystem",wn,(0,Ts.Z)(y)),ho(y,"geometrySystem",Yn,(0,Ts.Z)(y)),ho(y,"shaderModuleService",mr,(0,Ts.Z)(y)),y}return(0,No.Z)(g,[{key:"onAttributeChanged",value:function(E){var D=E.name,G=E.data,K=this.getMeshComponent();K&&K.material&&(D==="strokeWidth"?K.material.setUniform("u_stroke_width",G):D==="strokeColor"?K.material.setUniform("u_stroke_color",G):D==="strokeOpacity"?K.material.setUniform("u_stroke_opacity",G):D==="opacity"?K.material.setUniform("u_opacity",G):D==="blur"&&K.material.setUniform("u_blur",G))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:Fo,fs:Lo});var E=this.shaderModuleService.getModule("grid"),D=E.vs,G=E.fs,K=E.uniforms,re=this.materialSystem.createShaderMaterial({vertexShader:D,fragmentShader:G,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:Vn.SRC_ALPHA,dstRGB:Vn.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});re.setUniform(Gi({u_device_pixel_ratio:window.devicePixelRatio},K));var de=this.buildAttributes(),we=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:de.instancedOffsets.length/2,vertexCount:6});we.setIndex([0,2,1,0,3,2]),we.setAttribute("position",Float32Array.from(de.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),we.setAttribute("offset",Float32Array.from(de.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),we.setAttribute("color",Float32Array.from(de.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),we.setAttribute("size",Float32Array.from(de.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),we.setAttribute("shape",Float32Array.from(de.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),we.setAttribute("a_PickingColor",Float32Array.from(de.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(re),this.setGeometry(we)}},{key:"buildAttribute",value:function(E,D,G){var K,re,de,we;(K=D.instancedPickingColors).push.apply(K,(0,vu.Z)(A(E.id||G))),D.instancedShapes.push(oi.indexOf(E.shape||"circle")),(re=D.instancedColors).push.apply(re,(0,vu.Z)(E.color||[1,0,0,1])),(de=D.instancedOffsets).push.apply(de,(0,vu.Z)(E.position||[0,0])),(we=D.instancedSizes).push.apply(we,(0,vu.Z)(E.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var E=this,D={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(G,K){E.buildAttribute(G,D,K)}):this.buildAttribute(this.config,D,0),D}}]),g}(ni),Lr),wn=Bo(Qt.prototype,"materialSystem",[oe,Me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yn=Bo(Qt.prototype,"geometrySystem",[Ue,rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=Bo(Qt.prototype,"shaderModuleService",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt))||zt),Do,bo,Cs,ea,As,Uu,za,hu,_l,ll;function yi(i,c){var g;if(typeof Symbol=="undefined"||i[Symbol.iterator]==null){if(Array.isArray(i)||(g=jo(i))||c&&i&&typeof i.length=="number"){g&&(i=g);var y=0,E=function(){};return{s:E,n:function(){return y>=i.length?{done:!0}:{done:!1,value:i[y++]}},e:function(de){throw de},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D=!0,G=!1,K;return{s:function(){g=i[Symbol.iterator]()},n:function(){var de=g.next();return D=de.done,de},e:function(de){G=!0,K=de},f:function(){try{!D&&g.return!=null&&g.return()}finally{if(G)throw K}}}}function jo(i,c){if(i){if(typeof i=="string")return va(i,c);var g=Object.prototype.toString.call(i).slice(8,-1);if(g==="Object"&&i.constructor&&(g=i.constructor.name),g==="Map"||g==="Set")return Array.from(i);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return va(i,c)}}function va(i,c){(c==null||c>i.length)&&(c=i.length);for(var g=0,y=new Array(c);g<c;g++)y[g]=i[g];return y}var Dl=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,Kc=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,Dv=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,p1=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,v1=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,Tb=(Do=(0,Si.b2)(),bo=(0,Si.f3)(Kr.RenderEngine),Cs=(0,Si.f3)(Kr.ShaderModuleService),ea=(0,Si.f3)(Kr.ConfigService),Do(As=(Uu=(ll=function(){function i(){(0,So.Z)(this,i),this.container=void 0,ho(this,"engine",za,this),ho(this,"shaderModule",hu,this),ho(this,"configService",_l,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return(0,No.Z)(i,[{key:"init",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E,D,G,K,re;return oo().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:p1}),this.shaderModule.registerModule("uv.vert.main",{vs:v1}),this.shaderModule.registerModule("uv.frag.declaration",{fs:Dv}),this.shaderModule.registerModule("map.frag.declaration",{fs:Dl}),this.shaderModule.registerModule("map.frag.main",{fs:Kc}),E=this.container.getAll(Kr.Systems),D=this.configService.get(),!D.canvas){we.next=30;break}return we.next=11,this.engine.init({canvas:D.canvas,swapChainFormat:Md.EV.BGRA8Unorm,antialiasing:!1});case 11:G=yi(E),we.prev=12,G.s();case 14:if((K=G.n()).done){we.next=21;break}if(re=K.value,!re.initialize){we.next=19;break}return we.next=19,re.initialize();case 19:we.next=14;break;case 21:we.next=26;break;case 23:we.prev=23,we.t0=we.catch(12),G.e(we.t0);case 26:return we.prev=26,G.f(),we.finish(26);case 29:this.inited=!0;case 30:case"end":return we.stop()}},y,this,[[12,23,26,29]])}));function g(){return c.apply(this,arguments)}return g}()},{key:"render",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E,D,G,K,re,de,we,Pe=arguments;return oo().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(!(!this.inited||this.rendering)){je.next=2;break}return je.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(tt){tt()}),this.rendering=!0,this.engine.beginFrame(),E=this.container.getAll(Kr.Systems),D=Pe.length,G=new Array(D),K=0;K<D;K++)G[K]=Pe[K];re=yi(E),je.prev=8,re.s();case 10:if((de=re.n()).done){je.next=17;break}if(we=de.value,!we.execute){je.next=15;break}return je.next=15,we.execute(G);case 15:je.next=10;break;case 17:je.next=22;break;case 19:je.prev=19,je.t0=je.catch(8),re.e(je.t0);case 22:return je.prev=22,re.f(),je.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return je.stop()}},y,this,[[8,19,22,25]])}));function g(){return c.apply(this,arguments)}return g}()},{key:"clear",value:function(g){var y=this;return this.inited?this.engine.clear(g):this.pendings.unshift(function(){y.engine.clear(g),y.pendings.shift()}),this}},{key:"setSize",value:function(g){var y=g.width,E=g.height,D=this.engine.getCanvas();return this.size={width:y,height:E},D.width=y,D.height=E,this}},{key:"getSize",value:function(){return this.size}}]),i}(),ll),za=Bo(Uu.prototype,"engine",[bo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hu=Bo(Uu.prototype,"shaderModule",[Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_l=Bo(Uu.prototype,"configService",[ea],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uu))||As),Mb,Pb,Ab,_b=(Mb=(0,Si.b2)(),Mb(Pb=(Ab=function(){function i(){(0,So.Z)(this,i),this.entities=[]}return(0,No.Z)(i,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(g){return this.addEntity(g.getEntity()),this}},{key:"removeRenderable",value:function(g){return this.removeEntity(g.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(g){return this.entities.indexOf(g)===-1&&this.entities.push(g),this}},{key:"removeEntity",value:function(g){var y=this.entities.indexOf(g);return this.entities.splice(y,1),this}}]),i}(),Ab))||Pb),Db,Nb,Ib,Rb=(Db=(0,Si.b2)(),Db(Nb=(Ib=function(){function i(){(0,So.Z)(this,i),this.cache={}}return(0,No.Z)(i,[{key:"get",value:function(g){return this.cache[g]}},{key:"set",value:function(g,y){this.cache[g]=y}}]),i}(),Ib))||Nb),Lb,Bb,kb,Gb,H0,Fb,jb,zb;function Ub(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function Vb(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?Ub(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):Ub(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}var Wb=(Lb=(0,Si.b2)(),Bb=(0,Si.f3)(Rb),kb=(0,Si.f3)(Kr.RenderEngine),Lb(Gb=(H0=(zb=function(){function i(){(0,So.Z)(this,i),ho(this,"textureCache",Fb,this),ho(this,"engine",jb,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return(0,No.Z)(i,[{key:"setConfig",value:function(g){this.config=g}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E=this;return oo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!this.config.url){G.next=4;break}return G.abrupt("return",new Promise(function(K,re){var de=E.textureCache.get(E.config.url);if(de)K(de);else{var we=new Image;we.crossOrigin="Anonymous",we.src=E.config.url,we.onload=function(){var Pe=E.engine.createTexture2D(Vb(Vb({},E.config),{},{data:we,width:we.width,height:we.height,flipY:!0}));E.textureCache.set(E.config.url,Pe),E.texture=Pe,E.loaded=!0,K(Pe)},we.onerror=function(){re()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),G.abrupt("return",this.texture);case 7:case"end":return G.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()}]),i}(),zb),Fb=Bo(H0.prototype,"textureCache",[Bb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jb=Bo(H0.prototype,"engine",[kb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H0))||Gb),$b,Hb,Xb,Yb,bb,Zb,Kb,Jb=($b=(0,Si.b2)(),Hb=(0,Si.f3)(Kr.Systems),Xb=(0,Si.t6)(Kr.RendererSystem),$b(Yb=(bb=(Kb=function(){function i(){(0,So.Z)(this,i),ho(this,"rendererSystem",Zb,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return(0,No.Z)(i,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(g){return this.camera=g,this}},{key:"setScene",value:function(g){return this.scene=g,this}},{key:"setViewport",value:function(g){return this.viewport=g,this}},{key:"setClearColor",value:function(g){return this.clearColor=g,this}},{key:"pick",value:function(g){return this.rendererSystem.pick(g,this)}}]),i}(),Kb),Zb=Bo(bb.prototype,"rendererSystem",[Hb,Xb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bb))||Yb),Qb,qb,e1,wb,t1,n1;function r1(i,c){var g=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);c&&(y=y.filter(function(E){return Object.getOwnPropertyDescriptor(i,E).enumerable})),g.push.apply(g,y)}return g}function m1(i){for(var c=1;c<arguments.length;c++){var g=arguments[c]!=null?arguments[c]:{};c%2?r1(Object(g),!0).forEach(function(y){(0,_r.Z)(i,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(g)):r1(Object(g)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(g,y))})}return i}var X0=(Qb=(0,Si.b2)(),qb=(0,Si.f3)(Kr.ConfigService),Qb(e1=(wb=(n1=function(){function i(){(0,So.Z)(this,i),ho(this,"configService",t1,this),this.container=void 0}return(0,No.Z)(i,[{key:"getEngine",value:function(){var c=(0,Os.Z)(oo().mark(function y(){var E,D,G,K;return oo().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return E=this.container.get(Kr.RenderEngine),D=this.configService.get(),G=D.canvas,K=D.engineOptions,de.next=4,E.init(m1({canvas:G||ug(),swapChainFormat:Md.EV.BGRA8Unorm,antialiasing:!1},K));case 4:return de.abrupt("return",E);case 5:case"end":return de.stop()}},y,this)}));function g(){return c.apply(this,arguments)}return g}()},{key:"getTransformComponent",value:function(g){var y=this.container.get(Kr.TransformComponentManager);return y.getComponentByEntity(g)}},{key:"getMeshComponent",value:function(g){var y=this.container.get(Kr.MeshComponentManager);return y.getComponentByEntity(g)}},{key:"setConfig",value:function(g){this.configService.set(g)}},{key:"setContainer",value:function(g){this.container=g}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return tu()}},{key:"createScene",value:function(){return this.container.get(_b)}},{key:"createCamera",value:function(){return this.container.get(og)}},{key:"createView",value:function(){return this.container.get(Jb)}},{key:"createRenderable",value:function(g,y){var E=g?this.container.getNamed(Kr.Renderable,g):this.container.get(ni),D=tu();return E.setConfig(y||{}),E.setEntity(D),E}},{key:"createGeometry",value:function(g,y){var E=this.container.getNamed(Kr.Geometry,g),D=tu();return E.setConfig(y||{}),E.setEntity(D),E.getComponent()}},{key:"createMaterial",value:function(g,y){var E=this.container.getNamed(Kr.Material,g),D=tu();return E.setConfig(y||{}),E.setEntity(D,g),E.getComponent()}},{key:"createTexture2D",value:function(g){var y=this.container.get(Wb);return y.setConfig(g),y}},{key:"createBufferGeometry",value:function(g){var y=this.container.getNamed(Kr.Systems,Kr.GeometrySystem);return y.createBufferGeometry(g)}},{key:"createInstancedBufferGeometry",value:function(g){var y=this.container.getNamed(Kr.Systems,Kr.GeometrySystem);return y.createInstancedBufferGeometry(g)}},{key:"createShaderMaterial",value:function(g){var y=this.container.getNamed(Kr.Systems,Kr.MaterialSystem);return y.createShaderMaterial(g)}},{key:"createKernel",value:function(g){var y=this.container.get(nv);return typeof g=="string"?y.setBundle(JSON.parse(g)):y.setBundle(g),y.init(),y}},{key:"createRenderer",value:function(){var g=this.container.get(Tb);return g.container=this.container,g.init(),g}},{key:"destroy",value:function(){var g=this.container.getAll(Kr.Systems);g.forEach(function(D){D.tearDown&&D.tearDown()});var y=this.container.get(Kr.RenderEngine);y.destroy();var E=this.container.get(Kr.InteractorService);E.destroy()}}],[{key:"create",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=sm(),E=navigator.gpu?E0:v0;y.isBound(Kr.RenderEngine)||y.bind(Kr.RenderEngine).to(E).inSingletonScope(),y.bind(Tb).toSelf(),y.bind(nv).toSelf(),y.bind(ni).toSelf(),y.bind(Jb).toSelf(),y.bind(og).toSelf(),y.bind(_b).toSelf(),y.bind(i).toSelf(),y.bind(Rb).toSelf(),y.bind(Wb).toSelf(),y.bind(Kr.Geometry).to(vv).whenTargetNamed(wf.BOX),y.bind(Kr.Geometry).to(A0).whenTargetNamed(wf.SPHERE),y.bind(Kr.Geometry).to(T0).whenTargetNamed(wf.PLANE),y.bind(Kr.Geometry).to(mv).whenTargetNamed(wf.MERGED),y.bind(Kr.Material).to(L0).whenTargetNamed(iv.BASIC),y.bind(Kr.Renderable).to(vo).whenTargetNamed(ni.POINT),y.bind(Kr.Renderable).to(yb).whenTargetNamed(ni.LINE),y.bind(Kr.Renderable).to(Dg).whenTargetNamed(ni.GRID);var D=y.get(i);return D.setContainer(y),D.setConfig(g),D}}]),i}(),n1),t1=Bo(wb.prototype,"configService",[qb],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wb))||e1);const Nv=(i,c)=>{let g;return i?a(i)?g=()=>i:g=i:g=()=>c||1,g},b1=(i,c)=>{const g=[],y=[],E={};let D=0;for(D=0;D<i.length;D++){const K=i[D];E[K.id]=D,g.push(K.x),g.push(K.y),g.push(0),g.push(0),y.push([])}for(D=0;D<c.length;D++){const K=c[D],re=t(K,"source"),de=t(K,"target");y[E[re]].push(E[de]),y[E[de]].push(E[re])}let G=0;for(D=0;D<i.length;D++){const K=g.length,re=y[D],de=re.length;g[D*4+2]=K,g[D*4+3]=re.length,G=Math.max(G,re.length);for(let we=0;we<de;++we){const Pe=re[we];g.push(+Pe)}}for(;g.length%4!==0;)g.push(0);return{maxEdgePerVetex:G,array:new Float32Array(g)}},w1=(i,c,g,y)=>{const E=[],D=[],G={};let K=0;for(K=0;K<i.length;K++){const de=i[K];G[de.id]=K,E.push(de.x),E.push(de.y),E.push(0),E.push(0),D.push([])}for(K=0;K<c.length;K++){const de=c[K],we=t(de,"source"),Pe=t(de,"target");D[G[we]].push(G[Pe]),D[G[we]].push(g(de)),D[G[we]].push(y(de)),D[G[we]].push(0),D[G[Pe]].push(G[we]),D[G[Pe]].push(g(de)),D[G[Pe]].push(y(de)),D[G[Pe]].push(0)}let re=0;for(K=0;K<i.length;K++){const de=E.length,we=D[K],Pe=we.length;E[K*4+2]=de+1048576*Pe/4,E[K*4+3]=0,re=Math.max(re,Pe/4);for(let We=0;We<Pe;++We){const je=we[We];E.push(+je)}}for(;E.length%4!==0;)E.push(0);return{maxEdgePerVetex:re,array:new Float32Array(E)}},E1=(i,c)=>{const g=[],y=i.length,E={};return c.forEach(D=>{i.forEach((G,K)=>{if(E[D[G]]===void 0&&(E[D[G]]=Object.keys(E).length),g.push(E[D[G]]),K===y-1)for(;g.length%4!==0;)g.push(0)})}),{array:new Float32Array(g),count:Object.keys(E).length}},i1=i=>{const c=[],g=i.length,y=i[0].length;for(let E=0;E<y;E++)i.forEach((D,G)=>{if(c.push(D[E]),G===g-1)for(;c.length%4!==0;)c.push(0)});return new Float32Array(c)},X1=null,S1='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Y1=null,C1='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var Y0=function(i,c,g,y){function E(D){return D instanceof g?D:new g(function(G){G(D)})}return new(g||(g=Promise))(function(D,G){function K(we){try{de(y.next(we))}catch(Pe){G(Pe)}}function re(we){try{de(y.throw(we))}catch(Pe){G(Pe)}}function de(we){we.done?D(we.value):E(we.value).then(K,re)}de((y=y.apply(i,c||[])).next())})};class O1 extends fe{constructor(c){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(c)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return Y0(this,void 0,void 0,function*(){const c=this,g=c.nodes;if(!g||g.length===0){c.onLayoutEnd&&c.onLayoutEnd();return}!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight),c.center||(c.center=[c.width/2,c.height/2]);const y=c.center;if(g.length===1){g[0].x=y[0],g[0].y=y[1],c.onLayoutEnd&&c.onLayoutEnd();return}const E={},D={};g.forEach((G,K)=>{a(G.x)||(G.x=Math.random()*this.width),a(G.y)||(G.y=Math.random()*this.height),E[G.id]=G,D[G.id]=K}),c.nodeMap=E,c.nodeIdxMap=D,yield c.run()})}executeWithWorker(c,g){return Y0(this,void 0,void 0,function*(){const y=this,E=y.nodes,D=y.center;if(!E||E.length===0)return;if(E.length===1){E[0].x=D[0],E[0].y=D[1];return}const G={},K={};E.forEach((re,de)=>{a(re.x)||(re.x=Math.random()*this.width),a(re.y)||(re.y=Math.random()*this.height),G[re.id]=re,K[re.id]=de}),y.nodeMap=G,y.nodeIdxMap=K,yield y.run(c,g)})}run(c,g){return Y0(this,void 0,void 0,function*(){const y=this,E=y.nodes,D=y.edges,G=y.maxIteration,K=y.center,re=y.height*y.width;let de=Math.sqrt(re)/10;const we=re/(E.length+1),Pe=Math.sqrt(we),We=y.speed,je=y.clustering,{array:tt,count:Qe}=E1([y.clusterField],E);E.forEach((zr,Mi)=>{let si=0,mo=0;a(zr.fx)&&a(zr.fy)&&(si=zr.fx||.001,mo=zr.fy||.001),tt[4*Mi+1]=si,tt[4*Mi+2]=mo});const Je=E.length,{maxEdgePerVetex:yt,array:Nt}=b1(E,D),Jt=y.workerEnabled;let gn;Jt?gn=X0.create({canvas:c,engineOptions:{supportCompute:!0}}):gn=X0.create({engineOptions:{supportCompute:!0}});const dn=y.onLayoutEnd,Hn=[];for(let zr=0;zr<Qe;zr++)Hn.push(0,0,0,0);const Ur=gn.createKernel(S1).setDispatch([Je,1,1]).setBinding({u_Data:Nt,u_K:Pe,u_K2:we,u_Gravity:y.gravity,u_ClusterGravity:y.clusterGravity||y.gravity||1,u_Speed:We,u_MaxDisplace:de,u_Clustering:je?1:0,u_Center:K,u_AttributeArray:tt,u_ClusterCenters:Hn,MAX_EDGE_PER_VERTEX:yt,VERTEX_COUNT:Je});let Br;je&&(Br=gn.createKernel(C1).setDispatch([Qe,1,1]).setBinding({u_Data:Nt,u_NodeAttributes:tt,u_ClusterCenters:Hn,VERTEX_COUNT:Je,CLUSTER_COUNT:Qe})),yield(()=>Y0(this,void 0,void 0,function*(){for(let Mi=0;Mi<G;Mi++)yield Ur.execute(),je&&(Br.setBinding({u_Data:Ur}),yield Br.execute(),Ur.setBinding({u_ClusterCenters:Br})),Ur.setBinding({u_MaxDisplace:de*=.99});const zr=yield Ur.getOutput();c?g.postMessage({type:cr.GPUEND,vertexEdgeData:zr}):E.forEach((Mi,si)=>{const mo=zr[4*si],so=zr[4*si+1];Mi.x=mo,Mi.y=so}),dn&&dn()}))()})}getType(){return"fruchterman-gpu"}}const Z1=null,T1='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',K1=null,M1='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var Eb=function(i,c,g,y){function E(D){return D instanceof g?D:new g(function(G){G(D)})}return new(g||(g=Promise))(function(D,G){function K(we){try{de(y.next(we))}catch(Pe){G(Pe)}}function re(we){try{de(y.throw(we))}catch(Pe){G(Pe)}}function de(we){we.done?D(we.value):E(we.value).then(K,re)}de((y=y.apply(i,c||[])).next())})};class P1 extends fe{constructor(c){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(c)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return Eb(this,void 0,void 0,function*(){const c=this,g=c.nodes;if(!g||g.length===0){c.onLayoutEnd&&c.onLayoutEnd();return}!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight),c.center||(c.center=[c.width/2,c.height/2]);const y=c.center;if(g.length===1){g[0].x=y[0],g[0].y=y[1],c.onLayoutEnd&&c.onLayoutEnd();return}const E={},D={};g.forEach((G,K)=>{a(G.x)||(G.x=Math.random()*c.width),a(G.y)||(G.y=Math.random()*c.height),E[G.id]=G,D[G.id]=K}),c.nodeMap=E,c.nodeIdxMap=D,c.nodeStrength=Nv(c.nodeStrength,1),c.edgeStrength=Nv(c.edgeStrength,1),yield c.run()})}executeWithWorker(c,g){const y=this,E=y.nodes,D=y.center;if(!E||E.length===0)return;if(E.length===1){E[0].x=D[0],E[0].y=D[1];return}const G={},K={};E.forEach((re,de)=>{a(re.x)||(re.x=Math.random()*y.width),a(re.y)||(re.y=Math.random()*y.height),G[re.id]=re,K[re.id]=de}),y.nodeMap=G,y.nodeIdxMap=K,y.nodeStrength=Nv(y.nodeStrength,1),y.edgeStrength=Nv(y.edgeStrength,1),y.run(c,g)}run(c,g){return Eb(this,void 0,void 0,function*(){const y=this,E=y.nodes,D=y.edges,G=y.maxIteration;!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight);const K=E.length;y.linkDistance=Nv(y.linkDistance),y.edgeStrength=Nv(y.edgeStrength);const{maxEdgePerVetex:re,array:de}=w1(E,D,y.linkDistance,y.edgeStrength);y.degrees=s(E.length,y.nodeIdxMap,D);const we=[],Pe=[],We=[],je=[],tt=[],Qe=[],Je=[];y.getMass||(y.getMass=si=>y.degrees[y.nodeIdxMap[si.id]]||1);const yt=y.gravity,Nt=y.center;E.forEach((si,mo)=>{we.push(y.getMass(si)),Pe.push(y.nodeStrength(si)),y.degrees[mo]||(y.degrees[mo]=0);let so=[Nt[0],Nt[1],yt];if(y.getCenter){const Xo=y.getCenter(si,y.degrees[mo]);Xo&&a(Xo[0])&&a(Xo[1])&&a(Xo[2])&&(so=Xo)}We.push(so[0]),je.push(so[1]),tt.push(so[2]),a(si.fx)&&a(si.fy)?(Qe.push(si.fx||.001),Je.push(si.fy||.001)):(Qe.push(0),Je.push(0))});const Jt=i1([we,y.degrees,Pe,Qe]),gn=i1([We,je,tt,Je]),dn=y.workerEnabled;let Hn;dn?Hn=X0.create({canvas:c,engineOptions:{supportCompute:!0}}):Hn=X0.create({engineOptions:{supportCompute:!0}});const Ur=y.onLayoutEnd,Br=[];de.forEach(si=>{Br.push(si)});for(let si=0;si<4;si++)Br.push(0);const Hi=Hn.createKernel(T1).setDispatch([K,1,1]).setBinding({u_Data:de,u_damping:y.damping,u_maxSpeed:y.maxSpeed,u_minMovement:y.minMovement,u_coulombDisScale:y.coulombDisScale,u_factor:y.factor,u_NodeAttributeArray1:Jt,u_NodeAttributeArray2:gn,MAX_EDGE_PER_VERTEX:re,VERTEX_COUNT:K,u_AveMovement:Br,u_interval:y.interval}),zr=Hn.createKernel(M1).setDispatch([1,1,1]).setBinding({u_Data:de,VERTEX_COUNT:K,u_AveMovement:[0,0,0,0]});yield(()=>Eb(this,void 0,void 0,function*(){for(let mo=0;mo<G;mo++){yield Hi.execute(),zr.setBinding({u_Data:Hi}),yield zr.execute();const so=Math.max(.02,y.interval-mo*.002);Hi.setBinding({u_interval:so,u_AveMovement:zr})}const si=yield Hi.getOutput();c?g.postMessage({type:cr.GPUEND,vertexEdgeData:si}):E.forEach((mo,so)=>{const Xo=si[4*so],Wa=si[4*so+1];mo.x=Xo,mo.y=Wa}),Ur&&Ur()}))()})}getType(){return"gForce-gpu"}}class A1 extends fe{constructor(c){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(c)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const c=this,g=c.nodes,y=c.center;if(c.comboTree={id:"comboTreeRoot",depth:-1,children:c.comboTrees},!g||g.length===0){c.onLayoutEnd&&c.onLayoutEnd();return}if(g.length===1){g[0].x=y[0],g[0].y=y[1],c.onLayoutEnd&&c.onLayoutEnd();return}c.initVals(),c.run(),c.onLayoutEnd&&c.onLayoutEnd()}run(){const c=this,g=c.nodes,y=c.previousLayouted?c.maxIteration/5:c.maxIteration;!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight);const E=c.center,D=c.velocityDecay,G=c.comboMap;c.previousLayouted||c.initPos(G);for(let de=0;de<y;de++){const we=[];g.forEach((Pe,We)=>{we[We]={x:0,y:0}}),c.applyCalculate(we),c.applyComboCenterForce(we),g.forEach((Pe,We)=>{!a(Pe.x)||!a(Pe.y)||(Pe.x+=we[We].x*D,Pe.y+=we[We].y*D)}),c.alpha+=(c.alphaTarget-c.alpha)*c.alphaDecay,c.onTick()}const K=[0,0];g.forEach(de=>{!a(de.x)||!a(de.y)||(K[0]+=de.x,K[1]+=de.y)}),K[0]/=g.length,K[1]/=g.length;const re=[E[0]-K[0],E[1]-K[1]];g.forEach((de,we)=>{!a(de.x)||!a(de.y)||(de.x+=re[0],de.y+=re[1])}),c.combos.forEach(de=>{const we=G[de.id];we&&we.empty&&(de.x=we.cx||de.x,de.y=we.cy||de.y)}),c.previousLayouted=!0}initVals(){const c=this,g=c.edges,y=c.nodes,E=c.combos,D={},G={},K={};y.forEach((zr,Mi)=>{G[zr.id]=zr,K[zr.id]=Mi}),c.nodeMap=G,c.indexMap=K;const re={};E.forEach(zr=>{re[zr.id]=zr}),c.oriComboMap=re,c.comboMap=c.getComboMap();const de=c.preventOverlap;c.preventComboOverlap=c.preventComboOverlap||de,c.preventNodeOverlap=c.preventNodeOverlap||de;const we=c.collideStrength;we&&(c.comboCollideStrength=we,c.nodeCollideStrength=we),c.comboCollideStrength=c.comboCollideStrength?c.comboCollideStrength:0,c.nodeCollideStrength=c.nodeCollideStrength?c.nodeCollideStrength:0;for(let zr=0;zr<g.length;++zr){const Mi=t(g[zr],"source"),si=t(g[zr],"target");D[Mi]?D[Mi]++:D[Mi]=1,D[si]?D[si]++:D[si]=1}const Pe=[];for(let zr=0;zr<g.length;++zr){const Mi=t(g[zr],"source"),si=t(g[zr],"target");Pe[zr]=D[Mi]/(D[Mi]+D[si])}this.bias=Pe;const We=c.nodeSize,je=c.nodeSpacing;let tt,Qe;if(a(je)?Qe=()=>je:N(je)?Qe=je:Qe=()=>0,this.nodeSpacing=Qe,!We)tt=zr=>zr.size?u(zr.size)?(zr.size[0]>zr.size[1]?zr.size[0]:zr.size[1])/2:r(zr.size)?(zr.size.width>zr.size.height?zr.size.width:zr.size.height)/2:zr.size/2:10;else if(N(We))tt=zr=>We(zr);else if(u(We)){const Mi=(We[0]>We[1]?We[0]:We[1])/2;tt=si=>Mi}else{const zr=We/2;tt=Mi=>zr}this.nodeSize=tt;const Je=c.comboSpacing;let yt;a(Je)?yt=()=>Je:N(Je)?yt=Je:yt=()=>0,this.comboSpacing=yt;const Nt=c.comboPadding;let Jt;a(Nt)?Jt=()=>Nt:u(Nt)?Jt=()=>Math.max.apply(null,Nt):N(Nt)?Jt=Nt:Jt=()=>0,this.comboPadding=Jt;let gn=this.linkDistance,dn;gn||(gn=10),a(gn)?dn=zr=>gn:dn=gn,this.linkDistance=dn;let Hn=this.edgeStrength,Ur;Hn||(Hn=1),a(Hn)?Ur=zr=>Hn:Ur=Hn,this.edgeStrength=Ur;let Br=this.nodeStrength,Hi;Br||(Br=30),a(Br)?Hi=zr=>Br:Hi=Br,this.nodeStrength=Hi}initPos(c){this.nodes.forEach((E,D)=>{const G=E.comboId,K=c[G];G&&K?(E.x=K.cx+100/(D+1),E.y=K.cy+100/(D+1)):(E.x=100/(D+1),E.y=100/(D+1))})}getComboMap(){const c=this,g=c.nodeMap,y=c.comboTrees,E=c.oriComboMap,D={};return(y||[]).forEach(G=>{const K=[];x(G,re=>{if(re.itemType==="node"||!E[re.id])return!0;if(D[re.id]===void 0){const Pe={id:re.id,name:re.id,cx:0,cy:0,count:0,depth:c.oriComboMap[re.id].depth||0,children:[]};D[re.id]=Pe}const de=re.children;de&&de.forEach(Pe=>{if(!D[Pe.id]&&!g[Pe.id])return!0;K.push(Pe)});const we=D[re.id];if(we.cx=0,we.cy=0,K.length===0){we.empty=!0;const Pe=E[re.id];we.cx=Pe.x,we.cy=Pe.y}return K.forEach(Pe=>{if(we.count++,Pe.itemType!=="node"){const je=D[Pe.id];a(je.cx)&&(we.cx+=je.cx),a(je.cy)&&(we.cy+=je.cy);return}const We=g[Pe.id];We&&(a(We.x)&&(we.cx+=We.x),a(We.y)&&(we.cy+=We.y))}),we.cx/=we.count||1,we.cy/=we.count||1,we.children=K,!0})}),D}applyComboCenterForce(c){const g=this,y=g.gravity,E=g.comboGravity||y,D=this.alpha,G=g.comboTrees,K=g.indexMap,re=g.nodeMap,de=g.comboMap;(G||[]).forEach(we=>{x(we,Pe=>{if(Pe.itemType==="node"||!de[Pe.id])return!0;const je=de[Pe.id],tt=(je.depth+1)/10*.5,Qe=je.cx,Je=je.cy;return je.cx=0,je.cy=0,je.children.forEach(yt=>{if(yt.itemType!=="node"){const Br=de[yt.id];Br&&a(Br.cx)&&(je.cx+=Br.cx),Br&&a(Br.cy)&&(je.cy+=Br.cy);return}const Nt=re[yt.id],Jt=Nt.x-Qe||.005,gn=Nt.y-Je||.005,dn=Math.sqrt(Jt*Jt+gn*gn),Hn=K[Nt.id],Ur=E*D/dn*tt;c[Hn].x-=Jt*Ur,c[Hn].y-=gn*Ur,a(Nt.x)&&(je.cx+=Nt.x),a(Nt.y)&&(je.cy+=Nt.y)}),je.cx/=je.count||1,je.cy/=je.count||1,!0})})}applyCalculate(c){const g=this,y=g.comboMap,E=g.nodes,D={};E.forEach((K,re)=>{E.forEach((de,we)=>{if(re<we)return;const Pe=K.x-de.x||.005,We=K.y-de.y||.005;let je=Pe*Pe+We*We;const tt=Math.sqrt(je);je<1&&(je=tt),D[`${K.id}-${de.id}`]={vx:Pe,vy:We,vl2:je,vl:tt},D[`${de.id}-${K.id}`]={vl2:je,vl:tt,vx:-Pe,vy:-We}})}),g.updateComboSizes(y),g.calRepulsive(c,D),g.calAttractive(c,D),g.preventComboOverlap&&g.comboNonOverlapping(c,y)}updateComboSizes(c){const g=this,y=g.comboTrees,E=g.nodeMap,D=g.nodeSize,G=g.comboSpacing,K=g.comboPadding;(y||[]).forEach(re=>{const de=[];x(re,we=>{if(we.itemType==="node")return!0;const Pe=c[we.id];if(!Pe)return!1;const We=we.children;We&&We.forEach(Qe=>{!c[Qe.id]&&!E[Qe.id]||de.push(Qe)}),Pe.minX=1/0,Pe.minY=1/0,Pe.maxX=-1/0,Pe.maxY=-1/0,de.forEach(Qe=>{if(Qe.itemType!=="node")return!0;const Je=E[Qe.id];if(!Je)return!0;const yt=D(Je),Nt=Je.x-yt,Jt=Je.y-yt,gn=Je.x+yt,dn=Je.y+yt;Pe.minX>Nt&&(Pe.minX=Nt),Pe.minY>Jt&&(Pe.minY=Jt),Pe.maxX<gn&&(Pe.maxX=gn),Pe.maxY<dn&&(Pe.maxY=dn)});let je=g.oriComboMap[we.id].size||10;u(je)&&(je=je[0]);const tt=Math.max(Pe.maxX-Pe.minX,Pe.maxY-Pe.minY,je);return Pe.r=tt/2+G(Pe)/2+K(Pe),!0})})}comboNonOverlapping(c,g){const y=this,E=y.comboTree,D=y.comboCollideStrength,G=y.indexMap,K=y.nodeMap;x(E,re=>{if(!g[re.id]&&!K[re.id]&&re.id!=="comboTreeRoot")return!1;const de=re.children;return de&&de.length>1&&de.forEach((we,Pe)=>{if(we.itemType==="node")return!1;const We=g[we.id];We&&de.forEach((je,tt)=>{if(Pe<=tt||je.itemType==="node")return!1;const Qe=g[je.id];if(!Qe)return!1;const Je=We.cx-Qe.cx||.005,yt=We.cy-Qe.cy||.005,Nt=Je*Je+yt*yt,Jt=We.r||1,gn=Qe.r||1,dn=Jt+gn,Hn=gn*gn,Ur=Jt*Jt;if(Nt<dn*dn){const Br=we.children;if(!Br||Br.length===0)return!1;const Hi=je.children;if(!Hi||Hi.length===0)return!1;const zr=Math.sqrt(Nt),Mi=(dn-zr)/zr*D,si=Je*Mi,mo=yt*Mi,so=Hn/(Ur+Hn),Xo=1-so;Br.forEach(Wa=>{if(Wa.itemType!=="node")return!1;if(!K[Wa.id])return;const ac=G[Wa.id];Hi.forEach(ia=>{if(ia.itemType!=="node"||!K[ia.id])return!1;const Tf=G[ia.id];c[ac].x+=si*so,c[ac].y+=mo*so,c[Tf].x-=si*Xo,c[Tf].y-=mo*Xo})})}})}),!0})}calRepulsive(c,g){const y=this,E=y.nodes,D=y.width*y.optimizeRangeFactor,G=y.nodeStrength,K=y.alpha,re=y.nodeCollideStrength,de=y.preventNodeOverlap,we=y.nodeSize,Pe=y.nodeSpacing,We=y.depthRepulsiveForceScale,je=y.center;E.forEach((tt,Qe)=>{if(!(!tt.x||!tt.y)){if(je){const Je=y.gravity,yt=tt.x-je[0]||.005,Nt=tt.y-je[1]||.005,Jt=Math.sqrt(yt*yt+Nt*Nt);c[Qe].x-=yt*Je*K/Jt,c[Qe].y-=Nt*Je*K/Jt}E.forEach((Je,yt)=>{if(Qe===yt||!Je.x||!Je.y)return;const{vl2:Nt,vl:Jt}=g[`${tt.id}-${Je.id}`];if(Jt>D)return;const{vx:gn,vy:dn}=g[`${tt.id}-${Je.id}`];let Hn=Math.log(Math.abs(Je.depth-tt.depth)/10)+1||1;Hn=Hn<1?1:Hn,Je.comboId!==tt.comboId&&(Hn+=1);const Ur=Hn?Math.pow(We,Hn):1,Br=G(Je)*K/Nt*Ur;if(c[Qe].x+=gn*Br,c[Qe].y+=dn*Br,Qe<yt&&de){const Hi=we(tt)+Pe(tt)||1,zr=we(Je)+Pe(Je)||1,Mi=Hi+zr;if(Nt<Mi*Mi){const si=(Mi-Jt)/Jt*re,mo=zr*zr;let so=mo/(Hi*Hi+mo);const Xo=gn*si,Wa=dn*si;c[Qe].x+=Xo*so,c[Qe].y+=Wa*so,so=1-so,c[yt].x-=Xo*so,c[yt].y-=Wa*so}}})}})}calAttractive(c,g){const y=this,E=y.edges,D=y.linkDistance,G=y.alpha,K=y.edgeStrength,re=y.bias,de=y.depthAttractiveForceScale;E.forEach((we,Pe)=>{const We=t(we,"source"),je=t(we,"target");if(!We||!je||We===je)return;const tt=y.indexMap[We],Qe=y.indexMap[je],Je=y.nodeMap[We],yt=y.nodeMap[je];if(!Je||!yt)return;let Nt=Je.depth===yt.depth?0:Math.log(Math.abs(Je.depth-yt.depth)/10);Je.comboId===yt.comboId&&(Nt=Nt/2);let Jt=Nt?Math.pow(de,Nt):1;if(Je.comboId!==yt.comboId&&Jt===1?Jt=de/2:Je.comboId===yt.comboId&&(Jt=2),!a(yt.x)||!a(Je.x)||!a(yt.y)||!a(Je.y))return;const{vl:gn,vx:dn,vy:Hn}=g[`${je}-${We}`],Ur=(gn-D(we))/gn*G*K(we)*Jt,Br=dn*Ur,Hi=Hn*Ur,zr=re[Pe];c[Qe].x-=Br*zr,c[Qe].y-=Hi*zr,c[tt].x+=Br*(1-zr),c[tt].y+=Hi*(1-zr)})}getType(){return"comboForce"}}class xb{constructor(c){this.id=c.id||0,this.rx=c.rx,this.ry=c.ry,this.fx=0,this.fy=0,this.mass=c.mass,this.degree=c.degree,this.g=c.g||0}distanceTo(c){const g=this.rx-c.rx,y=this.ry-c.ry;return Math.hypot(g,y)}setPos(c,g){this.rx=c,this.ry=g}resetForce(){this.fx=0,this.fy=0}addForce(c){const g=c.rx-this.rx,y=c.ry-this.ry;let E=Math.hypot(g,y);E=E<1e-4?1e-4:E;const D=this.g*(this.degree+1)*(c.degree+1)/E;this.fx+=D*g/E,this.fy+=D*y/E}in(c){return c.contains(this.rx,this.ry)}add(c){const g=this.mass+c.mass,y=(this.rx*this.mass+c.rx*c.mass)/g,E=(this.ry*this.mass+c.ry*c.mass)/g,D=this.degree+c.degree,G={rx:y,ry:E,mass:g,degree:D};return new xb(G)}}class Iv{constructor(c){this.xmid=c.xmid,this.ymid=c.ymid,this.length=c.length,this.massCenter=c.massCenter||[0,0],this.mass=c.mass||1}getLength(){return this.length}contains(c,g){const y=this.length/2;return c<=this.xmid+y&&c>=this.xmid-y&&g<=this.ymid+y&&g>=this.ymid-y}NW(){const c=this.xmid-this.length/4,g=this.ymid+this.length/4,y=this.length/2,E={xmid:c,ymid:g,length:y};return new Iv(E)}NE(){const c=this.xmid+this.length/4,g=this.ymid+this.length/4,y=this.length/2,E={xmid:c,ymid:g,length:y};return new Iv(E)}SW(){const c=this.xmid-this.length/4,g=this.ymid-this.length/4,y=this.length/2,E={xmid:c,ymid:g,length:y};return new Iv(E)}SE(){const c=this.xmid+this.length/4,g=this.ymid-this.length/4,y=this.length/2,E={xmid:c,ymid:g,length:y};return new Iv(E)}}class Rv{constructor(c){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,c!=null&&(this.quad=c)}insert(c){if(this.body==null){this.body=c;return}this._isExternal()?(this.quad&&(this.NW=new Rv(this.quad.NW()),this.NE=new Rv(this.quad.NE()),this.SW=new Rv(this.quad.SW()),this.SE=new Rv(this.quad.SE())),this._putBody(this.body),this._putBody(c),this.body=this.body.add(c)):(this.body=this.body.add(c),this._putBody(c))}_putBody(c){this.quad&&(c.in(this.quad.NW())&&this.NW?this.NW.insert(c):c.in(this.quad.NE())&&this.NE?this.NE.insert(c):c.in(this.quad.SW())&&this.SW?this.SW.insert(c):c.in(this.quad.SE())&&this.SE&&this.SE.insert(c))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(c){if(!(this.body==null||c===this.body))if(this._isExternal())c.addForce(this.body);else{const g=this.quad?this.quad.getLength():0,y=this.body.distanceTo(c);g/y<this.theta?c.addForce(this.body):(this.NW&&this.NW.updateForce(c),this.NE&&this.NE.updateForce(c),this.SW&&this.SW.updateForce(c),this.SE&&this.SE.updateForce(c))}}}class _1 extends fe{constructor(c){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(c)}getDefaultCfg(){return{}}execute(){const c=this,{nodes:g,onLayoutEnd:y,prune:E}=c;let D=c.maxIteration;!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight);const G=[],K=g.length;for(let re=0;re<K;re+=1){const de=g[re];let we=10,Pe=10;a(de.size)&&(we=de.size,Pe=de.size),u(de.size)?(isNaN(de.size[0])||(we=de.size[0]),isNaN(de.size[1])||(Pe=de.size[1])):r(de.size)&&(we=de.size.width,Pe=de.size.height),c.getWidth&&!isNaN(c.getWidth(de))&&(Pe=c.getWidth(de)),c.getHeight&&!isNaN(c.getHeight(de))&&(we=c.getHeight(de));const We=Math.max(we,Pe);G.push(We)}c.barnesHut===void 0&&K>250&&(c.barnesHut=!0),c.prune===void 0&&K>100&&(c.prune=!0),this.maxIteration===0&&!c.prune?(D=250,K<=200&&K>100?D=1e3:K>200&&(D=1200),this.maxIteration=D):this.maxIteration===0&&E&&(D=100,K<=200&&K>100?D=500:K>200&&(D=950),this.maxIteration=D),c.kr||(c.kr=50,K>100&&K<=500?c.kr=20:K>500&&(c.kr=1)),c.kg||(c.kg=20,K>100&&K<=500?c.kg=10:K>500&&(c.kg=1)),this.nodes=c.updateNodesByForces(G),y()}updateNodesByForces(c){const g=this,{edges:y,maxIteration:E}=g;let D=g.nodes;const G=y.filter(tt=>{const Qe=t(tt,"source"),Je=t(tt,"target");return Qe!==Je}),K=D.length,re=G.length,de=[],we={},Pe={},We=[];for(let tt=0;tt<K;tt+=1)we[D[tt].id]=tt,de[tt]=0,(D[tt].x===void 0||isNaN(D[tt].x))&&(D[tt].x=Math.random()*1e3),(D[tt].y===void 0||isNaN(D[tt].y))&&(D[tt].y=Math.random()*1e3),We.push({x:D[tt].x,y:D[tt].y});for(let tt=0;tt<re;tt+=1){let Qe,Je,yt=0,Nt=0;for(let Jt=0;Jt<K;Jt+=1){const gn=t(G[tt],"source"),dn=t(G[tt],"target");D[Jt].id===gn?(Qe=D[Jt],yt=Jt):D[Jt].id===dn&&(Je=D[Jt],Nt=Jt),Pe[tt]={sourceIdx:yt,targetIdx:Nt}}Qe&&(de[we[Qe.id]]+=1),Je&&(de[we[Je.id]]+=1)}let je=E;if(D=this.iterate(je,we,Pe,re,de,c),g.prune){for(let tt=0;tt<re;tt+=1)de[Pe[tt].sourceIdx]<=1?(D[Pe[tt].sourceIdx].x=D[Pe[tt].targetIdx].x,D[Pe[tt].sourceIdx].y=D[Pe[tt].targetIdx].y):de[Pe[tt].targetIdx]<=1&&(D[Pe[tt].targetIdx].x=D[Pe[tt].sourceIdx].x,D[Pe[tt].targetIdx].y=D[Pe[tt].sourceIdx].y);g.prune=!1,g.barnesHut=!1,je=100,D=this.iterate(je,we,Pe,re,de,c)}return D}iterate(c,g,y,E,D,G){const K=this;let{nodes:re}=K;const{kr:de,preventOverlap:we}=K,{barnesHut:Pe}=K,We=re.length;let je=0;const tt=100;let Qe=c;const Je=50;let yt=[];const Nt=[],Jt=[];for(let gn=0;gn<We;gn+=1)if(yt[2*gn]=0,yt[2*gn+1]=0,Pe){const dn={id:gn,rx:re[gn].x,ry:re[gn].y,mass:1,g:de,degree:D[gn]};Jt[gn]=new xb(dn)}for(;Qe>0;){for(let dn=0;dn<We;dn+=1)Nt[2*dn]=yt[2*dn],Nt[2*dn+1]=yt[2*dn+1],yt[2*dn]=0,yt[2*dn+1]=0;yt=this.getAttrForces(Qe,Je,E,g,y,D,G,yt),Pe&&(we&&Qe>Je||!we)?yt=this.getOptRepGraForces(yt,Jt,D):yt=this.getRepGraForces(Qe,Je,yt,tt,G,D);const gn=this.updatePos(yt,Nt,je,D);re=gn.nodes,je=gn.sg,Qe--,K.tick&&K.tick()}return re}getAttrForces(c,g,y,E,D,G,K,re){const de=this,{nodes:we,preventOverlap:Pe,dissuadeHubs:We,mode:je,prune:tt}=de;for(let Qe=0;Qe<y;Qe+=1){const Je=we[D[Qe].sourceIdx],yt=D[Qe].sourceIdx,Nt=we[D[Qe].targetIdx],Jt=D[Qe].targetIdx;if(tt&&(G[yt]<=1||G[Jt]<=1))continue;const gn=[Nt.x-Je.x,Nt.y-Je.y];let dn=Math.hypot(gn[0],gn[1]);dn=dn<1e-4?1e-4:dn,gn[0]=gn[0]/dn,gn[1]=gn[1]/dn,Pe&&c<g&&(dn=dn-K[yt]-K[Jt]);let Hn=dn,Ur=Hn;je==="linlog"&&(Hn=Math.log(1+dn),Ur=Hn),We&&(Hn=dn/G[yt],Ur=dn/G[Jt]),Pe&&c<g&&dn<=0?(Hn=0,Ur=0):Pe&&c<g&&dn>0&&(Hn=dn,Ur=dn),re[2*E[Je.id]]+=Hn*gn[0],re[2*E[Nt.id]]-=Ur*gn[0],re[2*E[Je.id]+1]+=Hn*gn[1],re[2*E[Nt.id]+1]-=Ur*gn[1]}return re}getRepGraForces(c,g,y,E,D,G){const K=this,{nodes:re,preventOverlap:de,kr:we,kg:Pe,center:We,prune:je}=K,tt=re.length;for(let Qe=0;Qe<tt;Qe+=1){for(let Jt=Qe+1;Jt<tt;Jt+=1){if(je&&(G[Qe]<=1||G[Jt]<=1))continue;const gn=[re[Jt].x-re[Qe].x,re[Jt].y-re[Qe].y];let dn=Math.hypot(gn[0],gn[1]);dn=dn<1e-4?1e-4:dn,gn[0]=gn[0]/dn,gn[1]=gn[1]/dn,de&&c<g&&(dn=dn-D[Qe]-D[Jt]);let Hn=we*(G[Qe]+1)*(G[Jt]+1)/dn;de&&c<g&&dn<0?Hn=E*(G[Qe]+1)*(G[Jt]+1):de&&c<g&&dn===0?Hn=0:de&&c<g&&dn>0&&(Hn=we*(G[Qe]+1)*(G[Jt]+1)/dn),y[2*Qe]-=Hn*gn[0],y[2*Jt]+=Hn*gn[0],y[2*Qe+1]-=Hn*gn[1],y[2*Jt+1]+=Hn*gn[1]}const Je=[re[Qe].x-We[0],re[Qe].y-We[1]],yt=Math.hypot(Je[0],Je[1]);Je[0]=Je[0]/yt,Je[1]=Je[1]/yt;const Nt=Pe*(G[Qe]+1);y[2*Qe]-=Nt*Je[0],y[2*Qe+1]-=Nt*Je[1]}return y}getOptRepGraForces(c,g,y){const E=this,{nodes:D,kg:G,center:K,prune:re}=E,de=D.length;let we=9e10,Pe=-9e10,We=9e10,je=-9e10;for(let Nt=0;Nt<de;Nt+=1)re&&y[Nt]<=1||(g[Nt].setPos(D[Nt].x,D[Nt].y),D[Nt].x>=Pe&&(Pe=D[Nt].x),D[Nt].x<=we&&(we=D[Nt].x),D[Nt].y>=je&&(je=D[Nt].y),D[Nt].y<=We&&(We=D[Nt].y));const tt=Math.max(Pe-we,je-We),Qe={xmid:(Pe+we)/2,ymid:(je+We)/2,length:tt,massCenter:K,mass:de},Je=new Iv(Qe),yt=new Rv(Je);for(let Nt=0;Nt<de;Nt+=1)re&&y[Nt]<=1||g[Nt].in(Je)&&yt.insert(g[Nt]);for(let Nt=0;Nt<de;Nt+=1){if(re&&y[Nt]<=1)continue;g[Nt].resetForce(),yt.updateForce(g[Nt]),c[2*Nt]-=g[Nt].fx,c[2*Nt+1]-=g[Nt].fy;const Jt=[D[Nt].x-K[0],D[Nt].y-K[1]];let gn=Math.hypot(Jt[0],Jt[1]);gn=gn<1e-4?1e-4:gn,Jt[0]=Jt[0]/gn,Jt[1]=Jt[1]/gn;const dn=G*(y[Nt]+1);c[2*Nt]-=dn*Jt[0],c[2*Nt+1]-=dn*Jt[1]}return c}updatePos(c,g,y,E){const D=this,{nodes:G,ks:K,tao:re,prune:de,ksmax:we}=D,Pe=G.length,We=[],je=[];let tt=0,Qe=0;for(let yt=0;yt<Pe;yt+=1){if(de&&E[yt]<=1)continue;const Nt=[c[2*yt]-g[2*yt],c[2*yt+1]-g[2*yt+1]],Jt=Math.hypot(Nt[0],Nt[1]),gn=[c[2*yt]+g[2*yt],c[2*yt+1]+g[2*yt+1]],dn=Math.hypot(gn[0],gn[1]);We[yt]=Jt,je[yt]=dn/2,tt+=(E[yt]+1)*We[yt],Qe+=(E[yt]+1)*je[yt]}const Je=y;y=re*Qe/tt,Je!==0&&(y=y>1.5*Je?1.5*Je:y);for(let yt=0;yt<Pe;yt+=1){if(de&&E[yt]<=1)continue;let Nt=K*y/(1+y*Math.sqrt(We[yt])),Jt=Math.hypot(c[2*yt],c[2*yt+1]);Jt=Jt<1e-4?1e-4:Jt;const gn=we/Jt;Nt=Nt>gn?gn:Nt;const dn=Nt*c[2*yt],Hn=Nt*c[2*yt+1];G[yt].x+=dn,G[yt].y+=Hn}return{nodes:G,sg:y}}}class Qh{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(c,g,y){this.cells=[],this.CELL_W=y.CELL_W||Qh.DEFAULT_CELL_W,this.CELL_H=y.CELL_H||Qh.DEFAULT_CELL_H,this.columnNum=Math.ceil(c/this.CELL_W),this.rowNum=Math.ceil(g/this.CELL_H),Qh.MIN_DIST=Math.pow(c,2)+Math.pow(g,2);for(let E=0;E<this.columnNum;E++){const D=[];for(let G=0;G<this.rowNum;G++){const K={dx:E,dy:G,x:E*this.CELL_W,y:G*this.CELL_H,occupied:!1};D.push(K)}this.cells.push(D)}}findGridByNodeId(c){var g,y;for(let E=0;E<this.columnNum;E++)for(let D=0;D<this.rowNum;D++)if(this.cells[E][D].node&&((y=(g=this.cells[E][D])===null||g===void 0?void 0:g.node)===null||y===void 0?void 0:y.id)===c)return{column:E,row:D};return null}sqdist(c,g){return Math.pow(c.x-g.x,2)+Math.pow(c.y-g.y,2)}occupyNearest(c){let g=Qh.MIN_DIST,y,E=null;for(let D=0;D<this.columnNum;D++)for(let G=0;G<this.rowNum;G++)!this.cells[D][G].occupied&&(y=this.sqdist(c,this.cells[D][G]))<g&&(g=y,E=this.cells[D][G]);return E&&(E.occupied=!0),E}insertColumn(c,g){if(!(g<=0)){for(let y=0;y<g;y++){this.cells[y+this.columnNum]=[];for(let E=0;E<this.rowNum;E++)this.cells[y+this.columnNum][E]={dx:y,dy:E,x:y*this.CELL_W,y:E*this.CELL_H,occupied:!1,node:null}}for(let y=this.columnNum-1;y>c;y--)for(let E=0;E<this.rowNum;E++)this.cells[y+g][E]=Object.assign(Object.assign({},this.cells[y][E]),{x:(y+g)*this.CELL_W,y:E*this.CELL_H}),this.cells[y][E]={x:y*this.CELL_W,y:E*this.CELL_H,occupied:!0,node:null};for(let y=0;y<this.additionColumn.length;y++)this.additionColumn[y]>=c&&(this.additionColumn[y]+=g);for(let y=0;y<g;y++)this.additionColumn.push(c+y+1);this.columnNum+=g}}insertRow(c,g){if(!(g<=0)){for(let y=0;y<g;y++)for(let E=0;E<this.columnNum;E++)this.cells[E][y+this.rowNum]={dx:E,dy:y,x:E*this.CELL_W,y:y*this.CELL_H,occupied:!1,node:null};for(let y=0;y<this.columnNum;y++)for(let E=this.rowNum-1;E>c;E--)this.cells[y][E+g]=Object.assign(Object.assign({},this.cells[y][E]),{dx:y,dy:E+g,x:y*this.CELL_W,y:(E+g)*this.CELL_H}),this.cells[y][E]={dx:y,dy:E,x:y*this.CELL_W,y:E*this.CELL_H,occupied:!1,node:null};for(let y=0;y<this.additionRow.length;y++)this.additionRow[y]>=c&&(this.additionRow[y]+=g);for(let y=0;y<g;y++)this.additionRow.push(c+y+1);this.rowNum+=g}}getNodes(){const c=[];for(let g=0;g<this.columnNum;g++)for(let y=0;y<this.rowNum;y++)this.cells[g][y].node&&c.push(this.cells[g][y]);return c}}Qh.MIN_DIST=50,Qh.DEFAULT_CELL_W=80,Qh.DEFAULT_CELL_H=80;function D1(i,c){if(!i.nodes||i.nodes.length===0)return i;const g=c.width,y=c.height,E=c.nodeMinGap;let D=1e4,G=1e4;i.nodes.forEach(re=>{const de=re.size[0]||50,we=re.size[1]||50;D=Math.min(de,D),G=Math.min(we,G)});const K=new Qh;K.init(g,y,{CELL_H:G,CELL_W:D}),i.nodes.forEach(re=>{const de=K.occupyNearest(re);de&&(de.node={id:re.id,size:re.size},re.x=de.x,re.y=de.y,re.dx=de.dx,re.dy=de.dy)});for(let re=0;re<i.nodes.length;re++){const de=i.nodes[re],we=K.findGridByNodeId(de.id);if(!we)throw new Error("can not find node cell");const{column:Pe,row:We}=we;if(de.size[0]+E>D){const je=Math.ceil((de.size[0]+E)/D)-1;let tt=je;for(let Qe=0;Qe<je&&(K.additionColumn.indexOf(Pe+Qe+1)>-1&&!K.cells[Pe+Qe+1][We].node);Qe++)tt--;K.insertColumn(Pe,tt)}if(de.size[1]+E>G){const je=Math.ceil((de.size[1]+E)/G)-1;let tt=je;for(let Qe=0;Qe<je&&(K.additionRow.indexOf(We+Qe+1)>-1&&!K.cells[Pe][We+Qe+1].node);Qe++)tt--;K.insertRow(We,tt)}}for(let re=0;re<K.columnNum;re++)for(let de=0;de<K.rowNum;de++){const we=K.cells[re][de];if(we.node){const Pe=i.nodes.find(We=>{var je;return We.id===((je=we==null?void 0:we.node)===null||je===void 0?void 0:je.id)});Pe&&(Pe.x=we.x+Pe.size[0]/2,Pe.y=we.y+Pe.size[1]/2)}}}const o1=1200,s1=800,Z0=1e7,oy=10,a1=3.141592653589793,Sb=1.5707963267948966,N1=a1*.375,I1=a1*.625,K0=new Map,R1=10,L1=10;let Cb=.8;const u1=.1,B1=.5;function k1(i,c,g){const y=i.x-i.size[0]/2,E=i.y-i.size[1]/2,D=i.x+i.size[0]/2,G=i.y+i.size[1]/2,K=c.x-c.size[0]/2,re=c.y-c.size[1]/2,de=c.x+c.size[0]/2,we=c.y+c.size[1]/2,Pe=i.x,We=i.y,je=c.x,tt=c.y,Qe=je-Pe,Je=Math.atan2(Qe,tt-We);let yt=0,Nt=0,Jt=0,gn=0;Je>Sb?(Nt=E-we,yt=K-D,Jt=parseFloat(Nt?(Nt/Math.cos(Je)).toFixed(2):yt.toFixed(2)),gn=parseFloat(yt?(yt/Math.sin(Je)).toFixed(2):Nt.toFixed(2))):0<Je&&Je<=Sb?(Nt=re-G,yt=K-D,Nt>yt?Jt=gn=parseFloat(Nt?(Nt/Math.cos(Je)).toFixed(2):yt.toFixed(2)):Jt=gn=parseFloat(yt?(yt/Math.sin(Je)).toFixed(2):Nt.toFixed(2))):Je<-Sb?(Nt=E-we,yt=-(de-y),Nt>yt?Jt=gn=parseFloat(Nt?(Nt/Math.cos(Je)).toFixed(2):yt.toFixed(2)):Jt=gn=parseFloat(yt?(yt/Math.sin(Je)).toFixed(2):Nt.toFixed(2))):(Nt=re-G,Math.abs(Qe)>(D-y)/2?yt=y-de:yt=Qe,Nt>yt?Jt=gn=parseFloat(Nt?(Nt/Math.cos(Je)).toFixed(2):yt.toFixed(2)):Jt=gn=parseFloat(yt&&Je!==0?(yt/Math.sin(Je)).toFixed(2):Nt.toFixed(2)));const dn=parseFloat(Je.toFixed(2));let Hn=g;return g&&(Hn=N1<dn&&dn<I1),{distance:Math.abs(Jt<gn?Jt:gn),isHoriz:Hn}}function c1(i,c){const y=(K0.get(i.id)||[]).find(Ur=>Ur.source===c.id||Ur.target===c.id),E=i.size[0]*i.size[1],D=c.size[0]*c.size[1],G=E>D?c:i,K=E>D?i:c,re=G.x-G.size[0]/2,de=G.y-G.size[1]/2,we=G.x+G.size[0]/2,Pe=G.y+G.size[1]/2,We=K.x-K.size[0]/2,je=K.y-K.size[1]/2,tt=K.x+K.size[0]/2,Qe=K.y+K.size[1]/2,Je=G.x,yt=G.y,Nt=K.x,Jt=K.y,gn=we>=We&&tt>=re&&Pe>=je&&Qe>=de;let dn=0,Hn=0;if(gn){Hn=Math.sqrt(Math.pow(Nt-Je,2)+Math.pow(Jt-yt,2));const Ur=re>We?re:We,Br=de>je?de:je,Hi=we<tt?we:tt,zr=Pe<Qe?Pe:Qe,Mi=Hi-Ur,si=zr-Br,mo=Mi*si;Hn===0&&(Hn=1e-7),dn=oy*1/Hn*100+mo,dn*=Z0}else{let Ur=!1;const Br=k1(G,K,Ur);Hn=Br.distance,Ur=Br.isHoriz,Hn<=oy?Hn!==0?y?dn+=oy+Z0*1/Hn:dn+=oy+Z0*oy/Hn:dn+=Z0:(dn+=Hn,y&&(dn+=Hn*Hn))}return dn}function l1(i){let c=0;for(let g=0;g<i.length;g++){const y=i[g];(y.x<0||y.y<0||y.x>o1||y.y>s1)&&(c+=1e12);for(let E=g+1;E<i.length;E++)c+=c1(y,i[E])}return c}function G1(i,c,g,y){const E=new Map;g.forEach((re,de)=>{E.set(re.id,re)});const D=y.filter(re=>re.source===i.id||re.target===i.id)||[],G=[];D.forEach(re=>{const de=re.source===i.id?re.target:re.source,we=E.get(de);we&&G.push(we)});let K=!0;for(let re=0;re<G.length;re++){const de=G[re],we=Math.atan((i.y-de.y)/(de.x-i.y))*180,Pe=Math.atan((c.y-de.y)/(de.x-c.y))*180,We=we<30||we>150,je=Pe<30||Pe>150,tt=we>70&&we<110,Qe=Pe>70&&Pe<110;if(We&&!je||we*Pe<0){K=!1;break}else if(tt&&!Qe||we*Pe<0){K=!1;break}else if((de.x-i.x)*(de.x-c.x)<0){K=!1;break}else if((de.y-i.y)*(de.y-c.y)<0){K=!1;break}}return K}function F1(i,c){let g=!1;const y=1,E=R1*y,D=L1*y,G=[E,-E,0,0],K=[0,0,D,-D];for(let re=0;re<i.length;++re){const de=i[re];let we=f1(de,i);for(let Pe=0;Pe<G.length;Pe++)if(G1(de,{x:de.x+G[Pe],y:de.y+K[Pe]},i,c)){de.x+=G[Pe],de.y+=K[Pe];const je=f1(de,i),tt=Math.random();je<we||tt<Cb&&tt>u1?(we=je,g=!0):(de.x-=G[Pe],de.y-=K[Pe])}}return Cb>u1&&(Cb*=B1),g?l1(i):0}function f1(i,c){let g=0;(i.x<0||i.y<0||i.x+i.size[0]+20>o1||i.y+i.size[1]+20>s1)&&(g+=1e12);for(let y=0;y<c.length;++y)i.id!==c[y].id&&(g+=c1(i,c[y]));return g}function j1(i,c){if(i.length===0)return{nodes:i,edges:c};i.forEach(re=>{const de=c.filter(we=>we.source===re.id||we.target===re.id);K0.set(re,de)}),i.sort((re,de)=>{var we,Pe;return((we=K0.get(re.id))===null||we===void 0?void 0:we.length)-((Pe=K0.get(de.id))===null||Pe===void 0?void 0:Pe.length)});let g=l1(i),y=20,E=1,D=0;const G=50;let K=0;for(;y>0&&(K++,!(K>=G));){const re=F1(i,c);re!==0&&(D=re),E=D-g,g=D,E===0?--y:y=20}return i.forEach(re=>{re.x=re.x-re.size[0]/2,re.y=re.y-re.size[1]/2}),{nodes:i,edges:c}}var z1=j1;function U1(i,c){const{nodes:g,edges:y}=i,E=c.width,D=c.height;if(!(g!=null&&g.length))return Promise.resolve();const G=[];g.forEach(tt=>{if(y.filter(Je=>Je.source===tt.id||Je.target===tt.id).length>1){const Je=Object.assign({},tt);delete Je.size,G.push(Je)}});const K=[];y.forEach(tt=>{const Qe=G.find(yt=>yt.id===tt.source),Je=G.find(yt=>yt.id===tt.target);Qe&&Je&&K.push(tt)});const re=new fc({type:"dagre",ranksep:c.nodeMinGap,nodesep:c.nodeMinGap}),{nodes:de}=re.layout({nodes:G,edges:K});g.forEach(tt=>{const Qe=(de||[]).find(Je=>Je.id===tt.id);tt.x=(Qe==null?void 0:Qe.x)||E/2,tt.y=(Qe==null?void 0:Qe.y)||D/2});const we=JSON.parse(JSON.stringify(g)),Pe=JSON.parse(JSON.stringify(y)),We=ce().nodes(we).force("link",$t(Pe).id(tt=>tt.id).distance(tt=>K.find(Je=>Je.source===tt.source&&Je.target===tt.target)?30:20)).force("charge",ut()).force("center",Ze(E/2,D/2)).force("x",xn(E/2)).force("y",Or(D/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(tt=>{We.on("end",()=>{g.forEach(dn=>{const Hn=we.find(Ur=>Ur.id===dn.id);Hn&&(dn.x=Hn.x,dn.y=Hn.y)});const Qe=Math.min(...g.map(dn=>dn.x)),Je=Math.max(...g.map(dn=>dn.x)),yt=Math.min(...g.map(dn=>dn.y)),Nt=Math.max(...g.map(dn=>dn.y)),Jt=E/(Je-Qe),gn=D/(Nt-yt);g.forEach(dn=>{dn.x!==void 0&&Jt<1&&(dn.x=(dn.x-Qe)*Jt),dn.y!==void 0&&gn<1&&(dn.y=(dn.y-yt)*gn)}),g.forEach(dn=>{dn.sizeTemp=dn.size,dn.size=[10,10]}),z1(g,y),g.forEach(dn=>{dn.size=dn.sizeTemp||[],delete dn.sizeTemp}),D1({nodes:g,edges:y},c),tt()})})}class V1 extends fe{constructor(c){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},c&&this.updateCfg(c)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const c=this,g=c.nodes,y=c.edges;return g==null||g.forEach(E=>{E.size||(E.size=[50,50])}),U1({nodes:g,edges:y},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{c.onLayoutEnd&&c.onLayoutEnd()})}getType(){return"er"}}class W1 extends fe{constructor(c){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(c)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const c=this,g=c.nodes,y=.9,E=c.center;return!c.width&&typeof window!="undefined"&&(c.width=window.innerWidth),!c.height&&typeof window!="undefined"&&(c.height=window.innerHeight),g&&g.forEach(D=>{D.x=(Math.random()-.5)*y*c.width+E[0],D.y=(Math.random()-.5)*y*c.height+E[1]}),c.onLayoutEnd&&c.onLayoutEnd(),{nodes:g,edges:this.edges}}getType(){return"random"}}class J1{constructor(c){const g=getLayoutByName(c.type);this.layoutInstance=new g(c)}layout(c){return this.layoutInstance.layout(c)}updateCfg(c){this.layoutInstance.updateCfg(c)}init(c){this.layoutInstance.init(c)}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const Q1={force:ki,fruchterman:hl,forceAtlas2:_1,gForce:z,dagre:fc,circular:uo,radial:nl,concentric:ba,grid:B,mds:_h,comboForce:A1,random:W1,"gForce-gpu":P1,"fruchterman-gpu":O1,er:V1}},35695:function(bt,O,V){"use strict";V.r(O),V.d(O,{ArrayExt:function(){return ie},Basecoat:function(){return Kf},Color:function(){return ql},CssLoader:function(){return l},DataUri:function(){return Al},Dictionary:function(){return $0},Dijkstra:function(){return Av},Disablable:function(){return Gh},Disposable:function(){return e},DisposableDelegate:function(){return t},DisposableSet:function(){return s},Dom:function(){return o},Events:function(){return jt},FunctionExt:function(){return u},Interp:function(){return iy},ModifierKey:function(){return _v},NumberExt:function(){return b},ObjectExt:function(){return J},Platform:function(){return $h},PriorityQueue:function(){return Of},SizeSensor:function(){return Pv},StringExt:function(){return T},Text:function(){return a},Timing:function(){return Jh},Unit:function(){return Th},Vector:function(){return ca}});var J={};V.r(J),V.d(J,{applyMixins:function(){return Vd},clone:function(){return Yg},cloneDeep:function(){return kv},createClass:function(){return jv},defaults:function(){return Jg},defaultsDeep:function(){return tp},ensure:function(){return kh},flatten:function(){return Zf},getBoolean:function(){return sp},getByPath:function(){return yd},getNumber:function(){return op},getValue:function(){return ip},has:function(){return ta},inherit:function(){return rp},isEmpty:function(){return Xr},isEqual:function(){return hr},isMaliciousProp:function(){return md},isObject:function(){return m},isPlainObject:function(){return Os},merge:function(){return Rn},pick:function(){return uu},setByPath:function(){return Wd},unsetByPath:function(){return ap}});var ie={};V.r(ie),V.d(ie,{difference:function(){return xy},groupBy:function(){return om},max:function(){return Oy},sortBy:function(){return rm},sortedIndex:function(){return Jd},sortedIndexBy:function(){return Ed},union:function(){return Yd},uniq:function(){return ay}});var T={};V.r(T),V.d(T,{camelCase:function(){return ui},constantCase:function(){return Iu},dotCase:function(){return fu},getSpellingSuggestion:function(){return Q0},hashcode:function(){return ul},kebabCase:function(){return Is},lowerFirst:function(){return Wo},pascalCase:function(){return zu},pathCase:function(){return Ia},sentenceCase:function(){return Ra},titleCase:function(){return Ru},uniqueId:function(){return Py},upperFirst:function(){return St},uuid:function(){return bg}});var b={};V.r(b),V.d(b,{clamp:function(){return Sh},isNumber:function(){return eb},isPercentage:function(){return Wy},mod:function(){return Vy},normalizePercentage:function(){return Nd},normalizeSides:function(){return rb},parseCssNumeric:function(){return nb},random:function(){return lv}});var u={};V.r(u),V.d(u,{apply:function(){return Tt},call:function(){return at},debounce:function(){return $e},isAsync:function(){return ut},isAsyncLike:function(){return ce},throttle:function(){return _t},toAsyncBoolean:function(){return Ze},toDeferredBoolean:function(){return Wt}});var a={};V.r(a),V.d(a,{annotate:function(){return m0},findAnnotationsAtIndex:function(){return sb},findAnnotationsBetweenIndexes:function(){return ab},sanitize:function(){return xf},shiftAnnotations:function(){return ub}});var o={};V.r(o),V.d(o,{CASE_SENSITIVE_ATTR:function(){return v0},Event:function(){return Bd},EventHook:function(){return Zc},EventObject:function(){return Cf},KAPPA:function(){return mv},MouseWheelHandle:function(){return Mv},addClass:function(){return Eg},after:function(){return ob},append:function(){return Tg},appendTo:function(){return d0},attr:function(){return sc},before:function(){return Oh},breakText:function(){return S0},children:function(){return p0},circleToPathData:function(){return M0},clearSelection:function(){return lb},computeStyle:function(){return Sf},computeStyleInt:function(){return Ag},contains:function(){return f0},createElement:function(){return ib},createElementNS:function(){return a0},createSVGMatrix:function(){return Rd},createSVGPoint:function(){return N0},createSVGTransform:function(){return I0},createSlicePathData:function(){return _0},createSvgDocument:function(){return Cg},createSvgElement:function(){return Ch},css:function(){return w0},data:function(){return E0},decomposeMatrix:function(){return L0},ellipseToPathData:function(){return P0},empty:function(){return Xh},ensureId:function(){return Ob},find:function(){return Og},findOne:function(){return c0},findParentByClass:function(){return l0},getAttribute:function(){return Vi},getClass:function(){return Hh},getComputedStyle:function(){return gv},getData:function(){return pv},getPointsFromSvgElement:function(){return yv},getTransformToElement:function(){return Zh},getTransformToParentElement:function(){return F0},getVendorPrefixedName:function(){return Um},hasClass:function(){return wg},hasScrollbars:function(){return cb},height:function(){return j0},index:function(){return Im},isCSSVariable:function(){return Vm},isElement:function(){return Lm},isHTMLElement:function(){return g0},isSVGGraphicsElement:function(){return Sg},kebablizeAttrs:function(){return Fm},lineToPathData:function(){return C0},matrixToRotation:function(){return k0},matrixToScale:function(){return B0},matrixToTransformString:function(){return R0},matrixToTranslation:function(){return G0},measureText:function(){return Yh},mergeAttrs:function(){return th},ns:function(){return Ef},offset:function(){return Kh},parseTransformString:function(){return xv},parseXML:function(){return Nm},polygonToPathData:function(){return O0},polylineToPathData:function(){return T0},position:function(){return z0},prepend:function(){return Rm},prop:function(){return $m},qualifyAttr:function(){return Gm},rectToPathData:function(){return Qm},rectangleToPathData:function(){return A0},remove:function(){return h0},removeAttribute:function(){return Bm},removeClass:function(){return xg},rotate:function(){return Ov},sample:function(){return Km},scale:function(){return Tv},setAttribute:function(){return fv},setAttributes:function(){return km},setData:function(){return Wm},setPrefixedStyle:function(){return b0},splitTextByLength:function(){return Zm},styleToObject:function(){return Mg},svgVersion:function(){return Dm},tagName:function(){return u0},text:function(){return Ym},toLocalPoint:function(){return ny},toPath:function(){return qm},toPathData:function(){return bv},toggleClass:function(){return _m},transform:function(){return Sv},transformStringToMatrix:function(){return Ev},translate:function(){return Cv},uniqueId:function(){return Qa},width:function(){return vb}});var l={};V.r(l),V.d(l,{clean:function(){return yb},ensure:function(){return mb}});var r=V(90591);class e{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(A){function L(){return(oe,Me,Ue)=>{const rt=Ue.value,wt=oe.__proto__;Ue.value=function(...zt){this.disposed||(rt.call(this,...zt),wt.dispose.call(this))}}}A.dispose=L})(e||(e={}));class t{constructor(L){this.callback=L}get disposed(){return!this.callback}dispose(){if(!this.callback)return;const L=this.callback;this.callback=null,L()}}class s{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(L=>{L.dispose()}),this.items.clear())}contains(L){return this.items.has(L)}add(L){this.items.add(L)}remove(L){this.items.delete(L)}clear(){this.items.clear()}}(function(A){function L(oe){const Me=new A;return oe.forEach(Ue=>{Me.add(Ue)}),Me}A.from=L})(s||(s={}));function h(A){var L=typeof A;return A!=null&&(L=="object"||L=="function")}var m=h,d=typeof global=="object"&&global&&global.Object===Object&&global,v=d,x=typeof self=="object"&&self&&self.Object===Object&&self,N=v||x||Function("return this")(),F=N,ae=function(){return F.Date.now()},$=ae,te=/\s/;function fe(A){for(var L=A.length;L--&&te.test(A.charAt(L)););return L}var B=fe,he=/^\s+/;function z(A){return A&&A.slice(0,B(A)+1).replace(he,"")}var ee=z,pe=F.Symbol,S=pe,q=Object.prototype,M=q.hasOwnProperty,I=q.toString,j=S?S.toStringTag:void 0;function ue(A){var L=M.call(A,j),oe=A[j];try{A[j]=void 0;var Me=!0}catch(rt){}var Ue=I.call(A);return Me&&(L?A[j]=oe:delete A[j]),Ue}var se=ue,Ee=Object.prototype,Ce=Ee.toString;function xe(A){return Ce.call(A)}var Oe=xe,Le="[object Null]",Ge="[object Undefined]",He=S?S.toStringTag:void 0;function Et(A){return A==null?A===void 0?Ge:Le:He&&He in Object(A)?se(A):Oe(A)}var Ct=Et;function Gt(A){return A!=null&&typeof A=="object"}var At=Gt,vt="[object Symbol]";function cn(A){return typeof A=="symbol"||At(A)&&Ct(A)==vt}var hn=cn,Bn=0/0,Fn=/^[-+]0x[0-9a-f]+$/i,ir=/^0b[01]+$/i,Nr=/^0o[0-7]+$/i,Ei=parseInt;function ci(A){if(typeof A=="number")return A;if(hn(A))return Bn;if(m(A)){var L=typeof A.valueOf=="function"?A.valueOf():A;A=m(L)?L+"":L}if(typeof A!="string")return A===0?A:+A;A=ee(A);var oe=ir.test(A);return oe||Nr.test(A)?Ei(A.slice(2),oe?2:8):Fn.test(A)?Bn:+A}var Ot=ci,fr="Expected a function",Pi=Math.max,Li=Math.min;function zn(A,L,oe){var Me,Ue,rt,wt,zt,Qt,wn=0,Yn=!1,mr=!1,Lr=!0;if(typeof A!="function")throw new TypeError(fr);L=Ot(L)||0,m(oe)&&(Yn=!!oe.leading,mr="maxWait"in oe,rt=mr?Pi(Ot(oe.maxWait)||0,L):rt,Lr="trailing"in oe?!!oe.trailing:Lr);function Fr(bo){var Cs=Me,ea=Ue;return Me=Ue=void 0,wn=bo,wt=A.apply(ea,Cs),wt}function Gi(bo){return wn=bo,zt=setTimeout(Lo,L),Yn?Fr(bo):wt}function po(bo){var Cs=bo-Qt,ea=bo-wn,As=L-Cs;return mr?Li(As,rt-ea):As}function Ki(bo){var Cs=bo-Qt,ea=bo-wn;return Qt===void 0||Cs>=L||Cs<0||mr&&ea>=rt}function Lo(){var bo=$();if(Ki(bo))return Fo(bo);zt=setTimeout(Lo,po(bo))}function Fo(bo){return zt=void 0,Lr&&Me?Fr(bo):(Me=Ue=void 0,wt)}function oi(){zt!==void 0&&clearTimeout(zt),wn=0,Me=Qt=Ue=zt=void 0}function vo(){return zt===void 0?wt:Fo($())}function Do(){var bo=$(),Cs=Ki(bo);if(Me=arguments,Ue=this,Qt=bo,Cs){if(zt===void 0)return Gi(Qt);if(mr)return clearTimeout(zt),zt=setTimeout(Lo,L),Fr(Qt)}return zt===void 0&&(zt=setTimeout(Lo,L)),wt}return Do.cancel=oi,Do.flush=vo,Do}var $e=zn,Xt="Expected a function";function Rt(A,L,oe){var Me=!0,Ue=!0;if(typeof A!="function")throw new TypeError(Xt);return m(oe)&&(Me="leading"in oe?!!oe.leading:Me,Ue="trailing"in oe?!!oe.trailing:Ue),$e(A,L,{leading:Me,maxWait:L,trailing:Ue})}var _t=Rt;function Tt(A,L,oe){if(oe)switch(oe.length){case 0:return A.call(L);case 1:return A.call(L,oe[0]);case 2:return A.call(L,oe[0],oe[1]);case 3:return A.call(L,oe[0],oe[1],oe[2]);case 4:return A.call(L,oe[0],oe[1],oe[2],oe[3]);case 5:return A.call(L,oe[0],oe[1],oe[2],oe[3],oe[4]);case 6:return A.call(L,oe[0],oe[1],oe[2],oe[3],oe[4],oe[5]);default:return A.apply(L,oe)}return A.call(L)}function at(A,L,...oe){return Tt(A,L,oe)}function ce(A){return typeof A=="object"&&A.then&&typeof A.then=="function"}function ut(A){return A!=null&&(A instanceof Promise||ce(A))}function Ze(...A){const L=[];if(A.forEach(Me=>{Array.isArray(Me)?L.push(...Me):L.push(Me)}),L.some(Me=>ut(Me))){const Me=L.map(Ue=>ut(Ue)?Ue:Promise.resolve(Ue!==!1));return Promise.all(Me).then(Ue=>Ue.reduce((rt,wt)=>wt!==!1&&rt,!0))}return L.every(Me=>Me!==!1)}function Wt(...A){const L=Ze(A);return typeof L=="boolean"?Promise.resolve(L):L}function Ut(A,L){const oe=[];for(let Me=0;Me<A.length;Me+=2){const Ue=A[Me],rt=A[Me+1],wt=Array.isArray(L)?L:[L],zt=Tt(Ue,rt,wt);oe.push(zt)}return Ze(oe)}class jt{constructor(){this.listeners={}}on(L,oe,Me){return oe==null?this:(this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push(oe,Me),this)}once(L,oe,Me){const Ue=(...rt)=>(this.off(L,Ue),Ut([oe,Me],rt));return this.on(L,Ue,this)}off(L,oe,Me){if(!(L||oe||Me))return this.listeners={},this;const Ue=this.listeners;return(L?[L]:Object.keys(Ue)).forEach(wt=>{const zt=Ue[wt];if(zt){if(!(oe||Me)){delete Ue[wt];return}for(let Qt=zt.length-2;Qt>=0;Qt-=2)oe&&zt[Qt]!==oe||Me&&zt[Qt+1]!==Me||zt.splice(Qt,2)}}),this}trigger(L,...oe){let Me=!0;if(L!=="*"){const rt=this.listeners[L];rt!=null&&(Me=Ut([...rt],oe))}const Ue=this.listeners["*"];return Ue!=null?Ze([Me,Ut([...Ue],[L,...oe])]):Me}emit(L,...oe){return this.trigger(L,...oe)}}var xt=Object.prototype,$t=xt.hasOwnProperty;function Un(A,L){return A!=null&&$t.call(A,L)}var qn=Un,rr=V(27771),xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Or=/^\w*$/;function Pr(A,L){if((0,rr.Z)(A))return!1;var oe=typeof A;return oe=="number"||oe=="symbol"||oe=="boolean"||A==null||hn(A)?!0:Or.test(A)||!xn.test(A)||L!=null&&A in Object(L)}var cr=Pr,ki="[object AsyncFunction]",Vr="[object Function]",kr="[object GeneratorFunction]",Ui="[object Proxy]";function Wr(A){if(!m(A))return!1;var L=Ct(A);return L==Vr||L==kr||L==ki||L==Ui}var no=Wr,uo=F["__core-js_shared__"],wi=uo,wo=function(){var A=/[^.]+$/.exec(wi&&wi.keys&&wi.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}();function fs(A){return!!wo&&wo in A}var zo=fs,hs=Function.prototype,ks=hs.toString;function rs(A){if(A!=null){try{return ks.call(A)}catch(L){}try{return A+""}catch(L){}}return""}var Eo=rs,Qo=/[\\^$.*+?()[\]{}|]/g,Xs=/^\[object .+?Constructor\]$/,Ys=Function.prototype,ot=Object.prototype,mt=Ys.toString,_e=ot.hasOwnProperty,Z=RegExp("^"+mt.call(_e).replace(Qo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Q(A){if(!m(A)||zo(A))return!1;var L=no(A)?Z:Xs;return L.test(Eo(A))}var le=Q;function Xe(A,L){return A==null?void 0:A[L]}var dt=Xe;function ft(A,L){var oe=dt(A,L);return le(oe)?oe:void 0}var gt=ft,ln=gt(Object,"create"),bn=ln;function En(){this.__data__=bn?bn(null):{},this.size=0}var Cr=En;function tr(A){var L=this.has(A)&&delete this.__data__[A];return this.size-=L?1:0,L}var ii=tr,Zi="__lodash_hash_undefined__",Mn=Object.prototype,Xn=Mn.hasOwnProperty;function $r(A){var L=this.__data__;if(bn){var oe=L[A];return oe===Zi?void 0:oe}return Xn.call(L,A)?L[A]:void 0}var Re=$r,Ne=Object.prototype,Te=Ne.hasOwnProperty;function U(A){var L=this.__data__;return bn?L[A]!==void 0:Te.call(L,A)}var Y=U,ge="__lodash_hash_undefined__";function Ye(A,L){var oe=this.__data__;return this.size+=this.has(A)?0:1,oe[A]=bn&&L===void 0?ge:L,this}var ct=Ye;function nt(A){var L=-1,oe=A==null?0:A.length;for(this.clear();++L<oe;){var Me=A[L];this.set(Me[0],Me[1])}}nt.prototype.clear=Cr,nt.prototype.delete=ii,nt.prototype.get=Re,nt.prototype.has=Y,nt.prototype.set=ct;var lt=nt;function fn(){this.__data__=[],this.size=0}var on=fn;function Gn(A,L){return A===L||A!==A&&L!==L}var er=Gn;function Kn(A,L){for(var oe=A.length;oe--;)if(er(A[oe][0],L))return oe;return-1}var qr=Kn,xi=Array.prototype,Pn=xi.splice;function $n(A){var L=this.__data__,oe=qr(L,A);if(oe<0)return!1;var Me=L.length-1;return oe==Me?L.pop():Pn.call(L,oe,1),--this.size,!0}var Rr=$n;function Di(A){var L=this.__data__,oe=qr(L,A);return oe<0?void 0:L[oe][1]}var Jr=Di;function $o(A){return qr(this.__data__,A)>-1}var Vo=$o;function lo(A,L){var oe=this.__data__,Me=qr(oe,A);return Me<0?(++this.size,oe.push([A,L])):oe[Me][1]=L,this}var Xi=lo;function Ho(A){var L=-1,oe=A==null?0:A.length;for(this.clear();++L<oe;){var Me=A[L];this.set(Me[0],Me[1])}}Ho.prototype.clear=on,Ho.prototype.delete=Rr,Ho.prototype.get=Jr,Ho.prototype.has=Vo,Ho.prototype.set=Xi;var cs=Ho,li=gt(F,"Map"),xs=li;function Ae(){this.size=0,this.__data__={hash:new lt,map:new(xs||cs),string:new lt}}var Ke=Ae;function pt(A){var L=typeof A;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?A!=="__proto__":A===null}var Ht=pt;function an(A,L){var oe=A.__data__;return Ht(L)?oe[typeof L=="string"?"string":"hash"]:oe.map}var Ln=an;function wr(A){var L=Ln(this,A).delete(A);return this.size-=L?1:0,L}var yr=wr;function ei(A){return Ln(this,A).get(A)}var Ii=ei;function to(A){return Ln(this,A).has(A)}var Ji=to;function Yi(A,L){var oe=Ln(this,A),Me=oe.size;return oe.set(A,L),this.size+=oe.size==Me?0:1,this}var Uo=Yi;function Oi(A){var L=-1,oe=A==null?0:A.length;for(this.clear();++L<oe;){var Me=A[L];this.set(Me[0],Me[1])}}Oi.prototype.clear=Ke,Oi.prototype.delete=yr,Oi.prototype.get=Ii,Oi.prototype.has=Ji,Oi.prototype.set=Uo;var Co=Oi,Fs="Expected a function";function ss(A,L){if(typeof A!="function"||L!=null&&typeof L!="function")throw new TypeError(Fs);var oe=function(){var Me=arguments,Ue=L?L.apply(this,Me):Me[0],rt=oe.cache;if(rt.has(Ue))return rt.get(Ue);var wt=A.apply(this,Me);return oe.cache=rt.set(Ue,wt)||rt,wt};return oe.cache=new(ss.Cache||Co),oe}ss.Cache=Co;var qo=ss,js=500;function Zs(A){var L=qo(A,function(Me){return oe.size===js&&oe.clear(),Me}),oe=L.cache;return L}var Mo=Zs,la=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X=/\\(\\)?/g,ve=Mo(function(A){var L=[];return A.charCodeAt(0)===46&&L.push(""),A.replace(la,function(oe,Me,Ue,rt){L.push(Ue?rt.replace(X,"$1"):Me||oe)}),L}),Ie=ve;function ke(A,L){for(var oe=-1,Me=A==null?0:A.length,Ue=Array(Me);++oe<Me;)Ue[oe]=L(A[oe],oe,A);return Ue}var st=ke,P=1/0,W=S?S.prototype:void 0,ye=W?W.toString:void 0;function Se(A){if(typeof A=="string")return A;if((0,rr.Z)(A))return st(A,Se)+"";if(hn(A))return ye?ye.call(A):"";var L=A+"";return L=="0"&&1/A==-P?"-0":L}var Be=Se;function Fe(A){return A==null?"":Be(A)}var qe=Fe;function Mt(A,L){return(0,rr.Z)(A)?A:cr(A,L)?[A]:Ie(qe(A))}var Lt=Mt,vn="[object Arguments]";function Zn(A){return At(A)&&Ct(A)==vn}var Qn=Zn,jn=Object.prototype,pr=jn.hasOwnProperty,vi=jn.propertyIsEnumerable,co=Qn(function(){return arguments}())?Qn:function(A){return At(A)&&pr.call(A,"callee")&&!vi.call(A,"callee")},di=co,Zo=9007199254740991,qi=/^(?:0|[1-9]\d*)$/;function is(A,L){var oe=typeof A;return L=L==null?Zo:L,!!L&&(oe=="number"||oe!="symbol"&&qi.test(A))&&A>-1&&A%1==0&&A<L}var Js=is,Yo=9007199254740991;function Ss(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=Yo}var ko=Ss,vs=1/0;function xa(A){if(typeof A=="string"||hn(A))return A;var L=A+"";return L=="0"&&1/A==-vs?"-0":L}var ua=xa;function _s(A,L,oe){L=Lt(L,A);for(var Me=-1,Ue=L.length,rt=!1;++Me<Ue;){var wt=ua(L[Me]);if(!(rt=A!=null&&oe(A,wt)))break;A=A[wt]}return rt||++Me!=Ue?rt:(Ue=A==null?0:A.length,!!Ue&&ko(Ue)&&Js(wt,Ue)&&((0,rr.Z)(A)||di(A)))}var Pa=_s;function Us(A,L){return A!=null&&Pa(A,L,qn)}var ta=Us;function La(A,L){L=Lt(L,A);for(var oe=0,Me=L.length;A!=null&&oe<Me;)A=A[ua(L[oe++])];return oe&&oe==Me?A:void 0}var qs=La,mu=function(){try{var A=gt(Object,"defineProperty");return A({},"",{}),A}catch(L){}}(),eo=mu;function ds(A,L,oe){L=="__proto__"&&eo?eo(A,L,{configurable:!0,enumerable:!0,value:oe,writable:!0}):A[L]=oe}var Vs=ds,oa=Object.prototype,Oa=oa.hasOwnProperty;function ls(A,L,oe){var Me=A[L];(!(Oa.call(A,L)&&er(Me,oe))||oe===void 0&&!(L in A))&&Vs(A,L,oe)}var Ha=ls;function sa(A,L,oe,Me){if(!m(A))return A;L=Lt(L,A);for(var Ue=-1,rt=L.length,wt=rt-1,zt=A;zt!=null&&++Ue<rt;){var Qt=ua(L[Ue]),wn=oe;if(Qt==="__proto__"||Qt==="constructor"||Qt==="prototype")return A;if(Ue!=wt){var Yn=zt[Qt];wn=Me?Me(Yn,Qt,zt):void 0,wn===void 0&&(wn=m(Yn)?Yn:Js(L[Ue+1])?[]:{})}Ha(zt,Qt,wn),zt=zt[Qt]}return A}var Xa=sa;function ma(A,L,oe){for(var Me=-1,Ue=L.length,rt={};++Me<Ue;){var wt=L[Me],zt=qs(A,wt);oe(zt,wt)&&Xa(rt,Lt(wt,A),zt)}return rt}var uc=ma;function qa(A,L){return A!=null&&L in Object(A)}var Sa=qa;function cc(A,L){return A!=null&&Pa(A,L,Sa)}var eu=cc;function lc(A,L){return uc(A,L,function(oe,Me){return eu(A,Me)})}var Aa=lc;function Vu(A,L){for(var oe=-1,Me=L.length,Ue=A.length;++oe<Me;)A[Ue+oe]=L[oe];return A}var Wu=Vu,Lu=S?S.isConcatSpreadable:void 0;function Ku(A){return(0,rr.Z)(A)||di(A)||!!(Lu&&A&&A[Lu])}var du=Ku;function qt(A,L,oe,Me,Ue){var rt=-1,wt=A.length;for(oe||(oe=du),Ue||(Ue=[]);++rt<wt;){var zt=A[rt];L>0&&oe(zt)?L>1?qt(zt,L-1,oe,Me,Ue):Wu(Ue,zt):Me||(Ue[Ue.length]=zt)}return Ue}var In=qt;function br(A){var L=A==null?0:A.length;return L?In(A,1):[]}var Mr=br;function Yr(A,L,oe){switch(oe.length){case 0:return A.call(L);case 1:return A.call(L,oe[0]);case 2:return A.call(L,oe[0],oe[1]);case 3:return A.call(L,oe[0],oe[1],oe[2])}return A.apply(L,oe)}var Bt=Yr,nn=Math.max;function Dn(A,L,oe){return L=nn(L===void 0?A.length-1:L,0),function(){for(var Me=arguments,Ue=-1,rt=nn(Me.length-L,0),wt=Array(rt);++Ue<rt;)wt[Ue]=Me[L+Ue];Ue=-1;for(var zt=Array(L+1);++Ue<L;)zt[Ue]=Me[Ue];return zt[L]=oe(wt),Bt(A,this,zt)}}var Dt=Dn;function en(A){return function(){return A}}var un=en;function Jn(A){return A}var Tr=Jn,Sr=eo?function(A,L){return eo(A,"toString",{configurable:!0,enumerable:!1,value:un(L),writable:!0})}:Tr,Wi=Sr,Fi=800,ro=16,_o=Date.now;function $i(A){var L=0,oe=0;return function(){var Me=_o(),Ue=ro-(Me-oe);if(oe=Me,Ue>0){if(++L>=Fi)return arguments[0]}else L=0;return A.apply(void 0,arguments)}}var Ds=$i,Ws=Ds(Wi),ya=Ws;function au(A){return ya(Dt(A,void 0,Mr),A+"")}var yu=au,Rs=yu(function(A,L){return A==null?{}:Aa(A,L)}),uu=Rs;function Bc(){this.__data__=new cs,this.size=0}var Ua=Bc;function ef(A){var L=this.__data__,oe=L.delete(A);return this.size=L.size,oe}var nh=ef;function kc(A){return this.__data__.get(A)}var Jc=kc;function Ju(A){return this.__data__.has(A)}var Rl=Ju,tf=200;function fc(A,L){var oe=this.__data__;if(oe instanceof cs){var Me=oe.__data__;if(!xs||Me.length<tf-1)return Me.push([A,L]),this.size=++oe.size,this;oe=this.__data__=new Co(Me)}return oe.set(A,L),this.size=oe.size,this}var Gc=fc;function os(A){var L=this.__data__=new cs(A);this.size=L.size}os.prototype.clear=Ua,os.prototype.delete=nh,os.prototype.get=Jc,os.prototype.has=Rl,os.prototype.set=Gc;var Qu=os;function rh(A,L,oe){(oe!==void 0&&!er(A[L],oe)||oe===void 0&&!(L in A))&&Vs(A,L,oe)}var Fc=rh;function Qc(A){return function(L,oe,Me){for(var Ue=-1,rt=Object(L),wt=Me(L),zt=wt.length;zt--;){var Qt=wt[A?zt:++Ue];if(oe(rt[Qt],Qt,rt)===!1)break}return L}}var Mf=Qc,Pf=Mf(),Ph=Pf,xc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tu=xc&&typeof module=="object"&&module&&!module.nodeType&&module,nf=Tu&&Tu.exports===xc,rf=nf?F.Buffer:void 0,qc=rf?rf.allocUnsafe:void 0;function ih(A,L){if(L)return A.slice();var oe=A.length,Me=qc?qc(oe):new A.constructor(oe);return A.copy(Me),Me}var Sc=ih,Ah=F.Uint8Array,Ba=Ah;function bu(A){var L=new A.constructor(A.byteLength);return new Ba(L).set(new Ba(A)),L}var Af=bu;function qu(A,L){var oe=L?Af(A.buffer):A.buffer;return new A.constructor(oe,A.byteOffset,A.length)}var fl=qu;function _f(A,L){var oe=-1,Me=A.length;for(L||(L=Array(Me));++oe<Me;)L[oe]=A[oe];return L}var ec=_f,Cc=Object.create,hc=function(){function A(){}return function(L){if(!m(L))return{};if(Cc)return Cc(L);A.prototype=L;var oe=new A;return A.prototype=void 0,oe}}(),Oc=hc;function Ll(A,L){return function(oe){return A(L(oe))}}var el=Ll,of=el(Object.getPrototypeOf,Object),$u=of,sf=Object.prototype;function nd(A){var L=A&&A.constructor,oe=typeof L=="function"&&L.prototype||sf;return A===oe}var Tc=nd;function rd(A){return typeof A.constructor=="function"&&!Tc(A)?Oc($u(A)):{}}var oh=rd;function tl(A){return A!=null&&ko(A.length)&&!no(A)}var dc=tl;function Df(A){return At(A)&&dc(A)}var It=Df;function Hu(){return!1}var af=Hu,wu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Go=wu&&typeof module=="object"&&module&&!module.nodeType&&module,nl=Go&&Go.exports===wu,ba=nl?F.Buffer:void 0,_h=ba?ba.isBuffer:void 0,gc=_h||af,hl=gc,ho="[object Object]",So=Function.prototype,No=Object.prototype,Bo=So.toString,jc=No.hasOwnProperty,Dh=Bo.call(Object);function oo(A){if(!At(A)||Ct(A)!=ho)return!1;var L=$u(A);if(L===null)return!0;var oe=jc.call(L,"constructor")&&L.constructor;return typeof oe=="function"&&oe instanceof oe&&Bo.call(oe)==Dh}var Os=oo,Nh="[object Arguments]",id="[object Array]",tu="[object Boolean]",_u="[object Date]",dl="[object Error]",uf="[object Function]",Si="[object Map]",Kr="[object Number]",rl="[object Object]",od="[object RegExp]",sd="[object Set]",aa="[object String]",fa="[object WeakMap]",zs="[object ArrayBuffer]",Mc="[object DataView]",gl="[object Float32Array]",Mu="[object Float64Array]",Nf="[object Int8Array]",Ta="[object Int16Array]",If="[object Int32Array]",Pc="[object Uint8Array]",pl="[object Uint8ClampedArray]",Xu="[object Uint16Array]",vl="[object Uint32Array]",ha={};ha[gl]=ha[Mu]=ha[Nf]=ha[Ta]=ha[If]=ha[Pc]=ha[pl]=ha[Xu]=ha[vl]=!0,ha[Nh]=ha[id]=ha[zs]=ha[tu]=ha[Mc]=ha[_u]=ha[dl]=ha[uf]=ha[Si]=ha[Kr]=ha[rl]=ha[od]=ha[sd]=ha[aa]=ha[fa]=!1;function Eu(A){return At(A)&&ko(A.length)&&!!ha[Ct(A)]}var cf=Eu;function tc(A){return function(L){return A(L)}}var pc=tc,_r=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ts=_r&&typeof module=="object"&&module&&!module.nodeType&&module,Ya=Ts&&Ts.exports===_r,nc=Ya&&v.process,Rf=function(){try{var A=Ts&&Ts.require&&Ts.require("util").types;return A||nc&&nc.binding&&nc.binding("util")}catch(L){}}(),Bu=Rf,vc=Bu&&Bu.isTypedArray,Yu=vc?pc(vc):cf,Bl=Yu;function ka(A,L){if(!(L==="constructor"&&typeof A[L]=="function")&&L!="__proto__")return A[L]}var lf=ka;function kl(A,L,oe,Me){var Ue=!oe;oe||(oe={});for(var rt=-1,wt=L.length;++rt<wt;){var zt=L[rt],Qt=Me?Me(oe[zt],A[zt],zt,oe,A):void 0;Qt===void 0&&(Qt=A[zt]),Ue?Vs(oe,zt,Qt):Ha(oe,zt,Qt)}return oe}var Ga=kl;function Gl(A,L){for(var oe=-1,Me=Array(A);++oe<A;)Me[oe]=L(oe);return Me}var Lf=Gl,mc=Object.prototype,il=mc.hasOwnProperty;function Fl(A,L){var oe=(0,rr.Z)(A),Me=!oe&&di(A),Ue=!oe&&!Me&&hl(A),rt=!oe&&!Me&&!Ue&&Bl(A),wt=oe||Me||Ue||rt,zt=wt?Lf(A.length,String):[],Qt=zt.length;for(var wn in A)(L||il.call(A,wn))&&!(wt&&(wn=="length"||Ue&&(wn=="offset"||wn=="parent")||rt&&(wn=="buffer"||wn=="byteLength"||wn=="byteOffset")||Js(wn,Qt)))&&zt.push(wn);return zt}var Ac=Fl;function Bf(A){var L=[];if(A!=null)for(var oe in Object(A))L.push(oe);return L}var na=Bf,ol=Object.prototype,sh=ol.hasOwnProperty;function zc(A){if(!m(A))return na(A);var L=Tc(A),oe=[];for(var Me in A)Me=="constructor"&&(L||!sh.call(A,Me))||oe.push(Me);return oe}var H=zc;function n(A){return dc(A)?Ac(A,!0):H(A)}var f=n;function p(A){return Ga(A,f(A))}var w=p;function k(A,L,oe,Me,Ue,rt,wt){var zt=lf(A,oe),Qt=lf(L,oe),wn=wt.get(Qt);if(wn){Fc(A,oe,wn);return}var Yn=rt?rt(zt,Qt,oe+"",A,L,wt):void 0,mr=Yn===void 0;if(mr){var Lr=(0,rr.Z)(Qt),Fr=!Lr&&hl(Qt),Gi=!Lr&&!Fr&&Bl(Qt);Yn=Qt,Lr||Fr||Gi?(0,rr.Z)(zt)?Yn=zt:It(zt)?Yn=ec(zt):Fr?(mr=!1,Yn=Sc(Qt,!0)):Gi?(mr=!1,Yn=fl(Qt,!0)):Yn=[]:Os(Qt)||di(Qt)?(Yn=zt,di(zt)?Yn=w(zt):(!m(zt)||no(zt))&&(Yn=oh(Qt))):mr=!1}mr&&(wt.set(Qt,Yn),Ue(Yn,Qt,Me,rt,wt),wt.delete(Qt)),Fc(A,oe,Yn)}var ne=k;function me(A,L,oe,Me,Ue){A!==L&&Ph(L,function(rt,wt){if(Ue||(Ue=new Qu),m(rt))ne(A,L,wt,oe,me,Me,Ue);else{var zt=Me?Me(lf(A,wt),rt,wt+"",A,L,Ue):void 0;zt===void 0&&(zt=rt),Fc(A,wt,zt)}},f)}var De=me;function ze(A,L){return ya(Dt(A,L,Tr),A+"")}var it=ze;function Pt(A,L,oe){if(!m(oe))return!1;var Me=typeof L;return(Me=="number"?dc(oe)&&Js(L,oe.length):Me=="string"&&L in oe)?er(oe[L],A):!1}var ht=Pt;function Ft(A){return it(function(L,oe){var Me=-1,Ue=oe.length,rt=Ue>1?oe[Ue-1]:void 0,wt=Ue>2?oe[2]:void 0;for(rt=A.length>3&&typeof rt=="function"?(Ue--,rt):void 0,wt&&ht(oe[0],oe[1],wt)&&(rt=Ue<3?void 0:rt,Ue=1),L=Object(L);++Me<Ue;){var zt=oe[Me];zt&&A(L,zt,Me,rt)}return L})}var tn=Ft,On=tn(function(A,L,oe){De(A,L,oe)}),Rn=On,nr="__lodash_hash_undefined__";function or(A){return this.__data__.set(A,nr),this}var Dr=or;function ri(A){return this.__data__.has(A)}var yn=ri;function ao(A){var L=-1,oe=A==null?0:A.length;for(this.__data__=new Co;++L<oe;)this.add(A[L])}ao.prototype.add=ao.prototype.push=Dr,ao.prototype.has=yn;var Ks=ao;function Qs(A,L){for(var oe=-1,Me=A==null?0:A.length;++oe<Me;)if(L(A[oe],oe,A))return!0;return!1}var Za=Qs;function _a(A,L){return A.has(L)}var da=_a,Ka=1,sl=2;function ff(A,L,oe,Me,Ue,rt){var wt=oe&Ka,zt=A.length,Qt=L.length;if(zt!=Qt&&!(wt&&Qt>zt))return!1;var wn=rt.get(A),Yn=rt.get(L);if(wn&&Yn)return wn==L&&Yn==A;var mr=-1,Lr=!0,Fr=oe&sl?new Ks:void 0;for(rt.set(A,L),rt.set(L,A);++mr<zt;){var Gi=A[mr],po=L[mr];if(Me)var Ki=wt?Me(po,Gi,mr,L,A,rt):Me(Gi,po,mr,A,L,rt);if(Ki!==void 0){if(Ki)continue;Lr=!1;break}if(Fr){if(!Za(L,function(Lo,Fo){if(!da(Fr,Fo)&&(Gi===Lo||Ue(Gi,Lo,oe,Me,rt)))return Fr.push(Fo)})){Lr=!1;break}}else if(!(Gi===po||Ue(Gi,po,oe,Me,rt))){Lr=!1;break}}return rt.delete(A),rt.delete(L),Lr}var jl=ff;function ml(A){var L=-1,oe=Array(A.size);return A.forEach(function(Me,Ue){oe[++L]=[Ue,Me]}),oe}var ah=ml;function Ms(A){var L=-1,oe=Array(A.size);return A.forEach(function(Me){oe[++L]=Me}),oe}var hf=Ms,Uc=1,Pu=2,zl="[object Boolean]",df="[object Date]",Ul="[object Error]",Du="[object Map]",gf="[object Number]",yl="[object RegExp]",kf="[object Set]",Gf="[object String]",Ff="[object Symbol]",Nu="[object ArrayBuffer]",$s="[object DataView]",Vl=S?S.prototype:void 0,bl=Vl?Vl.valueOf:void 0;function wl(A,L,oe,Me,Ue,rt,wt){switch(oe){case $s:if(A.byteLength!=L.byteLength||A.byteOffset!=L.byteOffset)return!1;A=A.buffer,L=L.buffer;case Nu:return!(A.byteLength!=L.byteLength||!rt(new Ba(A),new Ba(L)));case zl:case df:case gf:return er(+A,+L);case Ul:return A.name==L.name&&A.message==L.message;case yl:case Gf:return A==L+"";case Du:var zt=ah;case kf:var Qt=Me&Uc;if(zt||(zt=hf),A.size!=L.size&&!Qt)return!1;var wn=wt.get(A);if(wn)return wn==L;Me|=Pu,wt.set(A,L);var Yn=jl(zt(A),zt(L),Me,Ue,rt,wt);return wt.delete(A),Yn;case Ff:if(bl)return bl.call(A)==bl.call(L)}return!1}var pf=wl;function uh(A,L,oe){var Me=L(A);return(0,rr.Z)(A)?Me:Wu(Me,oe(A))}var Wl=uh;function Vc(A,L){for(var oe=-1,Me=A==null?0:A.length,Ue=0,rt=[];++oe<Me;){var wt=A[oe];L(wt,oe,A)&&(rt[Ue++]=wt)}return rt}var jf=Vc;function _c(){return[]}var ad=_c,El=Object.prototype,ud=El.propertyIsEnumerable,Vn=Object.getOwnPropertySymbols,zf=Vn?function(A){return A==null?[]:(A=Object(A),jf(Vn(A),function(L){return ud.call(A,L)}))}:ad,Uf=zf,Ih=el(Object.keys,Object),cd=Ih,vf=Object.prototype,Rh=vf.hasOwnProperty;function Dc(A){if(!Tc(A))return cd(A);var L=[];for(var oe in Object(A))Rh.call(A,oe)&&oe!="constructor"&&L.push(oe);return L}var Vf=Dc;function $l(A){return dc(A)?Ac(A):Vf(A)}var Ma=$l;function yc(A){return Wl(A,Ma,Uf)}var Wf=yc,ch=1,$f=Object.prototype,gu=$f.hasOwnProperty;function Wc(A,L,oe,Me,Ue,rt){var wt=oe&ch,zt=Wf(A),Qt=zt.length,wn=Wf(L),Yn=wn.length;if(Qt!=Yn&&!wt)return!1;for(var mr=Qt;mr--;){var Lr=zt[mr];if(!(wt?Lr in L:gu.call(L,Lr)))return!1}var Fr=rt.get(A),Gi=rt.get(L);if(Fr&&Gi)return Fr==L&&Gi==A;var po=!0;rt.set(A,L),rt.set(L,A);for(var Ki=wt;++mr<Qt;){Lr=zt[mr];var Lo=A[Lr],Fo=L[Lr];if(Me)var oi=wt?Me(Fo,Lo,Lr,L,A,rt):Me(Lo,Fo,Lr,A,L,rt);if(!(oi===void 0?Lo===Fo||Ue(Lo,Fo,oe,Me,rt):oi)){po=!1;break}Ki||(Ki=Lr=="constructor")}if(po&&!Ki){var vo=A.constructor,Do=L.constructor;vo!=Do&&"constructor"in A&&"constructor"in L&&!(typeof vo=="function"&&vo instanceof vo&&typeof Do=="function"&&Do instanceof Do)&&(po=!1)}return rt.delete(A),rt.delete(L),po}var Fa=Wc,ku=gt(F,"DataView"),mf=ku,$c=gt(F,"Promise"),xl=$c,ld=gt(F,"Set"),Sl=ld,lh=gt(F,"WeakMap"),Hl=lh,fh="[object Map]",hh="[object Object]",dh="[object Promise]",Hf="[object Set]",Xf="[object WeakMap]",gh="[object DataView]",Xl=Eo(mf),fd=Eo(xs),Lh=Eo(xl),hd=Eo(Sl),dd=Eo(Hl),et=Ct;(mf&&et(new mf(new ArrayBuffer(1)))!=gh||xs&&et(new xs)!=fh||xl&&et(xl.resolve())!=dh||Sl&&et(new Sl)!=Hf||Hl&&et(new Hl)!=Xf)&&(et=function(A){var L=Ct(A),oe=L==hh?A.constructor:void 0,Me=oe?Eo(oe):"";if(Me)switch(Me){case Xl:return gh;case fd:return fh;case Lh:return dh;case hd:return Hf;case dd:return Xf}return L});var Vt=et,mn=1,dr="[object Arguments]",jr="[object Array]",gr="[object Object]",Ar=Object.prototype,Qr=Ar.hasOwnProperty;function fi(A,L,oe,Me,Ue,rt){var wt=(0,rr.Z)(A),zt=(0,rr.Z)(L),Qt=wt?jr:Vt(A),wn=zt?jr:Vt(L);Qt=Qt==dr?gr:Qt,wn=wn==dr?gr:wn;var Yn=Qt==gr,mr=wn==gr,Lr=Qt==wn;if(Lr&&hl(A)){if(!hl(L))return!1;wt=!0,Yn=!1}if(Lr&&!Yn)return rt||(rt=new Qu),wt||Bl(A)?jl(A,L,oe,Me,Ue,rt):pf(A,L,Qt,oe,Me,Ue,rt);if(!(oe&mn)){var Fr=Yn&&Qr.call(A,"__wrapped__"),Gi=mr&&Qr.call(L,"__wrapped__");if(Fr||Gi){var po=Fr?A.value():A,Ki=Gi?L.value():L;return rt||(rt=new Qu),Ue(po,Ki,oe,Me,rt)}}return Lr?(rt||(rt=new Qu),Fa(A,L,oe,Me,Ue,rt)):!1}var Ai=fi;function hi(A,L,oe,Me,Ue){return A===L?!0:A==null||L==null||!At(A)&&!At(L)?A!==A&&L!==L:Ai(A,L,oe,Me,hi,Ue)}var bi=hi;function Ti(A,L){return bi(A,L)}var hr=Ti,Ci="[object Map]",Wn="[object Set]",vr=Object.prototype,gi=vr.hasOwnProperty;function Bi(A){if(A==null)return!0;if(dc(A)&&((0,rr.Z)(A)||typeof A=="string"||typeof A.splice=="function"||hl(A)||Bl(A)||di(A)))return!A.length;var L=Vt(A);if(L==Ci||L==Wn)return!A.size;if(Tc(A))return!Vf(A).length;for(var oe in A)if(gi.call(A,oe))return!1;return!0}var Xr=Bi;function _i(A,L){for(var oe=-1,Me=A==null?0:A.length;++oe<Me&&L(A[oe],oe,A)!==!1;);return A}var mi=_i;function zi(A,L){return A&&Ga(L,Ma(L),A)}var Zr=zi;function Ri(A,L){return A&&Ga(L,f(L),A)}var Oo=Ri;function Po(A,L){return Ga(A,Uf(A),L)}var ji=Po,pi=Object.getOwnPropertySymbols,Gr=pi?function(A){for(var L=[];A;)Wu(L,Uf(A)),A=$u(A);return L}:ad,To=Gr;function ms(A,L){return Ga(A,To(A),L)}var xo=ms;function as(A){return Wl(A,f,To)}var es=as,ps=Object.prototype,gs=ps.hasOwnProperty;function Ca(A){var L=A.length,oe=new A.constructor(L);return L&&typeof A[0]=="string"&&gs.call(A,"index")&&(oe.index=A.index,oe.input=A.input),oe}var cu=Ca;function Ps(A,L){var oe=L?Af(A.buffer):A.buffer;return new A.constructor(oe,A.byteOffset,A.byteLength)}var nu=Ps,wa=/\w*$/;function ru(A){var L=new A.constructor(A.source,wa.exec(A));return L.lastIndex=A.lastIndex,L}var iu=ru,Ja=S?S.prototype:void 0,pu=Ja?Ja.valueOf:void 0;function xu(A){return pu?Object(pu.call(A)):{}}var ou=xu,ts="[object Boolean]",lu="[object Date]",Hs="[object Map]",Ao="[object Number]",ns="[object RegExp]",bs="[object Set]",ra="[object String]",Gu="[object Symbol]",rn="[object ArrayBuffer]",xr="[object DataView]",sr="[object Float32Array]",Qi="[object Float64Array]",ws="[object Int8Array]",ga="[object Int16Array]",kt="[object Int32Array]",Kt="[object Uint8Array]",pn="[object Uint8ClampedArray]",lr="[object Uint16Array]",ar="[object Uint32Array]";function Cn(A,L,oe){var Me=A.constructor;switch(L){case rn:return Af(A);case ts:case lu:return new Me(+A);case xr:return nu(A,oe);case sr:case Qi:case ws:case ga:case kt:case Kt:case pn:case lr:case ar:return fl(A,oe);case Hs:return new Me;case Ao:case ra:return new Me(A);case ns:return iu(A);case bs:return new Me;case Gu:return ou(A)}}var _n=Cn,Nn="[object Map]";function sn(A){return At(A)&&Vt(A)==Nn}var Tn=sn,Yt=Bu&&Bu.isMap,An=Yt?pc(Yt):Tn,Er=An,Ir="[object Set]";function ti(A){return At(A)&&Vt(A)==Ir}var Hr=ti,ai=Bu&&Bu.isSet,yo=ai?pc(ai):Hr,us=yo,io=1,fo=2,Ko=4,Gs="[object Arguments]",Va="[object Array]",rc="[object Boolean]",ph="[object Date]",ic="[object Error]",oc="[object Function]",Hc="[object GeneratorFunction]",Yf="[object Map]",Ig="[object Number]",Gd="[object Object]",Rg="[object RegExp]",Lg="[object Set]",Bg="[object String]",kg="[object Symbol]",Gg="[object WeakMap]",Fg="[object ArrayBuffer]",jg="[object DataView]",gd="[object Float32Array]",Bv="[object Float64Array]",zg="[object Int8Array]",vh="[object Int16Array]",Ug="[object Int32Array]",Vg="[object Uint8Array]",Wg="[object Uint8ClampedArray]",$g="[object Uint16Array]",Hg="[object Uint32Array]",Da={};Da[Gs]=Da[Va]=Da[Fg]=Da[jg]=Da[rc]=Da[ph]=Da[gd]=Da[Bv]=Da[zg]=Da[vh]=Da[Ug]=Da[Yf]=Da[Ig]=Da[Gd]=Da[Rg]=Da[Lg]=Da[Bg]=Da[kg]=Da[Vg]=Da[Wg]=Da[$g]=Da[Hg]=!0,Da[ic]=Da[oc]=Da[Gg]=!1;function Yl(A,L,oe,Me,Ue,rt){var wt,zt=L&io,Qt=L&fo,wn=L&Ko;if(oe&&(wt=Ue?oe(A,Me,Ue,rt):oe(A)),wt!==void 0)return wt;if(!m(A))return A;var Yn=(0,rr.Z)(A);if(Yn){if(wt=cu(A),!zt)return ec(A,wt)}else{var mr=Vt(A),Lr=mr==oc||mr==Hc;if(hl(A))return Sc(A,zt);if(mr==Gd||mr==Gs||Lr&&!Ue){if(wt=Qt||Lr?{}:oh(A),!zt)return Qt?xo(A,Oo(wt,A)):ji(A,Zr(wt,A))}else{if(!Da[mr])return Ue?A:{};wt=_n(A,mr,zt)}}rt||(rt=new Qu);var Fr=rt.get(A);if(Fr)return Fr;rt.set(A,wt),us(A)?A.forEach(function(Ki){wt.add(Yl(Ki,L,oe,Ki,A,rt))}):Er(A)&&A.forEach(function(Ki,Lo){wt.set(Lo,Yl(Ki,L,oe,Lo,A,rt))});var Gi=wn?Qt?es:Wf:Qt?f:Ma,po=Yn?void 0:Gi(A);return mi(po||A,function(Ki,Lo){po&&(Lo=Ki,Ki=A[Lo]),Ha(wt,Lo,Yl(Ki,L,oe,Lo,A,rt))}),wt}var Bh=Yl,Fd=4;function Xg(A){return Bh(A,Fd)}var Yg=Xg,Zg=1,Kg=4;function jd(A){return Bh(A,Zg|Kg)}var kv=jd,zd=Object.prototype,Ud=zd.hasOwnProperty,pd=it(function(A,L){A=Object(A);var oe=-1,Me=L.length,Ue=Me>2?L[2]:void 0;for(Ue&&ht(L[0],L[1],Ue)&&(Me=1);++oe<Me;)for(var rt=L[oe],wt=f(rt),zt=-1,Qt=wt.length;++zt<Qt;){var wn=wt[zt],Yn=A[wn];(Yn===void 0||er(Yn,zd[wn])&&!Ud.call(A,wn))&&(A[wn]=rt[wn])}return A}),Jg=pd;function mh(A,L,oe,Me,Ue,rt){return m(A)&&m(L)&&(rt.set(L,A),De(A,L,void 0,mh,rt),rt.delete(L)),A}var Qg=mh,qg=tn(function(A,L,oe,Me){De(A,L,oe,Me)}),vd=qg,ep=it(function(A){return A.push(void 0,Qg),Bt(vd,void 0,A)}),tp=ep;function Vd(A,...L){L.forEach(oe=>{Object.getOwnPropertyNames(oe.prototype).forEach(Me=>{Me!=="constructor"&&Object.defineProperty(A.prototype,Me,Object.getOwnPropertyDescriptor(oe.prototype,Me))})})}const np=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,L){A.__proto__=L}||function(A,L){for(const oe in L)Object.prototype.hasOwnProperty.call(L,oe)&&(A[oe]=L[oe])};function rp(A,L){np(A,L);function oe(){this.constructor=A}A.prototype=L===null?Object.create(L):(oe.prototype=L.prototype,new oe)}class Gv{}const Fv=/^\s*class\s+/.test(`${Gv}`)||/^\s*class\s*\{/.test(`${class{}}`);function jv(A,L){let oe;return Fv?oe=class extends L{}:(oe=function(){return L.apply(this,arguments)},rp(oe,L)),Object.defineProperty(oe,"name",{value:A}),oe}function kh(A,L){return A!=null?A:L}function ip(A,L,oe){const Me=A!=null?A[L]:null;return oe!==void 0?kh(Me,oe):Me}function op(A,L,oe){let Me=A!=null?A[L]:null;return Me==null||(Me=+Me,Number.isNaN(Me)||!Number.isFinite(Me))?oe:Me}function sp(A,L,oe){const Me=A!=null?A[L]:null;return Me==null?oe:!!Me}function md(A){return A==="__proto__"}function yd(A,L,oe="/"){let Me;const Ue=Array.isArray(L)?L:L.split(oe);if(Ue.length)for(Me=A;Ue.length;){const rt=Ue.shift();if(Object(Me)===Me&&rt&&rt in Me)Me=Me[rt];else return}return Me}function Wd(A,L,oe,Me="/"){const Ue=Array.isArray(L)?L:L.split(Me),rt=Ue.pop();if(rt&&!md(rt)){let wt=A;Ue.forEach(zt=>{md(zt)||(wt[zt]==null&&(wt[zt]={}),wt=wt[zt])}),wt[rt]=oe}return A}function ap(A,L,oe="/"){const Me=Array.isArray(L)?L.slice():L.split(oe),Ue=Me.pop();if(Ue)if(Me.length>0){const rt=yd(A,Me);rt&&delete rt[Ue]}else delete A[Ue];return A}function Zf(A,L="/",oe){const Me={};Object.keys(A).forEach(Ue=>{const rt=A[Ue];let wt=typeof rt=="object"||Array.isArray(rt);if(wt&&oe&&oe(rt)&&(wt=!1),wt){const zt=Zf(rt,L,oe);Object.keys(zt).forEach(Qt=>{Me[Ue+L+Qt]=zt[Qt]})}else Me[Ue]=rt});for(const Ue in A)Object.prototype.hasOwnProperty.call(A,Ue);return Me}var up=function(A,L,oe,Me){var Ue=arguments.length,rt=Ue<3?L:Me===null?Me=Object.getOwnPropertyDescriptor(L,oe):Me,wt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")rt=Reflect.decorate(A,L,oe,Me);else for(var zt=A.length-1;zt>=0;zt--)(wt=A[zt])&&(rt=(Ue<3?wt(rt):Ue>3?wt(L,oe,rt):wt(L,oe))||rt);return Ue>3&&rt&&Object.defineProperty(L,oe,rt),rt};class Kf extends jt{dispose(){this.off()}}up([e.dispose()],Kf.prototype,"dispose",null),function(A){A.dispose=e.dispose}(Kf||(Kf={})),Vd(Kf,e);class Gh extends Kf{get disabled(){return this._disabled===!0}enable(){delete this._disabled}disable(){this._disabled=!0}}function cp(A,L,oe,Me){for(var Ue=A.length,rt=oe+(Me?1:-1);Me?rt--:++rt<Ue;)if(L(A[rt],rt,A))return rt;return-1}var lp=cp;function zv(A){return A!==A}var Uv=zv;function Vv(A,L,oe){for(var Me=oe-1,Ue=A.length;++Me<Ue;)if(A[Me]===L)return Me;return-1}var Wv=Vv;function fp(A,L,oe){return L===L?Wv(A,L,oe):lp(A,Uv,oe)}var hp=fp;function dp(A,L){var oe=A==null?0:A.length;return!!oe&&hp(A,L,0)>-1}var $d=dp;function gp(A,L,oe){for(var Me=-1,Ue=A==null?0:A.length;++Me<Ue;)if(oe(L,A[Me]))return!0;return!1}var Zl=gp;function pp(){}var Hd=pp,Xd=1/0,bd=Sl&&1/hf(new Sl([,-0]))[1]==Xd?function(A){return new Sl(A)}:Hd,vp=bd,Su=200;function $v(A,L,oe){var Me=-1,Ue=$d,rt=A.length,wt=!0,zt=[],Qt=zt;if(oe)wt=!1,Ue=Zl;else if(rt>=Su){var wn=L?null:vp(A);if(wn)return hf(wn);wt=!1,Ue=da,Qt=new Ks}else Qt=L?[]:zt;e:for(;++Me<rt;){var Yn=A[Me],mr=L?L(Yn):Yn;if(Yn=oe||Yn!==0?Yn:0,wt&&mr===mr){for(var Lr=Qt.length;Lr--;)if(Qt[Lr]===mr)continue e;L&&Qt.push(mr),zt.push(Yn)}else Ue(Qt,mr,oe)||(Qt!==zt&&Qt.push(mr),zt.push(Yn))}return zt}var Kl=$v;function sy(A){return A&&A.length?Kl(A):[]}var ay=sy,Xc=it(function(A){return Kl(In(A,1,It,!0))}),Yd=Xc,Zd=4294967295,uy=Zd-1,cy=Math.floor,Kd=Math.min;function mp(A,L,oe,Me){var Ue=0,rt=A==null?0:A.length;if(rt===0)return 0;L=oe(L);for(var wt=L!==L,zt=L===null,Qt=hn(L),wn=L===void 0;Ue<rt;){var Yn=cy((Ue+rt)/2),mr=oe(A[Yn]),Lr=mr!==void 0,Fr=mr===null,Gi=mr===mr,po=hn(mr);if(wt)var Ki=Me||Gi;else wn?Ki=Gi&&(Me||Lr):zt?Ki=Gi&&Lr&&(Me||!Fr):Qt?Ki=Gi&&Lr&&!Fr&&(Me||!po):Fr||po?Ki=!1:Ki=Me?mr<=L:mr<L;Ki?Ue=Yn+1:rt=Yn}return Kd(rt,uy)}var Hv=mp,wd=4294967295,ly=wd>>>1;function yp(A,L,oe){var Me=0,Ue=A==null?Me:A.length;if(typeof L=="number"&&L===L&&Ue<=ly){for(;Me<Ue;){var rt=Me+Ue>>>1,wt=A[rt];wt!==null&&!hn(wt)&&(oe?wt<=L:wt<L)?Me=rt+1:Ue=rt}return Ue}return Hv(A,L,Tr,oe)}var fy=yp;function Xv(A,L){return fy(A,L)}var Jd=Xv,hy=1,dy=2;function Qd(A,L,oe,Me){var Ue=oe.length,rt=Ue,wt=!Me;if(A==null)return!rt;for(A=Object(A);Ue--;){var zt=oe[Ue];if(wt&&zt[2]?zt[1]!==A[zt[0]]:!(zt[0]in A))return!1}for(;++Ue<rt;){zt=oe[Ue];var Qt=zt[0],wn=A[Qt],Yn=zt[1];if(wt&&zt[2]){if(wn===void 0&&!(Qt in A))return!1}else{var mr=new Qu;if(Me)var Lr=Me(wn,Yn,Qt,A,L,mr);if(!(Lr===void 0?bi(Yn,wn,hy|dy,Me,mr):Lr))return!1}}return!0}var Fh=Qd;function gy(A){return A===A&&!m(A)}var al=gy;function Yv(A){for(var L=Ma(A),oe=L.length;oe--;){var Me=L[oe],Ue=A[Me];L[oe]=[Me,Ue,al(Ue)]}return L}var Zv=Yv;function Jf(A,L){return function(oe){return oe==null?!1:oe[A]===L&&(L!==void 0||A in Object(oe))}}var Ns=Jf;function py(A){var L=Zv(A);return L.length==1&&L[0][2]?Ns(L[0][0],L[0][1]):function(oe){return oe===A||Fh(oe,A,L)}}var Nc=py;function Cu(A,L,oe){var Me=A==null?void 0:qs(A,L);return Me===void 0?oe:Me}var vy=Cu,Ic=1,my=2;function yy(A,L){return cr(A)&&al(L)?Ns(ua(A),L):function(oe){var Me=vy(oe,A);return Me===void 0&&Me===L?eu(oe,A):bi(L,Me,Ic|my)}}var by=yy;function wy(A){return function(L){return L==null?void 0:L[A]}}var Ey=wy;function qd(A){return function(L){return qs(L,A)}}var Kv=qd;function Cl(A){return cr(A)?Ey(ua(A)):Kv(A)}var bp=Cl;function jh(A){return typeof A=="function"?A:A==null?Tr:typeof A=="object"?(0,rr.Z)(A)?by(A[0],A[1]):Nc(A):bp(A)}var ja=jh;function su(A,L,oe){return Hv(A,L,ja(oe,2))}var Ed=su;function wp(A,L){return A&&Ph(A,L,Ma)}var Ep=wp;function Jv(A,L){return function(oe,Me){if(oe==null)return oe;if(!dc(oe))return A(oe,Me);for(var Ue=oe.length,rt=L?Ue:-1,wt=Object(oe);(L?rt--:++rt<Ue)&&Me(wt[rt],rt,wt)!==!1;);return oe}}var Qv=Jv,qv=Qv(Ep),xp=qv;function eg(A,L){var oe=-1,Me=dc(A)?Array(A.length):[];return xp(A,function(Ue,rt,wt){Me[++oe]=L(Ue,rt,wt)}),Me}var yh=eg;function xd(A,L){var oe=A.length;for(A.sort(L);oe--;)A[oe]=A[oe].value;return A}var em=xd;function tg(A,L){if(A!==L){var oe=A!==void 0,Me=A===null,Ue=A===A,rt=hn(A),wt=L!==void 0,zt=L===null,Qt=L===L,wn=hn(L);if(!zt&&!wn&&!rt&&A>L||rt&&wt&&Qt&&!zt&&!wn||Me&&wt&&Qt||!oe&&Qt||!Ue)return 1;if(!Me&&!rt&&!wn&&A<L||wn&&oe&&Ue&&!Me&&!rt||zt&&oe&&Ue||!wt&&Ue||!Qt)return-1}return 0}var zh=tg;function bc(A,L,oe){for(var Me=-1,Ue=A.criteria,rt=L.criteria,wt=Ue.length,zt=oe.length;++Me<wt;){var Qt=zh(Ue[Me],rt[Me]);if(Qt){if(Me>=zt)return Qt;var wn=oe[Me];return Qt*(wn=="desc"?-1:1)}}return A.index-L.index}var bh=bc;function tm(A,L,oe){L.length?L=st(L,function(rt){return(0,rr.Z)(rt)?function(wt){return qs(wt,rt.length===1?rt[0]:rt)}:rt}):L=[Tr];var Me=-1;L=st(L,pc(ja));var Ue=yh(A,function(rt,wt,zt){var Qt=st(L,function(wn){return wn(rt)});return{criteria:Qt,index:++Me,value:rt}});return em(Ue,function(rt,wt){return bh(rt,wt,oe)})}var nm=tm,Sp=it(function(A,L){if(A==null)return[];var oe=L.length;return oe>1&&ht(A,L[0],L[1])?L=[]:oe>2&&ht(L[0],L[1],L[2])&&(L=[L[0]]),nm(A,In(L,1),[])}),rm=Sp;function Cp(A,L,oe,Me){for(var Ue=-1,rt=A==null?0:A.length;++Ue<rt;){var wt=A[Ue];L(Me,wt,oe(wt),A)}return Me}var ng=Cp;function Ol(A,L,oe,Me){return xp(A,function(Ue,rt,wt){L(Me,Ue,oe(Ue),wt)}),Me}var Ls=Ol;function wh(A,L){return function(oe,Me){var Ue=(0,rr.Z)(oe)?ng:Ls,rt=L?L():{};return Ue(oe,A,ja(Me,2),rt)}}var Yc=wh,Op=Object.prototype,im=Op.hasOwnProperty,Ea=Yc(function(A,L,oe){im.call(A,oe)?A[oe].push(L):Vs(A,oe,[L])}),om=Ea,Tp=200;function Sd(A,L,oe,Me){var Ue=-1,rt=$d,wt=!0,zt=A.length,Qt=[],wn=L.length;if(!zt)return Qt;oe&&(L=st(L,pc(oe))),Me?(rt=Zl,wt=!1):L.length>=Tp&&(rt=da,wt=!1,L=new Ks(L));e:for(;++Ue<zt;){var Yn=A[Ue],mr=oe==null?Yn:oe(Yn);if(Yn=Me||Yn!==0?Yn:0,wt&&mr===mr){for(var Lr=wn;Lr--;)if(L[Lr]===mr)continue e;Qt.push(Yn)}else rt(L,mr,Me)||Qt.push(Yn)}return Qt}var Tl=Sd,Mp=it(function(A,L){return It(A)?Tl(A,In(L,1,It,!0)):[]}),xy=Mp;function Sy(A,L,oe){for(var Me=-1,Ue=A.length;++Me<Ue;){var rt=A[Me],wt=L(rt);if(wt!=null&&(zt===void 0?wt===wt&&!hn(wt):oe(wt,zt)))var zt=wt,Qt=rt}return Qt}var sm=Sy;function rg(A,L){return A>L}var wc=rg;function Cy(A){return A&&A.length?sm(A,Tr,wc):void 0}var Oy=Cy,Ty=0;function My(A){var L=++Ty;return qe(A)+L}var Py=My;function Ay(A,L,oe,Me){var Ue=-1,rt=A==null?0:A.length;for(Me&&rt&&(oe=A[++Ue]);++Ue<rt;)oe=L(oe,A[Ue],Ue,A);return oe}var Pp=Ay;function _y(A){return function(L){return A==null?void 0:A[L]}}var Ap=_y,Dy={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ny=Ap(Dy),Iy=Ny,Fu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rc="\\u0300-\\u036f",_p="\\ufe20-\\ufe2f",Ry="\\u20d0-\\u20ff",Ly=Rc+_p+Ry,am="["+Ly+"]",By=RegExp(am,"g");function ky(A){return A=qe(A),A&&A.replace(Fu,Iy).replace(By,"")}var Gy=ky,yf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Dp(A){return A.match(yf)||[]}var bf=Dp,Uh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Np(A){return Uh.test(A)}var Cd=Np,Ml="\\ud800-\\udfff",Qf="\\u0300-\\u036f",Ip="\\ufe20-\\ufe2f",Rp="\\u20d0-\\u20ff",qf=Qf+Ip+Rp,ig="\\u2700-\\u27bf",Od="a-z\\xdf-\\xf6\\xf8-\\xff",Lp="\\xac\\xb1\\xd7\\xf7",Bp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kp="\\u2000-\\u206f",pa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Eh="A-Z\\xc0-\\xd6\\xd8-\\xde",eh="\\ufe0e\\ufe0f",Pl=Lp+Bp+kp+pa,Jl="['\u2019]",og="["+Pl+"]",Gp="["+qf+"]",sg="\\d+",Fp="["+ig+"]",Td="["+Od+"]",ag="[^"+Ml+Pl+sg+ig+Od+Eh+"]",Vh="\\ud83c[\\udffb-\\udfff]",jp="(?:"+Gp+"|"+Vh+")",wf="[^"+Ml+"]",Md="(?:\\ud83c[\\udde6-\\uddff]){2}",ug="[\\ud800-\\udbff][\\udc00-\\udfff]",xh="["+Eh+"]",um="\\u200d",zp="(?:"+Td+"|"+ag+")",cm="(?:"+xh+"|"+ag+")",Up="(?:"+Jl+"(?:d|ll|m|re|s|t|ve))?",Vp="(?:"+Jl+"(?:D|LL|M|RE|S|T|VE))?",Wp=jp+"?",$p="["+eh+"]?",lm="(?:"+um+"(?:"+[wf,Md,ug].join("|")+")"+$p+Wp+")*",fm="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cg=$p+Wp+lm,Hp="(?:"+[Fp,Md,ug].join("|")+")"+cg,Xp=RegExp([xh+"?"+Td+"+"+Up+"(?="+[og,xh,"$"].join("|")+")",cm+"+"+Vp+"(?="+[og,xh+zp,"$"].join("|")+")",xh+"?"+zp+"+"+Up,xh+"+"+Vp,hm,fm,sg,Hp].join("|"),"g");function dm(A){return A.match(Xp)||[]}var gm=dm;function pm(A,L,oe){return A=qe(A),L=oe?void 0:L,L===void 0?Cd(A)?gm(A):bf(A):A.match(L)||[]}var lg=pm,vm="['\u2019]",mm=RegExp(vm,"g");function ym(A){return function(L){return Pp(lg(Gy(L).replace(mm,"")),A,"")}}var ju=ym;function fg(A,L,oe){var Me=-1,Ue=A.length;L<0&&(L=-L>Ue?0:Ue+L),oe=oe>Ue?Ue:oe,oe<0&&(oe+=Ue),Ue=L>oe?0:oe-L>>>0,L>>>=0;for(var rt=Array(Ue);++Me<Ue;)rt[Me]=A[Me+L];return rt}var bm=fg;function wm(A,L,oe){var Me=A.length;return oe=oe===void 0?Me:oe,!L&&oe>=Me?A:bm(A,L,oe)}var Em=wm,xm="\\ud800-\\udfff",hg="\\u0300-\\u036f",Sm="\\ufe20-\\ufe2f",Na="\\u20d0-\\u20ff",Fy=hg+Sm+Na,Cm="\\ufe0e\\ufe0f",Om="\\u200d",Tm=RegExp("["+Om+xm+Fy+Cm+"]");function Yp(A){return Tm.test(A)}var Zp=Yp;function Kp(A){return A.split("")}var Jp=Kp,Wh="\\ud800-\\udfff",Pd="\\u0300-\\u036f",Qp="\\ufe20-\\ufe2f",Ad="\\u20d0-\\u20ff",qp=Pd+Qp+Ad,ev="\\ufe0e\\ufe0f",tv="["+Wh+"]",_d="["+qp+"]",Dd="\\ud83c[\\udffb-\\udfff]",nv="(?:"+_d+"|"+Dd+")",dg="[^"+Wh+"]",gg="(?:\\ud83c[\\udde6-\\uddff]){2}",pg="[\\ud800-\\udbff][\\udc00-\\udfff]",vg="\\u200d",mg=nv+"?",yg="["+ev+"]?",rv="(?:"+vg+"(?:"+[dg,gg,pg].join("|")+")"+yg+mg+")*",iv=yg+mg+rv,ov="(?:"+[dg+_d+"?",_d,gg,pg,tv].join("|")+")",sv=RegExp(Dd+"(?="+Dd+")|"+ov+iv,"g");function av(A){return A.match(sv)||[]}var uv=av;function cv(A){return Zp(A)?uv(A):Jp(A)}var C=cv;function R(A){return function(L){L=qe(L);var oe=Zp(L)?C(L):void 0,Me=oe?oe[0]:L.charAt(0),Ue=oe?Em(oe,1).join(""):L.slice(1);return Me[A]()+Ue}}var be=R,Ve=be("toUpperCase"),St=Ve,Zt=ju(function(A,L,oe){return A+(oe?" ":"")+St(L)}),Sn=Zt;function kn(A){return St(qe(A).toLowerCase())}var ur=kn,ni=ju(function(A,L,oe){return L=L.toLowerCase(),A+(oe?ur(L):L)}),ui=ni,Ni=ju(function(A,L,oe){return A+(oe?" ":"")+L.toUpperCase()}),go=Ni,Io=ju(function(A,L,oe){return A+(oe?" ":"")+L.toLowerCase()}),Jo=Io,ys=be("toLowerCase"),Wo=ys;const Es=A=>{const L=Object.create(null);return oe=>L[oe]||(L[oe]=A(oe))},Is=Es(A=>A.replace(/\B([A-Z])/g,"-$1").toLowerCase()),zu=Es(A=>Sn(ui(A)).replace(/ /g,"")),Iu=Es(A=>go(A).replace(/ /g,"_")),fu=Es(A=>Jo(A).replace(/ /g,".")),Ia=Es(A=>Jo(A).replace(/ /g,"/")),Ra=Es(A=>St(Jo(A))),Ru=Es(A=>Sn(ui(A)));function ul(A){let L=2166136261,oe=!1,Me=A;for(let Ue=0,rt=Me.length;Ue<rt;Ue+=1){let wt=Me.charCodeAt(Ue);wt>127&&!oe&&(Me=unescape(encodeURIComponent(Me)),wt=Me.charCodeAt(Ue),oe=!0),L^=wt,L+=(L<<1)+(L<<4)+(L<<7)+(L<<8)+(L<<24)}return L>>>0}function bg(){let A="";const L="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let oe=0,Me=L.length;oe<Me;oe+=1){const Ue=L[oe],rt=Math.random()*16|0,wt=Ue==="x"?rt:Ue==="y"?rt&3|8:Ue;A+=wt.toString(16)}return A}function Q0(A,L,oe){const Me=Math.min(2,Math.floor(A.length*.34));let Ue=Math.floor(A.length*.4)+1,rt,wt=!1;const zt=A.toLowerCase();for(const Qt of L){const wn=oe(Qt);if(wn!==void 0&&Math.abs(wn.length-zt.length)<=Me){const Yn=wn.toLowerCase();if(Yn===zt){if(wn===A)continue;return Qt}if(wt||wn.length<3)continue;const mr=jy(zt,Yn,Ue-1);if(mr===void 0)continue;mr<3?(wt=!0,rt=Qt):(Ue=mr,rt=Qt)}}return rt}function jy(A,L,oe){let Me=new Array(L.length+1),Ue=new Array(L.length+1);const rt=oe+1;for(let zt=0;zt<=L.length;zt+=1)Me[zt]=zt;for(let zt=1;zt<=A.length;zt+=1){const Qt=A.charCodeAt(zt-1),wn=zt>oe?zt-oe:1,Yn=L.length>oe+zt?oe+zt:L.length;Ue[0]=zt;let mr=zt;for(let Fr=1;Fr<wn;Fr+=1)Ue[Fr]=rt;for(let Fr=wn;Fr<=Yn;Fr+=1){const Gi=Qt===L.charCodeAt(Fr-1)?Me[Fr-1]:Math.min(Me[Fr]+1,Ue[Fr-1]+1,Me[Fr-1]+2);Ue[Fr]=Gi,mr=Math.min(mr,Gi)}for(let Fr=Yn+1;Fr<=L.length;Fr+=1)Ue[Fr]=rt;if(mr>oe)return;const Lr=Me;Me=Ue,Ue=Lr}const wt=Me[L.length];return wt>oe?void 0:wt}var Mm="[object Number]";function q0(A){return typeof A=="number"||At(A)&&Ct(A)==Mm}var eb=q0;function zy(A,L,oe){return A===A&&(oe!==void 0&&(A=A<=oe?A:oe),L!==void 0&&(A=A>=L?A:L)),A}var Uy=zy;function tb(A,L,oe){return oe===void 0&&(oe=L,L=void 0),oe!==void 0&&(oe=Ot(oe),oe=oe===oe?oe:0),L!==void 0&&(L=Ot(L),L=L===L?L:0),Uy(Ot(A),L,oe)}var Sh=tb;function Vy(A,L){return(A%L+L)%L}function lv(A,L){if(L==null)L=A==null?1:A,A=0;else if(L<A){const oe=A;A=L,L=oe}return Math.floor(Math.random()*(L-A+1)+A)}function Wy(A){return typeof A=="string"&&A.slice(-1)==="%"}function Nd(A,L){if(A==null)return 0;let oe;if(typeof A=="string"){if(oe=parseFloat(A),Wy(A)&&(oe/=100,Number.isFinite(oe)))return oe*L}else oe=A;return Number.isFinite(oe)?oe>0&&oe<1?oe*L:oe:0}function nb(A,L){function oe(wt){const zt=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${wt})$`).exec(A);return zt?zt[1]:null}const Me=parseFloat(A);if(Number.isNaN(Me))return null;let Ue;if(L==null)Ue="[A-Za-z]*";else if(Array.isArray(L)){if(L.length===0)return null;Ue=L.join("|")}else typeof L=="string"&&(Ue=L);const rt=oe(Ue);return rt===null?null:{unit:rt,value:Me}}function rb(A){if(typeof A=="object"){let oe=0,Me=0,Ue=0,rt=0;return A.vertical!=null&&Number.isFinite(A.vertical)&&(Me=rt=A.vertical),A.horizontal!=null&&Number.isFinite(A.horizontal)&&(Ue=oe=A.horizontal),A.left!=null&&Number.isFinite(A.left)&&(oe=A.left),A.top!=null&&Number.isFinite(A.top)&&(Me=A.top),A.right!=null&&Number.isFinite(A.right)&&(Ue=A.right),A.bottom!=null&&Number.isFinite(A.bottom)&&(rt=A.bottom),{top:Me,right:Ue,bottom:rt,left:oe}}let L=0;return A!=null&&Number.isFinite(A)&&(L=A),{top:L,right:L,bottom:L,left:L}}let vu=!1,$y=!1,Hy=!1,Xy=!1,Yy=!1,Zy=!1,Ky=!1,Jy=!1,Qy=!1,qy=!1,e0=!1,t0=!1,n0=!1,r0=!1,i0=!1,o0=!1;if(typeof navigator=="object"){const A=navigator.userAgent;vu=A.indexOf("Macintosh")>=0,$y=!!A.match(/(iPad|iPhone|iPod)/g),Hy=A.indexOf("Windows")>=0,Xy=A.indexOf("MSIE")>=0,Yy=!!A.match(/Trident\/7\./),Zy=!!A.match(/Edge\//),Ky=A.indexOf("Mozilla/")>=0&&A.indexOf("MSIE")<0&&A.indexOf("Edge/")<0,Qy=A.indexOf("Chrome/")>=0&&A.indexOf("Edge/")<0,qy=A.indexOf("Opera/")>=0||A.indexOf("OPR/")>=0,e0=A.indexOf("Firefox/")>=0,t0=A.indexOf("AppleWebKit/")>=0&&A.indexOf("Chrome/")<0&&A.indexOf("Edge/")<0,typeof document=="object"&&(o0=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||A.indexOf("Opera/")>=0)}if(typeof window=="object"&&(Jy=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,r0=window.PointerEvent!=null&&!vu),typeof document=="object"){n0="ontouchstart"in document.documentElement;try{const A=Object.defineProperty({},"passive",{get(){i0=!0}}),L=document.createElement("div");L.addEventListener&&L.addEventListener("click",()=>{},A)}catch(A){}}var $h;(function(A){A.IS_MAC=vu,A.IS_IOS=$y,A.IS_WINDOWS=Hy,A.IS_IE=Xy,A.IS_IE11=Yy,A.IS_EDGE=Zy,A.IS_NETSCAPE=Ky,A.IS_CHROME_APP=Jy,A.IS_CHROME=Qy,A.IS_OPERA=qy,A.IS_FIREFOX=e0,A.IS_SAFARI=t0,A.SUPPORT_TOUCH=n0,A.SUPPORT_POINTER=r0,A.SUPPORT_PASSIVE=i0,A.NO_FOREIGNOBJECT=o0,A.SUPPORT_FOREIGNOBJECT=!A.NO_FOREIGNOBJECT})($h||($h={})),function(A){function L(){const rt=window.module;return rt!=null&&rt.hot!=null&&rt.hot.status!=null?rt.hot.status():"unkonwn"}A.getHMRStatus=L;function oe(){return L()==="apply"}A.isApplyingHMR=oe;const Me={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function Ue(rt){const wt=document.createElement(Me[rt]||"div"),zt=`on${rt}`;let Qt=zt in wt;return Qt||(wt.setAttribute(zt,"return;"),Qt=typeof wt[zt]=="function"),Qt}A.isEventSupported=Ue}($h||($h={}));const Pm=/[\t\r\n\f]/g,Am=/\S+/g,Id=A=>` ${A} `;function Hh(A){return A&&A.getAttribute&&A.getAttribute("class")||""}function wg(A,L){if(A==null||L==null)return!1;const oe=Id(Hh(A)),Me=Id(L);return A.nodeType===1?oe.replace(Pm," ").includes(Me):!1}function Eg(A,L){if(!(A==null||L==null)){if(typeof L=="function")return Eg(A,L(Hh(A)));if(typeof L=="string"&&A.nodeType===1){const oe=L.match(Am)||[],Me=Id(Hh(A)).replace(Pm," ");let Ue=oe.reduce((rt,wt)=>rt.indexOf(Id(wt))<0?`${rt}${wt} `:rt,Me);Ue=Ue.trim(),Me!==Ue&&A.setAttribute("class",Ue)}}}function xg(A,L){if(A!=null){if(typeof L=="function")return xg(A,L(Hh(A)));if((!L||typeof L=="string")&&A.nodeType===1){const oe=(L||"").match(Am)||[],Me=Id(Hh(A)).replace(Pm," ");let Ue=oe.reduce((rt,wt)=>{const zt=Id(wt);return rt.indexOf(zt)>-1?rt.replace(zt," "):rt},Me);Ue=L?Ue.trim():"",Me!==Ue&&A.setAttribute("class",Ue)}}}function _m(A,L,oe){if(!(A==null||L==null)){if(oe!=null&&typeof L=="string"){oe?Eg(A,L):xg(A,L);return}if(typeof L=="function")return _m(A,L(Hh(A),oe),oe);typeof L=="string"&&(L.match(Am)||[]).forEach(Ue=>{wg(A,Ue)?xg(A,Ue):Eg(A,Ue)})}}let s0=0;function Qa(){return s0+=1,`v${s0}`}function Ob(A){return(A.id==null||A.id==="")&&(A.id=Qa()),A.id}function Sg(A){return A==null?!1:typeof A.getScreenCTM=="function"&&A instanceof SVGElement}const Ef={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Dm="1.1";function ib(A,L=document){return L.createElement(A)}function a0(A,L=Ef.xhtml,oe=document){return oe.createElementNS(L,A)}function Ch(A,L=document){return a0(A,Ef.svg,L)}function Cg(A){if(A){const oe=`<svg xmlns="${Ef.svg}" xmlns:xlink="${Ef.xlink}" version="${Dm}">${A}</svg>`,{documentElement:Me}=Nm(oe,{async:!1});return Me}const L=document.createElementNS(Ef.svg,"svg");return L.setAttributeNS(Ef.xmlns,"xmlns:xlink",Ef.xlink),L.setAttribute("version",Dm),L}function Nm(A,L={}){let oe;try{const Me=new DOMParser;if(L.async!=null){const Ue=Me;Ue.async=L.async}oe=Me.parseFromString(A,L.mimeType||"text/xml")}catch(Me){oe=void 0}if(!oe||oe.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${A}`);return oe}function u0(A,L=!0){const oe=A.nodeName;return L?oe.toLowerCase():oe.toUpperCase()}function Im(A){let L=0,oe=A.previousSibling;for(;oe;)oe.nodeType===1&&(L+=1),oe=oe.previousSibling;return L}function Og(A,L){return A.querySelectorAll(L)}function c0(A,L){return A.querySelector(L)}function l0(A,L,oe){const Me=A.ownerSVGElement;let Ue=A.parentNode;for(;Ue&&Ue!==oe&&Ue!==Me;){if(wg(Ue,L))return Ue;Ue=Ue.parentNode}return null}function f0(A,L){const oe=L&&L.parentNode;return A===oe||!!(oe&&oe.nodeType===1&&A.compareDocumentPosition(oe)&16)}function h0(A){A&&(Array.isArray(A)?A:[A]).forEach(oe=>{oe.parentNode&&oe.parentNode.removeChild(oe)})}function Xh(A){for(;A.firstChild;)A.removeChild(A.firstChild)}function Tg(A,L){(Array.isArray(L)?L:[L]).forEach(Me=>{Me!=null&&A.appendChild(Me)})}function Rm(A,L){const oe=A.firstChild;return oe?Oh(oe,L):Tg(A,L)}function Oh(A,L){const oe=A.parentNode;oe&&(Array.isArray(L)?L:[L]).forEach(Ue=>{Ue!=null&&oe.insertBefore(Ue,A)})}function ob(A,L){const oe=A.parentNode;oe&&(Array.isArray(L)?L:[L]).forEach(Ue=>{Ue!=null&&oe.insertBefore(Ue,A.nextSibling)})}function d0(A,L){L!=null&&L.appendChild(A)}function Lm(A){return!!A&&A.nodeType===1}function g0(A){try{return A instanceof HTMLElement}catch(L){return typeof A=="object"&&A.nodeType===1&&typeof A.style=="object"&&typeof A.ownerDocument=="object"}}function p0(A,L){const oe=[];let Me=A.firstChild;for(;Me;Me=Me.nextSibling)Me.nodeType===1&&(!L||wg(Me,L))&&oe.push(Me);return oe}const v0=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust","gradientUnits"];function Vi(A,L){return A.getAttribute(L)}function Bm(A,L){const oe=Gm(L);oe.ns?A.hasAttributeNS(oe.ns,oe.local)&&A.removeAttributeNS(oe.ns,oe.local):A.hasAttribute(L)&&A.removeAttribute(L)}function fv(A,L,oe){if(oe==null)return Bm(A,L);const Me=Gm(L);Me.ns&&typeof oe=="string"?A.setAttributeNS(Me.ns,L,oe):L==="id"?A.id=`${oe}`:A.setAttribute(L,`${oe}`)}function km(A,L){Object.keys(L).forEach(oe=>{fv(A,oe,L[oe])})}function sc(A,L,oe){if(L==null){const Me=A.attributes,Ue={};for(let rt=0;rt<Me.length;rt+=1)Ue[Me[rt].name]=Me[rt].value;return Ue}if(typeof L=="string"&&oe===void 0)return A.getAttribute(L);typeof L=="object"?km(A,L):fv(A,L,oe)}function Gm(A){if(A.indexOf(":")!==-1){const L=A.split(":");return{ns:Ef[L[0]],local:L[1]}}return{ns:null,local:A}}function Fm(A){const L={};return Object.keys(A).forEach(oe=>{const Me=v0.includes(oe)?oe:Is(oe);L[Me]=A[oe]}),L}function Mg(A){const L={};return A.split(";").forEach(Me=>{const Ue=Me.trim();if(Ue){const rt=Ue.split("=");rt.length&&(L[rt[0].trim()]=rt[1]?rt[1].trim():"")}}),L}function th(A,L){return Object.keys(L).forEach(oe=>{if(oe==="class")A[oe]=A[oe]?`${A[oe]} ${L[oe]}`:L[oe];else if(oe==="style"){const Me=typeof A[oe]=="object",Ue=typeof L[oe]=="object";let rt,wt;Me&&Ue?(rt=A[oe],wt=L[oe]):Me?(rt=A[oe],wt=Mg(L[oe])):Ue?(rt=Mg(A[oe]),wt=L[oe]):(rt=Mg(A[oe]),wt=Mg(L[oe])),A[oe]=th(rt,wt)}else A[oe]=L[oe]}),A}function m0(A,L,oe={}){const Me=oe.offset||0,Ue=[],rt=[];let wt,zt,Qt=null;for(let wn=0;wn<A.length;wn+=1){wt=rt[wn]=A[wn];for(let Yn=0,mr=L.length;Yn<mr;Yn+=1){const Lr=L[Yn],Fr=Lr.start+Me,Gi=Lr.end+Me;wn>=Fr&&wn<Gi&&(typeof wt=="string"?wt=rt[wn]={t:A[wn],attrs:Lr.attrs}:wt.attrs=th(th({},wt.attrs),Lr.attrs),oe.includeAnnotationIndices&&(wt.annotations==null&&(wt.annotations=[]),wt.annotations.push(Yn)))}zt=rt[wn-1],zt?m(wt)&&m(zt)?(Qt=Qt,JSON.stringify(wt.attrs)===JSON.stringify(zt.attrs)?Qt.t+=wt.t:(Ue.push(Qt),Qt=wt)):m(wt)||m(zt)?(Qt=Qt,Ue.push(Qt),Qt=wt):Qt=(Qt||"")+wt:Qt=wt}return Qt!=null&&Ue.push(Qt),Ue}function sb(A,L){return A?A.filter(oe=>oe.start<L&&L<=oe.end):[]}function ab(A,L,oe){return A?A.filter(Me=>L>=Me.start&&L<Me.end||oe>Me.start&&oe<=Me.end||Me.start>=L&&Me.end<oe):[]}function ub(A,L,oe){return A&&A.forEach(Me=>{Me.start<L&&Me.end>=L?Me.end+=oe:Me.start>=L&&(Me.start+=oe,Me.end+=oe)}),A}function xf(A){return A.replace(/ /g,"\xA0")}var Al;(function(A){function L(wn){const Yn="data:";return wn.substr(0,Yn.length)===Yn}A.isDataUrl=L;function oe(wn,Yn){if(!wn||L(wn)){setTimeout(()=>Yn(null,wn));return}const mr=()=>{Yn(new Error(`Failed to load image: ${wn}`))},Lr=window.FileReader?Gi=>{if(Gi.status===200){const po=new FileReader;po.onload=Ki=>{const Lo=Ki.target.result;Yn(null,Lo)},po.onerror=mr,po.readAsDataURL(Gi.response)}else mr()}:Gi=>{const po=Ki=>{const Fo=[];for(let oi=0;oi<Ki.length;oi+=32768)Fo.push(String.fromCharCode.apply(null,Ki.subarray(oi,oi+32768)));return Fo.join("")};if(Gi.status===200){let Ki=wn.split(".").pop()||"png";Ki==="svg"&&(Ki="svg+xml");const Lo=`data:image/${Ki};base64,`,Fo=new Uint8Array(Gi.response),oi=Lo+btoa(po(Fo));Yn(null,oi)}else mr()},Fr=new XMLHttpRequest;Fr.responseType=window.FileReader?"blob":"arraybuffer",Fr.open("GET",wn,!0),Fr.addEventListener("error",mr),Fr.addEventListener("load",()=>Lr(Fr)),Fr.send()}A.imageToDataUri=oe;function Me(wn){let Yn=wn.replace(/\s/g,"");Yn=decodeURIComponent(Yn);const mr=Yn.indexOf(","),Lr=Yn.slice(0,mr),Fr=Lr.split(":")[1].split(";")[0],Gi=Yn.slice(mr+1);let po;Lr.indexOf("base64")>=0?po=atob(Gi):po=unescape(encodeURIComponent(Gi));const Ki=new Uint8Array(po.length);for(let Lo=0;Lo<po.length;Lo+=1)Ki[Lo]=po.charCodeAt(Lo);return new Blob([Ki],{type:Fr})}A.dataUriToBlob=Me;function Ue(wn,Yn){const mr=window.navigator.msSaveBlob;if(mr)mr(wn,Yn);else{const Lr=window.URL.createObjectURL(wn),Fr=document.createElement("a");Fr.href=Lr,Fr.download=Yn,document.body.appendChild(Fr),Fr.click(),document.body.removeChild(Fr),window.URL.revokeObjectURL(Lr)}}A.downloadBlob=Ue;function rt(wn,Yn){const mr=Me(wn);Ue(mr,Yn)}A.downloadDataUri=rt;function wt(wn){const Yn=wn.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return Yn&&Yn[2]?Yn[2].replace(/\s+/," ").split(" "):null}function zt(wn){const Yn=parseFloat(wn);return Number.isNaN(Yn)?null:Yn}function Qt(wn,Yn={}){let mr=null;const Lr=oi=>(mr==null&&(mr=wt(wn)),mr!=null?zt(mr[oi]):null),Fr=oi=>{const vo=wn.match(oi);return vo&&vo[2]?zt(vo[2]):null};let Gi=Yn.width;if(Gi==null&&(Gi=Fr(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),Gi==null&&(Gi=Lr(2)),Gi==null)throw new Error("Can not parse width from svg string");let po=Yn.height;if(po==null&&(po=Fr(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),po==null&&(po=Lr(3)),po==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(wn).replace(/'/g,"%27").replace(/"/g,"%22")}`}A.svgToDataUrl=Qt})(Al||(Al={}));let cl;const Lc={px(A){return A},mm(A){return cl*A},cm(A){return cl*A*10},in(A){return cl*A*25.4},pt(A){return cl*(25.4*A/72)},pc(A){return cl*(25.4*A/6)}};var Th;(function(A){function L(Me,Ue,rt){const wt=document.createElement("div"),zt=wt.style;zt.display="inline-block",zt.position="absolute",zt.left="-15000px",zt.top="-15000px",zt.width=Me+(rt||"px"),zt.height=Ue+(rt||"px"),document.body.appendChild(wt);const Qt=wt.getBoundingClientRect(),wn={width:Qt.width||0,height:Qt.height||0};return document.body.removeChild(wt),wn}A.measure=L;function oe(Me,Ue){cl==null&&(cl=L("1","1","mm").width);const rt=Ue?Lc[Ue]:null;return rt?rt(Me):Me}A.toPx=oe})(Th||(Th={}));const hv=/-(.)/g;function Pg(A){return A.replace(hv,(L,oe)=>oe.toUpperCase())}const jm={},y0=["webkit","ms","moz","o"],zm=typeof document!="undefined"?document.createElement("div").style:{};function dv(A){for(let L=0;L<y0.length;L+=1){const oe=y0[L]+A;if(oe in zm)return oe}return null}function Um(A){const L=Pg(A);if(jm[L]==null){const oe=L.charAt(0).toUpperCase()+L.slice(1);jm[L]=L in zm?L:dv(oe)}return jm[L]}function b0(A,L,oe){const Me=Um(L);Me!=null&&(A[Me]=oe),A[L]=oe}function gv(A,L){const oe=A.ownerDocument&&A.ownerDocument.defaultView&&A.ownerDocument.defaultView.opener?A.ownerDocument.defaultView.getComputedStyle(A,null):window.getComputedStyle(A,null);return oe&&L?oe.getPropertyValue(L)||oe[L]:oe}function cb(A){const L=gv(A);return L!=null&&(L.overflow==="scroll"||L.overflow==="auto")}const lb=function(){if(typeof document=="undefined")return function(){};const A=document;return A.selection?function(){A.selection.empty()}:window.getSelection?function(){const L=window.getSelection();L&&(L.empty?L.empty():L.removeAllRanges&&L.removeAllRanges())}:function(){}}(),fb={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Vm(A){return/^--/.test(A)}function Sf(A,L,oe){const Me=window.getComputedStyle(A,null);return oe?Me.getPropertyValue(L)||void 0:Me[L]||A.style[L]}function Ag(A,L){return parseInt(Sf(A,L),10)||0}function hb(A,L){return!fb[A]&&typeof L=="number"?`${L}px`:L}function w0(A,L,oe){if(typeof L=="string"){const Me=Vm(L);if(Me||(L=Um(L)),oe===void 0)return Sf(A,L,Me);Me||(oe=hb(L,oe));const Ue=A.style;Me?Ue.setProperty(L,oe):Ue[L]=oe;return}for(const Me in L)w0(A,Me,L[Me])}const _g=new WeakMap;function pv(A,L){const oe=ui(L),Me=_g.get(A);if(Me)return Me[oe]}function Wm(A,L,oe){const Me=ui(L),Ue=_g.get(A);Ue?Ue[Me]=oe:_g.set(A,{[Me]:oe})}function E0(A,L,oe){if(!L){const Me={};return Object.keys(_g).forEach(Ue=>{Me[Ue]=pv(A,Ue)}),Me}if(typeof L=="string"){if(oe===void 0)return pv(A,L);Wm(A,L,oe);return}for(const Me in L)E0(A,Me,L[Me])}const x0={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function $m(A,L,oe){if(L){if(typeof L=="string"){if(L=x0[L]||L,arguments.length<3)return A[L];A[L]=oe;return}for(const Me in L)$m(A,Me,L[Me])}}class ca{get[Symbol.toStringTag](){return ca.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(L){this.node.id=L}constructor(L,oe,Me){if(!L)throw new TypeError("Invalid element to create vector");let Ue;if(ca.isVector(L))Ue=L.node;else if(typeof L=="string")if(L.toLowerCase()==="svg")Ue=Cg();else if(L[0]==="<"){const rt=Cg(L);Ue=document.importNode(rt.firstChild,!0)}else Ue=document.createElementNS(Ef.svg,L);else Ue=L;this.node=Ue,oe&&this.setAttributes(oe),Me&&this.append(Me)}transform(L,oe){return L==null?Sv(this.node):(Sv(this.node,L,oe),this)}translate(L,oe=0,Me={}){return L==null?Cv(this.node):(Cv(this.node,L,oe,Me),this)}rotate(L,oe,Me,Ue={}){return L==null?Ov(this.node):(Ov(this.node,L,oe,Me,Ue),this)}scale(L,oe){return L==null?Tv(this.node):(Tv(this.node,L,oe),this)}getTransformToElement(L){const oe=ca.toNode(L);return Zh(this.node,oe)}removeAttribute(L){return Bm(this.node,L),this}getAttribute(L){return Vi(this.node,L)}setAttribute(L,oe){return fv(this.node,L,oe),this}setAttributes(L){return km(this.node,L),this}attr(L,oe){return L==null?sc(this.node):typeof L=="string"&&oe===void 0?sc(this.node,L):(typeof L=="object"?sc(this.node,L):sc(this.node,L,oe),this)}svg(){return this.node instanceof SVGSVGElement?this:ca.create(this.node.ownerSVGElement)}defs(){const L=this.svg()||this,oe=L.node.getElementsByTagName("defs")[0];return oe?ca.create(oe):ca.create("defs").appendTo(L)}text(L,oe={}){return Ym(this.node,L,oe),this}tagName(){return u0(this.node)}clone(){return ca.create(this.node.cloneNode(!0))}remove(){return h0(this.node),this}empty(){return Xh(this.node),this}append(L){return Tg(this.node,ca.toNodes(L)),this}appendTo(L){return d0(this.node,ca.isVector(L)?L.node:L),this}prepend(L){return Rm(this.node,ca.toNodes(L)),this}before(L){return Oh(this.node,ca.toNodes(L)),this}replace(L){return this.node.parentNode&&this.node.parentNode.replaceChild(ca.toNode(L),this.node),ca.create(L)}first(){return this.node.firstChild?ca.create(this.node.firstChild):null}last(){return this.node.lastChild?ca.create(this.node.lastChild):null}get(L){const oe=this.node.childNodes[L];return oe?ca.create(oe):null}indexOf(L){return Array.prototype.slice.call(this.node.childNodes).indexOf(ca.toNode(L))}find(L){const oe=[],Me=Og(this.node,L);if(Me)for(let Ue=0,rt=Me.length;Ue<rt;Ue+=1)oe.push(ca.create(Me[Ue]));return oe}findOne(L){const oe=c0(this.node,L);return oe?ca.create(oe):null}findParentByClass(L,oe){const Me=l0(this.node,L,oe);return Me?ca.create(Me):null}matches(L){const oe=this.node,Me=this.node.matches,Ue=oe.matches||oe.matchesSelector||oe.msMatchesSelector||oe.mozMatchesSelector||oe.webkitMatchesSelector||oe.oMatchesSelector||null;return Ue&&Ue.call(oe,L)}contains(L){return f0(this.node,ca.isVector(L)?L.node:L)}wrap(L){const oe=ca.create(L),Me=this.node.parentNode;return Me!=null&&Me.insertBefore(oe.node,this.node),oe.append(this)}parent(L){let oe=this;if(oe.node.parentNode==null)return null;if(oe=ca.create(oe.node.parentNode),L==null)return oe;do if(typeof L=="string"?oe.matches(L):oe instanceof L)return oe;while(oe=ca.create(oe.node.parentNode));return oe}children(){const L=this.node.childNodes,oe=[];for(let Me=0;Me<L.length;Me+=1)L[Me].nodeType===1&&oe.push(ca.create(L[Me]));return oe}eachChild(L,oe){const Me=this.children();for(let Ue=0,rt=Me.length;Ue<rt;Ue+=1)L.call(Me[Ue],Me[Ue],Ue,Me),oe&&Me[Ue].eachChild(L,oe);return this}index(){return Im(this.node)}hasClass(L){return wg(this.node,L)}addClass(L){return Eg(this.node,L),this}removeClass(L){return xg(this.node,L),this}toggleClass(L,oe){return _m(this.node,L,oe),this}toLocalPoint(L,oe){return ny(this.node,L,oe)}sample(L=1){return this.node instanceof SVGPathElement?Km(this.node,L):[]}toPath(){return ca.create(qm(this.node))}toPathData(){return bv(this.node)}}(function(A){A.toStringTag=`X6.${A.name}`;function L(wt){if(wt==null)return!1;if(wt instanceof A)return!0;const zt=wt[Symbol.toStringTag],Qt=wt;return(zt==null||zt===A.toStringTag)&&Qt.node instanceof SVGElement&&typeof Qt.sample=="function"&&typeof Qt.toPath=="function"}A.isVector=L;function oe(wt,zt,Qt){return new A(wt,zt,Qt)}A.create=oe;function Me(wt){if(wt[0]==="<"){const zt=Cg(wt),Qt=[];for(let wn=0,Yn=zt.childNodes.length;wn<Yn;wn+=1){const mr=zt.childNodes[wn];Qt.push(oe(document.importNode(mr,!0)))}return Qt}return[oe(wt)]}A.createVectors=Me;function Ue(wt){return L(wt)?wt.node:wt}A.toNode=Ue;function rt(wt){return Array.isArray(wt)?wt.map(zt=>Ue(zt)):[Ue(wt)]}A.toNodes=rt})(ca||(ca={}));function db(A,L){const oe=ca.create(L),Me=ca.create("textPath"),Ue=A.d;if(Ue&&A["xlink:href"]===void 0){const rt=ca.create("path").attr("d",Ue).appendTo(oe.defs());Me.attr("xlink:href",`#${rt.id}`)}return typeof A=="object"&&Me.attr(A),Me.node}function Hm(A,L,oe){const Me=oe.eol,Ue=oe.baseSize,rt=oe.lineHeight;let wt=0,zt;const Qt={},wn=L.length-1;for(let Yn=0;Yn<=wn;Yn+=1){let mr=L[Yn],Lr=null;if(typeof mr=="object"){const Fr=mr.attrs,Gi=ca.create("tspan",Fr);zt=Gi.node;let po=mr.t;Me&&Yn===wn&&(po+=Me),zt.textContent=po;const Ki=Fr.class;Ki&&Gi.addClass(Ki),oe.includeAnnotationIndices&&Gi.attr("annotations",mr.annotations.join(",")),Lr=parseFloat(Fr["font-size"]),Lr===void 0&&(Lr=Ue),Lr&&Lr>wt&&(wt=Lr)}else Me&&Yn===wn&&(mr+=Me),zt=document.createTextNode(mr||" "),Ue&&Ue>wt&&(wt=Ue);A.appendChild(zt)}return wt&&(Qt.maxFontSize=wt),rt?Qt.lineHeight=rt:wt&&(Qt.lineHeight=wt*1.2),Qt}const Xm=/em$/;function vv(A,L){const oe=parseFloat(A);return Xm.test(A)?oe*L:oe}function gb(A,L,oe,Me){if(!Array.isArray(L))return 0;const Ue=L.length;if(!Ue)return 0;let rt=L[0];const wt=vv(rt.maxFontSize,oe)||oe;let zt=0;const Qt=vv(Me,oe);for(let mr=1;mr<Ue;mr+=1){rt=L[mr];const Lr=vv(rt.lineHeight,oe)||Qt;zt+=Lr}const wn=vv(rt.maxFontSize,oe)||oe;let Yn;switch(A){case"middle":Yn=wt/2-.15*wn-zt/2;break;case"bottom":Yn=-(.25*wn)-zt;break;case"top":default:Yn=.8*wt;break}return Yn}function Ym(A,L,oe={}){L=xf(L);const Me=oe.eol;let Ue=oe.textPath;const rt=oe.textVerticalAnchor,wt=rt==="middle"||rt==="bottom"||rt==="top";let zt=oe.x;zt===void 0&&(zt=A.getAttribute("x")||0);const Qt=oe.includeAnnotationIndices;let wn=oe.annotations;wn&&!Array.isArray(wn)&&(wn=[wn]);const Yn=oe.lineHeight,mr=Yn==="auto",Lr=mr?"1.5em":Yn||"1em";let Fr=!0;const Gi=A.childNodes;if(Gi.length===1){const As=Gi[0];As&&As.tagName.toUpperCase()==="TITLE"&&(Fr=!1)}Fr&&Xh(A),sc(A,{"xml:space":"preserve",display:L||oe.displayEmpty?null:"none"});const po=sc(A,"font-size");let Ki=parseFloat(po);Ki||(Ki=16,(wt||wn)&&!po&&sc(A,"font-size",`${Ki}`));let Lo;Ue?(typeof Ue=="string"&&(Ue={d:Ue}),Lo=db(Ue,A)):Lo=document.createDocumentFragment();let Fo,oi=0,vo;const Do=L.split(`
`),bo=[],Cs=Do.length-1;for(let As=0;As<=Cs;As+=1){Fo=Lr;let Uu="v-line";const za=Ch("tspan");let hu,_l=Do[As];if(_l)if(wn){const ll=m0(_l,wn,{offset:-oi,includeAnnotationIndices:Qt});hu=Hm(za,ll,{eol:As!==Cs&&Me,baseSize:Ki,lineHeight:mr?null:Lr,includeAnnotationIndices:Qt});const yi=hu.lineHeight;yi&&mr&&As!==0&&(Fo=yi),As===0&&(vo=hu.maxFontSize*.8)}else Me&&As!==Cs&&(_l+=Me),za.textContent=_l;else{za.textContent="-",Uu+=" v-empty-line";const ll=za.style;ll.fillOpacity=0,ll.strokeOpacity=0,wn&&(hu={})}hu&&bo.push(hu),As>0&&za.setAttribute("dy",Fo),(As>0||Ue)&&za.setAttribute("x",zt),za.className.baseVal=Uu,Lo.appendChild(za),oi+=_l.length+1}if(wt)if(wn)Fo=gb(rt,bo,Ki,Lr);else if(rt==="top")Fo="0.8em";else{let As;switch(Cs>0?(As=parseFloat(Lr)||1,As*=Cs,Xm.test(Lr)||(As/=Ki)):As=0,rt){case"middle":Fo=`${.3-As/2}em`;break;case"bottom":Fo=`${-As-.3}em`;break;default:break}}else rt===0?Fo="0em":rt?Fo=rt:(Fo=0,A.getAttribute("y")==null&&A.setAttribute("y",`${vo||"0.8em"}`));Lo.firstChild.setAttribute("dy",Fo),A.appendChild(Lo)}function Yh(A,L={}){const oe=document.createElement("canvas").getContext("2d");if(!A)return{width:0};const Me=[],Ue=L["font-size"]?`${parseFloat(L["font-size"])}px`:"14px";return Me.push(L["font-style"]||"normal"),Me.push(L["font-variant"]||"normal"),Me.push(L["font-weight"]||400),Me.push(Ue),Me.push(L["font-family"]||"sans-serif"),oe.font=Me.join(" "),oe.measureText(A)}function Zm(A,L,oe,Me={}){if(L>=oe)return[A,""];const Ue=A.length,rt={};let wt=Math.round(L/oe*Ue-1);for(wt<0&&(wt=0);wt>=0&&wt<Ue;){const zt=A.slice(0,wt),Qt=rt[zt]||Yh(zt,Me).width,wn=A.slice(0,wt+1),Yn=rt[wn]||Yh(wn,Me).width;if(rt[zt]=Qt,rt[wn]=Yn,Qt>L)wt-=1;else if(Yn<=L)wt+=1;else break}return[A.slice(0,wt),A.slice(wt)]}function S0(A,L,oe={},Me={}){const Ue=L.width,rt=L.height,wt=Me.eol||`
`,zt=oe.fontSize||14,Qt=oe.lineHeight?parseFloat(oe.lineHeight):Math.ceil(zt*1.4),wn=Math.floor(rt/Qt);if(A.indexOf(wt)>-1){const Ki=bg(),Lo=[];return A.split(wt).map(Fo=>{const oi=S0(Fo,Object.assign(Object.assign({},L),{height:Number.MAX_SAFE_INTEGER}),oe,Object.assign(Object.assign({},Me),{eol:Ki}));oi&&Lo.push(...oi.split(Ki))}),Lo.slice(0,wn).join(wt)}const{width:Yn}=Yh(A,oe);if(Yn<Ue)return A;const mr=[];let Lr=A,Fr=Yn,Gi=Me.ellipsis,po=0;Gi&&(typeof Gi!="string"&&(Gi="\u2026"),po=Yh(Gi,oe).width);for(let Ki=0;Ki<wn;Ki+=1)if(Fr>Ue)if(Ki===wn-1){const[Fo]=Zm(Lr,Ue-po,Fr,oe);mr.push(Gi?`${Fo}${Gi}`:Fo)}else{const[Fo,oi]=Zm(Lr,Ue,Fr,oe);mr.push(Fo),Lr=oi,Fr=Yh(Lr,oe).width}else{mr.push(Lr);break}return mr.join(wt)}const mv=.551784;function Zu(A,L,oe=NaN){const Me=A.getAttribute(L);if(Me==null)return oe;const Ue=parseFloat(Me);return Number.isNaN(Ue)?oe:Ue}function Km(A,L=1){const oe=A.getTotalLength(),Me=[];let Ue=0,rt;for(;Ue<oe;)rt=A.getPointAtLength(Ue),Me.push({distance:Ue,x:rt.x,y:rt.y}),Ue+=L;return Me}function C0(A){return["M",Zu(A,"x1"),Zu(A,"y1"),"L",Zu(A,"x2"),Zu(A,"y2")].join(" ")}function O0(A){const L=yv(A);return L.length===0?null:`${Jm(L)} Z`}function T0(A){const L=yv(A);return L.length===0?null:Jm(L)}function Jm(A){return`M ${A.map(oe=>`${oe.x} ${oe.y}`).join(" L")}`}function yv(A){const L=[],oe=A.points;if(oe)for(let Me=0,Ue=oe.numberOfItems;Me<Ue;Me+=1)L.push(oe.getItem(Me));return L}function M0(A){const L=Zu(A,"cx",0),oe=Zu(A,"cy",0),Me=Zu(A,"r"),Ue=Me*mv;return["M",L,oe-Me,"C",L+Ue,oe-Me,L+Me,oe-Ue,L+Me,oe,"C",L+Me,oe+Ue,L+Ue,oe+Me,L,oe+Me,"C",L-Ue,oe+Me,L-Me,oe+Ue,L-Me,oe,"C",L-Me,oe-Ue,L-Ue,oe-Me,L,oe-Me,"Z"].join(" ")}function P0(A){const L=Zu(A,"cx",0),oe=Zu(A,"cy",0),Me=Zu(A,"rx"),Ue=Zu(A,"ry")||Me,rt=Me*mv,wt=Ue*mv;return["M",L,oe-Ue,"C",L+rt,oe-Ue,L+Me,oe-wt,L+Me,oe,"C",L+Me,oe+wt,L+rt,oe+Ue,L,oe+Ue,"C",L-rt,oe+Ue,L-Me,oe+wt,L-Me,oe,"C",L-Me,oe-wt,L-rt,oe-Ue,L,oe-Ue,"Z"].join(" ")}function A0(A){return Qm({x:Zu(A,"x",0),y:Zu(A,"y",0),width:Zu(A,"width",0),height:Zu(A,"height",0),rx:Zu(A,"rx",0),ry:Zu(A,"ry",0)})}function Qm(A){let L;const oe=A.x,Me=A.y,Ue=A.width,rt=A.height,wt=Math.min(A.rx||A["top-rx"]||0,Ue/2),zt=Math.min(A.rx||A["bottom-rx"]||0,Ue/2),Qt=Math.min(A.ry||A["top-ry"]||0,rt/2),wn=Math.min(A.ry||A["bottom-ry"]||0,rt/2);return wt||zt||Qt||wn?L=["M",oe,Me+Qt,"v",rt-Qt-wn,"a",zt,wn,0,0,0,zt,wn,"h",Ue-2*zt,"a",zt,wn,0,0,0,zt,-wn,"v",-(rt-wn-Qt),"a",wt,Qt,0,0,0,-wt,-Qt,"h",-(Ue-2*wt),"a",wt,Qt,0,0,0,-wt,Qt,"Z"]:L=["M",oe,Me,"H",oe+Ue,"V",Me+rt,"H",oe,"V",Me,"Z"],L.join(" ")}function qm(A){const L=Ch("path");sc(L,sc(A));const oe=bv(A);return oe&&L.setAttribute("d",oe),L}function bv(A){const L=A.tagName.toLowerCase();switch(L){case"path":return A.getAttribute("d");case"line":return C0(A);case"polygon":return O0(A);case"polyline":return T0(A);case"ellipse":return P0(A);case"circle":return M0(A);case"rect":return A0(A);default:break}throw new Error(`"${L}" cannot be converted to svg path element.`)}function _0(A,L,oe,Me){const Ue=2*Math.PI-1e-6,rt=A,wt=L;let zt=oe,Qt=Me;if(Qt<zt){const po=zt;zt=Qt,Qt=po}const wn=Qt-zt,Yn=wn<Math.PI?"0":"1",mr=Math.cos(zt),Lr=Math.sin(zt),Fr=Math.cos(Qt),Gi=Math.sin(Qt);return wn>=Ue?rt?`M0,${wt}A${wt},${wt} 0 1,1 0,${-wt}A${wt},${wt} 0 1,1 0,${wt}M0,${rt}A${rt},${rt} 0 1,0 0,${-rt}A${rt},${rt} 0 1,0 0,${rt}Z`:`M0,${wt}A${wt},${wt} 0 1,1 0,${-wt}A${wt},${wt} 0 1,1 0,${wt}Z`:rt?`M${wt*mr},${wt*Lr}A${wt},${wt} 0 ${Yn},1 ${wt*Fr},${wt*Gi}L${rt*Fr},${rt*Gi}A${rt},${rt} 0 ${Yn},0 ${rt*mr},${rt*Lr}Z`:`M${wt*mr},${wt*Lr}A${wt},${wt} 0 ${Yn},1 ${wt*Fr},${wt*Gi}L0,0Z`}const wv=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,ey=/[ ,]+/,D0=/^(\w+)\((.*)\)/;function N0(A,L){const Me=Ch("svg").createSVGPoint();return Me.x=A,Me.y=L,Me}function Rd(A){const oe=Ch("svg").createSVGMatrix();if(A!=null){const Me=A,Ue=oe;for(const rt in Me)Ue[rt]=Me[rt]}return oe}function I0(A){const L=Ch("svg");return A!=null?(A instanceof DOMMatrix||(A=Rd(A)),L.createSVGTransformFromMatrix(A)):L.createSVGTransform()}function Ev(A){let L=Rd();const oe=A!=null&&A.match(wv);if(!oe)return L;for(let Me=0,Ue=oe.length;Me<Ue;Me+=1){const wt=oe[Me].match(D0);if(wt){let zt,Qt,wn,Yn,mr,Lr=Rd();const Fr=wt[2].split(ey);switch(wt[1].toLowerCase()){case"scale":zt=parseFloat(Fr[0]),Qt=Fr[1]===void 0?zt:parseFloat(Fr[1]),Lr=Lr.scaleNonUniform(zt,Qt);break;case"translate":wn=parseFloat(Fr[0]),Yn=parseFloat(Fr[1]),Lr=Lr.translate(wn,Yn);break;case"rotate":mr=parseFloat(Fr[0]),wn=parseFloat(Fr[1])||0,Yn=parseFloat(Fr[2])||0,wn!==0||Yn!==0?Lr=Lr.translate(wn,Yn).rotate(mr).translate(-wn,-Yn):Lr=Lr.rotate(mr);break;case"skewx":mr=parseFloat(Fr[0]),Lr=Lr.skewX(mr);break;case"skewy":mr=parseFloat(Fr[0]),Lr=Lr.skewY(mr);break;case"matrix":Lr.a=parseFloat(Fr[0]),Lr.b=parseFloat(Fr[1]),Lr.c=parseFloat(Fr[2]),Lr.d=parseFloat(Fr[3]),Lr.e=parseFloat(Fr[4]),Lr.f=parseFloat(Fr[5]);break;default:continue}L=L.multiply(Lr)}}return L}function R0(A){const L=A||{},oe=L.a!=null?L.a:1,Me=L.b!=null?L.b:0,Ue=L.c!=null?L.c:0,rt=L.d!=null?L.d:1,wt=L.e!=null?L.e:0,zt=L.f!=null?L.f:0;return`matrix(${oe},${Me},${Ue},${rt},${wt},${zt})`}function xv(A){let L,oe,Me;if(A){const rt=ey;if(A.trim().indexOf("matrix")>=0){const wt=Ev(A),zt=L0(wt);L=[zt.translateX,zt.translateY],oe=[zt.rotation],Me=[zt.scaleX,zt.scaleY];const Qt=[];(L[0]!==0||L[1]!==0)&&Qt.push(`translate(${L.join(",")})`),(Me[0]!==1||Me[1]!==1)&&Qt.push(`scale(${Me.join(",")})`),oe[0]!==0&&Qt.push(`rotate(${oe[0]})`),A=Qt.join(" ")}else{const wt=A.match(/translate\((.*?)\)/);wt&&(L=wt[1].split(rt));const zt=A.match(/rotate\((.*?)\)/);zt&&(oe=zt[1].split(rt));const Qt=A.match(/scale\((.*?)\)/);Qt&&(Me=Qt[1].split(rt))}}const Ue=Me&&Me[0]?parseFloat(Me[0]):1;return{raw:A||"",translation:{tx:L&&L[0]?parseInt(L[0],10):0,ty:L&&L[1]?parseInt(L[1],10):0},rotation:{angle:oe&&oe[0]?parseInt(oe[0],10):0,cx:oe&&oe[1]?parseInt(oe[1],10):void 0,cy:oe&&oe[2]?parseInt(oe[2],10):void 0},scale:{sx:Ue,sy:Me&&Me[1]?parseFloat(Me[1]):Ue}}}function ty(A,L){const oe=L.x*A.a+L.y*A.c+0,Me=L.x*A.b+L.y*A.d+0;return{x:oe,y:Me}}function L0(A){const L=ty(A,{x:0,y:1}),oe=ty(A,{x:1,y:0}),Me=180/Math.PI*Math.atan2(L.y,L.x)-90,Ue=180/Math.PI*Math.atan2(oe.y,oe.x);return{skewX:Me,skewY:Ue,translateX:A.e,translateY:A.f,scaleX:Math.sqrt(A.a*A.a+A.b*A.b),scaleY:Math.sqrt(A.c*A.c+A.d*A.d),rotation:Me}}function B0(A){let L,oe,Me,Ue;return A?(L=A.a==null?1:A.a,Ue=A.d==null?1:A.d,oe=A.b,Me=A.c):L=Ue=1,{sx:oe?Math.sqrt(L*L+oe*oe):L,sy:Me?Math.sqrt(Me*Me+Ue*Ue):Ue}}function k0(A){let L={x:0,y:1};A&&(L=ty(A,L));const oe=180*Math.atan2(L.y,L.x)/Math.PI%360-90;return{angle:oe%360+(oe<0?360:0)}}function G0(A){return{tx:A&&A.e||0,ty:A&&A.f||0}}function Sv(A,L,oe={}){if(L==null)return Ev(sc(A,"transform"));if(oe.absolute){A.setAttribute("transform",R0(L));return}const Me=A.transform,Ue=I0(L);Me.baseVal.appendItem(Ue)}function Cv(A,L,oe=0,Me={}){let Ue=sc(A,"transform");const rt=xv(Ue);if(L==null)return rt.translation;Ue=rt.raw,Ue=Ue.replace(/translate\([^)]*\)/g,"").trim();const wt=Me.absolute?L:rt.translation.tx+L,zt=Me.absolute?oe:rt.translation.ty+oe,Qt=`translate(${wt},${zt})`;A.setAttribute("transform",`${Qt} ${Ue}`.trim())}function Ov(A,L,oe,Me,Ue={}){let rt=sc(A,"transform");const wt=xv(rt);if(L==null)return wt.rotation;rt=wt.raw,rt=rt.replace(/rotate\([^)]*\)/g,"").trim(),L%=360;const zt=Ue.absolute?L:wt.rotation.angle+L,Qt=oe!=null&&Me!=null?`,${oe},${Me}`:"",wn=`rotate(${zt}${Qt})`;A.setAttribute("transform",`${rt} ${wn}`.trim())}function Tv(A,L,oe){let Me=sc(A,"transform");const Ue=xv(Me);if(L==null)return Ue.scale;oe=oe==null?L:oe,Me=Ue.raw,Me=Me.replace(/scale\([^)]*\)/g,"").trim();const rt=`scale(${L},${oe})`;A.setAttribute("transform",`${Me} ${rt}`.trim())}function Zh(A,L){if(Sg(L)&&Sg(A)){const oe=L.getScreenCTM(),Me=A.getScreenCTM();if(oe&&Me)return oe.inverse().multiply(Me)}return Rd()}function F0(A,L){let oe=Rd();if(Sg(L)&&Sg(A)){let Me=A;const Ue=[];for(;Me&&Me!==L;){const rt=Me.getAttribute("transform")||null,wt=Ev(rt);Ue.push(wt),Me=Me.parentNode}Ue.reverse().forEach(rt=>{oe=oe.multiply(rt)})}return oe}function ny(A,L,oe){const Me=A instanceof SVGSVGElement?A:A.ownerSVGElement,Ue=Me.createSVGPoint();Ue.x=L,Ue.y=oe;try{const rt=Me.getScreenCTM(),wt=Ue.matrixTransform(rt.inverse()),zt=Zh(A,Me).inverse();return wt.matrixTransform(zt)}catch(rt){return Ue}}var Zc;(function(A){const L={};function oe(rt){return L[rt]||{}}A.get=oe;function Me(rt,wt){L[rt]=wt}A.register=Me;function Ue(rt){delete L[rt]}A.unregister=Ue})(Zc||(Zc={}));var Mh;(function(A){const L=new WeakMap;function oe(rt){return L.has(rt)||L.set(rt,{events:Object.create(null)}),L.get(rt)}A.ensure=oe;function Me(rt){return L.get(rt)}A.get=Me;function Ue(rt){return L.delete(rt)}A.remove=Ue})(Mh||(Mh={}));var Bs;(function(A){A.returnTrue=()=>!0,A.returnFalse=()=>!1;function L(Ue){Ue.stopPropagation()}A.stopPropagationCallback=L;function oe(Ue,rt,wt){Ue.addEventListener!=null&&Ue.addEventListener(rt,wt)}A.addEventListener=oe;function Me(Ue,rt,wt){Ue.removeEventListener!=null&&Ue.removeEventListener(rt,wt)}A.removeEventListener=Me})(Bs||(Bs={})),function(A){const L=/[^\x20\t\r\n\f]+/g,oe=/^([^.]*)(?:\.(.+)|)/;function Me(zt){return(zt||"").match(L)||[""]}A.splitType=Me;function Ue(zt){const Qt=oe.exec(zt)||[];return{originType:Qt[1]?Qt[1].trim():Qt[1],namespaces:Qt[2]?Qt[2].split(".").map(wn=>wn.trim()).sort():[]}}A.normalizeType=Ue;function rt(zt){return zt.nodeType===1||zt.nodeType===9||!+zt.nodeType}A.isValidTarget=rt;function wt(zt,Qt){if(Qt){const wn=zt;return wn.querySelector!=null&&wn.querySelector(Qt)!=null}return!0}A.isValidSelector=wt}(Bs||(Bs={})),function(A){let L=0;const oe=new WeakMap;function Me(zt){return oe.has(zt)||(oe.set(zt,L),L+=1),oe.get(zt)}A.ensureHandlerId=Me;function Ue(zt){return oe.get(zt)}A.getHandlerId=Ue;function rt(zt){return oe.delete(zt)}A.removeHandlerId=rt;function wt(zt,Qt){return oe.set(zt,Qt)}A.setHandlerId=wt}(Bs||(Bs={})),function(A){function L(oe,Me){const Ue=[],rt=Mh.get(oe),wt=rt&&rt.events&&rt.events[Me.type],zt=wt&&wt.handlers||[],Qt=wt?wt.delegateCount:0;if(Qt>0&&!(Me.type==="click"&&typeof Me.button=="number"&&Me.button>=1)){for(let wn=Me.target;wn!==oe;wn=wn.parentNode||oe)if(wn.nodeType===1&&!(Me.type==="click"&&wn.disabled===!0)){const Yn=[],mr={};for(let Lr=0;Lr<Qt;Lr+=1){const Fr=zt[Lr],Gi=Fr.selector;if(Gi!=null&&mr[Gi]==null){const po=oe,Ki=[];po.querySelectorAll(Gi).forEach(Lo=>{Ki.push(Lo)}),mr[Gi]=Ki.includes(wn)}mr[Gi]&&Yn.push(Fr)}Yn.length&&Ue.push({elem:wn,handlers:Yn})}}return Qt<zt.length&&Ue.push({elem:oe,handlers:zt.slice(Qt)}),Ue}A.getHandlerQueue=L}(Bs||(Bs={})),function(A){function L(oe){return oe!=null&&oe===oe.window}A.isWindow=L}(Bs||(Bs={})),function(A){function L(oe,Me){const Ue=oe.nodeType===9?oe.documentElement:oe,rt=Me&&Me.parentNode;return oe===rt||!!(rt&&rt.nodeType===1&&(Ue.contains?Ue.contains(rt):oe.compareDocumentPosition&&oe.compareDocumentPosition(rt)&16))}A.contains=L}(Bs||(Bs={}));class Cf{constructor(L,oe){this.isDefaultPrevented=Bs.returnFalse,this.isPropagationStopped=Bs.returnFalse,this.isImmediatePropagationStopped=Bs.returnFalse,this.isSimulated=!1,this.preventDefault=()=>{const Me=this.originalEvent;this.isDefaultPrevented=Bs.returnTrue,Me&&!this.isSimulated&&Me.preventDefault()},this.stopPropagation=()=>{const Me=this.originalEvent;this.isPropagationStopped=Bs.returnTrue,Me&&!this.isSimulated&&Me.stopPropagation()},this.stopImmediatePropagation=()=>{const Me=this.originalEvent;this.isImmediatePropagationStopped=Bs.returnTrue,Me&&!this.isSimulated&&Me.stopImmediatePropagation(),this.stopPropagation()},typeof L=="string"?this.type=L:L.type&&(this.originalEvent=L,this.type=L.type,this.isDefaultPrevented=L.defaultPrevented?Bs.returnTrue:Bs.returnFalse,this.target=L.target,this.currentTarget=L.currentTarget,this.relatedTarget=L.relatedTarget,this.timeStamp=L.timeStamp),oe&&Object.assign(this,oe),this.timeStamp||(this.timeStamp=Date.now())}}(function(A){function L(oe){return oe instanceof A?oe:new A(oe)}A.create=L})(Cf||(Cf={})),function(A){function L(oe,Me){Object.defineProperty(A.prototype,oe,{enumerable:!0,configurable:!0,get:typeof Me=="function"?function(){if(this.originalEvent)return Me(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[oe]},set(Ue){Object.defineProperty(this,oe,{enumerable:!0,configurable:!0,writable:!0,value:Ue})}})}A.addProperty=L}(Cf||(Cf={})),function(A){const L={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(L).forEach(oe=>A.addProperty(oe,L[oe]))}(Cf||(Cf={}));var Ld;(function(A){Zc.register("load",{noBubble:!0})})(Ld||(Ld={})),function(A){Zc.register("beforeunload",{postDispatch(L,oe){oe.result!==void 0&&oe.originalEvent&&(oe.originalEvent.returnValue=oe.result)}})}(Ld||(Ld={})),function(A){Zc.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(L,oe){let Me;const Ue=oe.relatedTarget,rt=oe.handleObj;return(!Ue||Ue!==L&&!Bs.contains(L,Ue))&&(oe.type=rt.originType,Me=rt.handler.call(L,oe),oe.type="mouseover"),Me}}),Zc.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(L,oe){let Me;const Ue=oe.relatedTarget,rt=oe.handleObj;return(!Ue||Ue!==L&&!Bs.contains(L,Ue))&&(oe.type=rt.originType,Me=rt.handler.call(L,oe),oe.type="mouseout"),Me}})}(Ld||(Ld={}));var pb=function(A,L){var oe={};for(var Me in A)Object.prototype.hasOwnProperty.call(A,Me)&&L.indexOf(Me)<0&&(oe[Me]=A[Me]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ue=0,Me=Object.getOwnPropertySymbols(A);Ue<Me.length;Ue++)L.indexOf(Me[Ue])<0&&Object.prototype.propertyIsEnumerable.call(A,Me[Ue])&&(oe[Me[Ue]]=A[Me[Ue]]);return oe},Dg;(function(A){let L;function oe(wt,zt,Qt,wn,Yn){if(!Bs.isValidTarget(wt))return;let mr;if(typeof Qt!="function"){const{handler:po,selector:Ki}=Qt,Lo=pb(Qt,["handler","selector"]);Qt=po,Yn=Ki,mr=Lo}const Lr=Mh.ensure(wt);let Fr=Lr.handler;Fr==null&&(Fr=Lr.handler=function(po,...Ki){return L!==po.type?Ue(wt,po,...Ki):void 0});const Gi=Bs.ensureHandlerId(Qt);Bs.splitType(zt).forEach(po=>{const{originType:Ki,namespaces:Lo}=Bs.normalizeType(po);if(!Ki)return;let Fo=Ki,oi=Zc.get(Fo);Fo=(Yn?oi.delegateType:oi.bindType)||Fo,oi=Zc.get(Fo);const vo=Object.assign({type:Fo,originType:Ki,data:wn,selector:Yn,guid:Gi,handler:Qt,namespace:Lo.join(".")},mr),Do=Lr.events;let bo=Do[Fo];bo||(bo=Do[Fo]={handlers:[],delegateCount:0},(!oi.setup||oi.setup(wt,wn,Lo,Fr)===!1)&&Bs.addEventListener(wt,Fo,Fr)),oi.add&&(Bs.removeHandlerId(vo.handler),oi.add(wt,vo),Bs.setHandlerId(vo.handler,Gi)),Yn?(bo.handlers.splice(bo.delegateCount,0,vo),bo.delegateCount+=1):bo.handlers.push(vo)})}A.on=oe;function Me(wt,zt,Qt,wn,Yn){const mr=Mh.get(wt);if(!mr)return;const Lr=mr.events;Lr&&(Bs.splitType(zt).forEach(Fr=>{const{originType:Gi,namespaces:po}=Bs.normalizeType(Fr);if(!Gi){Object.keys(Lr).forEach(Do=>{Me(wt,Do+Fr,Qt,wn,!0)});return}let Ki=Gi;const Lo=Zc.get(Ki);Ki=(wn?Lo.delegateType:Lo.bindType)||Ki;const Fo=Lr[Ki];if(!Fo)return;const oi=po.length>0?new RegExp(`(^|\\.)${po.join("\\.(?:.*\\.|)")}(\\.|$)`):null,vo=Fo.handlers.length;for(let Do=Fo.handlers.length-1;Do>=0;Do-=1){const bo=Fo.handlers[Do];(Yn||Gi===bo.originType)&&(!Qt||Bs.getHandlerId(Qt)===bo.guid)&&(oi==null||bo.namespace&&oi.test(bo.namespace))&&(wn==null||wn===bo.selector||wn==="**"&&bo.selector)&&(Fo.handlers.splice(Do,1),bo.selector&&(Fo.delegateCount-=1),Lo.remove&&Lo.remove(wt,bo))}vo&&Fo.handlers.length===0&&((!Lo.teardown||Lo.teardown(wt,po,mr.handler)===!1)&&Bs.removeEventListener(wt,Ki,mr.handler),delete Lr[Ki])}),Object.keys(Lr).length===0&&Mh.remove(wt))}A.off=Me;function Ue(wt,zt,...Qt){const wn=Cf.create(zt);wn.delegateTarget=wt;const Yn=Zc.get(wn.type);if(Yn.preDispatch&&Yn.preDispatch(wt,wn)===!1)return;const mr=Bs.getHandlerQueue(wt,wn);for(let Lr=0,Fr=mr.length;Lr<Fr&&!wn.isPropagationStopped();Lr+=1){const Gi=mr[Lr];wn.currentTarget=Gi.elem;for(let po=0,Ki=Gi.handlers.length;po<Ki&&!wn.isImmediatePropagationStopped();po+=1){const Lo=Gi.handlers[po];if(wn.rnamespace==null||Lo.namespace&&wn.rnamespace.test(Lo.namespace)){wn.handleObj=Lo,wn.data=Lo.data;const Fo=Zc.get(Lo.originType).handle,oi=Fo?Fo(Gi.elem,wn,...Qt):Lo.handler.call(Gi.elem,wn,...Qt);oi!==void 0&&(wn.result=oi,oi===!1&&(wn.preventDefault(),wn.stopPropagation()))}}}return Yn.postDispatch&&Yn.postDispatch(wt,wn),wn.result}A.dispatch=Ue;function rt(wt,zt,Qt,wn){let Yn=wt,mr=typeof wt=="string"?wt:wt.type,Lr=typeof wt=="string"||Yn.namespace==null?[]:Yn.namespace.split(".");const Fr=Qt;if(Fr.nodeType===3||Fr.nodeType===8)return;mr.indexOf(".")>-1&&(Lr=mr.split("."),mr=Lr.shift(),Lr.sort());const Gi=mr.indexOf(":")<0&&`on${mr}`;Yn=wt instanceof Cf?wt:new Cf(mr,typeof wt=="object"?wt:null),Yn.namespace=Lr.join("."),Yn.rnamespace=Yn.namespace?new RegExp(`(^|\\.)${Lr.join("\\.(?:.*\\.|)")}(\\.|$)`):null,Yn.result=void 0,Yn.target||(Yn.target=Fr);const po=[Yn];Array.isArray(zt)?po.push(...zt):po.push(zt);const Ki=Zc.get(mr);if(!wn&&Ki.trigger&&Ki.trigger(Fr,Yn,zt)===!1)return;let Lo;const Fo=[Fr];if(!wn&&!Ki.noBubble&&!Bs.isWindow(Fr)){Lo=Ki.delegateType||mr;let vo=Fr,Do=Fr.parentNode;for(;Do!=null;)Fo.push(Do),vo=Do,Do=Do.parentNode;const bo=Fr.ownerDocument||document;if(vo===bo){const Cs=vo.defaultView||vo.parentWindow||window;Fo.push(Cs)}}let oi=Fr;for(let vo=0,Do=Fo.length;vo<Do&&!Yn.isPropagationStopped();vo+=1){const bo=Fo[vo];oi=bo,Yn.type=vo>1?Lo:Ki.bindType||mr;const Cs=Mh.get(bo);Cs&&Cs.events[Yn.type]&&Cs.handler&&Cs.handler.call(bo,...po);const ea=Gi&&bo[Gi]||null;ea&&Bs.isValidTarget(bo)&&(Yn.result=ea.call(bo,...po),Yn.result===!1&&Yn.preventDefault())}if(Yn.type=mr,!wn&&!Yn.isDefaultPrevented()){const vo=Ki.preventDefault;if((vo==null||vo(Fo.pop(),Yn,zt)===!1)&&Bs.isValidTarget(Fr)&&Gi&&typeof Fr[mr]=="function"&&!Bs.isWindow(Fr)){const Do=Fr[Gi];Do&&(Fr[Gi]=null),L=mr,Yn.isPropagationStopped()&&oi.addEventListener(mr,Bs.stopPropagationCallback),Fr[mr](),Yn.isPropagationStopped()&&oi.removeEventListener(mr,Bs.stopPropagationCallback),L=void 0,Do&&(Fr[Gi]=Do)}}return Yn.result}A.trigger=rt})(Dg||(Dg={}));var Bd;(function(A){function L(rt,wt,zt,Qt,wn){return Ql.on(rt,wt,zt,Qt,wn),rt}A.on=L;function oe(rt,wt,zt,Qt,wn){return Ql.on(rt,wt,zt,Qt,wn,!0),rt}A.once=oe;function Me(rt,wt,zt,Qt){return Ql.off(rt,wt,zt,Qt),rt}A.off=Me;function Ue(rt,wt,zt,Qt){return Dg.trigger(wt,zt,rt,Qt),rt}A.trigger=Ue})(Bd||(Bd={}));var Ql;(function(A){function L(Me,Ue,rt,wt,zt,Qt){if(typeof Ue=="object"){typeof rt!="string"&&(wt=wt||rt,rt=void 0),Object.keys(Ue).forEach(wn=>L(Me,wn,rt,wt,Ue[wn],Qt));return}if(wt==null&&zt==null?(zt=rt,wt=rt=void 0):zt==null&&(typeof rt=="string"?(zt=wt,wt=void 0):(zt=wt,wt=rt,rt=void 0)),zt===!1)zt=Bs.returnFalse;else if(!zt)return;if(Qt){const wn=zt;zt=function(Yn,...mr){return A.off(Me,Yn),wn.call(this,Yn,...mr)},Bs.setHandlerId(zt,Bs.ensureHandlerId(wn))}Dg.on(Me,Ue,zt,wt,rt)}A.on=L;function oe(Me,Ue,rt,wt){const zt=Ue;if(zt&&zt.preventDefault!=null&&zt.handleObj!=null){const Qt=zt.handleObj;oe(zt.delegateTarget,Qt.namespace?`${Qt.originType}.${Qt.namespace}`:Qt.originType,Qt.selector,Qt.handler);return}if(typeof Ue=="object"){const Qt=Ue;Object.keys(Qt).forEach(wn=>oe(Me,wn,rt,Qt[wn]));return}(rt===!1||typeof rt=="function")&&(wt=rt,rt=void 0),wt===!1&&(wt=Bs.returnFalse),Dg.off(Me,Ue,wt,rt)}A.off=oe})(Ql||(Ql={}));class Mv{constructor(L,oe,Me){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=$h.isEventSupported("wheel")?"wheel":"mousewheel",this.target=L,this.onWheelCallback=oe,this.onWheelGuard=Me,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(L){if(this.onWheelGuard!=null&&!this.onWheelGuard(L))return;this.deltaX+=L.deltaX,this.deltaY+=L.deltaY,L.preventDefault();let oe;(this.deltaX!==0||this.deltaY!==0)&&(L.stopPropagation(),oe=!0),oe===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(L)}))}didWheel(L){this.animationFrameId=0,this.onWheelCallback(L,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function Kh(A){const L=A.getBoundingClientRect(),oe=A.ownerDocument.defaultView;return{top:L.top+oe.pageYOffset,left:L.left+oe.pageXOffset}}function vb(A){return A.getBoundingClientRect().width}function j0(A){return A.getBoundingClientRect().height}function z0(A){const L=Sf(A,"position")==="fixed";let oe;if(L){const Me=A.getBoundingClientRect();oe={left:Me.left,top:Me.top}}else oe=Kh(A);if(!L){const Me=A.ownerDocument;let Ue=A.offsetParent||Me.documentElement;for(;(Ue===Me.body||Ue===Me.documentElement)&&Sf(Ue,"position")==="static";)Ue=Ue.parentNode;if(Ue!==A&&Lm(Ue)){const rt=Kh(Ue);oe.top-=rt.top+Ag(Ue,"borderTopWidth"),oe.left-=rt.left+Ag(Ue,"borderLeftWidth")}}return{top:oe.top-Ag(A,"marginTop"),left:oe.left-Ag(A,"marginLeft")}}function ry(A,L=60){let oe=null;return(...Me)=>{oe&&clearTimeout(oe),oe=window.setTimeout(()=>{A.apply(this,Me)},L)}}function U0(A){let L=null,oe=[];const Me=()=>{if(getComputedStyle(A).position==="static"){const wn=A.style;wn.position="relative"}const Qt=document.createElement("object");return Qt.onload=()=>{Qt.contentDocument.defaultView.addEventListener("resize",Ue),Ue()},Qt.style.display="block",Qt.style.position="absolute",Qt.style.top="0",Qt.style.left="0",Qt.style.height="100%",Qt.style.width="100%",Qt.style.overflow="hidden",Qt.style.pointerEvents="none",Qt.style.zIndex="-1",Qt.style.opacity="0",Qt.setAttribute("tabindex","-1"),Qt.type="text/html",A.appendChild(Qt),Qt.data="about:blank",Qt},Ue=ry(()=>{oe.forEach(Qt=>Qt(A))}),rt=Qt=>{L||(L=Me()),oe.indexOf(Qt)===-1&&oe.push(Qt)},wt=()=>{L&&L.parentNode&&(L.contentDocument&&L.contentDocument.defaultView.removeEventListener("resize",Ue),L.parentNode.removeChild(L),L=null,oe=[])};return{element:A,bind:rt,destroy:wt,unbind:Qt=>{const wn=oe.indexOf(Qt);wn!==-1&&oe.splice(wn,1),oe.length===0&&L&&wt()}}}function V0(A){let L=null,oe=[];const Me=ry(()=>{oe.forEach(Qt=>{Qt(A)})}),Ue=()=>{const Qt=new ResizeObserver(Me);return Qt.observe(A),Me(),Qt},rt=Qt=>{L||(L=Ue()),oe.indexOf(Qt)===-1&&oe.push(Qt)},wt=()=>{L&&(L.disconnect(),oe=[],L=null)};return{element:A,bind:rt,destroy:wt,unbind:Qt=>{const wn=oe.indexOf(Qt);wn!==-1&&oe.splice(wn,1),oe.length===0&&L&&wt()}}}const W0=typeof ResizeObserver!="undefined"?V0:U0;var Pv;(function(A){const L=new WeakMap;function oe(Ue){let rt=L.get(Ue);return rt||(rt=W0(Ue),L.set(Ue,rt),rt)}function Me(Ue){Ue.destroy(),L.delete(Ue.element)}A.bind=(Ue,rt)=>{const wt=oe(Ue);return wt.bind(rt),()=>wt.unbind(rt)},A.clear=Ue=>{const rt=oe(Ue);Me(rt)}})(Pv||(Pv={}));class Of{constructor(L={}){this.comparator=L.comparator||Of.defaultComparator,this.index={},this.data=L.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(L,oe,Me){const Ue={priority:L,value:oe},rt=this.data.length;return Me&&(Ue.id=Me,this.index[Me]=rt),this.data.push(Ue),this.bubbleUp(rt),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(L,oe){const Me=this.index[L];if(typeof Me=="undefined")throw new Error(`Node with id '${L}' was not found in the heap.`);const Ue=this.data,rt=Ue[Me].priority,wt=this.comparator(oe,rt);wt<0?(Ue[Me].priority=oe,this.bubbleUp(Me)):wt>0&&(Ue[Me].priority=oe,this.bubbleDown(Me))}remove(){const L=this.data,oe=L[0],Me=L.pop();return oe.id&&delete this.index[oe.id],L.length>0&&(L[0]=Me,Me.id&&(this.index[Me.id]=0),this.bubbleDown(0)),oe?oe.value:null}heapify(){for(let L=0;L<this.data.length;L+=1)this.bubbleUp(L)}bubbleUp(L){const oe=this.data;let Me,Ue,rt=L;for(;rt>0&&(Ue=rt-1>>>1,this.comparator(oe[rt].priority,oe[Ue].priority)<0);){Me=oe[Ue],oe[Ue]=oe[rt];let wt=oe[rt].id;wt!=null&&(this.index[wt]=Ue),oe[rt]=Me,wt=oe[rt].id,wt!=null&&(this.index[wt]=rt),rt=Ue}}bubbleDown(L){const oe=this.data,Me=oe.length-1;let Ue=L;for(;;){const rt=(Ue<<1)+1,wt=rt+1;let zt=Ue;if(rt<=Me&&this.comparator(oe[rt].priority,oe[zt].priority)<0&&(zt=rt),wt<=Me&&this.comparator(oe[wt].priority,oe[zt].priority)<0&&(zt=wt),zt!==Ue){const Qt=oe[zt];oe[zt]=oe[Ue];let wn=oe[Ue].id;wn!=null&&(this.index[wn]=zt),oe[Ue]=Qt,wn=oe[Ue].id,wn!=null&&(this.index[wn]=Ue),Ue=zt}else break}}}(function(A){A.defaultComparator=(L,oe)=>L-oe})(Of||(Of={}));var Av;(function(A){function L(oe,Me,Ue=(rt,wt)=>1){const rt={},wt={},zt={},Qt=new Of;for(rt[Me]=0,Object.keys(oe).forEach(wn=>{wn!==Me&&(rt[wn]=1/0),Qt.insert(rt[wn],wn,wn)});!Qt.isEmpty();){const wn=Qt.remove();zt[wn]=!0;const Yn=oe[wn]||[];for(let mr=0;mr<Yn.length;mr+=1){const Lr=Yn[mr];if(!zt[Lr]){const Fr=rt[wn]+Ue(wn,Lr);Fr<rt[Lr]&&(rt[Lr]=Fr,wt[Lr]=wn,Qt.updatePriority(Lr,Fr))}}}return wt}A.run=L})(Av||(Av={}));class ql{constructor(L,oe,Me,Ue){if(L==null)return this.set(255,255,255,1);if(typeof L=="number")return this.set(L,oe,Me,Ue);if(typeof L=="string")return ql.fromString(L)||this;if(Array.isArray(L))return this.set(L);this.set(L.r,L.g,L.b,L.a==null?1:L.a)}blend(L,oe,Me){this.set(L.r+(oe.r-L.r)*Me,L.g+(oe.g-L.g)*Me,L.b+(oe.b-L.b)*Me,L.a+(oe.a-L.a)*Me)}lighten(L){const oe=ql.lighten(this.toArray(),L);this.r=oe[0],this.g=oe[1],this.b=oe[2],this.a=oe[3]}darken(L){this.lighten(-L)}set(L,oe,Me,Ue){const rt=Array.isArray(L)?L[0]:L,wt=Array.isArray(L)?L[1]:oe,zt=Array.isArray(L)?L[2]:Me,Qt=Array.isArray(L)?L[3]:Ue;return this.r=Math.round(Sh(rt,0,255)),this.g=Math.round(Sh(wt,0,255)),this.b=Math.round(Sh(zt,0,255)),this.a=Qt==null?1:Sh(Qt,0,1),this}toHex(){return`#${["r","g","b"].map(oe=>{const Me=this[oe].toString(16);return Me.length<2?`0${Me}`:Me}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return ql.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(L){const oe=`${this.r},${this.g},${this.b},`;return L?`rgb(${oe})`:`rgba(${oe},${this.a})`}toGrey(){return ql.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(A){function L(oi){return new A(oi)}A.fromArray=L;function oe(oi){return new A([...Gi(oi),1])}A.fromHex=oe;function Me(oi){const vo=oi.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(vo){const Do=vo[1].split(/\s*,\s*/).map(bo=>parseInt(bo,10));return new A(Do)}return null}A.fromRGBA=Me;function Ue(oi,vo,Do){Do<0&&++Do,Do>1&&--Do;const bo=6*Do;return bo<1?oi+(vo-oi)*bo:2*Do<1?vo:3*Do<2?oi+(vo-oi)*(2/3-Do)*6:oi}function rt(oi){const vo=oi.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(vo){const Do=vo[2].split(/\s*,\s*/),bo=(parseFloat(Do[0])%360+360)%360/360,Cs=parseFloat(Do[1])/100,ea=parseFloat(Do[2])/100,As=Do[3]==null?1:parseInt(Do[3],10);return new A(wn(bo,Cs,ea,As))}return null}A.fromHSLA=rt;function wt(oi){if(oi.startsWith("#"))return oe(oi);if(oi.startsWith("rgb"))return Me(oi);const vo=A.named[oi];return vo?oe(vo):rt(oi)}A.fromString=wt;function zt(oi,vo){return A.fromArray([oi,oi,oi,vo])}A.makeGrey=zt;function Qt(oi,vo,Do,bo){const Cs=Array.isArray(oi)?oi[0]:oi,ea=Array.isArray(oi)?oi[1]:vo,As=Array.isArray(oi)?oi[2]:Do,Uu=Array.isArray(oi)?oi[3]:bo,za=Math.max(Cs,ea,As),hu=Math.min(Cs,ea,As),_l=(za+hu)/2;let ll=0,yi=0;if(hu!==za){const jo=za-hu;switch(yi=_l>.5?jo/(2-za-hu):jo/(za+hu),za){case Cs:ll=(ea-As)/jo+(ea<As?6:0);break;case ea:ll=(As-Cs)/jo+2;break;case As:ll=(Cs-ea)/jo+4;break;default:break}ll/=6}return[ll,yi,_l,Uu==null?1:Uu]}A.rgba2hsla=Qt;function wn(oi,vo,Do,bo){const Cs=Array.isArray(oi)?oi[0]:oi,ea=Array.isArray(oi)?oi[1]:vo,As=Array.isArray(oi)?oi[2]:Do,Uu=Array.isArray(oi)?oi[3]:bo,za=As<=.5?As*(ea+1):As+ea-As*ea,hu=2*As-za;return[Ue(hu,za,Cs+1/3)*256,Ue(hu,za,Cs)*256,Ue(hu,za,Cs-1/3)*256,Uu==null?1:Uu]}A.hsla2rgba=wn;function Yn(oi){return new A(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),oi?void 0:parseFloat(Math.random().toFixed(2)))}A.random=Yn;function mr(){const oi="0123456789ABCDEF";let vo="#";for(let Do=0;Do<6;Do+=1)vo+=oi[Math.floor(Math.random()*16)];return vo}A.randomHex=mr;function Lr(oi){return Yn(oi).toString()}A.randomRGBA=Lr;function Fr(oi,vo){if(typeof oi=="string"){const As=oi[0]==="#",[Uu,za,hu]=Gi(oi);return vo?Uu*.299+za*.587+hu*.114>186?"#000000":"#ffffff":`${As?"#":""}${po(255-Uu,255-za,255-hu)}`}const Do=oi[0],bo=oi[1],Cs=oi[2],ea=oi[3];return vo?Do*.299+bo*.587+Cs*.114>186?[0,0,0,ea]:[255,255,255,ea]:[255-Do,255-bo,255-Cs,ea]}A.invert=Fr;function Gi(oi){const vo=oi.indexOf("#")===0?oi:`#${oi}`;let Do=+`0x${vo.substr(1)}`;if(!(vo.length===4||vo.length===7)||Number.isNaN(Do))throw new Error("Invalid hex color.");const bo=vo.length===4?4:8,Cs=(1<<bo)-1,ea=["b","g","r"].map(()=>{const As=Do&Cs;return Do>>=bo,bo===4?17*As:As});return[ea[2],ea[1],ea[0]]}function po(oi,vo,Do){const bo=Cs=>Cs.length<2?`0${Cs}`:Cs;return`${bo(oi.toString(16))}${bo(vo.toString(16))}${bo(Do.toString(16))}`}function Ki(oi,vo){return Fo(oi,vo)}A.lighten=Ki;function Lo(oi,vo){return Fo(oi,-vo)}A.darken=Lo;function Fo(oi,vo){if(typeof oi=="string"){const Cs=oi[0]==="#",ea=parseInt(Cs?oi.substr(1):oi,16),As=Sh((ea>>16)+vo,0,255),Uu=Sh((ea>>8&255)+vo,0,255),za=Sh((ea&255)+vo,0,255);return`${Cs?"#":""}${(za|Uu<<8|As<<16).toString(16)}`}const Do=po(oi[0],oi[1],oi[2]),bo=Gi(Fo(Do,vo));return[bo[0],bo[1],bo[2],oi[3]]}})(ql||(ql={})),function(A){A.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(ql||(ql={}));class $0{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(L){return this.map.has(L)}get(L){return this.map.get(L)}set(L,oe){this.map.set(L,oe),this.arr.push(L)}delete(L){const oe=this.arr.indexOf(L);oe>=0&&this.arr.splice(oe,1);const Me=this.map.get(L);return this.map.delete(L),Me}each(L){this.arr.forEach(oe=>{const Me=this.map.get(oe);L(Me,oe)})}dispose(){this.clear()}}var _v;(function(A){function L(Ue){const rt=[],wt=[];return Array.isArray(Ue)?rt.push(...Ue):Ue.split("|").forEach(zt=>{zt.indexOf("&")===-1?rt.push(zt):wt.push(...zt.split("&"))}),{or:rt,and:wt}}A.parse=L;function oe(Ue,rt){if(Ue!=null&&rt!=null){const wt=L(Ue),zt=L(rt),Qt=wt.or.sort(),wn=zt.or.sort(),Yn=wt.and.sort(),mr=zt.and.sort(),Lr=(Fr,Gi)=>Fr.length===Gi.length&&(Fr.length===0||Fr.every((po,Ki)=>po===Gi[Ki]));return Lr(Qt,wn)&&Lr(Yn,mr)}return Ue==null&&rt==null}A.equals=oe;function Me(Ue,rt,wt){if(rt==null||Array.isArray(rt)&&rt.length===0)return wt?Ue.altKey!==!0&&Ue.ctrlKey!==!0&&Ue.metaKey!==!0&&Ue.shiftKey!==!0:!0;const{or:zt,and:Qt}=L(rt),wn=Yn=>{const mr=`${Yn.toLowerCase()}Key`;return Ue[mr]===!0};return zt.some(Yn=>wn(Yn))&&Qt.every(Yn=>wn(Yn))}A.isMatch=Me})(_v||(_v={}));var Jh;(function(A){A.linear=L=>L,A.quad=L=>L*L,A.cubic=L=>L*L*L,A.inout=L=>{if(L<=0)return 0;if(L>=1)return 1;const oe=L*L,Me=oe*L;return 4*(L<.5?Me:3*(L-oe)+Me-.75)},A.exponential=L=>Math.pow(2,10*(L-1)),A.bounce=L=>{for(let oe=0,Me=1;;oe+=Me,Me/=2)if(L>=(7-4*oe)/11){const Ue=(11-6*oe-11*L)/4;return-Ue*Ue+Me*Me}}})(Jh||(Jh={})),function(A){A.decorators={reverse(L){return oe=>1-L(1-oe)},reflect(L){return oe=>.5*(oe<.5?L(2*oe):2-L(2-2*oe))},clamp(L,oe=0,Me=1){return Ue=>{const rt=L(Ue);return rt<oe?oe:rt>Me?Me:rt}},back(L=1.70158){return oe=>oe*oe*((L+1)*oe-L)},elastic(L=1.5){return oe=>Math.pow(2,10*(oe-1))*Math.cos(20*Math.PI*L/3*oe)}}}(Jh||(Jh={})),function(A){function L(yi){return-1*Math.cos(yi*(Math.PI/2))+1}A.easeInSine=L;function oe(yi){return Math.sin(yi*(Math.PI/2))}A.easeOutSine=oe;function Me(yi){return-.5*(Math.cos(Math.PI*yi)-1)}A.easeInOutSine=Me;function Ue(yi){return yi*yi}A.easeInQuad=Ue;function rt(yi){return yi*(2-yi)}A.easeOutQuad=rt;function wt(yi){return yi<.5?2*yi*yi:-1+(4-2*yi)*yi}A.easeInOutQuad=wt;function zt(yi){return yi*yi*yi}A.easeInCubic=zt;function Qt(yi){const jo=yi-1;return jo*jo*jo+1}A.easeOutCubic=Qt;function wn(yi){return yi<.5?4*yi*yi*yi:(yi-1)*(2*yi-2)*(2*yi-2)+1}A.easeInOutCubic=wn;function Yn(yi){return yi*yi*yi*yi}A.easeInQuart=Yn;function mr(yi){const jo=yi-1;return 1-jo*jo*jo*jo}A.easeOutQuart=mr;function Lr(yi){const jo=yi-1;return yi<.5?8*yi*yi*yi*yi:1-8*jo*jo*jo*jo}A.easeInOutQuart=Lr;function Fr(yi){return yi*yi*yi*yi*yi}A.easeInQuint=Fr;function Gi(yi){const jo=yi-1;return 1+jo*jo*jo*jo*jo}A.easeOutQuint=Gi;function po(yi){const jo=yi-1;return yi<.5?16*yi*yi*yi*yi*yi:1+16*jo*jo*jo*jo*jo}A.easeInOutQuint=po;function Ki(yi){return yi===0?0:Math.pow(2,10*(yi-1))}A.easeInExpo=Ki;function Lo(yi){return yi===1?1:-Math.pow(2,-10*yi)+1}A.easeOutExpo=Lo;function Fo(yi){if(yi===0||yi===1)return yi;const jo=yi*2,va=jo-1;return jo<1?.5*Math.pow(2,10*va):.5*(-Math.pow(2,-10*va)+2)}A.easeInOutExpo=Fo;function oi(yi){const jo=yi/1;return-1*(Math.sqrt(1-jo*yi)-1)}A.easeInCirc=oi;function vo(yi){const jo=yi-1;return Math.sqrt(1-jo*jo)}A.easeOutCirc=vo;function Do(yi){const jo=yi*2,va=jo-2;return jo<1?-.5*(Math.sqrt(1-jo*jo)-1):.5*(Math.sqrt(1-va*va)+1)}A.easeInOutCirc=Do;function bo(yi,jo=1.70158){return yi*yi*((jo+1)*yi-jo)}A.easeInBack=bo;function Cs(yi,jo=1.70158){const va=yi/1-1;return va*va*((jo+1)*va+jo)+1}A.easeOutBack=Cs;function ea(yi,jo=1.70158){const va=yi*2,Dl=va-2,Kc=jo*1.525;return va<1?.5*va*va*((Kc+1)*va-Kc):.5*(Dl*Dl*((Kc+1)*Dl+Kc)+2)}A.easeInOutBack=ea;function As(yi,jo=.7){if(yi===0||yi===1)return yi;const Dl=yi/1-1,Kc=1-jo,Dv=Kc/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Dl)*Math.sin((Dl-Dv)*(2*Math.PI)/Kc))}A.easeInElastic=As;function Uu(yi,jo=.7){const va=1-jo,Dl=yi*2;if(yi===0||yi===1)return yi;const Kc=va/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Dl)*Math.sin((Dl-Kc)*(2*Math.PI)/va)+1}A.easeOutElastic=Uu;function za(yi,jo=.65){const va=1-jo;if(yi===0||yi===1)return yi;const Dl=yi*2,Kc=Dl-1,Dv=va/(2*Math.PI)*Math.asin(1);return Dl<1?-.5*(Math.pow(2,10*Kc)*Math.sin((Kc-Dv)*(2*Math.PI)/va)):Math.pow(2,-10*Kc)*Math.sin((Kc-Dv)*(2*Math.PI)/va)*.5+1}A.easeInOutElastic=za;function hu(yi){const jo=yi/1;if(jo<1/2.75)return 7.5625*jo*jo;if(jo<2/2.75){const va=jo-.5454545454545454;return 7.5625*va*va+.75}if(jo<2.5/2.75){const va=jo-.8181818181818182;return 7.5625*va*va+.9375}{const va=jo-.9545454545454546;return 7.5625*va*va+.984375}}A.easeOutBounce=hu;function _l(yi){return 1-hu(1-yi)}A.easeInBounce=_l;function ll(yi){return yi<.5?_l(yi*2)*.5:hu(yi*2-1)*.5+.5}A.easeInOutBounce=ll}(Jh||(Jh={}));var iy;(function(A){A.number=(L,oe)=>{const Me=oe-L;return Ue=>L+Me*Ue},A.object=(L,oe)=>{const Me=Object.keys(L);return Ue=>{const rt={};for(let wt=Me.length-1;wt!==-1;wt-=1){const zt=Me[wt];rt[zt]=L[zt]+(oe[zt]-L[zt])*Ue}return rt}},A.unit=(L,oe)=>{const Me=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,Ue=Me.exec(L),rt=Me.exec(oe),wt=rt?rt[1]:"",zt=Ue?+Ue[1]:0,Qt=rt?+rt[1]:0,wn=wt.indexOf("."),Yn=wn>0?wt[1].length-wn-1:0,mr=Qt-zt,Lr=Ue?Ue[2]:"";return Fr=>(zt+mr*Fr).toFixed(Yn)+Lr},A.color=(L,oe)=>{const Me=parseInt(L.slice(1),16),Ue=parseInt(oe.slice(1),16),rt=Me&255,wt=(Ue&255)-rt,zt=Me&65280,Qt=(Ue&65280)-zt,wn=Me&16711680,Yn=(Ue&16711680)-wn;return mr=>{const Lr=rt+wt*mr&255,Fr=zt+Qt*mr&65280,Gi=wn+Yn*mr&16711680;return`#${(1<<24|Lr|Fr|Gi).toString(16).slice(1)}`}}})(iy||(iy={}));const Ng=[];function mb(A,L){const oe=Ng.find(Me=>Me.name===A);if(!(oe&&(oe.loadTimes+=1,oe.loadTimes>1))&&!$h.isApplyingHMR()){const Me=document.createElement("style");Me.setAttribute("type","text/css"),Me.textContent=L;const Ue=document.querySelector("head");Ue&&Ue.insertBefore(Me,Ue.firstChild),Ng.push({name:A,loadTimes:1,styleElement:Me})}}function yb(A){const L=Ng.findIndex(oe=>oe.name===A);if(L>-1){const oe=Ng[L];if(oe.loadTimes-=1,oe.loadTimes>0)return;let Me=oe.styleElement;Me&&Me.parentNode&&Me.parentNode.removeChild(Me),Me=null,Ng.splice(L,1)}}},90591:function(){typeof window=="object"&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window!="undefined"&&function(bt){bt.forEach(O=>{Object.prototype.hasOwnProperty.call(O,"append")||Object.defineProperty(O,"append",{configurable:!0,enumerable:!0,writable:!0,value(...V){const J=document.createDocumentFragment();V.forEach(ie=>{const T=ie instanceof Node;J.appendChild(T?ie:document.createTextNode(String(ie)))}),this.appendChild(J)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype])},62595:function(bt,O,V){"use strict";V.r(O),V.d(O,{Angle:function(){return J},Curve:function(){return v},Ellipse:function(){return o},GeometryUtil:function(){return ie},Line:function(){return a},Path:function(){return S},Point:function(){return b},Polyline:function(){return d},Rectangle:function(){return u},Segment:function(){return x},normalizePathData:function(){return pe}});var J;(function(q){function M(j){return 180*j/Math.PI%360}q.toDeg=M,q.toRad=function(j,ue=!1){return(ue?j:j%360)*Math.PI/180};function I(j){return j%360+(j<0?360:0)}q.normalize=I})(J||(J={}));var ie;(function(q){function M(Ce,xe=0){return Number.isInteger(Ce)?Ce:+Ce.toFixed(xe)}q.round=M;function I(Ce,xe){let Oe,Le;if(xe==null?(Le=Ce==null?1:Ce,Oe=0):(Le=xe,Oe=Ce==null?0:Ce),Le<Oe){const Ge=Oe;Oe=Le,Le=Ge}return Math.floor(Math.random()*(Le-Oe+1)+Oe)}q.random=I;function j(Ce,xe,Oe){return Number.isNaN(Ce)?NaN:Number.isNaN(xe)||Number.isNaN(Oe)?0:xe<Oe?Ce<xe?xe:Ce>Oe?Oe:Ce:Ce<Oe?Oe:Ce>xe?xe:Ce}q.clamp=j;function ue(Ce,xe){return xe*Math.round(Ce/xe)}q.snapToGrid=ue;function se(Ce,xe){return xe!=null&&Ce!=null&&xe.x>=Ce.x&&xe.x<=Ce.x+Ce.width&&xe.y>=Ce.y&&xe.y<=Ce.y+Ce.height}q.containsPoint=se;function Ee(Ce,xe){const Oe=Ce.x-xe.x,Le=Ce.y-xe.y;return Oe*Oe+Le*Le}q.squaredLength=Ee})(ie||(ie={}));class T{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class b extends T{constructor(M,I){super(),this.x=M==null?0:M,this.y=I==null?0:I}round(M=0){return this.x=ie.round(this.x,M),this.y=ie.round(this.y,M),this}add(M,I){const j=b.create(M,I);return this.x+=j.x,this.y+=j.y,this}update(M,I){const j=b.create(M,I);return this.x=j.x,this.y=j.y,this}translate(M,I){const j=b.create(M,I);return this.x+=j.x,this.y+=j.y,this}rotate(M,I){const j=b.rotate(this,M,I);return this.x=j.x,this.y=j.y,this}scale(M,I,j=new b){const ue=b.create(j);return this.x=ue.x+M*(this.x-ue.x),this.y=ue.y+I*(this.y-ue.y),this}closest(M){if(M.length===1)return b.create(M[0]);let I=null,j=1/0;return M.forEach(ue=>{const se=this.squaredDistance(ue);se<j&&(I=ue,j=se)}),I?b.create(I):null}distance(M){return Math.sqrt(this.squaredDistance(M))}squaredDistance(M){const I=b.create(M),j=this.x-I.x,ue=this.y-I.y;return j*j+ue*ue}manhattanDistance(M){const I=b.create(M);return Math.abs(I.x-this.x)+Math.abs(I.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(M=new b){const I=b.create(M),j=-(I.y-this.y),ue=I.x-this.x;let se=Math.atan2(j,ue);return se<0&&(se=2*Math.PI+se),180*se/Math.PI}angleBetween(M,I){if(this.equals(M)||this.equals(I))return NaN;let j=this.theta(I)-this.theta(M);return j<0&&(j+=360),j}vectorAngle(M){return new b(0,0).angleBetween(this,M)}toPolar(M){return this.update(b.toPolar(this,M)),this}changeInAngle(M,I,j=new b){return this.clone().translate(-M,-I).theta(j)-this.theta(j)}adhereToRect(M){return ie.containsPoint(M,this)||(this.x=Math.min(Math.max(this.x,M.x),M.x+M.width),this.y=Math.min(Math.max(this.y,M.y),M.y+M.height)),this}bearing(M){const I=b.create(M),j=J.toRad(this.y),ue=J.toRad(I.y),se=this.x,Ee=I.x,Ce=J.toRad(Ee-se),xe=Math.sin(Ce)*Math.cos(ue),Oe=Math.cos(j)*Math.sin(ue)-Math.sin(j)*Math.cos(ue)*Math.cos(Ce),Le=J.toDeg(Math.atan2(xe,Oe)),Ge=["NE","E","SE","S","SW","W","NW","N"];let He=Le-22.5;return He<0&&(He+=360),He=parseInt(He/45,10),Ge[He]}cross(M,I){if(M!=null&&I!=null){const j=b.create(M),ue=b.create(I);return(ue.x-this.x)*(j.y-this.y)-(ue.y-this.y)*(j.x-this.x)}return NaN}dot(M){const I=b.create(M);return this.x*I.x+this.y*I.y}diff(M,I){if(typeof M=="number")return new b(this.x-M,this.y-I);const j=b.create(M);return new b(this.x-j.x,this.y-j.y)}lerp(M,I){const j=b.create(M);return new b((1-I)*this.x+I*j.x,(1-I)*this.y+I*j.y)}normalize(M=1){const I=M/this.magnitude();return this.scale(I,I)}move(M,I){const j=b.create(M),ue=J.toRad(j.theta(this));return this.translate(Math.cos(ue)*I,-Math.sin(ue)*I)}reflection(M){return b.create(M).move(this,this.distance(M))}snapToGrid(M,I){return this.x=ie.snapToGrid(this.x,M),this.y=ie.snapToGrid(this.y,I==null?M:I),this}equals(M){const I=b.create(M);return I!=null&&I.x===this.x&&I.y===this.y}clone(){return b.clone(this)}toJSON(){return b.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(q){function M(I){return I!=null&&I instanceof q}q.isPoint=M})(b||(b={})),function(q){function M(j){return j!=null&&typeof j=="object"&&typeof j.x=="number"&&typeof j.y=="number"}q.isPointLike=M;function I(j){return j!=null&&Array.isArray(j)&&j.length===2&&typeof j[0]=="number"&&typeof j[1]=="number"}q.isPointData=I}(b||(b={})),function(q){function M(Ge,He){return Ge==null||typeof Ge=="number"?new q(Ge,He):I(Ge)}q.create=M;function I(Ge){return q.isPoint(Ge)?new q(Ge.x,Ge.y):Array.isArray(Ge)?new q(Ge[0],Ge[1]):new q(Ge.x,Ge.y)}q.clone=I;function j(Ge){return q.isPoint(Ge)?{x:Ge.x,y:Ge.y}:Array.isArray(Ge)?{x:Ge[0],y:Ge[1]}:{x:Ge.x,y:Ge.y}}q.toJSON=j;function ue(Ge,He,Et=new q){let Ct=Math.abs(Ge*Math.cos(He)),Gt=Math.abs(Ge*Math.sin(He));const At=I(Et),vt=J.normalize(J.toDeg(He));return vt<90?Gt=-Gt:vt<180?(Ct=-Ct,Gt=-Gt):vt<270&&(Ct=-Ct),new q(At.x+Ct,At.y+Gt)}q.fromPolar=ue;function se(Ge,He=new q){const Et=I(Ge),Ct=I(He),Gt=Et.x-Ct.x,At=Et.y-Ct.y;return new q(Math.sqrt(Gt*Gt+At*At),J.toRad(Ct.theta(Et)))}q.toPolar=se;function Ee(Ge,He){return Ge===He?!0:Ge!=null&&He!=null?Ge.x===He.x&&Ge.y===He.y:!1}q.equals=Ee;function Ce(Ge,He){if(Ge==null&&He!=null||Ge!=null&&He==null||Ge!=null&&He!=null&&Ge.length!==He.length)return!1;if(Ge!=null&&He!=null){for(let Et=0,Ct=Ge.length;Et<Ct;Et+=1)if(!Ee(Ge[Et],He[Et]))return!1}return!0}q.equalPoints=Ce;function xe(Ge,He,Et,Ct){return new q(ie.random(Ge,He),ie.random(Et,Ct))}q.random=xe;function Oe(Ge,He,Et){const Ct=J.toRad(J.normalize(-He)),Gt=Math.sin(Ct),At=Math.cos(Ct);return Le(Ge,At,Gt,Et)}q.rotate=Oe;function Le(Ge,He,Et,Ct=new q){const Gt=I(Ge),At=I(Ct),vt=Gt.x-At.x,cn=Gt.y-At.y,hn=vt*He-cn*Et,Bn=cn*He+vt*Et;return new q(hn+At.x,Bn+At.y)}q.rotateEx=Le}(b||(b={}));class u extends T{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new b(this.x,this.y)}get topLeft(){return new b(this.x,this.y)}get topCenter(){return new b(this.x+this.width/2,this.y)}get topRight(){return new b(this.x+this.width,this.y)}get center(){return new b(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new b(this.x,this.y+this.height)}get bottomCenter(){return new b(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new b(this.x+this.width,this.y+this.height)}get corner(){return new b(this.x+this.width,this.y+this.height)}get rightMiddle(){return new b(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new b(this.x,this.y+this.height/2)}get topLine(){return new a(this.topLeft,this.topRight)}get rightLine(){return new a(this.topRight,this.bottomRight)}get bottomLine(){return new a(this.bottomLeft,this.bottomRight)}get leftLine(){return new a(this.topLeft,this.bottomLeft)}constructor(M,I,j,ue){super(),this.x=M==null?0:M,this.y=I==null?0:I,this.width=j==null?0:j,this.height=ue==null?0:ue}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(M){if(!M)return this.clone();const I=J.toRad(M),j=Math.abs(Math.sin(I)),ue=Math.abs(Math.cos(I)),se=this.width*ue+this.height*j,Ee=this.width*j+this.height*ue;return new u(this.x+(this.width-se)/2,this.y+(this.height-Ee)/2,se,Ee)}round(M=0){return this.x=ie.round(this.x,M),this.y=ie.round(this.y,M),this.width=ie.round(this.width,M),this.height=ie.round(this.height,M),this}add(M,I,j,ue){const se=u.create(M,I,j,ue),Ee=Math.min(this.x,se.x),Ce=Math.min(this.y,se.y),xe=Math.max(this.x+this.width,se.x+se.width),Oe=Math.max(this.y+this.height,se.y+se.height);return this.x=Ee,this.y=Ce,this.width=xe-Ee,this.height=Oe-Ce,this}update(M,I,j,ue){const se=u.create(M,I,j,ue);return this.x=se.x,this.y=se.y,this.width=se.width,this.height=se.height,this}inflate(M,I){const j=M,ue=I!=null?I:M;return this.x-=j,this.y-=ue,this.width+=2*j,this.height+=2*ue,this}snapToGrid(M,I){const j=this.origin.snapToGrid(M,I),ue=this.corner.snapToGrid(M,I);return this.x=j.x,this.y=j.y,this.width=ue.x-j.x,this.height=ue.y-j.y,this}translate(M,I){const j=b.create(M,I);return this.x+=j.x,this.y+=j.y,this}scale(M,I,j=new b){const ue=this.origin.scale(M,I,j);return this.x=ue.x,this.y=ue.y,this.width*=M,this.height*=I,this}rotate(M,I=this.getCenter()){if(M!==0){const j=J.toRad(M),ue=Math.cos(j),se=Math.sin(j);let Ee=this.getOrigin(),Ce=this.getTopRight(),xe=this.getBottomRight(),Oe=this.getBottomLeft();Ee=b.rotateEx(Ee,ue,se,I),Ce=b.rotateEx(Ce,ue,se,I),xe=b.rotateEx(xe,ue,se,I),Oe=b.rotateEx(Oe,ue,se,I);const Le=new u(Ee.x,Ee.y,0,0);Le.add(Ce.x,Ce.y,0,0),Le.add(xe.x,xe.y,0,0),Le.add(Oe.x,Oe.y,0,0),this.update(Le)}return this}rotate90(){const M=(this.width-this.height)/2;this.x+=M,this.y-=M;const I=this.width;return this.width=this.height,this.height=I,this}moveAndExpand(M){const I=u.clone(M);return this.x+=I.x||0,this.y+=I.y||0,this.width+=I.width||0,this.height+=I.height||0,this}getMaxScaleToFit(M,I=this.center){const j=u.clone(M),ue=I.x,se=I.y;let Ee=1/0,Ce=1/0,xe=1/0,Oe=1/0,Le=1/0,Ge=1/0,He=1/0,Et=1/0;const Ct=j.topLeft;Ct.x<ue&&(Ee=(this.x-ue)/(Ct.x-ue)),Ct.y<se&&(Le=(this.y-se)/(Ct.y-se));const Gt=j.bottomRight;Gt.x>ue&&(Ce=(this.x+this.width-ue)/(Gt.x-ue)),Gt.y>se&&(Ge=(this.y+this.height-se)/(Gt.y-se));const At=j.topRight;At.x>ue&&(xe=(this.x+this.width-ue)/(At.x-ue)),At.y<se&&(He=(this.y-se)/(At.y-se));const vt=j.bottomLeft;return vt.x<ue&&(Oe=(this.x-ue)/(vt.x-ue)),vt.y>se&&(Et=(this.y+this.height-se)/(vt.y-se)),{sx:Math.min(Ee,Ce,xe,Oe),sy:Math.min(Le,Ge,He,Et)}}getMaxUniformScaleToFit(M,I=this.center){const j=this.getMaxScaleToFit(M,I);return Math.min(j.sx,j.sy)}containsPoint(M,I){return ie.containsPoint(this,b.create(M,I))}containsRect(M,I,j,ue){const se=u.create(M,I,j,ue),Ee=this.x,Ce=this.y,xe=this.width,Oe=this.height,Le=se.x,Ge=se.y,He=se.width,Et=se.height;return xe===0||Oe===0||He===0||Et===0?!1:Le>=Ee&&Ge>=Ce&&Le+He<=Ee+xe&&Ge+Et<=Ce+Oe}intersectsWithLine(M){const I=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],j=[],ue=[];return I.forEach(se=>{const Ee=M.intersectsWithLine(se);Ee!==null&&ue.indexOf(Ee.toString())<0&&(j.push(Ee),ue.push(Ee.toString()))}),j.length>0?j:null}intersectsWithLineFromCenterToPoint(M,I){const j=b.clone(M),ue=this.center;let se=null;I!=null&&I!==0&&j.rotate(I,ue);const Ee=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],Ce=new a(ue,j);for(let xe=Ee.length-1;xe>=0;xe-=1){const Oe=Ee[xe].intersectsWithLine(Ce);if(Oe!==null){se=Oe;break}}return se&&I!=null&&I!==0&&se.rotate(-I,ue),se}intersectsWithRect(M,I,j,ue){const se=u.create(M,I,j,ue);if(!this.isIntersectWithRect(se))return null;const Ee=this.origin,Ce=this.corner,xe=se.origin,Oe=se.corner,Le=Math.max(Ee.x,xe.x),Ge=Math.max(Ee.y,xe.y);return new u(Le,Ge,Math.min(Ce.x,Oe.x)-Le,Math.min(Ce.y,Oe.y)-Ge)}isIntersectWithRect(M,I,j,ue){const se=u.create(M,I,j,ue),Ee=this.origin,Ce=this.corner,xe=se.origin,Oe=se.corner;return!(Oe.x<=Ee.x||Oe.y<=Ee.y||xe.x>=Ce.x||xe.y>=Ce.y)}normalize(){let M=this.x,I=this.y,j=this.width,ue=this.height;return this.width<0&&(M=this.x+this.width,j=-this.width),this.height<0&&(I=this.y+this.height,ue=-this.height),this.x=M,this.y=I,this.width=j,this.height=ue,this}union(M){const I=u.clone(M),j=this.origin,ue=this.corner,se=I.origin,Ee=I.corner,Ce=Math.min(j.x,se.x),xe=Math.min(j.y,se.y),Oe=Math.max(ue.x,Ee.x),Le=Math.max(ue.y,Ee.y);return new u(Ce,xe,Oe-Ce,Le-xe)}getNearestSideToPoint(M){const I=b.clone(M),j=I.x-this.x,ue=this.x+this.width-I.x,se=I.y-this.y,Ee=this.y+this.height-I.y;let Ce=j,xe="left";return ue<Ce&&(Ce=ue,xe="right"),se<Ce&&(Ce=se,xe="top"),Ee<Ce&&(xe="bottom"),xe}getNearestPointToPoint(M){const I=b.clone(M);if(this.containsPoint(I)){const j=this.getNearestSideToPoint(I);if(j==="left")return new b(this.x,I.y);if(j==="top")return new b(I.x,this.y);if(j==="right")return new b(this.x+this.width,I.y);if(j==="bottom")return new b(I.x,this.y+this.height)}return I.adhereToRect(this)}equals(M){return M!=null&&M.x===this.x&&M.y===this.y&&M.width===this.width&&M.height===this.height}clone(){return new u(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(q){function M(I){return I!=null&&I instanceof q}q.isRectangle=M})(u||(u={})),function(q){function M(I){return I!=null&&typeof I=="object"&&typeof I.x=="number"&&typeof I.y=="number"&&typeof I.width=="number"&&typeof I.height=="number"}q.isRectangleLike=M}(u||(u={})),function(q){function M(Ee,Ce,xe,Oe){return Ee==null||typeof Ee=="number"?new q(Ee,Ce,xe,Oe):I(Ee)}q.create=M;function I(Ee){return q.isRectangle(Ee)?Ee.clone():Array.isArray(Ee)?new q(Ee[0],Ee[1],Ee[2],Ee[3]):new q(Ee.x,Ee.y,Ee.width,Ee.height)}q.clone=I;function j(Ee){return new q(Ee.x-Ee.a,Ee.y-Ee.b,2*Ee.a,2*Ee.b)}q.fromEllipse=j;function ue(Ee){return new q(0,0,Ee.width,Ee.height)}q.fromSize=ue;function se(Ee,Ce){return new q(Ee.x,Ee.y,Ce.width,Ce.height)}q.fromPositionAndSize=se}(u||(u={}));class a extends T{get center(){return new b((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(M,I,j,ue){super(),typeof M=="number"&&typeof I=="number"?(this.start=new b(M,I),this.end=new b(j,ue)):(this.start=b.create(M),this.end=b.create(I))}getCenter(){return this.center}round(M=0){return this.start.round(M),this.end.round(M),this}translate(M,I){return typeof M=="number"?(this.start.translate(M,I),this.end.translate(M,I)):(this.start.translate(M),this.end.translate(M)),this}rotate(M,I){return this.start.rotate(M,I),this.end.rotate(M,I),this}scale(M,I,j){return this.start.scale(M,I,j),this.end.scale(M,I,j),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const M=this.start.x-this.end.x,I=this.start.y-this.end.y;return M*M+I*I}setLength(M){const I=this.length();if(!I)return this;const j=M/I;return this.scale(j,j,this.start)}parallel(M){const I=this.clone();if(!I.isDifferentiable())return I;const{start:j,end:ue}=I,se=j.clone().rotate(270,ue),Ee=ue.clone().rotate(90,j);return j.move(Ee,M),ue.move(se,M),I}vector(){return new b(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const M=new b(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,M)}bbox(){const M=Math.min(this.start.x,this.end.x),I=Math.min(this.start.y,this.end.y),j=Math.max(this.start.x,this.end.x),ue=Math.max(this.start.y,this.end.y);return new u(M,I,j-M,ue-I)}bearing(){return this.start.bearing(this.end)}closestPoint(M){return this.pointAt(this.closestPointNormalizedLength(M))}closestPointLength(M){return this.closestPointNormalizedLength(M)*this.length()}closestPointTangent(M){return this.tangentAt(this.closestPointNormalizedLength(M))}closestPointNormalizedLength(M){const I=this.vector().dot(new a(this.start,M).vector()),j=Math.min(1,Math.max(0,I/this.squaredLength()));return Number.isNaN(j)?0:j}pointAt(M){const I=this.start,j=this.end;return M<=0?I.clone():M>=1?j.clone():I.lerp(j,M)}pointAtLength(M){const I=this.start,j=this.end;let ue=!0;M<0&&(ue=!1,M=-M);const se=this.length();if(M>=se)return ue?j.clone():I.clone();const Ee=(ue?M:se-M)/se;return this.pointAt(Ee)}divideAt(M){const I=this.pointAt(M);return[new a(this.start,I),new a(I,this.end)]}divideAtLength(M){const I=this.pointAtLength(M);return[new a(this.start,I),new a(I,this.end)]}containsPoint(M){const I=this.start,j=this.end;if(I.cross(M,j)!==0)return!1;const ue=this.length();return!(new a(I,M).length()>ue||new a(M,j).length()>ue)}intersect(M,I){const j=M.intersectsWithLine(this,I);return j?Array.isArray(j)?j:[j]:null}intersectsWithLine(M){const I=new b(this.end.x-this.start.x,this.end.y-this.start.y),j=new b(M.end.x-M.start.x,M.end.y-M.start.y),ue=I.x*j.y-I.y*j.x,se=new b(M.start.x-this.start.x,M.start.y-this.start.y),Ee=se.x*j.y-se.y*j.x,Ce=se.x*I.y-se.y*I.x;if(ue===0||Ee*ue<0||Ce*ue<0)return null;if(ue>0){if(Ee>ue||Ce>ue)return null}else if(Ee<ue||Ce<ue)return null;return new b(this.start.x+Ee*I.x/ue,this.start.y+Ee*I.y/ue)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(M){const I=b.clone(M),j=this.start,ue=this.end;return((ue.x-j.x)*(I.y-j.y)-(ue.y-j.y)*(I.x-j.x))/this.length()}pointSquaredDistance(M,I){const j=b.create(M,I);return this.closestPoint(j).squaredDistance(j)}pointDistance(M,I){const j=b.create(M,I);return this.closestPoint(j).distance(j)}tangentAt(M){if(!this.isDifferentiable())return null;const I=this.start,j=this.end,ue=this.pointAt(M),se=new a(I,j);return se.translate(ue.x-I.x,ue.y-I.y),se}tangentAtLength(M){if(!this.isDifferentiable())return null;const I=this.start,j=this.end,ue=this.pointAtLength(M),se=new a(I,j);return se.translate(ue.x-I.x,ue.y-I.y),se}relativeCcw(M,I){const j=b.create(M,I);let ue=j.x-this.start.x,se=j.y-this.start.y;const Ee=this.end.x-this.start.x,Ce=this.end.y-this.start.y;let xe=ue*Ce-se*Ee;return xe===0&&(xe=ue*Ee+se*Ce,xe>0&&(ue-=Ee,se-=Ce,xe=ue*Ee+se*Ce,xe<0&&(xe=0))),xe<0?-1:xe>0?1:0}equals(M){return M!=null&&this.start.x===M.start.x&&this.start.y===M.start.y&&this.end.x===M.end.x&&this.end.y===M.end.y}clone(){return new a(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(q){function M(I){return I!=null&&I instanceof q}q.isLine=M})(a||(a={}));class o extends T{get center(){return new b(this.x,this.y)}constructor(M,I,j,ue){super(),this.x=M==null?0:M,this.y=I==null?0:I,this.a=j==null?0:j,this.b=ue==null?0:ue}bbox(){return u.fromEllipse(this)}getCenter(){return this.center}inflate(M,I){const j=M,ue=I!=null?I:M;return this.a+=2*j,this.b+=2*ue,this}normalizedDistance(M,I){const j=b.create(M,I),ue=j.x-this.x,se=j.y-this.y,Ee=this.a,Ce=this.b;return ue*ue/(Ee*Ee)+se*se/(Ce*Ce)}containsPoint(M,I){return this.normalizedDistance(M,I)<=1}intersectsWithLine(M){const I=[],j=this.a,ue=this.b,se=M.start,Ee=M.end,Ce=M.vector(),xe=se.diff(new b(this.x,this.y)),Oe=new b(Ce.x/(j*j),Ce.y/(ue*ue)),Le=new b(xe.x/(j*j),xe.y/(ue*ue)),Ge=Ce.dot(Oe),He=Ce.dot(Le),Et=xe.dot(Le)-1,Ct=He*He-Ge*Et;if(Ct<0)return null;if(Ct>0){const Gt=Math.sqrt(Ct),At=(-He-Gt)/Ge,vt=(-He+Gt)/Ge;if((At<0||At>1)&&(vt<0||vt>1))return null;At>=0&&At<=1&&I.push(se.lerp(Ee,At)),vt>=0&&vt<=1&&I.push(se.lerp(Ee,vt))}else{const Gt=-He/Ge;if(Gt>=0&&Gt<=1)I.push(se.lerp(Ee,Gt));else return null}return I}intersectsWithLineFromCenterToPoint(M,I=0){const j=b.clone(M);I&&j.rotate(I,this.getCenter());const ue=j.x-this.x,se=j.y-this.y;let Ee;if(ue===0)return Ee=this.bbox().getNearestPointToPoint(j),I?Ee.rotate(-I,this.getCenter()):Ee;const Ce=se/ue,xe=Ce*Ce,Oe=this.a*this.a,Le=this.b*this.b;let Ge=Math.sqrt(1/(1/Oe+xe/Le));Ge=ue<0?-Ge:Ge;const He=Ce*Ge;return Ee=new b(this.x+Ge,this.y+He),I?Ee.rotate(-I,this.getCenter()):Ee}tangentTheta(M){const I=b.clone(M),j=I.x,ue=I.y,se=this.a,Ee=this.b,Ce=this.bbox().center,xe=Ce.x,Oe=Ce.y,Le=30,Ge=j>Ce.x+se/2,He=j<Ce.x-se/2;let Et,Ct;return Ge||He?(Ct=j>Ce.x?ue-Le:ue+Le,Et=se*se/(j-xe)-se*se*(ue-Oe)*(Ct-Oe)/(Ee*Ee*(j-xe))+xe):(Et=ue>Ce.y?j+Le:j-Le,Ct=Ee*Ee/(ue-Oe)-Ee*Ee*(j-xe)*(Et-xe)/(se*se*(ue-Oe))+Oe),new b(Et,Ct).theta(I)}scale(M,I){return this.a*=M,this.b*=I,this}rotate(M,I){const j=u.fromEllipse(this);j.rotate(M,I);const ue=o.fromRect(j);return this.a=ue.a,this.b=ue.b,this.x=ue.x,this.y=ue.y,this}translate(M,I){const j=b.create(M,I);return this.x+=j.x,this.y+=j.y,this}equals(M){return M!=null&&M.x===this.x&&M.y===this.y&&M.a===this.a&&M.b===this.b}clone(){return new o(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(q){function M(I){return I!=null&&I instanceof q}q.isEllipse=M})(o||(o={})),function(q){function M(ue,se,Ee,Ce){return ue==null||typeof ue=="number"?new q(ue,se,Ee,Ce):I(ue)}q.create=M;function I(ue){return q.isEllipse(ue)?ue.clone():Array.isArray(ue)?new q(ue[0],ue[1],ue[2],ue[3]):new q(ue.x,ue.y,ue.a,ue.b)}q.parse=I;function j(ue){const se=ue.center;return new q(se.x,se.y,ue.width/2,ue.height/2)}q.fromRect=j}(o||(o={}));const l=new RegExp("^[\\s\\dLMCZz,.]*$");function r(q){return typeof q!="string"?!1:l.test(q)}function e(q,M){return(q%M+M)%M}function t(q,M,I,j,ue){const se=[],Ee=q[q.length-1],Ce=M!=null&&M>0,xe=M||0;if(j&&Ce){q=q.slice();const Ge=q[0],He=new b(Ee.x+(Ge.x-Ee.x)/2,Ee.y+(Ge.y-Ee.y)/2);q.splice(0,0,He)}let Oe=q[0],Le=1;for(I?se.push("M",Oe.x,Oe.y):se.push("L",Oe.x,Oe.y);Le<(j?q.length:q.length-1);){let Ge=q[e(Le,q.length)],He=Oe.x-Ge.x,Et=Oe.y-Ge.y;if(Ce&&(He!==0||Et!==0)&&(ue==null||ue.indexOf(Le-1)<0)){let Ct=Math.sqrt(He*He+Et*Et);const Gt=He*Math.min(xe,Ct/2)/Ct,At=Et*Math.min(xe,Ct/2)/Ct,vt=Ge.x+Gt,cn=Ge.y+At;se.push("L",vt,cn);let hn=q[e(Le+1,q.length)];for(;Le<q.length-2&&Math.round(hn.x-Ge.x)===0&&Math.round(hn.y-Ge.y)===0;)hn=q[e(Le+2,q.length)],Le+=1;He=hn.x-Ge.x,Et=hn.y-Ge.y,Ct=Math.max(1,Math.sqrt(He*He+Et*Et));const Bn=He*Math.min(xe,Ct/2)/Ct,Fn=Et*Math.min(xe,Ct/2)/Ct,ir=Ge.x+Bn,Nr=Ge.y+Fn;se.push("Q",Ge.x,Ge.y,ir,Nr),Ge=new b(ir,Nr)}else se.push("L",Ge.x,Ge.y);Oe=Ge,Le+=1}return j?se.push("Z"):se.push("L",Ee.x,Ee.y),se.map(Ge=>typeof Ge=="string"?Ge:+Ge.toFixed(3)).join(" ")}function s(q,M={}){const I=[];return q&&q.length&&q.forEach(j=>{Array.isArray(j)?I.push({x:j[0],y:j[1]}):I.push({x:j.x,y:j.y})}),t(I,M.round,M.initialMove==null||M.initialMove,M.close,M.exclude)}function h(q,M,I,j,ue=0,se=0,Ee=0,Ce,xe){if(I===0||j===0)return[];Ce-=q,xe-=M,I=Math.abs(I),j=Math.abs(j);const Oe=-Ce/2,Le=-xe/2,Ge=Math.cos(ue*Math.PI/180),He=Math.sin(ue*Math.PI/180),Et=Ge*Oe+He*Le,Ct=-1*He*Oe+Ge*Le,Gt=Et*Et,At=Ct*Ct,vt=I*I,cn=j*j,hn=Gt/vt+At/cn;let Bn;if(hn>1)I=Math.sqrt(hn)*I,j=Math.sqrt(hn)*j,Bn=0;else{let xt=1;se===Ee&&(xt=-1),Bn=xt*Math.sqrt((vt*cn-vt*At-cn*Gt)/(vt*At+cn*Gt))}const Fn=Bn*I*Ct/j,ir=-1*Bn*j*Et/I,Nr=Ge*Fn-He*ir+Ce/2,Ei=He*Fn+Ge*ir+xe/2;let ci=Math.atan2((Ct-ir)/j,(Et-Fn)/I)-Math.atan2(0,1),Ot=ci>=0?ci:2*Math.PI+ci;ci=Math.atan2((-Ct-ir)/j,(-Et-Fn)/I)-Math.atan2((Ct-ir)/j,(Et-Fn)/I);let fr=ci>=0?ci:2*Math.PI+ci;Ee===0&&fr>0?fr-=2*Math.PI:Ee!==0&&fr<0&&(fr+=2*Math.PI);const Pi=fr*2/Math.PI,Li=Math.ceil(Pi<0?-1*Pi:Pi),zn=fr/Li,$e=8/3*Math.sin(zn/4)*Math.sin(zn/4)/Math.sin(zn/2),Xt=Ge*I,Rt=Ge*j,_t=He*I,Tt=He*j;let at=Math.cos(Ot),ce=Math.sin(Ot),ut=-$e*(Xt*ce+Tt*at),Ze=-$e*(_t*ce-Rt*at),Wt=0,Ut=0;const jt=[];for(let xt=0;xt<Li;xt+=1){Ot+=zn,at=Math.cos(Ot),ce=Math.sin(Ot),Wt=Xt*at-Tt*ce+Nr,Ut=_t*at+Rt*ce+Ei;const $t=-$e*(Xt*ce+Tt*at),Un=-$e*(_t*ce-Rt*at),qn=xt*6;jt[qn]=Number(ut+q),jt[qn+1]=Number(Ze+M),jt[qn+2]=Number(Wt-$t+q),jt[qn+3]=Number(Ut-Un+M),jt[qn+4]=Number(Wt+q),jt[qn+5]=Number(Ut+M),ut=Wt+$t,Ze=Ut+Un}return jt.map(xt=>+xt.toFixed(2))}function m(q,M,I,j,ue=0,se=0,Ee=0,Ce,xe){const Oe=[],Le=h(q,M,I,j,ue,se,Ee,Ce,xe);if(Le!=null)for(let Ge=0,He=Le.length;Ge<He;Ge+=6)Oe.push("C",Le[Ge],Le[Ge+1],Le[Ge+2],Le[Ge+3],Le[Ge+4],Le[Ge+5]);return Oe.join(" ")}class d extends T{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(M){if(super(),M!=null){if(typeof M=="string")return d.parse(M);this.points=M.map(I=>b.create(I))}else this.points=[]}scale(M,I,j=new b){return this.points.forEach(ue=>ue.scale(M,I,j)),this}rotate(M,I){return this.points.forEach(j=>j.rotate(M,I)),this}translate(M,I){const j=b.create(M,I);return this.points.forEach(ue=>ue.translate(j.x,j.y)),this}round(M=0){return this.points.forEach(I=>I.round(M)),this}bbox(){if(this.points.length===0)return new u;let M=1/0,I=-1/0,j=1/0,ue=-1/0;const se=this.points;for(let Ee=0,Ce=se.length;Ee<Ce;Ee+=1){const xe=se[Ee],Oe=xe.x,Le=xe.y;Oe<M&&(M=Oe),Oe>I&&(I=Oe),Le<j&&(j=Le),Le>ue&&(ue=Le)}return new u(M,j,I-M,ue-j)}closestPoint(M){const I=this.closestPointLength(M);return this.pointAtLength(I)}closestPointLength(M){const I=this.points,j=I.length;if(j===0||j===1)return 0;let ue=0,se=0,Ee=1/0;for(let Ce=0,xe=j-1;Ce<xe;Ce+=1){const Oe=new a(I[Ce],I[Ce+1]),Le=Oe.length(),Ge=Oe.closestPointNormalizedLength(M),Et=Oe.pointAt(Ge).squaredDistance(M);Et<Ee&&(Ee=Et,se=ue+Ge*Le),ue+=Le}return se}closestPointNormalizedLength(M){const I=this.length();return I===0?0:this.closestPointLength(M)/I}closestPointTangent(M){const I=this.closestPointLength(M);return this.tangentAtLength(I)}containsPoint(M){if(this.points.length===0)return!1;const I=b.clone(M),j=I.x,ue=I.y,se=this.points,Ee=se.length;let Ce=Ee-1,xe=0;for(let Oe=0;Oe<Ee;Oe+=1){const Le=se[Ce],Ge=se[Oe];if(I.equals(Le))return!0;const He=new a(Le,Ge);if(He.containsPoint(M))return!0;if(ue<=Le.y&&ue>Ge.y||ue>Le.y&&ue<=Ge.y){const Et=Le.x-j>Ge.x-j?Le.x-j:Ge.x-j;if(Et>=0){const Ct=new b(j+Et,ue),Gt=new a(M,Ct);He.intersectsWithLine(Gt)&&(xe+=1)}}Ce=Oe}return xe%2===1}intersectsWithLine(M){const I=[];for(let j=0,ue=this.points.length-1;j<ue;j+=1){const se=this.points[j],Ee=this.points[j+1],Ce=M.intersectsWithLine(new a(se,Ee));Ce&&I.push(Ce)}return I.length>0?I:null}isDifferentiable(){for(let M=0,I=this.points.length-1;M<I;M+=1){const j=this.points[M],ue=this.points[M+1];if(new a(j,ue).isDifferentiable())return!0}return!1}length(){let M=0;for(let I=0,j=this.points.length-1;I<j;I+=1){const ue=this.points[I],se=this.points[I+1];M+=ue.distance(se)}return M}pointAt(M){const I=this.points,j=I.length;if(j===0)return null;if(j===1||M<=0)return I[0].clone();if(M>=1)return I[j-1].clone();const se=this.length()*M;return this.pointAtLength(se)}pointAtLength(M){const I=this.points,j=I.length;if(j===0)return null;if(j===1)return I[0].clone();let ue=!0;M<0&&(ue=!1,M=-M);let se=0;for(let Ce=0,xe=j-1;Ce<xe;Ce+=1){const Oe=ue?Ce:xe-1-Ce,Le=I[Oe],Ge=I[Oe+1],He=new a(Le,Ge),Et=Le.distance(Ge);if(M<=se+Et)return He.pointAtLength((ue?1:-1)*(M-se));se+=Et}return(ue?I[j-1]:I[0]).clone()}tangentAt(M){const j=this.points.length;if(j===0||j===1)return null;M<0&&(M=0),M>1&&(M=1);const se=this.length()*M;return this.tangentAtLength(se)}tangentAtLength(M){const I=this.points,j=I.length;if(j===0||j===1)return null;let ue=!0;M<0&&(ue=!1,M=-M);let se,Ee=0;for(let Ce=0,xe=j-1;Ce<xe;Ce+=1){const Oe=ue?Ce:xe-1-Ce,Le=I[Oe],Ge=I[Oe+1],He=new a(Le,Ge),Et=Le.distance(Ge);if(He.isDifferentiable()){if(M<=Ee+Et)return He.tangentAtLength((ue?1:-1)*(M-Ee));se=He}Ee+=Et}if(se){const Ce=ue?1:0;return se.tangentAt(Ce)}return null}simplify(M={}){const I=this.points;if(I.length<3)return this;const j=M.threshold||0;let ue=0;for(;I[ue+2];){const se=ue,Ee=ue+1,Ce=ue+2,xe=I[se],Oe=I[Ee],Le=I[Ce];new a(xe,Le).closestPoint(Oe).distance(Oe)<=j?I.splice(Ee,1):ue+=1}return this}toHull(){const M=this.points,I=M.length;if(I===0)return new d;let j=M[0];for(let He=1;He<I;He+=1)(M[He].y<j.y||M[He].y===j.y&&M[He].x>j.x)&&(j=M[He]);const ue=[];for(let He=0;He<I;He+=1){let Et=j.theta(M[He]);Et===0&&(Et=360),ue.push([M[He],He,Et])}if(ue.sort((He,Et)=>{let Ct=He[2]-Et[2];return Ct===0&&(Ct=Et[1]-He[1]),Ct}),ue.length>2){const He=ue[ue.length-1];ue.unshift(He)}const se={},Ee=[],Ce=He=>`${He[0].toString()}@${He[1]}`;for(;ue.length!==0;){const He=ue.pop(),Et=He[0];if(se[Ce(He)])continue;let Ct=!1;for(;!Ct;)if(Ee.length<2)Ee.push(He),Ct=!0;else{const Gt=Ee.pop(),At=Gt[0],vt=Ee.pop(),cn=vt[0],hn=cn.cross(At,Et);if(hn<0)Ee.push(vt),Ee.push(Gt),Ee.push(He),Ct=!0;else if(hn===0){const Fn=At.angleBetween(cn,Et);Math.abs(Fn-180)<1e-10||At.equals(Et)||cn.equals(At)?(se[Ce(Gt)]=At,Ee.push(vt)):Math.abs((Fn+1)%360-1)<1e-10&&(Ee.push(vt),ue.push(Gt))}else se[Ce(Gt)]=At,Ee.push(vt)}}Ee.length>2&&Ee.pop();let xe,Oe=-1;for(let He=0,Et=Ee.length;He<Et;He+=1){const Ct=Ee[He][1];(xe===void 0||Ct<xe)&&(xe=Ct,Oe=He)}let Le=[];if(Oe>0){const He=Ee.slice(Oe),Et=Ee.slice(0,Oe);Le=He.concat(Et)}else Le=Ee;const Ge=[];for(let He=0,Et=Le.length;He<Et;He+=1)Ge.push(Le[He][0]);return new d(Ge)}equals(M){return M==null||M.points.length!==this.points.length?!1:M.points.every((I,j)=>I.equals(this.points[j]))}clone(){return new d(this.points.map(M=>M.clone()))}toJSON(){return this.points.map(M=>M.toJSON())}serialize(){return this.points.map(M=>`${M.serialize()}`).join(" ")}}(function(q){function M(I){return I!=null&&I instanceof q}q.isPolyline=M})(d||(d={})),function(q){function M(I){const j=I.trim();if(j==="")return new q;const ue=[],se=j.split(/\s*,\s*|\s+/);for(let Ee=0,Ce=se.length;Ee<Ce;Ee+=2)ue.push({x:+se[Ee],y:+se[Ee+1]});return new q(ue)}q.parse=M}(d||(d={}));class v extends T{constructor(M,I,j,ue){super(),this.PRECISION=3,this.start=b.create(M),this.controlPoint1=b.create(I),this.controlPoint2=b.create(j),this.end=b.create(ue)}bbox(){const M=this.start,I=this.controlPoint1,j=this.controlPoint2,ue=this.end,se=M.x,Ee=M.y,Ce=I.x,xe=I.y,Oe=j.x,Le=j.y,Ge=ue.x,He=ue.y,Et=[],Ct=[],Gt=[[],[]];let At,vt,cn,hn,Bn,Fn,ir,Nr;for(let Rt=0;Rt<2;Rt+=1){if(Rt===0?(vt=6*se-12*Ce+6*Oe,At=-3*se+9*Ce-9*Oe+3*Ge,cn=3*Ce-3*se):(vt=6*Ee-12*xe+6*Le,At=-3*Ee+9*xe-9*Le+3*He,cn=3*xe-3*Ee),Math.abs(At)<1e-12){if(Math.abs(vt)<1e-12)continue;hn=-cn/vt,hn>0&&hn<1&&Ct.push(hn);continue}ir=vt*vt-4*cn*At,Nr=Math.sqrt(ir),!(ir<0)&&(Bn=(-vt+Nr)/(2*At),Bn>0&&Bn<1&&Ct.push(Bn),Fn=(-vt-Nr)/(2*At),Fn>0&&Fn<1&&Ct.push(Fn))}let Ei,ci,Ot,fr=Ct.length;const Pi=fr;for(;fr;)fr-=1,hn=Ct[fr],Ot=1-hn,Ei=Ot*Ot*Ot*se+3*Ot*Ot*hn*Ce+3*Ot*hn*hn*Oe+hn*hn*hn*Ge,Gt[0][fr]=Ei,ci=Ot*Ot*Ot*Ee+3*Ot*Ot*hn*xe+3*Ot*hn*hn*Le+hn*hn*hn*He,Gt[1][fr]=ci,Et[fr]={X:Ei,Y:ci};Ct[Pi]=0,Ct[Pi+1]=1,Et[Pi]={X:se,Y:Ee},Et[Pi+1]={X:Ge,Y:He},Gt[0][Pi]=se,Gt[1][Pi]=Ee,Gt[0][Pi+1]=Ge,Gt[1][Pi+1]=He,Ct.length=Pi+2,Gt[0].length=Pi+2,Gt[1].length=Pi+2,Et.length=Pi+2;const Li=Math.min.apply(null,Gt[0]),zn=Math.min.apply(null,Gt[1]),$e=Math.max.apply(null,Gt[0]),Xt=Math.max.apply(null,Gt[1]);return new u(Li,zn,$e-Li,Xt-zn)}closestPoint(M,I={}){return this.pointAtT(this.closestPointT(M,I))}closestPointLength(M,I={}){const j=this.getOptions(I);return this.lengthAtT(this.closestPointT(M,j),j)}closestPointNormalizedLength(M,I={}){const j=this.getOptions(I),ue=this.closestPointLength(M,j);if(!ue)return 0;const se=this.length(j);return se===0?0:ue/se}closestPointT(M,I={}){const j=this.getPrecision(I),ue=this.getDivisions(I),se=Math.pow(10,-j);let Ee=null,Ce=0,xe=0,Oe=0,Le=0,Ge=0,He=null;const Et=ue.length;let Ct=Et>0?1/Et:0;for(ue.forEach((Gt,At)=>{const vt=Gt.start.distance(M),cn=Gt.end.distance(M),hn=vt+cn;(He==null||hn<He)&&(Ee=Gt,Ce=At*Ct,xe=(At+1)*Ct,Oe=vt,Le=cn,He=hn,Ge=Gt.endpointDistance())});;){const Gt=Oe?Math.abs(Oe-Le)/Oe:0,At=Le!=null?Math.abs(Oe-Le)/Le:0,vt=Gt<se||At<se,cn=Oe?Oe<Ge*se:!0,hn=Le?Le<Ge*se:!0;if(vt||(cn||hn))return Oe<=Le?Ce:xe;const Fn=Ee.divide(.5);Ct/=2;const ir=Fn[0].start.distance(M),Nr=Fn[0].end.distance(M),Ei=ir+Nr,ci=Fn[1].start.distance(M),Ot=Fn[1].end.distance(M),fr=ci+Ot;Ei<=fr?(Ee=Fn[0],xe-=Ct,Oe=ir,Le=Nr):(Ee=Fn[1],Ce+=Ct,Oe=ci,Le=Ot)}}closestPointTangent(M,I={}){return this.tangentAtT(this.closestPointT(M,I))}containsPoint(M,I={}){return this.toPolyline(I).containsPoint(M)}divideAt(M,I={}){if(M<=0)return this.divideAtT(0);if(M>=1)return this.divideAtT(1);const j=this.tAt(M,I);return this.divideAtT(j)}divideAtLength(M,I={}){const j=this.tAtLength(M,I);return this.divideAtT(j)}divide(M){return this.divideAtT(M)}divideAtT(M){const I=this.start,j=this.controlPoint1,ue=this.controlPoint2,se=this.end;if(M<=0)return[new v(I,I,I,I),new v(I,j,ue,se)];if(M>=1)return[new v(I,j,ue,se),new v(se,se,se,se)];const Ee=this.getSkeletonPoints(M),Ce=Ee.startControlPoint1,xe=Ee.startControlPoint2,Oe=Ee.divider,Le=Ee.dividerControlPoint1,Ge=Ee.dividerControlPoint2;return[new v(I,Ce,xe,Oe),new v(Oe,Le,Ge,se)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(M){const I=this.start,j=this.controlPoint1,ue=this.controlPoint2,se=this.end;if(M<=0)return{startControlPoint1:I.clone(),startControlPoint2:I.clone(),divider:I.clone(),dividerControlPoint1:j.clone(),dividerControlPoint2:ue.clone()};if(M>=1)return{startControlPoint1:j.clone(),startControlPoint2:ue.clone(),divider:se.clone(),dividerControlPoint1:se.clone(),dividerControlPoint2:se.clone()};const Ee=new a(I,j).pointAt(M),Ce=new a(j,ue).pointAt(M),xe=new a(ue,se).pointAt(M),Oe=new a(Ee,Ce).pointAt(M),Le=new a(Ce,xe).pointAt(M),Ge=new a(Oe,Le).pointAt(M);return{startControlPoint1:Ee,startControlPoint2:Oe,divider:Ge,dividerControlPoint1:Le,dividerControlPoint2:xe}}getSubdivisions(M={}){const I=this.getPrecision(M);let j=[new v(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(I===0)return j;let ue=this.endpointDistance();const se=Math.pow(10,-I);let Ee=0;for(;;){Ee+=1;const Ce=[];j.forEach(Le=>{const Ge=Le.divide(.5);Ce.push(Ge[0],Ge[1])});const xe=Ce.reduce((Le,Ge)=>Le+Ge.endpointDistance(),0),Oe=xe!==0?(xe-ue)/xe:0;if(Ee>1&&Oe<se)return Ce;j=Ce,ue=xe}}length(M={}){return this.getDivisions(M).reduce((j,ue)=>j+ue.endpointDistance(),0)}lengthAtT(M,I={}){if(M<=0)return 0;const j=I.precision===void 0?this.PRECISION:I.precision;return this.divide(M)[0].length({precision:j})}pointAt(M,I={}){if(M<=0)return this.start.clone();if(M>=1)return this.end.clone();const j=this.tAt(M,I);return this.pointAtT(j)}pointAtLength(M,I={}){const j=this.tAtLength(M,I);return this.pointAtT(j)}pointAtT(M){return M<=0?this.start.clone():M>=1?this.end.clone():this.getSkeletonPoints(M).divider}isDifferentiable(){const M=this.start,I=this.controlPoint1,j=this.controlPoint2,ue=this.end;return!(M.equals(I)&&I.equals(j)&&j.equals(ue))}tangentAt(M,I={}){if(!this.isDifferentiable())return null;M<0?M=0:M>1&&(M=1);const j=this.tAt(M,I);return this.tangentAtT(j)}tangentAtLength(M,I={}){if(!this.isDifferentiable())return null;const j=this.tAtLength(M,I);return this.tangentAtT(j)}tangentAtT(M){if(!this.isDifferentiable())return null;M<0&&(M=0),M>1&&(M=1);const I=this.getSkeletonPoints(M),j=I.startControlPoint2,ue=I.dividerControlPoint1,se=I.divider,Ee=new a(j,ue);return Ee.translate(se.x-j.x,se.y-j.y),Ee}getPrecision(M={}){return M.precision==null?this.PRECISION:M.precision}getDivisions(M={}){if(M.subdivisions!=null)return M.subdivisions;const I=this.getPrecision(M);return this.getSubdivisions({precision:I})}getOptions(M={}){const I=this.getPrecision(M),j=this.getDivisions(M);return{precision:I,subdivisions:j}}tAt(M,I={}){if(M<=0)return 0;if(M>=1)return 1;const j=this.getOptions(I),se=this.length(j)*M;return this.tAtLength(se,j)}tAtLength(M,I={}){let j=!0;M<0&&(j=!1,M=-M);const ue=this.getPrecision(I),se=this.getDivisions(I),Ee={precision:ue,subdivisions:se};let Ce=null,xe,Oe,Le=0,Ge=0,He=0;const Et=se.length;let Ct=Et>0?1/Et:0;for(let vt=0;vt<Et;vt+=1){const cn=j?vt:Et-1-vt,hn=se[vt],Bn=hn.endpointDistance();if(M<=He+Bn){Ce=hn,xe=cn*Ct,Oe=(cn+1)*Ct,Le=j?M-He:Bn+He-M,Ge=j?Bn+He-M:M-He;break}He+=Bn}if(Ce==null)return j?1:0;const Gt=this.length(Ee),At=Math.pow(10,-ue);for(;;){let vt;if(vt=Gt!==0?Le/Gt:0,vt<At)return xe;if(vt=Gt!==0?Ge/Gt:0,vt<At)return Oe;let cn,hn;const Bn=Ce.divide(.5);Ct/=2;const Fn=Bn[0].endpointDistance(),ir=Bn[1].endpointDistance();Le<=Fn?(Ce=Bn[0],Oe-=Ct,cn=Le,hn=Fn-cn):(Ce=Bn[1],xe+=Ct,cn=Le-Fn,hn=ir-cn),Le=cn,Ge=hn}}toPoints(M={}){const I=this.getDivisions(M),j=[I[0].start.clone()];return I.forEach(ue=>j.push(ue.end.clone())),j}toPolyline(M={}){return new d(this.toPoints(M))}scale(M,I,j){return this.start.scale(M,I,j),this.controlPoint1.scale(M,I,j),this.controlPoint2.scale(M,I,j),this.end.scale(M,I,j),this}rotate(M,I){return this.start.rotate(M,I),this.controlPoint1.rotate(M,I),this.controlPoint2.rotate(M,I),this.end.rotate(M,I),this}translate(M,I){return typeof M=="number"?(this.start.translate(M,I),this.controlPoint1.translate(M,I),this.controlPoint2.translate(M,I),this.end.translate(M,I)):(this.start.translate(M),this.controlPoint1.translate(M),this.controlPoint2.translate(M),this.end.translate(M)),this}equals(M){return M!=null&&this.start.equals(M.start)&&this.controlPoint1.equals(M.controlPoint1)&&this.controlPoint2.equals(M.controlPoint2)&&this.end.equals(M.end)}clone(){return new v(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(q){function M(I){return I!=null&&I instanceof q}q.isCurve=M})(v||(v={})),function(q){function M(ue){const se=ue.length,Ee=[],Ce=[];let xe=2;Ee[0]=ue[0]/xe;for(let Oe=1;Oe<se;Oe+=1)Ce[Oe]=1/xe,xe=(Oe<se-1?4:3.5)-Ce[Oe],Ee[Oe]=(ue[Oe]-Ee[Oe-1])/xe;for(let Oe=1;Oe<se;Oe+=1)Ee[se-Oe-1]-=Ce[se-Oe]*Ee[se-Oe];return Ee}function I(ue){const se=ue.map(He=>b.clone(He)),Ee=[],Ce=[],xe=se.length-1;if(xe===1)return Ee[0]=new b((2*se[0].x+se[1].x)/3,(2*se[0].y+se[1].y)/3),Ce[0]=new b(2*Ee[0].x-se[0].x,2*Ee[0].y-se[0].y),[Ee,Ce];const Oe=[];for(let He=1;He<xe-1;He+=1)Oe[He]=4*se[He].x+2*se[He+1].x;Oe[0]=se[0].x+2*se[1].x,Oe[xe-1]=(8*se[xe-1].x+se[xe].x)/2;const Le=M(Oe);for(let He=1;He<xe-1;He+=1)Oe[He]=4*se[He].y+2*se[He+1].y;Oe[0]=se[0].y+2*se[1].y,Oe[xe-1]=(8*se[xe-1].y+se[xe].y)/2;const Ge=M(Oe);for(let He=0;He<xe;He+=1)Ee.push(new b(Le[He],Ge[He])),He<xe-1?Ce.push(new b(2*se[He+1].x-Le[He+1],2*se[He+1].y-Ge[He+1])):Ce.push(new b((se[xe].x+Le[xe-1])/2,(se[xe].y+Ge[xe-1])/2));return[Ee,Ce]}function j(ue){if(ue==null||Array.isArray(ue)&&ue.length<2)throw new Error("At least 2 points are required");const se=I(ue),Ee=[];for(let Ce=0,xe=se[0].length;Ce<xe;Ce+=1){const Oe=new b(se[0][Ce].x,se[0][Ce].y),Le=new b(se[1][Ce].x,se[1][Ce].y);Ee.push(new q(ue[Ce],Oe,Le,ue[Ce+1]))}return Ee}q.throughPoints=j}(v||(v={}));class x extends T{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(M,I){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(M);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(M,I){if(M<=0)return 0;const j=this.length();return M>=1?j:j*M}divideAtT(M){if(this.divideAt)return this.divideAt(M);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(M){if(this.pointAt)return this.pointAt(M);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(M){if(this.tangentAt)return this.tangentAt(M);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class N extends x{constructor(M,I){super(),a.isLine(M)?this.endPoint=M.end.clone().round(2):this.endPoint=b.create(M,I).round(2)}get type(){return"L"}get line(){return new a(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(M){return this.line.closestPoint(M)}closestPointLength(M){return this.line.closestPointLength(M)}closestPointNormalizedLength(M){return this.line.closestPointNormalizedLength(M)}closestPointTangent(M){return this.line.closestPointTangent(M)}length(){return this.line.length()}divideAt(M){const I=this.line.divideAt(M);return[new N(I[0]),new N(I[1])]}divideAtLength(M){const I=this.line.divideAtLength(M);return[new N(I[0]),new N(I[1])]}getSubdivisions(){return[]}pointAt(M){return this.line.pointAt(M)}pointAtLength(M){return this.line.pointAtLength(M)}tangentAt(M){return this.line.tangentAt(M)}tangentAtLength(M){return this.line.tangentAtLength(M)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new N(this.end)}scale(M,I,j){return this.end.scale(M,I,j),this}rotate(M,I){return this.end.rotate(M,I),this}translate(M,I){return typeof M=="number"?this.end.translate(M,I):this.end.translate(M),this}equals(M){return this.type===M.type&&this.start.equals(M.start)&&this.end.equals(M.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const M=this.end;return`${this.type} ${M.x} ${M.y}`}}(function(q){function M(...I){const j=I.length,ue=I[0];if(a.isLine(ue))return new q(ue);if(b.isPointLike(ue))return j===1?new q(ue):I.map(Ee=>new q(Ee));if(j===2)return new q(+I[0],+I[1]);const se=[];for(let Ee=0;Ee<j;Ee+=2){const Ce=+I[Ee],xe=+I[Ee+1];se.push(new q(Ce,xe))}return se}q.create=M})(N||(N={}));class F extends x{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new a(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(M){return this.line.closestPoint(M)}closestPointLength(M){return this.line.closestPointLength(M)}closestPointNormalizedLength(M){return this.line.closestPointNormalizedLength(M)}closestPointTangent(M){return this.line.closestPointTangent(M)}length(){return this.line.length()}divideAt(M){const I=this.line.divideAt(M);return[I[1].isDifferentiable()?new N(I[0]):this.clone(),new N(I[1])]}divideAtLength(M){const I=this.line.divideAtLength(M);return[I[1].isDifferentiable()?new N(I[0]):this.clone(),new N(I[1])]}getSubdivisions(){return[]}pointAt(M){return this.line.pointAt(M)}pointAtLength(M){return this.line.pointAtLength(M)}tangentAt(M){return this.line.tangentAt(M)}tangentAtLength(M){return this.line.tangentAtLength(M)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(M){return this.type===M.type&&this.start.equals(M.start)&&this.end.equals(M.end)}clone(){return new F}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(q){function M(){return new q}q.create=M})(F||(F={}));class ae extends x{constructor(M,I){super(),this.isVisible=!1,this.isSubpathStart=!0,a.isLine(M)||v.isCurve(M)?this.endPoint=M.end.clone().round(2):this.endPoint=b.create(M,I).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(M,I,j){return this.end.scale(M,I,j),this}rotate(M,I){return this.end.rotate(M,I),this}translate(M,I){return typeof M=="number"?this.end.translate(M,I):this.end.translate(M),this}clone(){return new ae(this.end)}equals(M){return this.type===M.type&&this.end.equals(M.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const M=this.end;return`${this.type} ${M.x} ${M.y}`}}(function(q){function M(...I){const j=I.length,ue=I[0];if(a.isLine(ue))return new q(ue);if(v.isCurve(ue))return new q(ue);if(b.isPointLike(ue)){if(j===1)return new q(ue);const Ee=[];for(let Ce=0;Ce<j;Ce+=1)Ce===0?Ee.push(new q(I[Ce])):Ee.push(new N(I[Ce]));return Ee}if(j===2)return new q(+I[0],+I[1]);const se=[];for(let Ee=0;Ee<j;Ee+=2){const Ce=+I[Ee],xe=+I[Ee+1];Ee===0?se.push(new q(Ce,xe)):se.push(new N(Ce,xe))}return se}q.create=M})(ae||(ae={}));class $ extends x{constructor(M,I,j,ue,se,Ee){super(),v.isCurve(M)?(this.controlPoint1=M.controlPoint1.clone().round(2),this.controlPoint2=M.controlPoint2.clone().round(2),this.endPoint=M.end.clone().round(2)):typeof M=="number"?(this.controlPoint1=new b(M,I).round(2),this.controlPoint2=new b(j,ue).round(2),this.endPoint=new b(se,Ee).round(2)):(this.controlPoint1=b.create(M).round(2),this.controlPoint2=b.create(I).round(2),this.endPoint=b.create(j).round(2))}get type(){return"C"}get curve(){return new v(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(M){return this.curve.closestPoint(M)}closestPointLength(M){return this.curve.closestPointLength(M)}closestPointNormalizedLength(M){return this.curve.closestPointNormalizedLength(M)}closestPointTangent(M){return this.curve.closestPointTangent(M)}length(){return this.curve.length()}divideAt(M,I={}){const j=this.curve.divideAt(M,I);return[new $(j[0]),new $(j[1])]}divideAtLength(M,I={}){const j=this.curve.divideAtLength(M,I);return[new $(j[0]),new $(j[1])]}divideAtT(M){const I=this.curve.divideAtT(M);return[new $(I[0]),new $(I[1])]}getSubdivisions(){return[]}pointAt(M){return this.curve.pointAt(M)}pointAtLength(M){return this.curve.pointAtLength(M)}tangentAt(M){return this.curve.tangentAt(M)}tangentAtLength(M){return this.curve.tangentAtLength(M)}isDifferentiable(){if(!this.previousSegment)return!1;const M=this.start,I=this.controlPoint1,j=this.controlPoint2,ue=this.end;return!(M.equals(I)&&I.equals(j)&&j.equals(ue))}scale(M,I,j){return this.controlPoint1.scale(M,I,j),this.controlPoint2.scale(M,I,j),this.end.scale(M,I,j),this}rotate(M,I){return this.controlPoint1.rotate(M,I),this.controlPoint2.rotate(M,I),this.end.rotate(M,I),this}translate(M,I){return typeof M=="number"?(this.controlPoint1.translate(M,I),this.controlPoint2.translate(M,I),this.end.translate(M,I)):(this.controlPoint1.translate(M),this.controlPoint2.translate(M),this.end.translate(M)),this}equals(M){return this.start.equals(M.start)&&this.end.equals(M.end)&&this.controlPoint1.equals(M.controlPoint1)&&this.controlPoint2.equals(M.controlPoint2)}clone(){return new $(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const M=this.controlPoint1,I=this.controlPoint2,j=this.end;return[this.type,M.x,M.y,I.x,I.y,j.x,j.y].join(" ")}}(function(q){function M(...I){const j=I.length,ue=I[0];if(v.isCurve(ue))return new q(ue);if(b.isPointLike(ue)){if(j===3)return new q(I[0],I[1],I[2]);const Ee=[];for(let Ce=0;Ce<j;Ce+=3)Ee.push(new q(I[Ce],I[Ce+1],I[Ce+2]));return Ee}if(j===6)return new q(I[0],I[1],I[2],I[3],I[4],I[5]);const se=[];for(let Ee=0;Ee<j;Ee+=6)se.push(new q(I[Ee],I[Ee+1],I[Ee+2],I[Ee+3],I[Ee+4],I[Ee+5]));return se}q.create=M})($||($={}));function te(q,M,I){return{x:q*Math.cos(I)-M*Math.sin(I),y:q*Math.sin(I)+M*Math.cos(I)}}function fe(q,M,I,j,ue,se){const Ee=.3333333333333333,Ce=2/3;return[Ee*q+Ce*I,Ee*M+Ce*j,Ee*ue+Ce*I,Ee*se+Ce*j,ue,se]}function B(q,M,I,j,ue,se,Ee,Ce,xe,Oe){const Le=Math.PI*120/180,Ge=Math.PI/180*(+ue||0);let He=[],Et,Ct,Gt,At,vt;if(Oe)Ct=Oe[0],Gt=Oe[1],At=Oe[2],vt=Oe[3];else{Et=te(q,M,-Ge),q=Et.x,M=Et.y,Et=te(Ce,xe,-Ge),Ce=Et.x,xe=Et.y;const zn=(q-Ce)/2,$e=(M-xe)/2;let Xt=zn*zn/(I*I)+$e*$e/(j*j);Xt>1&&(Xt=Math.sqrt(Xt),I=Xt*I,j=Xt*j);const Rt=I*I,_t=j*j,Tt=(se===Ee?-1:1)*Math.sqrt(Math.abs((Rt*_t-Rt*$e*$e-_t*zn*zn)/(Rt*$e*$e+_t*zn*zn)));At=Tt*I*$e/j+(q+Ce)/2,vt=Tt*-j*zn/I+(M+xe)/2,Ct=Math.asin((M-vt)/j),Gt=Math.asin((xe-vt)/j),Ct=q<At?Math.PI-Ct:Ct,Gt=Ce<At?Math.PI-Gt:Gt,Ct<0&&(Ct=Math.PI*2+Ct),Gt<0&&(Gt=Math.PI*2+Gt),Ee&&Ct>Gt&&(Ct-=Math.PI*2),!Ee&&Gt>Ct&&(Gt-=Math.PI*2)}let cn=Gt-Ct;if(Math.abs(cn)>Le){const zn=Gt,$e=Ce,Xt=xe;Gt=Ct+Le*(Ee&&Gt>Ct?1:-1),Ce=At+I*Math.cos(Gt),xe=vt+j*Math.sin(Gt),He=B(Ce,xe,I,j,ue,0,Ee,$e,Xt,[Gt,zn,At,vt])}cn=Gt-Ct;const hn=Math.cos(Ct),Bn=Math.sin(Ct),Fn=Math.cos(Gt),ir=Math.sin(Gt),Nr=Math.tan(cn/4),Ei=4/3*(I*Nr),ci=4/3*(j*Nr),Ot=[q,M],fr=[q+Ei*Bn,M-ci*hn],Pi=[Ce+Ei*ir,xe-ci*Fn],Li=[Ce,xe];if(fr[0]=2*Ot[0]-fr[0],fr[1]=2*Ot[1]-fr[1],Oe)return[fr,Pi,Li].concat(He);{He=[fr,Pi,Li].concat(He).join().split(",");const zn=[],$e=He.length;for(let Xt=0;Xt<$e;Xt+=1)zn[Xt]=Xt%2?te(+He[Xt-1],+He[Xt],Ge).y:te(+He[Xt],+He[Xt+1],Ge).x;return zn}}function he(q){if(!q)return null;const M=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,I=new RegExp(`([a-z])[${M},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${M}]*,?[${M}]*)+)`,"ig"),j=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${M}]*,?[${M}]*`,"ig"),ue={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},se=[];return q.replace(I,(Ee,Ce,xe)=>{const Oe=[];let Le=Ce.toLowerCase();xe.replace(j,(He,Et)=>(Et&&Oe.push(+Et),He)),Le==="m"&&Oe.length>2&&(se.push([Ce,...Oe.splice(0,2)]),Le="l",Ce=Ce==="m"?"l":"L");const Ge=ue[Le];for(;Oe.length>=Ge&&(se.push([Ce,...Oe.splice(0,Ge)]),!!Ge););return Ee}),se}function z(q){const M=he(q);if(!M||!M.length)return[["M",0,0]];let I=0,j=0,ue=0,se=0;const Ee=[];for(let Ce=0,xe=M.length;Ce<xe;Ce+=1){const Oe=[];Ee.push(Oe);const Le=M[Ce],Ge=Le[0];if(Ge!==Ge.toUpperCase())switch(Oe[0]=Ge.toUpperCase(),Oe[0]){case"A":Oe[1]=Le[1],Oe[2]=Le[2],Oe[3]=Le[3],Oe[4]=Le[4],Oe[5]=Le[5],Oe[6]=+Le[6]+I,Oe[7]=+Le[7]+j;break;case"V":Oe[1]=+Le[1]+j;break;case"H":Oe[1]=+Le[1]+I;break;case"M":ue=+Le[1]+I,se=+Le[2]+j;for(let He=1,Et=Le.length;He<Et;He+=1)Oe[He]=+Le[He]+(He%2?I:j);break;default:for(let He=1,Et=Le.length;He<Et;He+=1)Oe[He]=+Le[He]+(He%2?I:j);break}else for(let He=0,Et=Le.length;He<Et;He+=1)Oe[He]=Le[He];switch(Oe[0]){case"Z":I=+ue,j=+se;break;case"H":I=Oe[1];break;case"V":j=Oe[1];break;case"M":ue=Oe[Oe.length-2],se=Oe[Oe.length-1],I=Oe[Oe.length-2],j=Oe[Oe.length-1];break;default:I=Oe[Oe.length-2],j=Oe[Oe.length-1];break}}return Ee}function ee(q){const M=z(q),I={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function j(xe,Oe,Le){let Ge,He;if(!xe)return["C",Oe.x,Oe.y,Oe.x,Oe.y,Oe.x,Oe.y];switch(xe[0]in{T:1,Q:1}||(Oe.qx=null,Oe.qy=null),xe[0]){case"M":Oe.X=xe[1],Oe.Y=xe[2];break;case"A":return parseFloat(xe[1])===0||parseFloat(xe[2])===0?["L",xe[6],xe[7]]:["C"].concat(B.apply(0,[Oe.x,Oe.y].concat(xe.slice(1))));case"S":return Le==="C"||Le==="S"?(Ge=Oe.x*2-Oe.bx,He=Oe.y*2-Oe.by):(Ge=Oe.x,He=Oe.y),["C",Ge,He].concat(xe.slice(1));case"T":return Le==="Q"||Le==="T"?(Oe.qx=Oe.x*2-Oe.qx,Oe.qy=Oe.y*2-Oe.qy):(Oe.qx=Oe.x,Oe.qy=Oe.y),["C"].concat(fe(Oe.x,Oe.y,Oe.qx,Oe.qy,xe[1],xe[2]));case"Q":return Oe.qx=xe[1],Oe.qy=xe[2],["C"].concat(fe(Oe.x,Oe.y,xe[1],xe[2],xe[3],xe[4]));case"H":return["L"].concat(xe[1],Oe.y);case"V":return["L"].concat(Oe.x,xe[1]);case"L":break;case"Z":break;default:break}return xe}function ue(xe,Oe){if(xe[Oe].length>7){xe[Oe].shift();const Le=xe[Oe];for(;Le.length;)se[Oe]="A",Oe+=1,xe.splice(Oe,0,["C"].concat(Le.splice(0,6)));xe.splice(Oe,1),Ce=M.length}}const se=[];let Ee="",Ce=M.length;for(let xe=0;xe<Ce;xe+=1){let Oe="";M[xe]&&(Oe=M[xe][0]),Oe!=="C"&&(se[xe]=Oe,xe>0&&(Ee=se[xe-1])),M[xe]=j(M[xe],I,Ee),se[xe]!=="A"&&Oe==="C"&&(se[xe]="C"),ue(M,xe);const Le=M[xe],Ge=Le.length;I.x=Le[Ge-2],I.y=Le[Ge-1],I.bx=parseFloat(Le[Ge-4])||I.x,I.by=parseFloat(Le[Ge-3])||I.y}return(!M[0][0]||M[0][0]!=="M")&&M.unshift(["M",0,0]),M}function pe(q){return ee(q).map(M=>M.map(I=>typeof I=="string"?I:ie.round(I,2))).join(",").split(",").join(" ")}class S extends T{constructor(M){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(M))if(a.isLine(M[0])||v.isCurve(M[0])){let I=null;M.forEach((ue,se)=>{se===0&&this.appendSegment(S.createSegment("M",ue.start)),I!=null&&!I.end.equals(ue.start)&&this.appendSegment(S.createSegment("M",ue.start)),a.isLine(ue)?this.appendSegment(S.createSegment("L",ue.end)):v.isCurve(ue)&&this.appendSegment(S.createSegment("C",ue.controlPoint1,ue.controlPoint2,ue.end)),I=ue})}else M.forEach(j=>{j.isSegment&&this.appendSegment(j)});else M!=null&&(a.isLine(M)?(this.appendSegment(S.createSegment("M",M.start)),this.appendSegment(S.createSegment("L",M.end))):v.isCurve(M)?(this.appendSegment(S.createSegment("M",M.start)),this.appendSegment(S.createSegment("C",M.controlPoint1,M.controlPoint2,M.end))):d.isPolyline(M)?M.points&&M.points.length&&M.points.forEach((I,j)=>{const ue=j===0?S.createSegment("M",I):S.createSegment("L",I);this.appendSegment(ue)}):M.isSegment&&this.appendSegment(M))}get start(){const M=this.segments,I=M.length;if(I===0)return null;for(let j=0;j<I;j+=1){const ue=M[j];if(ue.isVisible)return ue.start}return M[I-1].end}get end(){const M=this.segments,I=M.length;if(I===0)return null;for(let j=I-1;j>=0;j-=1){const ue=M[j];if(ue.isVisible)return ue.end}return M[I-1].end}moveTo(...M){return this.appendSegment(ae.create.call(null,...M))}lineTo(...M){return this.appendSegment(N.create.call(null,...M))}curveTo(...M){return this.appendSegment($.create.call(null,...M))}arcTo(M,I,j,ue,se,Ee,Ce){const xe=this.end||new b,Oe=typeof Ee=="number"?h(xe.x,xe.y,M,I,j,ue,se,Ee,Ce):h(xe.x,xe.y,M,I,j,ue,se,Ee.x,Ee.y);if(Oe!=null)for(let Le=0,Ge=Oe.length;Le<Ge;Le+=6)this.curveTo(Oe[Le],Oe[Le+1],Oe[Le+2],Oe[Le+3],Oe[Le+4],Oe[Le+5]);return this}quadTo(M,I,j,ue){const se=this.end||new b,Ee=["M",se.x,se.y];if(typeof M=="number")Ee.push("Q",M,I,j,ue);else{const xe=I;Ee.push("Q",M.x,M.y,xe.x,xe.y)}const Ce=S.parse(Ee.join(" "));return this.appendSegment(Ce.segments.slice(1)),this}close(){return this.appendSegment(F.create())}drawPoints(M,I={}){const j=s(M,I),ue=S.parse(j);ue&&ue.segments&&this.appendSegment(ue.segments)}bbox(){const M=this.segments,I=M.length;if(I===0)return null;let j;for(let se=0;se<I;se+=1){const Ee=M[se];if(Ee.isVisible){const Ce=Ee.bbox();Ce!=null&&(j=j?j.union(Ce):Ce)}}if(j!=null)return j;const ue=M[I-1];return new u(ue.end.x,ue.end.y,0,0)}appendSegment(M){const I=this.segments.length;let j=I!==0?this.segments[I-1]:null,ue;const se=null;if(Array.isArray(M))for(let Ee=0,Ce=M.length;Ee<Ce;Ee+=1){const xe=M[Ee];ue=this.prepareSegment(xe,j,se),this.segments.push(ue),j=ue}else M!=null&&M.isSegment&&(ue=this.prepareSegment(M,j,se),this.segments.push(ue));return this}insertSegment(M,I){const j=this.segments.length;if(M<0&&(M=j+M+1),M>j||M<0)throw new Error("Index out of range.");let ue,se=null,Ee=null;if(j!==0&&(M>=1?(se=this.segments[M-1],Ee=se.nextSegment):(se=null,Ee=this.segments[0])),!Array.isArray(I))ue=this.prepareSegment(I,se,Ee),this.segments.splice(M,0,ue);else for(let Ce=0,xe=I.length;Ce<xe;Ce+=1){const Oe=I[Ce];ue=this.prepareSegment(Oe,se,Ee),this.segments.splice(M+Ce,0,ue),se=ue}return this}removeSegment(M){const I=this.fixIndex(M),j=this.segments.splice(I,1)[0],ue=j.previousSegment,se=j.nextSegment;return ue&&(ue.nextSegment=se),se&&(se.previousSegment=ue),j.isSubpathStart&&se&&this.updateSubpathStartSegment(se),j}replaceSegment(M,I){const j=this.fixIndex(M);let ue;const se=this.segments[j];let Ee=se.previousSegment;const Ce=se.nextSegment;let xe=se.isSubpathStart;if(!Array.isArray(I))ue=this.prepareSegment(I,Ee,Ce),this.segments.splice(j,1,ue),xe&&ue.isSubpathStart&&(xe=!1);else{this.segments.splice(M,1);for(let Oe=0,Le=I.length;Oe<Le;Oe+=1){const Ge=I[Oe];ue=this.prepareSegment(Ge,Ee,Ce),this.segments.splice(M+Oe,0,ue),Ee=ue,xe&&ue.isSubpathStart&&(xe=!1)}}xe&&Ce&&this.updateSubpathStartSegment(Ce)}getSegment(M){const I=this.fixIndex(M);return this.segments[I]}fixIndex(M){const I=this.segments.length;if(I===0)throw new Error("Path has no segments.");let j=M;for(;j<0;)j=I+j;if(j>=I||j<0)throw new Error("Index out of range.");return j}segmentAt(M,I={}){const j=this.segmentIndexAt(M,I);return j?this.getSegment(j):null}segmentAtLength(M,I={}){const j=this.segmentIndexAtLength(M,I);return j?this.getSegment(j):null}segmentIndexAt(M,I={}){if(this.segments.length===0)return null;const j=ie.clamp(M,0,1),ue=this.getOptions(I),Ee=this.length(ue)*j;return this.segmentIndexAtLength(Ee,ue)}segmentIndexAtLength(M,I={}){const j=this.segments.length;if(j===0)return null;let ue=!0;M<0&&(ue=!1,M=-M);const se=this.getPrecision(I),Ee=this.getSubdivisions(I);let Ce=0,xe=null;for(let Oe=0;Oe<j;Oe+=1){const Le=ue?Oe:j-1-Oe,Ge=this.segments[Le],He=Ee[Le],Et=Ge.length({precision:se,subdivisions:He});if(Ge.isVisible){if(M<=Ce+Et)return Le;xe=Le}Ce+=Et}return xe}getSegmentSubdivisions(M={}){const I=this.getPrecision(M),j=[];for(let ue=0,se=this.segments.length;ue<se;ue+=1){const Ce=this.segments[ue].getSubdivisions({precision:I});j.push(Ce)}return j}updateSubpathStartSegment(M){let I=M.previousSegment,j=M;for(;j&&!j.isSubpathStart;)I!=null?j.subpathStartSegment=I.subpathStartSegment:j.subpathStartSegment=null,I=j,j=j.nextSegment}prepareSegment(M,I,j){M.previousSegment=I,M.nextSegment=j,I!=null&&(I.nextSegment=M),j!=null&&(j.previousSegment=M);let ue=M;return M.isSubpathStart&&(M.subpathStartSegment=M,ue=j),ue!=null&&this.updateSubpathStartSegment(ue),M}closestPoint(M,I={}){const j=this.closestPointT(M,I);return j?this.pointAtT(j):null}closestPointLength(M,I={}){const j=this.getOptions(I),ue=this.closestPointT(M,j);return ue?this.lengthAtT(ue,j):0}closestPointNormalizedLength(M,I={}){const j=this.getOptions(I),ue=this.closestPointLength(M,j);if(ue===0)return 0;const se=this.length(j);return se===0?0:ue/se}closestPointT(M,I={}){if(this.segments.length===0)return null;const j=this.getPrecision(I),ue=this.getSubdivisions(I);let se,Ee=1/0;for(let Ce=0,xe=this.segments.length;Ce<xe;Ce+=1){const Oe=this.segments[Ce],Le=ue[Ce];if(Oe.isVisible){const Ge=Oe.closestPointT(M,{precision:j,subdivisions:Le}),He=Oe.pointAtT(Ge),Et=ie.squaredLength(He,M);Et<Ee&&(se={segmentIndex:Ce,value:Ge},Ee=Et)}}return se||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(M,I={}){if(this.segments.length===0)return null;const j=this.getPrecision(I),ue=this.getSubdivisions(I);let se,Ee=1/0;for(let Ce=0,xe=this.segments.length;Ce<xe;Ce+=1){const Oe=this.segments[Ce],Le=ue[Ce];if(Oe.isDifferentiable()){const Ge=Oe.closestPointT(M,{precision:j,subdivisions:Le}),He=Oe.pointAtT(Ge),Et=ie.squaredLength(He,M);Et<Ee&&(se=Oe.tangentAtT(Ge),Ee=Et)}}return se||null}containsPoint(M,I={}){const j=this.toPolylines(I);if(!j)return!1;let ue=0;for(let se=0,Ee=j.length;se<Ee;se+=1)j[se].containsPoint(M)&&(ue+=1);return ue%2===1}pointAt(M,I={}){if(this.segments.length===0)return null;if(M<=0)return this.start.clone();if(M>=1)return this.end.clone();const j=this.getOptions(I),se=this.length(j)*M;return this.pointAtLength(se,j)}pointAtLength(M,I={}){if(this.segments.length===0)return null;if(M===0)return this.start.clone();let j=!0;M<0&&(j=!1,M=-M);const ue=this.getPrecision(I),se=this.getSubdivisions(I);let Ee,Ce=0;for(let Oe=0,Le=this.segments.length;Oe<Le;Oe+=1){const Ge=j?Oe:Le-1-Oe,He=this.segments[Ge],Et=se[Ge],Ct=He.length({precision:ue,subdivisions:Et});if(He.isVisible){if(M<=Ce+Ct)return He.pointAtLength((j?1:-1)*(M-Ce),{precision:ue,subdivisions:Et});Ee=He}Ce+=Ct}return Ee?j?Ee.end:Ee.start:this.segments[this.segments.length-1].end.clone()}pointAtT(M){const I=this.segments,j=I.length;if(j===0)return null;const ue=M.segmentIndex;if(ue<0)return I[0].pointAtT(0);if(ue>=j)return I[j-1].pointAtT(1);const se=ie.clamp(M.value,0,1);return I[ue].pointAtT(se)}divideAt(M,I={}){if(this.segments.length===0)return null;const j=ie.clamp(M,0,1),ue=this.getOptions(I),Ee=this.length(ue)*j;return this.divideAtLength(Ee,ue)}divideAtLength(M,I={}){if(this.segments.length===0)return null;let j=!0;M<0&&(j=!1,M=-M);const ue=this.getPrecision(I),se=this.getSubdivisions(I);let Ee=0,Ce,xe,Oe,Le,Ge;for(let Fn=0,ir=this.segments.length;Fn<ir;Fn+=1){const Nr=j?Fn:ir-1-Fn,Ei=this.getSegment(Nr),ci=se[Nr],Ot={precision:ue,subdivisions:ci},fr=Ei.length(Ot);if(Ei.isDifferentiable()&&(Oe=Ei,Le=Nr,M<=Ee+fr)){xe=Nr,Ce=Ei.divideAtLength((j?1:-1)*(M-Ee),Ot);break}Ee+=fr}if(!Oe)return null;Ce||(xe=Le,Ge=j?1:0,Ce=Oe.divideAtT(Ge));const He=this.clone(),Et=xe;He.replaceSegment(Et,Ce);const Ct=Et;let Gt=Et+1,At=Et+2;Ce[0].isDifferentiable()||(He.removeSegment(Ct),Gt-=1,At-=1);const vt=He.getSegment(Gt).start;He.insertSegment(Gt,S.createSegment("M",vt)),At+=1,Ce[1].isDifferentiable()||(He.removeSegment(At-1),At-=1);const cn=At-Ct-1;for(let Fn=At,ir=He.segments.length;Fn<ir;Fn+=1){const Nr=this.getSegment(Fn-cn),Ei=He.getSegment(Fn);if(Ei.type==="Z"&&!Nr.subpathStartSegment.end.equals(Ei.subpathStartSegment.end)){const ci=S.createSegment("L",Nr.end);He.replaceSegment(Fn,ci)}}const hn=new S(He.segments.slice(0,Gt)),Bn=new S(He.segments.slice(Gt));return[hn,Bn]}intersectsWithLine(M,I={}){const j=this.toPolylines(I);if(j==null)return null;let ue=null;for(let se=0,Ee=j.length;se<Ee;se+=1){const Ce=j[se],xe=M.intersect(Ce);xe&&(ue==null&&(ue=[]),Array.isArray(xe)?ue.push(...xe):ue.push(xe))}return ue}isDifferentiable(){for(let M=0,I=this.segments.length;M<I;M+=1)if(this.segments[M].isDifferentiable())return!0;return!1}isValid(){const M=this.segments;return M.length===0||M[0].type==="M"}length(M={}){if(this.segments.length===0)return 0;const I=this.getSubdivisions(M);let j=0;for(let ue=0,se=this.segments.length;ue<se;ue+=1){const Ee=this.segments[ue],Ce=I[ue];j+=Ee.length({subdivisions:Ce})}return j}lengthAtT(M,I={}){const j=this.segments.length;if(j===0)return 0;let ue=M.segmentIndex;if(ue<0)return 0;let se=ie.clamp(M.value,0,1);ue>=j&&(ue=j-1,se=1);const Ee=this.getPrecision(I),Ce=this.getSubdivisions(I);let xe=0;for(let Ge=0;Ge<ue;Ge+=1){const He=this.segments[Ge],Et=Ce[Ge];xe+=He.length({precision:Ee,subdivisions:Et})}const Oe=this.segments[ue],Le=Ce[ue];return xe+=Oe.lengthAtT(se,{precision:Ee,subdivisions:Le}),xe}tangentAt(M,I={}){if(this.segments.length===0)return null;const j=ie.clamp(M,0,1),ue=this.getOptions(I),Ee=this.length(ue)*j;return this.tangentAtLength(Ee,ue)}tangentAtLength(M,I={}){if(this.segments.length===0)return null;let j=!0;M<0&&(j=!1,M=-M);const ue=this.getPrecision(I),se=this.getSubdivisions(I);let Ee,Ce=0;for(let xe=0,Oe=this.segments.length;xe<Oe;xe+=1){const Le=j?xe:Oe-1-xe,Ge=this.segments[Le],He=se[Le],Et=Ge.length({precision:ue,subdivisions:He});if(Ge.isDifferentiable()){if(M<=Ce+Et)return Ge.tangentAtLength((j?1:-1)*(M-Ce),{precision:ue,subdivisions:He});Ee=Ge}Ce+=Et}if(Ee){const xe=j?1:0;return Ee.tangentAtT(xe)}return null}tangentAtT(M){const I=this.segments.length;if(I===0)return null;const j=M.segmentIndex;if(j<0)return this.segments[0].tangentAtT(0);if(j>=I)return this.segments[I-1].tangentAtT(1);const ue=ie.clamp(M.value,0,1);return this.segments[j].tangentAtT(ue)}getPrecision(M={}){return M.precision==null?this.PRECISION:M.precision}getSubdivisions(M={}){if(M.segmentSubdivisions==null){const I=this.getPrecision(M);return this.getSegmentSubdivisions({precision:I})}return M.segmentSubdivisions}getOptions(M={}){const I=this.getPrecision(M),j=this.getSubdivisions(M);return{precision:I,segmentSubdivisions:j}}toPoints(M={}){const I=this.segments,j=I.length;if(j===0)return null;const ue=this.getSubdivisions(M),se=[];let Ee=[];for(let Ce=0;Ce<j;Ce+=1){const xe=I[Ce];if(xe.isVisible){const Oe=ue[Ce];Oe.length>0?Oe.forEach(Le=>Ee.push(Le.start)):Ee.push(xe.start)}else Ee.length>0&&(Ee.push(I[Ce-1].end),se.push(Ee),Ee=[])}return Ee.length>0&&(Ee.push(this.end),se.push(Ee)),se}toPolylines(M={}){const I=this.toPoints(M);return I?I.map(j=>new d(j)):null}scale(M,I,j){return this.segments.forEach(ue=>ue.scale(M,I,j)),this}rotate(M,I){return this.segments.forEach(j=>j.rotate(M,I)),this}translate(M,I){return typeof M=="number"?this.segments.forEach(j=>j.translate(M,I)):this.segments.forEach(j=>j.translate(M)),this}clone(){const M=new S;return this.segments.forEach(I=>M.appendSegment(I.clone())),M}equals(M){if(M==null)return!1;const I=this.segments,j=M.segments,ue=I.length;if(j.length!==ue)return!1;for(let se=0;se<ue;se+=1){const Ee=I[se],Ce=j[se];if(Ee.type!==Ce.type||!Ee.equals(Ce))return!1}return!0}toJSON(){return this.segments.map(M=>M.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(M=>M.serialize()).join(" ")}toString(){return this.serialize()}}(function(q){function M(I){return I!=null&&I instanceof q}q.isPath=M})(S||(S={})),function(q){function M(j){if(!j)return new q;const ue=new q,se=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,Ee=q.normalize(j).match(se);if(Ee!=null)for(let Ce=0,xe=Ee.length;Ce<xe;Ce+=1){const Oe=Ee[Ce],Le=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,Ge=Oe.match(Le);if(Ge!=null){const He=Ge[0],Et=Ge.slice(1).map(Gt=>+Gt),Ct=I.call(null,He,...Et);ue.appendSegment(Ct)}}return ue}q.parse=M;function I(j,...ue){if(j==="M")return ae.create.call(null,...ue);if(j==="L")return N.create.call(null,...ue);if(j==="C")return $.create.call(null,...ue);if(j==="z"||j==="Z")return F.create();throw new Error(`Invalid path segment type "${j}"`)}q.createSegment=I}(S||(S={})),function(q){q.normalize=pe,q.isValid=r,q.drawArc=m,q.drawPoints=s,q.arcToCurves=h}(S||(S={}))},38711:function(bt,O,V){"use strict";V.d(O,{Y:function(){return o}});var J=V(76439),ie=function(l,r,e,t){var s=arguments.length,h=s<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,e):t,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(l,r,e,t);else for(var d=l.length-1;d>=0;d--)(m=l[d])&&(h=(s<3?m(h):s>3?m(r,e,h):m(r,e))||h);return s>3&&h&&Object.defineProperty(r,e,h),h};class T extends J.G7{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(b.classNames.box)}get $boxes(){return J.is.children(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(r){super(),this.options=r,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new J.FE([],{comparator:b.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const r=this.graph,e=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),r.on("scale",this.onGraphTransformed,this),r.on("translate",this.onGraphTransformed,this),r.model.on("updated",this.onModelUpdated,this),e.on("added",this.onCellAdded,this),e.on("removed",this.onCellRemoved,this),e.on("reseted",this.onReseted,this),e.on("updated",this.onCollectionUpdated,this),e.on("node:change:position",this.onNodePositionChanged,this),e.on("cell:changed",this.onCellChanged,this)}stopListening(){const r=this.graph,e=this.collection;this.undelegateEvents(),r.off("scale",this.onGraphTransformed,this),r.off("translate",this.onGraphTransformed,this),r.model.off("updated",this.onModelUpdated,this),e.off("added",this.onCellAdded,this),e.off("removed",this.onCellRemoved,this),e.off("reseted",this.onReseted,this),e.off("updated",this.onCollectionUpdated,this),e.off("node:change:position",this.onNodePositionChanged,this),e.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:r,options:e}){const{showNodeSelectionBox:t,pointerEvents:s}=this.options,{ui:h,selection:m,translateBy:d,snapped:v}=e,x=(t!==!0||s&&this.getPointerEventsValue(s)==="none")&&!this.translating&&!m,N=h&&d&&r.id===d;if(x&&(N||v)){this.translating=!0;const F=r.position(),ae=r.previous("position"),$=F.x-ae.x,te=F.y-ae.y;($!==0||te!==0)&&this.translateSelectedNodes($,te,r,e),this.translating=!1}}onModelUpdated({removed:r}){r&&r.length&&this.unselect(r)}isEmpty(){return this.length<=0}isSelected(r){return this.collection.has(r)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(r,e={}){e.dryrun=!0;const t=this.filter(Array.isArray(r)?r:[r]);return this.collection.add(t,e),this}unselect(r,e={}){return e.dryrun=!0,this.collection.remove(Array.isArray(r)?r:[r],e),this}reset(r,e={}){if(r){if(e.batch){const x=this.filter(Array.isArray(r)?r:[r]);return this.collection.reset(x,Object.assign(Object.assign({},e),{ui:!0})),this}const t=this.cells,s=this.filter(Array.isArray(r)?r:[r]),h={},m={};t.forEach(x=>h[x.id]=x),s.forEach(x=>m[x.id]=x);const d=[],v=[];return s.forEach(x=>{h[x.id]||d.push(x)}),t.forEach(x=>{m[x.id]||v.push(x)}),v.length&&this.unselect(v,Object.assign(Object.assign({},e),{ui:!0})),d.length&&this.select(d,Object.assign(Object.assign({},e),{ui:!0})),v.length===0&&d.length===0&&this.updateContainer(),this}return this.clean(e)}clean(r={}){return this.length&&(r.batch===!1?this.unselect(this.cells,r):this.collection.reset([],Object.assign(Object.assign({},r),{ui:!0}))),this}setFilter(r){this.options.filter=r}setContent(r){this.options.content=r}startSelecting(r){r=this.normalizeEvent(r),this.clean();let e,t;const s=this.graph.container;if(r.offsetX!=null&&r.offsetY!=null&&s.contains(r.target))e=r.offsetX,t=r.offsetY;else{const h=J.is.offset(s),m=s.scrollLeft,d=s.scrollTop;e=r.clientX-h.left+window.pageXOffset+m,t=r.clientY-h.top+window.pageYOffset+d}J.is.css(this.container,{top:t,left:e,width:1,height:1}),this.setEventData(r,{action:"selecting",clientX:r.clientX,clientY:r.clientY,offsetX:e,offsetY:t,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(b.documentEvents,r.data)}filter(r){const e=this.options.filter;return r.filter(t=>Array.isArray(e)?e.some(s=>typeof s=="string"?t.shape===s:t.id===s.id):typeof e=="function"?J.Iw.call(e,this.graph,t):!0)}stopSelecting(r){const e=this.graph,t=this.getEventData(r);switch(t.action){case"selecting":{let h=J.is.width(this.container),m=J.is.height(this.container);const d=J.is.offset(this.container),v=e.pageToLocal(d.left,d.top),x=e.transform.getScale();h/=x.sx,m/=x.sy;const N=new J.Ae(v.x,v.y,h,m),F=this.getCellViewsInArea(N).map(ae=>ae.cell);this.reset(F,{batch:!0}),this.hideRubberband();break}case"translating":{const h=e.snapToGrid(r.clientX,r.clientY);if(!this.options.following){const m=t;this.updateSelectedNodesPosition({dx:m.clientX-m.originX,dy:m.clientY-m.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",r,h.x,h.y);break}default:{this.clean();break}}}onMouseUp(r){this.getEventData(r).action&&(this.stopSelecting(r),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(r){this.options.following||r.stopPropagation();const e=this.normalizeEvent(r);this.options.movable&&this.startTranslating(e);const t=this.getCellViewFromElem(e.target);this.setEventData(e,{activeView:t});const s=this.graph.snapToGrid(e.clientX,e.clientY);this.notifyBoxEvent("box:mousedown",e,s.x,s.y),this.delegateDocumentEvents(b.documentEvents,e.data)}startTranslating(r){this.graph.model.startBatch("move-selection");const e=this.graph.snapToGrid(r.clientX,r.clientY);this.setEventData(r,{action:"translating",clientX:e.x,clientY:e.y,originX:e.x,originY:e.y})}getRestrictArea(){const r=this.graph.options.translating.restrict,e=typeof r=="function"?J.Iw.call(r,this.graph,null):r;return typeof e=="number"?this.graph.transform.getGraphArea().inflate(e):e===!0?this.graph.transform.getGraphArea():e||null}getSelectionOffset(r,e){let t=r.x-e.clientX,s=r.y-e.clientY;const h=this.getRestrictArea();if(h){const m=this.collection.toArray(),d=J.bL.getCellsBBox(m,{deep:!0})||J.Ae.create(),v=h.x-d.x,x=h.y-d.y,N=h.x+h.width-(d.x+d.width),F=h.y+h.height-(d.y+d.height);if(t<v&&(t=v),s<x&&(s=x),N<t&&(t=N),F<s&&(s=F),!this.options.following){const ae=r.x-e.originX,$=r.y-e.originY;t=ae<=v||ae>=N?0:t,s=$<=x||$>=F?0:s}}return{dx:t,dy:s}}updateElementPosition(r,e,t){const s=J.is.css(r,"left"),h=J.is.css(r,"top"),m=s?parseFloat(s):0,d=h?parseFloat(h):0;J.is.css(r,"left",m+e),J.is.css(r,"top",d+t)}updateSelectedNodesPosition(r){const{dx:e,dy:t}=r;if(e||t)if(this.translateSelectedNodes(e,t),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const s=this.graph.transform.getScale();for(let h=0,m=this.$boxes,d=m.length;h<d;h+=1)this.updateElementPosition(m[h],e*s.sx,t*s.sy);this.updateElementPosition(this.selectionContainer,e*s.sx,t*s.sy)}}autoScrollGraph(r,e){const t=this.graph.getPlugin("scroller");return t?t.autoScroll(r,e):{scrollerX:0,scrollerY:0}}adjustSelection(r){const e=this.normalizeEvent(r),t=this.getEventData(e);switch(t.action){case"selecting":{const h=t;h.moving!==!0&&(J.is.appendTo(this.container,this.graph.container),this.showRubberband(),h.moving=!0);const{scrollerX:m,scrollerY:d}=this.autoScrollGraph(e.clientX,e.clientY);h.scrollerX+=m,h.scrollerY+=d;const v=e.clientX-h.clientX+h.scrollerX,x=e.clientY-h.clientY+h.scrollerY,N=parseInt(J.is.css(this.container,"left")||"0",10),F=parseInt(J.is.css(this.container,"top")||"0",10);J.is.css(this.container,{left:v<0?h.offsetX+v:N,top:x<0?h.offsetY+x:F,width:Math.abs(v),height:Math.abs(x)});break}case"translating":{const h=this.graph.snapToGrid(e.clientX,e.clientY),m=t,d=this.getSelectionOffset(h,m);this.options.following?this.updateSelectedNodesPosition(d):this.updateContainerPosition(d),d.dx&&(m.clientX=h.x),d.dy&&(m.clientY=h.y),this.notifyBoxEvent("box:mousemove",r,h.x,h.y);break}default:break}this.boxesUpdated=!1}translateSelectedNodes(r,e,t,s){const h={},m=[];if(t&&(h[t.id]=!0),this.collection.toArray().forEach(d=>{d.getDescendants({deep:!0}).forEach(v=>{h[v.id]=!0})}),s&&s.translateBy){const d=this.graph.getCellById(s.translateBy);d&&(h[d.id]=!0,d.getDescendants({deep:!0}).forEach(v=>{h[v.id]=!0}),m.push(d))}this.collection.toArray().forEach(d=>{if(!h[d.id]){const v=Object.assign(Object.assign({},s),{selection:this.cid,exclude:m});d.translate(r,e,v),this.graph.model.getConnectedEdges(d).forEach(x=>{h[x.id]||(x.translate(r,e,v),h[x.id]=!0)})}})}getCellViewsInArea(r){const e=this.graph,t={strict:this.options.strict};let s=[];return this.options.rubberNode&&(s=s.concat(e.model.getNodesInArea(r,t).map(h=>e.renderer.findViewByCell(h)).filter(h=>h!=null))),this.options.rubberEdge&&(s=s.concat(e.model.getEdgesInArea(r,t).map(h=>e.renderer.findViewByCell(h)).filter(h=>h!=null))),s}notifyBoxEvent(r,e,t,s){const m=this.getEventData(e).activeView;this.trigger(r,{e,view:m,x:t,y:s,cell:m.cell})}getSelectedClassName(r){return this.prefixClassName(`${r.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(r){const e=this.graph.renderer.findViewByCell(r);e&&e.addClass(this.getSelectedClassName(r))}removeCellUnSelectedClassName(r){const e=this.graph.renderer.findViewByCell(r);e&&e.removeClass(this.getSelectedClassName(r))}destroySelectionBox(r){this.removeCellUnSelectedClassName(r),this.canShowSelectionBox(r)&&(J.is.remove(this.container.querySelector(`[data-cell-id="${r.id}"]`)),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(r){r.forEach(e=>this.removeCellUnSelectedClassName(e)),this.hide(),J.is.remove(this.$boxes),this.boxCount=0}hide(){J.is.removeClass(this.container,this.prefixClassName(b.classNames.rubberband)),J.is.removeClass(this.container,this.prefixClassName(b.classNames.selected))}showRubberband(){J.is.addClass(this.container,this.prefixClassName(b.classNames.rubberband))}hideRubberband(){J.is.removeClass(this.container,this.prefixClassName(b.classNames.rubberband))}showSelected(){J.is.removeAttribute(this.container,"style"),J.is.addClass(this.container,this.prefixClassName(b.classNames.selected))}createContainer(){this.container=document.createElement("div"),J.is.addClass(this.container,this.prefixClassName(b.classNames.root)),this.options.className&&J.is.addClass(this.container,this.options.className),this.selectionContainer=document.createElement("div"),J.is.addClass(this.selectionContainer,this.prefixClassName(b.classNames.inner)),this.selectionContent=document.createElement("div"),J.is.addClass(this.selectionContent,this.prefixClassName(b.classNames.content)),J.is.append(this.selectionContainer,this.selectionContent),J.is.attr(this.selectionContainer,"data-selection-length",this.collection.length),J.is.prepend(this.container,this.selectionContainer)}updateContainerPosition(r){(r.dx||r.dy)&&this.updateElementPosition(this.selectionContainer,r.dx,r.dy)}updateContainer(){const r={x:1/0,y:1/0},e={x:0,y:0};this.collection.toArray().filter(h=>this.canShowSelectionBox(h)).forEach(h=>{const m=this.graph.renderer.findViewByCell(h);if(m){const d=m.getBBox({useCellGeometry:!0});r.x=Math.min(r.x,d.x),r.y=Math.min(r.y,d.y),e.x=Math.max(e.x,d.x+d.width),e.y=Math.max(e.y,d.y+d.height)}}),J.is.css(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:r.x,top:r.y,width:e.x-r.x,height:e.y-r.y}),J.is.attr(this.selectionContainer,"data-selection-length",this.collection.length);const s=this.options.content;if(s)if(typeof s=="function"){const h=J.Iw.call(s,this.graph,this,this.selectionContent);h&&(this.selectionContent.innerHTML=h)}else this.selectionContent.innerHTML=s;this.collection.length>0&&!this.container.parentNode?J.is.appendTo(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(r){return r.isNode()&&this.options.showNodeSelectionBox===!0||r.isEdge()&&this.options.showEdgeSelectionBox===!0}getPointerEventsValue(r){return typeof r=="string"?r:r(this.cells)}createSelectionBox(r){if(this.addCellSelectedClassName(r),this.canShowSelectionBox(r)){const e=this.graph.renderer.findViewByCell(r);if(e){const t=e.getBBox({useCellGeometry:!0}),s=this.boxClassName,h=document.createElement("div"),m=this.options.pointerEvents;J.is.addClass(h,s),J.is.addClass(h,`${s}-${r.isNode()?"node":"edge"}`),J.is.attr(h,"data-cell-id",r.id),J.is.css(h,{position:"absolute",left:t.x,top:t.y,width:t.width,height:t.height,pointerEvents:m?this.getPointerEventsValue(m):"auto"}),J.is.appendTo(h,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let r=0,e=this.$boxes,t=e.length;r<t;r+=1){const s=e[r],h=J.is.attr(s,"data-cell-id");J.is.remove(s),this.boxCount-=1;const m=this.collection.get(h);m&&this.createSelectionBox(m)}this.updateContainer()}return 0}getCellViewFromElem(r){const e=r.getAttribute("data-cell-id");if(e){const t=this.collection.get(e);if(t)return this.graph.renderer.findViewByCell(t)}return null}onCellRemoved({cell:r}){this.destroySelectionBox(r),this.updateContainer()}onReseted({previous:r,current:e}){this.destroyAllSelectionBoxes(r),e.forEach(t=>{this.listenCellRemoveEvent(t),this.createSelectionBox(t)}),this.updateContainer()}onCellAdded({cell:r}){this.listenCellRemoveEvent(r),this.createSelectionBox(r),this.updateContainer()}listenCellRemoveEvent(r){r.off("removed",this.onCellRemoved,this),r.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:r,removed:e,options:t}){r.forEach(h=>{this.trigger("cell:selected",{cell:h,options:t}),h.isNode()?this.trigger("node:selected",{cell:h,options:t,node:h}):h.isEdge()&&this.trigger("edge:selected",{cell:h,options:t,edge:h})}),e.forEach(h=>{this.trigger("cell:unselected",{cell:h,options:t}),h.isNode()?this.trigger("node:unselected",{cell:h,options:t,node:h}):h.isEdge()&&this.trigger("edge:unselected",{cell:h,options:t,edge:h})});const s={added:r,removed:e,options:t,selected:this.cells.filter(h=>!!this.graph.getCellById(h.id))};this.trigger("selection:changed",s)}dispose(){this.clean(),this.remove(),this.off()}}ie([J.G7.dispose()],T.prototype,"dispose",null);var b;(function(l){const r="widget-selection";l.classNames={root:r,inner:`${r}-inner`,box:`${r}-box`,content:`${r}-content`,rubberband:`${r}-rubberband`,selected:`${r}-selected`},l.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"};function e(t){return t.getAncestors().length}l.depthComparator=e})(b||(b={}));const u=`.x6-widget-selection {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
`;J.kJ.prototype.isSelectionEnabled=function(){const l=this.getPlugin("selection");return l?l.isEnabled():!1},J.kJ.prototype.enableSelection=function(){const l=this.getPlugin("selection");return l&&l.enable(),this},J.kJ.prototype.disableSelection=function(){const l=this.getPlugin("selection");return l&&l.disable(),this},J.kJ.prototype.toggleSelection=function(l){const r=this.getPlugin("selection");return r&&r.toggleEnabled(l),this},J.kJ.prototype.isMultipleSelection=function(){const l=this.getPlugin("selection");return l?l.isMultipleSelection():!1},J.kJ.prototype.enableMultipleSelection=function(){const l=this.getPlugin("selection");return l&&l.enableMultipleSelection(),this},J.kJ.prototype.disableMultipleSelection=function(){const l=this.getPlugin("selection");return l&&l.disableMultipleSelection(),this},J.kJ.prototype.toggleMultipleSelection=function(l){const r=this.getPlugin("selection");return r&&r.toggleMultipleSelection(l),this},J.kJ.prototype.isSelectionMovable=function(){const l=this.getPlugin("selection");return l?l.isSelectionMovable():!1},J.kJ.prototype.enableSelectionMovable=function(){const l=this.getPlugin("selection");return l&&l.enableSelectionMovable(),this},J.kJ.prototype.disableSelectionMovable=function(){const l=this.getPlugin("selection");return l&&l.disableSelectionMovable(),this},J.kJ.prototype.toggleSelectionMovable=function(l){const r=this.getPlugin("selection");return r&&r.toggleSelectionMovable(l),this},J.kJ.prototype.isRubberbandEnabled=function(){const l=this.getPlugin("selection");return l?l.isRubberbandEnabled():!1},J.kJ.prototype.enableRubberband=function(){const l=this.getPlugin("selection");return l&&l.enableRubberband(),this},J.kJ.prototype.disableRubberband=function(){const l=this.getPlugin("selection");return l&&l.disableRubberband(),this},J.kJ.prototype.toggleRubberband=function(l){const r=this.getPlugin("selection");return r&&r.toggleRubberband(l),this},J.kJ.prototype.isStrictRubberband=function(){const l=this.getPlugin("selection");return l?l.isStrictRubberband():!1},J.kJ.prototype.enableStrictRubberband=function(){const l=this.getPlugin("selection");return l&&l.enableStrictRubberband(),this},J.kJ.prototype.disableStrictRubberband=function(){const l=this.getPlugin("selection");return l&&l.disableStrictRubberband(),this},J.kJ.prototype.toggleStrictRubberband=function(l){const r=this.getPlugin("selection");return r&&r.toggleStrictRubberband(l),this},J.kJ.prototype.setRubberbandModifiers=function(l){const r=this.getPlugin("selection");return r&&r.setRubberbandModifiers(l),this},J.kJ.prototype.setSelectionFilter=function(l){const r=this.getPlugin("selection");return r&&r.setSelectionFilter(l),this},J.kJ.prototype.setSelectionDisplayContent=function(l){const r=this.getPlugin("selection");return r&&r.setSelectionDisplayContent(l),this},J.kJ.prototype.isSelectionEmpty=function(){const l=this.getPlugin("selection");return l?l.isEmpty():!0},J.kJ.prototype.cleanSelection=function(l){const r=this.getPlugin("selection");return r&&r.clean(l),this},J.kJ.prototype.resetSelection=function(l,r){const e=this.getPlugin("selection");return e&&e.reset(l,r),this},J.kJ.prototype.getSelectedCells=function(){const l=this.getPlugin("selection");return l?l.getSelectedCells():[]},J.kJ.prototype.getSelectedCellCount=function(){const l=this.getPlugin("selection");return l?l.getSelectedCellCount():0},J.kJ.prototype.isSelected=function(l){const r=this.getPlugin("selection");return r?r.isSelected(l):!1},J.kJ.prototype.select=function(l,r){const e=this.getPlugin("selection");return e&&e.select(l,r),this},J.kJ.prototype.unselect=function(l,r){const e=this.getPlugin("selection");return e&&e.unselect(l,r),this};var a=function(l,r,e,t){var s=arguments.length,h=s<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,e):t,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(l,r,e,t);else for(var d=l.length-1;d>=0;d--)(m=l[d])&&(h=(s<3?m(h):s>3?m(r,e,h):m(r,e))||h);return s>3&&h&&Object.defineProperty(r,e,h),h};class o extends J.ew{get rubberbandDisabled(){return this.options.enabled!==!0||this.options.rubberband!==!0}get disabled(){return this.options.enabled!==!0}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(r={}){super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=Object.assign(Object.assign({enabled:!0},o.defaultOptions),r),J.mf.ensure(this.name,u)}init(r){this.graph=r,this.selectionImpl=new T(Object.assign(Object.assign({},this.options),{graph:r})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(r){return r!=null?r!==this.isEnabled()&&(r?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(r){return r!=null?r!==this.isMultipleSelection()&&(r?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.options.movable!==!1}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(r){return r!=null?r!==this.isSelectionMovable()&&(r?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(r){return r!=null?r!==this.isRubberbandEnabled()&&(r?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selectionImpl.options.strict===!0}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(r){return r!=null?r!==this.isStrictRubberband()&&(r?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(r){this.setModifiers(r)}setSelectionFilter(r){return this.setFilter(r),this}setSelectionDisplayContent(r){return this.setContent(r),this}isEmpty(){return this.length<=0}clean(r={}){return this.selectionImpl.clean(r),this}reset(r,e={}){return this.selectionImpl.reset(r?this.getCells(r):[],e),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(r){return this.selectionImpl.isSelected(r)}select(r,e={}){const t=this.getCells(r);return t.length&&(this.isMultiple()?this.selectionImpl.select(t,e):this.reset(t.slice(0,1),e)),this}unselect(r,e={}){return this.selectionImpl.unselect(this.getCells(r),e),this}setup(){this.selectionImpl.on("*",(r,e)=>{this.trigger(r,e),this.graph.trigger(r,e)})}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e:r}){if(!this.allowBlankMouseDown(r))return;const e=this.graph.panning.allowPanning(r,!0),t=this.graph.getPlugin("scroller"),s=t&&t.allowPanning(r,!0);(this.allowRubberband(r,!0)||this.allowRubberband(r)&&!s&&!e)&&this.startRubberband(r)}allowBlankMouseDown(r){const e=this.options.eventTypes;return(e==null?void 0:e.includes("leftMouseDown"))&&r.button===0||(e==null?void 0:e.includes("mouseWheelDown"))&&r.button===1}onBlankClick(){this.clean()}allowRubberband(r,e){return!this.rubberbandDisabled&&J.tx.isMatch(r,this.options.modifiers,e)}allowMultipleSelection(r){return this.isMultiple()&&J.tx.isMatch(r,this.options.multipleSelectionModifiers)}onCellMouseMove({cell:r}){this.movedMap.set(r,!0)}onCellMouseUp({e:r,cell:e}){const t=this.options;let s=this.disabled;!s&&this.movedMap.has(e)&&(s=t.selectCellOnMoved===!1,s||(s=t.selectNodeOnMoved===!1&&e.isNode()),s||(s=t.selectEdgeOnMoved===!1&&e.isEdge())),s||(this.allowMultipleSelection(r)?this.unselectMap.has(e)?this.unselectMap.delete(e):this.isSelected(e)?this.unselect(e):this.select(e):this.reset(e)),this.movedMap.delete(e)}onBoxMouseDown({e:r,cell:e}){this.disabled||this.allowMultipleSelection(r)&&(this.unselect(e),this.unselectMap.set(e,!0))}getCells(r){return(Array.isArray(r)?r:[r]).map(e=>typeof e=="string"?this.graph.getCellById(e):e).filter(e=>e!=null)}startRubberband(r){return this.rubberbandDisabled||this.selectionImpl.startSelecting(r),this}isMultiple(){return this.options.multiple!==!1}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(r){return this.options.modifiers=r,this}setContent(r){return this.selectionImpl.setContent(r),this}setFilter(r){return this.selectionImpl.setFilter(r),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),J.mf.clean(this.name)}}a([J.ew.dispose()],o.prototype,"dispose",null),function(l){l.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null,eventTypes:["leftMouseDown","mouseWheelDown"]}}(o||(o={}))},32394:function(bt,O,V){"use strict";V.d(O,{z2:function(){return r}});var J=V(76439);class ie extends J.NB{}(function(s){function h(m){const d=[],v=J.Lu.getForeignObjectMarkup();return m?d.push({tagName:m,selector:"body"},v):d.push(v),d}s.config({view:"react-shape-view",markup:h(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(m){if(m.markup==null){const d=m.primer;if(d){m.markup=h(d);let v={};switch(d){case"circle":v={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":v={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break;default:break}m.attrs=J.QK.merge({},{body:Object.assign({refWidth:null,refHeight:null},v)},m.attrs||{})}}return m}}),J.NB.registry.register("react-shape",s,!0)})(ie||(ie={}));var T=V(67294),b=V(73935),u=V(20745),a;(function(s){let h=!1,m;const d=(ae,$)=>{const te=$.payload;switch($.type){case"add":{const fe=ae.findIndex(B=>B.id===te.id);return fe>=0?(ae[fe]=te,[...ae]):[...ae,te]}case"remove":{const fe=ae.findIndex(B=>B.id===te.id);if(fe>=0){const B=[...ae];return B.splice(fe,1),B}break}default:break}return ae};function v(ae,$){h&&m({type:"add",payload:{id:ae,portal:$}})}s.connect=v;function x(ae){h&&m({type:"remove",payload:{id:ae}})}s.disconnect=x;function N(){return h}s.isActive=N;function F(){return()=>{h=!0;const[ae,$]=(0,T.useReducer)(d,[]);return m=$,T.createElement(T.Fragment,{children:ae.map(te=>te.portal)})}}s.getProvider=F})(a||(a={}));var o=function(s,h){var m={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&h.indexOf(d)<0&&(m[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,d=Object.getOwnPropertySymbols(s);v<d.length;v++)h.indexOf(d[v])<0&&Object.prototype.propertyIsEnumerable.call(s,d[v])&&(m[d[v]]=s[d[v]]);return m};const l={};function r(s){const{shape:h,component:m,effect:d,inherit:v}=s,x=o(s,["shape","component","effect","inherit"]);if(!h)throw new Error("should specify shape in config");l[h]={component:m,effect:d},J.kJ.registerNode(h,Object.assign({inherit:v||"react-shape"},x),!0)}class e extends T.PureComponent{constructor(h){super(h),this.state={tick:0}}componentDidMount(){const{node:h}=this.props;h.on("change:*",({key:m})=>{const d=l[h.shape];if(d){const{effect:v}=d;(!v||v.includes(m))&&this.setState({tick:this.state.tick+1})}})}clone(h){const{node:m,graph:d}=this.props;return typeof h.type=="string"?T.cloneElement(h):T.cloneElement(h,{node:m,graph:d})}render(){const{node:h}=this.props,m=l[h.shape];if(!m)return null;const{component:d}=m;if(T.isValidElement(d))return this.clone(d);const v=d;return this.clone(T.createElement(v,null))}}class t extends J.DK{targetId(){return`${this.graph.view.cid}:${this.cell.id}`}getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(h){const m=super.confirmUpdate(h);return this.handleAction(m,t.action,()=>{this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const h=this.getComponentContainer(),m=this.cell;if(h){const d=T.createElement(e,{node:m,graph:this.graph});if(a.isActive()){const v=(0,b.createPortal)(d,h,m.id);a.connect(this.targetId(),v)}else this.root=(0,u.createRoot)(h),this.root.render(d)}}unmountReactComponent(){this.getComponentContainer()&&this.root&&(this.root.unmount(),this.root=void 0)}onMouseDown(h,m,d){const v=h.target;if(v.tagName.toLowerCase()==="input"){const N=v.getAttribute("type");if(N==null||["text","password","number","email","search","tel","url"].includes(N))return}super.onMouseDown(h,m,d)}unmount(){return a.isActive()&&a.disconnect(this.targetId()),this.unmountReactComponent(),super.unmount(),this}}(function(s){s.action="react",s.config({bootstrap:[s.action],actions:{component:s.action}}),J.DK.registry.register("react-shape-view",s,!0)})(t||(t={}))},76439:function(bt,O,V){"use strict";V.d(O,{ew:function(){return d.Basecoat},bL:function(){return It},FE:function(){return gc},mf:function(){return d.CssLoader},is:function(){return d.Dom},kS:function(){return ba},Iw:function(){return d.FunctionExt},kJ:function(){return na},Lu:function(){return ve},tx:function(){return d.ModifierKey},NB:function(){return Go},DK:function(){return fa},QK:function(){return d.ObjectExt},y$:function(){return v.Path},t4:function(){return d.Platform},Ae:function(){return v.Rectangle},G7:function(){return Mo}});var J={};V.r(J),V.d(J,{dot:function(){return N},doubleMesh:function(){return $},fixedDot:function(){return F},mesh:function(){return ae}});var ie={};V.r(ie),V.d(ie,{flipX:function(){return fe},flipXY:function(){return he},flipY:function(){return B},watermark:function(){return z}});var T={};V.r(T),V.d(T,{blur:function(){return I},brightness:function(){return Oe},contrast:function(){return Le},dropShadow:function(){return j},grayScale:function(){return ue},highlight:function(){return M},hueRotate:function(){return Ce},invert:function(){return xe},outline:function(){return q},saturate:function(){return Ee},sepia:function(){return se}});var b={};V.r(b),V.d(b,{async:function(){return Q},block:function(){return ks},circle:function(){return Xe},circlePlus:function(){return dt},classic:function(){return rs},cross:function(){return _e},diamond:function(){return Xs},ellipse:function(){return gt},path:function(){return ot}});var u={};V.r(u),V.d(u,{annotations:function(){return Pr},atConnectionLength:function(){return Y},atConnectionLengthIgnoreGradient:function(){return Ne},atConnectionLengthKeepGradient:function(){return Re},atConnectionRatio:function(){return ge},atConnectionRatioIgnoreGradient:function(){return U},atConnectionRatioKeepGradient:function(){return Te},connection:function(){return $r},displayEmpty:function(){return ki},eol:function(){return cr},fill:function(){return jt},filter:function(){return wo},html:function(){return wi},lineHeight:function(){return rr},port:function(){return fs},ref:function(){return Et},refCx:function(){return Ei},refCy:function(){return ci},refD:function(){return $e},refDKeepOffset:function(){return fr},refDResetOffset:function(){return Ot},refDx:function(){return At},refDy:function(){return vt},refHeight:function(){return hn},refHeight2:function(){return at},refPoints:function(){return Xt},refPointsKeepOffset:function(){return Li},refPointsResetOffset:function(){return Pi},refR:function(){return zn},refRCircumscribed:function(){return Nr},refRInscribed:function(){return ir},refRx:function(){return Bn},refRy:function(){return Fn},refWidth:function(){return cn},refWidth2:function(){return Tt},refX:function(){return Ct},refX2:function(){return Rt},refY:function(){return Gt},refY2:function(){return _t},resetOffset:function(){return Wr},sourceMarker:function(){return Cr},stroke:function(){return xt},style:function(){return uo},targetMarker:function(){return tr},text:function(){return $t},textPath:function(){return Or},textVerticalAnchor:function(){return xn},textWrap:function(){return Un},title:function(){return Vr},vertexMarker:function(){return ii},xAlign:function(){return kr},yAlign:function(){return Ui}});var a={};V.r(a),V.d(a,{className:function(){return fn},opacity:function(){return Gn},stroke:function(){return qr}});var o={};V.r(o),V.d(o,{absolute:function(){return Di},bottom:function(){return xs},ellipse:function(){return Jr},ellipseSpread:function(){return $o},left:function(){return Ho},line:function(){return Xi},right:function(){return cs},top:function(){return li}});var l={};V.r(l),V.d(l,{bottom:function(){return ei},inside:function(){return Ji},insideOriented:function(){return Yi},left:function(){return Ln},manual:function(){return an},outside:function(){return Ii},outsideOriented:function(){return to},radial:function(){return Fs},radialOriented:function(){return ss},right:function(){return wr},top:function(){return yr}});var r={};V.r(r),V.d(r,{noop:function(){return Se},pinAbsolute:function(){return vn},pinRelative:function(){return Lt}});var e={};V.r(e),V.d(e,{bottom:function(){return La},bottomLeft:function(){return Vs},bottomRight:function(){return oa},center:function(){return Us},left:function(){return qs},midSide:function(){return qa},nodeCenter:function(){return ma},orth:function(){return Xa},right:function(){return mu},top:function(){return ta},topLeft:function(){return eo},topRight:function(){return ds}});var t={};V.r(t),V.d(t,{closest:function(){return Aa},length:function(){return eu},orth:function(){return Wu},ratio:function(){return cc}});var s={};V.r(s),V.d(s,{anchor:function(){return Bt},bbox:function(){return In},boundary:function(){return Mr},rect:function(){return br}});var h={};V.r(h),V.d(h,{er:function(){return rf},loop:function(){return ih},manhattan:function(){return xc},metro:function(){return nf},normal:function(){return Dn},oneSide:function(){return Dt},orth:function(){return Fi}});var m={};V.r(m),V.d(m,{jumpover:function(){return nd},loop:function(){return Ba},normal:function(){return Ah},rounded:function(){return bu},smooth:function(){return Af}});var d=V(35695),v=V(62595);class x{constructor(n){this.options=Object.assign({},n),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(n,f,p=!1){if(typeof n=="object"){Object.entries(n).forEach(([ne,me])=>{this.register(ne,me,f)});return}this.exist(n)&&!p&&!d.Platform.isApplyingHMR()&&this.onDuplicated(n);const w=this.options.process,k=w?d.FunctionExt.call(w,this,n,f):f;return this.data[n]=k,k}unregister(n){const f=n?this.data[n]:null;return delete this.data[n],f}get(n){return n?this.data[n]:null}exist(n){return n?this.data[n]!=null:!1}onDuplicated(n){try{throw this.options.onConflict&&d.FunctionExt.call(this.options.onConflict,this,n),new Error(`${d.StringExt.upperFirst(this.options.type)} with name '${n}' already registered.`)}catch(f){throw f}}onNotFound(n,f){throw new Error(this.getSpellingSuggestion(n,f))}getSpellingSuggestion(n,f){const p=this.getSpellingSuggestionForName(n),w=f?`${f} ${d.StringExt.lowerFirst(this.options.type)}`:this.options.type;return`${d.StringExt.upperFirst(w)} with name '${n}' does not exist.${p?` Did you mean '${p}'?`:""}`}getSpellingSuggestionForName(n){return d.StringExt.getSpellingSuggestion(n,Object.keys(this.data),f=>f)}}(function(H){function n(f){return new H(f)}H.create=n})(x||(x={}));const N={color:"#aaaaaa",thickness:1,markup:"rect",update(H,n){const f=n.thickness*n.sx,p=n.thickness*n.sy;d.Dom.attr(H,{width:f,height:p,rx:f,ry:p,fill:n.color})}},F={color:"#aaaaaa",thickness:1,markup:"rect",update(H,n){const f=n.sx<=1?n.thickness*n.sx:n.thickness;d.Dom.attr(H,{width:f,height:f,rx:f,ry:f,fill:n.color})}},ae={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(H,n){let f;const p=n.width,w=n.height,k=n.thickness;p-k>=0&&w-k>=0?f=["M",p,0,"H0 M0 0 V0",w].join(" "):f="M 0 0 0 0",d.Dom.attr(H,{d:f,stroke:n.color,"stroke-width":n.thickness})}},$=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(H,n){let f;const p=n.width,w=n.height,k=n.thickness;p-k>=0&&w-k>=0?f=["M",p,0,"H0 M0 0 V0",w].join(" "):f="M 0 0 0 0",d.Dom.attr(H,{d:f,stroke:n.color,"stroke-width":n.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(H,n){let f;const p=n.factor||1,w=n.width*p,k=n.height*p,ne=n.thickness;w-ne>=0&&k-ne>=0?f=["M",w,0,"H0 M0 0 V0",k].join(" "):f="M 0 0 0 0",n.width=w,n.height=k,d.Dom.attr(H,{d:f,stroke:n.color,"stroke-width":n.thickness})}}];class te{constructor(){this.patterns={},this.root=d.Vector.create(d.Dom.createSvgDocument(),{width:"100%",height:"100%"},[d.Dom.createSvgElement("defs")]).node}add(n,f){const p=this.root.childNodes[0];p&&p.appendChild(f),this.patterns[n]=f,d.Vector.create("rect",{width:"100%",height:"100%",fill:`url(#${n})`}).appendTo(this.root)}get(n){return this.patterns[n]}has(n){return this.patterns[n]!=null}}(function(H){H.presets=J,H.registry=x.create({type:"grid"}),H.registry.register(H.presets,!0)})(te||(te={}));const fe=function(H){const n=document.createElement("canvas"),f=H.width,p=H.height;n.width=f*2,n.height=p;const w=n.getContext("2d");return w.drawImage(H,0,0,f,p),w.translate(2*f,0),w.scale(-1,1),w.drawImage(H,0,0,f,p),n},B=function(H){const n=document.createElement("canvas"),f=H.width,p=H.height;n.width=f,n.height=p*2;const w=n.getContext("2d");return w.drawImage(H,0,0,f,p),w.translate(0,2*p),w.scale(1,-1),w.drawImage(H,0,0,f,p),n},he=function(H){const n=document.createElement("canvas"),f=H.width,p=H.height;n.width=2*f,n.height=2*p;const w=n.getContext("2d");return w.drawImage(H,0,0,f,p),w.setTransform(-1,0,0,-1,n.width,n.height),w.drawImage(H,0,0,f,p),w.setTransform(-1,0,0,1,n.width,0),w.drawImage(H,0,0,f,p),w.setTransform(1,0,0,-1,0,n.height),w.drawImage(H,0,0,f,p),n},z=function(H,n){const f=H.width,p=H.height,w=document.createElement("canvas");w.width=f*3,w.height=p*3;const k=w.getContext("2d"),ne=n.angle!=null?-n.angle:-20,me=v.Angle.toRad(ne),De=w.width/4,ze=w.height/4;for(let it=0;it<4;it+=1)for(let Pt=0;Pt<4;Pt+=1)(it+Pt)%2>0&&(k.setTransform(1,0,0,1,(2*it-1)*De,(2*Pt-1)*ze),k.rotate(me),k.drawImage(H,-f/2,-p/2,f,p));return w};var ee;(function(H){H.presets=Object.assign({},ie),H.presets["flip-x"]=fe,H.presets["flip-y"]=B,H.presets["flip-xy"]=he,H.registry=x.create({type:"background pattern"}),H.registry.register(H.presets,!0)})(ee||(ee={}));function pe(H,n){return H!=null?H:n}function S(H,n){return H!=null&&Number.isFinite(H)?H:n}function q(H={}){const n=pe(H.color,"blue"),f=S(H.width,1),p=S(H.margin,2),w=S(H.opacity,1),k=p,ne=p+f;return`
    <filter>
      <feFlood flood-color="${n}" flood-opacity="${w}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${ne}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${k}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function M(H={}){const n=pe(H.color,"red"),f=S(H.blur,0),p=S(H.width,1),w=S(H.opacity,1);return`
      <filter>
        <feFlood flood-color="${n}" flood-opacity="${w}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${p}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${f}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function I(H={}){const n=S(H.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${H.y!=null&&Number.isFinite(H.y)?[n,H.y]:n}"/>
    </filter>
  `.trim()}function j(H={}){const n=S(H.dx,0),f=S(H.dy,0),p=pe(H.color,"black"),w=S(H.blur,4),k=S(H.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${w}" dx="${n}" dy="${f}" flood-color="${p}" flood-opacity="${k}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${w}" />
         <feOffset dx="${n}" dy="${f}" result="offsetblur" />
         <feFlood flood-color="${p}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${k}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function ue(H={}){const n=S(H.amount,1),f=.2126+.7874*(1-n),p=.7152-.7152*(1-n),w=.0722-.0722*(1-n),k=.2126-.2126*(1-n),ne=.7152+.2848*(1-n),me=.0722-.0722*(1-n),De=.2126-.2126*(1-n),ze=.0722+.9278*(1-n);return`
    <filter>
      <feColorMatrix type="matrix" values="${f} ${p} ${w} 0 0 ${k} ${ne} ${me} 0 0 ${De} ${p} ${ze} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function se(H={}){const n=S(H.amount,1),f=.393+.607*(1-n),p=.769-.769*(1-n),w=.189-.189*(1-n),k=.349-.349*(1-n),ne=.686+.314*(1-n),me=.168-.168*(1-n),De=.272-.272*(1-n),ze=.534-.534*(1-n),it=.131+.869*(1-n);return`
      <filter>
        <feColorMatrix type="matrix" values="${f} ${p} ${w} 0 0 ${k} ${ne} ${me} 0 0 ${De} ${ze} ${it} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function Ee(H={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-S(H.amount,1)}"/>
      </filter>
    `.trim()}function Ce(H={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${S(H.angle,0)}"/>
      </filter>
    `.trim()}function xe(H={}){const n=S(H.amount,1),f=1-n;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${n} ${f}"/>
          <feFuncG type="table" tableValues="${n} ${f}"/>
          <feFuncB type="table" tableValues="${n} ${f}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function Oe(H={}){const n=S(H.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${n}"/>
        <feFuncG type="linear" slope="${n}"/>
        <feFuncB type="linear" slope="${n}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function Le(H={}){const n=S(H.amount,1),f=.5-n/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${n}" intercept="${f}"/>
        <feFuncG type="linear" slope="${n}" intercept="${f}"/>
        <feFuncB type="linear" slope="${n}" intercept="${f}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}var Ge;(function(H){H.presets=T,H.registry=x.create({type:"filter"}),H.registry.register(H.presets,!0)})(Ge||(Ge={}));const He={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},Et={},Ct={position:ce("x","width","origin")},Gt={position:ce("y","height","origin")},At={position:ce("x","width","corner")},vt={position:ce("y","height","corner")},cn={set:ut("width","width")},hn={set:ut("height","height")},Bn={set:ut("rx","width")},Fn={set:ut("ry","height")},ir={set:(H=>{const n=ut(H,"width"),f=ut(H,"height");return function(p,w){const k=w.refBBox,ne=k.height>k.width?n:f;return d.FunctionExt.call(ne,this,p,w)}})("r")},Nr={set(H,{refBBox:n}){let f=parseFloat(H);const p=d.NumberExt.isPercentage(H);p&&(f/=100);const w=Math.sqrt(n.height*n.height+n.width*n.width);let k;return Number.isFinite(f)&&(p||f>=0&&f<=1?k=f*w:k=Math.max(f+w,0)),{r:k}}},Ei={set:ut("cx","width")},ci={set:ut("cy","height")},Ot={set:Wt({resetOffset:!0})},fr={set:Wt({resetOffset:!1})},Pi={set:Ut({resetOffset:!0})},Li={set:Ut({resetOffset:!1})},zn=ir,$e=Ot,Xt=Pi,Rt=Ct,_t=Gt,Tt=cn,at=hn;function ce(H,n,f){return(p,{refBBox:w})=>{if(p==null)return null;let k=parseFloat(p);const ne=d.NumberExt.isPercentage(p);ne&&(k/=100);let me;if(Number.isFinite(k)){const ze=w[f];ne||k>0&&k<1?me=ze[H]+w[n]*k:me=ze[H]+k}const De=new v.Point;return De[H]=me||0,De}}function ut(H,n){return function(f,{refBBox:p}){let w=parseFloat(f);const k=d.NumberExt.isPercentage(f);k&&(w/=100);const ne={};if(Number.isFinite(w)){const me=k||w>=0&&w<=1?w*p[n]:Math.max(w+p[n],0);ne[H]=me}return ne}}function Ze(H,n){const f="x6-shape",p=n&&n.resetOffset;return function(w,{elem:k,refBBox:ne}){let me=d.Dom.data(k,f);if(!me||me.value!==w){const On=H(w);me={value:w,shape:On,shapeBBox:On.bbox()},d.Dom.data(k,f,me)}const De=me.shape.clone(),ze=me.shapeBBox.clone(),it=ze.getOrigin(),Pt=ne.getOrigin();ze.x=Pt.x,ze.y=Pt.y;const ht=ne.getMaxScaleToFit(ze,Pt),Ft=ze.width===0||ne.width===0?1:ht.sx,tn=ze.height===0||ne.height===0?1:ht.sy;return De.scale(Ft,tn,it),p&&De.translate(-it.x,-it.y),De}}function Wt(H){function n(p){return v.Path.parse(p)}const f=Ze(n,H);return(p,w)=>({d:f(p,w).serialize()})}function Ut(H){const n=Ze(f=>new v.Polyline(f),H);return(f,p)=>({points:n(f,p).serialize()})}const jt={qualify:d.ObjectExt.isPlainObject,set(H,{view:n}){return`url(#${n.graph.defineGradient(H)})`}},xt={qualify:d.ObjectExt.isPlainObject,set(H,{view:n}){const f=n.cell,p=Object.assign({},H);if(f.isEdge()&&p.type==="linearGradient"){const w=n,k=w.sourcePoint,ne=w.targetPoint;p.id=`gradient-${p.type}-${f.id}`,p.attrs=Object.assign(Object.assign({},p.attrs),{x1:k.x,y1:k.y,x2:ne.x,y2:ne.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(p.id)}return`url(#${n.graph.defineGradient(p)})`}},$t={qualify(H,{attrs:n}){return n.textWrap==null||!d.ObjectExt.isPlainObject(n.textWrap)},set(H,{view:n,elem:f,attrs:p}){const w="x6-text",k=d.Dom.data(f,w),ne=it=>{try{return JSON.parse(it)}catch(Pt){return it}},me={x:p.x,eol:p.eol,annotations:ne(p.annotations),textPath:ne(p["text-path"]||p.textPath),textVerticalAnchor:p["text-vertical-anchor"]||p.textVerticalAnchor,displayEmpty:(p["display-empty"]||p.displayEmpty)==="true",lineHeight:p["line-height"]||p.lineHeight},De=p["font-size"]||p.fontSize,ze=JSON.stringify([H,me]);if(De&&f.setAttribute("font-size",De),k==null||k!==ze){const it=me.textPath;if(it!=null&&typeof it=="object"){const Pt=it.selector;if(typeof Pt=="string"){const ht=n.find(Pt)[0];ht instanceof SVGPathElement&&(d.Dom.ensureId(ht),me.textPath=Object.assign({"xlink:href":`#${ht.id}`},it))}}d.Dom.text(f,`${H}`,me),d.Dom.data(f,w,ze)}}},Un={qualify:d.ObjectExt.isPlainObject,set(H,{view:n,elem:f,attrs:p,refBBox:w}){const k=H,ne=k.width||0;d.NumberExt.isPercentage(ne)?w.width*=parseFloat(ne)/100:ne<=0?w.width+=ne:w.width=ne;const me=k.height||0;d.NumberExt.isPercentage(me)?w.height*=parseFloat(me)/100:me<=0?w.height+=me:w.height=me;let De,ze=k.text;ze==null&&(ze=p.text||(f==null?void 0:f.textContent)),ze!=null?De=d.Dom.breakText(`${ze}`,w,{"font-weight":p["font-weight"]||p.fontWeight,"font-size":p["font-size"]||p.fontSize,"font-family":p["font-family"]||p.fontFamily,lineHeight:p.lineHeight},{ellipsis:k.ellipsis}):De="",d.FunctionExt.call($t.set,this,De,{view:n,elem:f,attrs:p,refBBox:w,cell:n.cell})}},qn=(H,{attrs:n})=>n.text!==void 0,rr={qualify:qn},xn={qualify:qn},Or={qualify:qn},Pr={qualify:qn},cr={qualify:qn},ki={qualify:qn},Vr={qualify(H,{elem:n}){return n instanceof SVGElement},set(H,{elem:n}){const f="x6-title",p=`${H}`,w=d.Dom.data(n,f);if(w==null||w!==p){d.Dom.data(n,f,p);const k=n.firstChild;if(k&&k.tagName.toUpperCase()==="TITLE"){const ne=k;ne.textContent=p}else{const ne=document.createElementNS(n.namespaceURI,"title");ne.textContent=p,n.insertBefore(ne,k)}}}},kr={offset:no("x","width","right")},Ui={offset:no("y","height","bottom")},Wr={offset(H,{refBBox:n}){return H?{x:-n.x,y:-n.y}:{x:0,y:0}}};function no(H,n,f){return(p,{refBBox:w})=>{const k=new v.Point;let ne;return p==="middle"?ne=w[n]/2:p===f?ne=w[n]:typeof p=="number"&&Number.isFinite(p)?ne=p>-1&&p<1?-w[n]*p:-p:d.NumberExt.isPercentage(p)?ne=w[n]*parseFloat(p)/100:ne=0,k[H]=-(w[H]+ne),k}}const uo={qualify:d.ObjectExt.isPlainObject,set(H,{elem:n}){d.Dom.css(n,H)}},wi={set(H,{elem:n}){n.innerHTML=`${H}`}},wo={qualify:d.ObjectExt.isPlainObject,set(H,{view:n}){return`url(#${n.graph.defineFilter(H)})`}},fs={set(H){return H!=null&&typeof H=="object"&&H.id?H.id:H}};function zo(H,n,f){let p,w;typeof n=="object"?(p=n.x,w=n.y):(p=n,w=f);const k=v.Path.parse(H),ne=k.bbox();if(ne){let me=-ne.height/2-ne.y,De=-ne.width/2-ne.x;typeof p=="number"&&(De-=p),typeof w=="number"&&(me-=w),k.translate(De,me)}return k.serialize()}var hs=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const ks=H=>{var{size:n,width:f,height:p,offset:w,open:k}=H,ne=hs(H,["size","width","height","offset","open"]);return Eo({size:n,width:f,height:p,offset:w},k===!0,!0,void 0,ne)},rs=H=>{var{size:n,width:f,height:p,offset:w,factor:k}=H,ne=hs(H,["size","width","height","offset","factor"]);return Eo({size:n,width:f,height:p,offset:w},!1,!1,k,ne)};function Eo(H,n,f,p=3/4,w={}){const k=H.size||10,ne=H.width||k,me=H.height||k,De=new v.Path,ze={};if(n)De.moveTo(ne,0).lineTo(0,me/2).lineTo(ne,me),ze.fill="none";else{if(De.moveTo(0,me/2),De.lineTo(ne,0),!f){const it=d.NumberExt.clamp(p,0,1);De.lineTo(ne*it,me/2)}De.lineTo(ne,me),De.close()}return Object.assign(Object.assign(Object.assign({},ze),w),{tagName:"path",d:zo(De.serialize(),{x:H.offset!=null?H.offset:-ne/2})})}var Qo=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const Xs=H=>{var{size:n,width:f,height:p,offset:w}=H,k=Qo(H,["size","width","height","offset"]);const ne=n||10,me=f||ne,De=p||ne,ze=new v.Path;return ze.moveTo(0,De/2).lineTo(me/2,0).lineTo(me,De/2).lineTo(me/2,De).close(),Object.assign(Object.assign({},k),{tagName:"path",d:zo(ze.serialize(),w==null?-me/2:w)})};var Ys=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const ot=H=>{var{d:n,offsetX:f,offsetY:p}=H,w=Ys(H,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},w),{tagName:"path",d:zo(n,f,p)})};var mt=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const _e=H=>{var{size:n,width:f,height:p,offset:w}=H,k=mt(H,["size","width","height","offset"]);const ne=n||10,me=f||ne,De=p||ne,ze=new v.Path;return ze.moveTo(0,0).lineTo(me,De).moveTo(0,De).lineTo(me,0),Object.assign(Object.assign({},k),{tagName:"path",fill:"none",d:zo(ze.serialize(),w||-me/2)})};var Z=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const Q=H=>{var{width:n,height:f,offset:p,open:w,flip:k}=H,ne=Z(H,["width","height","offset","open","flip"]);let me=f||6;const De=n||10,ze=w===!0,it=k===!0,Pt=Object.assign(Object.assign({},ne),{tagName:"path"});it&&(me=-me);const ht=new v.Path;return ht.moveTo(0,me).lineTo(De,0),ze?Pt.fill="none":(ht.lineTo(De,me),ht.close()),Pt.d=zo(ht.serialize(),{x:p||-De/2,y:me/2}),Pt};var le=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const Xe=H=>{var{r:n}=H,f=le(H,["r"]);const p=n||5;return Object.assign(Object.assign({cx:p},f),{tagName:"circle",r:p})},dt=H=>{var{r:n}=H,f=le(H,["r"]);const p=n||5,w=new v.Path;return w.moveTo(p,0).lineTo(p,p*2),w.moveTo(0,p).lineTo(p*2,p),{children:[Object.assign(Object.assign({},Xe({r:p})),{fill:"none"}),Object.assign(Object.assign({},f),{tagName:"path",d:zo(w.serialize(),-p)})]}};var ft=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const gt=H=>{var{rx:n,ry:f}=H,p=ft(H,["rx","ry"]);const w=n||5,k=f||5;return Object.assign(Object.assign({cx:w},p),{tagName:"ellipse",rx:w,ry:k})};var ln;(function(H){H.presets=b,H.registry=x.create({type:"marker"}),H.registry.register(H.presets,!0)})(ln||(ln={})),function(H){H.normalize=zo}(ln||(ln={}));var bn=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};function En(H){return typeof H=="string"||d.ObjectExt.isPlainObject(H)}const Cr={qualify:En,set(H,{view:n,attrs:f}){return Zi("marker-start",H,n,f)}},tr={qualify:En,set(H,{view:n,attrs:f}){return Zi("marker-end",H,n,f,{transform:"rotate(180)"})}},ii={qualify:En,set(H,{view:n,attrs:f}){return Zi("marker-mid",H,n,f)}};function Zi(H,n,f,p,w={}){const k=typeof n=="string"?{name:n}:n,{name:ne,args:me}=k,De=bn(k,["name","args"]);let ze=De;if(ne&&typeof ne=="string"){const Pt=ln.registry.get(ne);if(Pt)ze=Pt(Object.assign(Object.assign({},De),me));else return ln.registry.onNotFound(ne)}const it=Object.assign(Object.assign(Object.assign({},Mn(p,H)),w),ze);return{[H]:`url(#${f.graph.defineMarker(it)})`}}function Mn(H,n){const f={},p=H.stroke;typeof p=="string"&&(f.stroke=p,f.fill=p);let w=H.strokeOpacity;if(w==null&&(w=H["stroke-opacity"]),w==null&&(w=H.opacity),w!=null&&(f["stroke-opacity"]=w,f["fill-opacity"]=w),n!=="marker-mid"){const k=parseFloat(H.strokeWidth||H["stroke-width"]);if(Number.isFinite(k)&&k>1){const ne=Math.ceil(k/2);f.refX=n==="marker-start"?ne:-ne}}return f}const Xn=(H,{view:n})=>n.cell.isEdge(),$r={qualify:Xn,set(H,n){var f,p,w,k;const ne=n.view,me=H.reverse||!1,De=H.stubs||0;let ze;if(Number.isFinite(De)&&De!==0)if(me){let it,Pt;const ht=ne.getConnectionLength()||0;De<0?(it=(ht+De)/2,Pt=-De):(it=De,Pt=ht-De*2);const Ft=ne.getConnection();ze=(k=(w=(p=(f=Ft==null?void 0:Ft.divideAtLength(it))===null||f===void 0?void 0:f[1])===null||p===void 0?void 0:p.divideAtLength(Pt))===null||w===void 0?void 0:w[0])===null||k===void 0?void 0:k.serialize()}else{let it;De<0?it=((ne.getConnectionLength()||0)+De)/2:it=De;const Pt=ne.getConnection();if(Pt){const ht=Pt.divideAtLength(it),Ft=Pt.divideAtLength(-it);ht&&Ft&&(ze=`${ht[0].serialize()} ${Ft[1].serialize()}`)}}return{d:ze||ne.getConnectionPathData()}}},Re={qualify:Xn,set:Ye("getTangentAtLength",{rotate:!0})},Ne={qualify:Xn,set:Ye("getTangentAtLength",{rotate:!1})},Te={qualify:Xn,set:Ye("getTangentAtRatio",{rotate:!0})},U={qualify:Xn,set:Ye("getTangentAtRatio",{rotate:!1})},Y=Re,ge=Te;function Ye(H,n){const f={x:1,y:0};return(p,w)=>{let k,ne;const me=w.view,De=me[H](Number(p));return De?(ne=n.rotate?De.vector().vectorAngle(f):0,k=De.start):(k=me.path.start,ne=0),ne===0?{transform:`translate(${k.x},${k.y}')`}:{transform:`translate(${k.x},${k.y}') rotate(${ne})`}}}var ct;(function(H){function n(f,p,w){return!!(f!=null&&(typeof f=="string"||typeof f.qualify!="function"||d.FunctionExt.call(f.qualify,this,p,w)))}H.isValidDefinition=n})(ct||(ct={})),function(H){H.presets=Object.assign(Object.assign({},He),u),H.registry=x.create({type:"attribute definition"}),H.registry.register(H.presets,!0)}(ct||(ct={}));const nt={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix(H){return`${nt.prefixCls}-${H}`}},lt=nt.prefix("highlighted"),fn={highlight(H,n,f){const p=f&&f.className||lt;d.Dom.addClass(n,p)},unhighlight(H,n,f){const p=f&&f.className||lt;d.Dom.removeClass(n,p)}},on=nt.prefix("highlight-opacity"),Gn={highlight(H,n){d.Dom.addClass(n,on)},unhighlight(H,n){d.Dom.removeClass(n,on)}};var er;(function(H){H.normalizeMarker=zo;function n(ht,Ft){const tn=d.Dom.createSVGPoint(ht.x,ht.y).matrixTransform(Ft);return new v.Point(tn.x,tn.y)}H.transformPoint=n;function f(ht,Ft){return new v.Line(n(ht.start,Ft),n(ht.end,Ft))}H.transformLine=f;function p(ht,Ft){let tn=ht instanceof v.Polyline?ht.points:ht;return Array.isArray(tn)||(tn=[]),new v.Polyline(tn.map(On=>n(On,Ft)))}H.transformPolyline=p;function w(ht,Ft){const On=d.Dom.createSvgElement("svg").createSVGPoint();On.x=ht.x,On.y=ht.y;const Rn=On.matrixTransform(Ft);On.x=ht.x+ht.width,On.y=ht.y;const nr=On.matrixTransform(Ft);On.x=ht.x+ht.width,On.y=ht.y+ht.height;const or=On.matrixTransform(Ft);On.x=ht.x,On.y=ht.y+ht.height;const Dr=On.matrixTransform(Ft),ri=Math.min(Rn.x,nr.x,or.x,Dr.x),yn=Math.max(Rn.x,nr.x,or.x,Dr.x),ao=Math.min(Rn.y,nr.y,or.y,Dr.y),Ks=Math.max(Rn.y,nr.y,or.y,Dr.y);return new v.Rectangle(ri,ao,yn-ri,Ks-ao)}H.transformRectangle=w;function k(ht,Ft,tn){let On;const Rn=ht.ownerSVGElement;if(!Rn)return new v.Rectangle(0,0,0,0);try{On=ht.getBBox()}catch(or){On={x:ht.clientLeft,y:ht.clientTop,width:ht.clientWidth,height:ht.clientHeight}}if(Ft)return v.Rectangle.create(On);const nr=d.Dom.getTransformToElement(ht,tn||Rn);return w(On,nr)}H.bbox=k;function ne(ht,Ft={}){let tn;if(!ht.ownerSVGElement||!d.Dom.isSVGGraphicsElement(ht)){if(d.Dom.isHTMLElement(ht)){const{left:or,top:Dr,width:ri,height:yn}=me(ht);return new v.Rectangle(or,Dr,ri,yn)}return new v.Rectangle(0,0,0,0)}let Rn=Ft.target;if(!Ft.recursive){try{tn=ht.getBBox()}catch(Dr){tn={x:ht.clientLeft,y:ht.clientTop,width:ht.clientWidth,height:ht.clientHeight}}if(!Rn)return v.Rectangle.create(tn);const or=d.Dom.getTransformToElement(ht,Rn);return w(tn,or)}{const or=ht.childNodes,Dr=or.length;if(Dr===0)return ne(ht,{target:Rn});Rn||(Rn=ht);for(let ri=0;ri<Dr;ri+=1){const yn=or[ri];let ao;yn.childNodes.length===0?ao=ne(yn,{target:Rn}):ao=ne(yn,{target:Rn,recursive:!0}),tn?tn=tn.union(ao):tn=ao}return tn}}H.getBBox=ne;function me(ht){let Ft=0,tn=0,On=0,Rn=0;if(ht){let nr=ht;for(;nr;)Ft+=nr.offsetLeft,tn+=nr.offsetTop,nr=nr.offsetParent,nr&&(Ft+=parseInt(d.Dom.getComputedStyle(nr,"borderLeft"),10),tn+=parseInt(d.Dom.getComputedStyle(nr,"borderTop"),10));On=ht.offsetWidth,Rn=ht.offsetHeight}return{left:Ft,top:tn,width:On,height:Rn}}H.getBoundingOffsetRect=me;function De(ht){const Ft=tn=>{const On=ht.getAttribute(tn),Rn=On?parseFloat(On):0;return Number.isNaN(Rn)?0:Rn};switch(ht instanceof SVGElement&&ht.nodeName.toLowerCase()){case"rect":return new v.Rectangle(Ft("x"),Ft("y"),Ft("width"),Ft("height"));case"circle":return new v.Ellipse(Ft("cx"),Ft("cy"),Ft("r"),Ft("r"));case"ellipse":return new v.Ellipse(Ft("cx"),Ft("cy"),Ft("rx"),Ft("ry"));case"polyline":{const tn=d.Dom.getPointsFromSvgElement(ht);return new v.Polyline(tn)}case"polygon":{const tn=d.Dom.getPointsFromSvgElement(ht);return tn.length>1&&tn.push(tn[0]),new v.Polyline(tn)}case"path":{let tn=ht.getAttribute("d");return v.Path.isValid(tn)||(tn=v.Path.normalize(tn)),v.Path.parse(tn)}case"line":return new v.Line(Ft("x1"),Ft("y1"),Ft("x2"),Ft("y2"));default:break}return ne(ht)}H.toGeometryShape=De;function ze(ht,Ft,tn,On){const Rn=v.Point.create(Ft),nr=v.Point.create(tn);On||(On=ht instanceof SVGSVGElement?ht:ht.ownerSVGElement);const or=d.Dom.scale(ht);ht.setAttribute("transform","");const Dr=ne(ht,{target:On}).scale(or.sx,or.sy),ri=d.Dom.createSVGTransform();ri.setTranslate(-Dr.x-Dr.width/2,-Dr.y-Dr.height/2);const yn=d.Dom.createSVGTransform(),ao=Rn.angleBetween(nr,Rn.clone().translate(1,0));ao&&yn.setRotate(ao,0,0);const Ks=d.Dom.createSVGTransform(),Qs=Rn.clone().move(nr,Dr.width/2);Ks.setTranslate(2*Rn.x-Qs.x,2*Rn.y-Qs.y);const Za=d.Dom.getTransformToElement(ht,On),_a=d.Dom.createSVGTransform();_a.setMatrix(Ks.matrix.multiply(yn.matrix.multiply(ri.matrix.multiply(Za.scale(or.sx,or.sy))))),ht.setAttribute("transform",d.Dom.matrixToTransformString(_a.matrix))}H.translateAndAutoOrient=ze;function it(ht){if(ht==null)return null;let Ft=ht;do{let tn=Ft.tagName;if(typeof tn!="string")return null;if(tn=tn.toUpperCase(),d.Dom.hasClass(Ft,"x6-port"))Ft=Ft.nextElementSibling;else if(tn==="G")Ft=Ft.firstElementChild;else if(tn==="TITLE")Ft=Ft.nextElementSibling;else break}while(Ft);return Ft}H.findShapeNode=it;function Pt(ht){const Ft=it(ht);if(!d.Dom.isSVGGraphicsElement(Ft)){if(d.Dom.isHTMLElement(ht)){const{left:Rn,top:nr,width:or,height:Dr}=me(ht);return new v.Rectangle(Rn,nr,or,Dr)}return new v.Rectangle(0,0,0,0)}return De(Ft).bbox()||v.Rectangle.create()}H.getBBoxV2=Pt})(er||(er={}));const Kn={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},qr={highlight(H,n,f){const p=xi.getHighlighterId(n,f);if(xi.hasCache(p))return;f=d.ObjectExt.defaultsDeep({},f,Kn);const w=d.Vector.create(n);let k,ne;try{k=w.toPathData()}catch(it){ne=er.bbox(w.node,!0),k=d.Dom.rectToPathData(Object.assign(Object.assign({},f),ne))}const me=d.Dom.createSvgElement("path");if(d.Dom.attr(me,Object.assign({d:k,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},f.attrs?d.Dom.kebablizeAttrs(f.attrs):null)),H.isEdgeElement(n))d.Dom.attr(me,"d",H.getConnectionPathData());else{let it=w.getTransformToElement(H.container);const Pt=f.padding;if(Pt){ne==null&&(ne=er.bbox(w.node,!0));const ht=ne.x+ne.width/2,Ft=ne.y+ne.height/2;ne=er.transformRectangle(ne,it);const tn=Math.max(ne.width,1),On=Math.max(ne.height,1),Rn=(tn+Pt)/tn,nr=(On+Pt)/On,or=d.Dom.createSVGMatrix({a:Rn,b:0,c:0,d:nr,e:ht-Rn*ht,f:Ft-nr*Ft});it=it.multiply(or)}d.Dom.transform(me,it)}d.Dom.addClass(me,nt.prefix("highlight-stroke"));const De=H.cell,ze=()=>xi.removeHighlighter(p);De.on("removed",ze),De.model&&De.model.on("reseted",ze),H.container.appendChild(me),xi.setCache(p,me)},unhighlight(H,n,f){xi.removeHighlighter(xi.getHighlighterId(n,f))}};var xi;(function(H){function n(ne,me){return d.Dom.ensureId(ne),ne.id+JSON.stringify(me)}H.getHighlighterId=n;const f={};function p(ne,me){f[ne]=me}H.setCache=p;function w(ne){return f[ne]!=null}H.hasCache=w;function k(ne){const me=f[ne];me&&(d.Dom.remove(me),delete f[ne])}H.removeHighlighter=k})(xi||(xi={}));var Pn;(function(H){function n(f,p){if(typeof p.highlight!="function")throw new Error(`Highlighter '${f}' is missing required \`highlight()\` method`);if(typeof p.unhighlight!="function")throw new Error(`Highlighter '${f}' is missing required \`unhighlight()\` method`)}H.check=n})(Pn||(Pn={})),function(H){H.presets=a,H.registry=x.create({type:"highlighter"}),H.registry.register(H.presets,!0)}(Pn||(Pn={}));function $n(H,n={}){return new v.Point(d.NumberExt.normalizePercentage(n.x,H.width),d.NumberExt.normalizePercentage(n.y,H.height))}function Rr(H,n,f){return Object.assign({angle:n,position:H.toJSON()},f)}const Di=(H,n)=>H.map(({x:f,y:p,angle:w})=>Rr($n(n,{x:f,y:p}),w||0)),Jr=(H,n,f)=>{const p=f.start||0,w=f.step||20;return Vo(H,n,p,(k,ne)=>(k+.5-ne/2)*w)},$o=(H,n,f)=>{const p=f.start||0,w=f.step||360/H.length;return Vo(H,n,p,k=>k*w)};function Vo(H,n,f,p){const w=n.getCenter(),k=n.getTopCenter(),ne=n.width/n.height,me=v.Ellipse.fromRect(n),De=H.length;return H.map((ze,it)=>{const Pt=f+p(it,De),ht=k.clone().rotate(-Pt,w).scale(ne,1,w),Ft=ze.compensateRotate?-me.tangentTheta(ht):0;return(ze.dx||ze.dy)&&ht.translate(ze.dx||0,ze.dy||0),ze.dr&&ht.move(w,ze.dr),Rr(ht.round(),Ft,ze)})}var lo=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const Xi=(H,n,f)=>{const p=$n(n,f.start||n.getOrigin()),w=$n(n,f.end||n.getCorner());return Ae(H,p,w,f)},Ho=(H,n,f)=>Ae(H,n.getTopLeft(),n.getBottomLeft(),f),cs=(H,n,f)=>Ae(H,n.getTopRight(),n.getBottomRight(),f),li=(H,n,f)=>Ae(H,n.getTopLeft(),n.getTopRight(),f),xs=(H,n,f)=>Ae(H,n.getBottomLeft(),n.getBottomRight(),f);function Ae(H,n,f,p){const w=new v.Line(n,f),k=H.length;return H.map((ne,me)=>{var{strict:De}=ne,ze=lo(ne,["strict"]);const it=De||p.strict?(me+1)/(k+1):(me+.5)/k,Pt=w.pointAt(it);return(ze.dx||ze.dy)&&Pt.translate(ze.dx||0,ze.dy||0),Rr(Pt.round(),0,ze)})}var Ke;(function(H){H.presets=o,H.registry=x.create({type:"port layout"}),H.registry.register(H.presets,!0)})(Ke||(Ke={}));const pt={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Ht(H,n){const{x:f,y:p,angle:w,attrs:k}=n||{};return d.ObjectExt.defaultsDeep({},{angle:w,attrs:k,position:{x:f,y:p}},H,pt)}const an=(H,n,f)=>Ht({position:n.getTopLeft()},f),Ln=(H,n,f)=>Ht({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},f),wr=(H,n,f)=>Ht({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},f),yr=(H,n,f)=>Ht({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},f),ei=(H,n,f)=>Ht({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},f),Ii=(H,n,f)=>Uo(H,n,!1,f),to=(H,n,f)=>Uo(H,n,!0,f),Ji=(H,n,f)=>Oi(H,n,!1,f),Yi=(H,n,f)=>Oi(H,n,!0,f);function Uo(H,n,f,p){const w=p.offset!=null?p.offset:15,k=n.getCenter().theta(H),ne=Co(n);let me,De,ze,it,Pt=0;return k<ne[1]||k>ne[2]?(me=".3em",De=w,ze=0,it="start"):k<ne[0]?(me="0",De=0,ze=-w,f?(Pt=-90,it="start"):it="middle"):k<ne[3]?(me=".3em",De=-w,ze=0,it="end"):(me=".6em",De=0,ze=w,f?(Pt=90,it="start"):it="middle"),Ht({position:{x:Math.round(De),y:Math.round(ze)},angle:Pt,attrs:{".":{y:me,"text-anchor":it}}},p)}function Oi(H,n,f,p){const w=p.offset!=null?p.offset:15,k=n.getCenter().theta(H),ne=Co(n);let me,De,ze,it,Pt=0;return k<ne[1]||k>ne[2]?(me=".3em",De=-w,ze=0,it="end"):k<ne[0]?(me=".6em",De=0,ze=w,f?(Pt=90,it="start"):it="middle"):k<ne[3]?(me=".3em",De=w,ze=0,it="start"):(me="0em",De=0,ze=-w,f?(Pt=-90,it="start"):it="middle"),Ht({position:{x:Math.round(De),y:Math.round(ze)},angle:Pt,attrs:{".":{y:me,"text-anchor":it}}},p)}function Co(H){const n=H.getCenter(),f=n.theta(H.getTopLeft()),p=n.theta(H.getBottomLeft()),w=n.theta(H.getBottomRight()),k=n.theta(H.getTopRight());return[f,k,w,p]}const Fs=(H,n,f)=>qo(H.diff(n.getCenter()),!1,f),ss=(H,n,f)=>qo(H.diff(n.getCenter()),!0,f);function qo(H,n,f){const p=f.offset!=null?f.offset:20,w=new v.Point(0,0),k=-H.theta(w),ne=H.clone().move(w,p).diff(H).round();let me=".3em",De,ze=k;return(k+90)%180===0?(De=n?"end":"middle",!n&&k===-270&&(me="0em")):k>-270&&k<-90?(De="start",ze=k-180):De="end",Ht({position:ne.round().toJSON(),angle:n?ze:0,attrs:{".":{y:me,"text-anchor":De}}},f)}var js;(function(H){H.presets=l,H.registry=x.create({type:"port label layout"}),H.registry.register(H.presets,!0)})(js||(js={}));var Zs=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class Mo extends d.Basecoat{get priority(){return 2}get disposeContainer(){return!0}constructor(){super(),this.cid=la.uniqueId(),Mo.views[this.cid]=this}confirmUpdate(n,f){return 0}empty(n=this.container){return d.Dom.empty(n),this}unmount(n=this.container){return d.Dom.remove(n),this}remove(n=this.container){return n===this.container?(this.removeEventListeners(document),this.onRemove(),delete Mo.views[this.cid],this.disposeContainer&&this.unmount(n)):this.unmount(n),this}onRemove(){}setClass(n,f=this.container){f.classList.value=Array.isArray(n)?n.join(" "):n}addClass(n,f=this.container){return d.Dom.addClass(f,Array.isArray(n)?n.join(" "):n),this}removeClass(n,f=this.container){return d.Dom.removeClass(f,Array.isArray(n)?n.join(" "):n),this}setStyle(n,f=this.container){return d.Dom.css(f,n),this}setAttrs(n,f=this.container){return n!=null&&f!=null&&d.Dom.attr(f,n),this}findAttr(n,f=this.container){let p=f;for(;p&&p.nodeType===1;){const w=p.getAttribute(n);if(w!=null)return w;if(p===this.container)return null;p=p.parentNode}return null}find(n,f=this.container,p=this.selectors){return Mo.find(n,f,p).elems}findOne(n,f=this.container,p=this.selectors){const w=this.find(n,f,p);return w.length>0?w[0]:null}findByAttr(n,f=this.container){let p=f;for(;p&&p.getAttribute;){const w=p.getAttribute(n);if((w!=null||p===this.container)&&w!=="false")return p;p=p.parentNode}return null}getSelector(n,f){let p;if(n===this.container)return typeof f=="string"&&(p=`> ${f}`),p;if(n){const w=d.Dom.index(n)+1;p=`${n.tagName.toLowerCase()}:nth-child(${w})`,f&&(p+=` > ${f}`),p=this.getSelector(n.parentNode,p)}return p}prefixClassName(n){return nt.prefix(n)}delegateEvents(n,f){if(n==null)return this;f||this.undelegateEvents();const p=/^(\S+)\s*(.*)$/;return Object.keys(n).forEach(w=>{const k=w.match(p);if(k==null)return;const ne=this.getEventHandler(n[w]);typeof ne=="function"&&this.delegateEvent(k[1],k[2],ne)}),this}undelegateEvents(){return d.Dom.Event.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(n,f){return this.addEventListeners(document,n,f),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(n,f,p){return d.Dom.Event.on(this.container,n+this.getEventNamespace(),f,p),this}undelegateEvent(n,f,p){const w=n+this.getEventNamespace();return f==null?d.Dom.Event.off(this.container,w):typeof f=="string"?d.Dom.Event.off(this.container,w,f,p):d.Dom.Event.off(this.container,w,f),this}addEventListeners(n,f,p){if(f==null)return this;const w=this.getEventNamespace();return Object.keys(f).forEach(k=>{const ne=this.getEventHandler(f[k]);typeof ne=="function"&&d.Dom.Event.on(n,k+w,p,ne)}),this}removeEventListeners(n){return n!=null&&d.Dom.Event.off(n,this.getEventNamespace()),this}getEventNamespace(){return`.${nt.prefixCls}-event-${this.cid}`}getEventHandler(n){let f;if(typeof n=="string"){const p=this[n];typeof p=="function"&&(f=(...w)=>p.call(this,...w))}else f=(...p)=>n.call(this,...p);return f}getEventTarget(n,f={}){const{target:p,type:w,clientX:k=0,clientY:ne=0}=n;return f.fromPoint||w==="touchmove"||w==="touchend"?document.elementFromPoint(k,ne):p}stopPropagation(n){return this.setEventData(n,{propagationStopped:!0}),this}isPropagationStopped(n){return this.getEventData(n).propagationStopped===!0}getEventData(n){return this.eventData(n)}setEventData(n,f){return this.eventData(n,f)}eventData(n,f){if(n==null)throw new TypeError("Event object required");let p=n.data;const w=`__${this.cid}__`;return f==null?p==null?{}:p[w]||{}:(p==null&&(p=n.data={}),p[w]==null?p[w]=Object.assign({},f):p[w]=Object.assign(Object.assign({},p[w]),f),p[w])}normalizeEvent(n){return Mo.normalizeEvent(n)}dispose(){this.remove()}}Zs([Mo.dispose()],Mo.prototype,"dispose",null),function(H){function n(w,k){return k?d.Dom.createSvgElement(w||"g"):d.Dom.createElementNS(w||"div")}H.createElement=n;function f(w,k,ne){if(!w||w===".")return{elems:[k]};if(ne){const me=ne[w];if(me)return{elems:Array.isArray(me)?me:[me]}}if(nt.useCSSSelector){const me=w.includes(">")?`:scope ${w}`:w;return{isCSSSelector:!0,elems:Array.prototype.slice.call(k.querySelectorAll(me))}}return{elems:[]}}H.find=f;function p(w){let k=w;const ne=w.originalEvent,me=ne&&ne.changedTouches&&ne.changedTouches[0];if(me){for(const De in w)me[De]===void 0&&(me[De]=w[De]);k=me}return k}H.normalizeEvent=p}(Mo||(Mo={})),function(H){H.views={};function n(f){return H.views[f]||null}H.getView=n}(Mo||(Mo={}));var la;(function(H){let n=0;function f(){const p=`v${n}`;return n+=1,p}H.uniqueId=f})(la||(la={}));class X{constructor(n){this.view=n,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new d.Dictionary,this.pathCache={}}get(n){return this.elemCache.has(n)||this.elemCache.set(n,{}),this.elemCache.get(n)}getData(n){const f=this.get(n);return f.data||(f.data={}),f.data}getMatrix(n){const f=this.get(n);if(f.matrix==null){const p=this.view.container;f.matrix=d.Dom.getTransformToParentElement(n,p)}return d.Dom.createSVGMatrix(f.matrix)}getShape(n){const f=this.get(n);return f.shape==null&&(f.shape=er.toGeometryShape(n)),f.shape.clone()}getBoundingRect(n){const f=this.get(n);return f.boundingRect==null&&(f.boundingRect=er.getBBoxV2(n)),f.boundingRect.clone()}}var ve;(function(H){function n(ze){return ze!=null&&!f(ze)}H.isJSONMarkup=n;function f(ze){return ze!=null&&typeof ze=="string"}H.isStringMarkup=f;function p(ze){return ze==null||f(ze)?ze:d.ObjectExt.cloneDeep(ze)}H.clone=p;function w(ze){return`${ze}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}H.sanitize=w;function k(ze,it={ns:d.Dom.ns.svg}){const Pt=document.createDocumentFragment(),ht={},Ft={},tn=[{markup:Array.isArray(ze)?ze:[ze],parent:Pt,ns:it.ns}];for(;tn.length>0;){const On=tn.pop();let Rn=On.ns||d.Dom.ns.svg;const nr=On.markup,or=On.parent;nr.forEach(Dr=>{const ri=Dr.tagName;if(!ri)throw new TypeError("Invalid tagName");Dr.ns&&(Rn=Dr.ns);const yn=Rn?d.Dom.createElementNS(ri,Rn):d.Dom.createElement(ri),ao=Dr.attrs;ao&&d.Dom.attr(yn,d.Dom.kebablizeAttrs(ao));const Ks=Dr.style;Ks&&d.Dom.css(yn,Ks);const Qs=Dr.className;Qs!=null&&yn.setAttribute("class",Array.isArray(Qs)?Qs.join(" "):Qs),Dr.textContent&&(yn.textContent=Dr.textContent);const Za=Dr.selector;if(Za!=null){if(Ft[Za])throw new TypeError("Selector must be unique");Ft[Za]=yn}if(Dr.groupSelector){let da=Dr.groupSelector;Array.isArray(da)||(da=[da]),da.forEach(Ka=>{ht[Ka]||(ht[Ka]=[]),ht[Ka].push(yn)})}or.appendChild(yn);const _a=Dr.children;Array.isArray(_a)&&tn.push({ns:Rn,markup:_a,parent:yn})})}return Object.keys(ht).forEach(On=>{if(Ft[On])throw new Error("Ambiguous group selector");Ft[On]=ht[On]}),{fragment:Pt,selectors:Ft,groups:ht}}H.parseJSONMarkup=k;function ne(ze){return ze instanceof SVGElement?d.Dom.createSvgElement("g"):d.Dom.createElement("div")}function me(ze){if(f(ze)){const Ft=d.Vector.createVectors(ze),tn=Ft.length;if(tn===1)return{elem:Ft[0].node};if(tn>1){const On=ne(Ft[0].node);return Ft.forEach(Rn=>{On.appendChild(Rn.node)}),{elem:On}}return{}}const it=k(ze),Pt=it.fragment;let ht=null;return Pt.childNodes.length>1?(ht=ne(Pt.firstChild),ht.appendChild(Pt)):ht=Pt.firstChild,{elem:ht,selectors:it.selectors}}H.renderMarkup=me;function De(ze){const it=d.Vector.createVectors(ze),Pt=document.createDocumentFragment();for(let ht=0,Ft=it.length;ht<Ft;ht+=1){const tn=it[ht].node;Pt.appendChild(tn)}return{fragment:Pt,selectors:{}}}H.parseLabelStringMarkup=De})(ve||(ve={})),function(H){function n(f,p,w){if(f!=null){let k;const ne=f.tagName.toLowerCase();if(f===p)return typeof w=="string"?k=`> ${ne} > ${w}`:k=`> ${ne}`,k;const me=f.parentNode;if(me&&me.childNodes.length>1){const De=d.Dom.index(f)+1;k=`${ne}:nth-child(${De})`}else k=ne;return w&&(k+=` > ${w}`),n(f.parentNode,p,k)}return w}H.getSelector=n}(ve||(ve={})),function(H){function n(){return"g"}H.getPortContainerMarkup=n;function f(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}H.getPortMarkup=f;function p(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}H.getPortLabelMarkup=p}(ve||(ve={})),function(H){function n(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}H.getEdgeMarkup=n}(ve||(ve={})),function(H){function n(f=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:d.Dom.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:d.Dom.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:f?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}H.getForeignObjectMarkup=n}(ve||(ve={}));class Ie{constructor(n){this.view=n}get cell(){return this.view.cell}getDefinition(n){return this.cell.getAttrDefinition(n)}processAttrs(n,f){let p,w,k,ne;const me=[];return Object.keys(f).forEach(De=>{const ze=f[De],it=this.getDefinition(De),Pt=d.FunctionExt.call(ct.isValidDefinition,this.view,it,ze,{elem:n,attrs:f,cell:this.cell,view:this.view});if(it&&Pt)typeof it=="string"?(p==null&&(p={}),p[it]=ze):ze!==null&&me.push({name:De,definition:it});else{p==null&&(p={});const ht=d.Dom.CASE_SENSITIVE_ATTR.includes(De)?De:d.StringExt.kebabCase(De);p[ht]=ze}}),me.forEach(({name:De,definition:ze})=>{const it=f[De];typeof ze.set=="function"&&(w==null&&(w={}),w[De]=it),typeof ze.offset=="function"&&(k==null&&(k={}),k[De]=it),typeof ze.position=="function"&&(ne==null&&(ne={}),ne[De]=it)}),{raw:f,normal:p,set:w,offset:k,position:ne}}mergeProcessedAttrs(n,f){n.set=Object.assign(Object.assign({},n.set),f.set),n.position=Object.assign(Object.assign({},n.position),f.position),n.offset=Object.assign(Object.assign({},n.offset),f.offset);const p=n.normal&&n.normal.transform;p!=null&&f.normal&&(f.normal.transform=p),n.normal=f.normal}findAttrs(n,f,p,w){const k=[],ne=new d.Dictionary;return Object.keys(n).forEach(me=>{const De=n[me];if(!d.ObjectExt.isPlainObject(De))return;const{isCSSSelector:ze,elems:it}=Mo.find(me,f,w);p[me]=it;for(let Pt=0,ht=it.length;Pt<ht;Pt+=1){const Ft=it[Pt],tn=w&&w[me]===Ft,On=ne.get(Ft);if(On){On.array||(k.push(Ft),On.array=!0,On.attrs=[On.attrs],On.priority=[On.priority]);const Rn=On.attrs,nr=On.priority;if(tn)Rn.unshift(De),nr.unshift(-1);else{const or=d.ArrayExt.sortedIndex(nr,ze?-1:ht);Rn.splice(or,0,De),nr.splice(or,0,ht)}}else ne.set(Ft,{elem:Ft,attrs:De,priority:tn?-1:ht,array:!1})}}),k.forEach(me=>{const De=ne.get(me),ze=De.attrs;De.attrs=ze.reduceRight((it,Pt)=>d.ObjectExt.merge(it,Pt),{})}),ne}updateRelativeAttrs(n,f,p){const w=f.raw||{};let k=f.normal||{};const ne=f.set,me=f.position,De=f.offset,ze=()=>({elem:n,cell:this.cell,view:this.view,attrs:w,refBBox:p.clone()});if(ne!=null&&Object.keys(ne).forEach(Rn=>{const nr=ne[Rn],or=this.getDefinition(Rn);if(or!=null){const Dr=d.FunctionExt.call(or.set,this.view,nr,ze());typeof Dr=="object"?k=Object.assign(Object.assign({},k),Dr):Dr!=null&&(k[Rn]=Dr)}}),n instanceof HTMLElement){this.view.setAttrs(k,n);return}const it=k.transform,Pt=it?`${it}`:null,ht=d.Dom.transformStringToMatrix(Pt),Ft=new v.Point(ht.e,ht.f);it&&(delete k.transform,ht.e=0,ht.f=0);let tn=!1;me!=null&&Object.keys(me).forEach(Rn=>{const nr=me[Rn],or=this.getDefinition(Rn);if(or!=null){const Dr=d.FunctionExt.call(or.position,this.view,nr,ze());Dr!=null&&(tn=!0,Ft.translate(v.Point.create(Dr)))}}),this.view.setAttrs(k,n);let On=!1;if(De!=null){const Rn=this.view.getBoundingRectOfElement(n);if(Rn.width>0&&Rn.height>0){const nr=er.transformRectangle(Rn,ht);Object.keys(De).forEach(or=>{const Dr=De[or],ri=this.getDefinition(or);if(ri!=null){const yn=d.FunctionExt.call(ri.offset,this.view,Dr,{elem:n,cell:this.cell,view:this.view,attrs:w,refBBox:nr});yn!=null&&(On=!0,Ft.translate(v.Point.create(yn)))}})}}(it!=null||tn||On)&&(Ft.round(1),ht.e=Ft.x,ht.f=Ft.y,n.setAttribute("transform",d.Dom.matrixToTransformString(ht)))}update(n,f,p){const w={},k=this.findAttrs(p.attrs||f,n,w,p.selectors),ne=p.attrs?this.findAttrs(f,n,w,p.selectors):k,me=[];k.each(it=>{const Pt=it.elem,ht=it.attrs,Ft=this.processAttrs(Pt,ht);if(Ft.set==null&&Ft.position==null&&Ft.offset==null)this.view.setAttrs(Ft.normal,Pt);else{const tn=ne.get(Pt),On=tn?tn.attrs:null,Rn=On&&ht.ref==null?On.ref:ht.ref;let nr;if(Rn){if(nr=(w[Rn]||this.view.find(Rn,n,p.selectors))[0],!nr)throw new Error(`"${Rn}" reference does not exist.`)}else nr=null;const or={node:Pt,refNode:nr,attributes:On,processedAttributes:Ft},Dr=me.findIndex(ri=>ri.refNode===Pt);Dr>-1?me.splice(Dr,0,or):me.push(or)}});const De=new d.Dictionary;let ze;me.forEach(it=>{const Pt=it.node,ht=it.refNode;let Ft;const tn=ht!=null&&p.rotatableNode!=null&&d.Dom.contains(p.rotatableNode,ht);if(ht&&(Ft=De.get(ht)),!Ft){const nr=tn?p.rotatableNode:n;Ft=ht?er.getBBox(ht,{target:nr}):p.rootBBox,ht&&De.set(ht,Ft)}let On;p.attrs&&it.attributes?(On=this.processAttrs(Pt,it.attributes),this.mergeProcessedAttrs(On,it.processedAttributes)):On=it.processedAttributes;let Rn=Ft;tn&&p.rotatableNode!=null&&!p.rotatableNode.contains(Pt)&&(ze||(ze=d.Dom.transformStringToMatrix(d.Dom.attr(p.rotatableNode,"transform"))),Rn=er.transformRectangle(Ft,ze)),this.updateRelativeAttrs(Pt,On,Rn)})}}class ke{get cell(){return this.view.cell}constructor(n,f,p=[]){this.view=n;const w={},k={};let ne=0;Object.keys(f).forEach(De=>{let ze=f[De];Array.isArray(ze)||(ze=[ze]),ze.forEach(it=>{let Pt=w[it];Pt||(ne+=1,Pt=w[it]=1<<ne),k[De]|=Pt})});let me=p;if(Array.isArray(me)||(me=[me]),me.forEach(De=>{w[De]||(ne+=1,w[De]=1<<ne)}),ne>25)throw new Error("Maximum number of flags exceeded.");this.flags=w,this.attrs=k,this.bootstrap=p}getFlag(n){const f=this.flags;return f==null?0:Array.isArray(n)?n.reduce((p,w)=>p|f[w],0):f[n]|0}hasAction(n,f){return n&this.getFlag(f)}removeAction(n,f){return n^n&this.getFlag(f)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let n=0;return this.attrs&&Object.keys(this.attrs).forEach(f=>{this.cell.hasChanged(f)&&(n|=this.attrs[f])}),n}}var st=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k},P=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class W extends Mo{static getDefaults(){return this.defaults}static config(n){this.defaults=this.getOptions(n)}static getOptions(n){const f=(ze,it)=>it!=null?d.ArrayExt.uniq([...Array.isArray(ze)?ze:[ze],...Array.isArray(it)?it:[it]]):Array.isArray(ze)?[...ze]:[ze],p=d.ObjectExt.cloneDeep(this.getDefaults()),{bootstrap:w,actions:k,events:ne,documentEvents:me}=n,De=P(n,["bootstrap","actions","events","documentEvents"]);return w&&(p.bootstrap=f(p.bootstrap,w)),k&&Object.entries(k).forEach(([ze,it])=>{const Pt=p.actions[ze];it&&Pt?p.actions[ze]=f(Pt,it):it&&(p.actions[ze]=f(it))}),ne&&(p.events=Object.assign(Object.assign({},p.events),ne)),n.documentEvents&&(p.documentEvents=Object.assign(Object.assign({},p.documentEvents),me)),d.ObjectExt.merge(p,De)}get[Symbol.toStringTag](){return W.toStringTag}constructor(n,f={}){super(),this.cell=n,this.options=this.ensureOptions(f),this.graph=this.options.graph,this.attr=new Ie(this),this.flag=new ke(this,this.options.actions,this.options.bootstrap),this.cache=new X(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(n){return this.getConstructor().getOptions(n)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return Mo.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(n){if(this.container!==n){this.undelegateEvents(),this.container=n,this.options.events!=null&&this.delegateEvents(this.options.events);const f=this.getContainerAttrs();f!=null&&this.setAttrs(f,n);const p=this.getContainerStyle();p!=null&&this.setStyle(p,n);const w=this.getContainerClassName();w!=null&&this.addClass(w,n)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(n,f={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(n){return this.flag.getFlag(n)}hasAction(n,f){return this.flag.hasAction(n,f)}removeAction(n,f){return this.flag.removeAction(n,f)}handleAction(n,f,p,w){if(this.hasAction(n,f)){p();const k=[f];return w&&(typeof w=="string"?k.push(w):k.push(...w)),this.removeAction(n,k)}return n}setup(){this.cell.on("changed",this.onCellChanged,this)}onCellChanged({options:n}){this.onAttrsChange(n)}onAttrsChange(n){let f=this.flag.getChangedFlag();n.updated||!f||(n.dirty&&this.hasAction(f,"update")&&(f|=this.getFlag("render")),n.toolId&&(n.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,f,n))}parseJSONMarkup(n,f){const p=ve.parseJSONMarkup(n),w=p.selectors,k=this.rootSelector;if(f&&k){if(w[k])throw new Error("Invalid root selector");w[k]=f}return p}can(n){let f=this.graph.options.interacting;if(typeof f=="function"&&(f=d.FunctionExt.call(f,this.graph,this)),typeof f=="object"){let p=f[n];return typeof p=="function"&&(p=d.FunctionExt.call(p,this.graph,this)),p!==!1}return typeof f=="boolean"?f:!1}cleanCache(){return this.cache.clean(),this}getCache(n){return this.cache.get(n)}getDataOfElement(n){return this.cache.getData(n)}getMatrixOfElement(n){return this.cache.getMatrix(n)}getShapeOfElement(n){return this.cache.getShape(n)}getBoundingRectOfElement(n){return this.cache.getBoundingRect(n)}getBBoxOfElement(n){const f=this.getBoundingRectOfElement(n),p=this.getMatrixOfElement(n),w=this.getRootRotatedMatrix(),k=this.getRootTranslatedMatrix();return er.transformRectangle(f,k.multiply(w).multiply(p))}getUnrotatedBBoxOfElement(n){const f=this.getBoundingRectOfElement(n),p=this.getMatrixOfElement(n),w=this.getRootTranslatedMatrix();return er.transformRectangle(f,w.multiply(p))}getBBox(n={}){let f;if(n.useCellGeometry){const p=this.cell,w=p.isNode()?p.getAngle():0;f=p.getBBox().bbox(w)}else f=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(f)}getRootTranslatedMatrix(){const n=this.cell,f=n.isNode()?n.getPosition():{x:0,y:0};return d.Dom.createSVGMatrix().translate(f.x,f.y)}getRootRotatedMatrix(){let n=d.Dom.createSVGMatrix();const f=this.cell,p=f.isNode()?f.getAngle():0;if(p){const w=f.getBBox(),k=w.width/2,ne=w.height/2;n=n.translate(k,ne).rotate(p).translate(-k,-ne)}return n}findMagnet(n=this.container){return this.findByAttr("magnet",n)}updateAttrs(n,f,p={}){p.rootBBox==null&&(p.rootBBox=new v.Rectangle),p.selectors==null&&(p.selectors=this.selectors),this.attr.update(n,f,p)}isEdgeElement(n){return this.cell.isEdge()&&(n==null||n===this.container)}prepareHighlight(n,f={}){const p=n||this.container;return f.partial=p===this.container,p}highlight(n,f={}){const p=this.prepareHighlight(n,f);return this.notify("cell:highlight",{magnet:p,options:f,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:p,options:f,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:p,options:f,view:this,node:this.cell,cell:this.cell}),this}unhighlight(n,f={}){const p=this.prepareHighlight(n,f);return this.notify("cell:unhighlight",{magnet:p,options:f,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:p,options:f,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:p,options:f,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(n,f){}getEdgeTerminal(n,f,p,w,k){const ne=this.cell,me=this.findAttr("port",n),De=n.getAttribute("data-selector"),ze={cell:ne.id};return De!=null&&(ze.magnet=De),me!=null?(ze.port=me,ne.isNode()&&!ne.hasPort(me)&&De==null&&(ze.selector=this.getSelector(n))):De==null&&this.container!==n&&(ze.selector=this.getSelector(n)),ze}getMagnetFromEdgeTerminal(n){const f=this.cell,p=this.container,w=n.port;let k=n.magnet,ne;return w!=null&&f.isNode()&&f.hasPort(w)?ne=this.findPortElem(w,k)||p:(k||(k=n.selector),!k&&w!=null&&(k=`[port="${w}"]`),ne=this.findOne(k,p,this.selectors)),ne}hasTools(n){const f=this.tools;return f==null?!1:n==null?!0:f.name===n}addTools(n){if(this.removeTools(),n){if(!this.can("toolsAddable"))return this;const f=ye.isToolsView(n)?n:new ye(n);this.tools=f,f.config({view:this}),f.mount()}return this}updateTools(n={}){return this.tools&&this.tools.update(n),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const n=this.cell.getTools();return this.addTools(n),this}notify(n,f){return this.trigger(n,f),this.graph.trigger(n,f),this}getEventArgs(n,f,p){const w=this,k=w.cell;return f==null||p==null?{e:n,view:w,cell:k}:{e:n,x:f,y:p,view:w,cell:k}}onClick(n,f,p){this.notify("cell:click",this.getEventArgs(n,f,p))}onDblClick(n,f,p){this.notify("cell:dblclick",this.getEventArgs(n,f,p))}onContextMenu(n,f,p){this.notify("cell:contextmenu",this.getEventArgs(n,f,p))}onMouseDown(n,f,p){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(n,f,p))}onMouseUp(n,f,p){this.notify("cell:mouseup",this.getEventArgs(n,f,p)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(n,f,p){this.notify("cell:mousemove",this.getEventArgs(n,f,p))}onMouseOver(n){this.notify("cell:mouseover",this.getEventArgs(n))}onMouseOut(n){this.notify("cell:mouseout",this.getEventArgs(n))}onMouseEnter(n){this.notify("cell:mouseenter",this.getEventArgs(n))}onMouseLeave(n){this.notify("cell:mouseleave",this.getEventArgs(n))}onMouseWheel(n,f,p,w){this.notify("cell:mousewheel",Object.assign({delta:w},this.getEventArgs(n,f,p)))}onCustomEvent(n,f,p,w){this.notify("cell:customevent",Object.assign({name:f},this.getEventArgs(n,p,w))),this.notify(f,Object.assign({},this.getEventArgs(n,p,w)))}onMagnetMouseDown(n,f,p,w){}onMagnetDblClick(n,f,p,w){}onMagnetContextMenu(n,f,p,w){}onLabelMouseDown(n,f,p){}checkMouseleave(n){const f=this.getEventTarget(n,{fromPoint:!0}),p=this.graph.findViewByElem(f);p!==this&&(this.onMouseLeave(n),p&&p.onMouseEnter(n))}dispose(){this.cell.off("changed",this.onCellChanged,this)}}W.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},st([W.dispose()],W.prototype,"dispose",null),function(H){H.Flag=ke,H.Attr=Ie}(W||(W={})),function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&typeof w.isNodeView=="function"&&typeof w.isEdgeView=="function"&&typeof w.confirmUpdate=="function"}H.isCellView=n}(W||(W={})),function(H){function n(p){return function(w){w.config({priority:p})}}H.priority=n;function f(p){return function(w){w.config({bootstrap:p})}}H.bootstrap=f}(W||(W={})),function(H){H.registry=x.create({type:"view"})}(W||(W={}));class ye extends Mo{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return ye.toStringTag}constructor(n={}){super(),this.svgContainer=this.createContainer(!0,n),this.htmlContainer=this.createContainer(!1,n),this.config(n)}createContainer(n,f){const p=n?Mo.createElement("g",!0):Mo.createElement("div",!1);return d.Dom.addClass(p,this.prefixClassName("cell-tools")),f.className&&d.Dom.addClass(p,f.className),p}config(n){if(this.options=Object.assign(Object.assign({},this.options),n),!W.isCellView(n.view)||n.view===this.cellView)return this;this.cellView=n.view,this.cell.isEdge()?(d.Dom.addClass(this.svgContainer,this.prefixClassName("edge-tools")),d.Dom.addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(d.Dom.addClass(this.svgContainer,this.prefixClassName("node-tools")),d.Dom.addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const f=this.options.items;if(!Array.isArray(f))return this;this.tools=[];const p=[];f.forEach(w=>{ye.ToolItem.isToolItem(w)?w.name==="vertices"?p.unshift(w):p.push(w):(typeof w=="object"?w.name:w)==="vertices"?p.unshift(w):p.push(w)});for(let w=0;w<p.length;w+=1){const k=p[w];let ne;if(ye.ToolItem.isToolItem(k))ne=k;else{const me=typeof k=="object"?k.name:k,De=typeof k=="object"?k.args||{}:{};if(me){if(this.cell.isNode()){const ze=_s.registry.get(me);if(ze)ne=new ze(De);else return _s.registry.onNotFound(me)}else if(this.cell.isEdge()){const ze=Pa.registry.get(me);if(ze)ne=new ze(De);else return Pa.registry.onNotFound(me)}}}ne&&(ne.config(this.cellView,this),ne.render(),(ne.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(ne.container),this.tools.push(ne))}return this}update(n={}){const f=this.tools;return f&&f.forEach(p=>{n.toolId!==p.cid&&p.isVisible()&&p.update()}),this}focus(n){const f=this.tools;return f&&f.forEach(p=>{n===p?p.show():p.hide()}),this}blur(n){const f=this.tools;return f&&f.forEach(p=>{p!==n&&!p.isVisible()&&(p.show(),p.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const n=this.tools;return n&&(n.forEach(f=>f.remove()),this.tools=null),d.Dom.remove(this.svgContainer),d.Dom.remove(this.htmlContainer),super.remove()}mount(){const n=this.tools,f=this.cellView;if(f&&n){const p=n.some(k=>k.options.isSVGElement!==!1),w=n.some(k=>k.options.isSVGElement===!1);p&&(this.options.local?f.container:f.graph.view.decorator).appendChild(this.svgContainer),w&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&w.graph!=null&&w.cell!=null&&typeof w.config=="function"&&typeof w.update=="function"&&typeof w.focus=="function"&&typeof w.blur=="function"&&typeof w.show=="function"&&typeof w.hide=="function"}H.isToolsView=n})(ye||(ye={})),function(H){class n extends Mo{static getDefaults(){return this.defaults}static config(p){this.defaults=this.getOptions(p)}static getOptions(p){return d.ObjectExt.merge(d.ObjectExt.cloneDeep(this.getDefaults()),p)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return n.toStringTag}constructor(p={}){super(),this.visible=!0,this.options=this.getOptions(p),this.container=Mo.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),d.Dom.addClass(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&d.Dom.addClass(this.container,this.options.className),this.init()}init(){}getOptions(p){return this.constructor.getOptions(p)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(p,w){return this.cellView=p,this.parent=w,this.stamp(this.container),this.cell.isEdge()?d.Dom.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&d.Dom.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const p=this.options.markup;if(p){const w=ve.parseJSONMarkup(p);this.container.appendChild(w.fragment),this.childNodes=w.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(p){p&&p.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const p=this.options.focusOpacity;return p!=null&&Number.isFinite(p)&&(this.container.style.opacity=`${p}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(p){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(p,this.cellView)}}n.defaults={isSVGElement:!0,tagName:"g"},H.ToolItem=n,function(f){let p=0;function w(ne){return ne?d.StringExt.pascalCase(ne):(p+=1,`CustomTool${p}`)}function k(ne){const me=d.ObjectExt.createClass(w(ne.name),this);return me.config(ne),me}f.define=k}(n=H.ToolItem||(H.ToolItem={})),function(f){f.toStringTag=`X6.${f.name}`;function p(w){if(w==null)return!1;if(w instanceof f)return!0;const k=w[Symbol.toStringTag],ne=w;return(k==null||k===f.toStringTag)&&ne.graph!=null&&ne.cell!=null&&typeof ne.config=="function"&&typeof ne.update=="function"&&typeof ne.focus=="function"&&typeof ne.blur=="function"&&typeof ne.show=="function"&&typeof ne.hide=="function"&&typeof ne.isVisible=="function"}f.isToolItem=p}(n=H.ToolItem||(H.ToolItem={}))}(ye||(ye={}));const Se=H=>H;function Be(H,n){return n===0?"0%":`${Math.round(H/n*100)}%`}function Fe(H){return(f,p,w,k)=>p.isEdgeElement(w)?Mt(H,f,p,w,k):qe(H,f,p,w,k)}function qe(H,n,f,p,w){const k=f.cell,ne=k.getAngle(),me=f.getUnrotatedBBoxOfElement(p),De=k.getBBox().getCenter(),ze=v.Point.create(w).rotate(ne,De);let it=ze.x-me.x,Pt=ze.y-me.y;return H&&(it=Be(it,me.width),Pt=Be(Pt,me.height)),n.anchor={name:"topLeft",args:{dx:it,dy:Pt,rotate:!0}},n}function Mt(H,n,f,p,w){const k=f.getConnection();if(!k)return n;const ne=k.closestPointLength(w);if(H){const me=k.length();n.anchor={name:"ratio",args:{ratio:ne/me}}}else n.anchor={name:"length",args:{length:ne}};return n}const Lt=Fe(!0),vn=Fe(!1);var Zn;(function(H){H.presets=r,H.registry=x.create({type:"connection strategy"}),H.registry.register(H.presets,!0)})(Zn||(Zn={}));function Qn(H,n,f,p){return d.FunctionExt.call(Zn.presets.pinRelative,this.graph,{},n,f,H,this.cell,p,{}).anchor}function jn(H,n){return n?H.cell.getBBox():H.cell.isEdge()?H.getConnection().bbox():H.getUnrotatedBBoxOfElement(H.container)}class pr extends ye.ToolItem{onRender(){d.Dom.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const f=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();d.Dom.transform(this.container,f,{absolute:!0})}getNodeMatrix(){const n=this.cellView,f=this.options;let{x:p=0,y:w=0}=f;const{offset:k,useCellGeometry:ne,rotate:me}=f;let De=jn(n,ne);const ze=n.cell.getAngle();me||(De=De.bbox(ze));let it=0,Pt=0;typeof k=="number"?(it=k,Pt=k):typeof k=="object"&&(it=k.x,Pt=k.y),p=d.NumberExt.normalizePercentage(p,De.width),w=d.NumberExt.normalizePercentage(w,De.height);let ht=d.Dom.createSVGMatrix().translate(De.x+De.width/2,De.y+De.height/2);return me&&(ht=ht.rotate(ze)),ht=ht.translate(p+it-De.width/2,w+Pt-De.height/2),ht}getEdgeMatrix(){const n=this.cellView,f=this.options,{offset:p=0,distance:w=0,rotate:k}=f;let ne,me,De;const ze=d.NumberExt.normalizePercentage(w,1);ze>=0&&ze<=1?ne=n.getTangentAtRatio(ze):ne=n.getTangentAtLength(ze),ne?(me=ne.start,De=ne.vector().vectorAngle(new v.Point(1,0))||0):(me=n.getConnection().start,De=0);let it=d.Dom.createSVGMatrix().translate(me.x,me.y).rotate(De);return typeof p=="object"?it=it.translate(p.x||0,p.y||0):it=it.translate(0,p),k||(it=it.rotate(-De)),it}onMouseDown(n){if(this.guard(n))return;n.stopPropagation(),n.preventDefault();const f=this.options.onClick;typeof f=="function"&&d.FunctionExt.call(f,this.cellView,{e:n,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(H){H.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(pr||(pr={})),function(H){H.Remove=H.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:n,btn:f}){f.parent.remove(),n.cell.remove({ui:!0,toolId:f.cid})}})}(pr||(pr={}));var vi=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class co extends ye.ToolItem{onRender(){if(d.Dom.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const n=this.options.attrs,{class:f}=n,p=vi(n,["class"]);d.Dom.attr(this.container,d.Dom.kebablizeAttrs(p)),f&&d.Dom.addClass(this.container,f)}this.update()}update(){const n=this.cellView,f=this.options,{useCellGeometry:p,rotate:w}=f,k=d.NumberExt.normalizeSides(f.padding);let ne=jn(n,p).moveAndExpand({x:-k.left,y:-k.top,width:k.left+k.right,height:k.top+k.bottom});const me=n.cell;if(me.isNode()){const De=me.getAngle();if(De)if(w){const ze=me.getBBox().getCenter();d.Dom.rotate(this.container,De,ze.x,ze.y,{absolute:!0})}else ne=ne.bbox(De)}return d.Dom.attr(this.container,ne.toJSON()),this}}(function(H){H.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(co||(co={}));class di extends ye.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const n=this.handles;this.handles=[],n&&n.forEach(f=>{this.stopHandleListening(f),f.remove()})}renderHandles(){const n=this.vertices;for(let f=0,p=n.length;f<p;f+=1){const w=n[f],k=this.options.createHandle,ne=this.options.processHandle,me=k({index:f,graph:this.graph,guard:De=>this.guard(De),attrs:this.options.attrs||{}});ne&&ne(me),me.updatePosition(w.x,w.y),this.stamp(me.container),this.container.appendChild(me.container),this.handles.push(me),this.startHandleListening(me)}}updateHandles(){const n=this.vertices;for(let f=0,p=n.length;f<p;f+=1){const w=n[f],k=this.handles[f];k&&k.updatePosition(w.x,w.y)}}updatePath(){const n=this.childNodes.connection;n&&n.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(n){const f=this.cellView;f.can("vertexMovable")&&(n.on("change",this.onHandleChange,this),n.on("changing",this.onHandleChanging,this),n.on("changed",this.onHandleChanged,this)),f.can("vertexDeletable")&&n.on("remove",this.onHandleRemove,this)}stopHandleListening(n){const f=this.cellView;f.can("vertexMovable")&&(n.off("change",this.onHandleChange,this),n.off("changing",this.onHandleChanging,this),n.off("changed",this.onHandleChanged,this)),f.can("vertexDeletable")&&n.off("remove",this.onHandleRemove,this)}getNeighborPoints(n){const f=this.cellView,p=this.vertices,w=n>0?p[n-1]:f.sourceAnchor,k=n<p.length-1?p[n+1]:f.targetAnchor;return{prev:v.Point.create(w),next:v.Point.create(k)}}getMouseEventArgs(n){const f=this.normalizeEvent(n),{x:p,y:w}=this.graph.snapToGrid(f.clientX,f.clientY);return{e:f,x:p,y:w}}onHandleChange({e:n}){this.focus();const f=this.cellView;if(f.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:p,x:w,y:k}=this.getMouseEventArgs(n);this.eventData(p,{start:{x:w,y:k}}),f.notifyMouseDown(p,w,k)}}onHandleChanging({handle:n,e:f}){const p=this.cellView,w=n.options.index,{e:k,x:ne,y:me}=this.getMouseEventArgs(f),De={x:ne,y:me};this.snapVertex(De,w),p.cell.setVertexAt(w,De,{ui:!0,toolId:this.cid}),n.updatePosition(De.x,De.y),this.options.stopPropagation||p.notifyMouseMove(k,ne,me)}stopBatch(n){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),n&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}onHandleChanged({e:n}){const f=this.options,p=this.cellView;if(f.addable&&this.updatePath(),!f.removeRedundancies){this.stopBatch(this.eventData(n).vertexAdded);return}p.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(n).vertexAdded);const{e:k,x:ne,y:me}=this.getMouseEventArgs(n);if(!this.options.stopPropagation){p.notifyMouseUp(k,ne,me);const{start:De}=this.eventData(k);if(De){const{x:ze,y:it}=De;ze===ne&&it===me&&p.onClick(k,ne,me)}}p.checkMouseleave(k),f.onChanged&&f.onChanged({edge:p.cell,edgeView:p})}snapVertex(n,f){const p=this.options.snapRadius||0;if(p>0){const w=this.getNeighborPoints(f),k=w.prev,ne=w.next;Math.abs(n.x-k.x)<p?n.x=k.x:Math.abs(n.x-ne.x)<p&&(n.x=ne.x),Math.abs(n.y-k.y)<p?n.y=w.prev.y:Math.abs(n.y-ne.y)<p&&(n.y=ne.y)}}onHandleRemove({handle:n,e:f}){if(this.options.removable){const p=n.options.index,w=this.cellView;w.cell.removeVertexAt(p,{ui:!0}),this.options.addable&&this.updatePath(),w.checkMouseleave(this.normalizeEvent(f))}}allowAddVertex(n){const f=this.guard(n),p=this.options.addable&&this.cellView.can("vertexAddable"),w=this.options.modifiers?d.ModifierKey.isMatch(n,this.options.modifiers):!0;return!f&&p&&w}onPathMouseDown(n){const f=this.cellView;if(!this.allowAddVertex(n))return;n.stopPropagation(),n.preventDefault();const p=this.normalizeEvent(n),w=this.graph.snapToGrid(p.clientX,p.clientY).toJSON();f.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const k=f.getVertexIndex(w.x,w.y);this.snapVertex(w,k),f.cell.insertVertex(w,k,{ui:!0,toolId:this.cid}),this.render();const ne=this.handles[k];this.eventData(p,{vertexAdded:!0}),ne.onMouseDown(p)}onRemove(){this.resetHandles()}}(function(H){class n extends Mo{get graph(){return this.options.graph}constructor(p){super(),this.options=p,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=Mo.createElement("circle",!0);const p=this.options.attrs;if(typeof p=="function"){const w=H.getDefaults();this.setAttrs(Object.assign(Object.assign({},w.attrs),p(this)))}else this.setAttrs(p);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(p,w){this.setAttrs({cx:p,cy:w})}onMouseDown(p){this.options.guard(p)||(p.stopPropagation(),p.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},p.data),this.emit("change",{e:p,handle:this}))}onMouseMove(p){this.emit("changing",{e:p,handle:this})}onMouseUp(p){this.emit("changed",{e:p,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(p){this.emit("remove",{e:p,handle:this})}}H.Handle=n})(di||(di={})),function(H){const n=nt.prefix("edge-tool-vertex-path");H.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:f=>new H.Handle(f),markup:[{tagName:"path",selector:"connection",className:n,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${n}`]:"onPathMouseDown",[`touchstart .${n}`]:"onPathMouseDown"}})}(di||(di={}));class Zo extends ye.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){d.Dom.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const n=this.cellView,f=[...this.vertices];f.unshift(n.sourcePoint),f.push(n.targetPoint);for(let p=0,w=f.length;p<w-1;p+=1){const k=f[p],ne=f[p+1],me=this.renderHandle(k,ne,p);this.stamp(me.container),this.handles.push(me)}return this}renderHandle(n,f,p){const w=this.options.createHandle({index:p,graph:this.graph,guard:k=>this.guard(k),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(w),this.updateHandle(w,n,f),this.container.appendChild(w.container),this.startHandleListening(w),w}startHandleListening(n){n.on("change",this.onHandleChange,this),n.on("changing",this.onHandleChanging,this),n.on("changed",this.onHandleChanged,this)}stopHandleListening(n){n.off("change",this.onHandleChange,this),n.off("changing",this.onHandleChanging,this),n.off("changed",this.onHandleChanged,this)}resetHandles(){const n=this.handles;this.handles=[],n&&n.forEach(f=>{this.stopHandleListening(f),f.remove()})}shiftHandleIndexes(n){const f=this.handles;for(let p=0,w=f.length;p<w;p+=1)f[p].options.index+=n}resetAnchor(n,f){const p=this.cellView.cell,w={ui:!0,toolId:this.cid};f?p.prop([n,"anchor"],f,w):p.removeProp([n,"anchor"],w)}snapHandle(n,f,p){const w=n.options.axis,k=n.options.index,De=this.cellView.cell.getVertices(),ze=De[k-2]||p.sourceAnchor,it=De[k+1]||p.targetAnchor,Pt=this.options.snapRadius;return Math.abs(f[w]-ze[w])<Pt?f[w]=ze[w]:Math.abs(f[w]-it[w])<Pt&&(f[w]=it[w]),f}onHandleChanging({handle:n,e:f}){const p=this.graph,w=this.options,k=this.cellView,ne=w.anchor,me=n.options.axis,De=n.options.index-1,ze=this.getEventData(f),it=this.normalizeEvent(f),Pt=p.snapToGrid(it.clientX,it.clientY),ht=this.snapHandle(n,Pt.clone(),ze),Ft=d.ObjectExt.cloneDeep(this.vertices);let tn=Ft[De],On=Ft[De+1];const Rn=k.sourceView,nr=k.sourceBBox;let or=!1,Dr=!1;if(tn?De===0?nr.containsPoint(tn)?(Ft.shift(),this.shiftHandleIndexes(-1),or=!0):(tn[me]=ht[me],Dr=!0):tn[me]=ht[me]:(tn=k.sourceAnchor.toJSON(),tn[me]=ht[me],nr.containsPoint(tn)?or=!0:(Ft.unshift(tn),this.shiftHandleIndexes(1),Dr=!0)),typeof ne=="function"&&Rn){if(or){const Qs=ze.sourceAnchor.clone();Qs[me]=ht[me];const Za=d.FunctionExt.call(ne,k,Qs,Rn,k.sourceMagnet||Rn.container,"source",k,this);this.resetAnchor("source",Za)}Dr&&this.resetAnchor("source",ze.sourceAnchorDef)}const ri=k.targetView,yn=k.targetBBox;let ao=!1,Ks=!1;if(On?De===Ft.length-2?yn.containsPoint(On)?(Ft.pop(),ao=!0):(On[me]=ht[me],Ks=!0):On[me]=ht[me]:(On=k.targetAnchor.toJSON(),On[me]=ht[me],yn.containsPoint(On)?ao=!0:(Ft.push(On),Ks=!0)),typeof ne=="function"&&ri){if(ao){const Qs=ze.targetAnchor.clone();Qs[me]=ht[me];const Za=d.FunctionExt.call(ne,k,Qs,ri,k.targetMagnet||ri.container,"target",k,this);this.resetAnchor("target",Za)}Ks&&this.resetAnchor("target",ze.targetAnchorDef)}v.Point.equalPoints(Ft,this.vertices)||this.cellView.cell.setVertices(Ft,{ui:!0,toolId:this.cid}),this.updateHandle(n,tn,On,0),w.stopPropagation||k.notifyMouseMove(it,Pt.x,Pt.y)}onHandleChange({handle:n,e:f}){const p=this.options,w=this.handles,k=this.cellView,ne=n.options.index;if(Array.isArray(w)){for(let me=0,De=w.length;me<De;me+=1)me!==ne&&w[me].hide();if(this.focus(),this.setEventData(f,{sourceAnchor:k.sourceAnchor.clone(),targetAnchor:k.targetAnchor.clone(),sourceAnchorDef:d.ObjectExt.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:d.ObjectExt.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!p.stopPropagation){const me=this.normalizeEvent(f),De=this.graph.snapToGrid(me.clientX,me.clientY);k.notifyMouseDown(me,De.x,De.y)}}}onHandleChanged({e:n}){const f=this.options,p=this.cellView;f.removeRedundancies&&p.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const w=this.normalizeEvent(n),k=this.graph.snapToGrid(w.clientX,w.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),f.stopPropagation||p.notifyMouseUp(w,k.x,k.y),p.checkMouseleave(w),f.onChanged&&f.onChanged({edge:p.cell,edgeView:p})}updateHandle(n,f,p,w=0){const k=this.options.precision||0,ne=Math.abs(f.x-p.x)<k,me=Math.abs(f.y-p.y)<k;if(ne||me){const De=new v.Line(f,p);if(De.length()<this.options.threshold)n.hide();else{const it=De.getCenter(),Pt=ne?"x":"y";it[Pt]+=w||0;const ht=De.vector().vectorAngle(new v.Point(1,0));n.updatePosition(it.x,it.y,ht,this.cellView),n.show(),n.options.axis=Pt}}else n.hide()}onRemove(){this.resetHandles()}}(function(H){class n extends Mo{constructor(p){super(),this.options=p,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=Mo.createElement("rect",!0);const p=this.options.attrs;if(typeof p=="function"){const w=H.getDefaults();this.setAttrs(Object.assign(Object.assign({},w.attrs),p(this)))}else this.setAttrs(p);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(p,w,k,ne){const me=ne.getClosestPoint(new v.Point(p,w))||new v.Point(p,w);let De=d.Dom.createSVGMatrix().translate(me.x,me.y);if(me.equals({x:p,y:w}))De=De.rotate(k);else{let it=new v.Line(p,w,me.x,me.y).vector().vectorAngle(new v.Point(1,0));it!==0&&(it+=90),De=De.rotate(it)}this.setAttrs({transform:d.Dom.matrixToTransformString(De),cursor:k%180===0?"row-resize":"col-resize"})}onMouseDown(p){this.options.guard(p)||(this.trigger("change",{e:p,handle:this}),p.stopPropagation(),p.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},p.data))}onMouseMove(p){this.emit("changing",{e:p,handle:this})}onMouseUp(p){this.emit("changed",{e:p,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}H.Handle=n})(Zo||(Zo={})),function(H){H.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:n=>new H.Handle(n),anchor:Qn})}(Zo||(Zo={}));class qi extends ye.ToolItem{get type(){return this.options.type}onRender(){d.Dom.addClass(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const n=this.type;return this.cellView.getTerminalView(n)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const n=this.childNodes;if(!n)return;const f=n.anchor;if(!f)return;const p=this.type,w=this.cellView,k=this.options,ne=w.getTerminalAnchor(p),me=w.cell.prop([p,"anchor"]);f.setAttribute("transform",`translate(${ne.x}, ${ne.y})`);const De=me?k.customAnchorAttrs:k.defaultAnchorAttrs;De&&Object.keys(De).forEach(ze=>{f.setAttribute(ze,De[ze])})}updateArea(){const n=this.childNodes;if(!n)return;const f=n.area;if(!f)return;const p=this.type,w=this.cellView,k=w.getTerminalView(p);if(k){const ne=k.cell,me=w.getTerminalMagnet(p);let De=this.options.areaPadding||0;Number.isFinite(De)||(De=0);let ze,it,Pt;k.isEdgeElement(me)?(ze=k.getBBox(),it=0,Pt=ze.getCenter()):(ze=k.getUnrotatedBBoxOfElement(me),it=ne.getAngle(),Pt=ze.getCenter(),it&&Pt.rotate(-it,ne.getBBox().getCenter())),ze.inflate(De),d.Dom.attr(f,{x:-ze.width/2,y:-ze.height/2,width:ze.width,height:ze.height,transform:`translate(${Pt.x}, ${Pt.y}) rotate(${it})`})}}toggleArea(n){if(this.childNodes){const f=this.childNodes.area;f&&(f.style.display=n?"":"none")}}onMouseDown(n){this.guard(n)||(n.stopPropagation(),n.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(n){const f=this.type,p=this.cell;n?p.prop([f,"anchor"],n,{rewrite:!0,ui:!0,toolId:this.cid}):p.removeProp([f,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(n){const f=this.type,p=this.cellView,w=p.getTerminalView(f);if(w==null)return;const k=this.normalizeEvent(n),ne=w.cell,me=p.getTerminalMagnet(f);let De=this.graph.coord.clientToLocalPoint(k.clientX,k.clientY);const ze=this.options.snap;if(typeof ze=="function"){const ht=d.FunctionExt.call(ze,p,De,w,me,f,p,this);De=v.Point.create(ht)}if(this.options.restrictArea)if(w.isEdgeElement(me)){const ht=w.getClosestPoint(De);ht&&(De=ht)}else{const ht=w.getUnrotatedBBoxOfElement(me),Ft=ne.getAngle(),tn=ne.getBBox().getCenter(),On=De.clone().rotate(Ft,tn);ht.containsPoint(On)||(De=ht.getNearestPointToPoint(On).rotate(-Ft,tn))}let it;const Pt=this.options.anchor;typeof Pt=="function"&&(it=d.FunctionExt.call(Pt,p,De,w,me,f,p,this)),this.resetAnchor(it),this.update()}onMouseUp(n){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const f=this.cellView;this.options.removeRedundancies&&f.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const n=this.options.resetAnchor;n&&this.resetAnchor(n===!0?void 0:n),this.update()}}(function(H){H.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:Qn,snap(n,f,p,w,k,ne){const me=ne.options.snapRadius||0,De=w==="source",ze=De?0:-1,it=this.cell.getVertexAt(ze)||this.getTerminalAnchor(De?"target":"source");return it&&(Math.abs(it.x-n.x)<me&&(n.x=it.x),Math.abs(it.y-n.y)<me&&(n.y=it.y)),n}})})(qi||(qi={}));const is=qi.define({name:"source-anchor",type:"source"}),Js=qi.define({name:"target-anchor",type:"target"});var Yo=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class Ss extends ye.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const n=this.options.attrs,{class:f}=n,p=Yo(n,["class"]);this.setAttrs(p,this.container),f&&d.Dom.addClass(this.container,f)}}onRender(){d.Dom.addClass(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const n=this.ratio,f=this.cellView,p=f.getTangentAtRatio(n),w=p?p.start:f.getPointAtRatio(n),k=p&&p.vector().vectorAngle(new v.Point(1,0))||0;if(!w)return this;const ne=d.Dom.createSVGMatrix().translate(w.x,w.y).rotate(k);return d.Dom.transform(this.container,ne,{absolute:!0}),this}onMouseDown(n){if(this.guard(n))return;n.stopPropagation(),n.preventDefault();const f=this.cellView;if(f.can("arrowheadMovable")){f.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const p=this.graph.snapToGrid(n.clientX,n.clientY),w=f.prepareArrowheadDragging(this.type,{x:p.x,y:p.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(n,w),this.delegateDocumentEvents(this.options.documentEvents,n.data),f.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(n){const f=this.normalizeEvent(n),p=this.graph.snapToGrid(f.clientX,f.clientY);this.cellView.onMouseMove(f,p.x,p.y),this.update()}onMouseUp(n){this.undelegateDocumentEvents();const f=this.normalizeEvent(n),p=this.cellView,w=this.graph.snapToGrid(f.clientX,f.clientY);p.onMouseUp(f,w.x,w.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",p.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(H){H.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(Ss||(Ss={}));const ko=Ss.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),vs=Ss.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class xa extends ye.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const n=this.cellView;n&&n.on("cell:dblclick",this.dblClick)}createElement(){const n=[this.prefixClassName(`${this.cell.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=ye.createElement("div",!1),this.addClass(n,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:n,editor:f}=this;if(!f)return;const{style:p}=f;n.isNode()?this.updateNodeEditorTransform():n.isEdge()&&this.updateEdgeEditorTransform();const{attrs:w}=this.options;p.fontSize=`${w.fontSize}px`,p.fontFamily=w.fontFamily,p.color=w.color,p.backgroundColor=w.backgroundColor;const k=this.getCellText()||"";return f.innerText=k,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:n,cell:f,editor:p}=this;if(!p)return;let w=v.Point.create(),k=20,ne="",{x:me,y:De}=this.options;const{width:ze,height:it}=this.options;if(typeof me!="undefined"&&typeof De!="undefined"){const Ft=f.getBBox();me=d.NumberExt.normalizePercentage(me,Ft.width),De=d.NumberExt.normalizePercentage(De,Ft.height),w=Ft.topLeft.translate(me,De),k=Ft.width-me*2}else{const Ft=f.getBBox();w=Ft.center,k=Ft.width-4,ne="translate(-50%, -50%)"}const Pt=n.scale(),{style:ht}=p;w=n.localToGraph(w),ht.left=`${w.x}px`,ht.top=`${w.y}px`,ht.transform=`scale(${Pt.sx}, ${Pt.sy}) ${ne}`,ht.minWidth=`${k}px`,typeof ze=="number"&&(ht.width=`${ze}px`),typeof it=="number"&&(ht.height=`${it}px`)}updateEdgeEditorTransform(){if(!this.event)return;const{graph:n,editor:f}=this;if(!f)return;let p=v.Point.create(),w=20;const{style:k}=f,ne=this.event.target,me=ne.parentElement;if(me&&d.Dom.hasClass(me,this.prefixClassName("edge-label"))){const it=me.getAttribute("data-index")||"0";this.labelIndex=parseInt(it,10);const Pt=me.getAttribute("transform"),{translation:ht}=d.Dom.parseTransformString(Pt);p=new v.Point(ht.tx,ht.ty),w=er.getBBox(ne).width}else{if(!this.options.labelAddable)return this;p=n.clientToLocal(v.Point.create(this.event.clientX,this.event.clientY));const Pt=this.cellView.path.closestPointLength(p);this.distance=Pt,this.labelIndex=-1}p=n.localToGraph(p);const ze=n.scale();k.left=`${p.x}px`,k.top=`${p.y}px`,k.minWidth=`${w}px`,k.transform=`scale(${ze.sx}, ${ze.sy}) translate(-50%, -50%)`}onDocumentMouseUp(n){if(this.editor&&n.target!==this.editor){const f=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(f!==""?f:null),this.removeElement()}}onCellDblClick({e:n}){this.editor||(n.stopPropagation(),this.removeElement(),this.event=n,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents))}onMouseDown(n){n.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const n=document.createRange(),f=window.getSelection();n.selectNodeContents(this.editor),f.removeAllRanges(),f.addRange(n)}}getCellText(){const{getText:n}=this.options;if(typeof n=="function")return d.FunctionExt.call(n,this.cellView,{cell:this.cell,index:this.labelIndex});if(typeof n=="string"){if(this.cell.isNode())return this.cell.attr(n);if(this.cell.isEdge()&&this.labelIndex!==-1)return this.cell.prop(`labels/${this.labelIndex}/attrs/${n}`)}}setCellText(n){const f=this.options.setText;if(typeof f=="function"){d.FunctionExt.call(f,this.cellView,{cell:this.cell,value:n,index:this.labelIndex,distance:this.distance});return}if(typeof f=="string"){if(this.cell.isNode()){n!==null&&this.cell.attr(f,n);return}if(this.cell.isEdge()){const p=this.cell;if(this.labelIndex===-1){if(n){const w={position:{distance:this.distance},attrs:{}};d.ObjectExt.setByPath(w,`attrs/${f}`,n),p.appendLabel(w)}}else n!==null?p.prop(`labels/${this.labelIndex}/attrs/${f}`,n):typeof this.labelIndex=="number"&&p.removeLabelAt(this.labelIndex)}}}onRemove(){const n=this.cellView;n&&n.off("cell:dblclick",this.dblClick),this.removeElement()}}(function(H){H.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mouseup:"onDocumentMouseUp",touchend:"onDocumentMouseUp",touchcancel:"onDocumentMouseUp"}})})(xa||(xa={})),function(H){H.NodeEditor=H.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),H.EdgeEditor=H.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})}(xa||(xa={}));var ua=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f},_s;(function(H){H.presets={boundary:co,button:pr,"button-remove":pr.Remove,"node-editor":xa.NodeEditor},H.registry=x.create({type:"node tool",process(n,f){if(typeof f=="function")return f;let p=ye.ToolItem;const{inherit:w}=f,k=ua(f,["inherit"]);if(w){const ne=this.get(w);ne==null?this.onNotFound(w,"inherited"):p=ne}return k.name==null&&(k.name=n),p.define.call(p,k)}}),H.registry.register(H.presets,!0)})(_s||(_s={}));var Pa;(function(H){H.presets={boundary:co,vertices:di,segments:Zo,button:pr,"button-remove":pr.Remove,"source-anchor":is,"target-anchor":Js,"source-arrowhead":ko,"target-arrowhead":vs,"edge-editor":xa.EdgeEditor},H.registry=x.create({type:"edge tool",process(n,f){if(typeof f=="function")return f;let p=ye.ToolItem;const{inherit:w}=f,k=ua(f,["inherit"]);if(w){const ne=this.get(w);ne==null?this.onNotFound(w,"inherited"):p=ne}return k.name==null&&(k.name=n),p.define.call(p,k)}}),H.registry.register(H.presets,!0)})(Pa||(Pa={}));const Us=Oa("center"),ta=Oa("topCenter"),La=Oa("bottomCenter"),qs=Oa("leftMiddle"),mu=Oa("rightMiddle"),eo=Oa("topLeft"),ds=Oa("topRight"),Vs=Oa("bottomLeft"),oa=Oa("bottomRight");function Oa(H){return function(n,f,p,w={}){const k=w.rotate?n.getUnrotatedBBoxOfElement(f):n.getBBoxOfElement(f),ne=k[H];ne.x+=d.NumberExt.normalizePercentage(w.dx,k.width),ne.y+=d.NumberExt.normalizePercentage(w.dy,k.height);const me=n.cell;return w.rotate?ne.rotate(-me.getAngle(),me.getBBox().getCenter()):ne}}function ls(H){return function(n,f,p,w){if(p instanceof Element){const k=this.graph.findViewByElem(p);let ne;if(k)if(k.isEdgeElement(p)){const me=w.fixedAt!=null?w.fixedAt:"50%";ne=Ha(k,me)}else ne=k.getBBoxOfElement(p).getCenter();else ne=new v.Point;return H.call(this,n,f,ne,w)}return H.apply(this,arguments)}}function Ha(H,n){const f=d.NumberExt.isPercentage(n),p=typeof n=="string"?parseFloat(n):n;return f?H.getPointAtRatio(p/100):H.getPointAtLength(p)}const Xa=ls(function(H,n,f,p){const w=v.Angle.normalize(H.cell.getAngle()),k=H.getBBoxOfElement(n),ne=k.getCenter(),me=k.getTopLeft(),De=k.getBottomRight();let ze=p.padding;if(Number.isFinite(ze)||(ze=0),me.y+ze<=f.y&&f.y<=De.y-ze){const it=f.y-ne.y;ne.x+=w===0||w===180?0:it*1/Math.tan(v.Angle.toRad(w)),ne.y+=it}else if(me.x+ze<=f.x&&f.x<=De.x-ze){const it=f.x-ne.x;ne.y+=w===90||w===270?0:it*Math.tan(v.Angle.toRad(w)),ne.x+=it}return ne}),ma=function(H,n,f,p,w){const k=H.cell.getConnectionPoint(this.cell,w);return(p.dx||p.dy)&&k.translate(p.dx||0,p.dy||0),k},qa=ls(function(H,n,f,p){let w,k=0,ne;const me=H.cell;p.rotate?(w=H.getUnrotatedBBoxOfElement(n),ne=me.getBBox().getCenter(),k=me.getAngle()):w=H.getBBoxOfElement(n);const De=p.padding;De!=null&&Number.isFinite(De)&&w.inflate(De),p.rotate&&f.rotate(k,ne);const ze=w.getNearestSideToPoint(f);let it;switch(ze){case"left":it=w.getLeftMiddle();break;case"right":it=w.getRightMiddle();break;case"top":it=w.getTopCenter();break;case"bottom":it=w.getBottomCenter();break;default:break}const Pt=p.direction;return Pt==="H"?(ze==="top"||ze==="bottom")&&(f.x<=w.x+w.width?it=w.getLeftMiddle():it=w.getRightMiddle()):Pt==="V"&&(f.y<=w.y+w.height?it=w.getTopCenter():it=w.getBottomCenter()),p.rotate?it.rotate(-k,ne):it});var Sa;(function(H){H.presets=e,H.registry=x.create({type:"node endpoint"}),H.registry.register(H.presets,!0)})(Sa||(Sa={}));const cc=function(H,n,f,p){let w=p.ratio!=null?p.ratio:.5;return w>1&&(w/=100),H.getPointAtRatio(w)},eu=function(H,n,f,p){const w=p.length!=null?p.length:20;return H.getPointAtLength(w)},lc=function(H,n,f,p){const w=H.getClosestPoint(f);return w!=null?w:new v.Point},Aa=ls(lc),Wu=ls(function(H,n,f,p){const k=H.getConnection(),ne=H.getConnectionSubdivisions(),me=new v.Line(f.clone().translate(0,1e6),f.clone().translate(0,-1e6)),De=new v.Line(f.clone().translate(1e6,0),f.clone().translate(-1e6,0)),ze=me.intersect(k,{segmentSubdivisions:ne}),it=De.intersect(k,{segmentSubdivisions:ne}),Pt=[];return ze&&Pt.push(...ze),it&&Pt.push(...it),Pt.length>0?f.closest(Pt):p.fallbackAt!=null?Ha(H,p.fallbackAt):d.FunctionExt.call(lc,this,H,n,f,p)});var Lu;(function(H){H.presets=t,H.registry=x.create({type:"edge endpoint"}),H.registry.register(H.presets,!0)})(Lu||(Lu={}));function Ku(H,n,f){let p;if(typeof f=="object"){if(Number.isFinite(f.y)){const k=new v.Line(n,H),{start:ne,end:me}=k.parallel(f.y);n=ne,H=me}p=f.x}else p=f;if(p==null||!Number.isFinite(p))return H;const w=H.distance(n);return p===0&&w>0?H:H.move(n,-Math.min(p,w-1))}function du(H){const n=H.getAttribute("stroke-width");return n===null?0:parseFloat(n)||0}function qt(H){if(H==null)return null;let n=H;do{let f=n.tagName;if(typeof f!="string")return null;if(f=f.toUpperCase(),f==="G")n=n.firstElementChild;else if(f==="TITLE")n=n.nextElementSibling;else break}while(n);return n}const In=function(H,n,f,p){const w=n.getBBoxOfElement(f);p.stroked&&w.inflate(du(f)/2);const k=H.intersect(w),ne=k&&k.length?H.start.closest(k):H.end;return Ku(ne,H.start,p.offset)},br=function(H,n,f,p,w){const k=n.cell,ne=k.isNode()?k.getAngle():0;if(ne===0)return d.FunctionExt.call(In,this,H,n,f,p,w);const me=n.getUnrotatedBBoxOfElement(f);p.stroked&&me.inflate(du(f)/2);const De=me.getCenter(),ze=H.clone().rotate(ne,De),it=ze.setLength(1e6).intersect(me),Pt=it&&it.length?ze.start.closest(it).rotate(-ne,De):H.end;return Ku(Pt,H.start,p.offset)},Mr=function(H,n,f,p){let w,k;const ne=H.end,me=p.selector;if(typeof me=="string"?w=n.findOne(me):Array.isArray(me)?w=d.ObjectExt.getByPath(f,me):w=qt(f),!d.Dom.isSVGGraphicsElement(w)){if(w===f||!d.Dom.isSVGGraphicsElement(f))return ne;w=f}const De=n.getShapeOfElement(w),ze=n.getMatrixOfElement(w),it=n.getRootTranslatedMatrix(),Pt=n.getRootRotatedMatrix(),ht=it.multiply(Pt).multiply(ze),Ft=ht.inverse(),tn=er.transformLine(H,Ft),On=tn.start.clone(),Rn=n.getDataOfElement(w);if(p.insideout===!1){Rn.shapeBBox==null&&(Rn.shapeBBox=De.bbox());const ri=Rn.shapeBBox;if(ri!=null&&ri.containsPoint(On))return ne}p.extrapolate===!0&&tn.setLength(1e6);let nr;if(v.Path.isPath(De)){const ri=p.precision||2;Rn.segmentSubdivisions==null&&(Rn.segmentSubdivisions=De.getSegmentSubdivisions({precision:ri})),nr={precision:ri,segmentSubdivisions:Rn.segmentSubdivisions},k=tn.intersect(De,nr)}else k=tn.intersect(De);k?Array.isArray(k)&&(k=On.closest(k)):p.sticky===!0&&(v.Rectangle.isRectangle(De)?k=De.getNearestPointToPoint(On):v.Ellipse.isEllipse(De)?k=De.intersectsWithLineFromCenterToPoint(On):k=De.closestPoint(On,nr));const or=k?er.transformPoint(k,ht):ne;let Dr=p.offset||0;return p.stroked!==!1&&(typeof Dr=="object"?(Dr=Object.assign({},Dr),Dr.x==null&&(Dr.x=0),Dr.x+=du(w)/2):Dr+=du(w)/2),Ku(or,H.start,Dr)};function Yr(H,n,f=0){const{start:p,end:w}=H;let k,ne,me,De;switch(n){case"left":De="x",k=w,ne=p,me=-1;break;case"right":De="x",k=p,ne=w,me=1;break;case"top":De="y",k=w,ne=p,me=-1;break;case"bottom":De="y",k=p,ne=w,me=1;break;default:return}p[De]<w[De]?k[De]=ne[De]:ne[De]=k[De],Number.isFinite(f)&&(k[De]+=me*f,ne[De]+=me*f)}const Bt=function(H,n,f,p){const{alignOffset:w,align:k}=p;return k&&Yr(H,k,w),Ku(H.end,H.start,p.offset)};var nn;(function(H){H.presets=s,H.registry=x.create({type:"connection point"}),H.registry.register(H.presets,!0)})(nn||(nn={}));const Dn=function(H){return[...H]},Dt=function(H,n,f){const p=n.side||"bottom",w=d.NumberExt.normalizeSides(n.padding||40),k=f.sourceBBox,ne=f.targetBBox,me=k.getCenter(),De=ne.getCenter();let ze,it,Pt;switch(p){case"top":Pt=-1,ze="y",it="height";break;case"left":Pt=-1,ze="x",it="width";break;case"right":Pt=1,ze="x",it="width";break;case"bottom":default:Pt=1,ze="y",it="height";break}return me[ze]+=Pt*(k[it]/2+w[p]),De[ze]+=Pt*(ne[it]/2+w[p]),Pt*(me[ze]-De[ze])>0?De[ze]=me[ze]:me[ze]=De[ze],[me.toJSON(),...H,De.toJSON()]};function en(H){return new v.Rectangle(H.x,H.y,0,0)}function un(H={}){const n=d.NumberExt.normalizeSides(H.padding||20);return{x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom}}function Jn(H,n={}){return H.sourceBBox.clone().moveAndExpand(un(n))}function Tr(H,n={}){return H.targetBBox.clone().moveAndExpand(un(n))}function Sr(H,n={}){return H.sourceAnchor?H.sourceAnchor:Jn(H,n).getCenter()}function Wi(H,n={}){return H.targetAnchor?H.targetAnchor:Tr(H,n).getCenter()}const Fi=function(H,n,f){let p=Jn(f,n),w=Tr(f,n);const k=Sr(f,n),ne=Wi(f,n);p=p.union(en(k)),w=w.union(en(ne));const me=H.map(it=>v.Point.create(it));me.unshift(k),me.push(ne);let De=null;const ze=[];for(let it=0,Pt=me.length-1;it<Pt;it+=1){let ht=null;const Ft=me[it],tn=me[it+1],On=ro.getBearing(Ft,tn)!=null;if(it===0)it+1===Pt?p.intersectsWithRect(w.clone().inflate(1))?ht=ro.insideNode(Ft,tn,p,w):On||(ht=ro.nodeToNode(Ft,tn,p,w)):p.containsPoint(tn)?ht=ro.insideNode(Ft,tn,p,en(tn).moveAndExpand(un(n))):On||(ht=ro.nodeToVertex(Ft,tn,p));else if(it+1===Pt){const Rn=On&&ro.getBearing(tn,Ft)===De;w.containsPoint(Ft)||Rn?ht=ro.insideNode(Ft,tn,en(Ft).moveAndExpand(un(n)),w,De):On||(ht=ro.vertexToNode(Ft,tn,w,De))}else On||(ht=ro.vertexToVertex(Ft,tn,De));ht?(ze.push(...ht.points),De=ht.direction):De=ro.getBearing(Ft,tn),it+1<Pt&&ze.push(tn)}return ze};var ro;(function(H){const n={N:"S",S:"N",E:"W",W:"E"},f={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function p(Pt,ht,Ft){let tn=new v.Point(Pt.x,ht.y);return Ft.containsPoint(tn)&&(tn=new v.Point(ht.x,Pt.y)),tn}function w(Pt,ht){return Pt[ht==="W"||ht==="E"?"width":"height"]}H.getBBoxSize=w;function k(Pt,ht){return Pt.x===ht.x?Pt.y>ht.y?"N":"S":Pt.y===ht.y?Pt.x>ht.x?"W":"E":null}H.getBearing=k;function ne(Pt,ht,Ft){const tn=new v.Point(Pt.x,ht.y),On=new v.Point(ht.x,Pt.y),Rn=k(Pt,tn),nr=k(Pt,On),or=Ft?n[Ft]:null,Dr=Rn===Ft||Rn!==or&&(nr===or||nr!==Ft)?tn:On;return{points:[Dr],direction:k(Dr,ht)}}H.vertexToVertex=ne;function me(Pt,ht,Ft){const tn=p(Pt,ht,Ft);return{points:[tn],direction:k(tn,ht)}}H.nodeToVertex=me;function De(Pt,ht,Ft,tn){const On=[new v.Point(Pt.x,ht.y),new v.Point(ht.x,Pt.y)],Rn=On.filter(Dr=>!Ft.containsPoint(Dr)),nr=Rn.filter(Dr=>k(Dr,Pt)!==tn);let or;if(nr.length>0)return or=nr.filter(Dr=>k(Pt,Dr)===tn).pop(),or=or||nr[0],{points:[or],direction:k(or,ht)};{or=d.ArrayExt.difference(On,Rn)[0];const Dr=v.Point.create(ht).move(or,-w(Ft,tn)/2);return{points:[p(Dr,Pt,Ft),Dr],direction:k(Dr,ht)}}}H.vertexToNode=De;function ze(Pt,ht,Ft,tn){let On=me(ht,Pt,tn);const Rn=On.points[0];if(Ft.containsPoint(Rn)){On=me(Pt,ht,Ft);const nr=On.points[0];if(tn.containsPoint(nr)){const or=v.Point.create(Pt).move(nr,-w(Ft,k(Pt,nr))/2),Dr=v.Point.create(ht).move(Rn,-w(tn,k(ht,Rn))/2),ri=new v.Line(or,Dr).getCenter(),yn=me(Pt,ri,Ft),ao=ne(ri,ht,yn.direction);On.points=[yn.points[0],ao.points[0]],On.direction=ao.direction}}return On}H.nodeToNode=ze;function it(Pt,ht,Ft,tn,On){const Rn=Ft.union(tn).inflate(1),nr=Rn.getCenter(),or=nr.distance(ht)>nr.distance(Pt),Dr=or?ht:Pt,ri=or?Pt:ht;let yn,ao,Ks;On?(yn=v.Point.fromPolar(Rn.width+Rn.height,f[On],Dr),yn=Rn.getNearestPointToPoint(yn).move(yn,-1)):yn=Rn.getNearestPointToPoint(Dr).move(Dr,1),ao=p(yn,ri,Rn);let Qs;yn.round().equals(ao.round())?(ao=v.Point.fromPolar(Rn.width+Rn.height,v.Angle.toRad(yn.theta(Dr))+Math.PI/2,ri),ao=Rn.getNearestPointToPoint(ao).move(ri,1).round(),Ks=p(yn,ao,Rn),Qs=or?[ao,Ks,yn]:[yn,Ks,ao]):Qs=or?[ao,yn]:[yn,ao];const Za=k(or?yn:ao,ht);return{points:Qs,direction:Za}}H.insideNode=it})(ro||(ro={}));const _o={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return $i(this.step,this)},directions(){const H=$i(this.step,this),n=$i(this.cost,this);return[{cost:n,offsetX:H,offsetY:0},{cost:n,offsetX:-H,offsetY:0},{cost:n,offsetX:0,offsetY:H},{cost:n,offsetX:0,offsetY:-H}]},penalties(){const H=$i(this.step,this);return{0:0,45:H/2,90:H/2}},paddingBox(){const H=$i(this.step,this);return{x:-H,y:-H,width:2*H,height:2*H}},fallbackRouter:Fi,draggingRouter:null,snapToGrid:!0};function $i(H,n){return typeof H=="function"?H.call(n):H}function Ds(H){const n=Object.keys(H).reduce((f,p)=>{const w=f;return p==="fallbackRouter"||p==="draggingRouter"||p==="fallbackRoute"?w[p]=H[p]:w[p]=$i(H[p],H),f},{});if(n.padding){const f=d.NumberExt.normalizeSides(n.padding);n.paddingBox={x:-f.left,y:-f.top,width:f.left+f.right,height:f.top+f.bottom}}return n.directions.forEach(f=>{const p=new v.Point(0,0),w=new v.Point(f.offsetX,f.offsetY);f.angle=v.Angle.normalize(p.theta(w))}),n}const Ws=1,ya=2;class au{constructor(){this.items=[],this.hash={},this.values={}}add(n,f){this.hash[n]?this.items.splice(this.items.indexOf(n),1):this.hash[n]=Ws,this.values[n]=f;const p=d.ArrayExt.sortedIndexBy(this.items,n,w=>this.values[w]);this.items.splice(p,0,n)}pop(){const n=this.items.shift();return n&&(this.hash[n]=ya),n}isOpen(n){return this.hash[n]===Ws}isClose(n){return this.hash[n]===ya}isEmpty(){return this.items.length===0}}class yu{constructor(n){this.options=n,this.mapGridSize=100,this.map={}}build(n,f){const p=this.options,w=p.excludeTerminals.reduce((ze,it)=>{const Pt=f[it];if(Pt){const ht=n.getCell(Pt.cell);ht&&ze.push(ht)}return ze},[]);let k=[];const ne=n.getCell(f.getSourceCellId());ne&&(k=d.ArrayExt.union(k,ne.getAncestors().map(ze=>ze.id)));const me=n.getCell(f.getTargetCellId());me&&(k=d.ArrayExt.union(k,me.getAncestors().map(ze=>ze.id)));const De=this.mapGridSize;return n.getNodes().reduce((ze,it)=>{const Pt=w.some(Rn=>Rn.id===it.id),ht=it.shape?p.excludeShapes.includes(it.shape):!1,Ft=p.excludeNodes.some(Rn=>typeof Rn=="string"?it.id===Rn:Rn===it),tn=k.includes(it.id),On=ht||Pt||Ft||tn;if(it.isVisible()&&!On){const Rn=it.getBBox().moveAndExpand(p.paddingBox),nr=Rn.getOrigin().snapToGrid(De),or=Rn.getCorner().snapToGrid(De);for(let Dr=nr.x;Dr<=or.x;Dr+=De)for(let ri=nr.y;ri<=or.y;ri+=De){const yn=new v.Point(Dr,ri).toString();ze[yn]==null&&(ze[yn]=[]),ze[yn].push(Rn)}}return ze},this.map),this}isAccessible(n){const f=n.clone().snapToGrid(this.mapGridSize).toString(),p=this.map[f];return p?p.every(w=>!w.containsPoint(n)):!0}}function Rs(H,n){const f=H.sourceBBox.clone();return n&&n.paddingBox?f.moveAndExpand(n.paddingBox):f}function uu(H,n){const f=H.targetBBox.clone();return n&&n.paddingBox?f.moveAndExpand(n.paddingBox):f}function Bc(H,n){return H.sourceAnchor?H.sourceAnchor:Rs(H,n).getCenter()}function Ua(H,n){return H.targetAnchor?H.targetAnchor:uu(H,n).getCenter()}function ef(H,n,f,p,w){const k=360/f,ne=H.theta(nh(H,n,p,w)),me=v.Angle.normalize(ne+k/2);return k*Math.floor(me/k)}function nh(H,n,f,p){const w=p.step,k=n.x-H.x,ne=n.y-H.y,me=k/f.x,De=ne/f.y,ze=me*w,it=De*w;return new v.Point(H.x+ze,H.y+it)}function kc(H,n){const f=Math.abs(H-n);return f>180?360-f:f}function Jc(H,n){const f=n.step;return n.directions.forEach(p=>{p.gridOffsetX=p.offsetX/f*H.x,p.gridOffsetY=p.offsetY/f*H.y}),n.directions}function Ju(H,n,f){return{source:n.clone(),x:Rl(f.x-n.x,H),y:Rl(f.y-n.y,H)}}function Rl(H,n){if(!H)return n;const f=Math.abs(H),p=Math.round(f/n);if(!p)return f;const w=p*n,ne=(f-w)/p;return n+ne}function tf(H,n){const f=n.source,p=v.GeometryUtil.snapToGrid(H.x-f.x,n.x)+f.x,w=v.GeometryUtil.snapToGrid(H.y-f.y,n.y)+f.y;return new v.Point(p,w)}function fc(H,n){return H.round(n)}function Gc(H,n,f){return fc(tf(H.clone(),n),f)}function os(H){return H.toString()}function Qu(H){return new v.Point(H.x===0?0:Math.abs(H.x)/H.x,H.y===0?0:Math.abs(H.y)/H.y)}function rh(H,n){let f=1/0;for(let p=0,w=n.length;p<w;p+=1){const k=H.manhattanDistance(n[p]);k<f&&(f=k)}return f}function Fc(H,n,f,p,w){const k=w.precision,ne=w.directionMap,me=H.diff(n.getCenter()),De=Object.keys(ne).reduce((ze,it)=>{if(f.includes(it)){const Pt=ne[it],ht=new v.Point(H.x+Pt.x*(Math.abs(me.x)+n.width),H.y+Pt.y*(Math.abs(me.y)+n.height)),tn=new v.Line(H,ht).intersect(n)||[];let On,Rn=null;for(let nr=0;nr<tn.length;nr+=1){const or=tn[nr],Dr=H.squaredDistance(or);(On==null||Dr>On)&&(On=Dr,Rn=or)}if(Rn){let nr=Gc(Rn,p,k);n.containsPoint(nr)&&(nr=Gc(nr.translate(Pt.x*p.x,Pt.y*p.y),p,k)),ze.push(nr)}}return ze},[]);return n.containsPoint(H)||De.push(Gc(H,p,k)),De}function Qc(H,n,f,p,w){const k=[];let ne=Qu(w.diff(f)),me=os(f),De=H[me],ze;for(;De;){ze=n[me];const ht=Qu(ze.diff(De));ht.equals(ne)||(k.unshift(ze),ne=ht),me=os(De),De=H[me]}const it=n[me];return Qu(it.diff(p)).equals(ne)||k.unshift(it),k}function Mf(H,n,f,p,w){const k=w.precision;let ne,me;v.Rectangle.isRectangle(n)?ne=fc(Bc(H,w).clone(),k):ne=fc(n.clone(),k),v.Rectangle.isRectangle(f)?me=fc(Ua(H,w).clone(),k):me=fc(f.clone(),k);const De=Ju(w.step,ne,me),ze=ne,it=me;let Pt,ht;if(v.Rectangle.isRectangle(n)?Pt=Fc(ze,n,w.startDirections,De,w):Pt=[ze],v.Rectangle.isRectangle(f)?ht=Fc(me,f,w.endDirections,De,w):ht=[it],Pt=Pt.filter(Ft=>p.isAccessible(Ft)),ht=ht.filter(Ft=>p.isAccessible(Ft)),Pt.length>0&&ht.length>0){const Ft=new au,tn={},On={},Rn={};for(let _a=0,da=Pt.length;_a<da;_a+=1){const Ka=Pt[_a],sl=os(Ka);Ft.add(sl,rh(Ka,ht)),tn[sl]=Ka,Rn[sl]=0}const nr=w.previousDirectionAngle,or=nr===void 0;let Dr,ri;const yn=Jc(De,w),ao=yn.length,Ks=ht.reduce((_a,da)=>{const Ka=os(da);return _a.push(Ka),_a},[]),Qs=v.Point.equalPoints(Pt,ht);let Za=w.maxLoopCount;for(;!Ft.isEmpty()&&Za>0;){const _a=Ft.pop(),da=tn[_a],Ka=On[_a],sl=Rn[_a],ff=da.equals(ze),jl=Ka==null;let ml;if(jl?or?ff?ml=null:ml=ef(ze,da,ao,De,w):ml=nr:ml=ef(Ka,da,ao,De,w),!(jl&&Qs)&&Ks.indexOf(_a)>=0)return w.previousDirectionAngle=ml,Qc(On,tn,da,ze,it);for(let Ms=0;Ms<ao;Ms+=1){Dr=yn[Ms];const hf=Dr.angle;if(ri=kc(ml,hf),!(or&&ff)&&ri>w.maxDirectionChange)continue;const Uc=Gc(da.clone().translate(Dr.gridOffsetX||0,Dr.gridOffsetY||0),De,k),Pu=os(Uc);if(Ft.isClose(Pu)||!p.isAccessible(Uc))continue;if(Ks.indexOf(Pu)>=0&&!Uc.equals(it)){const gf=ef(Uc,it,ao,De,w);if(kc(hf,gf)>w.maxDirectionChange)continue}const zl=Dr.cost,df=ff?0:w.penalties[ri],Ul=sl+zl+df;(!Ft.isOpen(Pu)||Ul<Rn[Pu])&&(tn[Pu]=Uc,On[Pu]=da,Rn[Pu]=Ul,Ft.add(Pu,Ul+rh(Uc,ht)))}Za-=1}}return w.fallbackRoute?d.FunctionExt.call(w.fallbackRoute,this,ze,it,w):null}function Pf(H,n=10){if(H.length<=1)return H;for(let f=0,p=H.length;f<p-1;f+=1){const w=H[f],k=H[f+1];if(w.x===k.x){const ne=n*Math.round(w.x/n);w.x!==ne&&(w.x=ne,k.x=ne)}else if(w.y===k.y){const ne=n*Math.round(w.y/n);w.y!==ne&&(w.y=ne,k.y=ne)}}return H}const Ph=function(H,n,f){const p=Ds(n),w=Rs(f,p),k=uu(f,p),ne=Bc(f,p),me=new yu(p).build(f.graph.model,f.cell),De=H.map(Ft=>v.Point.create(Ft)),ze=[];let it=ne,Pt,ht;for(let Ft=0,tn=De.length;Ft<=tn;Ft+=1){let On=null;if(Pt=ht||w,ht=De[Ft],ht==null){ht=k;const nr=f.cell;if((nr.getSourceCellId()==null||nr.getTargetCellId()==null)&&typeof p.draggingRouter=="function"){const Dr=Pt===w?ne:Pt,ri=ht.getOrigin();On=d.FunctionExt.call(p.draggingRouter,f,Dr,ri,p)}}if(On==null&&(On=Mf(f,Pt,ht,me,p)),On===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),d.FunctionExt.call(p.fallbackRouter,this,H,p,f);const Rn=On[0];Rn&&Rn.equals(it)&&On.shift(),it=On[On.length-1]||it,ze.push(...On)}return p.snapToGrid?Pf(ze,f.graph.grid.getGridSize()):ze},xc=function(H,n,f){return d.FunctionExt.call(Ph,this,H,Object.assign(Object.assign({},_o),n),f)},Tu={maxDirectionChange:45,directions(){const H=$i(this.step,this),n=$i(this.cost,this),f=Math.ceil(Math.sqrt(H*H<<1));return[{cost:n,offsetX:H,offsetY:0},{cost:f,offsetX:H,offsetY:H},{cost:n,offsetX:0,offsetY:H},{cost:f,offsetX:-H,offsetY:H},{cost:n,offsetX:-H,offsetY:0},{cost:f,offsetX:-H,offsetY:-H},{cost:n,offsetX:0,offsetY:-H},{cost:f,offsetX:H,offsetY:-H}]},fallbackRoute(H,n,f){const p=H.theta(n),w=[];let k={x:n.x,y:H.y},ne={x:H.x,y:n.y};if(p%180>90){const Dr=k;k=ne,ne=Dr}const me=p%90<45?k:ne,De=new v.Line(H,me),ze=90*Math.ceil(p/90),it=v.Point.fromPolar(De.squaredLength(),v.Angle.toRad(ze+135),me),Pt=new v.Line(n,it),ht=De.intersectsWithLine(Pt),Ft=ht||n,tn=ht?Ft:H,On=360/f.directions.length,Rn=tn.theta(n),nr=v.Angle.normalize(Rn+On/2),or=On*Math.floor(nr/On);return f.previousDirectionAngle=or,Ft&&w.push(Ft.round()),w.push(n),w}},nf=function(H,n,f){return d.FunctionExt.call(xc,this,H,Object.assign(Object.assign({},Tu),n),f)},rf=function(H,n,f){const p=n.offset||32,w=n.min==null?16:n.min;let k=0,ne=n.direction;const me=f.sourceBBox,De=f.targetBBox,ze=me.getCenter(),it=De.getCenter();if(typeof p=="number"&&(k=p),ne==null){let nr=De.left-me.right,or=De.top-me.bottom;nr>=0&&or>=0?ne=nr>=or?"L":"T":nr<=0&&or>=0?(nr=me.left-De.right,nr>=0?ne=nr>=or?"R":"T":ne="T"):nr>=0&&or<=0?(or=me.top-De.bottom,or>=0?ne=nr>=or?"L":"B":ne="L"):(nr=me.left-De.right,or=me.top-De.bottom,nr>=0&&or>=0?ne=nr>=or?"R":"B":nr<=0&&or>=0?ne="B":nr>=0&&or<=0?ne="R":ne=Math.abs(nr)>Math.abs(or)?"R":"B")}ne==="H"?ne=it.x-ze.x>=0?"L":"R":ne==="V"&&(ne=it.y-ze.y>=0?"T":"B"),p==="center"&&(ne==="L"?k=(De.left-me.right)/2:ne==="R"?k=(me.left-De.right)/2:ne==="T"?k=(De.top-me.bottom)/2:ne==="B"&&(k=(me.top-De.bottom)/2));let Pt,ht,Ft;const tn=ne==="L"||ne==="R";if(tn){if(it.y===ze.y)return[...H];Ft=ne==="L"?1:-1,Pt="x",ht="width"}else{if(it.x===ze.x)return[...H];Ft=ne==="T"?1:-1,Pt="y",ht="height"}const On=ze.clone(),Rn=it.clone();if(On[Pt]+=Ft*(me[ht]/2+k),Rn[Pt]-=Ft*(De[ht]/2+k),tn){const nr=On.x,or=Rn.x,Dr=me.width/2+w,ri=De.width/2+w;it.x>ze.x?or<=nr&&(On.x=Math.max(or,ze.x+Dr),Rn.x=Math.min(nr,it.x-ri)):or>=nr&&(On.x=Math.min(or,ze.x-Dr),Rn.x=Math.max(nr,it.x+ri))}else{const nr=On.y,or=Rn.y,Dr=me.height/2+w,ri=De.height/2+w;it.y>ze.y?or<=nr&&(On.y=Math.max(or,ze.y+Dr),Rn.y=Math.min(nr,it.y-ri)):or>=nr&&(On.y=Math.min(or,ze.y-Dr),Rn.y=Math.max(nr,it.y+ri))}return[On.toJSON(),...H,Rn.toJSON()]};function qc(H,n){if(n!=null&&n!==!1){const f=typeof n=="boolean"?0:n;if(f>0){const p=v.Point.create(H[1]).move(H[2],f),w=v.Point.create(H[1]).move(H[0],f);return[p.toJSON(),...H,w.toJSON()]}{const p=H[1];return[Object.assign({},p),...H,Object.assign({},p)]}}return H}const ih=function(H,n,f){const p=n.width||50,k=(n.height||80)/2,ne=n.angle||"auto",me=f.sourceAnchor,De=f.targetAnchor,ze=f.sourceBBox,it=f.targetBBox;if(me.equals(De)){const Pt=nr=>{const or=v.Angle.toRad(nr),Dr=Math.sin(or),ri=Math.cos(or),yn=new v.Point(me.x+ri*p,me.y+Dr*p),ao=new v.Point(yn.x-ri*k,yn.y-Dr*k),Ks=ao.clone().rotate(-90,yn),Qs=ao.clone().rotate(90,yn);return[Ks.toJSON(),yn.toJSON(),Qs.toJSON()]},ht=nr=>{const or=me.clone().move(nr,-1),Dr=new v.Line(or,nr);return!ze.containsPoint(nr)&&!ze.intersectsWithLine(Dr)},Ft=[0,90,180,270,45,135,225,315];if(typeof ne=="number")return qc(Pt(ne),n.merge);const tn=ze.getCenter();if(tn.equals(me))return qc(Pt(0),n.merge);const On=tn.angleBetween(me,tn.clone().translate(1,0));let Rn=Pt(On);if(ht(Rn[1]))return qc(Rn,n.merge);for(let nr=1,or=Ft.length;nr<or;nr+=1)if(Rn=Pt(On+Ft[nr]),ht(Rn[1]))return qc(Rn,n.merge);return qc(Rn,n.merge)}{const Pt=new v.Line(me,De);let ht=Pt.parallel(-p),Ft=ht.getCenter(),tn=ht.start.clone().move(ht.end,k),On=ht.end.clone().move(ht.start,k);const Rn=Pt.parallel(-1),nr=new v.Line(Rn.start,Ft),or=new v.Line(Rn.end,Ft);if((ze.containsPoint(Ft)||it.containsPoint(Ft)||ze.intersectsWithLine(nr)||ze.intersectsWithLine(or)||it.intersectsWithLine(nr)||it.intersectsWithLine(or))&&(ht=Pt.parallel(p),Ft=ht.getCenter(),tn=ht.start.clone().move(ht.end,k),On=ht.end.clone().move(ht.start,k)),n.merge){const Dr=new v.Line(me,De),ri=new v.Line(Ft,Dr.center).setLength(Number.MAX_SAFE_INTEGER),yn=ze.intersectsWithLine(ri),ao=it.intersectsWithLine(ri),Ks=yn?Array.isArray(yn)?yn:[yn]:[];ao&&(Array.isArray(ao)?Ks.push(...ao):Ks.push(ao));const Qs=Dr.center.closest(Ks);Qs?(f.sourceAnchor=Qs.clone(),f.targetAnchor=Qs.clone()):(f.sourceAnchor=Dr.center.clone(),f.targetAnchor=Dr.center.clone())}return qc([tn.toJSON(),Ft.toJSON(),On.toJSON()],n.merge)}};var Sc;(function(H){H.presets=h,H.registry=x.create({type:"router"}),H.registry.register(H.presets,!0)})(Sc||(Sc={}));const Ah=function(H,n,f,p={}){const w=[H,...f,n],k=new v.Polyline(w),ne=new v.Path(k);return p.raw?ne:ne.serialize()},Ba=function(H,n,f,p={}){const w=f.length===3?0:1,k=v.Point.create(f[0+w]),ne=v.Point.create(f[2+w]),me=v.Point.create(f[1+w]);if(!v.Point.equals(H,n)){const ze=new v.Point((H.x+n.x)/2,(H.y+n.y)/2),it=ze.angleBetween(v.Point.create(H).rotate(90,ze),me);it>1&&(k.rotate(180-it,ze),ne.rotate(180-it,ze),me.rotate(180-it,ze))}const De=`
     M ${H.x} ${H.y}
     Q ${k.x} ${k.y} ${me.x} ${me.y}
     Q ${ne.x} ${ne.y} ${n.x} ${n.y}
  `;return p.raw?v.Path.parse(De):De},bu=function(H,n,f,p={}){const w=new v.Path;w.appendSegment(v.Path.createSegment("M",H));const k=1/3,ne=2/3,me=p.radius||10;let De,ze;for(let it=0,Pt=f.length;it<Pt;it+=1){const ht=v.Point.create(f[it]),Ft=f[it-1]||H,tn=f[it+1]||n;De=ze||ht.distance(Ft)/2,ze=ht.distance(tn)/2;const On=-Math.min(me,De),Rn=-Math.min(me,ze),nr=ht.clone().move(Ft,On).round(),or=ht.clone().move(tn,Rn).round(),Dr=new v.Point(k*nr.x+ne*ht.x,ne*ht.y+k*nr.y),ri=new v.Point(k*or.x+ne*ht.x,ne*ht.y+k*or.y);w.appendSegment(v.Path.createSegment("L",nr)),w.appendSegment(v.Path.createSegment("C",Dr,ri,or))}return w.appendSegment(v.Path.createSegment("L",n)),p.raw?w:w.serialize()},Af=function(H,n,f,p={}){let w,k=p.direction;if(f&&f.length!==0){const ne=[H,...f,n],me=v.Curve.throughPoints(ne);w=new v.Path(me)}else if(w=new v.Path,w.appendSegment(v.Path.createSegment("M",H)),k||(k=Math.abs(H.x-n.x)>=Math.abs(H.y-n.y)?"H":"V"),k==="H"){const ne=(H.x+n.x)/2;w.appendSegment(v.Path.createSegment("C",ne,H.y,ne,n.y,n.x,n.y))}else{const ne=(H.y+n.y)/2;w.appendSegment(v.Path.createSegment("C",H.x,ne,n.x,ne,n.x,n.y))}return p.raw?w:w.serialize()},qu=1,fl=1/3,_f=2/3;function ec(H){let n=H.graph._jumpOverUpdateList;if(n==null&&(n=H.graph._jumpOverUpdateList=[],H.graph.on("cell:mouseup",()=>{const f=H.graph._jumpOverUpdateList;setTimeout(()=>{for(let p=0;p<f.length;p+=1)f[p].update()})}),H.graph.on("model:reseted",()=>{n=H.graph._jumpOverUpdateList=[]})),n.indexOf(H)<0){n.push(H);const f=()=>n.splice(n.indexOf(H),1);H.cell.once("change:connector",f),H.cell.once("removed",f)}}function Cc(H,n,f=[]){const p=[H,...f,n],w=[];return p.forEach((k,ne)=>{const me=p[ne+1];me!=null&&w.push(new v.Line(k,me))}),w}function hc(H,n){const f=[];return n.forEach(p=>{const w=H.intersectsWithLine(p);w&&f.push(w)}),f}function Oc(H,n){return new v.Line(H,n).squaredLength()}function Ll(H,n,f){return n.reduce((p,w,k)=>{if(sf.includes(w))return p;const ne=p.pop()||H,me=v.Point.create(w).move(ne.start,-f);let De=v.Point.create(w).move(ne.start,+f);const ze=n[k+1];if(ze!=null){const ht=De.distance(ze);ht<=f&&(De=ze.move(ne.start,ht),sf.push(ze))}else if(me.distance(ne.end)<f*2+qu)return p.push(ne),p;if(De.distance(ne.start)<f*2+qu)return p.push(ne),p;const Pt=new v.Line(me,De);return $u.push(Pt),p.push(new v.Line(ne.start,me),Pt,new v.Line(De,ne.end)),p},[])}function el(H,n,f,p){const w=new v.Path;let k;return k=v.Path.createSegment("M",H[0].start),w.appendSegment(k),H.forEach((ne,me)=>{if($u.includes(ne)){let De,ze,it,Pt;if(f==="arc"){De=-90,ze=ne.start.diff(ne.end),(ze.x<0||ze.x===0&&ze.y<0)&&(De+=180);const Ft=ne.getCenter(),tn=new v.Line(Ft,ne.end).rotate(De,Ft);let On;On=new v.Line(ne.start,Ft),it=On.pointAt(2/3).rotate(De,ne.start),Pt=tn.pointAt(1/3).rotate(-De,tn.end),k=v.Path.createSegment("C",it,Pt,tn.end),w.appendSegment(k),On=new v.Line(Ft,ne.end),it=tn.pointAt(1/3).rotate(De,tn.end),Pt=On.pointAt(1/3).rotate(-De,ne.end),k=v.Path.createSegment("C",it,Pt,ne.end),w.appendSegment(k)}else if(f==="gap")k=v.Path.createSegment("M",ne.end),w.appendSegment(k);else if(f==="cubic"){De=ne.start.theta(ne.end);const ht=n*.6;let Ft=n*1.35;ze=ne.start.diff(ne.end),(ze.x<0||ze.x===0&&ze.y<0)&&(Ft*=-1),it=new v.Point(ne.start.x+ht,ne.start.y+Ft).rotate(De,ne.start),Pt=new v.Point(ne.end.x-ht,ne.end.y+Ft).rotate(De,ne.end),k=v.Path.createSegment("C",it,Pt,ne.end),w.appendSegment(k)}}else{const De=H[me+1];p===0||!De||$u.includes(De)?(k=v.Path.createSegment("L",ne.end),w.appendSegment(k)):of(p,w,ne.end,ne.start,De.end)}}),w}function of(H,n,f,p,w){const k=f.distance(p)/2,ne=f.distance(w)/2,me=-Math.min(H,k),De=-Math.min(H,ne),ze=f.clone().move(p,me).round(),it=f.clone().move(w,De).round(),Pt=new v.Point(fl*ze.x+_f*f.x,_f*f.y+fl*ze.y),ht=new v.Point(fl*it.x+_f*f.x,_f*f.y+fl*it.y);let Ft;Ft=v.Path.createSegment("L",ze),n.appendSegment(Ft),Ft=v.Path.createSegment("C",Pt,ht,it),n.appendSegment(Ft)}let $u,sf;const nd=function(H,n,f,p={}){$u=[],sf=[],ec(this);const w=p.size||5,k=p.type||"arc",ne=p.radius||0,me=p.ignoreConnectors||["smooth"],De=this.graph,it=De.model.getEdges();if(it.length===1)return el(Cc(H,n,f),w,k,ne);const Pt=this.cell,ht=it.indexOf(Pt),Ft=De.options.connecting.connector||{},tn=it.filter((ri,yn)=>{const ao=ri.getConnector()||Ft;return me.includes(ao.name)?!1:yn>ht?ao.name!=="jumpover":!0}),On=tn.map(ri=>De.findViewByCell(ri)),Rn=Cc(H,n,f),nr=On.map(ri=>ri==null?[]:ri===this?Rn:Cc(ri.sourcePoint,ri.targetPoint,ri.routePoints)),or=[];Rn.forEach(ri=>{const yn=tn.reduce((ao,Ks,Qs)=>{if(Ks!==Pt){const Za=hc(ri,nr[Qs]);ao.push(...Za)}return ao},[]).sort((ao,Ks)=>Oc(ri.start,ao)-Oc(ri.start,Ks));yn.length>0?or.push(...Ll(ri,yn,w)):or.push(ri)});const Dr=el(or,w,k,ne);return $u=[],sf=[],p.raw?Dr:Dr.serialize()};var Tc;(function(H){H.presets=m,H.registry=x.create({type:"connector"}),H.registry.register(H.presets,!0)})(Tc||(Tc={}));var rd=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class oh extends d.Basecoat{constructor(n={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(d.ObjectExt.cloneDeep(n)),this.changed={}}mutate(n,f={}){const p=f.unset===!0,w=f.silent===!0,k=[],ne=this.changing;this.changing=!0,ne||(this.previous=d.ObjectExt.cloneDeep(this.data),this.changed={});const me=this.data,De=this.previous,ze=this.changed;if(Object.keys(n).forEach(it=>{const Pt=it,ht=n[Pt];d.ObjectExt.isEqual(me[Pt],ht)||k.push(Pt),d.ObjectExt.isEqual(De[Pt],ht)?delete ze[Pt]:ze[Pt]=ht,p?delete me[Pt]:me[Pt]=ht}),!w&&k.length>0&&(this.pending=!0,this.pendingOptions=f,k.forEach(it=>{this.emit("change:*",{key:it,options:f,store:this,current:me[it],previous:De[it]})})),ne)return this;if(!w)for(;this.pending;)this.pending=!1,this.emit("changed",{current:me,previous:De,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(n,f){if(n==null)return this.data;const p=this.data[n];return p==null?f:p}getPrevious(n){if(this.previous){const f=this.previous[n];return f==null?void 0:f}}set(n,f,p){return n!=null&&(typeof n=="object"?this.mutate(n,f):this.mutate({[n]:f},p)),this}remove(n,f){const w={};let k;if(typeof n=="string")w[n]=void 0,k=f;else if(Array.isArray(n))n.forEach(ne=>w[ne]=void 0),k=f;else{for(const ne in this.data)w[ne]=void 0;k=n}return this.mutate(w,Object.assign(Object.assign({},k),{unset:!0})),this}getByPath(n){return d.ObjectExt.getByPath(this.data,n,"/")}setByPath(n,f,p={}){const w="/",k=Array.isArray(n)?[...n]:n.split(w),ne=Array.isArray(n)?n.join(w):n,me=k[0],De=k.length;if(p.propertyPath=ne,p.propertyValue=f,p.propertyPathArray=k,De===1)this.set(me,f,p);else{const ze={};let it=ze,Pt=me;for(let tn=1;tn<De;tn+=1){const On=k[tn],Rn=Number.isFinite(Number(On));it=it[Pt]=Rn?[]:{},Pt=On}d.ObjectExt.setByPath(ze,k,f,w);const ht=d.ObjectExt.cloneDeep(this.data);p.rewrite&&d.ObjectExt.unsetByPath(ht,n,w);const Ft=d.ObjectExt.merge(ht,ze);this.set(me,Ft[me],p)}return this}removeByPath(n,f){const p=Array.isArray(n)?n:n.split("/"),w=p[0];if(p.length===1)this.remove(w,f);else{const k=p.slice(1),ne=d.ObjectExt.cloneDeep(this.get(w));ne&&d.ObjectExt.unsetByPath(ne,k),this.set(w,ne,f)}return this}hasChanged(n){return n==null?Object.keys(this.changed).length>0:n in this.changed}getChanges(n){if(n==null)return this.hasChanged()?d.ObjectExt.cloneDeep(this.changed):null;const f=this.changing?this.previous:this.data,p={};let w;for(const k in n){const ne=n[k];d.ObjectExt.isEqual(f[k],ne)||(p[k]=ne,w=!0)}return w?d.ObjectExt.cloneDeep(p):null}toJSON(){return d.ObjectExt.cloneDeep(this.data)}clone(){const n=this.constructor;return new n(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}rd([d.Basecoat.dispose()],oh.prototype,"dispose",null);class tl{constructor(n){this.cell=n,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(n,f,p={},w="/"){const k=this.cell.getPropByPath(n),ne=d.ObjectExt.defaults(p,tl.defaultOptions),me=this.getTiming(ne.timing),De=this.getInterp(ne.interp,k,f);let ze=0;const it=Array.isArray(n)?n.join(w):n,Pt=Array.isArray(n)?n:n.split(w),ht=()=>{const Ft=new Date().getTime();ze===0&&(ze=Ft);let On=(Ft-ze)/ne.duration;On<1?this.ids[it]=requestAnimationFrame(ht):On=1;const Rn=De(me(On));this.cell.setPropByPath(Pt,Rn),p.progress&&p.progress(Object.assign({progress:On,currentValue:Rn},this.getArgs(it))),On===1&&(this.cell.notify("transition:complete",this.getArgs(it)),p.complete&&p.complete(this.getArgs(it)),this.cell.notify("transition:finish",this.getArgs(it)),p.finish&&p.finish(this.getArgs(it)),this.clean(it))};return setTimeout(()=>{this.stop(n,void 0,w),this.cache[it]={startValue:k,targetValue:f,options:ne},this.ids[it]=requestAnimationFrame(ht),this.cell.notify("transition:start",this.getArgs(it)),p.start&&p.start(this.getArgs(it))},p.delay),this.stop.bind(this,n,w,p)}stop(n,f={},p="/"){const w=Array.isArray(n)?n:n.split(p);return Object.keys(this.ids).filter(k=>d.ObjectExt.isEqual(w,k.split(p).slice(0,w.length))).forEach(k=>{cancelAnimationFrame(this.ids[k]);const ne=this.cache[k],me=this.getArgs(k),De=Object.assign(Object.assign({},ne.options),f),ze=De.jumpedToEnd;ze&&ne.targetValue!=null&&(this.cell.setPropByPath(k,ne.targetValue),this.cell.notify("transition:end",Object.assign({},me)),this.cell.notify("transition:complete",Object.assign({},me)),De.complete&&De.complete(Object.assign({},me)));const it=Object.assign({jumpedToEnd:ze},me);this.cell.notify("transition:stop",Object.assign({},it)),De.stop&&De.stop(Object.assign({},it)),this.cell.notify("transition:finish",Object.assign({},me)),De.finish&&De.finish(Object.assign({},me)),this.clean(k)}),this}clean(n){delete this.ids[n],delete this.cache[n]}getTiming(n){return typeof n=="string"?d.Timing[n]:n}getInterp(n,f,p){return n?n(f,p):typeof p=="number"?d.Interp.number(f,p):typeof p=="string"?p[0]==="#"?d.Interp.color(f,p):d.Interp.unit(f,p):d.Interp.object(f,p)}getArgs(n){const f=this.cache[n];return{path:n,startValue:f.startValue,targetValue:f.targetValue,cell:this.cell}}}(function(H){H.defaultOptions={delay:10,duration:100,timing:"linear"}})(tl||(tl={}));var dc=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k},Df=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class It extends d.Basecoat{static config(n){const{markup:f,propHooks:p,attrHooks:w}=n,k=Df(n,["markup","propHooks","attrHooks"]);f!=null&&(this.markup=f),p&&(this.propHooks=this.propHooks.slice(),Array.isArray(p)?this.propHooks.push(...p):typeof p=="function"?this.propHooks.push(p):Object.values(p).forEach(ne=>{typeof ne=="function"&&this.propHooks.push(ne)})),w&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),w)),this.defaults=d.ObjectExt.merge({},this.defaults,k)}static getMarkup(){return this.markup}static getDefaults(n){return n?this.defaults:d.ObjectExt.cloneDeep(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(n,f){return this.propHooks.reduce((p,w)=>w?d.FunctionExt.call(w,n,p):p,f)}get[Symbol.toStringTag](){return It.toStringTag}constructor(n={}){super();const p=this.constructor.getDefaults(!0),w=d.ObjectExt.merge({},this.preprocess(p),this.preprocess(n));this.id=w.id||d.StringExt.uuid(),this.store=new oh(w),this.animation=new tl(this),this.setup(),this.init(),this.postprocess(n)}init(){}get model(){return this._model}set model(n){this._model!==n&&(this._model=n)}preprocess(n,f){const p=n.id,k=this.constructor.applyPropHooks(this,n);return p==null&&f!==!0&&(k.id=d.StringExt.uuid()),k}postprocess(n){}setup(){this.store.on("change:*",n=>{const{key:f,current:p,previous:w,options:k}=n;this.notify("change:*",{key:f,options:k,current:p,previous:w,cell:this}),this.notify(`change:${f}`,{options:k,current:p,previous:w,cell:this});const ne=f;(ne==="source"||ne==="target")&&this.notify("change:terminal",{type:ne,current:p,previous:w,options:k,cell:this})}),this.store.on("changed",({options:n})=>this.notify("changed",{options:n,cell:this}))}notify(n,f){this.trigger(n,f);const p=this.model;return p&&(p.notify(`cell:${n}`,f),this.isNode()?p.notify(`node:${n}`,Object.assign(Object.assign({},f),{node:this})):this.isEdge()&&p.notify(`edge:${n}`,Object.assign(Object.assign({},f),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(n){return this.store===n.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(n,f){return n==null?this.store.get():this.store.get(n,f)}setProp(n,f,p){if(typeof n=="string")this.store.set(n,f,p);else{const w=this.preprocess(n,!0);this.store.set(d.ObjectExt.merge({},this.getProp(),w),f),this.postprocess(n)}return this}removeProp(n,f){return typeof n=="string"||Array.isArray(n)?this.store.removeByPath(n,f):this.store.remove(f),this}hasChanged(n){return n==null?this.store.hasChanged():this.store.hasChanged(n)}getPropByPath(n){return this.store.getByPath(n)}setPropByPath(n,f,p={}){return this.model&&(n==="children"?this._children=f?f.map(w=>this.model.getCell(w)).filter(w=>w!=null):null:n==="parent"&&(this._parent=f?this.model.getCell(f):null)),this.store.setByPath(n,f,p),this}removePropByPath(n,f={}){const p=Array.isArray(n)?n:n.split("/");return p[0]==="attrs"&&(f.dirty=!0),this.store.removeByPath(p,f),this}prop(n,f,p){return n==null?this.getProp():typeof n=="string"||Array.isArray(n)?arguments.length===1?this.getPropByPath(n):f==null?this.removePropByPath(n,p||{}):this.setPropByPath(n,f,p||{}):this.setProp(n,f||{})}previous(n){return this.store.getPrevious(n)}get zIndex(){return this.getZIndex()}set zIndex(n){n==null?this.removeZIndex():this.setZIndex(n)}getZIndex(){return this.store.get("zIndex")}setZIndex(n,f={}){return this.store.set("zIndex",n,f),this}removeZIndex(n={}){return this.store.remove("zIndex",n),this}toFront(n={}){const f=this.model;if(f){let p=f.getMaxZIndex(),w;n.deep?(w=this.getDescendants({deep:!0,breadthFirst:!0}),w.unshift(this)):w=[this],p=p-w.length+1;const k=f.total();let ne=f.indexOf(this)!==k-w.length;ne||(ne=w.some((me,De)=>me.getZIndex()!==p+De)),ne&&this.batchUpdate("to-front",()=>{p+=w.length,w.forEach((me,De)=>{me.setZIndex(p+De,n)})})}return this}toBack(n={}){const f=this.model;if(f){let p=f.getMinZIndex(),w;n.deep?(w=this.getDescendants({deep:!0,breadthFirst:!0}),w.unshift(this)):w=[this];let k=f.indexOf(this)!==0;k||(k=w.some((ne,me)=>ne.getZIndex()!==p+me)),k&&this.batchUpdate("to-back",()=>{p-=w.length,w.forEach((ne,me)=>{ne.setZIndex(p+me,n)})})}return this}get markup(){return this.getMarkup()}set markup(n){n==null?this.removeMarkup():this.setMarkup(n)}getMarkup(){let n=this.store.get("markup");return n==null&&(n=this.constructor.getMarkup()),n}setMarkup(n,f={}){return this.store.set("markup",n,f),this}removeMarkup(n={}){return this.store.remove("markup",n),this}get attrs(){return this.getAttrs()}set attrs(n){n==null?this.removeAttrs():this.setAttrs(n)}getAttrs(){const n=this.store.get("attrs");return n?Object.assign({},n):{}}setAttrs(n,f={}){if(n==null)this.removeAttrs(f);else{const p=w=>this.store.set("attrs",w,f);if(f.overwrite===!0)p(n);else{const w=this.getAttrs();f.deep===!1?p(Object.assign(Object.assign({},w),n)):p(d.ObjectExt.merge({},w,n))}}return this}replaceAttrs(n,f={}){return this.setAttrs(n,Object.assign(Object.assign({},f),{overwrite:!0}))}updateAttrs(n,f={}){return this.setAttrs(n,Object.assign(Object.assign({},f),{deep:!1}))}removeAttrs(n={}){return this.store.remove("attrs",n),this}getAttrDefinition(n){if(!n)return null;const p=this.constructor.getAttrHooks()||{};let w=p[n]||ct.registry.get(n);if(!w){const k=d.StringExt.camelCase(n);w=p[k]||ct.registry.get(k)}return w||null}getAttrByPath(n){return n==null||n===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(n))}setAttrByPath(n,f,p={}){return this.setPropByPath(this.prefixAttrPath(n),f,p),this}removeAttrByPath(n,f={}){return this.removePropByPath(this.prefixAttrPath(n),f),this}prefixAttrPath(n){return Array.isArray(n)?["attrs"].concat(n):`attrs/${n}`}attr(n,f,p){return n==null?this.getAttrByPath():typeof n=="string"||Array.isArray(n)?arguments.length===1?this.getAttrByPath(n):f==null?this.removeAttrByPath(n,p||{}):this.setAttrByPath(n,f,p||{}):this.setAttrs(n,f||{})}get visible(){return this.isVisible()}set visible(n){this.setVisible(n)}setVisible(n,f={}){return this.store.set("visible",n,f),this}isVisible(){return this.store.get("visible")!==!1}show(n={}){return this.isVisible()||this.setVisible(!0,n),this}hide(n={}){return this.isVisible()&&this.setVisible(!1,n),this}toggleVisible(n,f={}){const p=typeof n=="boolean"?n:!this.isVisible(),w=typeof n=="boolean"?f:n;return p?this.show(w):this.hide(w),this}get data(){return this.getData()}set data(n){this.setData(n)}getData(){return this.store.get("data")}setData(n,f={}){if(n==null)this.removeData(f);else{const p=w=>this.store.set("data",w,f);if(f.overwrite===!0)p(n);else{const w=this.getData();f.deep===!1?p(typeof n=="object"?Object.assign(Object.assign({},w),n):n):p(d.ObjectExt.merge({},w,n))}}return this}replaceData(n,f={}){return this.setData(n,Object.assign(Object.assign({},f),{overwrite:!0}))}updateData(n,f={}){return this.setData(n,Object.assign(Object.assign({},f),{deep:!1}))}removeData(n={}){return this.store.remove("data",n),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const n=this.getParentId();if(n&&this.model){const f=this.model.getCell(n);return this._parent=f,f}return null}getChildren(){const n=this.store.get("children");if(n&&n.length&&this.model){const f=n.map(p=>{var w;return(w=this.model)===null||w===void 0?void 0:w.getCell(p)}).filter(p=>p!=null);return this._children=f,[...f]}return null}hasParent(){return this.parent!=null}isParentOf(n){return n!=null&&n.getParent()===this}isChildOf(n){return n!=null&&this.getParent()===n}eachChild(n,f){return this.children&&this.children.forEach(n,f),this}filterChild(n,f){return this.children?this.children.filter(n,f):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(n){return this.children==null?-1:this.children.indexOf(n)}getChildAt(n){return this.children!=null&&n>=0?this.children[n]:null}getAncestors(n={}){const f=[];let p=this.getParent();for(;p;)f.push(p),p=n.deep!==!1?p.getParent():null;return f}getDescendants(n={}){if(n.deep!==!1){if(n.breadthFirst){const f=[],p=this.getChildren()||[];for(;p.length>0;){const w=p.shift(),k=w.getChildren();f.push(w),k&&p.push(...k)}return f}{const f=this.getChildren()||[];return f.forEach(p=>{f.push(...p.getDescendants(n))}),f}}return this.getChildren()||[]}isDescendantOf(n,f={}){if(n==null)return!1;if(f.deep!==!1){let p=this.getParent();for(;p;){if(p===n)return!0;p=p.getParent()}return!1}return this.isChildOf(n)}isAncestorOf(n,f={}){return n==null?!1:n.isDescendantOf(this,f)}contains(n){return this.isAncestorOf(n)}getCommonAncestor(...n){return It.getCommonAncestor(this,...n)}setParent(n,f={}){return this._parent=n,n?this.store.set("parent",n.id,f):this.store.remove("parent",f),this}setChildren(n,f={}){return this._children=n,n!=null?this.store.set("children",n.map(p=>p.id),f):this.store.remove("children",f),this}unembed(n,f={}){const p=this.children;if(p!=null&&n!=null){const w=this.getChildIndex(n);w!==-1&&(p.splice(w,1),n.setParent(null,f),this.setChildren(p,f))}return this}embed(n,f={}){return n.addTo(this,f),this}addTo(n,f={}){return It.isCell(n)?n.addChild(this,f):n.addCell(this,f),this}insertTo(n,f,p={}){return n.insertChild(this,f,p),this}addChild(n,f={}){return this.insertChild(n,void 0,f)}insertChild(n,f,p={}){if(n!=null&&n!==this){const w=n.getParent(),k=this!==w;let ne=f;if(ne==null&&(ne=this.getChildCount(),k||(ne-=1)),w){const De=w.getChildren();if(De){const ze=De.indexOf(n);ze>=0&&(n.setParent(null,p),De.splice(ze,1),w.setChildren(De,p))}}let me=this.children;if(me==null?(me=[],me.push(n)):me.splice(ne,0,n),n.setParent(this,p),this.setChildren(me,p),k&&this.model){const De=this.model.getIncomingEdges(this),ze=this.model.getOutgoingEdges(this);De&&De.forEach(it=>it.updateParent(p)),ze&&ze.forEach(it=>it.updateParent(p))}this.model&&this.model.addCell(n,p)}return this}removeFromParent(n={}){const f=this.getParent();if(f!=null){const p=f.getChildIndex(this);f.removeChildAt(p,n)}return this}removeChild(n,f={}){const p=this.getChildIndex(n);return this.removeChildAt(p,f)}removeChildAt(n,f={}){const p=this.getChildAt(n);return this.children!=null&&p!=null&&(this.unembed(p,f),p.remove(f)),p}remove(n={}){return this.batchUpdate("remove",()=>{const f=this.getParent();f&&f.removeChild(this,n),n.deep!==!1&&this.eachChild(p=>p.remove(n)),this.model&&this.model.removeCell(this,n)}),this}transition(n,f,p={},w="/"){return this.animation.start(n,f,p,w)}stopTransition(n,f,p="/"){return this.animation.stop(n,f,p),this}getTransitions(){return this.animation.get()}translate(n,f,p){return this}scale(n,f,p,w){return this}addTools(n,f,p){const w=Array.isArray(n)?n:[n],k=typeof f=="string"?f:null,ne=typeof f=="object"?f:typeof p=="object"?p:{};if(ne.reset)return this.setTools({name:k,items:w,local:ne.local},ne);let me=d.ObjectExt.cloneDeep(this.getTools());if(me==null||k==null||me.name===k)return me==null&&(me={}),me.items||(me.items=[]),me.name=k,me.items=[...me.items,...w],this.setTools(Object.assign({},me),ne)}setTools(n,f={}){return n==null?this.removeTools():this.store.set("tools",It.normalizeTools(n),f),this}getTools(){return this.store.get("tools")}removeTools(n={}){return this.store.remove("tools",n),this}hasTools(n){const f=this.getTools();return f==null?!1:n==null?!0:f.name===n}hasTool(n){const f=this.getTools();return f==null?!1:f.items.some(p=>typeof p=="string"?p===n:p.name===n)}removeTool(n,f={}){const p=d.ObjectExt.cloneDeep(this.getTools());if(p){let w=!1;const k=p.items.slice(),ne=me=>{k.splice(me,1),w=!0};if(typeof n=="number")ne(n);else for(let me=k.length-1;me>=0;me-=1){const De=k[me];(typeof De=="string"?De===n:De.name===n)&&ne(me)}w&&(p.items=k,this.setTools(p,f))}return this}getBBox(n){return new v.Rectangle}getConnectionPoint(n,f){return new v.Point}toJSON(n={}){const f=Object.assign({},this.store.get()),p=Object.prototype.toString,w=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!f.shape){const tn=this.constructor;throw new Error(`Unable to serialize ${w} missing "shape" prop, check the ${w} "${tn.name||p.call(tn)}"`)}const k=this.constructor,ne=n.diff===!0,me=f.attrs||{},De=k.getDefaults(!0),ze=ne?this.preprocess(De,!0):De,it=ze.attrs||{},Pt={};Object.entries(f).forEach(([tn,On])=>{if(On!=null&&!Array.isArray(On)&&typeof On=="object"&&!d.ObjectExt.isPlainObject(On))throw new Error(`Can only serialize ${w} with plain-object props, but got a "${p.call(On)}" type of key "${tn}" on ${w} "${this.id}"`);if(tn!=="attrs"&&tn!=="shape"&&ne){const Rn=ze[tn];d.ObjectExt.isEqual(On,Rn)&&delete f[tn]}}),Object.keys(me).forEach(tn=>{const On=me[tn],Rn=it[tn];Object.keys(On).forEach(nr=>{const or=On[nr],Dr=Rn?Rn[nr]:null;or!=null&&typeof or=="object"&&!Array.isArray(or)?Object.keys(or).forEach(ri=>{const yn=or[ri];if(Rn==null||Dr==null||!d.ObjectExt.isObject(Dr)||!d.ObjectExt.isEqual(Dr[ri],yn)){Pt[tn]==null&&(Pt[tn]={}),Pt[tn][nr]==null&&(Pt[tn][nr]={});const ao=Pt[tn][nr];ao[ri]=yn}}):(Rn==null||!d.ObjectExt.isEqual(Dr,or))&&(Pt[tn]==null&&(Pt[tn]={}),Pt[tn][nr]=or)})});const ht=Object.assign(Object.assign({},f),{attrs:d.ObjectExt.isEmpty(Pt)?void 0:Pt});ht.attrs==null&&delete ht.attrs;const Ft=ht;return Ft.angle===0&&delete Ft.angle,d.ObjectExt.cloneDeep(Ft)}clone(n={}){if(!n.deep){const p=Object.assign({},this.store.get());n.keepId||delete p.id,delete p.parent,delete p.children;const w=this.constructor;return new w(p)}return It.deepClone(this)[this.id]}findView(n){return n.findViewByCell(this)}startBatch(n,f={},p=this.model){return this.notify("batch:start",{name:n,data:f,cell:this}),p&&p.startBatch(n,Object.assign(Object.assign({},f),{cell:this})),this}stopBatch(n,f={},p=this.model){return p&&p.stopBatch(n,Object.assign(Object.assign({},f),{cell:this})),this.notify("batch:stop",{name:n,data:f,cell:this}),this}batchUpdate(n,f,p){const w=this.model;this.startBatch(n,p,w);const k=f();return this.stopBatch(n,p,w),k}dispose(){this.removeFromParent(),this.store.dispose()}}It.defaults={},It.attrHooks={},It.propHooks=[],dc([d.Basecoat.dispose()],It.prototype,"dispose",null),function(H){function n(f){return typeof f=="string"?{items:[f]}:Array.isArray(f)?{items:f}:f.items?f:{items:[f]}}H.normalizeTools=n}(It||(It={})),function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&typeof w.isNode=="function"&&typeof w.isEdge=="function"&&typeof w.prop=="function"&&typeof w.attr=="function"}H.isCell=n}(It||(It={})),function(H){function n(...k){const ne=k.filter(De=>De!=null).map(De=>De.getAncestors()).sort((De,ze)=>De.length-ze.length);return ne.shift().find(De=>ne.every(ze=>ze.includes(De)))||null}H.getCommonAncestor=n;function f(k,ne={}){let me=null;for(let De=0,ze=k.length;De<ze;De+=1){const it=k[De];let Pt=it.getBBox(ne);if(Pt){if(it.isNode()){const ht=it.getAngle();ht!=null&&ht!==0&&(Pt=Pt.bbox(ht))}me=me==null?Pt:me.union(Pt)}}return me}H.getCellsBBox=f;function p(k){const ne=[k,...k.getDescendants({deep:!0})];return H.cloneCells(ne)}H.deepClone=p;function w(k){const ne=d.ArrayExt.uniq(k),me=ne.reduce((De,ze)=>(De[ze.id]=ze.clone(),De),{});return ne.forEach(De=>{const ze=me[De.id];if(ze.isEdge()){const ht=ze.getSourceCellId(),Ft=ze.getTargetCellId();ht&&me[ht]&&ze.setSource(Object.assign(Object.assign({},ze.getSource()),{cell:me[ht].id})),Ft&&me[Ft]&&ze.setTarget(Object.assign(Object.assign({},ze.getTarget()),{cell:me[Ft].id}))}const it=De.getParent();it&&me[it.id]&&ze.setParent(me[it.id]);const Pt=De.getChildren();if(Pt&&Pt.length){const ht=Pt.reduce((Ft,tn)=>(me[tn.id]&&Ft.push(me[tn.id]),Ft),[]);ht.length>0&&ze.setChildren(ht)}}),me}H.cloneCells=w}(It||(It={})),function(H){H.config({propHooks(n){var{tools:f}=n,p=Df(n,["tools"]);return f&&(p.tools=H.normalizeTools(f)),p}})}(It||(It={}));var Hu;(function(H){let n,f;function p(ne,me){return me?n!=null&&n.exist(ne):f!=null&&f.exist(ne)}H.exist=p;function w(ne){n=ne}H.setEdgeRegistry=w;function k(ne){f=ne}H.setNodeRegistry=k})(Hu||(Hu={}));class af{constructor(n){this.ports=[],this.groups={},this.init(d.ObjectExt.cloneDeep(n))}getPorts(){return this.ports}getGroup(n){return n!=null?this.groups[n]:null}getPortsByGroup(n){return this.ports.filter(f=>f.group===n||f.group==null&&n==null)}getPortsLayoutByGroup(n,f){const p=this.getPortsByGroup(n),w=n?this.getGroup(n):null,k=w?w.position:null,ne=k?k.name:null;let me;if(ne!=null){const Pt=Ke.registry.get(ne);if(Pt==null)return Ke.registry.onNotFound(ne);me=Pt}else me=Ke.presets.left;const De=p.map(Pt=>Pt&&Pt.position&&Pt.position.args||{}),ze=k&&k.args||{};return me(De,f,ze).map((Pt,ht)=>{const Ft=p[ht];return{portLayout:Pt,portId:Ft.id,portSize:Ft.size,portAttrs:Ft.attrs,labelSize:Ft.label.size,labelLayout:this.getPortLabelLayout(Ft,v.Point.create(Pt.position),f)}})}init(n){const{groups:f,items:p}=n;f!=null&&Object.keys(f).forEach(w=>{this.groups[w]=this.parseGroup(f[w])}),Array.isArray(p)&&p.forEach(w=>{this.ports.push(this.parsePort(w))})}parseGroup(n){return Object.assign(Object.assign({},n),{label:this.getLabel(n,!0),position:this.getPortPosition(n.position,!0)})}parsePort(n){const f=Object.assign({},n),p=this.getGroup(n.group)||{};return f.markup=f.markup||p.markup,f.attrs=d.ObjectExt.merge({},p.attrs,f.attrs),f.position=this.createPosition(p,f),f.label=d.ObjectExt.merge({},p.label,this.getLabel(f)),f.zIndex=this.getZIndex(p,f),f.size=Object.assign(Object.assign({},p.size),f.size),f}getZIndex(n,f){return typeof f.zIndex=="number"?f.zIndex:typeof n.zIndex=="number"||n.zIndex==="auto"?n.zIndex:"auto"}createPosition(n,f){return d.ObjectExt.merge({name:"left",args:{}},n.position,{args:f.args})}getPortPosition(n,f=!1){if(n==null){if(f)return{name:"left",args:{}}}else{if(typeof n=="string")return{name:n,args:{}};if(Array.isArray(n))return{name:"absolute",args:{x:n[0],y:n[1]}};if(typeof n=="object")return n}return{args:{}}}getPortLabelPosition(n,f=!1){if(n==null){if(f)return{name:"left",args:{}}}else{if(typeof n=="string")return{name:n,args:{}};if(typeof n=="object")return n}return{args:{}}}getLabel(n,f=!1){const p=n.label||{};return p.position=this.getPortLabelPosition(p.position,f),p}getPortLabelLayout(n,f,p){const w=n.label.position.name||"left",k=n.label.position.args||{},ne=js.registry.get(w)||js.presets.left;return ne?ne(f,p,k):null}}var wu=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class Go extends It{get[Symbol.toStringTag](){return Go.toStringTag}constructor(n={}){super(n),this.initPorts()}preprocess(n,f){const{x:p,y:w,width:k,height:ne}=n,me=wu(n,["x","y","width","height"]);if(p!=null||w!=null){const De=me.position;me.position=Object.assign(Object.assign({},De),{x:p!=null?p:De?De.x:0,y:w!=null?w:De?De.y:0})}if(k!=null||ne!=null){const De=me.size;me.size=Object.assign(Object.assign({},De),{width:k!=null?k:De?De.width:0,height:ne!=null?ne:De?De.height:0})}return super.preprocess(me,f)}isNode(){return!0}size(n,f,p){return n===void 0?this.getSize():typeof n=="number"?this.setSize(n,f,p):this.setSize(n,f)}getSize(){const n=this.store.get("size");return n?Object.assign({},n):{width:1,height:1}}setSize(n,f,p){return typeof n=="object"?this.resize(n.width,n.height,f):this.resize(n,f,p),this}resize(n,f,p={}){this.startBatch("resize",p);const w=p.direction;if(w){const k=this.getSize();switch(w){case"left":case"right":f=k.height;break;case"top":case"bottom":n=k.width;break;default:break}let me={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[w];const De=v.Angle.normalize(this.getAngle()||0);p.absolute&&(me+=Math.floor((De+45)/90),me%=4);const ze=this.getBBox();let it;me===0?it=ze.getBottomLeft():me===1?it=ze.getCorner():me===2?it=ze.getTopRight():it=ze.getOrigin();const Pt=it.clone().rotate(-De,ze.getCenter()),ht=Math.sqrt(n*n+f*f)/2;let Ft=me*Math.PI/2;Ft+=Math.atan(me%2===0?f/n:n/f),Ft-=v.Angle.toRad(De);const On=v.Point.fromPolar(ht,Ft,Pt).clone().translate(n/-2,f/-2);this.store.set("size",{width:n,height:f},p),this.setPosition(On.x,On.y,p)}else this.store.set("size",{width:n,height:f},p);return this.stopBatch("resize",p),this}scale(n,f,p,w={}){const k=this.getBBox().scale(n,f,p==null?void 0:p);return this.startBatch("scale",w),this.setPosition(k.x,k.y,w),this.resize(k.width,k.height,w),this.stopBatch("scale"),this}position(n,f,p){return typeof n=="number"?this.setPosition(n,f,p):this.getPosition(n)}getPosition(n={}){if(n.relative){const p=this.getParent();if(p!=null&&p.isNode()){const w=this.getPosition(),k=p.getPosition();return{x:w.x-k.x,y:w.y-k.y}}}const f=this.store.get("position");return f?Object.assign({},f):{x:0,y:0}}setPosition(n,f,p={}){let w,k,ne;if(typeof n=="object"?(w=n.x,k=n.y,ne=f||{}):(w=n,k=f,ne=p||{}),ne.relative){const me=this.getParent();if(me!=null&&me.isNode()){const De=me.getPosition();w+=De.x,k+=De.y}}if(ne.deep){const me=this.getPosition();this.translate(w-me.x,k-me.y,ne)}else this.store.set("position",{x:w,y:k},ne);return this}translate(n=0,f=0,p={}){if(n===0&&f===0)return this;p.translateBy=p.translateBy||this.id;const w=this.getPosition();if(p.restrict!=null&&p.translateBy===this.id){const ne=this.getBBox({deep:!0}),me=p.restrict,De=w.x-ne.x,ze=w.y-ne.y,it=Math.max(me.x+De,Math.min(me.x+me.width+De-ne.width,w.x+n)),Pt=Math.max(me.y+ze,Math.min(me.y+me.height+ze-ne.height,w.y+f));n=it-w.x,f=Pt-w.y}const k={x:w.x+n,y:w.y+f};return p.tx=n,p.ty=f,p.transition?(typeof p.transition!="object"&&(p.transition={}),this.transition("position",k,Object.assign(Object.assign({},p.transition),{interp:d.Interp.object})),this.eachChild(ne=>{var me;((me=p.exclude)===null||me===void 0?void 0:me.includes(ne))||ne.translate(n,f,p)})):(this.startBatch("translate",p),this.store.set("position",k,p),this.eachChild(ne=>{var me;((me=p.exclude)===null||me===void 0?void 0:me.includes(ne))||ne.translate(n,f,p)}),this.stopBatch("translate",p)),this}angle(n,f){return n==null?this.getAngle():this.rotate(n,f)}getAngle(){return this.store.get("angle",0)}rotate(n,f={}){const p=this.getAngle();if(f.center){const w=this.getSize(),k=this.getPosition(),ne=this.getBBox().getCenter();ne.rotate(p-n,f.center);const me=ne.x-w.width/2-k.x,De=ne.y-w.height/2-k.y;this.startBatch("rotate",{angle:n,options:f}),this.setPosition(k.x+me,k.y+De,f),this.rotate(n,Object.assign(Object.assign({},f),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",f.absolute?n:(p+n)%360,f);return this}getBBox(n={}){if(n.deep){const f=this.getDescendants({deep:!0,breadthFirst:!0});return f.push(this),It.getCellsBBox(f)}return v.Rectangle.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(n,f){const p=this.getBBox(),w=p.getCenter(),k=n.getTerminal(f);if(k==null)return w;const ne=k.port;if(!ne||!this.hasPort(ne))return w;const me=this.getPort(ne);if(!me||!me.group)return w;const ze=this.getPortsPosition(me.group)[ne].position,it=v.Point.create(ze).translate(p.getOrigin()),Pt=this.getAngle();return Pt&&it.rotate(-Pt,w),it}fit(n={}){const p=(this.getChildren()||[]).filter(ze=>ze.isNode());if(p.length===0)return this;this.startBatch("fit-embeds",n),n.deep&&p.forEach(ze=>ze.fit(n));let{x:w,y:k,width:ne,height:me}=It.getCellsBBox(p);const De=d.NumberExt.normalizeSides(n.padding);return w-=De.left,k-=De.top,ne+=De.left+De.right,me+=De.bottom+De.top,this.store.set({position:{x:w,y:k},size:{width:ne,height:me}},n),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(n){this.setPortContainerMarkup(n)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||ve.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(n,f={}){return this.store.set("portContainerMarkup",ve.clone(n),f),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(n){this.setPortMarkup(n)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||ve.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(n,f={}){return this.store.set("portMarkup",ve.clone(n),f),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(n){this.setPortLabelMarkup(n)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||ve.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(n,f={}){return this.store.set("portLabelMarkup",ve.clone(n),f),this}get ports(){const n=this.store.get("ports",{items:[]});return n.items==null&&(n.items=[]),n}getPorts(){return d.ObjectExt.cloneDeep(this.ports.items)}getPortsByGroup(n){return this.getPorts().filter(f=>f.group===n)}getPort(n){return d.ObjectExt.cloneDeep(this.ports.items.find(f=>f.id&&f.id===n))}getPortAt(n){return this.ports.items[n]||null}hasPorts(){return this.ports.items.length>0}hasPort(n){return this.getPortIndex(n)!==-1}getPortIndex(n){const f=typeof n=="string"?n:n.id;return f!=null?this.ports.items.findIndex(p=>p.id===f):-1}getPortsPosition(n){const f=this.getSize();return this.port.getPortsLayoutByGroup(n,new v.Rectangle(0,0,f.width,f.height)).reduce((w,k)=>{const ne=k.portLayout;return w[k.portId]={position:Object.assign({},ne.position),angle:ne.angle||0},w},{})}getPortProp(n,f){return this.getPropByPath(this.prefixPortPath(n,f))}setPortProp(n,f,p,w){if(typeof f=="string"||Array.isArray(f)){const me=this.prefixPortPath(n,f),De=p;return this.setPropByPath(me,De,w)}const k=this.prefixPortPath(n),ne=f;return this.setPropByPath(k,ne,p)}removePortProp(n,f,p){return typeof f=="string"||Array.isArray(f)?this.removePropByPath(this.prefixPortPath(n,f),p):this.removePropByPath(this.prefixPortPath(n),f)}portProp(n,f,p,w){return f==null?this.getPortProp(n):typeof f=="string"||Array.isArray(f)?arguments.length===2?this.getPortProp(n,f):p==null?this.removePortProp(n,f,w):this.setPortProp(n,f,p,w):this.setPortProp(n,f,p)}prefixPortPath(n,f){const p=this.getPortIndex(n);if(p===-1)throw new Error(`Unable to find port with id: "${n}"`);return f==null||f===""?["ports","items",`${p}`]:Array.isArray(f)?["ports","items",`${p}`,...f]:`ports/items/${p}/${f}`}addPort(n,f){const p=[...this.ports.items];return p.push(n),this.setPropByPath("ports/items",p,f),this}addPorts(n,f){return this.setPropByPath("ports/items",[...this.ports.items,...n],f),this}insertPort(n,f,p){const w=[...this.ports.items];return w.splice(n,0,f),this.setPropByPath("ports/items",w,p),this}removePort(n,f={}){return this.removePortAt(this.getPortIndex(n),f)}removePortAt(n,f={}){if(n>=0){const p=[...this.ports.items];p.splice(n,1),f.rewrite=!0,this.setPropByPath("ports/items",p,f)}return this}removePorts(n,f){let p;if(Array.isArray(n)){if(p=f||{},n.length){p.rewrite=!0;const k=[...this.ports.items].filter(ne=>!n.some(me=>{const De=typeof me=="string"?me:me.id;return ne.id===De}));this.setPropByPath("ports/items",k,p)}}else p=n||{},p.rewrite=!0,this.setPropByPath("ports/items",[],p);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(n,f){return this.port.getPortsLayoutByGroup(n,f)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const n=this.ports,f={};n.items.forEach(ne=>{ne.id&&(f[ne.id]=!0)});const p={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(ne=>{ne.id&&!f[ne.id]&&(p[ne.id]=!0)});const k=this.model;k&&!d.ObjectExt.isEmpty(p)&&(k.getConnectedEdges(this,{incoming:!0}).forEach(De=>{const ze=De.getTargetPortId();ze&&p[ze]&&De.remove()}),k.getConnectedEdges(this,{outgoing:!0}).forEach(De=>{const ze=De.getSourcePortId();ze&&p[ze]&&De.remove()}))}validatePorts(){const n={},f=[];return this.ports.items.forEach(p=>{typeof p!="object"&&f.push(`Invalid port ${p}.`),p.id==null&&(p.id=this.generatePortId()),n[p.id]&&f.push("Duplicitied port id."),n[p.id]=!0}),f}generatePortId(){return d.StringExt.uuid()}updatePortData(){const n=this.validatePorts();if(n.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(n.join(" "));const f=this.port?this.port.getPorts():null;this.port=new af(this.ports);const p=this.port.getPorts(),w=f?p.filter(ne=>f.find(me=>me.id===ne.id)?null:ne):[...p],k=f?f.filter(ne=>p.find(me=>me.id===ne.id)?null:ne):[];w.length>0&&this.notify("ports:added",{added:w,cell:this,node:this}),k.length>0&&this.notify("ports:removed",{removed:k,cell:this,node:this})}}Go.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&typeof w.isNode=="function"&&typeof w.isEdge=="function"&&typeof w.prop=="function"&&typeof w.attr=="function"&&typeof w.size=="function"&&typeof w.position=="function"}H.isNode=n}(Go||(Go={})),function(H){H.config({propHooks(n){var{ports:f}=n,p=wu(n,["ports"]);return f&&(p.ports=Array.isArray(f)?{items:f}:f),p}})}(Go||(Go={})),function(H){H.registry=x.create({type:"node",process(n,f){if(Hu.exist(n,!0))throw new Error(`Node with name '${n}' was registered by anthor Edge`);if(typeof f=="function")return f.config({shape:n}),f;let p=H;const{inherit:w}=f,k=wu(f,["inherit"]);if(w)if(typeof w=="string"){const me=this.get(w);me==null?this.onNotFound(w,"inherited"):p=me}else p=w;k.constructorName==null&&(k.constructorName=n);const ne=p.define.call(p,k);return ne.config({shape:n}),ne}}),Hu.setNodeRegistry(H.registry)}(Go||(Go={})),function(H){let n=0;function f(k){return k?d.StringExt.pascalCase(k):(n+=1,`CustomNode${n}`)}function p(k){const{constructorName:ne,overwrite:me}=k,De=wu(k,["constructorName","overwrite"]),ze=d.ObjectExt.createClass(f(ne||De.shape),this);return ze.config(De),De.shape&&H.registry.register(De.shape,ze,me),ze}H.define=p;function w(k){const ne=k.shape||"rect",me=H.registry.get(ne);return me?new me(k):H.registry.onNotFound(ne)}H.create=w}(Go||(Go={}));var nl=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class ba extends It{get[Symbol.toStringTag](){return ba.toStringTag}constructor(n={}){super(n)}preprocess(n,f){const{source:p,sourceCell:w,sourcePort:k,sourcePoint:ne,target:me,targetCell:De,targetPort:ze,targetPoint:it}=n,ht=nl(n,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),Ft=tn=>typeof tn=="string"||typeof tn=="number";if(p!=null)if(It.isCell(p))ht.source={cell:p.id};else if(Ft(p))ht.source={cell:p};else if(v.Point.isPoint(p))ht.source=p.toJSON();else if(Array.isArray(p))ht.source={x:p[0],y:p[1]};else{const tn=p.cell;It.isCell(tn)?ht.source=Object.assign(Object.assign({},p),{cell:tn.id}):ht.source=p}if(w!=null||k!=null){let tn=ht.source;if(w!=null){const On=Ft(w)?w:w.id;tn?tn.cell=On:tn=ht.source={cell:On}}k!=null&&tn&&(tn.port=k)}else ne!=null&&(ht.source=v.Point.create(ne).toJSON());if(me!=null)if(It.isCell(me))ht.target={cell:me.id};else if(Ft(me))ht.target={cell:me};else if(v.Point.isPoint(me))ht.target=me.toJSON();else if(Array.isArray(me))ht.target={x:me[0],y:me[1]};else{const tn=me.cell;It.isCell(tn)?ht.target=Object.assign(Object.assign({},me),{cell:tn.id}):ht.target=me}if(De!=null||ze!=null){let tn=ht.target;if(De!=null){const On=Ft(De)?De:De.id;tn?tn.cell=On:tn=ht.target={cell:On}}ze!=null&&tn&&(tn.port=ze)}else it!=null&&(ht.target=v.Point.create(it).toJSON());return super.preprocess(ht,f)}setup(){super.setup(),this.on("change:labels",n=>this.onLabelsChanged(n)),this.on("change:vertices",n=>this.onVertexsChanged(n))}isEdge(){return!0}disconnect(n={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},n),this}get source(){return this.getSource()}set source(n){this.setSource(n)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(n,f,p={}){return this.setTerminal("source",n,f,p)}get target(){return this.getTarget()}set target(n){this.setTarget(n)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(n,f,p={}){return this.setTerminal("target",n,f,p)}getTerminal(n){return Object.assign({},this.store.get(n))}setTerminal(n,f,p,w={}){if(It.isCell(f))return this.store.set(n,d.ObjectExt.merge({},p,{cell:f.id}),w),this;const k=f;return v.Point.isPoint(f)||k.x!=null&&k.y!=null?(this.store.set(n,d.ObjectExt.merge({},p,{x:k.x,y:k.y}),w),this):(this.store.set(n,d.ObjectExt.cloneDeep(f),w),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(n){const f=this[n];if(v.Point.isPointLike(f))return v.Point.create(f);const p=this.getTerminalCell(n);return p?p.getConnectionPoint(this,n):new v.Point}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(n){if(this.model){const f=n==="source"?this.getSourceCellId():this.getTargetCellId();if(f)return this.model.getCell(f)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(n){let f=this;const p={};for(;f&&f.isEdge();){if(p[f.id])return null;p[f.id]=!0,f=f.getTerminalCell(n)}return f&&f.isNode()?f:null}get router(){return this.getRouter()}set router(n){n==null?this.removeRouter():this.setRouter(n)}getRouter(){return this.store.get("router")}setRouter(n,f,p){return typeof n=="object"?this.store.set("router",n,f):this.store.set("router",{name:n,args:f},p),this}removeRouter(n={}){return this.store.remove("router",n),this}get connector(){return this.getConnector()}set connector(n){n==null?this.removeConnector():this.setConnector(n)}getConnector(){return this.store.get("connector")}setConnector(n,f,p){return typeof n=="object"?this.store.set("connector",n,f):this.store.set("connector",{name:n,args:f},p),this}removeConnector(n={}){return this.store.remove("connector",n)}getDefaultLabel(){const n=this.constructor,f=this.store.get("defaultLabel")||n.defaultLabel||{};return d.ObjectExt.cloneDeep(f)}get labels(){return this.getLabels()}set labels(n){this.setLabels(n)}getLabels(){return[...this.store.get("labels",[])].map(n=>this.parseLabel(n))}setLabels(n,f={}){return this.store.set("labels",Array.isArray(n)?n:[n],f),this}insertLabel(n,f,p={}){const w=this.getLabels(),k=w.length;let ne=f!=null&&Number.isFinite(f)?f:k;return ne<0&&(ne=k+ne+1),w.splice(ne,0,this.parseLabel(n)),this.setLabels(w,p)}appendLabel(n,f={}){return this.insertLabel(n,-1,f)}getLabelAt(n){const f=this.getLabels();return n!=null&&Number.isFinite(n)?this.parseLabel(f[n]):null}setLabelAt(n,f,p={}){if(n!=null&&Number.isFinite(n)){const w=this.getLabels();w[n]=this.parseLabel(f),this.setLabels(w,p)}return this}removeLabelAt(n,f={}){const p=this.getLabels(),w=n!=null&&Number.isFinite(n)?n:-1,k=p.splice(w,1);return this.setLabels(p,f),k.length?k[0]:null}parseLabel(n){return typeof n=="string"?this.constructor.parseStringLabel(n):n}onLabelsChanged({previous:n,current:f}){const p=n&&f?f.filter(k=>n.find(ne=>k===ne||d.ObjectExt.isEqual(k,ne))?null:k):f?[...f]:[],w=n&&f?n.filter(k=>f.find(ne=>k===ne||d.ObjectExt.isEqual(k,ne))?null:k):n?[...n]:[];p.length>0&&this.notify("labels:added",{added:p,cell:this,edge:this}),w.length>0&&this.notify("labels:removed",{removed:w,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(n){this.setVertices(n)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(n,f={}){const p=Array.isArray(n)?n:[n];return this.store.set("vertices",p.map(w=>v.Point.toJSON(w)),f),this}insertVertex(n,f,p={}){const w=this.getVertices(),k=w.length;let ne=f!=null&&Number.isFinite(f)?f:k;return ne<0&&(ne=k+ne+1),w.splice(ne,0,v.Point.toJSON(n)),this.setVertices(w,p)}appendVertex(n,f={}){return this.insertVertex(n,-1,f)}getVertexAt(n){return n!=null&&Number.isFinite(n)?this.getVertices()[n]:null}setVertexAt(n,f,p={}){if(n!=null&&Number.isFinite(n)){const w=this.getVertices();w[n]=f,this.setVertices(w,p)}return this}removeVertexAt(n,f={}){const p=this.getVertices(),w=n!=null&&Number.isFinite(n)?n:-1;return p.splice(w,1),this.setVertices(p,f)}onVertexsChanged({previous:n,current:f}){const p=n&&f?f.filter(k=>n.find(ne=>v.Point.equals(k,ne))?null:k):f?[...f]:[],w=n&&f?n.filter(k=>f.find(ne=>v.Point.equals(k,ne))?null:k):n?[...n]:[];p.length>0&&this.notify("vertexs:added",{added:p,cell:this,edge:this}),w.length>0&&this.notify("vertexs:removed",{removed:w,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||ve.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(n,f,p={}){return p.translateBy=p.translateBy||this.id,p.tx=n,p.ty=f,this.applyToPoints(w=>({x:(w.x||0)+n,y:(w.y||0)+f}),p)}scale(n,f,p,w={}){return this.applyToPoints(k=>v.Point.create(k).scale(n,f,p).toJSON(),w)}applyToPoints(n,f={}){const p={},w=this.getSource(),k=this.getTarget();v.Point.isPointLike(w)&&(p.source=n(w)),v.Point.isPointLike(k)&&(p.target=n(k));const ne=this.getVertices();return ne.length>0&&(p.vertices=ne.map(n)),this.store.set(p,f),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const n=[this.getSourcePoint(),...this.getVertices().map(f=>v.Point.create(f)),this.getTargetPoint()];return new v.Polyline(n)}updateParent(n){let f=null;const p=this.getSourceCell(),w=this.getTargetCell(),k=this.getParent();return p&&w&&(p===w||p.isDescendantOf(w)?f=w:w.isDescendantOf(p)?f=p:f=It.getCommonAncestor(p,w)),k&&f&&f.id!==k.id&&k.unembed(this,n),f&&(!k||k.id!==f.id)&&f.embed(this,n),f}hasLoop(n={}){const f=this.getSource(),p=this.getTarget(),w=f.cell,k=p.cell;if(!w||!k)return!1;let ne=w===k;if(!ne&&n.deep&&this._model){const me=this.getSourceCell(),De=this.getTargetCell();me&&De&&(ne=me.isAncestorOf(De,n)||De.isAncestorOf(me,n))}return ne}getFragmentAncestor(){const n=[this,this.getSourceNode(),this.getTargetNode()].filter(f=>f!=null);return this.getCommonAncestor(...n)}isFragmentDescendantOf(n){const f=this.getFragmentAncestor();return!!f&&(f.id===n.id||f.isDescendantOf(n))}}ba.defaults={},function(H){function n(f,p){const w=f,k=p;return w.cell===k.cell?w.port===k.port||w.port==null&&k.port==null:!1}H.equalTerminals=n}(ba||(ba={})),function(H){H.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function n(f){return{attrs:{label:{text:f}}}}H.parseStringLabel=n}(ba||(ba={})),function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&typeof w.isNode=="function"&&typeof w.isEdge=="function"&&typeof w.prop=="function"&&typeof w.attr=="function"&&typeof w.disconnect=="function"&&typeof w.getSource=="function"&&typeof w.getTarget=="function"}H.isEdge=n}(ba||(ba={})),function(H){H.registry=x.create({type:"edge",process(n,f){if(Hu.exist(n,!1))throw new Error(`Edge with name '${n}' was registered by anthor Node`);if(typeof f=="function")return f.config({shape:n}),f;let p=H;const{inherit:w="edge"}=f,k=nl(f,["inherit"]);if(typeof w=="string"){const me=this.get(w||"edge");me==null&&w?this.onNotFound(w,"inherited"):p=me}else p=w;k.constructorName==null&&(k.constructorName=n);const ne=p.define.call(p,k);return ne.config({shape:n}),ne}}),Hu.setEdgeRegistry(H.registry)}(ba||(ba={})),function(H){let n=0;function f(k){return k?d.StringExt.pascalCase(k):(n+=1,`CustomEdge${n}`)}function p(k){const{constructorName:ne,overwrite:me}=k,De=nl(k,["constructorName","overwrite"]),ze=d.ObjectExt.createClass(f(ne||De.shape),this);return ze.config(De),De.shape&&H.registry.register(De.shape,ze,me),ze}H.define=p;function w(k){const ne=k.shape||"edge",me=H.registry.get(ne);return me?new me(k):H.registry.onNotFound(ne)}H.create=w}(ba||(ba={})),function(H){const n="basic.edge";H.config({shape:n,propHooks(f){const{label:p,vertices:w}=f,k=nl(f,["label","vertices"]);if(p){k.labels==null&&(k.labels=[]);const ne=typeof p=="string"?H.parseStringLabel(p):p;k.labels.push(ne)}return w&&Array.isArray(w)&&(k.vertices=w.map(ne=>v.Point.create(ne).toJSON())),k}}),H.registry.register(n,H)}(ba||(ba={}));var _h=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class gc extends d.Basecoat{constructor(n,f={}){super(),this.length=0,this.comparator=f.comparator||"zIndex",this.clean(),n&&this.reset(n,{silent:!0})}toJSON(){return this.cells.map(n=>n.toJSON())}add(n,f,p){let w,k;typeof f=="number"?(w=f,k=Object.assign({merge:!1},p)):(w=this.length,k=Object.assign({merge:!1},f)),w>this.length&&(w=this.length),w<0&&(w+=this.length+1);const ne=Array.isArray(n)?n:[n],me=this.comparator&&typeof f!="number"&&k.sort!==!1,De=this.comparator||null;let ze=!1;const it=[],Pt=[];return ne.forEach(ht=>{const Ft=this.get(ht);Ft?k.merge&&!ht.isSameStore(Ft)&&(Ft.setProp(ht.getProp(),p),Pt.push(Ft),me&&!ze&&(De==null||typeof De=="function"?ze=Ft.hasChanged():typeof De=="string"?ze=Ft.hasChanged(De):ze=De.some(tn=>Ft.hasChanged(tn)))):(it.push(ht),this.reference(ht))}),it.length&&(me&&(ze=!0),this.cells.splice(w,0,...it),this.length=this.cells.length),ze&&this.sort({silent:!0}),k.silent||(it.forEach((ht,Ft)=>{const tn={cell:ht,index:w+Ft,options:k};this.trigger("added",tn),k.dryrun||ht.notify("added",Object.assign({},tn))}),ze&&this.trigger("sorted"),(it.length||Pt.length)&&this.trigger("updated",{added:it,merged:Pt,removed:[],options:k})),this}remove(n,f={}){const p=Array.isArray(n)?n:[n],w=this.removeCells(p,f);return!f.silent&&w.length>0&&this.trigger("updated",{options:f,removed:w,added:[],merged:[]}),Array.isArray(n)?w:w[0]}removeCells(n,f){const p=[];for(let w=0;w<n.length;w+=1){const k=this.get(n[w]);if(k==null)continue;const ne=this.cells.indexOf(k);this.cells.splice(ne,1),this.length-=1,delete this.map[k.id],p.push(k),this.unreference(k),f.dryrun||k.remove(),f.silent||(this.trigger("removed",{cell:k,index:ne,options:f}),f.dryrun||k.notify("removed",{cell:k,index:ne,options:f}))}return p}reset(n,f={}){const p=this.cells.slice();if(p.forEach(w=>this.unreference(w)),this.clean(),this.add(n,Object.assign({silent:!0},f)),!f.silent){const w=this.cells.slice();this.trigger("reseted",{options:f,previous:p,current:w});const k=[],ne=[];w.forEach(me=>{p.some(ze=>ze.id===me.id)||k.push(me)}),p.forEach(me=>{w.some(ze=>ze.id===me.id)||ne.push(me)}),this.trigger("updated",{options:f,added:k,removed:ne,merged:[]})}return this}push(n,f){return this.add(n,this.length,f)}pop(n){const f=this.at(this.length-1);return this.remove(f,n)}unshift(n,f){return this.add(n,0,f)}shift(n){const f=this.at(0);return this.remove(f,n)}get(n){if(n==null)return null;const f=typeof n=="string"||typeof n=="number"?n:n.id;return this.map[f]||null}has(n){return this.get(n)!=null}at(n){return n<0&&(n+=this.length),this.cells[n]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(n){return this.cells.indexOf(n)}toArray(){return this.cells.slice()}sort(n={}){return this.comparator!=null&&(this.cells=d.ArrayExt.sortBy(this.cells,this.comparator),n.silent||this.trigger("sorted")),this}clone(){const n=this.constructor;return new n(this.cells.slice(),{comparator:this.comparator})}reference(n){this.map[n.id]=n,n.on("*",this.notifyCellEvent,this)}unreference(n){n.off("*",this.notifyCellEvent,this),delete this.map[n.id]}notifyCellEvent(n,f){const p=f.cell;this.trigger(`cell:${n}`,f),p&&(p.isNode()?this.trigger(`node:${n}`,Object.assign(Object.assign({},f),{node:p})):p.isEdge()&&this.trigger(`edge:${n}`,Object.assign(Object.assign({},f),{edge:p})))}clean(){this.length=0,this.cells=[],this.map={}}dispose(){this.reset([])}}_h([gc.dispose()],gc.prototype,"dispose",null);var hl=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class ho extends d.Basecoat{get[Symbol.toStringTag](){return ho.toStringTag}constructor(n=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new gc(n),this.setup()}notify(n,f){this.trigger(n,f);const p=this.graph;return p&&(n==="sorted"||n==="reseted"||n==="updated"?p.trigger(`model:${n}`,f):p.trigger(n,f)),this}setup(){const n=this.collection;n.on("sorted",()=>this.notify("sorted",null)),n.on("updated",f=>this.notify("updated",f)),n.on("cell:change:zIndex",()=>this.sortOnChangeZ()),n.on("added",({cell:f})=>{this.onCellAdded(f)}),n.on("removed",f=>{const p=f.cell;this.onCellRemoved(p,f.options),this.notify("cell:removed",f),p.isNode()?this.notify("node:removed",Object.assign(Object.assign({},f),{node:p})):p.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},f),{edge:p}))}),n.on("reseted",f=>{this.onReset(f.current),this.notify("reseted",f)}),n.on("edge:change:source",({edge:f})=>this.onEdgeTerminalChanged(f,"source")),n.on("edge:change:target",({edge:f})=>{this.onEdgeTerminalChanged(f,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(n){const f=n.id;n.isEdge()?(n.updateParent(),this.edges[f]=!0,this.onEdgeTerminalChanged(n,"source"),this.onEdgeTerminalChanged(n,"target")):this.nodes[f]=!0}onCellRemoved(n,f){const p=n.id;if(n.isEdge()){delete this.edges[p];const w=n.getSource(),k=n.getTarget();if(w&&w.cell){const ne=this.outgoings[w.cell],me=ne?ne.indexOf(p):-1;me>=0&&(ne.splice(me,1),ne.length===0&&delete this.outgoings[w.cell])}if(k&&k.cell){const ne=this.incomings[k.cell],me=ne?ne.indexOf(p):-1;me>=0&&(ne.splice(me,1),ne.length===0&&delete this.incomings[k.cell])}}else delete this.nodes[p];f.clear||(f.disconnectEdges?this.disconnectConnectedEdges(n,f):this.removeConnectedEdges(n,f)),n.model===this&&(n.model=null)}onReset(n){this.nodes={},this.edges={},this.outgoings={},this.incomings={},n.forEach(f=>this.onCellAdded(f))}onEdgeTerminalChanged(n,f){const p=f==="source"?this.outgoings:this.incomings,w=n.previous(f);if(w&&w.cell){const ne=It.isCell(w.cell)?w.cell.id:w.cell,me=p[ne],De=me?me.indexOf(n.id):-1;De>=0&&(me.splice(De,1),me.length===0&&delete p[ne])}const k=n.getTerminal(f);if(k&&k.cell){const ne=It.isCell(k.cell)?k.cell.id:k.cell,me=p[ne]||[];me.indexOf(n.id)===-1&&me.push(n.id),p[ne]=me}}prepareCell(n,f){return!n.model&&(!f||!f.dryrun)&&(n.model=this),n.zIndex==null&&n.setZIndex(this.getMaxZIndex()+1,{silent:!0}),n}resetCells(n,f={}){return n.map(p=>this.prepareCell(p,Object.assign(Object.assign({},f),{dryrun:!0}))),this.collection.reset(n,f),n.map(p=>this.prepareCell(p,{options:f})),this}clear(n={}){const f=this.getCells();if(f.length===0)return this;const p=Object.assign(Object.assign({},n),{clear:!0});return this.batchUpdate("clear",()=>{const w=f.sort((k,ne)=>{const me=k.isEdge()?1:2,De=ne.isEdge()?1:2;return me-De});for(;w.length>0;){const k=w.shift();k&&k.remove(p)}},p),this}addNode(n,f={}){const p=Go.isNode(n)?n:this.createNode(n);return this.addCell(p,f),p}updateNode(n,f={}){const p=this.createNode(n),w=p.getProp();return p.dispose(),this.updateCell(w,f)}createNode(n){return Go.create(n)}addEdge(n,f={}){const p=ba.isEdge(n)?n:this.createEdge(n);return this.addCell(p,f),p}createEdge(n){return ba.create(n)}updateEdge(n,f={}){const p=this.createEdge(n),w=p.getProp();return p.dispose(),this.updateCell(w,f)}addCell(n,f={}){return Array.isArray(n)?this.addCells(n,f):(!this.collection.has(n)&&!this.addings.has(n)&&(this.addings.set(n,!0),this.collection.add(this.prepareCell(n,f),f),n.eachChild(p=>this.addCell(p,f)),this.addings.delete(n)),this)}addCells(n,f={}){const p=n.length;if(p===0)return this;const w=Object.assign(Object.assign({},f),{position:p-1,maxPosition:p-1});return this.startBatch("add",Object.assign(Object.assign({},w),{cells:n})),n.forEach(k=>{this.addCell(k,w),w.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},w),{cells:n})),this}updateCell(n,f={}){const p=n.id&&this.getCell(n.id);return p?this.batchUpdate("update",()=>(Object.entries(n).forEach(([w,k])=>p.setProp(w,k,f)),!0),n):!1}removeCell(n,f={}){const p=typeof n=="string"?this.getCell(n):n;return p&&this.has(p)?this.collection.remove(p,f):null}updateCellId(n,f){if(n.id===f)return;this.startBatch("update",{id:f}),n.prop("id",f);const p=n.clone({keepId:!0});return this.addCell(p),this.getConnectedEdges(n).forEach(k=>{const ne=k.getSourceCell(),me=k.getTargetCell();ne===n&&k.setSource(Object.assign(Object.assign({},k.getSource()),{cell:f})),me===n&&k.setTarget(Object.assign(Object.assign({},k.getTarget()),{cell:f}))}),this.removeCell(n),this.stopBatch("update",{id:f}),p}removeCells(n,f={}){return n.length?this.batchUpdate("remove",()=>n.map(p=>this.removeCell(p,f))):[]}removeConnectedEdges(n,f={}){const p=this.getConnectedEdges(n);return p.forEach(w=>{w.remove(f)}),p}disconnectConnectedEdges(n,f={}){const p=typeof n=="string"?n:n.id;this.getConnectedEdges(n).forEach(w=>{const k=w.getSourceCellId(),ne=w.getTargetCellId();k===p&&w.setSource({x:0,y:0},f),ne===p&&w.setTarget({x:0,y:0},f)})}has(n){return this.collection.has(n)}total(){return this.collection.length}indexOf(n){return this.collection.indexOf(n)}getCell(n){return this.collection.get(n)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const n=this.collection.first();return n&&n.getZIndex()||0}getMaxZIndex(){const n=this.collection.last();return n&&n.getZIndex()||0}getCellsFromCache(n){return n?Object.keys(n).map(f=>this.getCell(f)).filter(f=>f!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(n){const f=typeof n=="string"?n:n.id,p=this.outgoings[f];return p?p.map(w=>this.getCell(w)).filter(w=>w&&w.isEdge()):null}getIncomingEdges(n){const f=typeof n=="string"?n:n.id,p=this.incomings[f];return p?p.map(w=>this.getCell(w)).filter(w=>w&&w.isEdge()):null}getConnectedEdges(n,f={}){const p=[],w=typeof n=="string"?this.getCell(n):n;if(w==null)return p;const k={},ne=f.indirect;let me=f.incoming,De=f.outgoing;me==null&&De==null&&(me=De=!0);const ze=(it,Pt)=>{const ht=Pt?this.getOutgoingEdges(it):this.getIncomingEdges(it);if(ht!=null&&ht.forEach(Ft=>{k[Ft.id]||(p.push(Ft),k[Ft.id]=!0,ne&&(me&&ze(Ft,!1),De&&ze(Ft,!0)))}),ne&&it.isEdge()){const Ft=Pt?it.getTargetCell():it.getSourceCell();Ft&&Ft.isEdge()&&(k[Ft.id]||(p.push(Ft),ze(Ft,Pt)))}};if(De&&ze(w,!0),me&&ze(w,!1),f.deep){const it=w.getDescendants({deep:!0}),Pt={};it.forEach(Ft=>{Ft.isNode()&&(Pt[Ft.id]=!0)});const ht=(Ft,tn)=>{const On=tn?this.getOutgoingEdges(Ft.id):this.getIncomingEdges(Ft.id);On!=null&&On.forEach(Rn=>{if(!k[Rn.id]){const nr=Rn.getSourceCell(),or=Rn.getTargetCell();if(!f.enclosed&&nr&&Pt[nr.id]&&or&&Pt[or.id])return;p.push(Rn),k[Rn.id]=!0}})};it.forEach(Ft=>{Ft.isEdge()||(De&&ht(Ft,!0),me&&ht(Ft,!1))})}return p}isBoundary(n,f){const p=typeof n=="string"?this.getCell(n):n,w=f?this.getIncomingEdges(p):this.getOutgoingEdges(p);return w==null||w.length===0}getBoundaryNodes(n){const f=[];return Object.keys(this.nodes).forEach(p=>{if(this.isBoundary(p,n)){const w=this.getCell(p);w&&f.push(w)}}),f}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(n){return this.isBoundary(n,!0)}isLeaf(n){return this.isBoundary(n,!1)}getNeighbors(n,f={}){let p=f.incoming,w=f.outgoing;p==null&&w==null&&(p=w=!0);const ne=this.getConnectedEdges(n,f).reduce((me,De)=>{const ze=De.hasLoop(f),it=De.getSourceCell(),Pt=De.getTargetCell();return p&&it&&it.isNode()&&!me[it.id]&&(ze||it!==n&&(!f.deep||!it.isDescendantOf(n)))&&(me[it.id]=it),w&&Pt&&Pt.isNode()&&!me[Pt.id]&&(ze||Pt!==n&&(!f.deep||!Pt.isDescendantOf(n)))&&(me[Pt.id]=Pt),me},{});if(n.isEdge()){if(p){const me=n.getSourceCell();me&&me.isNode()&&!ne[me.id]&&(ne[me.id]=me)}if(w){const me=n.getTargetCell();me&&me.isNode()&&!ne[me.id]&&(ne[me.id]=me)}}return Object.keys(ne).map(me=>ne[me])}isNeighbor(n,f,p={}){let w=p.incoming,k=p.outgoing;return w==null&&k==null&&(w=k=!0),this.getConnectedEdges(n,p).some(ne=>{const me=ne.getSourceCell(),De=ne.getTargetCell();return!!(w&&me&&me.id===f.id||k&&De&&De.id===f.id)})}getSuccessors(n,f={}){const p=[];return this.search(n,(w,k)=>{w!==n&&this.matchDistance(k,f.distance)&&p.push(w)},Object.assign(Object.assign({},f),{outgoing:!0})),p}isSuccessor(n,f,p={}){let w=!1;return this.search(n,(k,ne)=>{if(k===f&&k!==n&&this.matchDistance(ne,p.distance))return w=!0,!1},Object.assign(Object.assign({},p),{outgoing:!0})),w}getPredecessors(n,f={}){const p=[];return this.search(n,(w,k)=>{w!==n&&this.matchDistance(k,f.distance)&&p.push(w)},Object.assign(Object.assign({},f),{incoming:!0})),p}isPredecessor(n,f,p={}){let w=!1;return this.search(n,(k,ne)=>{if(k===f&&k!==n&&this.matchDistance(ne,p.distance))return w=!0,!1},Object.assign(Object.assign({},p),{incoming:!0})),w}matchDistance(n,f){return f==null?!0:typeof f=="function"?f(n):Array.isArray(f)&&f.includes(n)?!0:n===f}getCommonAncestor(...n){const f=[];return n.forEach(p=>{p&&(Array.isArray(p)?f.push(...p):f.push(p))}),It.getCommonAncestor(...f)}getSubGraph(n,f={}){const p=[],w={},k=[],ne=[],me=De=>{w[De.id]||(p.push(De),w[De.id]=De,De.isEdge()&&ne.push(De),De.isNode()&&k.push(De))};return n.forEach(De=>{me(De),f.deep&&De.getDescendants({deep:!0}).forEach(it=>me(it))}),ne.forEach(De=>{const ze=De.getSourceCell(),it=De.getTargetCell();ze&&!w[ze.id]&&(p.push(ze),w[ze.id]=ze,ze.isNode()&&k.push(ze)),it&&!w[it.id]&&(p.push(it),w[it.id]=it,it.isNode()&&k.push(it))}),k.forEach(De=>{this.getConnectedEdges(De,f).forEach(it=>{const Pt=it.getSourceCell(),ht=it.getTargetCell();!w[it.id]&&Pt&&w[Pt.id]&&ht&&w[ht.id]&&(p.push(it),w[it.id]=it)})}),p}cloneSubGraph(n,f={}){const p=this.getSubGraph(n,f);return this.cloneCells(p)}cloneCells(n){return It.cloneCells(n)}getNodesFromPoint(n,f){const p=typeof n=="number"?{x:n,y:f||0}:n;return this.getNodes().filter(w=>w.getBBox().containsPoint(p))}getNodesInArea(n,f,p,w,k){const ne=typeof n=="number"?new v.Rectangle(n,f,p,w):v.Rectangle.create(n),me=typeof n=="number"?k:f,De=me&&me.strict;return this.getNodes().filter(ze=>{const it=ze.getBBox();return De?ne.containsRect(it):ne.isIntersectWithRect(it)})}getEdgesInArea(n,f,p,w,k){const ne=typeof n=="number"?new v.Rectangle(n,f,p,w):v.Rectangle.create(n),me=typeof n=="number"?k:f,De=me&&me.strict;return this.getEdges().filter(ze=>{const it=ze.getBBox();return it.width===0?it.inflate(1,0):it.height===0&&it.inflate(0,1),De?ne.containsRect(it):ne.isIntersectWithRect(it)})}getNodesUnderNode(n,f={}){const p=n.getBBox();return(f.by==null||f.by==="bbox"?this.getNodesInArea(p):this.getNodesFromPoint(p[f.by])).filter(k=>n.id!==k.id&&!k.isDescendantOf(n))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(n,f={}){return It.getCellsBBox(n,f)}search(n,f,p={}){p.breadthFirst?this.breadthFirstSearch(n,f,p):this.depthFirstSearch(n,f,p)}breadthFirstSearch(n,f,p={}){const w=[],k={},ne={};for(w.push(n),ne[n.id]=0;w.length>0;){const me=w.shift();if(me==null||k[me.id]||(k[me.id]=!0,d.FunctionExt.call(f,this,me,ne[me.id])===!1))continue;this.getNeighbors(me,p).forEach(ze=>{ne[ze.id]=ne[me.id]+1,w.push(ze)})}}depthFirstSearch(n,f,p={}){const w=[],k={},ne={};for(w.push(n),ne[n.id]=0;w.length>0;){const me=w.pop();if(me==null||k[me.id]||(k[me.id]=!0,d.FunctionExt.call(f,this,me,ne[me.id])===!1))continue;const De=this.getNeighbors(me,p),ze=w.length;De.forEach(it=>{ne[it.id]=ne[me.id]+1,w.splice(ze,0,it)})}}getShortestPath(n,f,p={}){const w={};this.getEdges().forEach(ze=>{const it=ze.getSourceCellId(),Pt=ze.getTargetCellId();it&&Pt&&(w[it]||(w[it]=[]),w[Pt]||(w[Pt]=[]),w[it].push(Pt),p.directed||w[Pt].push(it))});const k=typeof n=="string"?n:n.id,ne=d.Dijkstra.run(w,k,p.weight),me=[];let De=typeof f=="string"?f:f.id;for(ne[De]&&me.push(De);De=ne[De];)me.unshift(De);return me}translate(n,f,p){return this.getCells().filter(w=>!w.hasParent()).forEach(w=>w.translate(n,f,p)),this}resize(n,f,p){return this.resizeCells(n,f,this.getCells(),p)}resizeCells(n,f,p,w={}){const k=this.getCellsBBox(p);if(k){const ne=Math.max(n/k.width,0),me=Math.max(f/k.height,0),De=k.getOrigin();p.forEach(ze=>ze.scale(ne,me,De,w))}return this}toJSON(n={}){return ho.toJSON(this.getCells(),n)}parseJSON(n){return ho.fromJSON(n)}fromJSON(n,f={}){const p=this.parseJSON(n);return this.resetCells(p,f),this}startBatch(n,f={}){return this.batches[n]=(this.batches[n]||0)+1,this.notify("batch:start",{name:n,data:f}),this}stopBatch(n,f={}){return this.batches[n]=(this.batches[n]||0)-1,this.notify("batch:stop",{name:n,data:f}),this}batchUpdate(n,f,p={}){this.startBatch(n,p);const w=f();return this.stopBatch(n,p),w}hasActiveBatch(n=Object.keys(this.batches)){return(Array.isArray(n)?n:[n]).some(p=>this.batches[p]>0)}dispose(){this.collection.dispose()}}hl([ho.dispose()],ho.prototype,"dispose",null),function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&typeof w.addNode=="function"&&typeof w.addEdge=="function"&&w.collection!=null}H.isModel=n}(ho||(ho={})),function(H){function n(p,w={}){return{cells:p.map(k=>k.toJSON(w))}}H.toJSON=n;function f(p){const w=[];return Array.isArray(p)?w.push(...p):(p.cells&&w.push(...p.cells),p.nodes&&p.nodes.forEach(k=>{k.shape==null&&(k.shape="rect"),w.push(k)}),p.edges&&p.edges.forEach(k=>{k.shape==null&&(k.shape="edge"),w.push(k)})),w.map(k=>{const ne=k.shape;if(ne){if(Go.registry.exist(ne))return Go.create(k);if(ba.registry.exist(ne))return ba.create(k)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}H.fromJSON=f}(ho||(ho={}));var So=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class No extends Go{get label(){return this.getLabel()}set label(n){this.setLabel(n)}getLabel(){return this.getAttrByPath("text/text")}setLabel(n,f){return n==null?this.removeLabel():this.setAttrByPath("text/text",n,f),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}(function(H){H.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},H.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},H.config({attrs:{text:Object.assign({},H.labelAttr)},propHooks(n){const{label:f}=n,p=So(n,["label"]);return f&&d.ObjectExt.setByPath(p,"attrs/text/text",f),p},visible:!0})})(No||(No={}));var Bo=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};function jc(H,n="body"){return[{tagName:H,selector:n},{tagName:"text",selector:"label"}]}function Dh(H="xlink:href"){return f=>{const{imageUrl:p,imageWidth:w,imageHeight:k}=f,ne=Bo(f,["imageUrl","imageWidth","imageHeight"]);if(p!=null||w!=null||k!=null){const me=()=>{if(ne.attrs){const De=ne.attrs.image;p!=null&&(De[H]=p),w!=null&&(De.width=w),k!=null&&(De.height=k),ne.attrs.image=De}};ne.attrs?(ne.attrs.image==null&&(ne.attrs.image={}),me()):(ne.attrs={image:{}},me())}return ne}}function oo(H,n,f={}){const p={constructorName:H,markup:jc(H,f.selector),attrs:{[H]:Object.assign({},No.bodyAttr)}};return(f.parent||No).define(d.ObjectExt.merge(p,n,{shape:H}))}const Os=oo("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),Nh=ba.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),id=oo("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var tu=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class _u extends No{get points(){return this.getPoints()}set points(n){this.setPoints(n)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(n,f){return n==null?this.removePoints():this.setAttrByPath("body/refPoints",_u.pointsToString(n),f),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(H){function n(f){return typeof f=="string"?f:f.map(p=>Array.isArray(p)?p.join(","):v.Point.isPointLike(p)?`${p.x}, ${p.y}`:"").join(" ")}H.pointsToString=n,H.config({propHooks(f){const{points:p}=f,w=tu(f,["points"]);if(p){const k=n(p);k&&d.ObjectExt.setByPath(w,"attrs/body/refPoints",k)}return w}})})(_u||(_u={}));const dl=oo("polygon",{},{parent:_u}),uf=oo("polyline",{},{parent:_u});var Si=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const Kr=No.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(H){const{path:n}=H,f=Si(H,["path"]);return n&&d.ObjectExt.setByPath(f,"attrs/body/refD",n),f}});var rl=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};const od=No.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},d.Platform.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:d.Dom.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},No.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(H){const{text:n}=H,f=rl(H,["text"]);return n&&d.ObjectExt.setByPath(f,"attrs/label/text",n),f},attrHooks:{text:{set(H,{cell:n,view:f,refBBox:p,elem:w,attrs:k}){if(w instanceof HTMLElement)w.textContent=H;else{const ne=k.style||{},me={text:H,width:-5,height:"100%"},De=Object.assign({textVerticalAnchor:"middle"},ne),ze=ct.presets.textWrap;return d.FunctionExt.call(ze.set,this,me,{cell:n,view:f,elem:w,refBBox:p,attrs:De}),{fill:ne.color||null}}},position(H,{refBBox:n,elem:f}){if(f instanceof SVGElement)return n.getCenter()}}}}),sd=oo("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:Dh()},{selector:"image"}),aa=oo("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class fa extends W{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return fa.toStringTag}getContainerClassName(){const n=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||n.push(this.prefixClassName("node-immovable")),n.join(" ")}updateClassName(n){const f=n.target;if(f.hasAttribute("magnet")){const p=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?d.Dom.removeClass(f,p):d.Dom.addClass(f,p)}else{const p=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(p):this.addClass(p)}}isNodeView(){return!0}confirmUpdate(n,f={}){let p=n;return this.hasAction(p,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(p,"render")?(this.render(),p=this.removeAction(p,["render","update","resize","translate","rotate","ports","tools"])):(p=this.handleAction(p,"resize",()=>this.resize(),"update"),p=this.handleAction(p,"update",()=>this.update(),nt.useCSSSelector?"ports":null),p=this.handleAction(p,"translate",()=>this.translate()),p=this.handleAction(p,"rotate",()=>this.rotate()),p=this.handleAction(p,"ports",()=>this.renderPorts()),p=this.handleAction(p,"tools",()=>{this.getFlag("tools")===n?this.renderTools():this.updateTools(f)})),p}update(n){this.cleanCache(),nt.useCSSSelector&&this.removePorts();const f=this.cell,p=f.getSize(),w=f.getAttrs();this.updateAttrs(this.container,w,{attrs:n===w?null:n,rootBBox:new v.Rectangle(0,0,p.width,p.height),selectors:this.selectors}),nt.useCSSSelector&&this.renderPorts()}renderMarkup(){const n=this.cell.markup;if(n){if(typeof n=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(n)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(n){const f=this.parseJSONMarkup(n,this.container);this.selectors=f.selectors,this.container.appendChild(f.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),nt.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const n=this.cell.getPosition();return`translate(${n.x},${n.y})`}getRotationString(){const n=this.cell.getAngle();if(n){const f=this.cell.getSize();return`rotate(${n},${f.width/2},${f.height/2})`}}updateTransform(){let n=this.getTranslationString();const f=this.getRotationString();f&&(n+=` ${f}`),this.container.setAttribute("transform",n)}findPortElem(n,f){const p=n?this.portsCache[n]:null;if(!p)return null;const w=p.portContentElement,k=p.portContentSelectors||{};return this.findOne(f,w,k)}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(n=>{d.Dom.remove(n.portElement)})}renderPorts(){const n=this.container,f=[];n.childNodes.forEach(ne=>{f.push(ne)});const p=this.cell.getParsedPorts(),w=d.ArrayExt.groupBy(p,"zIndex"),k="auto";w[k]&&w[k].forEach(ne=>{const me=this.getPortElement(ne);n.append(me),f.push(me)}),Object.keys(w).forEach(ne=>{if(ne!==k){const me=parseInt(ne,10);this.appendPorts(w[ne],me,f)}}),this.updatePorts()}appendPorts(n,f,p){const w=n.map(k=>this.getPortElement(k));p[f]||f<0?d.Dom.before(p[Math.max(f,0)],w):d.Dom.append(this.container,w)}getPortElement(n){const f=this.portsCache[n.id];return f?f.portElement:this.createPortElement(n)}createPortElement(n){let f=ve.renderMarkup(this.cell.getPortContainerMarkup());const p=f.elem;if(p==null)throw new Error("Invalid port container markup.");f=ve.renderMarkup(this.getPortMarkup(n));const w=f.elem,k=f.selectors;if(w==null)throw new Error("Invalid port markup.");this.setAttrs({port:n.id,"port-group":n.group},w);let ne="x6-port";n.group&&(ne+=` x6-port-${n.group}`),d.Dom.addClass(p,ne),d.Dom.addClass(p,"x6-port"),d.Dom.addClass(w,"x6-port-body"),p.appendChild(w);let me=k,De,ze;if(this.existPortLabel(n)){if(f=ve.renderMarkup(this.getPortLabelMarkup(n.label)),De=f.elem,ze=f.selectors,De==null)throw new Error("Invalid port label markup.");if(k&&ze){for(const Pt in ze)if(k[Pt]&&Pt!==this.rootSelector)throw new Error("Selectors within port must be unique.");me=Object.assign(Object.assign({},k),ze)}d.Dom.addClass(De,"x6-port-label"),p.appendChild(De)}return this.portsCache[n.id]={portElement:p,portSelectors:me,portLabelElement:De,portLabelSelectors:ze,portContentElement:w,portContentSelectors:k},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:n,node:this.cell,container:p,selectors:me,labelContainer:De,labelSelectors:ze,contentContainer:w,contentSelectors:k}),p}updatePorts(){const n=this.cell.getParsedGroups(),f=Object.keys(n);f.length===0?this.updatePortGroup():f.forEach(p=>this.updatePortGroup(p))}updatePortGroup(n){const f=v.Rectangle.fromSize(this.cell.getSize()),p=this.cell.getPortsLayoutByGroup(n,f);for(let w=0,k=p.length;w<k;w+=1){const ne=p[w],me=ne.portId,De=this.portsCache[me]||{},ze=ne.portLayout;if(this.applyPortTransform(De.portElement,ze),ne.portAttrs!=null){const Pt={selectors:De.portSelectors||{}};ne.portSize&&(Pt.rootBBox=v.Rectangle.fromSize(ne.portSize)),this.updateAttrs(De.portElement,ne.portAttrs,Pt)}const it=ne.labelLayout;if(it&&De.portLabelElement&&(this.applyPortTransform(De.portLabelElement,it,-(ze.angle||0)),it.attrs)){const Pt={selectors:De.portLabelSelectors||{}};ne.labelSize&&(Pt.rootBBox=v.Rectangle.fromSize(ne.labelSize)),this.updateAttrs(De.portLabelElement,it.attrs,Pt)}}}applyPortTransform(n,f,p=0){const w=f.angle,k=f.position,ne=d.Dom.createSVGMatrix().rotate(p).translate(k.x||0,k.y||0).rotate(w||0);d.Dom.transform(n,ne,{absolute:!0})}getPortMarkup(n){return n.markup||this.cell.portMarkup}getPortLabelMarkup(n){return n.markup||this.cell.portLabelMarkup}existPortLabel(n){return n.attrs&&n.attrs.text}getEventArgs(n,f,p){const w=this,k=w.cell,ne=k;return f==null||p==null?{e:n,view:w,node:k,cell:ne}:{e:n,x:f,y:p,view:w,node:k,cell:ne}}getPortEventArgs(n,f,p){const w=this,k=w.cell,ne=k;return p?{e:n,x:p.x,y:p.y,view:w,node:k,cell:ne,port:f}:{e:n,view:w,node:k,cell:ne,port:f}}notifyMouseDown(n,f,p){super.onMouseDown(n,f,p),this.notify("node:mousedown",this.getEventArgs(n,f,p))}notifyMouseMove(n,f,p){super.onMouseMove(n,f,p),this.notify("node:mousemove",this.getEventArgs(n,f,p))}notifyMouseUp(n,f,p){super.onMouseUp(n,f,p),this.notify("node:mouseup",this.getEventArgs(n,f,p))}notifyPortEvent(n,f,p){const w=this.findAttr("port",f.target);if(w){const k=f.type;n==="node:port:mouseenter"?f.type="mouseenter":n==="node:port:mouseleave"&&(f.type="mouseleave"),this.notify(n,this.getPortEventArgs(f,w,p)),f.type=k}}onClick(n,f,p){super.onClick(n,f,p),this.notify("node:click",this.getEventArgs(n,f,p)),this.notifyPortEvent("node:port:click",n,{x:f,y:p})}onDblClick(n,f,p){super.onDblClick(n,f,p),this.notify("node:dblclick",this.getEventArgs(n,f,p)),this.notifyPortEvent("node:port:dblclick",n,{x:f,y:p})}onContextMenu(n,f,p){super.onContextMenu(n,f,p),this.notify("node:contextmenu",this.getEventArgs(n,f,p)),this.notifyPortEvent("node:port:contextmenu",n,{x:f,y:p})}onMouseDown(n,f,p){this.isPropagationStopped(n)||(this.notifyMouseDown(n,f,p),this.notifyPortEvent("node:port:mousedown",n,{x:f,y:p}),this.startNodeDragging(n,f,p))}onMouseMove(n,f,p){const w=this.getEventData(n),k=w.action;if(k==="magnet")this.dragMagnet(n,f,p);else{if(k==="move"){const me=w.targetView||this;me.dragNode(n,f,p),me.notify("node:moving",{e:n,x:f,y:p,view:me,cell:me.cell,node:me.cell})}this.notifyMouseMove(n,f,p),this.notifyPortEvent("node:port:mousemove",n,{x:f,y:p})}this.setEventData(n,w)}onMouseUp(n,f,p){const w=this.getEventData(n),k=w.action;k==="magnet"?this.stopMagnetDragging(n,f,p):(this.notifyMouseUp(n,f,p),this.notifyPortEvent("node:port:mouseup",n,{x:f,y:p}),k==="move"&&(w.targetView||this).stopNodeDragging(n,f,p));const ne=w.targetMagnet;ne&&this.onMagnetClick(n,ne,f,p),this.checkMouseleave(n)}onMouseOver(n){super.onMouseOver(n),this.notify("node:mouseover",this.getEventArgs(n)),this.notifyPortEvent("node:port:mouseenter",n),this.notifyPortEvent("node:port:mouseover",n)}onMouseOut(n){super.onMouseOut(n),this.notify("node:mouseout",this.getEventArgs(n)),this.notifyPortEvent("node:port:mouseleave",n),this.notifyPortEvent("node:port:mouseout",n)}onMouseEnter(n){this.updateClassName(n),super.onMouseEnter(n),this.notify("node:mouseenter",this.getEventArgs(n))}onMouseLeave(n){super.onMouseLeave(n),this.notify("node:mouseleave",this.getEventArgs(n))}onMouseWheel(n,f,p,w){super.onMouseWheel(n,f,p,w),this.notify("node:mousewheel",Object.assign({delta:w},this.getEventArgs(n,f,p)))}onMagnetClick(n,f,p,w){const k=this.graph;k.view.getMouseMovedCount(n)>k.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:f},this.getEventArgs(n,p,w)))}onMagnetDblClick(n,f,p,w){this.notify("node:magnet:dblclick",Object.assign({magnet:f},this.getEventArgs(n,p,w)))}onMagnetContextMenu(n,f,p,w){this.notify("node:magnet:contextmenu",Object.assign({magnet:f},this.getEventArgs(n,p,w)))}onMagnetMouseDown(n,f,p,w){this.startMagnetDragging(n,p,w)}onCustomEvent(n,f,p,w){this.notify("node:customevent",Object.assign({name:f},this.getEventArgs(n,p,w))),super.onCustomEvent(n,f,p,w)}prepareEmbedding(n){const f=this.graph,w=this.getEventData(n).cell||this.cell,k=f.findViewByCell(w),ne=f.snapToGrid(n.clientX,n.clientY);this.notify("node:embed",{e:n,node:w,view:k,cell:w,x:ne.x,y:ne.y,currentParent:w.getParent()})}processEmbedding(n,f){const p=f.cell||this.cell,w=f.graph||this.graph,k=w.options.embedding,ne=k.findParent;let me=typeof ne=="function"?d.FunctionExt.call(ne,w,{view:this,node:this.cell}).filter(ht=>It.isCell(ht)&&this.cell.id!==ht.id&&!ht.isDescendantOf(this.cell)):w.model.getNodesUnderNode(p,{by:ne});if(k.frontOnly&&me.length>0){const ht=d.ArrayExt.groupBy(me,"zIndex"),Ft=d.ArrayExt.max(Object.keys(ht).map(tn=>parseInt(tn,10)));Ft&&(me=ht[Ft])}me=me.filter(ht=>ht.visible);let De=null;const ze=f.candidateEmbedView,it=k.validate;for(let ht=me.length-1;ht>=0;ht-=1){const Ft=me[ht];if(ze&&ze.cell.id===Ft.id){De=ze;break}else{const tn=Ft.findView(w);if(it&&d.FunctionExt.call(it,w,{child:this.cell,parent:tn.cell,childView:this,parentView:tn})){De=tn;break}}}this.clearEmbedding(f),De&&De.highlight(null,{type:"embedding"}),f.candidateEmbedView=De;const Pt=w.snapToGrid(n.clientX,n.clientY);this.notify("node:embedding",{e:n,cell:p,node:p,view:w.findViewByCell(p),x:Pt.x,y:Pt.y,currentParent:p.getParent(),candidateParent:De?De.cell:null})}clearEmbedding(n){const f=n.candidateEmbedView;f&&(f.unhighlight(null,{type:"embedding"}),n.candidateEmbedView=null)}finalizeEmbedding(n,f){this.graph.startBatch("embedding");const p=f.cell||this.cell,w=f.graph||this.graph,k=w.findViewByCell(p),ne=p.getParent(),me=f.candidateEmbedView;if(me?(me.unhighlight(null,{type:"embedding"}),f.candidateEmbedView=null,(ne==null||ne.id!==me.cell.id)&&me.cell.insertChild(p,void 0,{ui:!0})):ne&&ne.unembed(p,{ui:!0}),w.model.getConnectedEdges(p,{deep:!0}).forEach(De=>{De.updateParent({ui:!0})}),k&&me){const De=w.snapToGrid(n.clientX,n.clientY);k.notify("node:embedded",{e:n,cell:p,x:De.x,y:De.y,node:p,view:w.findViewByCell(p),previousParent:ne,currentParent:p.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let n=this.cell,f=this;for(;f&&!n.isEdge();){if(!n.hasParent()||f.can("stopDelegateOnDragging"))return f;n=n.getParent(),f=this.graph.findViewByCell(n)}return null}validateMagnet(n,f,p){if(f.getAttribute("magnet")!=="passive"){const w=this.graph.options.connecting.validateMagnet;return w?d.FunctionExt.call(w,this.graph,{e:p,magnet:f,view:n,cell:n.cell}):!0}return!1}startMagnetDragging(n,f,p){if(!this.can("magnetConnectable"))return;n.stopPropagation();const w=n.currentTarget,k=this.graph;this.setEventData(n,{targetMagnet:w}),this.validateMagnet(this,w,n)?(k.options.magnetThreshold<=0&&this.startConnectting(n,w,f,p),this.setEventData(n,{action:"magnet"}),this.stopPropagation(n)):this.onMouseDown(n,f,p),k.view.delegateDragEvents(n,this)}startConnectting(n,f,p,w){this.graph.model.startBatch("add-edge");const k=this.createEdgeFromMagnet(f,p,w);k.setEventData(n,k.prepareArrowheadDragging("target",{x:p,y:w,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(n,{edgeView:k}),k.notifyMouseDown(n,p,w)}getDefaultEdge(n,f){let p;const w=this.graph.options.connecting.createEdge;return w&&(p=d.FunctionExt.call(w,this.graph,{sourceMagnet:f,sourceView:n,sourceCell:n.cell})),p}createEdgeFromMagnet(n,f,p){const w=this.graph,k=w.model,ne=this.getDefaultEdge(this,n);return ne.setSource(Object.assign(Object.assign({},ne.getSource()),this.getEdgeTerminal(n,f,p,ne,"source"))),ne.setTarget(Object.assign(Object.assign({},ne.getTarget()),{x:f,y:p})),ne.addTo(k,{async:!1,ui:!0}),ne.findView(w)}dragMagnet(n,f,p){const w=this.getEventData(n),k=w.edgeView;if(k)k.onMouseMove(n,f,p),this.autoScrollGraph(n.clientX,n.clientY);else{const ne=this.graph,me=ne.options.magnetThreshold,De=this.getEventTarget(n),ze=w.targetMagnet;if(me==="onleave"){if(ze===De||ze.contains(De))return}else if(ne.view.getMouseMovedCount(n)<=me)return;this.startConnectting(n,ze,f,p)}}stopMagnetDragging(n,f,p){const k=this.eventData(n).edgeView;k&&(k.onMouseUp(n,f,p),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(n,f,p){this.notify("node:unhandled:mousedown",{e:n,x:f,y:p,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(n,f,p,w,k){let ne=[k];const me=this.graph.getPlugin("selection");if(me&&me.isSelectionMovable()){const De=me.getSelectedCells();De.includes(k)&&(ne=De.filter(ze=>ze.isNode()))}ne.forEach(De=>{this.notify(n,{e:f,x:p,y:w,cell:De,node:De,view:De.findView(this.graph)})})}getRestrictArea(n){const f=this.graph.options.translating.restrict,p=typeof f=="function"?d.FunctionExt.call(f,this.graph,n):f;return typeof p=="number"?this.graph.transform.getGraphArea().inflate(p):p===!0?this.graph.transform.getGraphArea():p||null}startNodeDragging(n,f,p){const w=this.getDelegatedView();if(w==null||!w.can("nodeMovable"))return this.notifyUnhandledMouseDown(n,f,p);this.setEventData(n,{targetView:w,action:"move"});const k=v.Point.create(w.cell.getPosition());w.setEventData(n,{moving:!1,offset:k.diff(f,p),restrict:this.getRestrictArea(w)})}dragNode(n,f,p){const w=this.cell,k=this.graph,ne=k.getGridSize(),me=this.getEventData(n),De=me.offset,ze=me.restrict;me.moving||(me.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",n,f,p,this.cell)),this.autoScrollGraph(n.clientX,n.clientY);const it=v.GeometryUtil.snapToGrid(f+De.x,ne),Pt=v.GeometryUtil.snapToGrid(p+De.y,ne);w.setPosition(it,Pt,{restrict:ze,deep:!0,ui:!0}),k.options.embedding.enabled&&(me.embedding||(this.prepareEmbedding(n),me.embedding=!0),this.processEmbedding(n,me))}stopNodeDragging(n,f,p){const w=this.getEventData(n);w.embedding&&this.finalizeEmbedding(n,w),w.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",n,f,p,this.cell)),w.moving=!1,w.embedding=!1}autoScrollGraph(n,f){const p=this.graph.getPlugin("scroller");p&&p.autoScroll(n,f)}}(function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&typeof w.isNodeView=="function"&&typeof w.isEdgeView=="function"&&typeof w.confirmUpdate=="function"&&typeof w.update=="function"&&typeof w.findPortElem=="function"&&typeof w.resize=="function"&&typeof w.rotate=="function"&&typeof w.translate=="function"}H.isNodeView=n})(fa||(fa={})),fa.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),fa.registry.register("node",fa,!0);var zs=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class Mc extends W{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.labelDestroyFn={}}get[Symbol.toStringTag](){return Mc.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const n=this.sourceView;if(!n){const p=this.cell.getSource();return new v.Rectangle(p.x,p.y)}const f=this.sourceMagnet;return n.isEdgeElement(f)?new v.Rectangle(this.sourceAnchor.x,this.sourceAnchor.y):n.getBBoxOfElement(f||n.container)}get targetBBox(){const n=this.targetView;if(!n){const p=this.cell.getTarget();return new v.Rectangle(p.x,p.y)}const f=this.targetMagnet;return n.isEdgeElement(f)?new v.Rectangle(this.targetAnchor.x,this.targetAnchor.y):n.getBBoxOfElement(f||n.container)}isEdgeView(){return!0}confirmUpdate(n,f={}){let p=n;if(this.hasAction(p,"source")){if(!this.updateTerminalProperties("source"))return p;p=this.removeAction(p,"source")}if(this.hasAction(p,"target")){if(!this.updateTerminalProperties("target"))return p;p=this.removeAction(p,"target")}return this.hasAction(p,"render")?(this.render(),p=this.removeAction(p,["render","update","labels","tools"]),p):(p=this.handleAction(p,"update",()=>this.update(f)),p=this.handleAction(p,"labels",()=>this.onLabelsChange(f)),p=this.handleAction(p,"tools",()=>this.renderTools()),p)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const n=this.cell.markup;if(n){if(typeof n=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(n)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(n){const f=this.parseJSONMarkup(n,this.container);this.selectors=f.selectors,this.container.append(f.fragment)}customizeLabels(){if(this.labelContainer){const n=this.cell,f=n.labels;for(let p=0,w=f.length;p<w;p+=1){const k=f[p],ne=this.labelCache[p],me=this.labelSelectors[p],De=this.graph.options.onEdgeLabelRendered;if(De){const ze=De({edge:n,label:k,container:ne,selectors:me});ze&&(this.labelDestroyFn[p]=ze)}}}}destroyCustomizeLabels(){const n=this.cell.labels;if(this.labelCache&&this.labelSelectors&&this.labelDestroyFn)for(let f=0,p=n.length;f<p;f+=1){const w=this.labelDestroyFn[f],k=this.labelCache[f],ne=this.labelSelectors[f];w&&k&&ne&&w({edge:this.cell,label:n[f],container:k,selectors:ne})}this.labelDestroyFn={}}renderLabels(){const n=this.cell,f=n.getLabels(),p=f.length;let w=this.labelContainer;if(this.labelCache={},this.labelSelectors={},p<=0)return w&&w.parentNode&&w.parentNode.removeChild(w),this;w?this.empty(w):(w=d.Dom.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),w),this.labelContainer=w);for(let k=0,ne=f.length;k<ne;k+=1){const me=f[k],De=this.normalizeLabelMarkup(this.parseLabelMarkup(me.markup));let ze,it;if(De)ze=De.node,it=De.selectors;else{const ht=n.getDefaultLabel(),Ft=this.normalizeLabelMarkup(this.parseLabelMarkup(ht.markup));ze=Ft.node,it=Ft.selectors}ze.setAttribute("data-index",`${k}`),w.appendChild(ze);const Pt=this.rootSelector;if(it[Pt])throw new Error("Ambiguous label root selector.");it[Pt]=ze,this.labelCache[k]=ze,this.labelSelectors[k]=it}return w.parentNode==null&&this.container.appendChild(w),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(n={}){this.destroyCustomizeLabels(),this.shouldRerenderLabels(n)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(n={}){const f=this.cell.previous("labels");if(f==null)return!0;if("propertyPathArray"in n&&"propertyValue"in n){const p=n.propertyPathArray||[],w=p.length;if(w>1){const k=p[1];if(f[k]){if(w===2)return typeof n.propertyValue=="object"&&d.ObjectExt.has(n.propertyValue,"markup");if(p[2]!=="markup")return!1}}}return!0}parseLabelMarkup(n){return n?typeof n=="string"?this.parseLabelStringMarkup(n):this.parseJSONMarkup(n):null}parseLabelStringMarkup(n){const f=d.Vector.createVectors(n),p=document.createDocumentFragment();for(let w=0,k=f.length;w<k;w+=1){const ne=f[w].node;p.appendChild(ne)}return{fragment:p,selectors:{}}}normalizeLabelMarkup(n){if(n==null)return;const f=n.fragment;if(!(f instanceof DocumentFragment)||!f.hasChildNodes())throw new Error("Invalid label markup.");let p;const w=f.childNodes;return w.length>1||w[0].nodeName.toUpperCase()!=="G"?p=d.Vector.create("g").append(f):p=d.Vector.create(w[0]),p.addClass(this.prefixClassName("edge-label")),{node:p.node,selectors:n.selectors}}updateLabels(){if(this.labelContainer){const n=this.cell,f=n.labels,p=this.can("edgeLabelMovable"),w=n.getDefaultLabel();for(let k=0,ne=f.length;k<ne;k+=1){const me=this.labelCache[k],De=this.labelSelectors[k];me.setAttribute("cursor",p?"move":"default");const ze=f[k],it=d.ObjectExt.merge({},w.attrs,ze.attrs);this.updateAttrs(me,it,{selectors:De,rootBBox:ze.size?v.Rectangle.fromSize(ze.size):void 0})}}}renderTools(){const n=this.cell.getTools();return this.addTools(n),this}update(n={}){this.cleanCache(),this.updateConnection(n);const f=this.cell.getAttrs(),{text:p}=f,w=zs(f,["text"]);return w!=null&&this.updateAttrs(this.container,w,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(n),this}removeRedundantLinearVertices(n={}){const f=this.cell,p=f.getVertices(),w=[this.sourceAnchor,...p,this.targetAnchor],k=w.length,ne=new v.Polyline(w);ne.simplify({threshold:.01});const me=ne.points.map(ze=>ze.toJSON()),De=me.length;return k===De?0:(f.setVertices(me.slice(1,De-1),n),k-De)}getTerminalView(n){switch(n){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${n}'`)}}getTerminalAnchor(n){switch(n){case"source":return v.Point.create(this.sourceAnchor);case"target":return v.Point.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${n}'`)}}getTerminalConnectionPoint(n){switch(n){case"source":return v.Point.create(this.sourcePoint);case"target":return v.Point.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${n}'`)}}getTerminalMagnet(n,f={}){switch(n){case"source":{if(f.raw)return this.sourceMagnet;const p=this.sourceView;return p?this.sourceMagnet||p.container:null}case"target":{if(f.raw)return this.targetMagnet;const p=this.targetView;return p?this.targetMagnet||p.container:null}default:throw new Error(`Unknown terminal type '${n}'`)}}updateConnection(n={}){const f=this.cell;if(n.translateBy&&f.isFragmentDescendantOf(n.translateBy)){const p=n.tx||0,w=n.ty||0;this.routePoints=new v.Polyline(this.routePoints).translate(p,w).points,this.translateConnectionPoints(p,w),this.path.translate(p,w)}else{const p=f.getVertices(),w=this.findAnchors(p);this.sourceAnchor=w.source,this.targetAnchor=w.target,this.routePoints=this.findRoutePoints(p);const k=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=k.source,this.targetPoint=k.target;const ne=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,ne.source||this.sourcePoint,ne.target||this.targetPoint)}this.cleanCache()}findAnchors(n){const f=this.cell,p=f.source,w=f.target,k=n[0],ne=n[n.length-1];return w.priority&&!p.priority?this.findAnchorsOrdered("target",ne,"source",k):this.findAnchorsOrdered("source",k,"target",ne)}findAnchorsOrdered(n,f,p,w){let k,ne;const me=this.cell,De=me[n],ze=me[p],it=this.getTerminalView(n),Pt=this.getTerminalView(p),ht=this.getTerminalMagnet(n),Ft=this.getTerminalMagnet(p);if(it){let tn;f?tn=v.Point.create(f):Pt?tn=Ft:tn=v.Point.create(ze),k=this.getAnchor(De.anchor,it,ht,tn,n)}else k=v.Point.create(De);if(Pt){const tn=v.Point.create(w||k);ne=this.getAnchor(ze.anchor,Pt,Ft,tn,p)}else ne=v.Point.isPointLike(ze)?v.Point.create(ze):new v.Point;return{[n]:k,[p]:ne}}getAnchor(n,f,p,w,k){const ne=f.isEdgeElement(p),me=this.graph.options.connecting;let De=typeof n=="string"?{name:n}:n;if(!De){const Pt=ne?(k==="source"?me.sourceEdgeAnchor:me.targetEdgeAnchor)||me.edgeAnchor:(k==="source"?me.sourceAnchor:me.targetAnchor)||me.anchor;De=typeof Pt=="string"?{name:Pt}:Pt}if(!De)throw new Error("Anchor should be specified.");let ze;const it=De.name;if(ne){const Pt=Lu.registry.get(it);if(typeof Pt!="function")return Lu.registry.onNotFound(it);ze=d.FunctionExt.call(Pt,this,f,p,w,De.args||{},k)}else{const Pt=Sa.registry.get(it);if(typeof Pt!="function")return Sa.registry.onNotFound(it);ze=d.FunctionExt.call(Pt,this,f,p,w,De.args||{},k)}return ze?ze.round(this.POINT_ROUNDING):new v.Point}findRoutePoints(n=[]){const f=this.graph.options.connecting.router||Sc.presets.normal,p=this.cell.getRouter()||f;let w;if(typeof p=="function")w=d.FunctionExt.call(p,this,n,{},this);else{const k=typeof p=="string"?p:p.name,ne=typeof p=="string"?{}:p.args||{},me=k?Sc.registry.get(k):Sc.presets.normal;if(typeof me!="function")return Sc.registry.onNotFound(k);w=d.FunctionExt.call(me,this,n,ne,this)}return w==null?n.map(k=>v.Point.create(k)):w.map(k=>v.Point.create(k))}findConnectionPoints(n,f,p){const w=this.cell,k=this.graph.options.connecting,ne=w.getSource(),me=w.getTarget(),De=this.sourceView,ze=this.targetView,it=n[0],Pt=n[n.length-1];let ht;if(De&&!De.isEdgeElement(this.sourceMagnet)){const tn=this.sourceMagnet||De.container,On=it||p,Rn=new v.Line(On,f),nr=ne.connectionPoint||k.sourceConnectionPoint||k.connectionPoint;ht=this.getConnectionPoint(nr,De,tn,Rn,"source")}else ht=f;let Ft;if(ze&&!ze.isEdgeElement(this.targetMagnet)){const tn=this.targetMagnet||ze.container,On=me.connectionPoint||k.targetConnectionPoint||k.connectionPoint,Rn=Pt||f,nr=new v.Line(Rn,p);Ft=this.getConnectionPoint(On,ze,tn,nr,"target")}else Ft=p;return{source:ht,target:Ft}}getConnectionPoint(n,f,p,w,k){const ne=w.end;if(n==null)return ne;const me=typeof n=="string"?n:n.name,De=typeof n=="string"?{}:n.args,ze=nn.registry.get(me);if(typeof ze!="function")return nn.registry.onNotFound(me);const it=d.FunctionExt.call(ze,this,w,f,p,De||{},k);return it?it.round(this.POINT_ROUNDING):ne}findMarkerPoints(n,f,p){const w=Pt=>{const ht=this.cell.getAttrs(),Ft=Object.keys(ht);for(let tn=0,On=Ft.length;tn<On;tn+=1){const Rn=ht[Ft[tn]];if(Rn[`${Pt}Marker`]||Rn[`${Pt}-marker`]){const nr=Rn.strokeWidth||Rn["stroke-width"];if(nr)return parseFloat(nr);break}}return null},k=n[0],ne=n[n.length-1];let me,De;const ze=w("source");ze&&(me=f.clone().move(k||p,-ze));const it=w("target");return it&&(De=p.clone().move(ne||f,-it)),this.sourceMarkerPoint=me||f.clone(),this.targetMarkerPoint=De||p.clone(),{source:me,target:De}}findPath(n,f,p){const w=this.cell.getConnector()||this.graph.options.connecting.connector;let k,ne,me;if(typeof w=="string"?k=w:(k=w.name,ne=w.args),k){const ze=Tc.registry.get(k);if(typeof ze!="function")return Tc.registry.onNotFound(k);me=ze}else me=Tc.presets.normal;const De=d.FunctionExt.call(me,this,f,p,n,Object.assign(Object.assign({},ne),{raw:!0}),this);return typeof De=="string"?v.Path.parse(De):De}translateConnectionPoints(n,f){this.sourcePoint.translate(n,f),this.targetPoint.translate(n,f),this.sourceAnchor.translate(n,f),this.targetAnchor.translate(n,f),this.sourceMarkerPoint.translate(n,f),this.targetMarkerPoint.translate(n,f)}updateLabelPositions(){if(this.labelContainer==null)return this;if(!this.path)return this;const f=this.cell,p=f.getLabels();if(p.length===0)return this;const w=f.getDefaultLabel(),k=this.normalizeLabelPosition(w.position);for(let ne=0,me=p.length;ne<me;ne+=1){const De=p[ne],ze=this.labelCache[ne];if(!ze)continue;const it=this.normalizeLabelPosition(De.position),Pt=d.ObjectExt.merge({},k,it),ht=this.getLabelTransformationMatrix(Pt);ze.setAttribute("transform",d.Dom.matrixToTransformString(ht))}return this}updateTerminalProperties(n){const f=this.cell,p=this.graph,w=f[n],k=w&&w.cell,ne=`${n}View`;if(!k)return this[ne]=null,this.updateTerminalMagnet(n),!0;const me=p.getCellById(k);if(!me)throw new Error(`Edge's ${n} node with id "${k}" not exists`);const De=me.findView(p);return De?(this[ne]=De,this.updateTerminalMagnet(n),!0):!1}updateTerminalMagnet(n){const f=`${n}Magnet`,p=this.getTerminalView(n);if(p){let w=p.getMagnetFromEdgeTerminal(this.cell[n]);w===p.container&&(w=null),this[f]=w}else this[f]=null}getLabelPositionAngle(n){const f=this.cell.getLabelAt(n);return f&&f.position&&typeof f.position=="object"&&f.position.angle||0}getLabelPositionArgs(n){const f=this.cell.getLabelAt(n);if(f&&f.position&&typeof f.position=="object")return f.position.options}getDefaultLabelPositionArgs(){const n=this.cell.getDefaultLabel();if(n&&n.position&&typeof n.position=="object")return n.position.options}mergeLabelPositionArgs(n,f){return n===null?null:n===void 0?f===null?null:f:d.ObjectExt.merge({},f,n)}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const n=this.cache.pathCache;return d.ObjectExt.has(n,"data")||(n.data=this.path.serialize()),n.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const n=this.cache.pathCache;return d.ObjectExt.has(n,"segmentSubdivisions")||(n.segmentSubdivisions=this.path.getSegmentSubdivisions()),n.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const n=this.cache.pathCache;return d.ObjectExt.has(n,"length")||(n.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),n.length}getPointAtLength(n){return this.path==null?null:this.path.pointAtLength(n,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(n){return this.path==null?null:(d.NumberExt.isPercentage(n)&&(n=parseFloat(n)/100),this.path.pointAt(n,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(n){return this.path==null?null:this.path.tangentAtLength(n,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(n){return this.path==null?null:this.path.tangentAt(n,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(n){return this.path==null?null:this.path.closestPoint(n,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(n){return this.path==null?null:this.path.closestPointLength(n,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(n){return this.path==null?null:this.path.closestPointNormalizedLength(n,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(n,f,p,w){const k={distance:0};let ne=0,me;typeof p=="number"?(ne=p,me=w):me=p,me!=null&&(k.options=me);const De=me&&me.absoluteOffset,ze=!(me&&me.absoluteDistance),it=me&&me.absoluteDistance&&me.reverseDistance,Pt=this.path,ht={segmentSubdivisions:this.getConnectionSubdivisions()},Ft=new v.Point(n,f),tn=Pt.closestPointT(Ft,ht),On=this.getConnectionLength()||0;let Rn=Pt.lengthAtT(tn,ht);ze&&(Rn=On>0?Rn/On:0),it&&(Rn=-1*(On-Rn)||1),k.distance=Rn;let nr;De||(nr=Pt.tangentAtT(tn));let or;if(nr)or=nr.pointOffset(Ft);else{const Dr=Pt.pointAtT(tn),ri=Ft.diff(Dr);or={x:ri.x,y:ri.y}}return k.offset=or,k.angle=ne,k}normalizeLabelPosition(n){return typeof n=="number"?{distance:n}:n}getLabelTransformationMatrix(n){const f=this.normalizeLabelPosition(n),p=f.options||{},w=f.angle||0,k=f.distance,ne=k>0&&k<=1;let me=0;const De={x:0,y:0},ze=f.offset;ze&&(typeof ze=="number"?me=ze:(ze.x!=null&&(De.x=ze.x),ze.y!=null&&(De.y=ze.y)));const it=De.x!==0||De.y!==0||me===0,Pt=p.keepGradient,ht=p.ensureLegibility,Ft=this.path,tn={segmentSubdivisions:this.getConnectionSubdivisions()},On=ne?k*this.getConnectionLength():k,Rn=Ft.tangentAtLength(On,tn);let nr,or=w;if(Rn){if(it)nr=Rn.start,nr.translate(De);else{const Dr=Rn.clone();Dr.rotate(-90,Rn.start),Dr.setLength(me),nr=Dr.end}Pt&&(or=Rn.angle()+w,ht&&(or=v.Angle.normalize((or+90)%180-90)))}else nr=Ft.start,it&&nr.translate(De);return d.Dom.createSVGMatrix().translate(nr.x,nr.y).rotate(or)}getVertexIndex(n,f){const w=this.cell.getVertices(),k=this.getClosestPointLength(new v.Point(n,f));let ne=0;if(k!=null)for(const me=w.length;ne<me;ne+=1){const De=w[ne],ze=this.getClosestPointLength(De);if(ze!=null&&k<ze)break}return ne}getEventArgs(n,f,p){const w=this,k=w.cell,ne=k;return f==null||p==null?{e:n,view:w,edge:k,cell:ne}:{e:n,x:f,y:p,view:w,edge:k,cell:ne}}notifyUnhandledMouseDown(n,f,p){this.notify("edge:unhandled:mousedown",{e:n,x:f,y:p,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(n,f,p){super.onMouseDown(n,f,p),this.notify("edge:mousedown",this.getEventArgs(n,f,p))}notifyMouseMove(n,f,p){super.onMouseMove(n,f,p),this.notify("edge:mousemove",this.getEventArgs(n,f,p))}notifyMouseUp(n,f,p){super.onMouseUp(n,f,p),this.notify("edge:mouseup",this.getEventArgs(n,f,p))}onClick(n,f,p){super.onClick(n,f,p),this.notify("edge:click",this.getEventArgs(n,f,p))}onDblClick(n,f,p){super.onDblClick(n,f,p),this.notify("edge:dblclick",this.getEventArgs(n,f,p))}onContextMenu(n,f,p){super.onContextMenu(n,f,p),this.notify("edge:contextmenu",this.getEventArgs(n,f,p))}onMouseDown(n,f,p){this.notifyMouseDown(n,f,p),this.startEdgeDragging(n,f,p)}onMouseMove(n,f,p){const w=this.getEventData(n);switch(w.action){case"drag-label":{this.dragLabel(n,f,p);break}case"drag-arrowhead":{this.dragArrowhead(n,f,p);break}case"drag-edge":{this.dragEdge(n,f,p);break}default:break}return this.notifyMouseMove(n,f,p),w}onMouseUp(n,f,p){const w=this.getEventData(n);switch(w.action){case"drag-label":{this.stopLabelDragging(n,f,p);break}case"drag-arrowhead":{this.stopArrowheadDragging(n,f,p);break}case"drag-edge":{this.stopEdgeDragging(n,f,p);break}default:break}return this.notifyMouseUp(n,f,p),this.checkMouseleave(n),w}onMouseOver(n){super.onMouseOver(n),this.notify("edge:mouseover",this.getEventArgs(n))}onMouseOut(n){super.onMouseOut(n),this.notify("edge:mouseout",this.getEventArgs(n))}onMouseEnter(n){super.onMouseEnter(n),this.notify("edge:mouseenter",this.getEventArgs(n))}onMouseLeave(n){super.onMouseLeave(n),this.notify("edge:mouseleave",this.getEventArgs(n))}onMouseWheel(n,f,p,w){super.onMouseWheel(n,f,p,w),this.notify("edge:mousewheel",Object.assign({delta:w},this.getEventArgs(n,f,p)))}onCustomEvent(n,f,p,w){if(d.Dom.findParentByClass(n.target,"edge-tool",this.container)){if(n.stopPropagation(),this.can("useEdgeTools")){if(f==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:f},this.getEventArgs(n,p,w)))}this.notifyMouseDown(n,p,w)}else this.notify("edge:customevent",Object.assign({name:f},this.getEventArgs(n,p,w))),super.onCustomEvent(n,f,p,w)}onLabelMouseDown(n,f,p){this.notifyMouseDown(n,f,p),this.startLabelDragging(n,f,p),this.getEventData(n).stopPropagation&&n.stopPropagation()}startEdgeDragging(n,f,p){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(n,f,p);return}this.setEventData(n,{x:f,y:p,moving:!1,action:"drag-edge"})}dragEdge(n,f,p){const w=this.getEventData(n);w.moving||(w.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:n,x:f,y:p,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(f-w.x,p-w.y,{ui:!0}),this.setEventData(n,{x:f,y:p}),this.notify("edge:moving",{e:n,x:f,y:p,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(n,f,p){const w=this.getEventData(n);w.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:n,x:f,y:p,view:this,cell:this.cell,edge:this.cell})),w.moving=!1}prepareArrowheadDragging(n,f){const p=this.getTerminalMagnet(n),w={action:"drag-arrowhead",x:f.x,y:f.y,isNewEdge:f.isNewEdge===!0,terminalType:n,initialMagnet:p,initialTerminal:d.ObjectExt.clone(this.cell[n]),fallbackAction:f.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(n),options:f.options};return this.beforeArrowheadDragging(w),w}createValidateConnectionArgs(n){const f=[];f[4]=n,f[5]=this;let p,w=0,k=0;n==="source"?(w=2,p="target"):(k=2,p="source");const ne=this.cell[p],me=ne.cell;if(me){let De;const ze=f[w]=this.graph.findViewByCell(me);ze&&(De=ze.getMagnetFromEdgeTerminal(ne),De===ze.container&&(De=void 0)),f[w+1]=De}return(De,ze)=>(f[k]=De,f[k+1]=De.container===ze?void 0:ze,f)}beforeArrowheadDragging(n){n.zIndex=this.cell.zIndex,this.cell.toFront();const f=this.container.style;n.pointerEvents=f.pointerEvents,f.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(n)}afterArrowheadDragging(n){n.zIndex!=null&&(this.cell.setZIndex(n.zIndex,{ui:!0}),n.zIndex=null);const f=this.container;f.style.pointerEvents=n.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(n)}validateConnection(n,f,p,w,k,ne,me){const De=this.graph.options.connecting,ze=De.allowLoop,it=De.allowNode,Pt=De.allowEdge,ht=De.allowPort,Ft=De.allowMulti,tn=De.validateConnection,On=ne?ne.cell:null,Rn=k==="target"?p:n,nr=k==="target"?w:f;let or=!0;const Dr=ri=>{const yn=k==="source"?me?me.port:null:On?On.getSourcePortId():null,ao=k==="target"?me?me.port:null:On?On.getTargetPortId():null;return d.FunctionExt.call(ri,this.graph,{edge:On,edgeView:ne,sourceView:n,targetView:p,sourcePort:yn,targetPort:ao,sourceMagnet:f,targetMagnet:w,sourceCell:n?n.cell:null,targetCell:p?p.cell:null,type:k})};if(ze!=null&&(typeof ze=="boolean"?!ze&&n===p&&(or=!1):or=Dr(ze)),or&&ht!=null&&(typeof ht=="boolean"?!ht&&nr&&(or=!1):or=Dr(ht)),or&&Pt!=null&&(typeof Pt=="boolean"?!Pt&&Mc.isEdgeView(Rn)&&(or=!1):or=Dr(Pt)),or&&it!=null&&nr==null&&(typeof it=="boolean"?!it&&fa.isNodeView(Rn)&&(or=!1):or=Dr(it)),or&&Ft!=null&&ne){const ri=ne.cell,yn=k==="source"?me:ri.getSource(),ao=k==="target"?me:ri.getTarget(),Ks=me?this.graph.getCellById(me.cell):null;if(yn&&ao&&yn.cell&&ao.cell&&Ks)if(typeof Ft=="function")or=Dr(Ft);else{const Qs=this.graph.model.getConnectedEdges(Ks,{outgoing:k==="source",incoming:k==="target"});Qs.length&&(Ft==="withPort"?Qs.some(_a=>{const da=_a.getSource(),Ka=_a.getTarget();return da&&Ka&&da.cell===yn.cell&&Ka.cell===ao.cell&&da.port!=null&&da.port===yn.port&&Ka.port!=null&&Ka.port===ao.port})&&(or=!1):Ft||Qs.some(_a=>{const da=_a.getSource(),Ka=_a.getTarget();return da&&Ka&&da.cell===yn.cell&&Ka.cell===ao.cell})&&(or=!1))}}return or&&tn!=null&&(or=Dr(tn)),or}allowConnectToBlank(n){const f=this.graph,w=f.options.connecting.allowBlank;if(typeof w!="function")return!!w;const k=f.findViewByCell(n),ne=n.getSourceCell(),me=n.getTargetCell(),De=f.findViewByCell(ne),ze=f.findViewByCell(me);return d.FunctionExt.call(w,f,{edge:n,edgeView:k,sourceCell:ne,targetCell:me,sourceView:De,targetView:ze,sourcePort:n.getSourcePortId(),targetPort:n.getTargetPortId(),sourceMagnet:k.sourceMagnet,targetMagnet:k.targetMagnet})}validateEdge(n,f,p){const w=this.graph;if(!this.allowConnectToBlank(n)){const ne=n.getSourceCellId(),me=n.getTargetCellId();if(!(ne&&me))return!1}const k=w.options.connecting.validateEdge;return k?d.FunctionExt.call(k,w,{edge:n,type:f,previous:p}):!0}arrowheadDragging(n,f,p,w){w.x=f,w.y=p,w.currentTarget!==n&&(w.currentMagnet&&w.currentView&&w.currentView.unhighlight(w.currentMagnet,{type:"magnetAdsorbed"}),w.currentView=this.graph.findViewByElem(n),w.currentView?(w.currentMagnet=w.currentView.findMagnet(n),w.currentMagnet&&this.validateConnection(...w.getValidateConnectionArgs(w.currentView,w.currentMagnet),w.currentView.getEdgeTerminal(w.currentMagnet,f,p,this.cell,w.terminalType))?w.currentView.highlight(w.currentMagnet,{type:"magnetAdsorbed"}):w.currentMagnet=null):w.currentMagnet=null),w.currentTarget=n,this.cell.prop(w.terminalType,{x:f,y:p},Object.assign(Object.assign({},w.options),{ui:!0}))}arrowheadDragged(n,f,p){const w=n.currentView,k=n.currentMagnet;if(!k||!w)return;w.unhighlight(k,{type:"magnetAdsorbed"});const ne=n.terminalType,me=w.getEdgeTerminal(k,f,p,this.cell,ne);this.cell.setTerminal(ne,me,{ui:!0})}snapArrowhead(n,f,p){const w=this.graph,{snap:k,allowEdge:ne}=w.options.connecting,me=typeof k=="object"&&k.radius||50,De=typeof k=="object"&&k.anchor||"center",ze=w.renderer.findViewsInArea({x:n-me,y:f-me,width:2*me,height:2*me},{nodeOnly:!0});if(ne){const ri=w.renderer.findEdgeViewsFromPoint({x:n,y:f},me).filter(yn=>yn!==this);ze.push(...ri)}const it=p.closestView||null,Pt=p.closestMagnet||null;p.closestView=null,p.closestMagnet=null;let ht,Ft=Number.MAX_SAFE_INTEGER;const tn=new v.Point(n,f);ze.forEach(ri=>{if(ri.container.getAttribute("magnet")!=="false"){if(ri.isNodeView())ht=De==="center"?ri.cell.getBBox().getCenter().distance(tn):ri.cell.getBBox().getNearestPointToPoint(tn).distance(tn);else if(ri.isEdgeView()){const yn=ri.getClosestPoint(tn);yn?ht=yn.distance(tn):ht=Number.MAX_SAFE_INTEGER}ht<me&&ht<Ft&&(Pt===ri.container||this.validateConnection(...p.getValidateConnectionArgs(ri,null),ri.getEdgeTerminal(ri.container,n,f,this.cell,p.terminalType)))&&(Ft=ht,p.closestView=ri,p.closestMagnet=ri.container)}ri.container.querySelectorAll("[magnet]").forEach(yn=>{if(yn.getAttribute("magnet")!=="false"){const ao=ri.getBBoxOfElement(yn);ht=tn.distance(ao.getCenter()),ht<me&&ht<Ft&&(Pt===yn||this.validateConnection(...p.getValidateConnectionArgs(ri,yn),ri.getEdgeTerminal(yn,n,f,this.cell,p.terminalType)))&&(Ft=ht,p.closestView=ri,p.closestMagnet=yn)}})});let On;const Rn=p.terminalType,nr=p.closestView,or=p.closestMagnet,Dr=Pt!==or;if(it&&Dr&&it.unhighlight(Pt,{type:"magnetAdsorbed"}),nr){if(!Dr)return;nr.highlight(or,{type:"magnetAdsorbed"}),On=nr.getEdgeTerminal(or,n,f,this.cell,Rn)}else On={x:n,y:f};this.cell.setTerminal(Rn,On,{},Object.assign(Object.assign({},p.options),{ui:!0}))}snapArrowheadEnd(n){const f=n.closestView,p=n.closestMagnet;f&&p&&(f.unhighlight(p,{type:"magnetAdsorbed"}),n.currentMagnet=f.findMagnet(p)),n.closestView=null,n.closestMagnet=null}finishEmbedding(n){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(n.zIndex=null)}fallbackConnection(n){switch(n.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(n.terminalType,n.initialTerminal,{ui:!0});break}}notifyConnectionEvent(n,f){const p=n.terminalType,w=n.initialTerminal,k=this.cell[p];if(k&&!ba.equalTerminals(w,k)){const me=this.graph,De=w,ze=De.cell?me.getCellById(De.cell):null,it=De.port,Pt=ze?me.findViewByCell(ze):null,ht=ze||n.isNewEdge?null:v.Point.create(w).toJSON(),Ft=k,tn=Ft.cell?me.getCellById(Ft.cell):null,On=Ft.port,Rn=tn?me.findViewByCell(tn):null,nr=tn?null:v.Point.create(k).toJSON();this.notify("edge:connected",{e:f,previousCell:ze,previousPort:it,previousView:Pt,previousPoint:ht,currentCell:tn,currentView:Rn,currentPort:On,currentPoint:nr,previousMagnet:n.initialMagnet,currentMagnet:n.currentMagnet,edge:this.cell,view:this,type:p,isNew:n.isNewEdge})}}highlightAvailableMagnets(n){const f=this.graph,p=f.model.getCells();n.marked={};for(let w=0,k=p.length;w<k;w+=1){const ne=f.findViewByCell(p[w]);if(!ne||ne.cell.id===this.cell.id)continue;const me=Array.prototype.slice.call(ne.container.querySelectorAll("[magnet]"));ne.container.getAttribute("magnet")!=="false"&&me.push(ne.container);const De=me.filter(ze=>this.validateConnection(...n.getValidateConnectionArgs(ne,ze),ne.getEdgeTerminal(ze,n.x,n.y,this.cell,n.terminalType)));if(De.length>0){for(let ze=0,it=De.length;ze<it;ze+=1)ne.highlight(De[ze],{type:"magnetAvailable"});ne.highlight(null,{type:"nodeAvailable"}),n.marked[ne.cell.id]=De}}}unhighlightAvailableMagnets(n){const f=n.marked||{};Object.keys(f).forEach(p=>{const w=this.graph.findViewByCell(p);w&&(f[p].forEach(ne=>{w.unhighlight(ne,{type:"magnetAvailable"})}),w.unhighlight(null,{type:"nodeAvailable"}))}),n.marked=null}startArrowheadDragging(n,f,p){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(n,f,p);return}const k=n.target.getAttribute("data-terminal"),ne=this.prepareArrowheadDragging(k,{x:f,y:p});this.setEventData(n,ne)}dragArrowhead(n,f,p){const w=this.getEventData(n);this.graph.options.connecting.snap?this.snapArrowhead(f,p,w):this.arrowheadDragging(this.getEventTarget(n),f,p,w)}stopArrowheadDragging(n,f,p){const w=this.graph,k=this.getEventData(n);w.options.connecting.snap?this.snapArrowheadEnd(k):this.arrowheadDragged(k,f,p),this.validateEdge(this.cell,k.terminalType,k.initialTerminal)?(this.finishEmbedding(k),this.notifyConnectionEvent(k,n)):this.fallbackConnection(k),this.afterArrowheadDragging(k)}startLabelDragging(n,f,p){if(this.can("edgeLabelMovable")){const w=n.currentTarget,k=parseInt(w.getAttribute("data-index"),10),ne=this.getLabelPositionAngle(k),me=this.getLabelPositionArgs(k),De=this.getDefaultLabelPositionArgs(),ze=this.mergeLabelPositionArgs(me,De);this.setEventData(n,{index:k,positionAngle:ne,positionArgs:ze,stopPropagation:!0,action:"drag-label"})}else this.setEventData(n,{stopPropagation:!0});this.graph.view.delegateDragEvents(n,this)}dragLabel(n,f,p){const w=this.getEventData(n),k=this.cell.getLabelAt(w.index),ne=d.ObjectExt.merge({},k,{position:this.getLabelPosition(f,p,w.positionAngle,w.positionArgs)});this.cell.setLabelAt(w.index,ne)}stopLabelDragging(n,f,p){}}(function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag],w=f;return(p==null||p===H.toStringTag)&&typeof w.isNodeView=="function"&&typeof w.isEdgeView=="function"&&typeof w.confirmUpdate=="function"&&typeof w.update=="function"&&typeof w.getConnection=="function"}H.isEdgeView=n})(Mc||(Mc={})),Mc.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),Mc.registry.register("edge",Mc,!0);var gl=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class Mu extends Mo{get disposeContainer(){return!1}get options(){return this.graph.options}constructor(n){super(),this.graph=n;const{selectors:f,fragment:p}=ve.parseJSONMarkup(Mu.markup);this.background=f.background,this.grid=f.grid,this.svg=f.svg,this.defs=f.defs,this.viewport=f.viewport,this.primer=f.primer,this.stage=f.stage,this.decorator=f.decorator,this.overlay=f.overlay,this.container=this.options.container,this.restore=Mu.snapshoot(this.container),d.Dom.addClass(this.container,this.prefixClassName("graph")),d.Dom.append(this.container,p),this.delegateEvents()}delegateEvents(){const n=this.constructor;return super.delegateEvents(n.events),this}guard(n,f){return n.type==="mousedown"&&n.button===2||this.options.guard&&this.options.guard(n,f)?!0:n.data&&n.data.guarded!==void 0?n.data.guarded:!(f&&f.cell&&It.isCell(f.cell)||this.svg===n.target||this.container===n.target||this.svg.contains(n.target))}findView(n){return this.graph.findViewByElem(n)}onDblClick(n){this.options.preventDefaultDblClick&&n.preventDefault();const f=this.normalizeEvent(n),p=this.findView(f.target);if(this.guard(f,p))return;const w=this.graph.snapToGrid(f.clientX,f.clientY);p?p.onDblClick(f,w.x,w.y):this.graph.trigger("blank:dblclick",{e:f,x:w.x,y:w.y})}onClick(n){if(this.getMouseMovedCount(n)<=this.options.clickThreshold){const f=this.normalizeEvent(n),p=this.findView(f.target);if(this.guard(f,p))return;const w=this.graph.snapToGrid(f.clientX,f.clientY);p?p.onClick(f,w.x,w.y):this.graph.trigger("blank:click",{e:f,x:w.x,y:w.y})}}isPreventDefaultContextMenu(n){let f=this.options.preventDefaultContextMenu;return typeof f=="function"&&(f=d.FunctionExt.call(f,this.graph,{view:n})),f}onContextMenu(n){const f=this.normalizeEvent(n),p=this.findView(f.target);if(this.isPreventDefaultContextMenu(p)&&n.preventDefault(),this.guard(f,p))return;const w=this.graph.snapToGrid(f.clientX,f.clientY);p?p.onContextMenu(f,w.x,w.y):this.graph.trigger("blank:contextmenu",{e:f,x:w.x,y:w.y})}delegateDragEvents(n,f){n.data==null&&(n.data={}),this.setEventData(n,{currentView:f||null,mouseMovedCount:0,startPosition:{x:n.clientX,y:n.clientY}});const p=this.constructor;this.delegateDocumentEvents(p.documentEvents,n.data),this.undelegateEvents()}getMouseMovedCount(n){return this.getEventData(n).mouseMovedCount||0}onMouseDown(n){const f=this.normalizeEvent(n),p=this.findView(f.target);if(this.guard(f,p))return;this.options.preventDefaultMouseDown&&n.preventDefault();const w=this.graph.snapToGrid(f.clientX,f.clientY);p?p.onMouseDown(f,w.x,w.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(f.type)&&n.preventDefault(),this.graph.trigger("blank:mousedown",{e:f,x:w.x,y:w.y})),this.delegateDragEvents(f,p)}onMouseMove(n){const f=this.getEventData(n),p=f.startPosition;if(p&&p.x===n.clientX&&p.y===n.clientY||(f.mouseMovedCount==null&&(f.mouseMovedCount=0),f.mouseMovedCount+=1,f.mouseMovedCount<=this.options.moveThreshold))return;const k=this.normalizeEvent(n),ne=this.graph.snapToGrid(k.clientX,k.clientY),me=f.currentView;me?me.onMouseMove(k,ne.x,ne.y):this.graph.trigger("blank:mousemove",{e:k,x:ne.x,y:ne.y}),this.setEventData(k,f)}onMouseUp(n){this.undelegateDocumentEvents();const f=this.normalizeEvent(n),p=this.graph.snapToGrid(f.clientX,f.clientY),k=this.getEventData(n).currentView;if(k?k.onMouseUp(f,p.x,p.y):this.graph.trigger("blank:mouseup",{e:f,x:p.x,y:p.y}),!n.isPropagationStopped()){const ne=new d.Dom.EventObject(n,{type:"click",data:n.data});this.onClick(ne)}n.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(n){const f=this.normalizeEvent(n),p=this.findView(f.target);if(!this.guard(f,p))if(p)p.onMouseOver(f);else{if(this.container===f.target)return;this.graph.trigger("blank:mouseover",{e:f})}}onMouseOut(n){const f=this.normalizeEvent(n),p=this.findView(f.target);if(!this.guard(f,p))if(p)p.onMouseOut(f);else{if(this.container===f.target)return;this.graph.trigger("blank:mouseout",{e:f})}}onMouseEnter(n){const f=this.normalizeEvent(n),p=this.findView(f.target);if(this.guard(f,p))return;const w=this.graph.findViewByElem(f.relatedTarget);if(p){if(w===p)return;p.onMouseEnter(f)}else{if(w)return;this.graph.trigger("graph:mouseenter",{e:f})}}onMouseLeave(n){const f=this.normalizeEvent(n),p=this.findView(f.target);if(this.guard(f,p))return;const w=this.graph.findViewByElem(f.relatedTarget);if(p){if(w===p)return;p.onMouseLeave(f)}else{if(w)return;this.graph.trigger("graph:mouseleave",{e:f})}}onMouseWheel(n){const f=this.normalizeEvent(n),p=this.findView(f.target);if(this.guard(f,p))return;const w=f.originalEvent,k=this.graph.snapToGrid(w.clientX,w.clientY),ne=Math.max(-1,Math.min(1,w.wheelDelta||-w.detail));p?p.onMouseWheel(f,k.x,k.y,ne):this.graph.trigger("blank:mousewheel",{e:f,delta:ne,x:k.x,y:k.y})}onCustomEvent(n){const f=n.currentTarget,p=f.getAttribute("event")||f.getAttribute("data-event");if(p){const w=this.findView(f);if(w){const k=this.normalizeEvent(n);if(this.guard(k,w))return;const ne=this.graph.snapToGrid(k.clientX,k.clientY);w.onCustomEvent(k,p,ne.x,ne.y)}}}handleMagnetEvent(n,f){const p=n.currentTarget,w=p.getAttribute("magnet");if(w&&w.toLowerCase()!=="false"){const k=this.findView(p);if(k){const ne=this.normalizeEvent(n);if(this.guard(ne,k))return;const me=this.graph.snapToGrid(ne.clientX,ne.clientY);d.FunctionExt.call(f,this.graph,k,ne,p,me.x,me.y)}}}onMagnetMouseDown(n){this.handleMagnetEvent(n,(f,p,w,k,ne)=>{f.onMagnetMouseDown(p,w,k,ne)})}onMagnetDblClick(n){this.handleMagnetEvent(n,(f,p,w,k,ne)=>{f.onMagnetDblClick(p,w,k,ne)})}onMagnetContextMenu(n){const f=this.findView(n.target);this.isPreventDefaultContextMenu(f)&&n.preventDefault(),this.handleMagnetEvent(n,(p,w,k,ne,me)=>{p.onMagnetContextMenu(w,k,ne,me)})}onLabelMouseDown(n){const f=n.currentTarget,p=this.findView(f);if(p){const w=this.normalizeEvent(n);if(this.guard(w,p))return;const k=this.graph.snapToGrid(w.clientX,w.clientY);p.onLabelMouseDown(w,k.x,k.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}gl([Mo.dispose()],Mu.prototype,"dispose",null),function(H){const n=`${nt.prefixCls}-graph`;H.markup=[{ns:d.Dom.ns.xhtml,tagName:"div",selector:"background",className:`${n}-background`},{ns:d.Dom.ns.xhtml,tagName:"div",selector:"grid",className:`${n}-grid`},{ns:d.Dom.ns.svg,tagName:"svg",selector:"svg",className:`${n}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":d.Dom.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${n}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${n}-svg-primer`},{tagName:"g",selector:"stage",className:`${n}-svg-stage`},{tagName:"g",selector:"decorator",className:`${n}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${n}-svg-overlay`}]}]}];function f(p){const w=p.cloneNode();return p.childNodes.forEach(k=>w.appendChild(k)),()=>{for(d.Dom.empty(p);p.attributes.length>0;)p.removeAttribute(p.attributes[0].name);for(let k=0,ne=w.attributes.length;k<ne;k+=1){const me=w.attributes[k];p.setAttribute(me.name,me.value)}w.childNodes.forEach(k=>p.appendChild(k))}}H.snapshoot=f}(Mu||(Mu={})),function(H){const n=nt.prefixCls;H.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${n}-cell`]:"onMouseEnter",[`mouseleave  .${n}-cell`]:"onMouseLeave",[`mouseenter  .${n}-cell-tools`]:"onMouseEnter",[`mouseleave  .${n}-cell-tools`]:"onMouseLeave",[`mousedown   .${n}-cell [event]`]:"onCustomEvent",[`touchstart  .${n}-cell [event]`]:"onCustomEvent",[`mousedown   .${n}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${n}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${n}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${n}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${n}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${n}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${n}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${n}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${n}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${n}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${n}-cell image`]:"onImageDragStart",[`mousedown   .${n}-edge .${n}-edge-label`]:"onLabelMouseDown",[`touchstart  .${n}-edge .${n}-edge-label`]:"onLabelMouseDown"},H.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Mu||(Mu={}));const Nf=`.x6-graph {
  position: relative;
  overflow: hidden;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;class Ta extends d.Disposable{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(n){super(),this.graph=n,this.init()}init(){}}var If=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class Pc extends Ta{init(){nt.autoInsertCSS&&d.CssLoader.ensure("core",Nf)}dispose(){d.CssLoader.clean("core")}}If([Pc.dispose()],Pc.prototype,"dispose",null);var pl=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f},Xu;(function(H){function n(f){const{grid:p,panning:w,mousewheel:k,embedding:ne}=f,me=pl(f,["grid","panning","mousewheel","embedding"]),De=f.container;if(De!=null)me.width==null&&(me.width=De.clientWidth),me.height==null&&(me.height=De.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const ze=d.ObjectExt.merge({},H.defaults,me),it={size:10,visible:!1};return typeof p=="number"?ze.grid={size:p,visible:!1}:typeof p=="boolean"?ze.grid=Object.assign(Object.assign({},it),{visible:p}):ze.grid=Object.assign(Object.assign({},it),p),["panning","mousewheel","embedding"].forEach(ht=>{const Ft=f[ht];typeof Ft=="boolean"?ze[ht].enabled=Ft:ze[ht]=Object.assign(Object.assign({},ze[ht]),Ft)}),ze}H.get=n})(Xu||(Xu={})),function(H){H.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:nt.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:nt.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection({type:n,sourceView:f,targetView:p}){return(n==="target"?p:f)!=null},createEdge(){return new Nh}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(Xu||(Xu={}));var vl=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k},ha=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class Eu extends Ta{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(n){this.grid.visible!==n&&(this.grid.visible=n,this.update())}getGridSize(){return this.grid.size}setGridSize(n){this.grid.size=Math.max(n,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(n){this.clear(),this.instance=null,Object.assign(this.grid,n),this.patterns=this.resolveGrid(n),this.update()}update(n={}){const f=this.grid.size;if(f<=1||!this.grid.visible)return this.clear();const p=this.graph.matrix(),w=this.getInstance(),k=Array.isArray(n)?n:[n];this.patterns.forEach((De,ze)=>{const it=`pattern_${ze}`,Pt=p.a||1,ht=p.d||1,{update:Ft,markup:tn}=De,On=ha(De,["update","markup"]),Rn=Object.assign(Object.assign(Object.assign({},On),k[ze]),{sx:Pt,sy:ht,ox:p.e||0,oy:p.f||0,width:f*Pt,height:f*ht});w.has(it)||w.add(it,d.Vector.create("pattern",{id:it,patternUnits:"userSpaceOnUse"},d.Vector.createVectors(tn)).node);const nr=w.get(it);typeof Ft=="function"&&Ft(nr.childNodes[0],Rn);let or=Rn.ox%Rn.width;or<0&&(or+=Rn.width);let Dr=Rn.oy%Rn.height;Dr<0&&(Dr+=Rn.height),d.Dom.attr(nr,{x:or,y:Dr,width:Rn.width,height:Rn.height})});const ne=new XMLSerializer().serializeToString(w.root),me=`url(data:image/svg+xml;base64,${btoa(ne)})`;this.elem.style.backgroundImage=me}getInstance(){return this.instance||(this.instance=new te),this.instance}resolveGrid(n){if(!n)return[];const f=n.type;if(f==null)return[Object.assign(Object.assign({},te.presets.dot),n.args)];const p=te.registry.get(f);if(p){let w=n.args||[];return Array.isArray(w)||(w=[w]),Array.isArray(p)?p.map((k,ne)=>Object.assign(Object.assign({},k),w[ne])):[Object.assign(Object.assign({},p),w[0])]}return te.registry.onNotFound(f)}dispose(){this.stopListening(),this.clear()}}vl([Ta.dispose()],Eu.prototype,"dispose",null);class cf extends Ta{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const n=this.viewport.getAttribute("transform");return n!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=n),d.Dom.createSVGMatrix(this.viewportMatrix)}setMatrix(n){const f=d.Dom.createSVGMatrix(n),p=d.Dom.matrixToTransformString(f);this.viewport.setAttribute("transform",p),this.viewportMatrix=f,this.viewportTransformString=p}resize(n,f){let p=n===void 0?this.options.width:n,w=f===void 0?this.options.height:f;this.options.width=p,this.options.height=w,typeof p=="number"&&(p=Math.round(p)),typeof w=="number"&&(w=Math.round(w)),this.container.style.width=p==null?"":`${p}px`,this.container.style.height=w==null?"":`${w}px`;const k=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},k)),this}getComputedSize(){let n=this.options.width,f=this.options.height;return d.NumberExt.isNumber(n)||(n=this.container.clientWidth),d.NumberExt.isNumber(f)||(f=this.container.clientHeight),{width:n,height:f}}getScale(){return d.Dom.matrixToScale(this.getMatrix())}scale(n,f=n,p=0,w=0){if(n=this.clampScale(n),f=this.clampScale(f),p||w){const ne=this.getTranslation(),me=ne.tx-p*(n-1),De=ne.ty-w*(f-1);(me!==ne.tx||De!==ne.ty)&&this.translate(me,De)}const k=this.getMatrix();return k.a=n,k.d=f,this.setMatrix(k),this.graph.trigger("scale",{sx:n,sy:f,ox:p,oy:w}),this}clampScale(n){const f=this.graph.options.scaling;return d.NumberExt.clamp(n,f.min||.01,f.max||16)}getZoom(){return this.getScale().sx}zoom(n,f){f=f||{};let p=n,w=n;const k=this.getScale(),ne=this.getComputedSize();let me=ne.width/2,De=ne.height/2;if(f.absolute||(p+=k.sx,w+=k.sy),f.scaleGrid&&(p=Math.round(p/f.scaleGrid)*f.scaleGrid,w=Math.round(w/f.scaleGrid)*f.scaleGrid),f.maxScale&&(p=Math.min(f.maxScale,p),w=Math.min(f.maxScale,w)),f.minScale&&(p=Math.max(f.minScale,p),w=Math.max(f.minScale,w)),f.center&&(me=f.center.x,De=f.center.y),p=this.clampScale(p),w=this.clampScale(w),me||De){const ze=this.getTranslation(),it=me-(me-ze.tx)*(p/k.sx),Pt=De-(De-ze.ty)*(w/k.sy);(it!==ze.tx||Pt!==ze.ty)&&this.translate(it,Pt)}return this.scale(p,w),this}getRotation(){return d.Dom.matrixToRotation(this.getMatrix())}rotate(n,f,p){if(f==null||p==null){const k=er.getBBox(this.stage);f=k.width/2,p=k.height/2}const w=this.getMatrix().translate(f,p).rotate(n).translate(-f,-p);return this.setMatrix(w),this}getTranslation(){return d.Dom.matrixToTranslation(this.getMatrix())}translate(n,f){const p=this.getMatrix();p.e=n||0,p.f=f||0,this.setMatrix(p);const w=this.getTranslation();return this.options.x=w.tx,this.options.y=w.ty,this.graph.trigger("translate",Object.assign({},w)),this}setOrigin(n,f){return this.translate(n||0,f||0)}fitToContent(n,f,p,w){if(typeof n=="object"){const Dr=n;n=Dr.gridWidth||1,f=Dr.gridHeight||1,p=Dr.padding||0,w=Dr}else n=n||1,f=f||1,p=p||0,w==null&&(w={});const k=d.NumberExt.normalizeSides(p),ne=w.border||0,me=w.contentArea?v.Rectangle.create(w.contentArea):this.getContentArea(w);ne>0&&me.inflate(ne);const De=this.getScale(),ze=this.getTranslation(),it=De.sx,Pt=De.sy;me.x*=it,me.y*=Pt,me.width*=it,me.height*=Pt;let ht=Math.max(Math.ceil((me.width+me.x)/n),1)*n,Ft=Math.max(Math.ceil((me.height+me.y)/f),1)*f,tn=0,On=0;(w.allowNewOrigin==="negative"&&me.x<0||w.allowNewOrigin==="positive"&&me.x>=0||w.allowNewOrigin==="any")&&(tn=Math.ceil(-me.x/n)*n,tn+=k.left,ht+=tn),(w.allowNewOrigin==="negative"&&me.y<0||w.allowNewOrigin==="positive"&&me.y>=0||w.allowNewOrigin==="any")&&(On=Math.ceil(-me.y/f)*f,On+=k.top,Ft+=On),ht+=k.right,Ft+=k.bottom,ht=Math.max(ht,w.minWidth||0),Ft=Math.max(Ft,w.minHeight||0),ht=Math.min(ht,w.maxWidth||Number.MAX_SAFE_INTEGER),Ft=Math.min(Ft,w.maxHeight||Number.MAX_SAFE_INTEGER);const Rn=this.getComputedSize(),nr=ht!==Rn.width||Ft!==Rn.height;return(tn!==ze.tx||On!==ze.ty)&&this.translate(tn,On),nr&&this.resize(ht,Ft),new v.Rectangle(-tn/it,-On/Pt,ht/it,Ft/Pt)}scaleContentToFit(n={}){this.scaleContentToFitImpl(n)}scaleContentToFitImpl(n={},f=!0){let p,w;if(n.contentArea){const nr=n.contentArea;p=this.graph.localToGraph(nr),w=v.Point.create(nr)}else p=this.getContentBBox(n),w=this.graph.graphToLocal(p);if(!p.width||!p.height)return;const k=d.NumberExt.normalizeSides(n.padding),ne=n.minScale||0,me=n.maxScale||Number.MAX_SAFE_INTEGER,De=n.minScaleX||ne,ze=n.maxScaleX||me,it=n.minScaleY||ne,Pt=n.maxScaleY||me;let ht;if(n.viewportArea)ht=n.viewportArea;else{const nr=this.getComputedSize(),or=this.getTranslation();ht={x:or.tx,y:or.ty,width:nr.width,height:nr.height}}ht=v.Rectangle.create(ht).moveAndExpand({x:k.left,y:k.top,width:-k.left-k.right,height:-k.top-k.bottom});const Ft=this.getScale();let tn=ht.width/p.width*Ft.sx,On=ht.height/p.height*Ft.sy;n.preserveAspectRatio!==!1&&(tn=On=Math.min(tn,On));const Rn=n.scaleGrid;if(Rn&&(tn=Rn*Math.floor(tn/Rn),On=Rn*Math.floor(On/Rn)),tn=d.NumberExt.clamp(tn,De,ze),On=d.NumberExt.clamp(On,it,Pt),this.scale(tn,On),f){const nr=this.options,or=ht.x-w.x*tn-nr.x,Dr=ht.y-w.y*On-nr.y;this.translate(or,Dr)}}getContentArea(n={}){return n.useCellGeometry!==!1?this.model.getAllCellsBBox()||new v.Rectangle:er.getBBox(this.stage)}getContentBBox(n={}){return this.graph.localToGraph(this.getContentArea(n))}getGraphArea(){const n=v.Rectangle.fromSize(this.getComputedSize());return this.graph.graphToLocal(n)}zoomToRect(n,f={}){const p=v.Rectangle.create(n),w=this.graph;f.contentArea=p,f.viewportArea==null&&(f.viewportArea={x:w.options.x,y:w.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(f,!1);const k=p.getCenter();return this.centerPoint(k.x,k.y),this}zoomToFit(n={}){return this.zoomToRect(this.getContentArea(n),n)}centerPoint(n,f){const p=this.getComputedSize(),w=this.getScale(),k=this.getTranslation(),ne=p.width/2,me=p.height/2;n=typeof n=="number"?n:ne,f=typeof f=="number"?f:me,n=ne-n*w.sx,f=me-f*w.sy,(k.tx!==n||k.ty!==f)&&this.translate(n,f)}centerContent(n){const p=this.graph.getContentArea(n).getCenter();this.centerPoint(p.x,p.y)}centerCell(n){return this.positionCell(n,"center")}positionPoint(n,f,p){const w=this.getComputedSize();f=d.NumberExt.normalizePercentage(f,Math.max(0,w.width)),f<0&&(f=w.width+f),p=d.NumberExt.normalizePercentage(p,Math.max(0,w.height)),p<0&&(p=w.height+p);const k=this.getTranslation(),ne=this.getScale(),me=f-n.x*ne.sx,De=p-n.y*ne.sy;(k.tx!==me||k.ty!==De)&&this.translate(me,De)}positionRect(n,f){const p=v.Rectangle.create(n);switch(f){case"center":return this.positionPoint(p.getCenter(),"50%","50%");case"top":return this.positionPoint(p.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(p.getTopRight(),"100%",0);case"right":return this.positionPoint(p.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(p.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(p.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(p.getBottomLeft(),0,"100%");case"left":return this.positionPoint(p.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(p.getTopLeft(),0,0);default:return this}}positionCell(n,f){const p=n.getBBox();return this.positionRect(p,f)}positionContent(n,f){const p=this.graph.getContentArea(f);return this.positionRect(p,n)}}var tc=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class pc extends Ta{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(n={}){let f=n.size||"auto auto",p=n.position||"center";const w=this.graph.transform.getScale(),k=this.graph.translate();if(typeof p=="object"){const ne=k.tx+w.sx*(p.x||0),me=k.ty+w.sy*(p.y||0);p=`${ne}px ${me}px`}typeof f=="object"&&(f=v.Rectangle.fromSize(f).scale(w.sx,w.sy),f=`${f.width}px ${f.height}px`),this.elem.style.backgroundSize=f,this.elem.style.backgroundPosition=p}drawBackgroundImage(n,f={}){if(!(n instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const p=this.optionsCache;if(p&&p.image!==f.image)return;let w;const k=f.opacity,ne=f.size;let me=f.repeat||"no-repeat";const De=ee.registry.get(me);if(typeof De=="function"){const it=f.quality||1;n.width*=it,n.height*=it;const Pt=De(n,f);if(!(Pt instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");w=Pt.toDataURL("image/png"),f.repeat&&me!==f.repeat?me=f.repeat:me="repeat",typeof ne=="object"?(ne.width*=Pt.width/n.width,ne.height*=Pt.height/n.height):ne===void 0&&(f.size={width:Pt.width/it,height:Pt.height/it})}else w=n.src,ne===void 0&&(f.size={width:n.width,height:n.height});p!=null&&typeof f.size=="object"&&f.image===p.image&&f.repeat===p.repeat&&f.quality===p.quality&&(p.size=d.ObjectExt.clone(f.size));const ze=this.elem.style;ze.backgroundImage=`url(${w})`,ze.backgroundRepeat=me,ze.opacity=k==null||k>=1?"":`${k}`,this.updateBackgroundImage(f)}updateBackgroundColor(n){this.elem.style.backgroundColor=n||""}updateBackgroundOptions(n){this.graph.options.background=n}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(n){const f=n||{};if(this.updateBackgroundOptions(n),this.updateBackgroundColor(f.color),f.image){this.optionsCache=d.ObjectExt.clone(f);const p=document.createElement("img");p.onload=()=>this.drawBackgroundImage(p,n),p.setAttribute("crossorigin","anonymous"),p.src=f.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}tc([Ta.dispose()],pc.prototype,"dispose",null);var _r=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class Ts extends Ta{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.onRightMouseDown=this.onRightMouseDown.bind(this),this.onSpaceKeyDown=this.onSpaceKeyDown.bind(this),this.onSpaceKeyUp=this.onSpaceKeyUp.bind(this),this.startListening(),this.updateClassName()}startListening(){this.graph.on("blank:mousedown",this.onMouseDown,this),this.graph.on("node:unhandled:mousedown",this.onMouseDown,this),this.graph.on("edge:unhandled:mousedown",this.onMouseDown,this),d.Dom.Event.on(this.graph.container,"mousedown",this.onRightMouseDown),d.Dom.Event.on(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle=new d.Dom.MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()}stopListening(){this.graph.off("blank:mousedown",this.onMouseDown,this),this.graph.off("node:unhandled:mousedown",this.onMouseDown,this),this.graph.off("edge:unhandled:mousedown",this.onMouseDown,this),d.Dom.Event.off(this.graph.container,"mousedown",this.onRightMouseDown),d.Dom.Event.off(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle&&this.mousewheelHandle.disable()}allowPanning(n,f){return n.spaceKey=this.isSpaceKeyPressed,this.pannable&&d.ModifierKey.isMatch(n,this.widgetOptions.modifiers,f)}startPanning(n){const f=this.view.normalizeEvent(n);this.clientX=f.clientX,this.clientY=f.clientY,this.panning=!0,this.updateClassName(),d.Dom.Event.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),d.Dom.Event.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(n){const f=this.view.normalizeEvent(n),p=f.clientX-this.clientX,w=f.clientY-this.clientY;this.clientX=f.clientX,this.clientY=f.clientY,this.graph.translateBy(p,w)}stopPanning(n){this.panning=!1,this.updateClassName(),d.Dom.Event.off(document.body,".panning"),d.Dom.Event.off(window,".panning")}updateClassName(){const n=this.view.container,f=this.view.prefixClassName("graph-panning"),p=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(d.Dom.addClass(n,f),d.Dom.removeClass(n,p)):(d.Dom.removeClass(n,f),d.Dom.addClass(n,p)):(d.Dom.removeClass(n,f),d.Dom.removeClass(n,p))}onMouseDown({e:n}){if(!this.allowBlankMouseDown(n))return;const f=this.graph.getPlugin("selection"),p=f&&f.allowRubberband(n,!0);(this.allowPanning(n,!0)||this.allowPanning(n)&&!p)&&this.startPanning(n)}onRightMouseDown(n){const f=this.widgetOptions.eventTypes;f!=null&&f.includes("rightMouseDown")&&n.button===2&&this.allowPanning(n,!0)&&this.startPanning(n)}onMouseWheel(n,f,p){this.graph.translateBy(-f,-p)}onSpaceKeyDown(n){n.which===32&&(this.isSpaceKeyPressed=!0)}onSpaceKeyUp(n){n.which===32&&(this.isSpaceKeyPressed=!1)}allowBlankMouseDown(n){const f=this.widgetOptions.eventTypes;return(f==null?void 0:f.includes("leftMouseDown"))&&n.button===0||(f==null?void 0:f.includes("mouseWheelDown"))&&n.button===1}allowMouseWheel(n){var f;return this.pannable&&!n.ctrlKey&&((f=this.widgetOptions.eventTypes)===null||f===void 0?void 0:f.includes("mouseWheel"))}autoPanning(n,f){const w=this.graph.getGraphArea();let k=0,ne=0;n<=w.left+10&&(k=-10),f<=w.top+10&&(ne=-10),n>=w.right-10&&(k=10),f>=w.bottom-10&&(ne=10),(k!==0||ne!==0)&&this.graph.translateBy(-k,-ne)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}_r([Ta.dispose()],Ts.prototype,"dispose",null);var Ya=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class nc extends Ta{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new d.Dom.MouseWheelHandle(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return this.widgetOptions.enabled!==!0}enable(n){(this.disabled||n)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(n){const f=this.widgetOptions.guard;return(f==null||f(n))&&d.ModifierKey.isMatch(n,this.widgetOptions.modifiers)}onMouseWheel(n){const f=this.widgetOptions.guard;if((f==null||f(n))&&d.ModifierKey.isMatch(n,this.widgetOptions.modifiers)){const p=this.widgetOptions.factor||1.2;this.currentScale==null&&(this.startPos={x:n.clientX,y:n.clientY},this.currentScale=this.graph.transform.getScale().sx),n.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*p*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/p)*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const k=this.currentScale;let ne=this.graph.transform.clampScale(k*this.cumulatedFactor);const me=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,De=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(ne=d.NumberExt.clamp(ne,me,De),ne!==k)if(this.widgetOptions.zoomAtMousePosition){const it=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(ne,{absolute:!0,center:it.clone()})}else this.graph.zoom(ne,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}Ya([d.Disposable.dispose()],nc.prototype,"dispose",null);var Rf=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class Bu extends Ta{init(){this.resetRenderArea=d.FunctionExt.throttle(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const n=this.graph.getGraphArea();this.graph.renderer.setRenderArea(n)}}dispose(){this.stopListening()}}Rf([Ta.dispose()],Bu.prototype,"dispose",null);class vc{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(n){if(n.priority&Yu.PRIOR)n.cb();else{const f=this.findInsertionIndex(n);f>=0&&this.queue.splice(f,0,n)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const n=this.getCurrentTime();let f;for(;(f=this.queue.shift())&&(f.cb(),!(this.getCurrentTime()-n>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){this.isFlushPending=!1,this.isFlushing=!0;let n;for(;n=this.queue.shift();)try{n.cb()}catch(f){console.log(f)}this.isFlushing=!1}findInsertionIndex(n){let f=0,p=this.queue.length,w=p-1;const k=n.priority;for(;f<=w;){const ne=(w-f>>1)+f;k<=this.queue[ne].priority?f=ne+1:(p=ne,w=ne-1)}return p}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return typeof performance=="object"&&typeof performance.now=="function"?performance.now():Date.now()-this.initialTime}}var Yu;(function(H){H[H.Update=2]="Update",H[H.RenderEdge=4]="RenderEdge",H[H.RenderNode=8]="RenderNode",H[H.PRIOR=1048576]="PRIOR"})(Yu||(Yu={}));var Bl=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class ka extends d.Disposable{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(n){super(),this.views={},this.willRemoveViews={},this.queue=new vc,this.graph=n,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:n}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews();const f=this.model.getCells();this.renderViews(f,Object.assign(Object.assign({},n),{queue:f.map(p=>p.id)}))}onCellAdded({cell:n,options:f}){this.renderViews([n],f)}onCellRemoved({cell:n}){this.removeViews([n])}onCellZIndexChanged({cell:n,options:f}){const p=this.views[n.id];p&&this.requestViewUpdate(p.view,ka.FLAG_INSERT,f,Yu.Update,!0)}onCellVisibleChanged({cell:n,current:f}){this.toggleVisible(n,!!f)}requestViewUpdate(n,f,p={},w=Yu.Update,k=!0){const ne=n.cell.id,me=this.views[ne];if(!me)return;me.flag=f,me.options=p,(n.hasAction(f,["translate","resize","rotate"])||p.async===!1)&&(w=Yu.PRIOR,k=!1),this.queue.queueJob({id:ne,priority:w,cb:()=>{this.renderViewInArea(n,f,p);const it=p.queue;if(it){const Pt=it.indexOf(n.cell.id);Pt>=0&&it.splice(Pt,1),it.length===0&&this.graph.trigger("render:done")}}}),this.getEffectedEdges(n).forEach(it=>{this.requestViewUpdate(it.view,it.flag,p,w,!1)}),k&&this.flush()}setRenderArea(n){this.renderArea=n,this.flushWaitingViews()}isViewMounted(n){if(n==null)return!1;const f=this.views[n.cell.id];return f?f.state===ka.ViewState.MOUNTED:!1}renderViews(n,f={}){n.sort((p,w)=>p.isNode()&&w.isEdge()?-1:0),n.forEach(p=>{const w=p.id,k=this.views;let ne=0,me=k[w];if(me)ne=ka.FLAG_INSERT;else{const De=this.createCellView(p);De&&(De.graph=this.graph,ne=ka.FLAG_INSERT|De.getBootstrapFlag(),me={view:De,flag:ne,options:f,state:ka.ViewState.CREATED},this.views[w]=me)}me&&this.requestViewUpdate(me.view,ne,f,this.getRenderPriority(me.view),!1)}),this.flush()}renderViewInArea(n,f,p={}){const w=n.cell,k=w.id,ne=this.views[k];if(!ne)return;let me=0;this.isUpdatable(n)?(me=this.updateView(n,f,p),ne.flag=me):ne.state===ka.ViewState.MOUNTED?(me=this.updateView(n,f,p),ne.flag=me):ne.state=ka.ViewState.WAITING,me&&w.isEdge()&&!(me&n.getFlag(["source","target"]))&&this.queue.queueJob({id:k,priority:Yu.RenderEdge,cb:()=>{this.updateView(n,f,p)}})}removeViews(n){n.forEach(f=>{const p=f.id,w=this.views[p];w&&(this.willRemoveViews[p]=w,delete this.views[p],this.queue.queueJob({id:p,priority:this.getRenderPriority(w.view),cb:()=>{this.removeView(w.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaitingViews(){Object.values(this.views).forEach(n=>{if(n&&n.state===ka.ViewState.WAITING){const{view:f,flag:p,options:w}=n;this.requestViewUpdate(f,p,w,this.getRenderPriority(f),!1)}}),this.flush()}updateView(n,f,p={}){if(n==null)return 0;if(W.isCellView(n)){if(f&ka.FLAG_REMOVE)return this.removeView(n.cell),0;f&ka.FLAG_INSERT&&(this.insertView(n),f^=ka.FLAG_INSERT)}return f?n.confirmUpdate(f,p):0}insertView(n){const f=this.views[n.cell.id];if(f){const p=n.cell.getZIndex(),w=this.addZPivot(p);this.container.insertBefore(n.container,w),n.cell.isVisible()||this.toggleVisible(n.cell,!1),f.state=ka.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:n})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(n=>{n&&this.removeView(n.view)}),this.views={},this.willRemoveViews={}}removeView(n){const f=n.cell,p=this.willRemoveViews[f.id];p&&n&&(p.view.remove(),delete this.willRemoveViews[f.id],this.graph.trigger("view:unmounted",{view:n}))}toggleVisible(n,f){const p=this.model.getConnectedEdges(n);for(let k=0,ne=p.length;k<ne;k+=1){const me=p[k];if(f){const De=me.getSourceCell(),ze=me.getTargetCell();if(De&&!De.isVisible()||ze&&!ze.isVisible())continue;this.toggleVisible(me,!0)}else this.toggleVisible(me,!1)}const w=this.views[n.id];w&&d.Dom.css(w.view.container,{display:f?"unset":"none"})}addZPivot(n=0){this.zPivots==null&&(this.zPivots={});const f=this.zPivots;let p=f[n];if(p)return p;p=f[n]=document.createComment(`z-index:${n+1}`);let w=-1/0;for(const ne in f){const me=+ne;me<n&&me>w&&(w=me,n-1)}const k=this.container;if(w!==-1/0){const ne=f[w];k.insertBefore(p,ne.nextSibling)}else k.insertBefore(p,k.firstChild);return p}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(n=>{n&&n.parentNode&&n.parentNode.removeChild(n)}),this.zPivots={}}createCellView(n){const f={graph:this.graph},p=this.graph.options.createCellView;if(p){const k=d.FunctionExt.call(p,this.graph,n);if(k)return new k(n,f);if(k===null)return null}const w=n.view;if(w!=null&&typeof w=="string"){const k=W.registry.get(w);return k?new k(n,f):W.registry.onNotFound(w)}return n.isNode()?new fa(n,f):n.isEdge()?new Mc(n,f):null}getEffectedEdges(n){const f=[],p=n.cell,w=this.model.getConnectedEdges(p);for(let k=0,ne=w.length;k<ne;k+=1){const me=w[k],De=this.views[me.id];if(!De)continue;const ze=De.view;if(!this.isViewMounted(ze))continue;const it=["update"];me.getTargetCell()===p&&it.push("target"),me.getSourceCell()===p&&it.push("source"),f.push({id:me.id,view:ze,flag:ze.getFlag(it)})}return f}isUpdatable(n){if(n.isNodeView())return this.renderArea?this.renderArea.isIntersectWithRect(n.cell.getBBox()):!0;if(n.isEdgeView()){const f=n.cell,p=f.getSourceCell(),w=f.getTargetCell();if(this.renderArea&&p&&w)return this.renderArea.isIntersectWithRect(p.getBBox())||this.renderArea.isIntersectWithRect(w.getBBox())}return!0}getRenderPriority(n){return n.cell.isNode()?Yu.RenderNode:Yu.RenderEdge}dispose(){this.stopListening(),Object.keys(this.views).forEach(n=>{this.views[n].view.dispose()}),this.views={}}}Bl([d.Disposable.dispose()],ka.prototype,"dispose",null),function(H){H.FLAG_INSERT=1<<30,H.FLAG_REMOVE=1<<29,H.FLAG_RENDER=(1<<26)-1}(ka||(ka={})),function(H){let n;(function(f){f[f.CREATED=0]="CREATED",f[f.MOUNTED=1]="MOUNTED",f[f.WAITING=2]="WAITING"})(n=H.ViewState||(H.ViewState={}))}(ka||(ka={}));var lf=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class kl extends Ta{constructor(){super(...arguments),this.schedule=new ka(this.graph)}requestViewUpdate(n,f,p={}){this.schedule.requestViewUpdate(n,f,p)}isViewMounted(n){return this.schedule.isViewMounted(n)}setRenderArea(n){this.schedule.setRenderArea(n)}findViewByElem(n){if(n==null)return null;const f=this.options.container,p=typeof n=="string"?f.querySelector(n):n instanceof Element?n:n[0];if(p){const w=this.graph.view.findAttr("data-cell-id",p);if(w){const k=this.schedule.views;if(k[w])return k[w].view}}return null}findViewByCell(n){if(n==null)return null;const f=It.isCell(n)?n.id:n,p=this.schedule.views;return p[f]?p[f].view:null}findViewsFromPoint(n){const f={x:n.x,y:n.y};return this.model.getCells().map(p=>this.findViewByCell(p)).filter(p=>p!=null?er.getBBox(p.container,{target:this.view.stage}).containsPoint(f):!1)}findEdgeViewsFromPoint(n,f=5){return this.model.getEdges().map(p=>this.findViewByCell(p)).filter(p=>{if(p!=null){const w=p.getClosestPoint(n);if(w)return w.distance(n)<=f}return!1})}findViewsInArea(n,f={}){const p=v.Rectangle.create(n);return this.model.getCells().map(w=>this.findViewByCell(w)).filter(w=>{if(w){if(f.nodeOnly&&!w.isNodeView())return!1;const k=er.getBBox(w.container,{target:this.view.stage});return k.width===0?k.inflate(1,0):k.height===0&&k.inflate(0,1),f.strict?p.containsRect(k):p.isIntersectWithRect(k)}return!1})}dispose(){this.schedule.dispose()}}lf([Ta.dispose()],kl.prototype,"dispose",null);var Ga=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class Gl extends Ta{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(n){return this.svg.getElementById(n)!=null}filter(n){let f=n.id;const p=n.name;if(f||(f=`filter-${p}-${this.cid}-${d.StringExt.hashcode(JSON.stringify(n))}`),!this.isDefined(f)){const w=Ge.registry.get(p);if(w==null)return Ge.registry.onNotFound(p);const k=w(n.args||{}),ne=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},n.attrs),{id:f});d.Vector.create(ve.sanitize(k),ne).appendTo(this.defs)}return f}gradient(n){let f=n.id;const p=n.type;if(f||(f=`gradient-${p}-${this.cid}-${d.StringExt.hashcode(JSON.stringify(n))}`),!this.isDefined(f)){const k=n.stops.map(De=>{const ze=De.opacity!=null&&Number.isFinite(De.opacity)?De.opacity:1;return`<stop offset="${De.offset}" stop-color="${De.color}" stop-opacity="${ze}"/>`}),ne=`<${p}>${k.join("")}</${p}>`,me=Object.assign({id:f},n.attrs);d.Vector.create(ne,me).appendTo(this.defs)}return f}marker(n){const{id:f,refX:p,refY:w,markerUnits:k,markerOrient:ne,tagName:me,children:De}=n,ze=Ga(n,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let it=f;if(it||(it=`marker-${this.cid}-${d.StringExt.hashcode(JSON.stringify(n))}`),!this.isDefined(it)){me!=="path"&&delete ze.d;const Pt=d.Vector.create("marker",{refX:p,refY:w,id:it,overflow:"visible",orient:ne!=null?ne:"auto",markerUnits:k||"userSpaceOnUse"},De?De.map(ht=>{var{tagName:Ft}=ht,tn=Ga(ht,["tagName"]);return d.Vector.create(`${Ft}`||"path",d.Dom.kebablizeAttrs(Object.assign(Object.assign({},ze),tn)))}):[d.Vector.create(me||"path",d.Dom.kebablizeAttrs(ze))]);this.defs.appendChild(Pt.node)}return it}remove(n){const f=this.svg.getElementById(n);f&&f.parentNode&&f.parentNode.removeChild(f)}}class Lf extends Ta{getClientMatrix(){return d.Dom.createSVGMatrix(this.view.stage.getScreenCTM())}getClientOffset(){const n=this.view.svg.getBoundingClientRect();return new v.Point(n.left,n.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(n,f){return(typeof n=="number"?this.clientToLocalPoint(n,f):this.clientToLocalPoint(n.x,n.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(n,f){const p=v.Point.create(n,f);return er.transformPoint(p,this.graph.matrix())}localToClientPoint(n,f){const p=v.Point.create(n,f);return er.transformPoint(p,this.getClientMatrix())}localToPagePoint(n,f){return(typeof n=="number"?this.localToGraphPoint(n,f):this.localToGraphPoint(n)).translate(this.getPageOffset())}localToGraphRect(n,f,p,w){const k=v.Rectangle.create(n,f,p,w);return er.transformRectangle(k,this.graph.matrix())}localToClientRect(n,f,p,w){const k=v.Rectangle.create(n,f,p,w);return er.transformRectangle(k,this.getClientMatrix())}localToPageRect(n,f,p,w){return(typeof n=="number"?this.localToGraphRect(n,f,p,w):this.localToGraphRect(n)).translate(this.getPageOffset())}graphToLocalPoint(n,f){const p=v.Point.create(n,f);return er.transformPoint(p,this.graph.matrix().inverse())}clientToLocalPoint(n,f){const p=v.Point.create(n,f);return er.transformPoint(p,this.getClientMatrix().inverse())}clientToGraphPoint(n,f){const p=v.Point.create(n,f);return er.transformPoint(p,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(n,f){const w=v.Point.create(n,f).diff(this.getPageOffset());return this.graphToLocalPoint(w)}graphToLocalRect(n,f,p,w){const k=v.Rectangle.create(n,f,p,w);return er.transformRectangle(k,this.graph.matrix().inverse())}clientToLocalRect(n,f,p,w){const k=v.Rectangle.create(n,f,p,w);return er.transformRectangle(k,this.getClientMatrix().inverse())}clientToGraphRect(n,f,p,w){const k=v.Rectangle.create(n,f,p,w);return er.transformRectangle(k,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(n,f,p,w){const k=v.Rectangle.create(n,f,p,w),ne=this.getPageOffset();return k.x-=ne.x,k.y-=ne.y,this.graphToLocalRect(k)}}var mc=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class il extends Ta{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:n,magnet:f,options:p={}}){const w=this.resolveHighlighter(p);if(!w)return;const k=this.getHighlighterId(f,w);if(!this.highlights[k]){const ne=w.highlighter;ne.highlight(n,f,Object.assign({},w.args)),this.highlights[k]={cellView:n,magnet:f,highlighter:ne,args:w.args}}}onCellUnhighlight({magnet:n,options:f={}}){const p=this.resolveHighlighter(f);if(!p)return;const w=this.getHighlighterId(n,p);this.unhighlight(w)}resolveHighlighter(n){const f=this.options;let p=n.highlighter;if(p==null){const me=n.type;p=me&&f.highlighting[me]||f.highlighting.default}if(p==null)return null;const w=typeof p=="string"?{name:p}:p,k=w.name,ne=Pn.registry.get(k);return ne==null?Pn.registry.onNotFound(k):(Pn.check(k,ne),{name:k,highlighter:ne,args:w.args||{}})}getHighlighterId(n,f){return d.Dom.ensureId(n),f.name+n.id+JSON.stringify(f.args)}unhighlight(n){const f=this.highlights[n];f&&(f.highlighter.unhighlight(f.cellView,f.magnet,f.args),delete this.highlights[n])}dispose(){Object.keys(this.highlights).forEach(n=>this.unhighlight(n)),this.stopListening()}}mc([il.dispose()],il.prototype,"dispose",null);var Fl=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class Ac extends Ta{getScroller(){const n=this.graph.getPlugin("scroller");return n&&n.options.enabled?n:null}getContainer(){const n=this.getScroller();return n?n.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const n=this.options.autoResize;if(n)return typeof n=="boolean"?this.getContainer():n}init(){if(this.options.autoResize){const f=this.getSensorTarget();f&&d.SizeSensor.bind(f,()=>{const p=f.offsetWidth,w=f.offsetHeight;this.resize(p,w)})}}resize(n,f){const p=this.getScroller();p?p.resize(n,f):this.graph.transform.resize(n,f)}dispose(){d.SizeSensor.clear(this.graph.container)}}Fl([Ta.dispose()],Ac.prototype,"dispose",null);var Bf=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k};class na extends d.Basecoat{get container(){return this.options.container}get[Symbol.toStringTag](){return na.toStringTag}constructor(n){super(),this.installedPlugins=new Set,this.options=Xu.get(n),this.css=new Pc(this),this.view=new Mu(this),this.defs=new Gl(this),this.coord=new Lf(this),this.transform=new cf(this),this.highlight=new il(this),this.grid=new Eu(this),this.background=new pc(this),this.options.model?this.model=this.options.model:(this.model=new ho,this.model.graph=this),this.renderer=new kl(this),this.panning=new Ts(this),this.mousewheel=new nc(this),this.virtualRender=new Bu(this),this.size=new Ac(this)}isNode(n){return n.isNode()}isEdge(n){return n.isEdge()}resetCells(n,f={}){return this.model.resetCells(n,f),this}clearCells(n={}){return this.model.clear(n),this}toJSON(n={}){return this.model.toJSON(n)}parseJSON(n){return this.model.parseJSON(n)}fromJSON(n,f={}){return this.model.fromJSON(n,f),this}getCellById(n){return this.model.getCell(n)}addNode(n,f={}){return this.model.addNode(n,f)}addNodes(n,f={}){return this.addCell(n.map(p=>Go.isNode(p)?p:this.createNode(p)),f)}createNode(n){return this.model.createNode(n)}removeNode(n,f={}){return this.model.removeCell(n,f)}addEdge(n,f={}){return this.model.addEdge(n,f)}addEdges(n,f={}){return this.addCell(n.map(p=>ba.isEdge(p)?p:this.createEdge(p)),f)}removeEdge(n,f={}){return this.model.removeCell(n,f)}createEdge(n){return this.model.createEdge(n)}addCell(n,f={}){return this.model.addCell(n,f),this}removeCell(n,f={}){return this.model.removeCell(n,f)}removeCells(n,f={}){return this.model.removeCells(n,f)}removeConnectedEdges(n,f={}){return this.model.removeConnectedEdges(n,f)}disconnectConnectedEdges(n,f={}){return this.model.disconnectConnectedEdges(n,f),this}hasCell(n){return this.model.has(n)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(n){return this.model.getOutgoingEdges(n)}getIncomingEdges(n){return this.model.getIncomingEdges(n)}getConnectedEdges(n,f={}){return this.model.getConnectedEdges(n,f)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(n){return this.model.isRoot(n)}isLeafNode(n){return this.model.isLeaf(n)}getNeighbors(n,f={}){return this.model.getNeighbors(n,f)}isNeighbor(n,f,p={}){return this.model.isNeighbor(n,f,p)}getSuccessors(n,f={}){return this.model.getSuccessors(n,f)}isSuccessor(n,f,p={}){return this.model.isSuccessor(n,f,p)}getPredecessors(n,f={}){return this.model.getPredecessors(n,f)}isPredecessor(n,f,p={}){return this.model.isPredecessor(n,f,p)}getCommonAncestor(...n){return this.model.getCommonAncestor(...n)}getSubGraph(n,f={}){return this.model.getSubGraph(n,f)}cloneSubGraph(n,f={}){return this.model.cloneSubGraph(n,f)}cloneCells(n){return this.model.cloneCells(n)}getNodesFromPoint(n,f){return this.model.getNodesFromPoint(n,f)}getNodesInArea(n,f,p,w,k){return this.model.getNodesInArea(n,f,p,w,k)}getNodesUnderNode(n,f={}){return this.model.getNodesUnderNode(n,f)}searchCell(n,f,p={}){return this.model.search(n,f,p),this}getShortestPath(n,f,p={}){return this.model.getShortestPath(n,f,p)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(n,f={}){return this.model.getCellsBBox(n,f)}startBatch(n,f={}){this.model.startBatch(n,f)}stopBatch(n,f={}){this.model.stopBatch(n,f)}batchUpdate(n,f,p){const w=typeof n=="string"?n:"update",k=typeof n=="string"?f:n,ne=typeof f=="function"?p:f;this.startBatch(w,ne);const me=k();return this.stopBatch(w,ne),me}updateCellId(n,f){return this.model.updateCellId(n,f)}findView(n){return It.isCell(n)?this.findViewByCell(n):this.findViewByElem(n)}findViews(n){return v.Rectangle.isRectangleLike(n)?this.findViewsInArea(n):v.Point.isPointLike(n)?this.findViewsFromPoint(n):[]}findViewByCell(n){return this.renderer.findViewByCell(n)}findViewByElem(n){return this.renderer.findViewByElem(n)}findViewsFromPoint(n,f){const p=typeof n=="number"?{x:n,y:f}:n;return this.renderer.findViewsFromPoint(p)}findViewsInArea(n,f,p,w,k){const ne=typeof n=="number"?{x:n,y:f,width:p,height:w}:n,me=typeof n=="number"?k:f;return this.renderer.findViewsInArea(ne,me)}matrix(n){return typeof n=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(n),this)}resize(n,f){const p=this.getPlugin("scroller");return p?p.resize(n,f):this.transform.resize(n,f),this}scale(n,f=n,p=0,w=0){return typeof n=="undefined"?this.transform.getScale():(this.transform.scale(n,f,p,w),this)}zoom(n,f){const p=this.getPlugin("scroller");if(p){if(typeof n=="undefined")return p.zoom();p.zoom(n,f)}else{if(typeof n=="undefined")return this.transform.getZoom();this.transform.zoom(n,f)}return this}zoomTo(n,f={}){const p=this.getPlugin("scroller");return p?p.zoom(n,Object.assign(Object.assign({},f),{absolute:!0})):this.transform.zoom(n,Object.assign(Object.assign({},f),{absolute:!0})),this}zoomToRect(n,f={}){const p=this.getPlugin("scroller");return p?p.zoomToRect(n,f):this.transform.zoomToRect(n,f),this}zoomToFit(n={}){const f=this.getPlugin("scroller");return f?f.zoomToFit(n):this.transform.zoomToFit(n),this}rotate(n,f,p){return typeof n=="undefined"?this.transform.getRotation():(this.transform.rotate(n,f,p),this)}translate(n,f){return typeof n=="undefined"?this.transform.getTranslation():(this.transform.translate(n,f),this)}translateBy(n,f){const p=this.translate(),w=p.tx+n,k=p.ty+f;return this.translate(w,k)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(n={}){return this.transform.getContentArea(n)}getContentBBox(n={}){return this.transform.getContentBBox(n)}fitToContent(n,f,p,w){return this.transform.fitToContent(n,f,p,w)}scaleContentToFit(n={}){return this.transform.scaleContentToFit(n),this}center(n){return this.centerPoint(n)}centerPoint(n,f,p){const w=this.getPlugin("scroller");return w?w.centerPoint(n,f,p):this.transform.centerPoint(n,f),this}centerContent(n){const f=this.getPlugin("scroller");return f?f.centerContent(n):this.transform.centerContent(n),this}centerCell(n,f){const p=this.getPlugin("scroller");return p?p.centerCell(n,f):this.transform.centerCell(n),this}positionPoint(n,f,p,w={}){const k=this.getPlugin("scroller");return k?k.positionPoint(n,f,p,w):this.transform.positionPoint(n,f,p),this}positionRect(n,f,p){const w=this.getPlugin("scroller");return w?w.positionRect(n,f,p):this.transform.positionRect(n,f),this}positionCell(n,f,p){const w=this.getPlugin("scroller");return w?w.positionCell(n,f,p):this.transform.positionCell(n,f),this}positionContent(n,f){const p=this.getPlugin("scroller");return p?p.positionContent(n,f):this.transform.positionContent(n,f),this}snapToGrid(n,f){return this.coord.snapToGrid(n,f)}pageToLocal(n,f,p,w){return v.Rectangle.isRectangleLike(n)?this.coord.pageToLocalRect(n):typeof n=="number"&&typeof f=="number"&&typeof p=="number"&&typeof w=="number"?this.coord.pageToLocalRect(n,f,p,w):this.coord.pageToLocalPoint(n,f)}localToPage(n,f,p,w){return v.Rectangle.isRectangleLike(n)?this.coord.localToPageRect(n):typeof n=="number"&&typeof f=="number"&&typeof p=="number"&&typeof w=="number"?this.coord.localToPageRect(n,f,p,w):this.coord.localToPagePoint(n,f)}clientToLocal(n,f,p,w){return v.Rectangle.isRectangleLike(n)?this.coord.clientToLocalRect(n):typeof n=="number"&&typeof f=="number"&&typeof p=="number"&&typeof w=="number"?this.coord.clientToLocalRect(n,f,p,w):this.coord.clientToLocalPoint(n,f)}localToClient(n,f,p,w){return v.Rectangle.isRectangleLike(n)?this.coord.localToClientRect(n):typeof n=="number"&&typeof f=="number"&&typeof p=="number"&&typeof w=="number"?this.coord.localToClientRect(n,f,p,w):this.coord.localToClientPoint(n,f)}localToGraph(n,f,p,w){return v.Rectangle.isRectangleLike(n)?this.coord.localToGraphRect(n):typeof n=="number"&&typeof f=="number"&&typeof p=="number"&&typeof w=="number"?this.coord.localToGraphRect(n,f,p,w):this.coord.localToGraphPoint(n,f)}graphToLocal(n,f,p,w){return v.Rectangle.isRectangleLike(n)?this.coord.graphToLocalRect(n):typeof n=="number"&&typeof f=="number"&&typeof p=="number"&&typeof w=="number"?this.coord.graphToLocalRect(n,f,p,w):this.coord.graphToLocalPoint(n,f)}clientToGraph(n,f,p,w){return v.Rectangle.isRectangleLike(n)?this.coord.clientToGraphRect(n):typeof n=="number"&&typeof f=="number"&&typeof p=="number"&&typeof w=="number"?this.coord.clientToGraphRect(n,f,p,w):this.coord.clientToGraphPoint(n,f)}defineFilter(n){return this.defs.filter(n)}defineGradient(n){return this.defs.gradient(n)}defineMarker(n){return this.defs.marker(n)}getGridSize(){return this.grid.getGridSize()}setGridSize(n){return this.grid.setGridSize(n),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(n){return this.grid.draw(n),this}updateBackground(){return this.background.update(),this}drawBackground(n,f){const p=this.getPlugin("scroller");return p!=null&&(this.options.background==null||!f)?p.drawBackground(n,f):this.background.draw(n),this}clearBackground(n){const f=this.getPlugin("scroller");return f!=null&&(this.options.background==null||!n)?f.clearBackground(n):this.background.clear(),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(n){return n==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():n?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const n=this.getPlugin("scroller");return n?n.isPannable():this.panning.pannable}enablePanning(){const n=this.getPlugin("scroller");return n?n.enablePanning():this.panning.enablePanning(),this}disablePanning(){const n=this.getPlugin("scroller");return n?n.disablePanning():this.panning.disablePanning(),this}togglePanning(n){return n==null?this.isPannable()?this.disablePanning():this.enablePanning():n!==this.isPannable()&&(n?this.enablePanning():this.disablePanning()),this}use(n,...f){return this.installedPlugins.has(n)||(this.installedPlugins.add(n),n.init(this,...f)),this}getPlugin(n){return Array.from(this.installedPlugins).find(f=>f.name===n)}getPlugins(n){return Array.from(this.installedPlugins).filter(f=>n.includes(f.name))}enablePlugins(n){let f=n;Array.isArray(f)||(f=[f]);const p=this.getPlugins(f);return p==null||p.forEach(w=>{var k;(k=w==null?void 0:w.enable)===null||k===void 0||k.call(w)}),this}disablePlugins(n){let f=n;Array.isArray(f)||(f=[f]);const p=this.getPlugins(f);return p==null||p.forEach(w=>{var k;(k=w==null?void 0:w.disable)===null||k===void 0||k.call(w)}),this}isPluginEnabled(n){var f;const p=this.getPlugin(n);return(f=p==null?void 0:p.isEnabled)===null||f===void 0?void 0:f.call(p)}disposePlugins(n){let f=n;Array.isArray(f)||(f=[f]);const p=this.getPlugins(f);return p==null||p.forEach(w=>{w.dispose(),this.installedPlugins.delete(w)}),this}dispose(n=!0){n&&this.model.dispose(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(f=>{f.dispose()})}}Bf([d.Basecoat.dispose()],na.prototype,"dispose",null),function(H){H.View=Mu,H.Renderer=kl,H.MouseWheel=nc,H.DefsManager=Gl,H.GridManager=Eu,H.CoordManager=Lf,H.TransformManager=cf,H.HighlightManager=il,H.BackgroundManager=pc,H.PanningManager=Ts}(na||(na={})),function(H){H.toStringTag=`X6.${H.name}`;function n(f){if(f==null)return!1;if(f instanceof H)return!0;const p=f[Symbol.toStringTag];return p==null||p===H.toStringTag}H.isGraph=n}(na||(na={})),function(H){function n(f,p){const w=f instanceof HTMLElement?new H({container:f}):new H(f);return p!=null&&w.fromJSON(p),w}H.render=n}(na||(na={})),function(H){H.registerNode=Go.registry.register,H.registerEdge=ba.registry.register,H.registerView=W.registry.register,H.registerAttr=ct.registry.register,H.registerGrid=te.registry.register,H.registerFilter=Ge.registry.register,H.registerNodeTool=_s.registry.register,H.registerEdgeTool=Pa.registry.register,H.registerBackground=ee.registry.register,H.registerHighlighter=Pn.registry.register,H.registerPortLayout=Ke.registry.register,H.registerPortLabelLayout=js.registry.register,H.registerMarker=ln.registry.register,H.registerRouter=Sc.registry.register,H.registerConnector=Tc.registry.register,H.registerAnchor=Sa.registry.register,H.registerEdgeAnchor=Lu.registry.register,H.registerConnectionPoint=nn.registry.register}(na||(na={})),function(H){H.unregisterNode=Go.registry.unregister,H.unregisterEdge=ba.registry.unregister,H.unregisterView=W.registry.unregister,H.unregisterAttr=ct.registry.unregister,H.unregisterGrid=te.registry.unregister,H.unregisterFilter=Ge.registry.unregister,H.unregisterNodeTool=_s.registry.unregister,H.unregisterEdgeTool=Pa.registry.unregister,H.unregisterBackground=ee.registry.unregister,H.unregisterHighlighter=Pn.registry.unregister,H.unregisterPortLayout=Ke.registry.unregister,H.unregisterPortLabelLayout=js.registry.unregister,H.unregisterMarker=ln.registry.unregister,H.unregisterRouter=Sc.registry.unregister,H.unregisterConnector=Tc.registry.unregister,H.unregisterAnchor=Sa.registry.unregister,H.unregisterEdgeAnchor=Lu.registry.unregister,H.unregisterConnectionPoint=nn.registry.unregister}(na||(na={}));var ol=function(H,n,f,p){var w=arguments.length,k=w<3?n:p===null?p=Object.getOwnPropertyDescriptor(n,f):p,ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(H,n,f,p);else for(var me=H.length-1;me>=0;me--)(ne=H[me])&&(k=(w<3?ne(k):w>3?ne(n,f,k):ne(n,f))||k);return w>3&&k&&Object.defineProperty(n,f,k),k},sh=function(H,n){var f={};for(var p in H)Object.prototype.hasOwnProperty.call(H,p)&&n.indexOf(p)<0&&(f[p]=H[p]);if(H!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,p=Object.getOwnPropertySymbols(H);w<p.length;w++)n.indexOf(p[w])<0&&Object.prototype.propertyIsEnumerable.call(H,p[w])&&(f[p[w]]=H[p[w]]);return f};class zc extends Go{}(function(H){class n extends fa{init(){super.init(),this.cell.on("change:*",this.onCellChangeAny,this)}onCellChangeAny({key:p}){const w=H.shapeMaps[this.cell.shape];if(w){const{effect:k}=w;(!k||k.includes(p))&&this.renderHTMLComponent()}}confirmUpdate(p){const w=super.confirmUpdate(p);return this.handleAction(w,n.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const p=this.selectors&&this.selectors.foContent;if(p){d.Dom.empty(p);const w=H.shapeMaps[this.cell.shape];if(!w)return;let{html:k}=w;typeof k=="function"&&(k=k(this.cell)),k&&(typeof k=="string"?p.innerHTML=k:d.Dom.append(p,k))}}dispose(){this.cell.off("change:*",this.onCellChangeAny,this)}}ol([n.dispose()],n.prototype,"dispose",null),H.View=n,function(f){f.action="html",f.config({bootstrap:[f.action],actions:{html:f.action}}),fa.registry.register("html-view",f,!0)}(n=H.View||(H.View={}))})(zc||(zc={})),function(H){H.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},ve.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Go.registry.register("html",H,!0)}(zc||(zc={})),function(H){H.shapeMaps={};function n(f){const{shape:p,html:w,effect:k,inherit:ne}=f,me=sh(f,["shape","html","effect","inherit"]);if(!p)throw new Error("should specify shape in config");H.shapeMaps[p]={html:w,effect:k},na.registerNode(p,Object.assign({inherit:ne||"html"},me),!0)}H.register=n}(zc||(zc={}))},7090:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Config=void 0,O.Config={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix(V){return`${O.Config.prefixCls}-${V}`}}},15506:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(o,l,r,e){var t=arguments.length,s=t<3?l:e===null?e=Object.getOwnPropertyDescriptor(l,r):e,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,l,r,e);else for(var m=o.length-1;m>=0;m--)(h=o[m])&&(s=(t<3?h(s):t>3?h(l,r,s):h(l,r))||s);return t>3&&s&&Object.defineProperty(l,r,s),s};Object.defineProperty(O,"__esModule",{value:!0}),O.BackgroundManager=void 0;const ie=V(35695),T=V(62595),b=V(22608),u=V(46764);class a extends u.Base{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(l={}){let r=l.size||"auto auto",e=l.position||"center";const t=this.graph.transform.getScale(),s=this.graph.translate();if(typeof e=="object"){const h=s.tx+t.sx*(e.x||0),m=s.ty+t.sy*(e.y||0);e=`${h}px ${m}px`}typeof r=="object"&&(r=T.Rectangle.fromSize(r).scale(t.sx,t.sy),r=`${r.width}px ${r.height}px`),this.elem.style.backgroundSize=r,this.elem.style.backgroundPosition=e}drawBackgroundImage(l,r={}){if(!(l instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const e=this.optionsCache;if(e&&e.image!==r.image)return;let t;const s=r.opacity,h=r.size;let m=r.repeat||"no-repeat";const d=b.Background.registry.get(m);if(typeof d=="function"){const x=r.quality||1;l.width*=x,l.height*=x;const N=d(l,r);if(!(N instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");t=N.toDataURL("image/png"),r.repeat&&m!==r.repeat?m=r.repeat:m="repeat",typeof h=="object"?(h.width*=N.width/l.width,h.height*=N.height/l.height):h===void 0&&(r.size={width:N.width/x,height:N.height/x})}else t=l.src,h===void 0&&(r.size={width:l.width,height:l.height});e!=null&&typeof r.size=="object"&&r.image===e.image&&r.repeat===e.repeat&&r.quality===e.quality&&(e.size=ie.ObjectExt.clone(r.size));const v=this.elem.style;v.backgroundImage=`url(${t})`,v.backgroundRepeat=m,v.opacity=s==null||s>=1?"":`${s}`,this.updateBackgroundImage(r)}updateBackgroundColor(l){this.elem.style.backgroundColor=l||""}updateBackgroundOptions(l){this.graph.options.background=l}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(l){const r=l||{};if(this.updateBackgroundOptions(l),this.updateBackgroundColor(r.color),r.image){this.optionsCache=ie.ObjectExt.clone(r);const e=document.createElement("img");e.onload=()=>this.drawBackgroundImage(e,l),e.setAttribute("crossorigin","anonymous"),e.src=r.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}J([u.Base.dispose()],a.prototype,"dispose",null),O.BackgroundManager=a},46764:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Base=void 0;const J=V(35695);class ie extends J.Disposable{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(b){super(),this.graph=b,this.init()}init(){}}O.Base=ie},94689:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.CoordManager=void 0;const J=V(35695),ie=V(62595),T=V(46764),b=V(56994);class u extends T.Base{getClientMatrix(){return J.Dom.createSVGMatrix(this.view.stage.getScreenCTM())}getClientOffset(){const o=this.view.svg.getBoundingClientRect();return new ie.Point(o.left,o.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(o,l){return(typeof o=="number"?this.clientToLocalPoint(o,l):this.clientToLocalPoint(o.x,o.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(o,l){const r=ie.Point.create(o,l);return b.Util.transformPoint(r,this.graph.matrix())}localToClientPoint(o,l){const r=ie.Point.create(o,l);return b.Util.transformPoint(r,this.getClientMatrix())}localToPagePoint(o,l){return(typeof o=="number"?this.localToGraphPoint(o,l):this.localToGraphPoint(o)).translate(this.getPageOffset())}localToGraphRect(o,l,r,e){const t=ie.Rectangle.create(o,l,r,e);return b.Util.transformRectangle(t,this.graph.matrix())}localToClientRect(o,l,r,e){const t=ie.Rectangle.create(o,l,r,e);return b.Util.transformRectangle(t,this.getClientMatrix())}localToPageRect(o,l,r,e){return(typeof o=="number"?this.localToGraphRect(o,l,r,e):this.localToGraphRect(o)).translate(this.getPageOffset())}graphToLocalPoint(o,l){const r=ie.Point.create(o,l);return b.Util.transformPoint(r,this.graph.matrix().inverse())}clientToLocalPoint(o,l){const r=ie.Point.create(o,l);return b.Util.transformPoint(r,this.getClientMatrix().inverse())}clientToGraphPoint(o,l){const r=ie.Point.create(o,l);return b.Util.transformPoint(r,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(o,l){const e=ie.Point.create(o,l).diff(this.getPageOffset());return this.graphToLocalPoint(e)}graphToLocalRect(o,l,r,e){const t=ie.Rectangle.create(o,l,r,e);return b.Util.transformRectangle(t,this.graph.matrix().inverse())}clientToLocalRect(o,l,r,e){const t=ie.Rectangle.create(o,l,r,e);return b.Util.transformRectangle(t,this.getClientMatrix().inverse())}clientToGraphRect(o,l,r,e){const t=ie.Rectangle.create(o,l,r,e);return b.Util.transformRectangle(t,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(o,l,r,e){const t=ie.Rectangle.create(o,l,r,e),s=this.getPageOffset();return t.x-=s.x,t.y-=s.y,this.graphToLocalRect(t)}}O.CoordManager=u},35791:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(o,l,r,e){var t=arguments.length,s=t<3?l:e===null?e=Object.getOwnPropertyDescriptor(l,r):e,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,l,r,e);else for(var m=o.length-1;m>=0;m--)(h=o[m])&&(s=(t<3?h(s):t>3?h(l,r,s):h(l,r))||s);return t>3&&s&&Object.defineProperty(l,r,s),s};Object.defineProperty(O,"__esModule",{value:!0}),O.CSSManager=void 0;const ie=V(35695),T=V(7090),b=V(39141),u=V(46764);class a extends u.Base{init(){T.Config.autoInsertCSS&&ie.CssLoader.ensure("core",b.content)}dispose(){ie.CssLoader.clean("core")}}J([a.dispose()],a.prototype,"dispose",null),O.CSSManager=a},62319:function(bt,O,V){"use strict";var J=this&&this.__rest||function(o,l){var r={};for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&l.indexOf(e)<0&&(r[e]=o[e]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(o);t<e.length;t++)l.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(o,e[t])&&(r[e[t]]=o[e[t]]);return r};Object.defineProperty(O,"__esModule",{value:!0}),O.DefsManager=void 0;const ie=V(35695),T=V(22608),b=V(70982),u=V(46764);class a extends u.Base{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(l){return this.svg.getElementById(l)!=null}filter(l){let r=l.id;const e=l.name;if(r||(r=`filter-${e}-${this.cid}-${ie.StringExt.hashcode(JSON.stringify(l))}`),!this.isDefined(r)){const t=T.Filter.registry.get(e);if(t==null)return T.Filter.registry.onNotFound(e);const s=t(l.args||{}),h=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},l.attrs),{id:r});ie.Vector.create(b.Markup.sanitize(s),h).appendTo(this.defs)}return r}gradient(l){let r=l.id;const e=l.type;if(r||(r=`gradient-${e}-${this.cid}-${ie.StringExt.hashcode(JSON.stringify(l))}`),!this.isDefined(r)){const s=l.stops.map(d=>{const v=d.opacity!=null&&Number.isFinite(d.opacity)?d.opacity:1;return`<stop offset="${d.offset}" stop-color="${d.color}" stop-opacity="${v}"/>`}),h=`<${e}>${s.join("")}</${e}>`,m=Object.assign({id:r},l.attrs);ie.Vector.create(h,m).appendTo(this.defs)}return r}marker(l){const{id:r,refX:e,refY:t,markerUnits:s,markerOrient:h,tagName:m,children:d}=l,v=J(l,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let x=r;if(x||(x=`marker-${this.cid}-${ie.StringExt.hashcode(JSON.stringify(l))}`),!this.isDefined(x)){m!=="path"&&delete v.d;const N=ie.Vector.create("marker",{refX:e,refY:t,id:x,overflow:"visible",orient:h!=null?h:"auto",markerUnits:s||"userSpaceOnUse"},d?d.map(F=>{var{tagName:ae}=F,$=J(F,["tagName"]);return ie.Vector.create(`${ae}`||"path",ie.Dom.kebablizeAttrs(Object.assign(Object.assign({},v),$)))}):[ie.Vector.create(m||"path",ie.Dom.kebablizeAttrs(v))]);this.defs.appendChild(N.node)}return x}remove(l){const r=this.svg.getElementById(l);r&&r.parentNode&&r.parentNode.removeChild(r)}}O.DefsManager=a},4520:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(he,z,ee,pe){pe===void 0&&(pe=ee);var S=Object.getOwnPropertyDescriptor(z,ee);(!S||("get"in S?!z.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return z[ee]}}),Object.defineProperty(he,pe,S)}:function(he,z,ee,pe){pe===void 0&&(pe=ee),he[pe]=z[ee]}),ie=this&&this.__setModuleDefault||(Object.create?function(he,z){Object.defineProperty(he,"default",{enumerable:!0,value:z})}:function(he,z){he.default=z}),T=this&&this.__decorate||function(he,z,ee,pe){var S=arguments.length,q=S<3?z:pe===null?pe=Object.getOwnPropertyDescriptor(z,ee):pe,M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(he,z,ee,pe);else for(var I=he.length-1;I>=0;I--)(M=he[I])&&(q=(S<3?M(q):S>3?M(z,ee,q):M(z,ee))||q);return S>3&&q&&Object.defineProperty(z,ee,q),q},b=this&&this.__importStar||function(he){if(he&&he.__esModule)return he;var z={};if(he!=null)for(var ee in he)ee!=="default"&&Object.prototype.hasOwnProperty.call(he,ee)&&J(z,he,ee);return ie(z,he),z};Object.defineProperty(O,"__esModule",{value:!0}),O.Graph=void 0;const u=V(35695),a=V(62595),o=V(67861),l=V(70982),r=b(V(22608)),e=V(85037),t=V(35791),s=V(66515),h=V(95198),m=V(85739),d=V(15506),v=V(65979),x=V(96632),N=V(15399),F=V(54450),ae=V(62319),$=V(94689),te=V(31020),fe=V(85887);class B extends u.Basecoat{get container(){return this.options.container}get[Symbol.toStringTag](){return B.toStringTag}constructor(z){super(),this.installedPlugins=new Set,this.options=s.Options.get(z),this.css=new t.CSSManager(this),this.view=new e.GraphView(this),this.defs=new ae.DefsManager(this),this.coord=new $.CoordManager(this),this.transform=new m.TransformManager(this),this.highlight=new te.HighlightManager(this),this.grid=new h.GridManager(this),this.background=new d.BackgroundManager(this),this.options.model?this.model=this.options.model:(this.model=new o.Model,this.model.graph=this),this.renderer=new F.Renderer(this),this.panning=new v.PanningManager(this),this.mousewheel=new x.MouseWheel(this),this.virtualRender=new N.VirtualRenderManager(this),this.size=new fe.SizeManager(this)}isNode(z){return z.isNode()}isEdge(z){return z.isEdge()}resetCells(z,ee={}){return this.model.resetCells(z,ee),this}clearCells(z={}){return this.model.clear(z),this}toJSON(z={}){return this.model.toJSON(z)}parseJSON(z){return this.model.parseJSON(z)}fromJSON(z,ee={}){return this.model.fromJSON(z,ee),this}getCellById(z){return this.model.getCell(z)}addNode(z,ee={}){return this.model.addNode(z,ee)}addNodes(z,ee={}){return this.addCell(z.map(pe=>o.Node.isNode(pe)?pe:this.createNode(pe)),ee)}createNode(z){return this.model.createNode(z)}removeNode(z,ee={}){return this.model.removeCell(z,ee)}addEdge(z,ee={}){return this.model.addEdge(z,ee)}addEdges(z,ee={}){return this.addCell(z.map(pe=>o.Edge.isEdge(pe)?pe:this.createEdge(pe)),ee)}removeEdge(z,ee={}){return this.model.removeCell(z,ee)}createEdge(z){return this.model.createEdge(z)}addCell(z,ee={}){return this.model.addCell(z,ee),this}removeCell(z,ee={}){return this.model.removeCell(z,ee)}removeCells(z,ee={}){return this.model.removeCells(z,ee)}removeConnectedEdges(z,ee={}){return this.model.removeConnectedEdges(z,ee)}disconnectConnectedEdges(z,ee={}){return this.model.disconnectConnectedEdges(z,ee),this}hasCell(z){return this.model.has(z)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(z){return this.model.getOutgoingEdges(z)}getIncomingEdges(z){return this.model.getIncomingEdges(z)}getConnectedEdges(z,ee={}){return this.model.getConnectedEdges(z,ee)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(z){return this.model.isRoot(z)}isLeafNode(z){return this.model.isLeaf(z)}getNeighbors(z,ee={}){return this.model.getNeighbors(z,ee)}isNeighbor(z,ee,pe={}){return this.model.isNeighbor(z,ee,pe)}getSuccessors(z,ee={}){return this.model.getSuccessors(z,ee)}isSuccessor(z,ee,pe={}){return this.model.isSuccessor(z,ee,pe)}getPredecessors(z,ee={}){return this.model.getPredecessors(z,ee)}isPredecessor(z,ee,pe={}){return this.model.isPredecessor(z,ee,pe)}getCommonAncestor(...z){return this.model.getCommonAncestor(...z)}getSubGraph(z,ee={}){return this.model.getSubGraph(z,ee)}cloneSubGraph(z,ee={}){return this.model.cloneSubGraph(z,ee)}cloneCells(z){return this.model.cloneCells(z)}getNodesFromPoint(z,ee){return this.model.getNodesFromPoint(z,ee)}getNodesInArea(z,ee,pe,S,q){return this.model.getNodesInArea(z,ee,pe,S,q)}getNodesUnderNode(z,ee={}){return this.model.getNodesUnderNode(z,ee)}searchCell(z,ee,pe={}){return this.model.search(z,ee,pe),this}getShortestPath(z,ee,pe={}){return this.model.getShortestPath(z,ee,pe)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(z,ee={}){return this.model.getCellsBBox(z,ee)}startBatch(z,ee={}){this.model.startBatch(z,ee)}stopBatch(z,ee={}){this.model.stopBatch(z,ee)}batchUpdate(z,ee,pe){const S=typeof z=="string"?z:"update",q=typeof z=="string"?ee:z,M=typeof ee=="function"?pe:ee;this.startBatch(S,M);const I=q();return this.stopBatch(S,M),I}updateCellId(z,ee){return this.model.updateCellId(z,ee)}findView(z){return o.Cell.isCell(z)?this.findViewByCell(z):this.findViewByElem(z)}findViews(z){return a.Rectangle.isRectangleLike(z)?this.findViewsInArea(z):a.Point.isPointLike(z)?this.findViewsFromPoint(z):[]}findViewByCell(z){return this.renderer.findViewByCell(z)}findViewByElem(z){return this.renderer.findViewByElem(z)}findViewsFromPoint(z,ee){const pe=typeof z=="number"?{x:z,y:ee}:z;return this.renderer.findViewsFromPoint(pe)}findViewsInArea(z,ee,pe,S,q){const M=typeof z=="number"?{x:z,y:ee,width:pe,height:S}:z,I=typeof z=="number"?q:ee;return this.renderer.findViewsInArea(M,I)}matrix(z){return typeof z=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(z),this)}resize(z,ee){const pe=this.getPlugin("scroller");return pe?pe.resize(z,ee):this.transform.resize(z,ee),this}scale(z,ee=z,pe=0,S=0){return typeof z=="undefined"?this.transform.getScale():(this.transform.scale(z,ee,pe,S),this)}zoom(z,ee){const pe=this.getPlugin("scroller");if(pe){if(typeof z=="undefined")return pe.zoom();pe.zoom(z,ee)}else{if(typeof z=="undefined")return this.transform.getZoom();this.transform.zoom(z,ee)}return this}zoomTo(z,ee={}){const pe=this.getPlugin("scroller");return pe?pe.zoom(z,Object.assign(Object.assign({},ee),{absolute:!0})):this.transform.zoom(z,Object.assign(Object.assign({},ee),{absolute:!0})),this}zoomToRect(z,ee={}){const pe=this.getPlugin("scroller");return pe?pe.zoomToRect(z,ee):this.transform.zoomToRect(z,ee),this}zoomToFit(z={}){const ee=this.getPlugin("scroller");return ee?ee.zoomToFit(z):this.transform.zoomToFit(z),this}rotate(z,ee,pe){return typeof z=="undefined"?this.transform.getRotation():(this.transform.rotate(z,ee,pe),this)}translate(z,ee){return typeof z=="undefined"?this.transform.getTranslation():(this.transform.translate(z,ee),this)}translateBy(z,ee){const pe=this.translate(),S=pe.tx+z,q=pe.ty+ee;return this.translate(S,q)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(z={}){return this.transform.getContentArea(z)}getContentBBox(z={}){return this.transform.getContentBBox(z)}fitToContent(z,ee,pe,S){return this.transform.fitToContent(z,ee,pe,S)}scaleContentToFit(z={}){return this.transform.scaleContentToFit(z),this}center(z){return this.centerPoint(z)}centerPoint(z,ee,pe){const S=this.getPlugin("scroller");return S?S.centerPoint(z,ee,pe):this.transform.centerPoint(z,ee),this}centerContent(z){const ee=this.getPlugin("scroller");return ee?ee.centerContent(z):this.transform.centerContent(z),this}centerCell(z,ee){const pe=this.getPlugin("scroller");return pe?pe.centerCell(z,ee):this.transform.centerCell(z),this}positionPoint(z,ee,pe,S={}){const q=this.getPlugin("scroller");return q?q.positionPoint(z,ee,pe,S):this.transform.positionPoint(z,ee,pe),this}positionRect(z,ee,pe){const S=this.getPlugin("scroller");return S?S.positionRect(z,ee,pe):this.transform.positionRect(z,ee),this}positionCell(z,ee,pe){const S=this.getPlugin("scroller");return S?S.positionCell(z,ee,pe):this.transform.positionCell(z,ee),this}positionContent(z,ee){const pe=this.getPlugin("scroller");return pe?pe.positionContent(z,ee):this.transform.positionContent(z,ee),this}snapToGrid(z,ee){return this.coord.snapToGrid(z,ee)}pageToLocal(z,ee,pe,S){return a.Rectangle.isRectangleLike(z)?this.coord.pageToLocalRect(z):typeof z=="number"&&typeof ee=="number"&&typeof pe=="number"&&typeof S=="number"?this.coord.pageToLocalRect(z,ee,pe,S):this.coord.pageToLocalPoint(z,ee)}localToPage(z,ee,pe,S){return a.Rectangle.isRectangleLike(z)?this.coord.localToPageRect(z):typeof z=="number"&&typeof ee=="number"&&typeof pe=="number"&&typeof S=="number"?this.coord.localToPageRect(z,ee,pe,S):this.coord.localToPagePoint(z,ee)}clientToLocal(z,ee,pe,S){return a.Rectangle.isRectangleLike(z)?this.coord.clientToLocalRect(z):typeof z=="number"&&typeof ee=="number"&&typeof pe=="number"&&typeof S=="number"?this.coord.clientToLocalRect(z,ee,pe,S):this.coord.clientToLocalPoint(z,ee)}localToClient(z,ee,pe,S){return a.Rectangle.isRectangleLike(z)?this.coord.localToClientRect(z):typeof z=="number"&&typeof ee=="number"&&typeof pe=="number"&&typeof S=="number"?this.coord.localToClientRect(z,ee,pe,S):this.coord.localToClientPoint(z,ee)}localToGraph(z,ee,pe,S){return a.Rectangle.isRectangleLike(z)?this.coord.localToGraphRect(z):typeof z=="number"&&typeof ee=="number"&&typeof pe=="number"&&typeof S=="number"?this.coord.localToGraphRect(z,ee,pe,S):this.coord.localToGraphPoint(z,ee)}graphToLocal(z,ee,pe,S){return a.Rectangle.isRectangleLike(z)?this.coord.graphToLocalRect(z):typeof z=="number"&&typeof ee=="number"&&typeof pe=="number"&&typeof S=="number"?this.coord.graphToLocalRect(z,ee,pe,S):this.coord.graphToLocalPoint(z,ee)}clientToGraph(z,ee,pe,S){return a.Rectangle.isRectangleLike(z)?this.coord.clientToGraphRect(z):typeof z=="number"&&typeof ee=="number"&&typeof pe=="number"&&typeof S=="number"?this.coord.clientToGraphRect(z,ee,pe,S):this.coord.clientToGraphPoint(z,ee)}defineFilter(z){return this.defs.filter(z)}defineGradient(z){return this.defs.gradient(z)}defineMarker(z){return this.defs.marker(z)}getGridSize(){return this.grid.getGridSize()}setGridSize(z){return this.grid.setGridSize(z),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(z){return this.grid.draw(z),this}updateBackground(){return this.background.update(),this}drawBackground(z,ee){const pe=this.getPlugin("scroller");return pe!=null&&(this.options.background==null||!ee)?pe.drawBackground(z,ee):this.background.draw(z),this}clearBackground(z){const ee=this.getPlugin("scroller");return ee!=null&&(this.options.background==null||!z)?ee.clearBackground(z):this.background.clear(),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(z){return z==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():z?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const z=this.getPlugin("scroller");return z?z.isPannable():this.panning.pannable}enablePanning(){const z=this.getPlugin("scroller");return z?z.enablePanning():this.panning.enablePanning(),this}disablePanning(){const z=this.getPlugin("scroller");return z?z.disablePanning():this.panning.disablePanning(),this}togglePanning(z){return z==null?this.isPannable()?this.disablePanning():this.enablePanning():z!==this.isPannable()&&(z?this.enablePanning():this.disablePanning()),this}use(z,...ee){return this.installedPlugins.has(z)||(this.installedPlugins.add(z),z.init(this,...ee)),this}getPlugin(z){return Array.from(this.installedPlugins).find(ee=>ee.name===z)}getPlugins(z){return Array.from(this.installedPlugins).filter(ee=>z.includes(ee.name))}enablePlugins(z){let ee=z;Array.isArray(ee)||(ee=[ee]);const pe=this.getPlugins(ee);return pe==null||pe.forEach(S=>{var q;(q=S==null?void 0:S.enable)===null||q===void 0||q.call(S)}),this}disablePlugins(z){let ee=z;Array.isArray(ee)||(ee=[ee]);const pe=this.getPlugins(ee);return pe==null||pe.forEach(S=>{var q;(q=S==null?void 0:S.disable)===null||q===void 0||q.call(S)}),this}isPluginEnabled(z){var ee;const pe=this.getPlugin(z);return(ee=pe==null?void 0:pe.isEnabled)===null||ee===void 0?void 0:ee.call(pe)}disposePlugins(z){let ee=z;Array.isArray(ee)||(ee=[ee]);const pe=this.getPlugins(ee);return pe==null||pe.forEach(S=>{S.dispose(),this.installedPlugins.delete(S)}),this}dispose(z=!0){z&&this.model.dispose(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(ee=>{ee.dispose()})}}T([u.Basecoat.dispose()],B.prototype,"dispose",null),O.Graph=B,function(he){he.View=e.GraphView,he.Renderer=F.Renderer,he.MouseWheel=x.MouseWheel,he.DefsManager=ae.DefsManager,he.GridManager=h.GridManager,he.CoordManager=$.CoordManager,he.TransformManager=m.TransformManager,he.HighlightManager=te.HighlightManager,he.BackgroundManager=d.BackgroundManager,he.PanningManager=v.PanningManager}(B=O.Graph||(O.Graph={})),function(he){he.toStringTag=`X6.${he.name}`;function z(ee){if(ee==null)return!1;if(ee instanceof he)return!0;const pe=ee[Symbol.toStringTag];return pe==null||pe===he.toStringTag}he.isGraph=z}(B=O.Graph||(O.Graph={})),function(he){function z(ee,pe){const S=ee instanceof HTMLElement?new he({container:ee}):new he(ee);return pe!=null&&S.fromJSON(pe),S}he.render=z}(B=O.Graph||(O.Graph={})),function(he){he.registerNode=o.Node.registry.register,he.registerEdge=o.Edge.registry.register,he.registerView=l.CellView.registry.register,he.registerAttr=r.Attr.registry.register,he.registerGrid=r.Grid.registry.register,he.registerFilter=r.Filter.registry.register,he.registerNodeTool=r.NodeTool.registry.register,he.registerEdgeTool=r.EdgeTool.registry.register,he.registerBackground=r.Background.registry.register,he.registerHighlighter=r.Highlighter.registry.register,he.registerPortLayout=r.PortLayout.registry.register,he.registerPortLabelLayout=r.PortLabelLayout.registry.register,he.registerMarker=r.Marker.registry.register,he.registerRouter=r.Router.registry.register,he.registerConnector=r.Connector.registry.register,he.registerAnchor=r.NodeAnchor.registry.register,he.registerEdgeAnchor=r.EdgeAnchor.registry.register,he.registerConnectionPoint=r.ConnectionPoint.registry.register}(B=O.Graph||(O.Graph={})),function(he){he.unregisterNode=o.Node.registry.unregister,he.unregisterEdge=o.Edge.registry.unregister,he.unregisterView=l.CellView.registry.unregister,he.unregisterAttr=r.Attr.registry.unregister,he.unregisterGrid=r.Grid.registry.unregister,he.unregisterFilter=r.Filter.registry.unregister,he.unregisterNodeTool=r.NodeTool.registry.unregister,he.unregisterEdgeTool=r.EdgeTool.registry.unregister,he.unregisterBackground=r.Background.registry.unregister,he.unregisterHighlighter=r.Highlighter.registry.unregister,he.unregisterPortLayout=r.PortLayout.registry.unregister,he.unregisterPortLabelLayout=r.PortLabelLayout.registry.unregister,he.unregisterMarker=r.Marker.registry.unregister,he.unregisterRouter=r.Router.registry.unregister,he.unregisterConnector=r.Connector.registry.unregister,he.unregisterAnchor=r.NodeAnchor.registry.unregister,he.unregisterEdgeAnchor=r.EdgeAnchor.registry.unregister,he.unregisterConnectionPoint=r.ConnectionPoint.registry.unregister}(B=O.Graph||(O.Graph={}))},95198:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(e,t,s,h){h===void 0&&(h=s);var m=Object.getOwnPropertyDescriptor(t,s);(!m||("get"in m?!t.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,h,m)}:function(e,t,s,h){h===void 0&&(h=s),e[h]=t[s]}),ie=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),T=this&&this.__decorate||function(e,t,s,h){var m=arguments.length,d=m<3?t:h===null?h=Object.getOwnPropertyDescriptor(t,s):h,v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(e,t,s,h);else for(var x=e.length-1;x>=0;x--)(v=e[x])&&(d=(m<3?v(d):m>3?v(t,s,d):v(t,s))||d);return m>3&&d&&Object.defineProperty(t,s,d),d},b=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)&&J(t,e,s);return ie(t,e),t},u=this&&this.__rest||function(e,t){var s={};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&t.indexOf(h)<0&&(s[h]=e[h]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,h=Object.getOwnPropertySymbols(e);m<h.length;m++)t.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(e,h[m])&&(s[h[m]]=e[h[m]]);return s};Object.defineProperty(O,"__esModule",{value:!0}),O.GridManager=void 0;const a=V(35695),o=b(V(22608)),l=V(46764);class r extends l.Base{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())}getGridSize(){return this.grid.size}setGridSize(t){this.grid.size=Math.max(t,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()}update(t={}){const s=this.grid.size;if(s<=1||!this.grid.visible)return this.clear();const h=this.graph.matrix(),m=this.getInstance(),d=Array.isArray(t)?t:[t];this.patterns.forEach((N,F)=>{const ae=`pattern_${F}`,$=h.a||1,te=h.d||1,{update:fe,markup:B}=N,he=u(N,["update","markup"]),z=Object.assign(Object.assign(Object.assign({},he),d[F]),{sx:$,sy:te,ox:h.e||0,oy:h.f||0,width:s*$,height:s*te});m.has(ae)||m.add(ae,a.Vector.create("pattern",{id:ae,patternUnits:"userSpaceOnUse"},a.Vector.createVectors(B)).node);const ee=m.get(ae);typeof fe=="function"&&fe(ee.childNodes[0],z);let pe=z.ox%z.width;pe<0&&(pe+=z.width);let S=z.oy%z.height;S<0&&(S+=z.height),a.Dom.attr(ee,{x:pe,y:S,width:z.width,height:z.height})});const v=new XMLSerializer().serializeToString(m.root),x=`url(data:image/svg+xml;base64,${btoa(v)})`;this.elem.style.backgroundImage=x}getInstance(){return this.instance||(this.instance=new o.Grid),this.instance}resolveGrid(t){if(!t)return[];const s=t.type;if(s==null)return[Object.assign(Object.assign({},o.Grid.presets.dot),t.args)];const h=o.Grid.registry.get(s);if(h){let m=t.args||[];return Array.isArray(m)||(m=[m]),Array.isArray(h)?h.map((d,v)=>Object.assign(Object.assign({},d),m[v])):[Object.assign(Object.assign({},h),m[0])]}return o.Grid.registry.onNotFound(s)}dispose(){this.stopListening(),this.clear()}}T([l.Base.dispose()],r.prototype,"dispose",null),O.GridManager=r},31020:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(a,o,l,r){var e=arguments.length,t=e<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,l):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,o,l,r);else for(var h=a.length-1;h>=0;h--)(s=a[h])&&(t=(e<3?s(t):e>3?s(o,l,t):s(o,l))||t);return e>3&&t&&Object.defineProperty(o,l,t),t};Object.defineProperty(O,"__esModule",{value:!0}),O.HighlightManager=void 0;const ie=V(35695),T=V(22608),b=V(46764);class u extends b.Base{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:o,magnet:l,options:r={}}){const e=this.resolveHighlighter(r);if(!e)return;const t=this.getHighlighterId(l,e);if(!this.highlights[t]){const s=e.highlighter;s.highlight(o,l,Object.assign({},e.args)),this.highlights[t]={cellView:o,magnet:l,highlighter:s,args:e.args}}}onCellUnhighlight({magnet:o,options:l={}}){const r=this.resolveHighlighter(l);if(!r)return;const e=this.getHighlighterId(o,r);this.unhighlight(e)}resolveHighlighter(o){const l=this.options;let r=o.highlighter;if(r==null){const h=o.type;r=h&&l.highlighting[h]||l.highlighting.default}if(r==null)return null;const e=typeof r=="string"?{name:r}:r,t=e.name,s=T.Highlighter.registry.get(t);return s==null?T.Highlighter.registry.onNotFound(t):(T.Highlighter.check(t,s),{name:t,highlighter:s,args:e.args||{}})}getHighlighterId(o,l){return ie.Dom.ensureId(o),l.name+o.id+JSON.stringify(l.args)}unhighlight(o){const l=this.highlights[o];l&&(l.highlighter.unhighlight(l.cellView,l.magnet,l.args),delete this.highlights[o])}dispose(){Object.keys(this.highlights).forEach(o=>this.unhighlight(o)),this.stopListening()}}J([u.dispose()],u.prototype,"dispose",null),O.HighlightManager=u},96632:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(u,a,o,l){var r=arguments.length,e=r<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,o):l,t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(u,a,o,l);else for(var s=u.length-1;s>=0;s--)(t=u[s])&&(e=(r<3?t(e):r>3?t(a,o,e):t(a,o))||e);return r>3&&e&&Object.defineProperty(a,o,e),e};Object.defineProperty(O,"__esModule",{value:!0}),O.MouseWheel=void 0;const ie=V(35695),T=V(46764);class b extends T.Base{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new ie.Dom.MouseWheelHandle(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return this.widgetOptions.enabled!==!0}enable(a){(this.disabled||a)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(a){const o=this.widgetOptions.guard;return(o==null||o(a))&&ie.ModifierKey.isMatch(a,this.widgetOptions.modifiers)}onMouseWheel(a){const o=this.widgetOptions.guard;if((o==null||o(a))&&ie.ModifierKey.isMatch(a,this.widgetOptions.modifiers)){const l=this.widgetOptions.factor||1.2;this.currentScale==null&&(this.startPos={x:a.clientX,y:a.clientY},this.currentScale=this.graph.transform.getScale().sx),a.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*l*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/l)*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const e=this.currentScale;let t=this.graph.transform.clampScale(e*this.cumulatedFactor);const s=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,h=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(t=ie.NumberExt.clamp(t,s,h),t!==e)if(this.widgetOptions.zoomAtMousePosition){const d=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(t,{absolute:!0,center:d.clone()})}else this.graph.zoom(t,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}J([ie.Disposable.dispose()],b.prototype,"dispose",null),O.MouseWheel=b},66515:function(bt,O,V){"use strict";var J=this&&this.__rest||function(a,o){var l={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&o.indexOf(r)<0&&(l[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,r=Object.getOwnPropertySymbols(a);e<r.length;e++)o.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(a,r[e])&&(l[r[e]]=a[r[e]]);return l};Object.defineProperty(O,"__esModule",{value:!0}),O.Options=void 0;const ie=V(35695),T=V(7090),b=V(13342);var u;(function(a){function o(l){const{grid:r,panning:e,mousewheel:t,embedding:s}=l,h=J(l,["grid","panning","mousewheel","embedding"]),m=l.container;if(m!=null)h.width==null&&(h.width=m.clientWidth),h.height==null&&(h.height=m.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const d=ie.ObjectExt.merge({},a.defaults,h),v={size:10,visible:!1};return typeof r=="number"?d.grid={size:r,visible:!1}:typeof r=="boolean"?d.grid=Object.assign(Object.assign({},v),{visible:r}):d.grid=Object.assign(Object.assign({},v),r),["panning","mousewheel","embedding"].forEach(N=>{const F=l[N];typeof F=="boolean"?d[N].enabled=F:d[N]=Object.assign(Object.assign({},d[N]),F)}),d}a.get=o})(u=O.Options||(O.Options={})),function(a){a.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:T.Config.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:T.Config.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection({type:o,sourceView:l,targetView:r}){return(o==="target"?r:l)!=null},createEdge(){return new b.Edge}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(u=O.Options||(O.Options={}))},65979:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(u,a,o,l){var r=arguments.length,e=r<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,o):l,t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(u,a,o,l);else for(var s=u.length-1;s>=0;s--)(t=u[s])&&(e=(r<3?t(e):r>3?t(a,o,e):t(a,o))||e);return r>3&&e&&Object.defineProperty(a,o,e),e};Object.defineProperty(O,"__esModule",{value:!0}),O.PanningManager=void 0;const ie=V(35695),T=V(46764);class b extends T.Base{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.onRightMouseDown=this.onRightMouseDown.bind(this),this.onSpaceKeyDown=this.onSpaceKeyDown.bind(this),this.onSpaceKeyUp=this.onSpaceKeyUp.bind(this),this.startListening(),this.updateClassName()}startListening(){this.graph.on("blank:mousedown",this.onMouseDown,this),this.graph.on("node:unhandled:mousedown",this.onMouseDown,this),this.graph.on("edge:unhandled:mousedown",this.onMouseDown,this),ie.Dom.Event.on(this.graph.container,"mousedown",this.onRightMouseDown),ie.Dom.Event.on(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle=new ie.Dom.MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()}stopListening(){this.graph.off("blank:mousedown",this.onMouseDown,this),this.graph.off("node:unhandled:mousedown",this.onMouseDown,this),this.graph.off("edge:unhandled:mousedown",this.onMouseDown,this),ie.Dom.Event.off(this.graph.container,"mousedown",this.onRightMouseDown),ie.Dom.Event.off(document.body,{keydown:this.onSpaceKeyDown,keyup:this.onSpaceKeyUp}),this.mousewheelHandle&&this.mousewheelHandle.disable()}allowPanning(a,o){return a.spaceKey=this.isSpaceKeyPressed,this.pannable&&ie.ModifierKey.isMatch(a,this.widgetOptions.modifiers,o)}startPanning(a){const o=this.view.normalizeEvent(a);this.clientX=o.clientX,this.clientY=o.clientY,this.panning=!0,this.updateClassName(),ie.Dom.Event.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),ie.Dom.Event.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(a){const o=this.view.normalizeEvent(a),l=o.clientX-this.clientX,r=o.clientY-this.clientY;this.clientX=o.clientX,this.clientY=o.clientY,this.graph.translateBy(l,r)}stopPanning(a){this.panning=!1,this.updateClassName(),ie.Dom.Event.off(document.body,".panning"),ie.Dom.Event.off(window,".panning")}updateClassName(){const a=this.view.container,o=this.view.prefixClassName("graph-panning"),l=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(ie.Dom.addClass(a,o),ie.Dom.removeClass(a,l)):(ie.Dom.removeClass(a,o),ie.Dom.addClass(a,l)):(ie.Dom.removeClass(a,o),ie.Dom.removeClass(a,l))}onMouseDown({e:a}){if(!this.allowBlankMouseDown(a))return;const o=this.graph.getPlugin("selection"),l=o&&o.allowRubberband(a,!0);(this.allowPanning(a,!0)||this.allowPanning(a)&&!l)&&this.startPanning(a)}onRightMouseDown(a){const o=this.widgetOptions.eventTypes;o!=null&&o.includes("rightMouseDown")&&a.button===2&&this.allowPanning(a,!0)&&this.startPanning(a)}onMouseWheel(a,o,l){this.graph.translateBy(-o,-l)}onSpaceKeyDown(a){a.which===32&&(this.isSpaceKeyPressed=!0)}onSpaceKeyUp(a){a.which===32&&(this.isSpaceKeyPressed=!1)}allowBlankMouseDown(a){const o=this.widgetOptions.eventTypes;return(o==null?void 0:o.includes("leftMouseDown"))&&a.button===0||(o==null?void 0:o.includes("mouseWheelDown"))&&a.button===1}allowMouseWheel(a){var o;return this.pannable&&!a.ctrlKey&&((o=this.widgetOptions.eventTypes)===null||o===void 0?void 0:o.includes("mouseWheel"))}autoPanning(a,o){const r=this.graph.getGraphArea();let e=0,t=0;a<=r.left+10&&(e=-10),o<=r.top+10&&(t=-10),a>=r.right-10&&(e=10),o>=r.bottom-10&&(t=10),(e!==0||t!==0)&&this.graph.translateBy(-e,-t)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}J([T.Base.dispose()],b.prototype,"dispose",null),O.PanningManager=b},85887:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(u,a,o,l){var r=arguments.length,e=r<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,o):l,t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(u,a,o,l);else for(var s=u.length-1;s>=0;s--)(t=u[s])&&(e=(r<3?t(e):r>3?t(a,o,e):t(a,o))||e);return r>3&&e&&Object.defineProperty(a,o,e),e};Object.defineProperty(O,"__esModule",{value:!0}),O.SizeManager=void 0;const ie=V(35695),T=V(46764);class b extends T.Base{getScroller(){const a=this.graph.getPlugin("scroller");return a&&a.options.enabled?a:null}getContainer(){const a=this.getScroller();return a?a.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const a=this.options.autoResize;if(a)return typeof a=="boolean"?this.getContainer():a}init(){if(this.options.autoResize){const o=this.getSensorTarget();o&&ie.SizeSensor.bind(o,()=>{const l=o.offsetWidth,r=o.offsetHeight;this.resize(l,r)})}}resize(a,o){const l=this.getScroller();l?l.resize(a,o):this.graph.transform.resize(a,o)}dispose(){ie.SizeSensor.clear(this.graph.container)}}J([T.Base.dispose()],b.prototype,"dispose",null),O.SizeManager=b},85739:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.TransformManager=void 0;const J=V(35695),ie=V(62595),T=V(46764),b=V(56994);class u extends T.Base{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const o=this.viewport.getAttribute("transform");return o!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=o),J.Dom.createSVGMatrix(this.viewportMatrix)}setMatrix(o){const l=J.Dom.createSVGMatrix(o),r=J.Dom.matrixToTransformString(l);this.viewport.setAttribute("transform",r),this.viewportMatrix=l,this.viewportTransformString=r}resize(o,l){let r=o===void 0?this.options.width:o,e=l===void 0?this.options.height:l;this.options.width=r,this.options.height=e,typeof r=="number"&&(r=Math.round(r)),typeof e=="number"&&(e=Math.round(e)),this.container.style.width=r==null?"":`${r}px`,this.container.style.height=e==null?"":`${e}px`;const t=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},t)),this}getComputedSize(){let o=this.options.width,l=this.options.height;return J.NumberExt.isNumber(o)||(o=this.container.clientWidth),J.NumberExt.isNumber(l)||(l=this.container.clientHeight),{width:o,height:l}}getScale(){return J.Dom.matrixToScale(this.getMatrix())}scale(o,l=o,r=0,e=0){if(o=this.clampScale(o),l=this.clampScale(l),r||e){const s=this.getTranslation(),h=s.tx-r*(o-1),m=s.ty-e*(l-1);(h!==s.tx||m!==s.ty)&&this.translate(h,m)}const t=this.getMatrix();return t.a=o,t.d=l,this.setMatrix(t),this.graph.trigger("scale",{sx:o,sy:l,ox:r,oy:e}),this}clampScale(o){const l=this.graph.options.scaling;return J.NumberExt.clamp(o,l.min||.01,l.max||16)}getZoom(){return this.getScale().sx}zoom(o,l){l=l||{};let r=o,e=o;const t=this.getScale(),s=this.getComputedSize();let h=s.width/2,m=s.height/2;if(l.absolute||(r+=t.sx,e+=t.sy),l.scaleGrid&&(r=Math.round(r/l.scaleGrid)*l.scaleGrid,e=Math.round(e/l.scaleGrid)*l.scaleGrid),l.maxScale&&(r=Math.min(l.maxScale,r),e=Math.min(l.maxScale,e)),l.minScale&&(r=Math.max(l.minScale,r),e=Math.max(l.minScale,e)),l.center&&(h=l.center.x,m=l.center.y),r=this.clampScale(r),e=this.clampScale(e),h||m){const d=this.getTranslation(),v=h-(h-d.tx)*(r/t.sx),x=m-(m-d.ty)*(e/t.sy);(v!==d.tx||x!==d.ty)&&this.translate(v,x)}return this.scale(r,e),this}getRotation(){return J.Dom.matrixToRotation(this.getMatrix())}rotate(o,l,r){if(l==null||r==null){const t=b.Util.getBBox(this.stage);l=t.width/2,r=t.height/2}const e=this.getMatrix().translate(l,r).rotate(o).translate(-l,-r);return this.setMatrix(e),this}getTranslation(){return J.Dom.matrixToTranslation(this.getMatrix())}translate(o,l){const r=this.getMatrix();r.e=o||0,r.f=l||0,this.setMatrix(r);const e=this.getTranslation();return this.options.x=e.tx,this.options.y=e.ty,this.graph.trigger("translate",Object.assign({},e)),this}setOrigin(o,l){return this.translate(o||0,l||0)}fitToContent(o,l,r,e){if(typeof o=="object"){const he=o;o=he.gridWidth||1,l=he.gridHeight||1,r=he.padding||0,e=he}else o=o||1,l=l||1,r=r||0,e==null&&(e={});const t=J.NumberExt.normalizeSides(r),s=e.border||0,h=e.contentArea?ie.Rectangle.create(e.contentArea):this.getContentArea(e);s>0&&h.inflate(s);const m=this.getScale(),d=this.getTranslation(),v=m.sx,x=m.sy;h.x*=v,h.y*=x,h.width*=v,h.height*=x;let N=Math.max(Math.ceil((h.width+h.x)/o),1)*o,F=Math.max(Math.ceil((h.height+h.y)/l),1)*l,ae=0,$=0;(e.allowNewOrigin==="negative"&&h.x<0||e.allowNewOrigin==="positive"&&h.x>=0||e.allowNewOrigin==="any")&&(ae=Math.ceil(-h.x/o)*o,ae+=t.left,N+=ae),(e.allowNewOrigin==="negative"&&h.y<0||e.allowNewOrigin==="positive"&&h.y>=0||e.allowNewOrigin==="any")&&($=Math.ceil(-h.y/l)*l,$+=t.top,F+=$),N+=t.right,F+=t.bottom,N=Math.max(N,e.minWidth||0),F=Math.max(F,e.minHeight||0),N=Math.min(N,e.maxWidth||Number.MAX_SAFE_INTEGER),F=Math.min(F,e.maxHeight||Number.MAX_SAFE_INTEGER);const te=this.getComputedSize(),fe=N!==te.width||F!==te.height;return(ae!==d.tx||$!==d.ty)&&this.translate(ae,$),fe&&this.resize(N,F),new ie.Rectangle(-ae/v,-$/x,N/v,F/x)}scaleContentToFit(o={}){this.scaleContentToFitImpl(o)}scaleContentToFitImpl(o={},l=!0){let r,e;if(o.contentArea){const fe=o.contentArea;r=this.graph.localToGraph(fe),e=ie.Point.create(fe)}else r=this.getContentBBox(o),e=this.graph.graphToLocal(r);if(!r.width||!r.height)return;const t=J.NumberExt.normalizeSides(o.padding),s=o.minScale||0,h=o.maxScale||Number.MAX_SAFE_INTEGER,m=o.minScaleX||s,d=o.maxScaleX||h,v=o.minScaleY||s,x=o.maxScaleY||h;let N;if(o.viewportArea)N=o.viewportArea;else{const fe=this.getComputedSize(),B=this.getTranslation();N={x:B.tx,y:B.ty,width:fe.width,height:fe.height}}N=ie.Rectangle.create(N).moveAndExpand({x:t.left,y:t.top,width:-t.left-t.right,height:-t.top-t.bottom});const F=this.getScale();let ae=N.width/r.width*F.sx,$=N.height/r.height*F.sy;o.preserveAspectRatio!==!1&&(ae=$=Math.min(ae,$));const te=o.scaleGrid;if(te&&(ae=te*Math.floor(ae/te),$=te*Math.floor($/te)),ae=J.NumberExt.clamp(ae,m,d),$=J.NumberExt.clamp($,v,x),this.scale(ae,$),l){const fe=this.options,B=N.x-e.x*ae-fe.x,he=N.y-e.y*$-fe.y;this.translate(B,he)}}getContentArea(o={}){return o.useCellGeometry!==!1?this.model.getAllCellsBBox()||new ie.Rectangle:b.Util.getBBox(this.stage)}getContentBBox(o={}){return this.graph.localToGraph(this.getContentArea(o))}getGraphArea(){const o=ie.Rectangle.fromSize(this.getComputedSize());return this.graph.graphToLocal(o)}zoomToRect(o,l={}){const r=ie.Rectangle.create(o),e=this.graph;l.contentArea=r,l.viewportArea==null&&(l.viewportArea={x:e.options.x,y:e.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(l,!1);const t=r.getCenter();return this.centerPoint(t.x,t.y),this}zoomToFit(o={}){return this.zoomToRect(this.getContentArea(o),o)}centerPoint(o,l){const r=this.getComputedSize(),e=this.getScale(),t=this.getTranslation(),s=r.width/2,h=r.height/2;o=typeof o=="number"?o:s,l=typeof l=="number"?l:h,o=s-o*e.sx,l=h-l*e.sy,(t.tx!==o||t.ty!==l)&&this.translate(o,l)}centerContent(o){const r=this.graph.getContentArea(o).getCenter();this.centerPoint(r.x,r.y)}centerCell(o){return this.positionCell(o,"center")}positionPoint(o,l,r){const e=this.getComputedSize();l=J.NumberExt.normalizePercentage(l,Math.max(0,e.width)),l<0&&(l=e.width+l),r=J.NumberExt.normalizePercentage(r,Math.max(0,e.height)),r<0&&(r=e.height+r);const t=this.getTranslation(),s=this.getScale(),h=l-o.x*s.sx,m=r-o.y*s.sy;(t.tx!==h||t.ty!==m)&&this.translate(h,m)}positionRect(o,l){const r=ie.Rectangle.create(o);switch(l){case"center":return this.positionPoint(r.getCenter(),"50%","50%");case"top":return this.positionPoint(r.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%");case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(r.getTopLeft(),0,0);default:return this}}positionCell(o,l){const r=o.getBBox();return this.positionRect(r,l)}positionContent(o,l){const r=this.graph.getContentArea(l);return this.positionRect(r,o)}}O.TransformManager=u},85037:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(o,l,r,e){var t=arguments.length,s=t<3?l:e===null?e=Object.getOwnPropertyDescriptor(l,r):e,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(o,l,r,e);else for(var m=o.length-1;m>=0;m--)(h=o[m])&&(s=(t<3?h(s):t>3?h(l,r,s):h(l,r))||s);return t>3&&s&&Object.defineProperty(l,r,s),s};Object.defineProperty(O,"__esModule",{value:!0}),O.GraphView=void 0;const ie=V(35695),T=V(67861),b=V(7090),u=V(70982);class a extends u.View{get disposeContainer(){return!1}get options(){return this.graph.options}constructor(l){super(),this.graph=l;const{selectors:r,fragment:e}=u.Markup.parseJSONMarkup(a.markup);this.background=r.background,this.grid=r.grid,this.svg=r.svg,this.defs=r.defs,this.viewport=r.viewport,this.primer=r.primer,this.stage=r.stage,this.decorator=r.decorator,this.overlay=r.overlay,this.container=this.options.container,this.restore=a.snapshoot(this.container),ie.Dom.addClass(this.container,this.prefixClassName("graph")),ie.Dom.append(this.container,e),this.delegateEvents()}delegateEvents(){const l=this.constructor;return super.delegateEvents(l.events),this}guard(l,r){return l.type==="mousedown"&&l.button===2||this.options.guard&&this.options.guard(l,r)?!0:l.data&&l.data.guarded!==void 0?l.data.guarded:!(r&&r.cell&&T.Cell.isCell(r.cell)||this.svg===l.target||this.container===l.target||this.svg.contains(l.target))}findView(l){return this.graph.findViewByElem(l)}onDblClick(l){this.options.preventDefaultDblClick&&l.preventDefault();const r=this.normalizeEvent(l),e=this.findView(r.target);if(this.guard(r,e))return;const t=this.graph.snapToGrid(r.clientX,r.clientY);e?e.onDblClick(r,t.x,t.y):this.graph.trigger("blank:dblclick",{e:r,x:t.x,y:t.y})}onClick(l){if(this.getMouseMovedCount(l)<=this.options.clickThreshold){const r=this.normalizeEvent(l),e=this.findView(r.target);if(this.guard(r,e))return;const t=this.graph.snapToGrid(r.clientX,r.clientY);e?e.onClick(r,t.x,t.y):this.graph.trigger("blank:click",{e:r,x:t.x,y:t.y})}}isPreventDefaultContextMenu(l){let r=this.options.preventDefaultContextMenu;return typeof r=="function"&&(r=ie.FunctionExt.call(r,this.graph,{view:l})),r}onContextMenu(l){const r=this.normalizeEvent(l),e=this.findView(r.target);if(this.isPreventDefaultContextMenu(e)&&l.preventDefault(),this.guard(r,e))return;const t=this.graph.snapToGrid(r.clientX,r.clientY);e?e.onContextMenu(r,t.x,t.y):this.graph.trigger("blank:contextmenu",{e:r,x:t.x,y:t.y})}delegateDragEvents(l,r){l.data==null&&(l.data={}),this.setEventData(l,{currentView:r||null,mouseMovedCount:0,startPosition:{x:l.clientX,y:l.clientY}});const e=this.constructor;this.delegateDocumentEvents(e.documentEvents,l.data),this.undelegateEvents()}getMouseMovedCount(l){return this.getEventData(l).mouseMovedCount||0}onMouseDown(l){const r=this.normalizeEvent(l),e=this.findView(r.target);if(this.guard(r,e))return;this.options.preventDefaultMouseDown&&l.preventDefault();const t=this.graph.snapToGrid(r.clientX,r.clientY);e?e.onMouseDown(r,t.x,t.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(r.type)&&l.preventDefault(),this.graph.trigger("blank:mousedown",{e:r,x:t.x,y:t.y})),this.delegateDragEvents(r,e)}onMouseMove(l){const r=this.getEventData(l),e=r.startPosition;if(e&&e.x===l.clientX&&e.y===l.clientY||(r.mouseMovedCount==null&&(r.mouseMovedCount=0),r.mouseMovedCount+=1,r.mouseMovedCount<=this.options.moveThreshold))return;const s=this.normalizeEvent(l),h=this.graph.snapToGrid(s.clientX,s.clientY),m=r.currentView;m?m.onMouseMove(s,h.x,h.y):this.graph.trigger("blank:mousemove",{e:s,x:h.x,y:h.y}),this.setEventData(s,r)}onMouseUp(l){this.undelegateDocumentEvents();const r=this.normalizeEvent(l),e=this.graph.snapToGrid(r.clientX,r.clientY),s=this.getEventData(l).currentView;if(s?s.onMouseUp(r,e.x,e.y):this.graph.trigger("blank:mouseup",{e:r,x:e.x,y:e.y}),!l.isPropagationStopped()){const h=new ie.Dom.EventObject(l,{type:"click",data:l.data});this.onClick(h)}l.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(l){const r=this.normalizeEvent(l),e=this.findView(r.target);if(!this.guard(r,e))if(e)e.onMouseOver(r);else{if(this.container===r.target)return;this.graph.trigger("blank:mouseover",{e:r})}}onMouseOut(l){const r=this.normalizeEvent(l),e=this.findView(r.target);if(!this.guard(r,e))if(e)e.onMouseOut(r);else{if(this.container===r.target)return;this.graph.trigger("blank:mouseout",{e:r})}}onMouseEnter(l){const r=this.normalizeEvent(l),e=this.findView(r.target);if(this.guard(r,e))return;const t=this.graph.findViewByElem(r.relatedTarget);if(e){if(t===e)return;e.onMouseEnter(r)}else{if(t)return;this.graph.trigger("graph:mouseenter",{e:r})}}onMouseLeave(l){const r=this.normalizeEvent(l),e=this.findView(r.target);if(this.guard(r,e))return;const t=this.graph.findViewByElem(r.relatedTarget);if(e){if(t===e)return;e.onMouseLeave(r)}else{if(t)return;this.graph.trigger("graph:mouseleave",{e:r})}}onMouseWheel(l){const r=this.normalizeEvent(l),e=this.findView(r.target);if(this.guard(r,e))return;const t=r.originalEvent,s=this.graph.snapToGrid(t.clientX,t.clientY),h=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));e?e.onMouseWheel(r,s.x,s.y,h):this.graph.trigger("blank:mousewheel",{e:r,delta:h,x:s.x,y:s.y})}onCustomEvent(l){const r=l.currentTarget,e=r.getAttribute("event")||r.getAttribute("data-event");if(e){const t=this.findView(r);if(t){const s=this.normalizeEvent(l);if(this.guard(s,t))return;const h=this.graph.snapToGrid(s.clientX,s.clientY);t.onCustomEvent(s,e,h.x,h.y)}}}handleMagnetEvent(l,r){const e=l.currentTarget,t=e.getAttribute("magnet");if(t&&t.toLowerCase()!=="false"){const s=this.findView(e);if(s){const h=this.normalizeEvent(l);if(this.guard(h,s))return;const m=this.graph.snapToGrid(h.clientX,h.clientY);ie.FunctionExt.call(r,this.graph,s,h,e,m.x,m.y)}}}onMagnetMouseDown(l){this.handleMagnetEvent(l,(r,e,t,s,h)=>{r.onMagnetMouseDown(e,t,s,h)})}onMagnetDblClick(l){this.handleMagnetEvent(l,(r,e,t,s,h)=>{r.onMagnetDblClick(e,t,s,h)})}onMagnetContextMenu(l){const r=this.findView(l.target);this.isPreventDefaultContextMenu(r)&&l.preventDefault(),this.handleMagnetEvent(l,(e,t,s,h,m)=>{e.onMagnetContextMenu(t,s,h,m)})}onLabelMouseDown(l){const r=l.currentTarget,e=this.findView(r);if(e){const t=this.normalizeEvent(l);if(this.guard(t,e))return;const s=this.graph.snapToGrid(t.clientX,t.clientY);e.onLabelMouseDown(t,s.x,s.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}J([u.View.dispose()],a.prototype,"dispose",null),O.GraphView=a,function(o){const l=`${b.Config.prefixCls}-graph`;o.markup=[{ns:ie.Dom.ns.xhtml,tagName:"div",selector:"background",className:`${l}-background`},{ns:ie.Dom.ns.xhtml,tagName:"div",selector:"grid",className:`${l}-grid`},{ns:ie.Dom.ns.svg,tagName:"svg",selector:"svg",className:`${l}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":ie.Dom.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${l}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${l}-svg-primer`},{tagName:"g",selector:"stage",className:`${l}-svg-stage`},{tagName:"g",selector:"decorator",className:`${l}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${l}-svg-overlay`}]}]}];function r(e){const t=e.cloneNode();return e.childNodes.forEach(s=>t.appendChild(s)),()=>{for(ie.Dom.empty(e);e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);for(let s=0,h=t.attributes.length;s<h;s+=1){const m=t.attributes[s];e.setAttribute(m.name,m.value)}t.childNodes.forEach(s=>e.appendChild(s))}}o.snapshoot=r}(a=O.GraphView||(O.GraphView={})),function(o){const l=b.Config.prefixCls;o.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${l}-cell`]:"onMouseEnter",[`mouseleave  .${l}-cell`]:"onMouseLeave",[`mouseenter  .${l}-cell-tools`]:"onMouseEnter",[`mouseleave  .${l}-cell-tools`]:"onMouseLeave",[`mousedown   .${l}-cell [event]`]:"onCustomEvent",[`touchstart  .${l}-cell [event]`]:"onCustomEvent",[`mousedown   .${l}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${l}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${l}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${l}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${l}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${l}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${l}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${l}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${l}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${l}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${l}-cell image`]:"onImageDragStart",[`mousedown   .${l}-edge .${l}-edge-label`]:"onLabelMouseDown",[`touchstart  .${l}-edge .${l}-edge-label`]:"onLabelMouseDown"},o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(a=O.GraphView||(O.GraphView={}))},15399:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(u,a,o,l){var r=arguments.length,e=r<3?a:l===null?l=Object.getOwnPropertyDescriptor(a,o):l,t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(u,a,o,l);else for(var s=u.length-1;s>=0;s--)(t=u[s])&&(e=(r<3?t(e):r>3?t(a,o,e):t(a,o))||e);return r>3&&e&&Object.defineProperty(a,o,e),e};Object.defineProperty(O,"__esModule",{value:!0}),O.VirtualRenderManager=void 0;const ie=V(35695),T=V(46764);class b extends T.Base{init(){this.resetRenderArea=ie.FunctionExt.throttle(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const a=this.graph.getGraphArea();this.graph.renderer.setRenderArea(a)}}dispose(){this.stopListening()}}J([T.Base.dispose()],b.prototype,"dispose",null),O.VirtualRenderManager=b},35805:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Animation=void 0;const J=V(35695);class ie{constructor(b){this.cell=b,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(b,u,a={},o="/"){const l=this.cell.getPropByPath(b),r=J.ObjectExt.defaults(a,ie.defaultOptions),e=this.getTiming(r.timing),t=this.getInterp(r.interp,l,u);let s=0;const h=Array.isArray(b)?b.join(o):b,m=Array.isArray(b)?b:b.split(o),d=()=>{const v=new Date().getTime();s===0&&(s=v);let N=(v-s)/r.duration;N<1?this.ids[h]=requestAnimationFrame(d):N=1;const F=t(e(N));this.cell.setPropByPath(m,F),a.progress&&a.progress(Object.assign({progress:N,currentValue:F},this.getArgs(h))),N===1&&(this.cell.notify("transition:complete",this.getArgs(h)),a.complete&&a.complete(this.getArgs(h)),this.cell.notify("transition:finish",this.getArgs(h)),a.finish&&a.finish(this.getArgs(h)),this.clean(h))};return setTimeout(()=>{this.stop(b,void 0,o),this.cache[h]={startValue:l,targetValue:u,options:r},this.ids[h]=requestAnimationFrame(d),this.cell.notify("transition:start",this.getArgs(h)),a.start&&a.start(this.getArgs(h))},a.delay),this.stop.bind(this,b,o,a)}stop(b,u={},a="/"){const o=Array.isArray(b)?b:b.split(a);return Object.keys(this.ids).filter(l=>J.ObjectExt.isEqual(o,l.split(a).slice(0,o.length))).forEach(l=>{cancelAnimationFrame(this.ids[l]);const r=this.cache[l],e=this.getArgs(l),t=Object.assign(Object.assign({},r.options),u),s=t.jumpedToEnd;s&&r.targetValue!=null&&(this.cell.setPropByPath(l,r.targetValue),this.cell.notify("transition:end",Object.assign({},e)),this.cell.notify("transition:complete",Object.assign({},e)),t.complete&&t.complete(Object.assign({},e)));const h=Object.assign({jumpedToEnd:s},e);this.cell.notify("transition:stop",Object.assign({},h)),t.stop&&t.stop(Object.assign({},h)),this.cell.notify("transition:finish",Object.assign({},e)),t.finish&&t.finish(Object.assign({},e)),this.clean(l)}),this}clean(b){delete this.ids[b],delete this.cache[b]}getTiming(b){return typeof b=="string"?J.Timing[b]:b}getInterp(b,u,a){return b?b(u,a):typeof a=="number"?J.Interp.number(u,a):typeof a=="string"?a[0]==="#"?J.Interp.color(u,a):J.Interp.unit(u,a):J.Interp.object(u,a)}getArgs(b){const u=this.cache[b];return{path:b,startValue:u.startValue,targetValue:u.targetValue,cell:this.cell}}}O.Animation=ie,function(T){T.defaultOptions={delay:10,duration:100,timing:"linear"}}(ie=O.Animation||(O.Animation={}))},15675:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(r,e,t,s){var h=arguments.length,m=h<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(r,e,t,s);else for(var v=r.length-1;v>=0;v--)(d=r[v])&&(m=(h<3?d(m):h>3?d(e,t,m):d(e,t))||m);return h>3&&m&&Object.defineProperty(e,t,m),m},ie=this&&this.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,s=Object.getOwnPropertySymbols(r);h<s.length;h++)e.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(r,s[h])&&(t[s[h]]=r[s[h]]);return t};Object.defineProperty(O,"__esModule",{value:!0}),O.Cell=void 0;const T=V(35695),b=V(62595),u=V(22608),a=V(23265),o=V(35805);class l extends T.Basecoat{static config(e){const{markup:t,propHooks:s,attrHooks:h}=e,m=ie(e,["markup","propHooks","attrHooks"]);t!=null&&(this.markup=t),s&&(this.propHooks=this.propHooks.slice(),Array.isArray(s)?this.propHooks.push(...s):typeof s=="function"?this.propHooks.push(s):Object.values(s).forEach(d=>{typeof d=="function"&&this.propHooks.push(d)})),h&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),h)),this.defaults=T.ObjectExt.merge({},this.defaults,m)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:T.ObjectExt.cloneDeep(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((s,h)=>h?T.FunctionExt.call(h,e,s):s,t)}get[Symbol.toStringTag](){return l.toStringTag}constructor(e={}){super();const s=this.constructor.getDefaults(!0),h=T.ObjectExt.merge({},this.preprocess(s),this.preprocess(e));this.id=h.id||T.StringExt.uuid(),this.store=new a.Store(h),this.animation=new o.Animation(this),this.setup(),this.init(),this.postprocess(e)}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const s=e.id,m=this.constructor.applyPropHooks(this,e);return s==null&&t!==!0&&(m.id=T.StringExt.uuid()),m}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:s,previous:h,options:m}=e;this.notify("change:*",{key:t,options:m,current:s,previous:h,cell:this}),this.notify(`change:${t}`,{options:m,current:s,previous:h,cell:this});const d=t;(d==="source"||d==="target")&&this.notify("change:terminal",{type:d,current:s,previous:h,options:m,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const s=this.model;return s&&(s.notify(`cell:${e}`,t),this.isNode()?s.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&s.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return e==null?this.store.get():this.store.get(e,t)}setProp(e,t,s){if(typeof e=="string")this.store.set(e,t,s);else{const h=this.preprocess(e,!0);this.store.set(T.ObjectExt.merge({},this.getProp(),h),t),this.postprocess(e)}return this}removeProp(e,t){return typeof e=="string"||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return e==null?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,s={}){return this.model&&(e==="children"?this._children=t?t.map(h=>this.model.getCell(h)).filter(h=>h!=null):null:e==="parent"&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,s),this}removePropByPath(e,t={}){const s=Array.isArray(e)?e:e.split("/");return s[0]==="attrs"&&(t.dirty=!0),this.store.removeByPath(s,t),this}prop(e,t,s){return e==null?this.getProp():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getPropByPath(e):t==null?this.removePropByPath(e,s||{}):this.setPropByPath(e,t,s||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){e==null?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let s=t.getMaxZIndex(),h;e.deep?(h=this.getDescendants({deep:!0,breadthFirst:!0}),h.unshift(this)):h=[this],s=s-h.length+1;const m=t.total();let d=t.indexOf(this)!==m-h.length;d||(d=h.some((v,x)=>v.getZIndex()!==s+x)),d&&this.batchUpdate("to-front",()=>{s+=h.length,h.forEach((v,x)=>{v.setZIndex(s+x,e)})})}return this}toBack(e={}){const t=this.model;if(t){let s=t.getMinZIndex(),h;e.deep?(h=this.getDescendants({deep:!0,breadthFirst:!0}),h.unshift(this)):h=[this];let m=t.indexOf(this)!==0;m||(m=h.some((d,v)=>d.getZIndex()!==s+v)),m&&this.batchUpdate("to-back",()=>{s-=h.length,h.forEach((d,v)=>{d.setZIndex(s+v,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){e==null?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return e==null&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){e==null?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(e==null)this.removeAttrs(t);else{const s=h=>this.store.set("attrs",h,t);if(t.overwrite===!0)s(e);else{const h=this.getAttrs();t.deep===!1?s(Object.assign(Object.assign({},h),e)):s(T.ObjectExt.merge({},h,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const s=this.constructor.getAttrHooks()||{};let h=s[e]||u.Attr.registry.get(e);if(!h){const m=T.StringExt.camelCase(e);h=s[m]||u.Attr.registry.get(m)}return h||null}getAttrByPath(e){return e==null||e===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,s={}){return this.setPropByPath(this.prefixAttrPath(e),t,s),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,s){return e==null?this.getAttrByPath():typeof e=="string"||Array.isArray(e)?arguments.length===1?this.getAttrByPath(e):t==null?this.removeAttrByPath(e,s||{}):this.setAttrByPath(e,t,s||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return this.store.get("visible")!==!1}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const s=typeof e=="boolean"?e:!this.isVisible(),h=typeof e=="boolean"?t:e;return s?this.show(h):this.hide(h),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(e==null)this.removeData(t);else{const s=h=>this.store.set("data",h,t);if(t.overwrite===!0)s(e);else{const h=this.getData();t.deep===!1?s(typeof e=="object"?Object.assign(Object.assign({},h),e):e):s(T.ObjectExt.merge({},h,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(s=>{var h;return(h=this.model)===null||h===void 0?void 0:h.getCell(s)}).filter(s=>s!=null);return this._children=t,[...t]}return null}hasParent(){return this.parent!=null}isParentOf(e){return e!=null&&e.getParent()===this}isChildOf(e){return e!=null&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(e){return this.children==null?-1:this.children.indexOf(e)}getChildAt(e){return this.children!=null&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let s=this.getParent();for(;s;)t.push(s),s=e.deep!==!1?s.getParent():null;return t}getDescendants(e={}){if(e.deep!==!1){if(e.breadthFirst){const t=[],s=this.getChildren()||[];for(;s.length>0;){const h=s.shift(),m=h.getChildren();t.push(h),m&&s.push(...m)}return t}{const t=this.getChildren()||[];return t.forEach(s=>{t.push(...s.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(e==null)return!1;if(t.deep!==!1){let s=this.getParent();for(;s;){if(s===e)return!0;s=s.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return e==null?!1:e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return l.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,e!=null?this.store.set("children",e.map(s=>s.id),t):this.store.remove("children",t),this}unembed(e,t={}){const s=this.children;if(s!=null&&e!=null){const h=this.getChildIndex(e);h!==-1&&(s.splice(h,1),e.setParent(null,t),this.setChildren(s,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return l.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,s={}){return e.insertChild(this,t,s),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,s={}){if(e!=null&&e!==this){const h=e.getParent(),m=this!==h;let d=t;if(d==null&&(d=this.getChildCount(),m||(d-=1)),h){const x=h.getChildren();if(x){const N=x.indexOf(e);N>=0&&(e.setParent(null,s),x.splice(N,1),h.setChildren(x,s))}}let v=this.children;if(v==null?(v=[],v.push(e)):v.splice(d,0,e),e.setParent(this,s),this.setChildren(v,s),m&&this.model){const x=this.model.getIncomingEdges(this),N=this.model.getOutgoingEdges(this);x&&x.forEach(F=>F.updateParent(s)),N&&N.forEach(F=>F.updateParent(s))}this.model&&this.model.addCell(e,s)}return this}removeFromParent(e={}){const t=this.getParent();if(t!=null){const s=t.getChildIndex(this);t.removeChildAt(s,e)}return this}removeChild(e,t={}){const s=this.getChildIndex(e);return this.removeChildAt(s,t)}removeChildAt(e,t={}){const s=this.getChildAt(e);return this.children!=null&&s!=null&&(this.unembed(s,t),s.remove(t)),s}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),e.deep!==!1&&this.eachChild(s=>s.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,s={},h="/"){return this.animation.start(e,t,s,h)}stopTransition(e,t,s="/"){return this.animation.stop(e,t,s),this}getTransitions(){return this.animation.get()}translate(e,t,s){return this}scale(e,t,s,h){return this}addTools(e,t,s){const h=Array.isArray(e)?e:[e],m=typeof t=="string"?t:null,d=typeof t=="object"?t:typeof s=="object"?s:{};if(d.reset)return this.setTools({name:m,items:h,local:d.local},d);let v=T.ObjectExt.cloneDeep(this.getTools());if(v==null||m==null||v.name===m)return v==null&&(v={}),v.items||(v.items=[]),v.name=m,v.items=[...v.items,...h],this.setTools(Object.assign({},v),d)}setTools(e,t={}){return e==null?this.removeTools():this.store.set("tools",l.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return t==null?!1:e==null?!0:t.name===e}hasTool(e){const t=this.getTools();return t==null?!1:t.items.some(s=>typeof s=="string"?s===e:s.name===e)}removeTool(e,t={}){const s=T.ObjectExt.cloneDeep(this.getTools());if(s){let h=!1;const m=s.items.slice(),d=v=>{m.splice(v,1),h=!0};if(typeof e=="number")d(e);else for(let v=m.length-1;v>=0;v-=1){const x=m[v];(typeof x=="string"?x===e:x.name===e)&&d(v)}h&&(s.items=m,this.setTools(s,t))}return this}getBBox(e){return new b.Rectangle}getConnectionPoint(e,t){return new b.Point}toJSON(e={}){const t=Object.assign({},this.store.get()),s=Object.prototype.toString,h=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const fe=this.constructor;throw new Error(`Unable to serialize ${h} missing "shape" prop, check the ${h} "${fe.name||s.call(fe)}"`)}const m=this.constructor,d=e.diff===!0,v=t.attrs||{},x=m.getDefaults(!0),N=d?this.preprocess(x,!0):x,F=N.attrs||{},ae={};Object.entries(t).forEach(([fe,B])=>{if(B!=null&&!Array.isArray(B)&&typeof B=="object"&&!T.ObjectExt.isPlainObject(B))throw new Error(`Can only serialize ${h} with plain-object props, but got a "${s.call(B)}" type of key "${fe}" on ${h} "${this.id}"`);if(fe!=="attrs"&&fe!=="shape"&&d){const he=N[fe];T.ObjectExt.isEqual(B,he)&&delete t[fe]}}),Object.keys(v).forEach(fe=>{const B=v[fe],he=F[fe];Object.keys(B).forEach(z=>{const ee=B[z],pe=he?he[z]:null;ee!=null&&typeof ee=="object"&&!Array.isArray(ee)?Object.keys(ee).forEach(S=>{const q=ee[S];if(he==null||pe==null||!T.ObjectExt.isObject(pe)||!T.ObjectExt.isEqual(pe[S],q)){ae[fe]==null&&(ae[fe]={}),ae[fe][z]==null&&(ae[fe][z]={});const M=ae[fe][z];M[S]=q}}):(he==null||!T.ObjectExt.isEqual(pe,ee))&&(ae[fe]==null&&(ae[fe]={}),ae[fe][z]=ee)})});const $=Object.assign(Object.assign({},t),{attrs:T.ObjectExt.isEmpty(ae)?void 0:ae});$.attrs==null&&delete $.attrs;const te=$;return te.angle===0&&delete te.angle,T.ObjectExt.cloneDeep(te)}clone(e={}){if(!e.deep){const s=Object.assign({},this.store.get());e.keepId||delete s.id,delete s.parent,delete s.children;const h=this.constructor;return new h(s)}return l.deepClone(this)[this.id]}findView(e){return e.findViewByCell(this)}startBatch(e,t={},s=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),s&&s.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},s=this.model){return s&&s.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,s){const h=this.model;this.startBatch(e,s,h);const m=t();return this.stopBatch(e,s,h),m}dispose(){this.removeFromParent(),this.store.dispose()}}l.defaults={},l.attrHooks={},l.propHooks=[],J([T.Basecoat.dispose()],l.prototype,"dispose",null),O.Cell=l,function(r){function e(t){return typeof t=="string"?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}r.normalizeTools=e}(l=O.Cell||(O.Cell={})),function(r){r.toStringTag=`X6.${r.name}`;function e(t){if(t==null)return!1;if(t instanceof r)return!0;const s=t[Symbol.toStringTag],h=t;return(s==null||s===r.toStringTag)&&typeof h.isNode=="function"&&typeof h.isEdge=="function"&&typeof h.prop=="function"&&typeof h.attr=="function"}r.isCell=e}(l=O.Cell||(O.Cell={})),function(r){function e(...m){const d=m.filter(x=>x!=null).map(x=>x.getAncestors()).sort((x,N)=>x.length-N.length);return d.shift().find(x=>d.every(N=>N.includes(x)))||null}r.getCommonAncestor=e;function t(m,d={}){let v=null;for(let x=0,N=m.length;x<N;x+=1){const F=m[x];let ae=F.getBBox(d);if(ae){if(F.isNode()){const $=F.getAngle();$!=null&&$!==0&&(ae=ae.bbox($))}v=v==null?ae:v.union(ae)}}return v}r.getCellsBBox=t;function s(m){const d=[m,...m.getDescendants({deep:!0})];return r.cloneCells(d)}r.deepClone=s;function h(m){const d=T.ArrayExt.uniq(m),v=d.reduce((x,N)=>(x[N.id]=N.clone(),x),{});return d.forEach(x=>{const N=v[x.id];if(N.isEdge()){const $=N.getSourceCellId(),te=N.getTargetCellId();$&&v[$]&&N.setSource(Object.assign(Object.assign({},N.getSource()),{cell:v[$].id})),te&&v[te]&&N.setTarget(Object.assign(Object.assign({},N.getTarget()),{cell:v[te].id}))}const F=x.getParent();F&&v[F.id]&&N.setParent(v[F.id]);const ae=x.getChildren();if(ae&&ae.length){const $=ae.reduce((te,fe)=>(v[fe.id]&&te.push(v[fe.id]),te),[]);$.length>0&&N.setChildren($)}}),v}r.cloneCells=h}(l=O.Cell||(O.Cell={})),function(r){r.config({propHooks(e){var{tools:t}=e,s=ie(e,["tools"]);return t&&(s.tools=r.normalizeTools(t)),s}})}(l=O.Cell||(O.Cell={}))},52643:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(b,u,a,o){var l=arguments.length,r=l<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,a):o,e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(b,u,a,o);else for(var t=b.length-1;t>=0;t--)(e=b[t])&&(r=(l<3?e(r):l>3?e(u,a,r):e(u,a))||r);return l>3&&r&&Object.defineProperty(u,a,r),r};Object.defineProperty(O,"__esModule",{value:!0}),O.Collection=void 0;const ie=V(35695);class T extends ie.Basecoat{constructor(u,a={}){super(),this.length=0,this.comparator=a.comparator||"zIndex",this.clean(),u&&this.reset(u,{silent:!0})}toJSON(){return this.cells.map(u=>u.toJSON())}add(u,a,o){let l,r;typeof a=="number"?(l=a,r=Object.assign({merge:!1},o)):(l=this.length,r=Object.assign({merge:!1},a)),l>this.length&&(l=this.length),l<0&&(l+=this.length+1);const e=Array.isArray(u)?u:[u],t=this.comparator&&typeof a!="number"&&r.sort!==!1,s=this.comparator||null;let h=!1;const m=[],d=[];return e.forEach(v=>{const x=this.get(v);x?r.merge&&!v.isSameStore(x)&&(x.setProp(v.getProp(),o),d.push(x),t&&!h&&(s==null||typeof s=="function"?h=x.hasChanged():typeof s=="string"?h=x.hasChanged(s):h=s.some(N=>x.hasChanged(N)))):(m.push(v),this.reference(v))}),m.length&&(t&&(h=!0),this.cells.splice(l,0,...m),this.length=this.cells.length),h&&this.sort({silent:!0}),r.silent||(m.forEach((v,x)=>{const N={cell:v,index:l+x,options:r};this.trigger("added",N),r.dryrun||v.notify("added",Object.assign({},N))}),h&&this.trigger("sorted"),(m.length||d.length)&&this.trigger("updated",{added:m,merged:d,removed:[],options:r})),this}remove(u,a={}){const o=Array.isArray(u)?u:[u],l=this.removeCells(o,a);return!a.silent&&l.length>0&&this.trigger("updated",{options:a,removed:l,added:[],merged:[]}),Array.isArray(u)?l:l[0]}removeCells(u,a){const o=[];for(let l=0;l<u.length;l+=1){const r=this.get(u[l]);if(r==null)continue;const e=this.cells.indexOf(r);this.cells.splice(e,1),this.length-=1,delete this.map[r.id],o.push(r),this.unreference(r),a.dryrun||r.remove(),a.silent||(this.trigger("removed",{cell:r,index:e,options:a}),a.dryrun||r.notify("removed",{cell:r,index:e,options:a}))}return o}reset(u,a={}){const o=this.cells.slice();if(o.forEach(l=>this.unreference(l)),this.clean(),this.add(u,Object.assign({silent:!0},a)),!a.silent){const l=this.cells.slice();this.trigger("reseted",{options:a,previous:o,current:l});const r=[],e=[];l.forEach(t=>{o.some(h=>h.id===t.id)||r.push(t)}),o.forEach(t=>{l.some(h=>h.id===t.id)||e.push(t)}),this.trigger("updated",{options:a,added:r,removed:e,merged:[]})}return this}push(u,a){return this.add(u,this.length,a)}pop(u){const a=this.at(this.length-1);return this.remove(a,u)}unshift(u,a){return this.add(u,0,a)}shift(u){const a=this.at(0);return this.remove(a,u)}get(u){if(u==null)return null;const a=typeof u=="string"||typeof u=="number"?u:u.id;return this.map[a]||null}has(u){return this.get(u)!=null}at(u){return u<0&&(u+=this.length),this.cells[u]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(u){return this.cells.indexOf(u)}toArray(){return this.cells.slice()}sort(u={}){return this.comparator!=null&&(this.cells=ie.ArrayExt.sortBy(this.cells,this.comparator),u.silent||this.trigger("sorted")),this}clone(){const u=this.constructor;return new u(this.cells.slice(),{comparator:this.comparator})}reference(u){this.map[u.id]=u,u.on("*",this.notifyCellEvent,this)}unreference(u){u.off("*",this.notifyCellEvent,this),delete this.map[u.id]}notifyCellEvent(u,a){const o=a.cell;this.trigger(`cell:${u}`,a),o&&(o.isNode()?this.trigger(`node:${u}`,Object.assign(Object.assign({},a),{node:o})):o.isEdge()&&this.trigger(`edge:${u}`,Object.assign(Object.assign({},a),{edge:o})))}clean(){this.length=0,this.cells=[],this.map={}}dispose(){this.reset([])}}J([T.dispose()],T.prototype,"dispose",null),O.Collection=T},51924:function(bt,O,V){"use strict";var J=this&&this.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,s=Object.getOwnPropertySymbols(r);h<s.length;h++)e.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(r,s[h])&&(t[s[h]]=r[s[h]]);return t};Object.defineProperty(O,"__esModule",{value:!0}),O.Edge=void 0;const ie=V(35695),T=V(62595),b=V(77403),u=V(48250),a=V(60161),o=V(15675);class l extends o.Cell{get[Symbol.toStringTag](){return l.toStringTag}constructor(e={}){super(e)}preprocess(e,t){const{source:s,sourceCell:h,sourcePort:m,sourcePoint:d,target:v,targetCell:x,targetPort:N,targetPoint:F}=e,$=J(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),te=fe=>typeof fe=="string"||typeof fe=="number";if(s!=null)if(o.Cell.isCell(s))$.source={cell:s.id};else if(te(s))$.source={cell:s};else if(T.Point.isPoint(s))$.source=s.toJSON();else if(Array.isArray(s))$.source={x:s[0],y:s[1]};else{const fe=s.cell;o.Cell.isCell(fe)?$.source=Object.assign(Object.assign({},s),{cell:fe.id}):$.source=s}if(h!=null||m!=null){let fe=$.source;if(h!=null){const B=te(h)?h:h.id;fe?fe.cell=B:fe=$.source={cell:B}}m!=null&&fe&&(fe.port=m)}else d!=null&&($.source=T.Point.create(d).toJSON());if(v!=null)if(o.Cell.isCell(v))$.target={cell:v.id};else if(te(v))$.target={cell:v};else if(T.Point.isPoint(v))$.target=v.toJSON();else if(Array.isArray(v))$.target={x:v[0],y:v[1]};else{const fe=v.cell;o.Cell.isCell(fe)?$.target=Object.assign(Object.assign({},v),{cell:fe.id}):$.target=v}if(x!=null||N!=null){let fe=$.target;if(x!=null){const B=te(x)?x:x.id;fe?fe.cell=B:fe=$.target={cell:B}}N!=null&&fe&&(fe.port=N)}else F!=null&&($.target=T.Point.create(F).toJSON());return super.preprocess($,t)}setup(){super.setup(),this.on("change:labels",e=>this.onLabelsChanged(e)),this.on("change:vertices",e=>this.onVertexsChanged(e))}isEdge(){return!0}disconnect(e={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}get source(){return this.getSource()}set source(e){this.setSource(e)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(e,t,s={}){return this.setTerminal("source",e,t,s)}get target(){return this.getTarget()}set target(e){this.setTarget(e)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(e,t,s={}){return this.setTerminal("target",e,t,s)}getTerminal(e){return Object.assign({},this.store.get(e))}setTerminal(e,t,s,h={}){if(o.Cell.isCell(t))return this.store.set(e,ie.ObjectExt.merge({},s,{cell:t.id}),h),this;const m=t;return T.Point.isPoint(t)||m.x!=null&&m.y!=null?(this.store.set(e,ie.ObjectExt.merge({},s,{x:m.x,y:m.y}),h),this):(this.store.set(e,ie.ObjectExt.cloneDeep(t),h),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(e){const t=this[e];if(T.Point.isPointLike(t))return T.Point.create(t);const s=this.getTerminalCell(e);return s?s.getConnectionPoint(this,e):new T.Point}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(e){if(this.model){const t=e==="source"?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(e){let t=this;const s={};for(;t&&t.isEdge();){if(s[t.id])return null;s[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}get router(){return this.getRouter()}set router(e){e==null?this.removeRouter():this.setRouter(e)}getRouter(){return this.store.get("router")}setRouter(e,t,s){return typeof e=="object"?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},s),this}removeRouter(e={}){return this.store.remove("router",e),this}get connector(){return this.getConnector()}set connector(e){e==null?this.removeConnector():this.setConnector(e)}getConnector(){return this.store.get("connector")}setConnector(e,t,s){return typeof e=="object"?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},s),this}removeConnector(e={}){return this.store.remove("connector",e)}getDefaultLabel(){const e=this.constructor,t=this.store.get("defaultLabel")||e.defaultLabel||{};return ie.ObjectExt.cloneDeep(t)}get labels(){return this.getLabels()}set labels(e){this.setLabels(e)}getLabels(){return[...this.store.get("labels",[])].map(e=>this.parseLabel(e))}setLabels(e,t={}){return this.store.set("labels",Array.isArray(e)?e:[e],t),this}insertLabel(e,t,s={}){const h=this.getLabels(),m=h.length;let d=t!=null&&Number.isFinite(t)?t:m;return d<0&&(d=m+d+1),h.splice(d,0,this.parseLabel(e)),this.setLabels(h,s)}appendLabel(e,t={}){return this.insertLabel(e,-1,t)}getLabelAt(e){const t=this.getLabels();return e!=null&&Number.isFinite(e)?this.parseLabel(t[e]):null}setLabelAt(e,t,s={}){if(e!=null&&Number.isFinite(e)){const h=this.getLabels();h[e]=this.parseLabel(t),this.setLabels(h,s)}return this}removeLabelAt(e,t={}){const s=this.getLabels(),h=e!=null&&Number.isFinite(e)?e:-1,m=s.splice(h,1);return this.setLabels(s,t),m.length?m[0]:null}parseLabel(e){return typeof e=="string"?this.constructor.parseStringLabel(e):e}onLabelsChanged({previous:e,current:t}){const s=e&&t?t.filter(m=>e.find(d=>m===d||ie.ObjectExt.isEqual(m,d))?null:m):t?[...t]:[],h=e&&t?e.filter(m=>t.find(d=>m===d||ie.ObjectExt.isEqual(m,d))?null:m):e?[...e]:[];s.length>0&&this.notify("labels:added",{added:s,cell:this,edge:this}),h.length>0&&this.notify("labels:removed",{removed:h,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(e){this.setVertices(e)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(e,t={}){const s=Array.isArray(e)?e:[e];return this.store.set("vertices",s.map(h=>T.Point.toJSON(h)),t),this}insertVertex(e,t,s={}){const h=this.getVertices(),m=h.length;let d=t!=null&&Number.isFinite(t)?t:m;return d<0&&(d=m+d+1),h.splice(d,0,T.Point.toJSON(e)),this.setVertices(h,s)}appendVertex(e,t={}){return this.insertVertex(e,-1,t)}getVertexAt(e){return e!=null&&Number.isFinite(e)?this.getVertices()[e]:null}setVertexAt(e,t,s={}){if(e!=null&&Number.isFinite(e)){const h=this.getVertices();h[e]=t,this.setVertices(h,s)}return this}removeVertexAt(e,t={}){const s=this.getVertices(),h=e!=null&&Number.isFinite(e)?e:-1;return s.splice(h,1),this.setVertices(s,t)}onVertexsChanged({previous:e,current:t}){const s=e&&t?t.filter(m=>e.find(d=>T.Point.equals(m,d))?null:m):t?[...t]:[],h=e&&t?e.filter(m=>t.find(d=>T.Point.equals(m,d))?null:m):e?[...e]:[];s.length>0&&this.notify("vertexs:added",{added:s,cell:this,edge:this}),h.length>0&&this.notify("vertexs:removed",{removed:h,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||u.Markup.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(e,t,s={}){return s.translateBy=s.translateBy||this.id,s.tx=e,s.ty=t,this.applyToPoints(h=>({x:(h.x||0)+e,y:(h.y||0)+t}),s)}scale(e,t,s,h={}){return this.applyToPoints(m=>T.Point.create(m).scale(e,t,s).toJSON(),h)}applyToPoints(e,t={}){const s={},h=this.getSource(),m=this.getTarget();T.Point.isPointLike(h)&&(s.source=e(h)),T.Point.isPointLike(m)&&(s.target=e(m));const d=this.getVertices();return d.length>0&&(s.vertices=d.map(e)),this.store.set(s,t),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const e=[this.getSourcePoint(),...this.getVertices().map(t=>T.Point.create(t)),this.getTargetPoint()];return new T.Polyline(e)}updateParent(e){let t=null;const s=this.getSourceCell(),h=this.getTargetCell(),m=this.getParent();return s&&h&&(s===h||s.isDescendantOf(h)?t=h:h.isDescendantOf(s)?t=s:t=o.Cell.getCommonAncestor(s,h)),m&&t&&t.id!==m.id&&m.unembed(this,e),t&&(!m||m.id!==t.id)&&t.embed(this,e),t}hasLoop(e={}){const t=this.getSource(),s=this.getTarget(),h=t.cell,m=s.cell;if(!h||!m)return!1;let d=h===m;if(!d&&e.deep&&this._model){const v=this.getSourceCell(),x=this.getTargetCell();v&&x&&(d=v.isAncestorOf(x,e)||x.isAncestorOf(v,e))}return d}getFragmentAncestor(){const e=[this,this.getSourceNode(),this.getTargetNode()].filter(t=>t!=null);return this.getCommonAncestor(...e)}isFragmentDescendantOf(e){const t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}}O.Edge=l,l.defaults={},function(r){function e(t,s){const h=t,m=s;return h.cell===m.cell?h.port===m.port||h.port==null&&m.port==null:!1}r.equalTerminals=e}(l=O.Edge||(O.Edge={})),function(r){r.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function e(t){return{attrs:{label:{text:t}}}}r.parseStringLabel=e}(l=O.Edge||(O.Edge={})),function(r){r.toStringTag=`X6.${r.name}`;function e(t){if(t==null)return!1;if(t instanceof r)return!0;const s=t[Symbol.toStringTag],h=t;return(s==null||s===r.toStringTag)&&typeof h.isNode=="function"&&typeof h.isEdge=="function"&&typeof h.prop=="function"&&typeof h.attr=="function"&&typeof h.disconnect=="function"&&typeof h.getSource=="function"&&typeof h.getTarget=="function"}r.isEdge=e}(l=O.Edge||(O.Edge={})),function(r){r.registry=b.Registry.create({type:"edge",process(e,t){if(a.ShareRegistry.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if(typeof t=="function")return t.config({shape:e}),t;let s=r;const{inherit:h="edge"}=t,m=J(t,["inherit"]);if(typeof h=="string"){const v=this.get(h||"edge");v==null&&h?this.onNotFound(h,"inherited"):s=v}else s=h;m.constructorName==null&&(m.constructorName=e);const d=s.define.call(s,m);return d.config({shape:e}),d}}),a.ShareRegistry.setEdgeRegistry(r.registry)}(l=O.Edge||(O.Edge={})),function(r){let e=0;function t(m){return m?ie.StringExt.pascalCase(m):(e+=1,`CustomEdge${e}`)}function s(m){const{constructorName:d,overwrite:v}=m,x=J(m,["constructorName","overwrite"]),N=ie.ObjectExt.createClass(t(d||x.shape),this);return N.config(x),x.shape&&r.registry.register(x.shape,N,v),N}r.define=s;function h(m){const d=m.shape||"edge",v=r.registry.get(d);return v?new v(m):r.registry.onNotFound(d)}r.create=h}(l=O.Edge||(O.Edge={})),function(r){const e="basic.edge";r.config({shape:e,propHooks(t){const{label:s,vertices:h}=t,m=J(t,["label","vertices"]);if(s){m.labels==null&&(m.labels=[]);const d=typeof s=="string"?r.parseStringLabel(s):s;m.labels.push(d)}return h&&Array.isArray(h)&&(m.vertices=h.map(d=>T.Point.create(d).toJSON())),m}}),r.registry.register(e,r)}(l=O.Edge||(O.Edge={}))},67861:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(15675),O),ie(V(37798),O),ie(V(51924),O),ie(V(41111),O),ie(V(52643),O)},41111:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(r,e,t,s){var h=arguments.length,m=h<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(r,e,t,s);else for(var v=r.length-1;v>=0;v--)(d=r[v])&&(m=(h<3?d(m):h>3?d(e,t,m):d(e,t))||m);return h>3&&m&&Object.defineProperty(e,t,m),m};Object.defineProperty(O,"__esModule",{value:!0}),O.Model=void 0;const ie=V(35695),T=V(62595),b=V(15675),u=V(51924),a=V(37798),o=V(52643);class l extends ie.Basecoat{get[Symbol.toStringTag](){return l.toStringTag}constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new o.Collection(e),this.setup()}notify(e,t){this.trigger(e,t);const s=this.graph;return s&&(e==="sorted"||e==="reseted"||e==="updated"?s.trigger(`model:${e}`,t):s.trigger(e,t)),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const s=t.cell;this.onCellRemoved(s,t.options),this.notify("cell:removed",t),s.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:s})):s.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:s}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const s=e.id;if(e.isEdge()){delete this.edges[s];const h=e.getSource(),m=e.getTarget();if(h&&h.cell){const d=this.outgoings[h.cell],v=d?d.indexOf(s):-1;v>=0&&(d.splice(v,1),d.length===0&&delete this.outgoings[h.cell])}if(m&&m.cell){const d=this.incomings[m.cell],v=d?d.indexOf(s):-1;v>=0&&(d.splice(v,1),d.length===0&&delete this.incomings[m.cell])}}else delete this.nodes[s];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const s=t==="source"?this.outgoings:this.incomings,h=e.previous(t);if(h&&h.cell){const d=b.Cell.isCell(h.cell)?h.cell.id:h.cell,v=s[d],x=v?v.indexOf(e.id):-1;x>=0&&(v.splice(x,1),v.length===0&&delete s[d])}const m=e.getTerminal(t);if(m&&m.cell){const d=b.Cell.isCell(m.cell)?m.cell.id:m.cell,v=s[d]||[];v.indexOf(e.id)===-1&&v.push(e.id),s[d]=v}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),e.zIndex==null&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(s=>this.prepareCell(s,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(s=>this.prepareCell(s,{options:t})),this}clear(e={}){const t=this.getCells();if(t.length===0)return this;const s=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const h=t.sort((m,d)=>{const v=m.isEdge()?1:2,x=d.isEdge()?1:2;return v-x});for(;h.length>0;){const m=h.shift();m&&m.remove(s)}},s),this}addNode(e,t={}){const s=a.Node.isNode(e)?e:this.createNode(e);return this.addCell(s,t),s}updateNode(e,t={}){const s=this.createNode(e),h=s.getProp();return s.dispose(),this.updateCell(h,t)}createNode(e){return a.Node.create(e)}addEdge(e,t={}){const s=u.Edge.isEdge(e)?e:this.createEdge(e);return this.addCell(s,t),s}createEdge(e){return u.Edge.create(e)}updateEdge(e,t={}){const s=this.createEdge(e),h=s.getProp();return s.dispose(),this.updateCell(h,t)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(s=>this.addCell(s,t)),this.addings.delete(e)),this)}addCells(e,t={}){const s=e.length;if(s===0)return this;const h=Object.assign(Object.assign({},t),{position:s-1,maxPosition:s-1});return this.startBatch("add",Object.assign(Object.assign({},h),{cells:e})),e.forEach(m=>{this.addCell(m,h),h.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},h),{cells:e})),this}updateCell(e,t={}){const s=e.id&&this.getCell(e.id);return s?this.batchUpdate("update",()=>(Object.entries(e).forEach(([h,m])=>s.setProp(h,m,t)),!0),e):!1}removeCell(e,t={}){const s=typeof e=="string"?this.getCell(e):e;return s&&this.has(s)?this.collection.remove(s,t):null}updateCellId(e,t){if(e.id===t)return;this.startBatch("update",{id:t}),e.prop("id",t);const s=e.clone({keepId:!0});return this.addCell(s),this.getConnectedEdges(e).forEach(m=>{const d=m.getSourceCell(),v=m.getTargetCell();d===e&&m.setSource(Object.assign(Object.assign({},m.getSource()),{cell:t})),v===e&&m.setTarget(Object.assign(Object.assign({},m.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),s}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(s=>this.removeCell(s,t))):[]}removeConnectedEdges(e,t={}){const s=this.getConnectedEdges(e);return s.forEach(h=>{h.remove(t)}),s}disconnectConnectedEdges(e,t={}){const s=typeof e=="string"?e:e.id;this.getConnectedEdges(e).forEach(h=>{const m=h.getSourceCellId(),d=h.getTargetCellId();m===s&&h.setSource({x:0,y:0},t),d===s&&h.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>t!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const t=typeof e=="string"?e:e.id,s=this.outgoings[t];return s?s.map(h=>this.getCell(h)).filter(h=>h&&h.isEdge()):null}getIncomingEdges(e){const t=typeof e=="string"?e:e.id,s=this.incomings[t];return s?s.map(h=>this.getCell(h)).filter(h=>h&&h.isEdge()):null}getConnectedEdges(e,t={}){const s=[],h=typeof e=="string"?this.getCell(e):e;if(h==null)return s;const m={},d=t.indirect;let v=t.incoming,x=t.outgoing;v==null&&x==null&&(v=x=!0);const N=(F,ae)=>{const $=ae?this.getOutgoingEdges(F):this.getIncomingEdges(F);if($!=null&&$.forEach(te=>{m[te.id]||(s.push(te),m[te.id]=!0,d&&(v&&N(te,!1),x&&N(te,!0)))}),d&&F.isEdge()){const te=ae?F.getTargetCell():F.getSourceCell();te&&te.isEdge()&&(m[te.id]||(s.push(te),N(te,ae)))}};if(x&&N(h,!0),v&&N(h,!1),t.deep){const F=h.getDescendants({deep:!0}),ae={};F.forEach(te=>{te.isNode()&&(ae[te.id]=!0)});const $=(te,fe)=>{const B=fe?this.getOutgoingEdges(te.id):this.getIncomingEdges(te.id);B!=null&&B.forEach(he=>{if(!m[he.id]){const z=he.getSourceCell(),ee=he.getTargetCell();if(!t.enclosed&&z&&ae[z.id]&&ee&&ae[ee.id])return;s.push(he),m[he.id]=!0}})};F.forEach(te=>{te.isEdge()||(x&&$(te,!0),v&&$(te,!1))})}return s}isBoundary(e,t){const s=typeof e=="string"?this.getCell(e):e,h=t?this.getIncomingEdges(s):this.getOutgoingEdges(s);return h==null||h.length===0}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(s=>{if(this.isBoundary(s,e)){const h=this.getCell(s);h&&t.push(h)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let s=t.incoming,h=t.outgoing;s==null&&h==null&&(s=h=!0);const d=this.getConnectedEdges(e,t).reduce((v,x)=>{const N=x.hasLoop(t),F=x.getSourceCell(),ae=x.getTargetCell();return s&&F&&F.isNode()&&!v[F.id]&&(N||F!==e&&(!t.deep||!F.isDescendantOf(e)))&&(v[F.id]=F),h&&ae&&ae.isNode()&&!v[ae.id]&&(N||ae!==e&&(!t.deep||!ae.isDescendantOf(e)))&&(v[ae.id]=ae),v},{});if(e.isEdge()){if(s){const v=e.getSourceCell();v&&v.isNode()&&!d[v.id]&&(d[v.id]=v)}if(h){const v=e.getTargetCell();v&&v.isNode()&&!d[v.id]&&(d[v.id]=v)}}return Object.keys(d).map(v=>d[v])}isNeighbor(e,t,s={}){let h=s.incoming,m=s.outgoing;return h==null&&m==null&&(h=m=!0),this.getConnectedEdges(e,s).some(d=>{const v=d.getSourceCell(),x=d.getTargetCell();return!!(h&&v&&v.id===t.id||m&&x&&x.id===t.id)})}getSuccessors(e,t={}){const s=[];return this.search(e,(h,m)=>{h!==e&&this.matchDistance(m,t.distance)&&s.push(h)},Object.assign(Object.assign({},t),{outgoing:!0})),s}isSuccessor(e,t,s={}){let h=!1;return this.search(e,(m,d)=>{if(m===t&&m!==e&&this.matchDistance(d,s.distance))return h=!0,!1},Object.assign(Object.assign({},s),{outgoing:!0})),h}getPredecessors(e,t={}){const s=[];return this.search(e,(h,m)=>{h!==e&&this.matchDistance(m,t.distance)&&s.push(h)},Object.assign(Object.assign({},t),{incoming:!0})),s}isPredecessor(e,t,s={}){let h=!1;return this.search(e,(m,d)=>{if(m===t&&m!==e&&this.matchDistance(d,s.distance))return h=!0,!1},Object.assign(Object.assign({},s),{incoming:!0})),h}matchDistance(e,t){return t==null?!0:typeof t=="function"?t(e):Array.isArray(t)&&t.includes(e)?!0:e===t}getCommonAncestor(...e){const t=[];return e.forEach(s=>{s&&(Array.isArray(s)?t.push(...s):t.push(s))}),b.Cell.getCommonAncestor(...t)}getSubGraph(e,t={}){const s=[],h={},m=[],d=[],v=x=>{h[x.id]||(s.push(x),h[x.id]=x,x.isEdge()&&d.push(x),x.isNode()&&m.push(x))};return e.forEach(x=>{v(x),t.deep&&x.getDescendants({deep:!0}).forEach(F=>v(F))}),d.forEach(x=>{const N=x.getSourceCell(),F=x.getTargetCell();N&&!h[N.id]&&(s.push(N),h[N.id]=N,N.isNode()&&m.push(N)),F&&!h[F.id]&&(s.push(F),h[F.id]=F,F.isNode()&&m.push(F))}),m.forEach(x=>{this.getConnectedEdges(x,t).forEach(F=>{const ae=F.getSourceCell(),$=F.getTargetCell();!h[F.id]&&ae&&h[ae.id]&&$&&h[$.id]&&(s.push(F),h[F.id]=F)})}),s}cloneSubGraph(e,t={}){const s=this.getSubGraph(e,t);return this.cloneCells(s)}cloneCells(e){return b.Cell.cloneCells(e)}getNodesFromPoint(e,t){const s=typeof e=="number"?{x:e,y:t||0}:e;return this.getNodes().filter(h=>h.getBBox().containsPoint(s))}getNodesInArea(e,t,s,h,m){const d=typeof e=="number"?new T.Rectangle(e,t,s,h):T.Rectangle.create(e),v=typeof e=="number"?m:t,x=v&&v.strict;return this.getNodes().filter(N=>{const F=N.getBBox();return x?d.containsRect(F):d.isIntersectWithRect(F)})}getEdgesInArea(e,t,s,h,m){const d=typeof e=="number"?new T.Rectangle(e,t,s,h):T.Rectangle.create(e),v=typeof e=="number"?m:t,x=v&&v.strict;return this.getEdges().filter(N=>{const F=N.getBBox();return F.width===0?F.inflate(1,0):F.height===0&&F.inflate(0,1),x?d.containsRect(F):d.isIntersectWithRect(F)})}getNodesUnderNode(e,t={}){const s=e.getBBox();return(t.by==null||t.by==="bbox"?this.getNodesInArea(s):this.getNodesFromPoint(s[t.by])).filter(m=>e.id!==m.id&&!m.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return b.Cell.getCellsBBox(e,t)}search(e,t,s={}){s.breadthFirst?this.breadthFirstSearch(e,t,s):this.depthFirstSearch(e,t,s)}breadthFirstSearch(e,t,s={}){const h=[],m={},d={};for(h.push(e),d[e.id]=0;h.length>0;){const v=h.shift();if(v==null||m[v.id]||(m[v.id]=!0,ie.FunctionExt.call(t,this,v,d[v.id])===!1))continue;this.getNeighbors(v,s).forEach(N=>{d[N.id]=d[v.id]+1,h.push(N)})}}depthFirstSearch(e,t,s={}){const h=[],m={},d={};for(h.push(e),d[e.id]=0;h.length>0;){const v=h.pop();if(v==null||m[v.id]||(m[v.id]=!0,ie.FunctionExt.call(t,this,v,d[v.id])===!1))continue;const x=this.getNeighbors(v,s),N=h.length;x.forEach(F=>{d[F.id]=d[v.id]+1,h.splice(N,0,F)})}}getShortestPath(e,t,s={}){const h={};this.getEdges().forEach(N=>{const F=N.getSourceCellId(),ae=N.getTargetCellId();F&&ae&&(h[F]||(h[F]=[]),h[ae]||(h[ae]=[]),h[F].push(ae),s.directed||h[ae].push(F))});const m=typeof e=="string"?e:e.id,d=ie.Dijkstra.run(h,m,s.weight),v=[];let x=typeof t=="string"?t:t.id;for(d[x]&&v.push(x);x=d[x];)v.unshift(x);return v}translate(e,t,s){return this.getCells().filter(h=>!h.hasParent()).forEach(h=>h.translate(e,t,s)),this}resize(e,t,s){return this.resizeCells(e,t,this.getCells(),s)}resizeCells(e,t,s,h={}){const m=this.getCellsBBox(s);if(m){const d=Math.max(e/m.width,0),v=Math.max(t/m.height,0),x=m.getOrigin();s.forEach(N=>N.scale(d,v,x,h))}return this}toJSON(e={}){return l.toJSON(this.getCells(),e)}parseJSON(e){return l.fromJSON(e)}fromJSON(e,t={}){const s=this.parseJSON(e);return this.resetCells(s,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,s={}){this.startBatch(e,s);const h=t();return this.stopBatch(e,s),h}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(s=>this.batches[s]>0)}dispose(){this.collection.dispose()}}J([l.dispose()],l.prototype,"dispose",null),O.Model=l,function(r){r.toStringTag=`X6.${r.name}`;function e(t){if(t==null)return!1;if(t instanceof r)return!0;const s=t[Symbol.toStringTag],h=t;return(s==null||s===r.toStringTag)&&typeof h.addNode=="function"&&typeof h.addEdge=="function"&&h.collection!=null}r.isModel=e}(l=O.Model||(O.Model={})),function(r){function e(s,h={}){return{cells:s.map(m=>m.toJSON(h))}}r.toJSON=e;function t(s){const h=[];return Array.isArray(s)?h.push(...s):(s.cells&&h.push(...s.cells),s.nodes&&s.nodes.forEach(m=>{m.shape==null&&(m.shape="rect"),h.push(m)}),s.edges&&s.edges.forEach(m=>{m.shape==null&&(m.shape="edge"),h.push(m)})),h.map(m=>{const d=m.shape;if(d){if(a.Node.registry.exist(d))return a.Node.create(m);if(u.Edge.registry.exist(d))return u.Edge.create(m)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}r.fromJSON=t}(l=O.Model||(O.Model={}))},37798:function(bt,O,V){"use strict";var J=this&&this.__rest||function(e,t){var s={};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&t.indexOf(h)<0&&(s[h]=e[h]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,h=Object.getOwnPropertySymbols(e);m<h.length;m++)t.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(e,h[m])&&(s[h[m]]=e[h[m]]);return s};Object.defineProperty(O,"__esModule",{value:!0}),O.Node=void 0;const ie=V(62595),T=V(35695),b=V(77403),u=V(48250),a=V(15675),o=V(60161),l=V(48652);class r extends a.Cell{get[Symbol.toStringTag](){return r.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,s){const{x:h,y:m,width:d,height:v}=t,x=J(t,["x","y","width","height"]);if(h!=null||m!=null){const N=x.position;x.position=Object.assign(Object.assign({},N),{x:h!=null?h:N?N.x:0,y:m!=null?m:N?N.y:0})}if(d!=null||v!=null){const N=x.size;x.size=Object.assign(Object.assign({},N),{width:d!=null?d:N?N.width:0,height:v!=null?v:N?N.height:0})}return super.preprocess(x,s)}isNode(){return!0}size(t,s,h){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,s,h):this.setSize(t,s)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,s,h){return typeof t=="object"?this.resize(t.width,t.height,s):this.resize(t,s,h),this}resize(t,s,h={}){this.startBatch("resize",h);const m=h.direction;if(m){const d=this.getSize();switch(m){case"left":case"right":s=d.height;break;case"top":case"bottom":t=d.width;break;default:break}let x={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[m];const N=ie.Angle.normalize(this.getAngle()||0);h.absolute&&(x+=Math.floor((N+45)/90),x%=4);const F=this.getBBox();let ae;x===0?ae=F.getBottomLeft():x===1?ae=F.getCorner():x===2?ae=F.getTopRight():ae=F.getOrigin();const $=ae.clone().rotate(-N,F.getCenter()),te=Math.sqrt(t*t+s*s)/2;let fe=x*Math.PI/2;fe+=Math.atan(x%2===0?s/t:t/s),fe-=ie.Angle.toRad(N);const he=ie.Point.fromPolar(te,fe,$).clone().translate(t/-2,s/-2);this.store.set("size",{width:t,height:s},h),this.setPosition(he.x,he.y,h)}else this.store.set("size",{width:t,height:s},h);return this.stopBatch("resize",h),this}scale(t,s,h,m={}){const d=this.getBBox().scale(t,s,h==null?void 0:h);return this.startBatch("scale",m),this.setPosition(d.x,d.y,m),this.resize(d.width,d.height,m),this.stopBatch("scale"),this}position(t,s,h){return typeof t=="number"?this.setPosition(t,s,h):this.getPosition(t)}getPosition(t={}){if(t.relative){const h=this.getParent();if(h!=null&&h.isNode()){const m=this.getPosition(),d=h.getPosition();return{x:m.x-d.x,y:m.y-d.y}}}const s=this.store.get("position");return s?Object.assign({},s):{x:0,y:0}}setPosition(t,s,h={}){let m,d,v;if(typeof t=="object"?(m=t.x,d=t.y,v=s||{}):(m=t,d=s,v=h||{}),v.relative){const x=this.getParent();if(x!=null&&x.isNode()){const N=x.getPosition();m+=N.x,d+=N.y}}if(v.deep){const x=this.getPosition();this.translate(m-x.x,d-x.y,v)}else this.store.set("position",{x:m,y:d},v);return this}translate(t=0,s=0,h={}){if(t===0&&s===0)return this;h.translateBy=h.translateBy||this.id;const m=this.getPosition();if(h.restrict!=null&&h.translateBy===this.id){const v=this.getBBox({deep:!0}),x=h.restrict,N=m.x-v.x,F=m.y-v.y,ae=Math.max(x.x+N,Math.min(x.x+x.width+N-v.width,m.x+t)),$=Math.max(x.y+F,Math.min(x.y+x.height+F-v.height,m.y+s));t=ae-m.x,s=$-m.y}const d={x:m.x+t,y:m.y+s};return h.tx=t,h.ty=s,h.transition?(typeof h.transition!="object"&&(h.transition={}),this.transition("position",d,Object.assign(Object.assign({},h.transition),{interp:T.Interp.object})),this.eachChild(v=>{var x;((x=h.exclude)===null||x===void 0?void 0:x.includes(v))||v.translate(t,s,h)})):(this.startBatch("translate",h),this.store.set("position",d,h),this.eachChild(v=>{var x;((x=h.exclude)===null||x===void 0?void 0:x.includes(v))||v.translate(t,s,h)}),this.stopBatch("translate",h)),this}angle(t,s){return t==null?this.getAngle():this.rotate(t,s)}getAngle(){return this.store.get("angle",0)}rotate(t,s={}){const h=this.getAngle();if(s.center){const m=this.getSize(),d=this.getPosition(),v=this.getBBox().getCenter();v.rotate(h-t,s.center);const x=v.x-m.width/2-d.x,N=v.y-m.height/2-d.y;this.startBatch("rotate",{angle:t,options:s}),this.setPosition(d.x+x,d.y+N,s),this.rotate(t,Object.assign(Object.assign({},s),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",s.absolute?t:(h+t)%360,s);return this}getBBox(t={}){if(t.deep){const s=this.getDescendants({deep:!0,breadthFirst:!0});return s.push(this),a.Cell.getCellsBBox(s)}return ie.Rectangle.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,s){const h=this.getBBox(),m=h.getCenter(),d=t.getTerminal(s);if(d==null)return m;const v=d.port;if(!v||!this.hasPort(v))return m;const x=this.getPort(v);if(!x||!x.group)return m;const F=this.getPortsPosition(x.group)[v].position,ae=ie.Point.create(F).translate(h.getOrigin()),$=this.getAngle();return $&&ae.rotate(-$,m),ae}fit(t={}){const h=(this.getChildren()||[]).filter(F=>F.isNode());if(h.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&h.forEach(F=>F.fit(t));let{x:m,y:d,width:v,height:x}=a.Cell.getCellsBBox(h);const N=T.NumberExt.normalizeSides(t.padding);return m-=N.left,d-=N.top,v+=N.left+N.right,x+=N.bottom+N.top,this.store.set({position:{x:m,y:d},size:{width:v,height:x}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||u.Markup.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,s={}){return this.store.set("portContainerMarkup",u.Markup.clone(t),s),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||u.Markup.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,s={}){return this.store.set("portMarkup",u.Markup.clone(t),s),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||u.Markup.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,s={}){return this.store.set("portLabelMarkup",u.Markup.clone(t),s),this}get ports(){const t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}getPorts(){return T.ObjectExt.cloneDeep(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(s=>s.group===t)}getPort(t){return T.ObjectExt.cloneDeep(this.ports.items.find(s=>s.id&&s.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return this.getPortIndex(t)!==-1}getPortIndex(t){const s=typeof t=="string"?t:t.id;return s!=null?this.ports.items.findIndex(h=>h.id===s):-1}getPortsPosition(t){const s=this.getSize();return this.port.getPortsLayoutByGroup(t,new ie.Rectangle(0,0,s.width,s.height)).reduce((m,d)=>{const v=d.portLayout;return m[d.portId]={position:Object.assign({},v.position),angle:v.angle||0},m},{})}getPortProp(t,s){return this.getPropByPath(this.prefixPortPath(t,s))}setPortProp(t,s,h,m){if(typeof s=="string"||Array.isArray(s)){const x=this.prefixPortPath(t,s),N=h;return this.setPropByPath(x,N,m)}const d=this.prefixPortPath(t),v=s;return this.setPropByPath(d,v,h)}removePortProp(t,s,h){return typeof s=="string"||Array.isArray(s)?this.removePropByPath(this.prefixPortPath(t,s),h):this.removePropByPath(this.prefixPortPath(t),s)}portProp(t,s,h,m){return s==null?this.getPortProp(t):typeof s=="string"||Array.isArray(s)?arguments.length===2?this.getPortProp(t,s):h==null?this.removePortProp(t,s,m):this.setPortProp(t,s,h,m):this.setPortProp(t,s,h)}prefixPortPath(t,s){const h=this.getPortIndex(t);if(h===-1)throw new Error(`Unable to find port with id: "${t}"`);return s==null||s===""?["ports","items",`${h}`]:Array.isArray(s)?["ports","items",`${h}`,...s]:`ports/items/${h}/${s}`}addPort(t,s){const h=[...this.ports.items];return h.push(t),this.setPropByPath("ports/items",h,s),this}addPorts(t,s){return this.setPropByPath("ports/items",[...this.ports.items,...t],s),this}insertPort(t,s,h){const m=[...this.ports.items];return m.splice(t,0,s),this.setPropByPath("ports/items",m,h),this}removePort(t,s={}){return this.removePortAt(this.getPortIndex(t),s)}removePortAt(t,s={}){if(t>=0){const h=[...this.ports.items];h.splice(t,1),s.rewrite=!0,this.setPropByPath("ports/items",h,s)}return this}removePorts(t,s){let h;if(Array.isArray(t)){if(h=s||{},t.length){h.rewrite=!0;const d=[...this.ports.items].filter(v=>!t.some(x=>{const N=typeof x=="string"?x:x.id;return v.id===N}));this.setPropByPath("ports/items",d,h)}}else h=t||{},h.rewrite=!0,this.setPropByPath("ports/items",[],h);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,s){return this.port.getPortsLayoutByGroup(t,s)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const t=this.ports,s={};t.items.forEach(v=>{v.id&&(s[v.id]=!0)});const h={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(v=>{v.id&&!s[v.id]&&(h[v.id]=!0)});const d=this.model;d&&!T.ObjectExt.isEmpty(h)&&(d.getConnectedEdges(this,{incoming:!0}).forEach(N=>{const F=N.getTargetPortId();F&&h[F]&&N.remove()}),d.getConnectedEdges(this,{outgoing:!0}).forEach(N=>{const F=N.getSourcePortId();F&&h[F]&&N.remove()}))}validatePorts(){const t={},s=[];return this.ports.items.forEach(h=>{typeof h!="object"&&s.push(`Invalid port ${h}.`),h.id==null&&(h.id=this.generatePortId()),t[h.id]&&s.push("Duplicitied port id."),t[h.id]=!0}),s}generatePortId(){return T.StringExt.uuid()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const s=this.port?this.port.getPorts():null;this.port=new l.PortManager(this.ports);const h=this.port.getPorts(),m=s?h.filter(v=>s.find(x=>x.id===v.id)?null:v):[...h],d=s?s.filter(v=>h.find(x=>x.id===v.id)?null:v):[];m.length>0&&this.notify("ports:added",{added:m,cell:this,node:this}),d.length>0&&this.notify("ports:removed",{removed:d,cell:this,node:this})}}O.Node=r,r.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(e){e.toStringTag=`X6.${e.name}`;function t(s){if(s==null)return!1;if(s instanceof e)return!0;const h=s[Symbol.toStringTag],m=s;return(h==null||h===e.toStringTag)&&typeof m.isNode=="function"&&typeof m.isEdge=="function"&&typeof m.prop=="function"&&typeof m.attr=="function"&&typeof m.size=="function"&&typeof m.position=="function"}e.isNode=t}(r=O.Node||(O.Node={})),function(e){e.config({propHooks(t){var{ports:s}=t,h=J(t,["ports"]);return s&&(h.ports=Array.isArray(s)?{items:s}:s),h}})}(r=O.Node||(O.Node={})),function(e){e.registry=b.Registry.create({type:"node",process(t,s){if(o.ShareRegistry.exist(t,!0))throw new Error(`Node with name '${t}' was registered by anthor Edge`);if(typeof s=="function")return s.config({shape:t}),s;let h=e;const{inherit:m}=s,d=J(s,["inherit"]);if(m)if(typeof m=="string"){const x=this.get(m);x==null?this.onNotFound(m,"inherited"):h=x}else h=m;d.constructorName==null&&(d.constructorName=t);const v=h.define.call(h,d);return v.config({shape:t}),v}}),o.ShareRegistry.setNodeRegistry(e.registry)}(r=O.Node||(O.Node={})),function(e){let t=0;function s(d){return d?T.StringExt.pascalCase(d):(t+=1,`CustomNode${t}`)}function h(d){const{constructorName:v,overwrite:x}=d,N=J(d,["constructorName","overwrite"]),F=T.ObjectExt.createClass(s(v||N.shape),this);return F.config(N),N.shape&&e.registry.register(N.shape,F,x),F}e.define=h;function m(d){const v=d.shape||"rect",x=e.registry.get(v);return x?new x(d):e.registry.onNotFound(v)}e.create=m}(r=O.Node||(O.Node={}))},48652:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.PortManager=void 0;const J=V(35695),ie=V(62595),T=V(22608);class b{constructor(a){this.ports=[],this.groups={},this.init(J.ObjectExt.cloneDeep(a))}getPorts(){return this.ports}getGroup(a){return a!=null?this.groups[a]:null}getPortsByGroup(a){return this.ports.filter(o=>o.group===a||o.group==null&&a==null)}getPortsLayoutByGroup(a,o){const l=this.getPortsByGroup(a),r=a?this.getGroup(a):null,e=r?r.position:null,t=e?e.name:null;let s;if(t!=null){const v=T.PortLayout.registry.get(t);if(v==null)return T.PortLayout.registry.onNotFound(t);s=v}else s=T.PortLayout.presets.left;const h=l.map(v=>v&&v.position&&v.position.args||{}),m=e&&e.args||{};return s(h,o,m).map((v,x)=>{const N=l[x];return{portLayout:v,portId:N.id,portSize:N.size,portAttrs:N.attrs,labelSize:N.label.size,labelLayout:this.getPortLabelLayout(N,ie.Point.create(v.position),o)}})}init(a){const{groups:o,items:l}=a;o!=null&&Object.keys(o).forEach(r=>{this.groups[r]=this.parseGroup(o[r])}),Array.isArray(l)&&l.forEach(r=>{this.ports.push(this.parsePort(r))})}parseGroup(a){return Object.assign(Object.assign({},a),{label:this.getLabel(a,!0),position:this.getPortPosition(a.position,!0)})}parsePort(a){const o=Object.assign({},a),l=this.getGroup(a.group)||{};return o.markup=o.markup||l.markup,o.attrs=J.ObjectExt.merge({},l.attrs,o.attrs),o.position=this.createPosition(l,o),o.label=J.ObjectExt.merge({},l.label,this.getLabel(o)),o.zIndex=this.getZIndex(l,o),o.size=Object.assign(Object.assign({},l.size),o.size),o}getZIndex(a,o){return typeof o.zIndex=="number"?o.zIndex:typeof a.zIndex=="number"||a.zIndex==="auto"?a.zIndex:"auto"}createPosition(a,o){return J.ObjectExt.merge({name:"left",args:{}},a.position,{args:o.args})}getPortPosition(a,o=!1){if(a==null){if(o)return{name:"left",args:{}}}else{if(typeof a=="string")return{name:a,args:{}};if(Array.isArray(a))return{name:"absolute",args:{x:a[0],y:a[1]}};if(typeof a=="object")return a}return{args:{}}}getPortLabelPosition(a,o=!1){if(a==null){if(o)return{name:"left",args:{}}}else{if(typeof a=="string")return{name:a,args:{}};if(typeof a=="object")return a}return{args:{}}}getLabel(a,o=!1){const l=a.label||{};return l.position=this.getPortLabelPosition(l.position,o),l}getPortLabelLayout(a,o,l){const r=a.label.position.name||"left",e=a.label.position.args||{},t=T.PortLabelLayout.registry.get(r)||T.PortLabelLayout.presets.left;return t?t(o,l,e):null}}O.PortManager=b},60161:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ShareRegistry=void 0;var V;(function(J){let ie,T;function b(o,l){return l?ie!=null&&ie.exist(o):T!=null&&T.exist(o)}J.exist=b;function u(o){ie=o}J.setEdgeRegistry=u;function a(o){T=o}J.setNodeRegistry=a})(V=O.ShareRegistry||(O.ShareRegistry={}))},23265:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(b,u,a,o){var l=arguments.length,r=l<3?u:o===null?o=Object.getOwnPropertyDescriptor(u,a):o,e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(b,u,a,o);else for(var t=b.length-1;t>=0;t--)(e=b[t])&&(r=(l<3?e(r):l>3?e(u,a,r):e(u,a))||r);return l>3&&r&&Object.defineProperty(u,a,r),r};Object.defineProperty(O,"__esModule",{value:!0}),O.Store=void 0;const ie=V(35695);class T extends ie.Basecoat{constructor(u={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(ie.ObjectExt.cloneDeep(u)),this.changed={}}mutate(u,a={}){const o=a.unset===!0,l=a.silent===!0,r=[],e=this.changing;this.changing=!0,e||(this.previous=ie.ObjectExt.cloneDeep(this.data),this.changed={});const t=this.data,s=this.previous,h=this.changed;if(Object.keys(u).forEach(m=>{const d=m,v=u[d];ie.ObjectExt.isEqual(t[d],v)||r.push(d),ie.ObjectExt.isEqual(s[d],v)?delete h[d]:h[d]=v,o?delete t[d]:t[d]=v}),!l&&r.length>0&&(this.pending=!0,this.pendingOptions=a,r.forEach(m=>{this.emit("change:*",{key:m,options:a,store:this,current:t[m],previous:s[m]})})),e)return this;if(!l)for(;this.pending;)this.pending=!1,this.emit("changed",{current:t,previous:s,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(u,a){if(u==null)return this.data;const o=this.data[u];return o==null?a:o}getPrevious(u){if(this.previous){const a=this.previous[u];return a==null?void 0:a}}set(u,a,o){return u!=null&&(typeof u=="object"?this.mutate(u,a):this.mutate({[u]:a},o)),this}remove(u,a){const l={};let r;if(typeof u=="string")l[u]=void 0,r=a;else if(Array.isArray(u))u.forEach(e=>l[e]=void 0),r=a;else{for(const e in this.data)l[e]=void 0;r=u}return this.mutate(l,Object.assign(Object.assign({},r),{unset:!0})),this}getByPath(u){return ie.ObjectExt.getByPath(this.data,u,"/")}setByPath(u,a,o={}){const l="/",r=Array.isArray(u)?[...u]:u.split(l),e=Array.isArray(u)?u.join(l):u,t=r[0],s=r.length;if(o.propertyPath=e,o.propertyValue=a,o.propertyPathArray=r,s===1)this.set(t,a,o);else{const h={};let m=h,d=t;for(let N=1;N<s;N+=1){const F=r[N],ae=Number.isFinite(Number(F));m=m[d]=ae?[]:{},d=F}ie.ObjectExt.setByPath(h,r,a,l);const v=ie.ObjectExt.cloneDeep(this.data);o.rewrite&&ie.ObjectExt.unsetByPath(v,u,l);const x=ie.ObjectExt.merge(v,h);this.set(t,x[t],o)}return this}removeByPath(u,a){const o=Array.isArray(u)?u:u.split("/"),l=o[0];if(o.length===1)this.remove(l,a);else{const r=o.slice(1),e=ie.ObjectExt.cloneDeep(this.get(l));e&&ie.ObjectExt.unsetByPath(e,r),this.set(l,e,a)}return this}hasChanged(u){return u==null?Object.keys(this.changed).length>0:u in this.changed}getChanges(u){if(u==null)return this.hasChanged()?ie.ObjectExt.cloneDeep(this.changed):null;const a=this.changing?this.previous:this.data,o={};let l;for(const r in u){const e=u[r];ie.ObjectExt.isEqual(a[r],e)||(o[r]=e,l=!0)}return l?ie.ObjectExt.cloneDeep(o):null}toJSON(){return ie.ObjectExt.cloneDeep(this.data)}clone(){const u=this.constructor;return new u(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}J([ie.Basecoat.dispose()],T.prototype,"dispose",null),O.Store=T},37037:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.resetOffset=O.yAlign=O.xAlign=void 0;const J=V(35695),ie=V(62595);O.xAlign={offset:T("x","width","right")},O.yAlign={offset:T("y","height","bottom")},O.resetOffset={offset(b,{refBBox:u}){return b?{x:-u.x,y:-u.y}:{x:0,y:0}}};function T(b,u,a){return(o,{refBBox:l})=>{const r=new ie.Point;let e;return o==="middle"?e=l[u]/2:o===a?e=l[u]:typeof o=="number"&&Number.isFinite(o)?e=o>-1&&o<1?-l[u]*o:-o:J.NumberExt.isPercentage(o)?e=l[u]*parseFloat(o)/100:e=0,r[b]=-(l[b]+e),r}}},95770:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.atConnectionRatio=O.atConnectionLength=O.atConnectionRatioIgnoreGradient=O.atConnectionRatioKeepGradient=O.atConnectionLengthIgnoreGradient=O.atConnectionLengthKeepGradient=O.connection=void 0;const V=(ie,{view:T})=>T.cell.isEdge();O.connection={qualify:V,set(ie,T){var b,u,a,o;const l=T.view,r=ie.reverse||!1,e=ie.stubs||0;let t;if(Number.isFinite(e)&&e!==0)if(r){let s,h;const m=l.getConnectionLength()||0;e<0?(s=(m+e)/2,h=-e):(s=e,h=m-e*2);const d=l.getConnection();t=(o=(a=(u=(b=d==null?void 0:d.divideAtLength(s))===null||b===void 0?void 0:b[1])===null||u===void 0?void 0:u.divideAtLength(h))===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.serialize()}else{let s;e<0?s=((l.getConnectionLength()||0)+e)/2:s=e;const h=l.getConnection();if(h){const m=h.divideAtLength(s),d=h.divideAtLength(-s);m&&d&&(t=`${m[0].serialize()} ${d[1].serialize()}`)}}return{d:t||l.getConnectionPathData()}}},O.atConnectionLengthKeepGradient={qualify:V,set:J("getTangentAtLength",{rotate:!0})},O.atConnectionLengthIgnoreGradient={qualify:V,set:J("getTangentAtLength",{rotate:!1})},O.atConnectionRatioKeepGradient={qualify:V,set:J("getTangentAtRatio",{rotate:!0})},O.atConnectionRatioIgnoreGradient={qualify:V,set:J("getTangentAtRatio",{rotate:!1})},O.atConnectionLength=O.atConnectionLengthKeepGradient,O.atConnectionRatio=O.atConnectionRatioKeepGradient;function J(ie,T){const b={x:1,y:0};return(u,a)=>{let o,l;const r=a.view,e=r[ie](Number(u));return e?(l=T.rotate?e.vector().vectorAngle(b):0,o=e.start):(o=r.path.start,l=0),l===0?{transform:`translate(${o.x},${o.y}')`}:{transform:`translate(${o.x},${o.y}') rotate(${l})`}}}},39434:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.fill=void 0;const J=V(35695);O.fill={qualify:J.ObjectExt.isPlainObject,set(ie,{view:T}){return`url(#${T.graph.defineGradient(ie)})`}}},36308:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.filter=void 0;const J=V(35695);O.filter={qualify:J.ObjectExt.isPlainObject,set(ie,{view:T}){return`url(#${T.graph.defineFilter(ie)})`}}},94077:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.html=void 0,O.html={set(V,{elem:J}){J.innerHTML=`${V}`}}},89042:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t);var h=Object.getOwnPropertyDescriptor(e,t);(!h||("get"in h?!e.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,s,h)}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),ie=this&&this.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),T=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&J(e,r,t);return ie(e,r),e};Object.defineProperty(O,"__esModule",{value:!0}),O.Attr=void 0;const b=V(35695),u=V(77403),a=V(8236),o=T(V(41809));var l;(function(r){function e(t,s,h){return!!(t!=null&&(typeof t=="string"||typeof t.qualify!="function"||b.FunctionExt.call(t.qualify,this,s,h)))}r.isValidDefinition=e})(l=O.Attr||(O.Attr={})),function(r){r.presets=Object.assign(Object.assign({},a.raw),o),r.registry=u.Registry.create({type:"attribute definition"}),r.registry.register(r.presets,!0)}(l=O.Attr||(O.Attr={}))},41809:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(15263),O),ie(V(39434),O),ie(V(14262),O),ie(V(26019),O),ie(V(58500),O),ie(V(37037),O),ie(V(87599),O),ie(V(94077),O),ie(V(36308),O),ie(V(57078),O),ie(V(94213),O),ie(V(95770),O)},94213:function(bt,O,V){"use strict";var J=this&&this.__rest||function(o,l){var r={};for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&l.indexOf(e)<0&&(r[e]=o[e]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(o);t<e.length;t++)l.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(o,e[t])&&(r[e[t]]=o[e[t]]);return r};Object.defineProperty(O,"__esModule",{value:!0}),O.vertexMarker=O.targetMarker=O.sourceMarker=void 0;const ie=V(35695),T=V(39804);function b(o){return typeof o=="string"||ie.ObjectExt.isPlainObject(o)}O.sourceMarker={qualify:b,set(o,{view:l,attrs:r}){return u("marker-start",o,l,r)}},O.targetMarker={qualify:b,set(o,{view:l,attrs:r}){return u("marker-end",o,l,r,{transform:"rotate(180)"})}},O.vertexMarker={qualify:b,set(o,{view:l,attrs:r}){return u("marker-mid",o,l,r)}};function u(o,l,r,e,t={}){const s=typeof l=="string"?{name:l}:l,{name:h,args:m}=s,d=J(s,["name","args"]);let v=d;if(h&&typeof h=="string"){const N=T.Marker.registry.get(h);if(N)v=N(Object.assign(Object.assign({},d),m));else return T.Marker.registry.onNotFound(h)}const x=Object.assign(Object.assign(Object.assign({},a(e,o)),t),v);return{[o]:`url(#${r.graph.defineMarker(x)})`}}function a(o,l){const r={},e=o.stroke;typeof e=="string"&&(r.stroke=e,r.fill=e);let t=o.strokeOpacity;if(t==null&&(t=o["stroke-opacity"]),t==null&&(t=o.opacity),t!=null&&(r["stroke-opacity"]=t,r["fill-opacity"]=t),l!=="marker-mid"){const s=parseFloat(o.strokeWidth||o["stroke-width"]);if(Number.isFinite(s)&&s>1){const h=Math.ceil(s/2);r.refX=l==="marker-start"?h:-h}}return r}},57078:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.port=void 0,O.port={set(V){return V!=null&&typeof V=="object"&&V.id?V.id:V}}},8236:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.raw=void 0,O.raw={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"}},15263:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.refHeight2=O.refWidth2=O.refY2=O.refX2=O.refPoints=O.refD=O.refR=O.refPointsKeepOffset=O.refPointsResetOffset=O.refDKeepOffset=O.refDResetOffset=O.refCy=O.refCx=O.refRCircumscribed=O.refRInscribed=O.refRy=O.refRx=O.refHeight=O.refWidth=O.refDy=O.refDx=O.refY=O.refX=O.ref=void 0;const J=V(62595),ie=V(35695);O.ref={},O.refX={position:T("x","width","origin")},O.refY={position:T("y","height","origin")},O.refDx={position:T("x","width","corner")},O.refDy={position:T("y","height","corner")},O.refWidth={set:b("width","width")},O.refHeight={set:b("height","height")},O.refRx={set:b("rx","width")},O.refRy={set:b("ry","height")},O.refRInscribed={set:(l=>{const r=b(l,"width"),e=b(l,"height");return function(t,s){const h=s.refBBox,m=h.height>h.width?r:e;return ie.FunctionExt.call(m,this,t,s)}})("r")},O.refRCircumscribed={set(l,{refBBox:r}){let e=parseFloat(l);const t=ie.NumberExt.isPercentage(l);t&&(e/=100);const s=Math.sqrt(r.height*r.height+r.width*r.width);let h;return Number.isFinite(e)&&(t||e>=0&&e<=1?h=e*s:h=Math.max(e+s,0)),{r:h}}},O.refCx={set:b("cx","width")},O.refCy={set:b("cy","height")},O.refDResetOffset={set:a({resetOffset:!0})},O.refDKeepOffset={set:a({resetOffset:!1})},O.refPointsResetOffset={set:o({resetOffset:!0})},O.refPointsKeepOffset={set:o({resetOffset:!1})},O.refR=O.refRInscribed,O.refD=O.refDResetOffset,O.refPoints=O.refPointsResetOffset,O.refX2=O.refX,O.refY2=O.refY,O.refWidth2=O.refWidth,O.refHeight2=O.refHeight;function T(l,r,e){return(t,{refBBox:s})=>{if(t==null)return null;let h=parseFloat(t);const m=ie.NumberExt.isPercentage(t);m&&(h/=100);let d;if(Number.isFinite(h)){const x=s[e];m||h>0&&h<1?d=x[l]+s[r]*h:d=x[l]+h}const v=new J.Point;return v[l]=d||0,v}}function b(l,r){return function(e,{refBBox:t}){let s=parseFloat(e);const h=ie.NumberExt.isPercentage(e);h&&(s/=100);const m={};if(Number.isFinite(s)){const d=h||s>=0&&s<=1?s*t[r]:Math.max(s+t[r],0);m[l]=d}return m}}function u(l,r){const e="x6-shape",t=r&&r.resetOffset;return function(s,{elem:h,refBBox:m}){let d=ie.Dom.data(h,e);if(!d||d.value!==s){const fe=l(s);d={value:s,shape:fe,shapeBBox:fe.bbox()},ie.Dom.data(h,e,d)}const v=d.shape.clone(),x=d.shapeBBox.clone(),N=x.getOrigin(),F=m.getOrigin();x.x=F.x,x.y=F.y;const ae=m.getMaxScaleToFit(x,F),$=x.width===0||m.width===0?1:ae.sx,te=x.height===0||m.height===0?1:ae.sy;return v.scale($,te,N),t&&v.translate(-N.x,-N.y),v}}function a(l){function r(t){return J.Path.parse(t)}const e=u(r,l);return(t,s)=>({d:e(t,s).serialize()})}function o(l){const r=u(e=>new J.Polyline(e),l);return(e,t)=>({points:r(e,t).serialize()})}},14262:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.stroke=void 0;const J=V(35695);O.stroke={qualify:J.ObjectExt.isPlainObject,set(ie,{view:T}){const b=T.cell,u=Object.assign({},ie);if(b.isEdge()&&u.type==="linearGradient"){const a=T,o=a.sourcePoint,l=a.targetPoint;u.id=`gradient-${u.type}-${b.id}`,u.attrs=Object.assign(Object.assign({},u.attrs),{x1:o.x,y1:o.y,x2:l.x,y2:l.y,gradientUnits:"userSpaceOnUse"}),T.graph.defs.remove(u.id)}return`url(#${T.graph.defineGradient(u)})`}}},87599:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.style=void 0;const J=V(35695);O.style={qualify:J.ObjectExt.isPlainObject,set(ie,{elem:T}){J.Dom.css(T,ie)}}},26019:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.displayEmpty=O.eol=O.annotations=O.textPath=O.textVerticalAnchor=O.lineHeight=O.textWrap=O.text=void 0;const J=V(35695);O.text={qualify(T,{attrs:b}){return b.textWrap==null||!J.ObjectExt.isPlainObject(b.textWrap)},set(T,{view:b,elem:u,attrs:a}){const o="x6-text",l=J.Dom.data(u,o),r=h=>{try{return JSON.parse(h)}catch(m){return h}},e={x:a.x,eol:a.eol,annotations:r(a.annotations),textPath:r(a["text-path"]||a.textPath),textVerticalAnchor:a["text-vertical-anchor"]||a.textVerticalAnchor,displayEmpty:(a["display-empty"]||a.displayEmpty)==="true",lineHeight:a["line-height"]||a.lineHeight},t=a["font-size"]||a.fontSize,s=JSON.stringify([T,e]);if(t&&u.setAttribute("font-size",t),l==null||l!==s){const h=e.textPath;if(h!=null&&typeof h=="object"){const m=h.selector;if(typeof m=="string"){const d=b.find(m)[0];d instanceof SVGPathElement&&(J.Dom.ensureId(d),e.textPath=Object.assign({"xlink:href":`#${d.id}`},h))}}J.Dom.text(u,`${T}`,e),J.Dom.data(u,o,s)}}},O.textWrap={qualify:J.ObjectExt.isPlainObject,set(T,{view:b,elem:u,attrs:a,refBBox:o}){const l=T,r=l.width||0;J.NumberExt.isPercentage(r)?o.width*=parseFloat(r)/100:r<=0?o.width+=r:o.width=r;const e=l.height||0;J.NumberExt.isPercentage(e)?o.height*=parseFloat(e)/100:e<=0?o.height+=e:o.height=e;let t,s=l.text;s==null&&(s=a.text||(u==null?void 0:u.textContent)),s!=null?t=J.Dom.breakText(`${s}`,o,{"font-weight":a["font-weight"]||a.fontWeight,"font-size":a["font-size"]||a.fontSize,"font-family":a["font-family"]||a.fontFamily,lineHeight:a.lineHeight},{ellipsis:l.ellipsis}):t="",J.FunctionExt.call(O.text.set,this,t,{view:b,elem:u,attrs:a,refBBox:o,cell:b.cell})}};const ie=(T,{attrs:b})=>b.text!==void 0;O.lineHeight={qualify:ie},O.textVerticalAnchor={qualify:ie},O.textPath={qualify:ie},O.annotations={qualify:ie},O.eol={qualify:ie},O.displayEmpty={qualify:ie}},58500:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.title=void 0;const J=V(35695);O.title={qualify(ie,{elem:T}){return T instanceof SVGElement},set(ie,{elem:T}){const b="x6-title",u=`${ie}`,a=J.Dom.data(T,b);if(a==null||a!==u){J.Dom.data(T,b,u);const o=T.firstChild;if(o&&o.tagName.toUpperCase()==="TITLE"){const l=o;l.textContent=u}else{const l=document.createElementNS(T.namespaceURI,"title");l.textContent=u,T.insertBefore(l,o)}}}}},7393:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.flipX=void 0;const V=function(J){const ie=document.createElement("canvas"),T=J.width,b=J.height;ie.width=T*2,ie.height=b;const u=ie.getContext("2d");return u.drawImage(J,0,0,T,b),u.translate(2*T,0),u.scale(-1,1),u.drawImage(J,0,0,T,b),ie};O.flipX=V},23322:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.flipXY=void 0;const V=function(J){const ie=document.createElement("canvas"),T=J.width,b=J.height;ie.width=2*T,ie.height=2*b;const u=ie.getContext("2d");return u.drawImage(J,0,0,T,b),u.setTransform(-1,0,0,-1,ie.width,ie.height),u.drawImage(J,0,0,T,b),u.setTransform(-1,0,0,1,ie.width,0),u.drawImage(J,0,0,T,b),u.setTransform(1,0,0,-1,0,ie.height),u.drawImage(J,0,0,T,b),ie};O.flipXY=V},15826:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.flipY=void 0;const V=function(J){const ie=document.createElement("canvas"),T=J.width,b=J.height;ie.width=T,ie.height=b*2;const u=ie.getContext("2d");return u.drawImage(J,0,0,T,b),u.translate(0,2*b),u.scale(1,-1),u.drawImage(J,0,0,T,b),ie};O.flipY=V},68458:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.Background=void 0;const b=V(77403),u=T(V(33986));var a;(function(o){o.presets=Object.assign({},u),o.presets["flip-x"]=u.flipX,o.presets["flip-y"]=u.flipY,o.presets["flip-xy"]=u.flipXY,o.registry=b.Registry.create({type:"background pattern"}),o.registry.register(o.presets,!0)})(a=O.Background||(O.Background={}))},33986:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(7393),O),ie(V(15826),O),ie(V(23322),O),ie(V(90911),O)},90911:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.watermark=void 0;const J=V(62595),ie=function(T,b){const u=T.width,a=T.height,o=document.createElement("canvas");o.width=u*3,o.height=a*3;const l=o.getContext("2d"),r=b.angle!=null?-b.angle:-20,e=J.Angle.toRad(r),t=o.width/4,s=o.height/4;for(let h=0;h<4;h+=1)for(let m=0;m<4;m+=1)(h+m)%2>0&&(l.setTransform(1,0,0,1,(2*h-1)*t,(2*m-1)*s),l.rotate(e),l.drawImage(T,-u/2,-a/2,u,a));return o};O.watermark=ie},23208:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.anchor=void 0;const J=V(20296);function ie(b,u,a=0){const{start:o,end:l}=b;let r,e,t,s;switch(u){case"left":s="x",r=l,e=o,t=-1;break;case"right":s="x",r=o,e=l,t=1;break;case"top":s="y",r=l,e=o,t=-1;break;case"bottom":s="y",r=o,e=l,t=1;break;default:return}o[s]<l[s]?r[s]=e[s]:e[s]=r[s],Number.isFinite(a)&&(r[s]+=t*a,e[s]+=t*a)}const T=function(b,u,a,o){const{alignOffset:l,align:r}=o;return r&&ie(b,r,l),(0,J.offset)(b.end,b.start,o.offset)};O.anchor=T},54991:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.bbox=void 0;const J=V(20296),ie=function(T,b,u,a){const o=b.getBBoxOfElement(u);a.stroked&&o.inflate((0,J.getStrokeWidth)(u)/2);const l=T.intersect(o),r=l&&l.length?T.start.closest(l):T.end;return(0,J.offset)(r,T.start,a.offset)};O.bbox=ie},43349:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.boundary=void 0;const J=V(35695),ie=V(62595),T=V(20296),b=V(56994),u=function(a,o,l,r){let e,t;const s=a.end,h=r.selector;if(typeof h=="string"?e=o.findOne(h):Array.isArray(h)?e=J.ObjectExt.getByPath(l,h):e=(0,T.findShapeNode)(l),!J.Dom.isSVGGraphicsElement(e)){if(e===l||!J.Dom.isSVGGraphicsElement(l))return s;e=l}const m=o.getShapeOfElement(e),d=o.getMatrixOfElement(e),v=o.getRootTranslatedMatrix(),x=o.getRootRotatedMatrix(),N=v.multiply(x).multiply(d),F=N.inverse(),ae=b.Util.transformLine(a,F),$=ae.start.clone(),te=o.getDataOfElement(e);if(r.insideout===!1){te.shapeBBox==null&&(te.shapeBBox=m.bbox());const z=te.shapeBBox;if(z!=null&&z.containsPoint($))return s}r.extrapolate===!0&&ae.setLength(1e6);let fe;if(ie.Path.isPath(m)){const z=r.precision||2;te.segmentSubdivisions==null&&(te.segmentSubdivisions=m.getSegmentSubdivisions({precision:z})),fe={precision:z,segmentSubdivisions:te.segmentSubdivisions},t=ae.intersect(m,fe)}else t=ae.intersect(m);t?Array.isArray(t)&&(t=$.closest(t)):r.sticky===!0&&(ie.Rectangle.isRectangle(m)?t=m.getNearestPointToPoint($):ie.Ellipse.isEllipse(m)?t=m.intersectsWithLineFromCenterToPoint($):t=m.closestPoint($,fe));const B=t?b.Util.transformPoint(t,N):s;let he=r.offset||0;return r.stroked!==!1&&(typeof he=="object"?(he=Object.assign({},he),he.x==null&&(he.x=0),he.x+=(0,T.getStrokeWidth)(e)/2):he+=(0,T.getStrokeWidth)(e)/2),(0,T.offset)(B,a.start,he)};O.boundary=u},75200:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.ConnectionPoint=void 0;const b=V(77403),u=T(V(37428));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"connection point"}),o.registry.register(o.presets,!0)})(a=O.ConnectionPoint||(O.ConnectionPoint={}))},37428:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(54991),O),ie(V(46684),O),ie(V(43349),O),ie(V(23208),O)},46684:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.rect=void 0;const J=V(35695),ie=V(54991),T=V(20296),b=function(u,a,o,l,r){const e=a.cell,t=e.isNode()?e.getAngle():0;if(t===0)return J.FunctionExt.call(ie.bbox,this,u,a,o,l,r);const s=a.getUnrotatedBBoxOfElement(o);l.stroked&&s.inflate((0,T.getStrokeWidth)(o)/2);const h=s.getCenter(),m=u.clone().rotate(t,h),d=m.setLength(1e6).intersect(s),v=d&&d.length?m.start.closest(d).rotate(-t,h):u.end;return(0,T.offset)(v,u.start,l.offset)};O.rect=b},20296:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.findShapeNode=O.getStrokeWidth=O.offset=void 0;const J=V(62595);function ie(u,a,o){let l;if(typeof o=="object"){if(Number.isFinite(o.y)){const e=new J.Line(a,u),{start:t,end:s}=e.parallel(o.y);a=t,u=s}l=o.x}else l=o;if(l==null||!Number.isFinite(l))return u;const r=u.distance(a);return l===0&&r>0?u:u.move(a,-Math.min(l,r-1))}O.offset=ie;function T(u){const a=u.getAttribute("stroke-width");return a===null?0:parseFloat(a)||0}O.getStrokeWidth=T;function b(u){if(u==null)return null;let a=u;do{let o=a.tagName;if(typeof o!="string")return null;if(o=o.toUpperCase(),o==="G")a=a.firstElementChild;else if(o==="TITLE")a=a.nextElementSibling;else break}while(a);return a}O.findShapeNode=b},80703:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.ConnectionStrategy=void 0;const b=V(77403),u=T(V(46303));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"connection strategy"}),o.registry.register(o.presets,!0)})(a=O.ConnectionStrategy||(O.ConnectionStrategy={}))},46303:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(24440),O),ie(V(36641),O)},24440:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.noop=void 0;const V=J=>J;O.noop=V},36641:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.pinAbsolute=O.pinRelative=void 0;const J=V(62595);function ie(a,o){return o===0?"0%":`${Math.round(a/o*100)}%`}function T(a){return(l,r,e,t)=>r.isEdgeElement(e)?u(a,l,r,e,t):b(a,l,r,e,t)}function b(a,o,l,r,e){const t=l.cell,s=t.getAngle(),h=l.getUnrotatedBBoxOfElement(r),m=t.getBBox().getCenter(),d=J.Point.create(e).rotate(s,m);let v=d.x-h.x,x=d.y-h.y;return a&&(v=ie(v,h.width),x=ie(x,h.height)),o.anchor={name:"topLeft",args:{dx:v,dy:x,rotate:!0}},o}function u(a,o,l,r,e){const t=l.getConnection();if(!t)return o;const s=t.closestPointLength(e);if(a){const h=t.length();o.anchor={name:"ratio",args:{ratio:s/h}}}else o.anchor={name:"length",args:{length:s}};return o}O.pinRelative=T(!0),O.pinAbsolute=T(!1)},84287:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.Connector=void 0;const b=V(77403),u=T(V(45081));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"connector"}),o.registry.register(o.presets,!0)})(a=O.Connector||(O.Connector={}))},16573:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.jumpover=void 0;const J=V(62595),ie=1,T=1/3,b=2/3;function u(d){let v=d.graph._jumpOverUpdateList;if(v==null&&(v=d.graph._jumpOverUpdateList=[],d.graph.on("cell:mouseup",()=>{const x=d.graph._jumpOverUpdateList;setTimeout(()=>{for(let N=0;N<x.length;N+=1)x[N].update()})}),d.graph.on("model:reseted",()=>{v=d.graph._jumpOverUpdateList=[]})),v.indexOf(d)<0){v.push(d);const x=()=>v.splice(v.indexOf(d),1);d.cell.once("change:connector",x),d.cell.once("removed",x)}}function a(d,v,x=[]){const N=[d,...x,v],F=[];return N.forEach((ae,$)=>{const te=N[$+1];te!=null&&F.push(new J.Line(ae,te))}),F}function o(d,v){const x=[];return v.forEach(N=>{const F=d.intersectsWithLine(N);F&&x.push(F)}),x}function l(d,v){return new J.Line(d,v).squaredLength()}function r(d,v,x){return v.reduce((N,F,ae)=>{if(h.includes(F))return N;const $=N.pop()||d,te=J.Point.create(F).move($.start,-x);let fe=J.Point.create(F).move($.start,+x);const B=v[ae+1];if(B!=null){const ee=fe.distance(B);ee<=x&&(fe=B.move($.start,ee),h.push(B))}else if(te.distance($.end)<x*2+ie)return N.push($),N;if(fe.distance($.start)<x*2+ie)return N.push($),N;const z=new J.Line(te,fe);return s.push(z),N.push(new J.Line($.start,te),z,new J.Line(fe,$.end)),N},[])}function e(d,v,x,N){const F=new J.Path;let ae;return ae=J.Path.createSegment("M",d[0].start),F.appendSegment(ae),d.forEach(($,te)=>{if(s.includes($)){let fe,B,he,z;if(x==="arc"){fe=-90,B=$.start.diff($.end),(B.x<0||B.x===0&&B.y<0)&&(fe+=180);const pe=$.getCenter(),S=new J.Line(pe,$.end).rotate(fe,pe);let q;q=new J.Line($.start,pe),he=q.pointAt(2/3).rotate(fe,$.start),z=S.pointAt(1/3).rotate(-fe,S.end),ae=J.Path.createSegment("C",he,z,S.end),F.appendSegment(ae),q=new J.Line(pe,$.end),he=S.pointAt(1/3).rotate(fe,S.end),z=q.pointAt(1/3).rotate(-fe,$.end),ae=J.Path.createSegment("C",he,z,$.end),F.appendSegment(ae)}else if(x==="gap")ae=J.Path.createSegment("M",$.end),F.appendSegment(ae);else if(x==="cubic"){fe=$.start.theta($.end);const ee=v*.6;let pe=v*1.35;B=$.start.diff($.end),(B.x<0||B.x===0&&B.y<0)&&(pe*=-1),he=new J.Point($.start.x+ee,$.start.y+pe).rotate(fe,$.start),z=new J.Point($.end.x-ee,$.end.y+pe).rotate(fe,$.end),ae=J.Path.createSegment("C",he,z,$.end),F.appendSegment(ae)}}else{const fe=d[te+1];N===0||!fe||s.includes(fe)?(ae=J.Path.createSegment("L",$.end),F.appendSegment(ae)):t(N,F,$.end,$.start,fe.end)}}),F}function t(d,v,x,N,F){const ae=x.distance(N)/2,$=x.distance(F)/2,te=-Math.min(d,ae),fe=-Math.min(d,$),B=x.clone().move(N,te).round(),he=x.clone().move(F,fe).round(),z=new J.Point(T*B.x+b*x.x,b*x.y+T*B.y),ee=new J.Point(T*he.x+b*x.x,b*x.y+T*he.y);let pe;pe=J.Path.createSegment("L",B),v.appendSegment(pe),pe=J.Path.createSegment("C",z,ee,he),v.appendSegment(pe)}let s,h;const m=function(d,v,x,N={}){s=[],h=[],u(this);const F=N.size||5,ae=N.type||"arc",$=N.radius||0,te=N.ignoreConnectors||["smooth"],fe=this.graph,he=fe.model.getEdges();if(he.length===1)return e(a(d,v,x),F,ae,$);const z=this.cell,ee=he.indexOf(z),pe=fe.options.connecting.connector||{},S=he.filter((se,Ee)=>{const Ce=se.getConnector()||pe;return te.includes(Ce.name)?!1:Ee>ee?Ce.name!=="jumpover":!0}),q=S.map(se=>fe.findViewByCell(se)),M=a(d,v,x),I=q.map(se=>se==null?[]:se===this?M:a(se.sourcePoint,se.targetPoint,se.routePoints)),j=[];M.forEach(se=>{const Ee=S.reduce((Ce,xe,Oe)=>{if(xe!==z){const Le=o(se,I[Oe]);Ce.push(...Le)}return Ce},[]).sort((Ce,xe)=>l(se.start,Ce)-l(se.start,xe));Ee.length>0?j.push(...r(se,Ee,F)):j.push(se)});const ue=e(j,F,ae,$);return s=[],h=[],N.raw?ue:ue.serialize()};O.jumpover=m},62249:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.loop=void 0;const J=V(62595),ie=function(T,b,u,a={}){const o=u.length===3?0:1,l=J.Point.create(u[0+o]),r=J.Point.create(u[2+o]),e=J.Point.create(u[1+o]);if(!J.Point.equals(T,b)){const s=new J.Point((T.x+b.x)/2,(T.y+b.y)/2),h=s.angleBetween(J.Point.create(T).rotate(90,s),e);h>1&&(l.rotate(180-h,s),r.rotate(180-h,s),e.rotate(180-h,s))}const t=`
     M ${T.x} ${T.y}
     Q ${l.x} ${l.y} ${e.x} ${e.y}
     Q ${r.x} ${r.y} ${b.x} ${b.y}
  `;return a.raw?J.Path.parse(t):t};O.loop=ie},45081:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(76474),O),ie(V(62249),O),ie(V(58328),O),ie(V(90147),O),ie(V(16573),O)},76474:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.normal=void 0;const J=V(62595),ie=function(T,b,u,a={}){const o=[T,...u,b],l=new J.Polyline(o),r=new J.Path(l);return a.raw?r:r.serialize()};O.normal=ie},58328:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.rounded=void 0;const J=V(62595),ie=function(T,b,u,a={}){const o=new J.Path;o.appendSegment(J.Path.createSegment("M",T));const l=1/3,r=2/3,e=a.radius||10;let t,s;for(let h=0,m=u.length;h<m;h+=1){const d=J.Point.create(u[h]),v=u[h-1]||T,x=u[h+1]||b;t=s||d.distance(v)/2,s=d.distance(x)/2;const N=-Math.min(e,t),F=-Math.min(e,s),ae=d.clone().move(v,N).round(),$=d.clone().move(x,F).round(),te=new J.Point(l*ae.x+r*d.x,r*d.y+l*ae.y),fe=new J.Point(l*$.x+r*d.x,r*d.y+l*$.y);o.appendSegment(J.Path.createSegment("L",ae)),o.appendSegment(J.Path.createSegment("C",te,fe,$))}return o.appendSegment(J.Path.createSegment("L",b)),a.raw?o:o.serialize()};O.rounded=ie},90147:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.smooth=void 0;const J=V(62595),ie=function(T,b,u,a={}){let o,l=a.direction;if(u&&u.length!==0){const r=[T,...u,b],e=J.Curve.throughPoints(r);o=new J.Path(e)}else if(o=new J.Path,o.appendSegment(J.Path.createSegment("M",T)),l||(l=Math.abs(T.x-b.x)>=Math.abs(T.y-b.y)?"H":"V"),l==="H"){const r=(T.x+b.x)/2;o.appendSegment(J.Path.createSegment("C",r,T.y,r,b.y,b.x,b.y))}else{const r=(T.y+b.y)/2;o.appendSegment(J.Path.createSegment("C",T.x,r,b.x,r,b.x,b.y))}return a.raw?o:o.serialize()};O.smooth=ie},45056:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.closest=O.getClosestPoint=void 0;const J=V(62595),ie=V(1098),T=function(b,u,a,o){const l=b.getClosestPoint(a);return l!=null?l:new J.Point};O.getClosestPoint=T,O.closest=(0,ie.resolve)(O.getClosestPoint)},40337:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.EdgeAnchor=void 0;const b=V(77403),u=T(V(41390));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"edge endpoint"}),o.registry.register(o.presets,!0)})(a=O.EdgeAnchor||(O.EdgeAnchor={}))},13424:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.length=void 0;const V=function(J,ie,T,b){const u=b.length!=null?b.length:20;return J.getPointAtLength(u)};O.length=V},41390:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(b,u,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(u,a);(!l||("get"in l?!u.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(b,o,l)}:function(b,u,a,o){o===void 0&&(o=a),b[o]=u[a]}),ie=this&&this.__exportStar||function(b,u){for(var a in b)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&J(u,b,a)};Object.defineProperty(O,"__esModule",{value:!0}),O.closest=void 0,ie(V(93859),O),ie(V(13424),O),ie(V(37056),O);var T=V(45056);Object.defineProperty(O,"closest",{enumerable:!0,get:function(){return T.closest}})},37056:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.orth=void 0;const J=V(62595),ie=V(35695),T=V(1098),b=V(45056),u=function(a,o,l,r){const t=a.getConnection(),s=a.getConnectionSubdivisions(),h=new J.Line(l.clone().translate(0,1e6),l.clone().translate(0,-1e6)),m=new J.Line(l.clone().translate(1e6,0),l.clone().translate(-1e6,0)),d=h.intersect(t,{segmentSubdivisions:s}),v=m.intersect(t,{segmentSubdivisions:s}),x=[];return d&&x.push(...d),v&&x.push(...v),x.length>0?l.closest(x):r.fallbackAt!=null?(0,T.getPointAtEdge)(a,r.fallbackAt):ie.FunctionExt.call(b.getClosestPoint,this,a,o,l,r)};O.orth=(0,T.resolve)(u)},93859:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ratio=void 0;const V=function(J,ie,T,b){let u=b.ratio!=null?b.ratio:.5;return u>1&&(u/=100),J.getPointAtRatio(u)};O.ratio=V},37244:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.blur=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getNumber)(T.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${T.y!=null&&Number.isFinite(T.y)?[b,T.y]:b}"/>
    </filter>
  `.trim()}O.blur=ie},90460:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.brightness=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getNumber)(T.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${b}"/>
        <feFuncG type="linear" slope="${b}"/>
        <feFuncB type="linear" slope="${b}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}O.brightness=ie},75364:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.contrast=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getNumber)(T.amount,1),u=.5-b/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${b}" intercept="${u}"/>
        <feFuncG type="linear" slope="${b}" intercept="${u}"/>
        <feFuncB type="linear" slope="${b}" intercept="${u}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}O.contrast=ie},79980:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.dropShadow=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getNumber)(T.dx,0),u=(0,J.getNumber)(T.dy,0),a=(0,J.getString)(T.color,"black"),o=(0,J.getNumber)(T.blur,4),l=(0,J.getNumber)(T.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${o}" dx="${b}" dy="${u}" flood-color="${a}" flood-opacity="${l}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${o}" />
         <feOffset dx="${b}" dy="${u}" result="offsetblur" />
         <feFlood flood-color="${a}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${l}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}O.dropShadow=ie},91851:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.grayScale=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getNumber)(T.amount,1),u=.2126+.7874*(1-b),a=.7152-.7152*(1-b),o=.0722-.0722*(1-b),l=.2126-.2126*(1-b),r=.7152+.2848*(1-b),e=.0722-.0722*(1-b),t=.2126-.2126*(1-b),s=.0722+.9278*(1-b);return`
    <filter>
      <feColorMatrix type="matrix" values="${u} ${a} ${o} 0 0 ${l} ${r} ${e} 0 0 ${t} ${a} ${s} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}O.grayScale=ie},64089:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.highlight=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getString)(T.color,"red"),u=(0,J.getNumber)(T.blur,0),a=(0,J.getNumber)(T.width,1),o=(0,J.getNumber)(T.opacity,1);return`
      <filter>
        <feFlood flood-color="${b}" flood-opacity="${o}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${a}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${u}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}O.highlight=ie},28107:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.hueRotate=void 0;const J=V(43496);function ie(T={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${(0,J.getNumber)(T.angle,0)}"/>
      </filter>
    `.trim()}O.hueRotate=ie},50057:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.Filter=void 0;const b=V(77403),u=T(V(39174));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"filter"}),o.registry.register(o.presets,!0)})(a=O.Filter||(O.Filter={}))},59698:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.invert=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getNumber)(T.amount,1),u=1-b;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${b} ${u}"/>
          <feFuncG type="table" tableValues="${b} ${u}"/>
          <feFuncB type="table" tableValues="${b} ${u}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}O.invert=ie},39174:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(61436),O),ie(V(64089),O),ie(V(37244),O),ie(V(79980),O),ie(V(91851),O),ie(V(40193),O),ie(V(64509),O),ie(V(28107),O),ie(V(59698),O),ie(V(90460),O),ie(V(75364),O)},61436:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.outline=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getString)(T.color,"blue"),u=(0,J.getNumber)(T.width,1),a=(0,J.getNumber)(T.margin,2),o=(0,J.getNumber)(T.opacity,1),l=a,r=a+u;return`
    <filter>
      <feFlood flood-color="${b}" flood-opacity="${o}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${r}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${l}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}O.outline=ie},64509:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.saturate=void 0;const J=V(43496);function ie(T={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-(0,J.getNumber)(T.amount,1)}"/>
      </filter>
    `.trim()}O.saturate=ie},40193:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.sepia=void 0;const J=V(43496);function ie(T={}){const b=(0,J.getNumber)(T.amount,1),u=.393+.607*(1-b),a=.769-.769*(1-b),o=.189-.189*(1-b),l=.349-.349*(1-b),r=.686+.314*(1-b),e=.168-.168*(1-b),t=.272-.272*(1-b),s=.534-.534*(1-b),h=.131+.869*(1-b);return`
      <filter>
        <feColorMatrix type="matrix" values="${u} ${a} ${o} 0 0 ${l} ${r} ${e} 0 0 ${t} ${s} ${h} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}O.sepia=ie},43496:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getNumber=O.getString=void 0;function V(ie,T){return ie!=null?ie:T}O.getString=V;function J(ie,T){return ie!=null&&Number.isFinite(ie)?ie:T}O.getNumber=J},51522:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.dot=void 0;const J=V(35695);O.dot={color:"#aaaaaa",thickness:1,markup:"rect",update(ie,T){const b=T.thickness*T.sx,u=T.thickness*T.sy;J.Dom.attr(ie,{width:b,height:u,rx:b,ry:u,fill:T.color})}}},72366:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.doubleMesh=void 0;const J=V(35695);O.doubleMesh=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(ie,T){let b;const u=T.width,a=T.height,o=T.thickness;u-o>=0&&a-o>=0?b=["M",u,0,"H0 M0 0 V0",a].join(" "):b="M 0 0 0 0",J.Dom.attr(ie,{d:b,stroke:T.color,"stroke-width":T.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(ie,T){let b;const u=T.factor||1,a=T.width*u,o=T.height*u,l=T.thickness;a-l>=0&&o-l>=0?b=["M",a,0,"H0 M0 0 V0",o].join(" "):b="M 0 0 0 0",T.width=a,T.height=o,J.Dom.attr(ie,{d:b,stroke:T.color,"stroke-width":T.thickness})}}]},92914:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.fixedDot=void 0;const J=V(35695);O.fixedDot={color:"#aaaaaa",thickness:1,markup:"rect",update(ie,T){const b=T.sx<=1?T.thickness*T.sx:T.thickness;J.Dom.attr(ie,{width:b,height:b,rx:b,ry:b,fill:T.color})}}},23452:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(l,r,e,t){t===void 0&&(t=e);var s=Object.getOwnPropertyDescriptor(r,e);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(l,t,s)}:function(l,r,e,t){t===void 0&&(t=e),l[t]=r[e]}),ie=this&&this.__setModuleDefault||(Object.create?function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}:function(l,r){l.default=r}),T=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var e in l)e!=="default"&&Object.prototype.hasOwnProperty.call(l,e)&&J(r,l,e);return ie(r,l),r};Object.defineProperty(O,"__esModule",{value:!0}),O.Grid=void 0;const b=V(35695),u=V(77403),a=T(V(37208));class o{constructor(){this.patterns={},this.root=b.Vector.create(b.Dom.createSvgDocument(),{width:"100%",height:"100%"},[b.Dom.createSvgElement("defs")]).node}add(r,e){const t=this.root.childNodes[0];t&&t.appendChild(e),this.patterns[r]=e,b.Vector.create("rect",{width:"100%",height:"100%",fill:`url(#${r})`}).appendTo(this.root)}get(r){return this.patterns[r]}has(r){return this.patterns[r]!=null}}O.Grid=o,function(l){l.presets=a,l.registry=u.Registry.create({type:"grid"}),l.registry.register(l.presets,!0)}(o=O.Grid||(O.Grid={}))},37208:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(51522),O),ie(V(92914),O),ie(V(77603),O),ie(V(72366),O)},77603:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.mesh=void 0;const J=V(35695);O.mesh={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(ie,T){let b;const u=T.width,a=T.height,o=T.thickness;u-o>=0&&a-o>=0?b=["M",u,0,"H0 M0 0 V0",a].join(" "):b="M 0 0 0 0",J.Dom.attr(ie,{d:b,stroke:T.color,"stroke-width":T.thickness})}}},55846:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.className=void 0;const J=V(35695),T=V(7090).Config.prefix("highlighted");O.className={highlight(b,u,a){const o=a&&a.className||T;J.Dom.addClass(u,o)},unhighlight(b,u,a){const o=a&&a.className||T;J.Dom.removeClass(u,o)}}},37018:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.Highlighter=void 0;const b=V(77403),u=T(V(79695));var a;(function(o){function l(r,e){if(typeof e.highlight!="function")throw new Error(`Highlighter '${r}' is missing required \`highlight()\` method`);if(typeof e.unhighlight!="function")throw new Error(`Highlighter '${r}' is missing required \`unhighlight()\` method`)}o.check=l})(a=O.Highlighter||(O.Highlighter={})),function(o){o.presets=u,o.registry=b.Registry.create({type:"highlighter"}),o.registry.register(o.presets,!0)}(a=O.Highlighter||(O.Highlighter={}))},79695:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(55846),O),ie(V(28877),O),ie(V(67019),O)},28877:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.opacity=void 0;const J=V(35695),T=V(7090).Config.prefix("highlight-opacity");O.opacity={highlight(b,u){J.Dom.addClass(u,T)},unhighlight(b,u){J.Dom.removeClass(u,T)}}},67019:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.stroke=void 0;const J=V(35695),ie=V(7090),T=V(56994),b={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}};O.stroke={highlight(a,o,l){const r=u.getHighlighterId(o,l);if(u.hasCache(r))return;l=J.ObjectExt.defaultsDeep({},l,b);const e=J.Vector.create(o);let t,s;try{t=e.toPathData()}catch(v){s=T.Util.bbox(e.node,!0),t=J.Dom.rectToPathData(Object.assign(Object.assign({},l),s))}const h=J.Dom.createSvgElement("path");if(J.Dom.attr(h,Object.assign({d:t,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},l.attrs?J.Dom.kebablizeAttrs(l.attrs):null)),a.isEdgeElement(o))J.Dom.attr(h,"d",a.getConnectionPathData());else{let v=e.getTransformToElement(a.container);const x=l.padding;if(x){s==null&&(s=T.Util.bbox(e.node,!0));const N=s.x+s.width/2,F=s.y+s.height/2;s=T.Util.transformRectangle(s,v);const ae=Math.max(s.width,1),$=Math.max(s.height,1),te=(ae+x)/ae,fe=($+x)/$,B=J.Dom.createSVGMatrix({a:te,b:0,c:0,d:fe,e:N-te*N,f:F-fe*F});v=v.multiply(B)}J.Dom.transform(h,v)}J.Dom.addClass(h,ie.Config.prefix("highlight-stroke"));const m=a.cell,d=()=>u.removeHighlighter(r);m.on("removed",d),m.model&&m.model.on("reseted",d),a.container.appendChild(h),u.setCache(r,h)},unhighlight(a,o,l){u.removeHighlighter(u.getHighlighterId(o,l))}};var u;(function(a){function o(s,h){return J.Dom.ensureId(s),s.id+JSON.stringify(h)}a.getHighlighterId=o;const l={};function r(s,h){l[s]=h}a.setCache=r;function e(s){return l[s]!=null}a.hasCache=e;function t(s){const h=l[s];h&&(J.Dom.remove(h),delete l[s])}a.removeHighlighter=t})(u||(u={}))},22608:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(23452),O),ie(V(68458),O),ie(V(50057),O),ie(V(89042),O),ie(V(37018),O),ie(V(69733),O),ie(V(90285),O),ie(V(63011),O),ie(V(39804),O),ie(V(54799),O),ie(V(40337),O),ie(V(75200),O),ie(V(45284),O),ie(V(84287),O),ie(V(77403),O)},31233:function(bt,O,V){"use strict";var J=this&&this.__rest||function(u,a){var o={};for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&a.indexOf(l)<0&&(o[l]=u[l]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(u);r<l.length;r++)a.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(u,l[r])&&(o[l[r]]=u[l[r]]);return o};Object.defineProperty(O,"__esModule",{value:!0}),O.async=void 0;const ie=V(62595),T=V(89922),b=u=>{var{width:a,height:o,offset:l,open:r,flip:e}=u,t=J(u,["width","height","offset","open","flip"]);let s=o||6;const h=a||10,m=r===!0,d=e===!0,v=Object.assign(Object.assign({},t),{tagName:"path"});d&&(s=-s);const x=new ie.Path;return x.moveTo(0,s).lineTo(h,0),m?v.fill="none":(x.lineTo(h,s),x.close()),v.d=(0,T.normalize)(x.serialize(),{x:l||-h/2,y:s/2}),v};O.async=b},41267:function(bt,O,V){"use strict";var J=this&&this.__rest||function(a,o){var l={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&o.indexOf(r)<0&&(l[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,r=Object.getOwnPropertySymbols(a);e<r.length;e++)o.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(a,r[e])&&(l[r[e]]=a[r[e]]);return l};Object.defineProperty(O,"__esModule",{value:!0}),O.circlePlus=O.circle=void 0;const ie=V(62595),T=V(89922),b=a=>{var{r:o}=a,l=J(a,["r"]);const r=o||5;return Object.assign(Object.assign({cx:r},l),{tagName:"circle",r})};O.circle=b;const u=a=>{var{r:o}=a,l=J(a,["r"]);const r=o||5,e=new ie.Path;return e.moveTo(r,0).lineTo(r,r*2),e.moveTo(0,r).lineTo(r*2,r),{children:[Object.assign(Object.assign({},(0,O.circle)({r})),{fill:"none"}),Object.assign(Object.assign({},l),{tagName:"path",d:(0,T.normalize)(e.serialize(),-r)})]}};O.circlePlus=u},46105:function(bt,O,V){"use strict";var J=this&&this.__rest||function(l,r){var e={};for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&r.indexOf(t)<0&&(e[t]=l[t]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(l);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(l,t[s])&&(e[t[s]]=l[t[s]]);return e};Object.defineProperty(O,"__esModule",{value:!0}),O.classic=O.block=void 0;const ie=V(62595),T=V(35695),b=V(89922),u=l=>{var{size:r,width:e,height:t,offset:s,open:h}=l,m=J(l,["size","width","height","offset","open"]);return o({size:r,width:e,height:t,offset:s},h===!0,!0,void 0,m)};O.block=u;const a=l=>{var{size:r,width:e,height:t,offset:s,factor:h}=l,m=J(l,["size","width","height","offset","factor"]);return o({size:r,width:e,height:t,offset:s},!1,!1,h,m)};O.classic=a;function o(l,r,e,t=3/4,s={}){const h=l.size||10,m=l.width||h,d=l.height||h,v=new ie.Path,x={};if(r)v.moveTo(m,0).lineTo(0,d/2).lineTo(m,d),x.fill="none";else{if(v.moveTo(0,d/2),v.lineTo(m,0),!e){const N=T.NumberExt.clamp(t,0,1);v.lineTo(m*N,d/2)}v.lineTo(m,d),v.close()}return Object.assign(Object.assign(Object.assign({},x),s),{tagName:"path",d:(0,b.normalize)(v.serialize(),{x:l.offset!=null?l.offset:-m/2})})}},87984:function(bt,O,V){"use strict";var J=this&&this.__rest||function(u,a){var o={};for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&a.indexOf(l)<0&&(o[l]=u[l]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(u);r<l.length;r++)a.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(u,l[r])&&(o[l[r]]=u[l[r]]);return o};Object.defineProperty(O,"__esModule",{value:!0}),O.cross=void 0;const ie=V(62595),T=V(89922),b=u=>{var{size:a,width:o,height:l,offset:r}=u,e=J(u,["size","width","height","offset"]);const t=a||10,s=o||t,h=l||t,m=new ie.Path;return m.moveTo(0,0).lineTo(s,h).moveTo(0,h).lineTo(s,0),Object.assign(Object.assign({},e),{tagName:"path",fill:"none",d:(0,T.normalize)(m.serialize(),r||-s/2)})};O.cross=b},87582:function(bt,O,V){"use strict";var J=this&&this.__rest||function(u,a){var o={};for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&a.indexOf(l)<0&&(o[l]=u[l]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(u);r<l.length;r++)a.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(u,l[r])&&(o[l[r]]=u[l[r]]);return o};Object.defineProperty(O,"__esModule",{value:!0}),O.diamond=void 0;const ie=V(62595),T=V(89922),b=u=>{var{size:a,width:o,height:l,offset:r}=u,e=J(u,["size","width","height","offset"]);const t=a||10,s=o||t,h=l||t,m=new ie.Path;return m.moveTo(0,h/2).lineTo(s/2,0).lineTo(s,h/2).lineTo(s/2,h).close(),Object.assign(Object.assign({},e),{tagName:"path",d:(0,T.normalize)(m.serialize(),r==null?-s/2:r)})};O.diamond=b},60810:function(bt,O){"use strict";var V=this&&this.__rest||function(ie,T){var b={};for(var u in ie)Object.prototype.hasOwnProperty.call(ie,u)&&T.indexOf(u)<0&&(b[u]=ie[u]);if(ie!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,u=Object.getOwnPropertySymbols(ie);a<u.length;a++)T.indexOf(u[a])<0&&Object.prototype.propertyIsEnumerable.call(ie,u[a])&&(b[u[a]]=ie[u[a]]);return b};Object.defineProperty(O,"__esModule",{value:!0}),O.ellipse=void 0;const J=ie=>{var{rx:T,ry:b}=ie,u=V(ie,["rx","ry"]);const a=T||5,o=b||5;return Object.assign(Object.assign({cx:a},u),{tagName:"ellipse",rx:a,ry:o})};O.ellipse=J},39804:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(l,r,e,t){t===void 0&&(t=e);var s=Object.getOwnPropertyDescriptor(r,e);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(l,t,s)}:function(l,r,e,t){t===void 0&&(t=e),l[t]=r[e]}),ie=this&&this.__setModuleDefault||(Object.create?function(l,r){Object.defineProperty(l,"default",{enumerable:!0,value:r})}:function(l,r){l.default=r}),T=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var r={};if(l!=null)for(var e in l)e!=="default"&&Object.prototype.hasOwnProperty.call(l,e)&&J(r,l,e);return ie(r,l),r};Object.defineProperty(O,"__esModule",{value:!0}),O.Marker=void 0;const b=V(77403),u=T(V(21354)),a=V(89922);var o;(function(l){l.presets=u,l.registry=b.Registry.create({type:"marker"}),l.registry.register(l.presets,!0)})(o=O.Marker||(O.Marker={})),function(l){l.normalize=a.normalize}(o=O.Marker||(O.Marker={}))},21354:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(46105),O),ie(V(87582),O),ie(V(53692),O),ie(V(87984),O),ie(V(31233),O),ie(V(41267),O),ie(V(60810),O)},53692:function(bt,O,V){"use strict";var J=this&&this.__rest||function(b,u){var a={};for(var o in b)Object.prototype.hasOwnProperty.call(b,o)&&u.indexOf(o)<0&&(a[o]=b[o]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(b);l<o.length;l++)u.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(b,o[l])&&(a[o[l]]=b[o[l]]);return a};Object.defineProperty(O,"__esModule",{value:!0}),O.path=void 0;const ie=V(89922),T=b=>{var{d:u,offsetX:a,offsetY:o}=b,l=J(b,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},l),{tagName:"path",d:(0,ie.normalize)(u,a,o)})};O.path=T},89922:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.normalize=void 0;const J=V(62595);function ie(T,b,u){let a,o;typeof b=="object"?(a=b.x,o=b.y):(a=b,o=u);const l=J.Path.parse(T),r=l.bbox();if(r){let e=-r.height/2-r.y,t=-r.width/2-r.x;typeof a=="number"&&(t-=a),typeof o=="number"&&(e-=o),l.translate(t,e)}return l.serialize()}O.normalize=ie},56122:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.bottomRight=O.bottomLeft=O.topRight=O.topLeft=O.right=O.left=O.bottom=O.top=O.center=void 0;const J=V(35695);O.center=ie("center"),O.top=ie("topCenter"),O.bottom=ie("bottomCenter"),O.left=ie("leftMiddle"),O.right=ie("rightMiddle"),O.topLeft=ie("topLeft"),O.topRight=ie("topRight"),O.bottomLeft=ie("bottomLeft"),O.bottomRight=ie("bottomRight");function ie(T){return function(b,u,a,o={}){const l=o.rotate?b.getUnrotatedBBoxOfElement(u):b.getBBoxOfElement(u),r=l[T];r.x+=J.NumberExt.normalizePercentage(o.dx,l.width),r.y+=J.NumberExt.normalizePercentage(o.dy,l.height);const e=b.cell;return o.rotate?r.rotate(-e.getAngle(),e.getBBox().getCenter()):r}}},54799:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.NodeAnchor=void 0;const b=V(77403),u=T(V(29377));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"node endpoint"}),o.registry.register(o.presets,!0)})(a=O.NodeAnchor||(O.NodeAnchor={}))},29377:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(56122),O),ie(V(10950),O),ie(V(42699),O),ie(V(98529),O)},98529:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.midSide=void 0;const J=V(1098),ie=function(T,b,u,a){let o,l=0,r;const e=T.cell;a.rotate?(o=T.getUnrotatedBBoxOfElement(b),r=e.getBBox().getCenter(),l=e.getAngle()):o=T.getBBoxOfElement(b);const t=a.padding;t!=null&&Number.isFinite(t)&&o.inflate(t),a.rotate&&u.rotate(l,r);const s=o.getNearestSideToPoint(u);let h;switch(s){case"left":h=o.getLeftMiddle();break;case"right":h=o.getRightMiddle();break;case"top":h=o.getTopCenter();break;case"bottom":h=o.getBottomCenter();break;default:break}const m=a.direction;return m==="H"?(s==="top"||s==="bottom")&&(u.x<=o.x+o.width?h=o.getLeftMiddle():h=o.getRightMiddle()):m==="V"&&(u.y<=o.y+o.height?h=o.getTopCenter():h=o.getBottomCenter()),a.rotate?h.rotate(-l,r):h};O.midSide=(0,J.resolve)(ie)},42699:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.nodeCenter=void 0;const V=function(J,ie,T,b,u){const a=J.cell.getConnectionPoint(this.cell,u);return(b.dx||b.dy)&&a.translate(b.dx||0,b.dy||0),a};O.nodeCenter=V},10950:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.orth=void 0;const J=V(62595),ie=V(1098),T=function(b,u,a,o){const l=J.Angle.normalize(b.cell.getAngle()),r=b.getBBoxOfElement(u),e=r.getCenter(),t=r.getTopLeft(),s=r.getBottomRight();let h=o.padding;if(Number.isFinite(h)||(h=0),t.y+h<=a.y&&a.y<=s.y-h){const m=a.y-e.y;e.x+=l===0||l===180?0:m*1/Math.tan(J.Angle.toRad(l)),e.y+=m}else if(t.x+h<=a.x&&a.x<=s.x-h){const m=a.x-e.x;e.y+=l===90||l===270?0:m*Math.tan(J.Angle.toRad(l)),e.x+=m}return e};O.orth=(0,ie.resolve)(T)},1098:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getPointAtEdge=O.resolve=void 0;const J=V(35695),ie=V(62595);function T(u){return function(a,o,l,r){if(l instanceof Element){const e=this.graph.findViewByElem(l);let t;if(e)if(e.isEdgeElement(l)){const s=r.fixedAt!=null?r.fixedAt:"50%";t=b(e,s)}else t=e.getBBoxOfElement(l).getCenter();else t=new ie.Point;return u.call(this,a,o,t,r)}return u.apply(this,arguments)}}O.resolve=T;function b(u,a){const o=J.NumberExt.isPercentage(a),l=typeof a=="string"?parseFloat(a):a;return o?u.getPointAtRatio(l/100):u.getPointAtLength(l)}O.getPointAtEdge=b},90285:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.PortLabelLayout=void 0;const b=V(77403),u=T(V(67299));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"port label layout"}),o.registry.register(o.presets,!0)})(a=O.PortLabelLayout||(O.PortLabelLayout={}))},92927:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.insideOriented=O.inside=O.outsideOriented=O.outside=void 0;const J=V(65701),ie=(r,e,t)=>a(r,e,!1,t);O.outside=ie;const T=(r,e,t)=>a(r,e,!0,t);O.outsideOriented=T;const b=(r,e,t)=>o(r,e,!1,t);O.inside=b;const u=(r,e,t)=>o(r,e,!0,t);O.insideOriented=u;function a(r,e,t,s){const h=s.offset!=null?s.offset:15,m=e.getCenter().theta(r),d=l(e);let v,x,N,F,ae=0;return m<d[1]||m>d[2]?(v=".3em",x=h,N=0,F="start"):m<d[0]?(v="0",x=0,N=-h,t?(ae=-90,F="start"):F="middle"):m<d[3]?(v=".3em",x=-h,N=0,F="end"):(v=".6em",x=0,N=h,t?(ae=90,F="start"):F="middle"),(0,J.toResult)({position:{x:Math.round(x),y:Math.round(N)},angle:ae,attrs:{".":{y:v,"text-anchor":F}}},s)}function o(r,e,t,s){const h=s.offset!=null?s.offset:15,m=e.getCenter().theta(r),d=l(e);let v,x,N,F,ae=0;return m<d[1]||m>d[2]?(v=".3em",x=-h,N=0,F="end"):m<d[0]?(v=".6em",x=0,N=h,t?(ae=90,F="start"):F="middle"):m<d[3]?(v=".3em",x=h,N=0,F="start"):(v="0em",x=0,N=-h,t?(ae=-90,F="start"):F="middle"),(0,J.toResult)({position:{x:Math.round(x),y:Math.round(N)},angle:ae,attrs:{".":{y:v,"text-anchor":F}}},s)}function l(r){const e=r.getCenter(),t=e.theta(r.getTopLeft()),s=e.theta(r.getBottomLeft()),h=e.theta(r.getBottomRight()),m=e.theta(r.getTopRight());return[t,m,h,s]}},67299:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(54015),O),ie(V(92927),O),ie(V(48973),O)},48973:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.radialOriented=O.radial=void 0;const J=V(62595),ie=V(65701),T=(a,o,l)=>u(a.diff(o.getCenter()),!1,l);O.radial=T;const b=(a,o,l)=>u(a.diff(o.getCenter()),!0,l);O.radialOriented=b;function u(a,o,l){const r=l.offset!=null?l.offset:20,e=new J.Point(0,0),t=-a.theta(e),s=a.clone().move(e,r).diff(a).round();let h=".3em",m,d=t;return(t+90)%180===0?(m=o?"end":"middle",!o&&t===-270&&(h="0em")):t>-270&&t<-90?(m="start",d=t-180):m="end",(0,ie.toResult)({position:s.round().toJSON(),angle:o?d:0,attrs:{".":{y:h,"text-anchor":m}}},l)}},54015:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.bottom=O.top=O.right=O.left=O.manual=void 0;const J=V(65701),ie=(o,l,r)=>(0,J.toResult)({position:l.getTopLeft()},r);O.manual=ie;const T=(o,l,r)=>(0,J.toResult)({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},r);O.left=T;const b=(o,l,r)=>(0,J.toResult)({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},r);O.right=b;const u=(o,l,r)=>(0,J.toResult)({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},r);O.top=u;const a=(o,l,r)=>(0,J.toResult)({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},r);O.bottom=a},65701:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.toResult=void 0;const J=V(35695),ie={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function T(b,u){const{x:a,y:o,angle:l,attrs:r}=u||{};return J.ObjectExt.defaultsDeep({},{angle:l,attrs:r,position:{x:a,y:o}},b,ie)}O.toResult=T},65816:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.absolute=void 0;const J=V(63213),ie=(T,b)=>T.map(({x:u,y:a,angle:o})=>(0,J.toResult)((0,J.normalizePoint)(b,{x:u,y:a}),o||0));O.absolute=ie},61404:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ellipseSpread=O.ellipse=void 0;const J=V(62595),ie=V(63213),T=(a,o,l)=>{const r=l.start||0,e=l.step||20;return u(a,o,r,(t,s)=>(t+.5-s/2)*e)};O.ellipse=T;const b=(a,o,l)=>{const r=l.start||0,e=l.step||360/a.length;return u(a,o,r,t=>t*e)};O.ellipseSpread=b;function u(a,o,l,r){const e=o.getCenter(),t=o.getTopCenter(),s=o.width/o.height,h=J.Ellipse.fromRect(o),m=a.length;return a.map((d,v)=>{const x=l+r(v,m),N=t.clone().rotate(-x,e).scale(s,1,e),F=d.compensateRotate?-h.tangentTheta(N):0;return(d.dx||d.dy)&&N.translate(d.dx||0,d.dy||0),d.dr&&N.move(e,d.dr),(0,ie.toResult)(N.round(),F,d)})}},69733:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.PortLayout=void 0;const b=V(77403),u=T(V(29526));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"port layout"}),o.registry.register(o.presets,!0)})(a=O.PortLayout||(O.PortLayout={}))},22174:function(bt,O,V){"use strict";var J=this&&this.__rest||function(e,t){var s={};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&t.indexOf(h)<0&&(s[h]=e[h]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,h=Object.getOwnPropertySymbols(e);m<h.length;m++)t.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(e,h[m])&&(s[h[m]]=e[h[m]]);return s};Object.defineProperty(O,"__esModule",{value:!0}),O.bottom=O.top=O.right=O.left=O.line=void 0;const ie=V(62595),T=V(63213),b=(e,t,s)=>{const h=(0,T.normalizePoint)(t,s.start||t.getOrigin()),m=(0,T.normalizePoint)(t,s.end||t.getCorner());return r(e,h,m,s)};O.line=b;const u=(e,t,s)=>r(e,t.getTopLeft(),t.getBottomLeft(),s);O.left=u;const a=(e,t,s)=>r(e,t.getTopRight(),t.getBottomRight(),s);O.right=a;const o=(e,t,s)=>r(e,t.getTopLeft(),t.getTopRight(),s);O.top=o;const l=(e,t,s)=>r(e,t.getBottomLeft(),t.getBottomRight(),s);O.bottom=l;function r(e,t,s,h){const m=new ie.Line(t,s),d=e.length;return e.map((v,x)=>{var{strict:N}=v,F=J(v,["strict"]);const ae=N||h.strict?(x+1)/(d+1):(x+.5)/d,$=m.pointAt(ae);return(F.dx||F.dy)&&$.translate(F.dx||0,F.dy||0),(0,T.toResult)($.round(),0,F)})}},29526:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(65816),O),ie(V(61404),O),ie(V(22174),O)},63213:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.toResult=O.normalizePoint=void 0;const J=V(35695),ie=V(62595);function T(u,a={}){return new ie.Point(J.NumberExt.normalizePercentage(a.x,u.width),J.NumberExt.normalizePercentage(a.y,u.height))}O.normalizePoint=T;function b(u,a,o){return Object.assign({angle:a,position:u.toJSON()},o)}O.toResult=b},77403:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Registry=void 0;const J=V(35695);class ie{constructor(b){this.options=Object.assign({},b),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(b,u,a=!1){if(typeof b=="object"){Object.entries(b).forEach(([r,e])=>{this.register(r,e,u)});return}this.exist(b)&&!a&&!J.Platform.isApplyingHMR()&&this.onDuplicated(b);const o=this.options.process,l=o?J.FunctionExt.call(o,this,b,u):u;return this.data[b]=l,l}unregister(b){const u=b?this.data[b]:null;return delete this.data[b],u}get(b){return b?this.data[b]:null}exist(b){return b?this.data[b]!=null:!1}onDuplicated(b){try{throw this.options.onConflict&&J.FunctionExt.call(this.options.onConflict,this,b),new Error(`${J.StringExt.upperFirst(this.options.type)} with name '${b}' already registered.`)}catch(u){throw u}}onNotFound(b,u){throw new Error(this.getSpellingSuggestion(b,u))}getSpellingSuggestion(b,u){const a=this.getSpellingSuggestionForName(b),o=u?`${u} ${J.StringExt.lowerFirst(this.options.type)}`:this.options.type;return`${J.StringExt.upperFirst(o)} with name '${b}' does not exist.${a?` Did you mean '${a}'?`:""}`}getSpellingSuggestionForName(b){return J.StringExt.getSpellingSuggestion(b,Object.keys(this.data),u=>u)}}O.Registry=ie,function(T){function b(u){return new T(u)}T.create=b}(ie=O.Registry||(O.Registry={}))},93267:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.er=void 0;const V=function(J,ie,T){const b=ie.offset||32,u=ie.min==null?16:ie.min;let a=0,o=ie.direction;const l=T.sourceBBox,r=T.targetBBox,e=l.getCenter(),t=r.getCenter();if(typeof b=="number"&&(a=b),o==null){let N=r.left-l.right,F=r.top-l.bottom;N>=0&&F>=0?o=N>=F?"L":"T":N<=0&&F>=0?(N=l.left-r.right,N>=0?o=N>=F?"R":"T":o="T"):N>=0&&F<=0?(F=l.top-r.bottom,F>=0?o=N>=F?"L":"B":o="L"):(N=l.left-r.right,F=l.top-r.bottom,N>=0&&F>=0?o=N>=F?"R":"B":N<=0&&F>=0?o="B":N>=0&&F<=0?o="R":o=Math.abs(N)>Math.abs(F)?"R":"B")}o==="H"?o=t.x-e.x>=0?"L":"R":o==="V"&&(o=t.y-e.y>=0?"T":"B"),b==="center"&&(o==="L"?a=(r.left-l.right)/2:o==="R"?a=(l.left-r.right)/2:o==="T"?a=(r.top-l.bottom)/2:o==="B"&&(a=(l.top-r.bottom)/2));let s,h,m;const d=o==="L"||o==="R";if(d){if(t.y===e.y)return[...J];m=o==="L"?1:-1,s="x",h="width"}else{if(t.x===e.x)return[...J];m=o==="T"?1:-1,s="y",h="height"}const v=e.clone(),x=t.clone();if(v[s]+=m*(l[h]/2+a),x[s]-=m*(r[h]/2+a),d){const N=v.x,F=x.x,ae=l.width/2+u,$=r.width/2+u;t.x>e.x?F<=N&&(v.x=Math.max(F,e.x+ae),x.x=Math.min(N,t.x-$)):F>=N&&(v.x=Math.min(F,e.x-ae),x.x=Math.max(N,t.x+$))}else{const N=v.y,F=x.y,ae=l.height/2+u,$=r.height/2+u;t.y>e.y?F<=N&&(v.y=Math.max(F,e.y+ae),x.y=Math.min(N,t.y-$)):F>=N&&(v.y=Math.min(F,e.y-ae),x.y=Math.max(N,t.y+$))}return[v.toJSON(),...J,x.toJSON()]};O.er=V},45284:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(o,l,r,e){e===void 0&&(e=r);var t=Object.getOwnPropertyDescriptor(l,r);(!t||("get"in t?!l.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return l[r]}}),Object.defineProperty(o,e,t)}:function(o,l,r,e){e===void 0&&(e=r),o[e]=l[r]}),ie=this&&this.__setModuleDefault||(Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l}),T=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var r in o)r!=="default"&&Object.prototype.hasOwnProperty.call(o,r)&&J(l,o,r);return ie(l,o),l};Object.defineProperty(O,"__esModule",{value:!0}),O.Router=void 0;const b=V(77403),u=T(V(93869));var a;(function(o){o.presets=u,o.registry=b.Registry.create({type:"router"}),o.registry.register(o.presets,!0)})(a=O.Router||(O.Router={}))},85177:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.loop=void 0;const J=V(62595);function ie(b,u){if(u!=null&&u!==!1){const a=typeof u=="boolean"?0:u;if(a>0){const o=J.Point.create(b[1]).move(b[2],a),l=J.Point.create(b[1]).move(b[0],a);return[o.toJSON(),...b,l.toJSON()]}{const o=b[1];return[Object.assign({},o),...b,Object.assign({},o)]}}return b}const T=function(b,u,a){const o=u.width||50,r=(u.height||80)/2,e=u.angle||"auto",t=a.sourceAnchor,s=a.targetAnchor,h=a.sourceBBox,m=a.targetBBox;if(t.equals(s)){const d=$=>{const te=J.Angle.toRad($),fe=Math.sin(te),B=Math.cos(te),he=new J.Point(t.x+B*o,t.y+fe*o),z=new J.Point(he.x-B*r,he.y-fe*r),ee=z.clone().rotate(-90,he),pe=z.clone().rotate(90,he);return[ee.toJSON(),he.toJSON(),pe.toJSON()]},v=$=>{const te=t.clone().move($,-1),fe=new J.Line(te,$);return!h.containsPoint($)&&!h.intersectsWithLine(fe)},x=[0,90,180,270,45,135,225,315];if(typeof e=="number")return ie(d(e),u.merge);const N=h.getCenter();if(N.equals(t))return ie(d(0),u.merge);const F=N.angleBetween(t,N.clone().translate(1,0));let ae=d(F);if(v(ae[1]))return ie(ae,u.merge);for(let $=1,te=x.length;$<te;$+=1)if(ae=d(F+x[$]),v(ae[1]))return ie(ae,u.merge);return ie(ae,u.merge)}{const d=new J.Line(t,s);let v=d.parallel(-o),x=v.getCenter(),N=v.start.clone().move(v.end,r),F=v.end.clone().move(v.start,r);const ae=d.parallel(-1),$=new J.Line(ae.start,x),te=new J.Line(ae.end,x);if((h.containsPoint(x)||m.containsPoint(x)||h.intersectsWithLine($)||h.intersectsWithLine(te)||m.intersectsWithLine($)||m.intersectsWithLine(te))&&(v=d.parallel(o),x=v.getCenter(),N=v.start.clone().move(v.end,r),F=v.end.clone().move(v.start,r)),u.merge){const fe=new J.Line(t,s),B=new J.Line(x,fe.center).setLength(Number.MAX_SAFE_INTEGER),he=h.intersectsWithLine(B),z=m.intersectsWithLine(B),ee=he?Array.isArray(he)?he:[he]:[];z&&(Array.isArray(z)?ee.push(...z):ee.push(z));const pe=fe.center.closest(ee);pe?(a.sourceAnchor=pe.clone(),a.targetAnchor=pe.clone()):(a.sourceAnchor=fe.center.clone(),a.targetAnchor=fe.center.clone())}return ie([N.toJSON(),x.toJSON(),F.toJSON()],u.merge)}};O.loop=T},93869:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(9782),O),ie(V(53505),O),ie(V(18813),O),ie(V(15572),O),ie(V(98694),O),ie(V(93267),O),ie(V(85177),O)},98694:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.manhattan=void 0;const J=V(35695),ie=V(69478),T=V(97011),b=function(u,a,o){return J.FunctionExt.call(ie.router,this,u,Object.assign(Object.assign({},T.defaults),a),o)};O.manhattan=b},67202:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ObstacleMap=void 0;const J=V(35695),ie=V(62595);class T{constructor(u){this.options=u,this.mapGridSize=100,this.map={}}build(u,a){const o=this.options,l=o.excludeTerminals.reduce((h,m)=>{const d=a[m];if(d){const v=u.getCell(d.cell);v&&h.push(v)}return h},[]);let r=[];const e=u.getCell(a.getSourceCellId());e&&(r=J.ArrayExt.union(r,e.getAncestors().map(h=>h.id)));const t=u.getCell(a.getTargetCellId());t&&(r=J.ArrayExt.union(r,t.getAncestors().map(h=>h.id)));const s=this.mapGridSize;return u.getNodes().reduce((h,m)=>{const d=l.some(ae=>ae.id===m.id),v=m.shape?o.excludeShapes.includes(m.shape):!1,x=o.excludeNodes.some(ae=>typeof ae=="string"?m.id===ae:ae===m),N=r.includes(m.id),F=v||d||x||N;if(m.isVisible()&&!F){const ae=m.getBBox().moveAndExpand(o.paddingBox),$=ae.getOrigin().snapToGrid(s),te=ae.getCorner().snapToGrid(s);for(let fe=$.x;fe<=te.x;fe+=s)for(let B=$.y;B<=te.y;B+=s){const he=new ie.Point(fe,B).toString();h[he]==null&&(h[he]=[]),h[he].push(ae)}}return h},this.map),this}isAccessible(u){const a=u.clone().snapToGrid(this.mapGridSize).toString(),o=this.map[a];return o?o.every(l=>!l.containsPoint(u)):!0}}O.ObstacleMap=T},97011:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.resolveOptions=O.resolve=O.defaults=void 0;const J=V(35695),ie=V(62595),T=V(18813);O.defaults={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return b(this.step,this)},directions(){const a=b(this.step,this),o=b(this.cost,this);return[{cost:o,offsetX:a,offsetY:0},{cost:o,offsetX:-a,offsetY:0},{cost:o,offsetX:0,offsetY:a},{cost:o,offsetX:0,offsetY:-a}]},penalties(){const a=b(this.step,this);return{0:0,45:a/2,90:a/2}},paddingBox(){const a=b(this.step,this);return{x:-a,y:-a,width:2*a,height:2*a}},fallbackRouter:T.orth,draggingRouter:null,snapToGrid:!0};function b(a,o){return typeof a=="function"?a.call(o):a}O.resolve=b;function u(a){const o=Object.keys(a).reduce((l,r)=>{const e=l;return r==="fallbackRouter"||r==="draggingRouter"||r==="fallbackRoute"?e[r]=a[r]:e[r]=b(a[r],a),l},{});if(o.padding){const l=J.NumberExt.normalizeSides(o.padding);o.paddingBox={x:-l.left,y:-l.top,width:l.left+l.right,height:l.top+l.bottom}}return o.directions.forEach(l=>{const r=new ie.Point(0,0),e=new ie.Point(l.offsetX,l.offsetY);l.angle=ie.Angle.normalize(r.theta(e))}),o}O.resolveOptions=u},69478:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(h,m,d,v){v===void 0&&(v=d);var x=Object.getOwnPropertyDescriptor(m,d);(!x||("get"in x?!m.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return m[d]}}),Object.defineProperty(h,v,x)}:function(h,m,d,v){v===void 0&&(v=d),h[v]=m[d]}),ie=this&&this.__setModuleDefault||(Object.create?function(h,m){Object.defineProperty(h,"default",{enumerable:!0,value:m})}:function(h,m){h.default=m}),T=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var m={};if(h!=null)for(var d in h)d!=="default"&&Object.prototype.hasOwnProperty.call(h,d)&&J(m,h,d);return ie(m,h),m};Object.defineProperty(O,"__esModule",{value:!0}),O.router=void 0;const b=V(35695),u=V(62595),a=V(37425),o=V(67202),l=T(V(72013)),r=V(97011);function e(h,m,d,v,x){const N=x.precision;let F,ae;u.Rectangle.isRectangle(m)?F=l.round(l.getSourceEndpoint(h,x).clone(),N):F=l.round(m.clone(),N),u.Rectangle.isRectangle(d)?ae=l.round(l.getTargetEndpoint(h,x).clone(),N):ae=l.round(d.clone(),N);const $=l.getGrid(x.step,F,ae),te=F,fe=ae;let B,he;if(u.Rectangle.isRectangle(m)?B=l.getRectPoints(te,m,x.startDirections,$,x):B=[te],u.Rectangle.isRectangle(d)?he=l.getRectPoints(ae,d,x.endDirections,$,x):he=[fe],B=B.filter(z=>v.isAccessible(z)),he=he.filter(z=>v.isAccessible(z)),B.length>0&&he.length>0){const z=new a.SortedSet,ee={},pe={},S={};for(let Oe=0,Le=B.length;Oe<Le;Oe+=1){const Ge=B[Oe],He=l.getKey(Ge);z.add(He,l.getCost(Ge,he)),ee[He]=Ge,S[He]=0}const q=x.previousDirectionAngle,M=q===void 0;let I,j;const ue=l.getGridOffsets($,x),se=ue.length,Ee=he.reduce((Oe,Le)=>{const Ge=l.getKey(Le);return Oe.push(Ge),Oe},[]),Ce=u.Point.equalPoints(B,he);let xe=x.maxLoopCount;for(;!z.isEmpty()&&xe>0;){const Oe=z.pop(),Le=ee[Oe],Ge=pe[Oe],He=S[Oe],Et=Le.equals(te),Ct=Ge==null;let Gt;if(Ct?M?Et?Gt=null:Gt=l.getDirectionAngle(te,Le,se,$,x):Gt=q:Gt=l.getDirectionAngle(Ge,Le,se,$,x),!(Ct&&Ce)&&Ee.indexOf(Oe)>=0)return x.previousDirectionAngle=Gt,l.reconstructRoute(pe,ee,Le,te,fe);for(let vt=0;vt<se;vt+=1){I=ue[vt];const cn=I.angle;if(j=l.getDirectionChange(Gt,cn),!(M&&Et)&&j>x.maxDirectionChange)continue;const hn=l.align(Le.clone().translate(I.gridOffsetX||0,I.gridOffsetY||0),$,N),Bn=l.getKey(hn);if(z.isClose(Bn)||!v.isAccessible(hn))continue;if(Ee.indexOf(Bn)>=0&&!hn.equals(fe)){const ci=l.getDirectionAngle(hn,fe,se,$,x);if(l.getDirectionChange(cn,ci)>x.maxDirectionChange)continue}const Fn=I.cost,ir=Et?0:x.penalties[j],Nr=He+Fn+ir;(!z.isOpen(Bn)||Nr<S[Bn])&&(ee[Bn]=hn,pe[Bn]=Le,S[Bn]=Nr,z.add(Bn,Nr+l.getCost(hn,he)))}xe-=1}}return x.fallbackRoute?b.FunctionExt.call(x.fallbackRoute,this,te,fe,x):null}function t(h,m=10){if(h.length<=1)return h;for(let d=0,v=h.length;d<v-1;d+=1){const x=h[d],N=h[d+1];if(x.x===N.x){const F=m*Math.round(x.x/m);x.x!==F&&(x.x=F,N.x=F)}else if(x.y===N.y){const F=m*Math.round(x.y/m);x.y!==F&&(x.y=F,N.y=F)}}return h}const s=function(h,m,d){const v=(0,r.resolveOptions)(m),x=l.getSourceBBox(d,v),N=l.getTargetBBox(d,v),F=l.getSourceEndpoint(d,v),ae=new o.ObstacleMap(v).build(d.graph.model,d.cell),$=h.map(z=>u.Point.create(z)),te=[];let fe=F,B,he;for(let z=0,ee=$.length;z<=ee;z+=1){let pe=null;if(B=he||x,he=$[z],he==null){he=N;const q=d.cell;if((q.getSourceCellId()==null||q.getTargetCellId()==null)&&typeof v.draggingRouter=="function"){const I=B===x?F:B,j=he.getOrigin();pe=b.FunctionExt.call(v.draggingRouter,d,I,j,v)}}if(pe==null&&(pe=e(d,B,he,ae,v)),pe===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),b.FunctionExt.call(v.fallbackRouter,this,h,v,d);const S=pe[0];S&&S.equals(fe)&&pe.shift(),fe=pe[pe.length-1]||fe,te.push(...pe)}return v.snapToGrid?t(te,d.graph.grid.getGridSize()):te};O.router=s},37425:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.SortedSet=void 0;const J=V(35695),ie=1,T=2;class b{constructor(){this.items=[],this.hash={},this.values={}}add(a,o){this.hash[a]?this.items.splice(this.items.indexOf(a),1):this.hash[a]=ie,this.values[a]=o;const l=J.ArrayExt.sortedIndexBy(this.items,a,r=>this.values[r]);this.items.splice(l,0,a)}pop(){const a=this.items.shift();return a&&(this.hash[a]=T),a}isOpen(a){return this.hash[a]===ie}isClose(a){return this.hash[a]===T}isEmpty(){return this.items.length===0}}O.SortedSet=b},72013:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.reconstructRoute=O.getRectPoints=O.getCost=O.normalizePoint=O.getKey=O.align=O.round=O.getGrid=O.getGridOffsets=O.getDirectionChange=O.getDirectionAngle=O.getTargetEndpoint=O.getSourceEndpoint=O.getTargetBBox=O.getSourceBBox=void 0;const J=V(62595);function ie(ae,$){const te=ae.sourceBBox.clone();return $&&$.paddingBox?te.moveAndExpand($.paddingBox):te}O.getSourceBBox=ie;function T(ae,$){const te=ae.targetBBox.clone();return $&&$.paddingBox?te.moveAndExpand($.paddingBox):te}O.getTargetBBox=T;function b(ae,$){return ae.sourceAnchor?ae.sourceAnchor:ie(ae,$).getCenter()}O.getSourceEndpoint=b;function u(ae,$){return ae.targetAnchor?ae.targetAnchor:T(ae,$).getCenter()}O.getTargetEndpoint=u;function a(ae,$,te,fe,B){const he=360/te,z=ae.theta(o(ae,$,fe,B)),ee=J.Angle.normalize(z+he/2);return he*Math.floor(ee/he)}O.getDirectionAngle=a;function o(ae,$,te,fe){const B=fe.step,he=$.x-ae.x,z=$.y-ae.y,ee=he/te.x,pe=z/te.y,S=ee*B,q=pe*B;return new J.Point(ae.x+S,ae.y+q)}function l(ae,$){const te=Math.abs(ae-$);return te>180?360-te:te}O.getDirectionChange=l;function r(ae,$){const te=$.step;return $.directions.forEach(fe=>{fe.gridOffsetX=fe.offsetX/te*ae.x,fe.gridOffsetY=fe.offsetY/te*ae.y}),$.directions}O.getGridOffsets=r;function e(ae,$,te){return{source:$.clone(),x:t(te.x-$.x,ae),y:t(te.y-$.y,ae)}}O.getGrid=e;function t(ae,$){if(!ae)return $;const te=Math.abs(ae),fe=Math.round(te/$);if(!fe)return te;const B=fe*$,z=(te-B)/fe;return $+z}function s(ae,$){const te=$.source,fe=J.GeometryUtil.snapToGrid(ae.x-te.x,$.x)+te.x,B=J.GeometryUtil.snapToGrid(ae.y-te.y,$.y)+te.y;return new J.Point(fe,B)}function h(ae,$){return ae.round($)}O.round=h;function m(ae,$,te){return h(s(ae.clone(),$),te)}O.align=m;function d(ae){return ae.toString()}O.getKey=d;function v(ae){return new J.Point(ae.x===0?0:Math.abs(ae.x)/ae.x,ae.y===0?0:Math.abs(ae.y)/ae.y)}O.normalizePoint=v;function x(ae,$){let te=1/0;for(let fe=0,B=$.length;fe<B;fe+=1){const he=ae.manhattanDistance($[fe]);he<te&&(te=he)}return te}O.getCost=x;function N(ae,$,te,fe,B){const he=B.precision,z=B.directionMap,ee=ae.diff($.getCenter()),pe=Object.keys(z).reduce((S,q)=>{if(te.includes(q)){const M=z[q],I=new J.Point(ae.x+M.x*(Math.abs(ee.x)+$.width),ae.y+M.y*(Math.abs(ee.y)+$.height)),ue=new J.Line(ae,I).intersect($)||[];let se,Ee=null;for(let Ce=0;Ce<ue.length;Ce+=1){const xe=ue[Ce],Oe=ae.squaredDistance(xe);(se==null||Oe>se)&&(se=Oe,Ee=xe)}if(Ee){let Ce=m(Ee,fe,he);$.containsPoint(Ce)&&(Ce=m(Ce.translate(M.x*fe.x,M.y*fe.y),fe,he)),S.push(Ce)}}return S},[]);return $.containsPoint(ae)||pe.push(m(ae,fe,he)),pe}O.getRectPoints=N;function F(ae,$,te,fe,B){const he=[];let z=v(B.diff(te)),ee=d(te),pe=ae[ee],S;for(;pe;){S=$[ee];const I=v(S.diff(pe));I.equals(z)||(he.unshift(S),z=I),ee=d(pe),pe=ae[ee]}const q=$[ee];return v(q.diff(fe)).equals(z)||he.unshift(q),he}O.reconstructRoute=F},15572:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.metro=void 0;const J=V(35695),ie=V(62595),T=V(97011),b=V(98694),u={maxDirectionChange:45,directions(){const o=(0,T.resolve)(this.step,this),l=(0,T.resolve)(this.cost,this),r=Math.ceil(Math.sqrt(o*o<<1));return[{cost:l,offsetX:o,offsetY:0},{cost:r,offsetX:o,offsetY:o},{cost:l,offsetX:0,offsetY:o},{cost:r,offsetX:-o,offsetY:o},{cost:l,offsetX:-o,offsetY:0},{cost:r,offsetX:-o,offsetY:-o},{cost:l,offsetX:0,offsetY:-o},{cost:r,offsetX:o,offsetY:-o}]},fallbackRoute(o,l,r){const e=o.theta(l),t=[];let s={x:l.x,y:o.y},h={x:o.x,y:l.y};if(e%180>90){const z=s;s=h,h=z}const m=e%90<45?s:h,d=new ie.Line(o,m),v=90*Math.ceil(e/90),x=ie.Point.fromPolar(d.squaredLength(),ie.Angle.toRad(v+135),m),N=new ie.Line(l,x),F=d.intersectsWithLine(N),ae=F||l,$=F?ae:o,te=360/r.directions.length,fe=$.theta(l),B=ie.Angle.normalize(fe+te/2),he=te*Math.floor(B/te);return r.previousDirectionAngle=he,ae&&t.push(ae.round()),t.push(l),t}},a=function(o,l,r){return J.FunctionExt.call(b.manhattan,this,o,Object.assign(Object.assign({},u),l),r)};O.metro=a},9782:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.normal=void 0;const V=function(J){return[...J]};O.normal=V},53505:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.oneSide=void 0;const J=V(35695),ie=function(T,b,u){const a=b.side||"bottom",o=J.NumberExt.normalizeSides(b.padding||40),l=u.sourceBBox,r=u.targetBBox,e=l.getCenter(),t=r.getCenter();let s,h,m;switch(a){case"top":m=-1,s="y",h="height";break;case"left":m=-1,s="x",h="width";break;case"right":m=1,s="x",h="width";break;case"bottom":default:m=1,s="y",h="height";break}return e[s]+=m*(l[h]/2+o[a]),t[s]+=m*(r[h]/2+o[a]),m*(e[s]-t[s])>0?t[s]=e[s]:e[s]=t[s],[e.toJSON(),...T,t.toJSON()]};O.oneSide=ie},18813:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t);var h=Object.getOwnPropertyDescriptor(e,t);(!h||("get"in h?!e.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,s,h)}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),ie=this&&this.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),T=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&J(e,r,t);return ie(e,r),e};Object.defineProperty(O,"__esModule",{value:!0}),O.orth=void 0;const b=V(35695),u=V(62595),a=T(V(97137)),o=function(r,e,t){let s=a.getSourceBBox(t,e),h=a.getTargetBBox(t,e);const m=a.getSourceAnchor(t,e),d=a.getTargetAnchor(t,e);s=s.union(a.getPointBBox(m)),h=h.union(a.getPointBBox(d));const v=r.map(F=>u.Point.create(F));v.unshift(m),v.push(d);let x=null;const N=[];for(let F=0,ae=v.length-1;F<ae;F+=1){let $=null;const te=v[F],fe=v[F+1],B=l.getBearing(te,fe)!=null;if(F===0)F+1===ae?s.intersectsWithRect(h.clone().inflate(1))?$=l.insideNode(te,fe,s,h):B||($=l.nodeToNode(te,fe,s,h)):s.containsPoint(fe)?$=l.insideNode(te,fe,s,a.getPointBBox(fe).moveAndExpand(a.getPaddingBox(e))):B||($=l.nodeToVertex(te,fe,s));else if(F+1===ae){const he=B&&l.getBearing(fe,te)===x;h.containsPoint(te)||he?$=l.insideNode(te,fe,a.getPointBBox(te).moveAndExpand(a.getPaddingBox(e)),h,x):B||($=l.vertexToNode(te,fe,h,x))}else B||($=l.vertexToVertex(te,fe,x));$?(N.push(...$.points),x=$.direction):x=l.getBearing(te,fe),F+1<ae&&N.push(fe)}return N};O.orth=o;var l;(function(r){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function s(ae,$,te){let fe=new u.Point(ae.x,$.y);return te.containsPoint(fe)&&(fe=new u.Point($.x,ae.y)),fe}function h(ae,$){return ae[$==="W"||$==="E"?"width":"height"]}r.getBBoxSize=h;function m(ae,$){return ae.x===$.x?ae.y>$.y?"N":"S":ae.y===$.y?ae.x>$.x?"W":"E":null}r.getBearing=m;function d(ae,$,te){const fe=new u.Point(ae.x,$.y),B=new u.Point($.x,ae.y),he=m(ae,fe),z=m(ae,B),ee=te?e[te]:null,pe=he===te||he!==ee&&(z===ee||z!==te)?fe:B;return{points:[pe],direction:m(pe,$)}}r.vertexToVertex=d;function v(ae,$,te){const fe=s(ae,$,te);return{points:[fe],direction:m(fe,$)}}r.nodeToVertex=v;function x(ae,$,te,fe){const B=[new u.Point(ae.x,$.y),new u.Point($.x,ae.y)],he=B.filter(pe=>!te.containsPoint(pe)),z=he.filter(pe=>m(pe,ae)!==fe);let ee;if(z.length>0)return ee=z.filter(pe=>m(ae,pe)===fe).pop(),ee=ee||z[0],{points:[ee],direction:m(ee,$)};{ee=b.ArrayExt.difference(B,he)[0];const pe=u.Point.create($).move(ee,-h(te,fe)/2);return{points:[s(pe,ae,te),pe],direction:m(pe,$)}}}r.vertexToNode=x;function N(ae,$,te,fe){let B=v($,ae,fe);const he=B.points[0];if(te.containsPoint(he)){B=v(ae,$,te);const z=B.points[0];if(fe.containsPoint(z)){const ee=u.Point.create(ae).move(z,-h(te,m(ae,z))/2),pe=u.Point.create($).move(he,-h(fe,m($,he))/2),S=new u.Line(ee,pe).getCenter(),q=v(ae,S,te),M=d(S,$,q.direction);B.points=[q.points[0],M.points[0]],B.direction=M.direction}}return B}r.nodeToNode=N;function F(ae,$,te,fe,B){const he=te.union(fe).inflate(1),z=he.getCenter(),ee=z.distance($)>z.distance(ae),pe=ee?$:ae,S=ee?ae:$;let q,M,I;B?(q=u.Point.fromPolar(he.width+he.height,t[B],pe),q=he.getNearestPointToPoint(q).move(q,-1)):q=he.getNearestPointToPoint(pe).move(pe,1),M=s(q,S,he);let j;q.round().equals(M.round())?(M=u.Point.fromPolar(he.width+he.height,u.Angle.toRad(q.theta(pe))+Math.PI/2,S),M=he.getNearestPointToPoint(M).move(S,1).round(),I=s(q,M,he),j=ee?[M,I,q]:[q,I,M]):j=ee?[M,q]:[q,M];const ue=m(ee?q:M,$);return{points:j,direction:ue}}r.insideNode=F})(l||(l={}))},97137:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getTargetAnchor=O.getSourceAnchor=O.getTargetBBox=O.getSourceBBox=O.getPaddingBox=O.getPointBBox=void 0;const J=V(35695),ie=V(62595);function T(r){return new ie.Rectangle(r.x,r.y,0,0)}O.getPointBBox=T;function b(r={}){const e=J.NumberExt.normalizeSides(r.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}O.getPaddingBox=b;function u(r,e={}){return r.sourceBBox.clone().moveAndExpand(b(e))}O.getSourceBBox=u;function a(r,e={}){return r.targetBBox.clone().moveAndExpand(b(e))}O.getTargetBBox=a;function o(r,e={}){return r.sourceAnchor?r.sourceAnchor:u(r,e).getCenter()}O.getSourceAnchor=o;function l(r,e={}){return r.targetAnchor?r.targetAnchor:a(r,e).getCenter()}O.getTargetAnchor=l},74051:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t);var h=Object.getOwnPropertyDescriptor(e,t);(!h||("get"in h?!e.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,s,h)}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),ie=this&&this.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),T=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&J(e,r,t);return ie(e,r),e};Object.defineProperty(O,"__esModule",{value:!0}),O.TargetAnchor=O.SourceAnchor=void 0;const b=V(35695),u=V(62595),a=V(39436),o=T(V(11062));class l extends a.ToolsView.ToolItem{get type(){return this.options.type}onRender(){b.Dom.addClass(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const e=this.type;return this.cellView.getTerminalView(e)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const s=this.type,h=this.cellView,m=this.options,d=h.getTerminalAnchor(s),v=h.cell.prop([s,"anchor"]);t.setAttribute("transform",`translate(${d.x}, ${d.y})`);const x=v?m.customAnchorAttrs:m.defaultAnchorAttrs;x&&Object.keys(x).forEach(N=>{t.setAttribute(N,x[N])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const s=this.type,h=this.cellView,m=h.getTerminalView(s);if(m){const d=m.cell,v=h.getTerminalMagnet(s);let x=this.options.areaPadding||0;Number.isFinite(x)||(x=0);let N,F,ae;m.isEdgeElement(v)?(N=m.getBBox(),F=0,ae=N.getCenter()):(N=m.getUnrotatedBBoxOfElement(v),F=d.getAngle(),ae=N.getCenter(),F&&ae.rotate(-F,d.getBBox().getCenter())),N.inflate(x),b.Dom.attr(t,{x:-N.width/2,y:-N.height/2,width:N.width,height:N.height,transform:`translate(${ae.x}, ${ae.y}) rotate(${F})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,s=this.cell;e?s.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):s.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,s=this.cellView,h=s.getTerminalView(t);if(h==null)return;const m=this.normalizeEvent(e),d=h.cell,v=s.getTerminalMagnet(t);let x=this.graph.coord.clientToLocalPoint(m.clientX,m.clientY);const N=this.options.snap;if(typeof N=="function"){const $=b.FunctionExt.call(N,s,x,h,v,t,s,this);x=u.Point.create($)}if(this.options.restrictArea)if(h.isEdgeElement(v)){const $=h.getClosestPoint(x);$&&(x=$)}else{const $=h.getUnrotatedBBoxOfElement(v),te=d.getAngle(),fe=d.getBBox().getCenter(),B=x.clone().rotate(te,fe);$.containsPoint(B)||(x=$.getNearestPointToPoint(B).rotate(-te,fe))}let F;const ae=this.options.anchor;typeof ae=="function"&&(F=b.FunctionExt.call(ae,s,x,h,v,t,s,this)),this.resetAnchor(F),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}(function(r){r.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:o.getAnchor,snap(e,t,s,h,m,d){const v=d.options.snapRadius||0,x=h==="source",N=x?0:-1,F=this.cell.getVertexAt(N)||this.getTerminalAnchor(x?"target":"source");return F&&(Math.abs(F.x-e.x)<v&&(e.x=F.x),Math.abs(F.y-e.y)<v&&(e.y=F.y)),e}})})(l||(l={})),O.SourceAnchor=l.define({name:"source-anchor",type:"source"}),O.TargetAnchor=l.define({name:"target-anchor",type:"target"})},2914:function(bt,O,V){"use strict";var J=this&&this.__rest||function(a,o){var l={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&o.indexOf(r)<0&&(l[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,r=Object.getOwnPropertySymbols(a);e<r.length;e++)o.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(a,r[e])&&(l[r[e]]=a[r[e]]);return l};Object.defineProperty(O,"__esModule",{value:!0}),O.TargetArrowhead=O.SourceArrowhead=void 0;const ie=V(35695),T=V(62595),b=V(39436);class u extends b.ToolsView.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const o=this.options.attrs,{class:l}=o,r=J(o,["class"]);this.setAttrs(r,this.container),l&&ie.Dom.addClass(this.container,l)}}onRender(){ie.Dom.addClass(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const o=this.ratio,l=this.cellView,r=l.getTangentAtRatio(o),e=r?r.start:l.getPointAtRatio(o),t=r&&r.vector().vectorAngle(new T.Point(1,0))||0;if(!e)return this;const s=ie.Dom.createSVGMatrix().translate(e.x,e.y).rotate(t);return ie.Dom.transform(this.container,s,{absolute:!0}),this}onMouseDown(o){if(this.guard(o))return;o.stopPropagation(),o.preventDefault();const l=this.cellView;if(l.can("arrowheadMovable")){l.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const r=this.graph.snapToGrid(o.clientX,o.clientY),e=l.prepareArrowheadDragging(this.type,{x:r.x,y:r.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(o,e),this.delegateDocumentEvents(this.options.documentEvents,o.data),l.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(o){const l=this.normalizeEvent(o),r=this.graph.snapToGrid(l.clientX,l.clientY);this.cellView.onMouseMove(l,r.x,r.y),this.update()}onMouseUp(o){this.undelegateDocumentEvents();const l=this.normalizeEvent(o),r=this.cellView,e=this.graph.snapToGrid(l.clientX,l.clientY);r.onMouseUp(l,e.x,e.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",r.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(a){a.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(u||(u={})),O.SourceArrowhead=u.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),O.TargetArrowhead=u.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}})},61177:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t);var h=Object.getOwnPropertyDescriptor(e,t);(!h||("get"in h?!e.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,s,h)}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),ie=this&&this.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),T=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&J(e,r,t);return ie(e,r),e},b=this&&this.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,s=Object.getOwnPropertySymbols(r);h<s.length;h++)e.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(r,s[h])&&(t[s[h]]=r[s[h]]);return t};Object.defineProperty(O,"__esModule",{value:!0}),O.Boundary=void 0;const u=V(35695),a=V(39436),o=T(V(11062));class l extends a.ToolsView.ToolItem{onRender(){if(u.Dom.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,s=b(e,["class"]);u.Dom.attr(this.container,u.Dom.kebablizeAttrs(s)),t&&u.Dom.addClass(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:s,rotate:h}=t,m=u.NumberExt.normalizeSides(t.padding);let d=o.getViewBBox(e,s).moveAndExpand({x:-m.left,y:-m.top,width:m.left+m.right,height:m.top+m.bottom});const v=e.cell;if(v.isNode()){const x=v.getAngle();if(x)if(h){const N=v.getBBox().getCenter();u.Dom.rotate(this.container,x,N.x,N.y,{absolute:!0})}else d=d.bbox(x)}return u.Dom.attr(this.container,d.toJSON()),this}}O.Boundary=l,function(r){r.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(l=O.Boundary||(O.Boundary={}))},9912:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(r,e,t,s){s===void 0&&(s=t);var h=Object.getOwnPropertyDescriptor(e,t);(!h||("get"in h?!e.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,s,h)}:function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]}),ie=this&&this.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),T=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&J(e,r,t);return ie(e,r),e};Object.defineProperty(O,"__esModule",{value:!0}),O.Button=void 0;const b=V(62595),u=V(35695),a=V(39436),o=T(V(11062));class l extends a.ToolsView.ToolItem{onRender(){u.Dom.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();u.Dom.transform(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:s=0,y:h=0}=t;const{offset:m,useCellGeometry:d,rotate:v}=t;let x=o.getViewBBox(e,d);const N=e.cell.getAngle();v||(x=x.bbox(N));let F=0,ae=0;typeof m=="number"?(F=m,ae=m):typeof m=="object"&&(F=m.x,ae=m.y),s=u.NumberExt.normalizePercentage(s,x.width),h=u.NumberExt.normalizePercentage(h,x.height);let $=u.Dom.createSVGMatrix().translate(x.x+x.width/2,x.y+x.height/2);return v&&($=$.rotate(N)),$=$.translate(s+F-x.width/2,h+ae-x.height/2),$}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:s=0,distance:h=0,rotate:m}=t;let d,v,x;const N=u.NumberExt.normalizePercentage(h,1);N>=0&&N<=1?d=e.getTangentAtRatio(N):d=e.getTangentAtLength(N),d?(v=d.start,x=d.vector().vectorAngle(new b.Point(1,0))||0):(v=e.getConnection().start,x=0);let F=u.Dom.createSVGMatrix().translate(v.x,v.y).rotate(x);return typeof s=="object"?F=F.translate(s.x||0,s.y||0):F=F.translate(0,s),m||(F=F.rotate(-x)),F}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;typeof t=="function"&&u.FunctionExt.call(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}O.Button=l,function(r){r.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})}(l=O.Button||(O.Button={})),function(r){r.Remove=r.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(l=O.Button||(O.Button={}))},66064:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.CellEditor=void 0;const J=V(62595),ie=V(35695),T=V(39436),b=V(56994);class u extends T.ToolsView.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const o=this.cellView;o&&o.on("cell:dblclick",this.dblClick)}createElement(){const o=[this.prefixClassName(`${this.cell.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=T.ToolsView.createElement("div",!1),this.addClass(o,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:o,editor:l}=this;if(!l)return;const{style:r}=l;o.isNode()?this.updateNodeEditorTransform():o.isEdge()&&this.updateEdgeEditorTransform();const{attrs:e}=this.options;r.fontSize=`${e.fontSize}px`,r.fontFamily=e.fontFamily,r.color=e.color,r.backgroundColor=e.backgroundColor;const t=this.getCellText()||"";return l.innerText=t,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:o,cell:l,editor:r}=this;if(!r)return;let e=J.Point.create(),t=20,s="",{x:h,y:m}=this.options;const{width:d,height:v}=this.options;if(typeof h!="undefined"&&typeof m!="undefined"){const F=l.getBBox();h=ie.NumberExt.normalizePercentage(h,F.width),m=ie.NumberExt.normalizePercentage(m,F.height),e=F.topLeft.translate(h,m),t=F.width-h*2}else{const F=l.getBBox();e=F.center,t=F.width-4,s="translate(-50%, -50%)"}const x=o.scale(),{style:N}=r;e=o.localToGraph(e),N.left=`${e.x}px`,N.top=`${e.y}px`,N.transform=`scale(${x.sx}, ${x.sy}) ${s}`,N.minWidth=`${t}px`,typeof d=="number"&&(N.width=`${d}px`),typeof v=="number"&&(N.height=`${v}px`)}updateEdgeEditorTransform(){if(!this.event)return;const{graph:o,editor:l}=this;if(!l)return;let r=J.Point.create(),e=20;const{style:t}=l,s=this.event.target,h=s.parentElement;if(h&&ie.Dom.hasClass(h,this.prefixClassName("edge-label"))){const v=h.getAttribute("data-index")||"0";this.labelIndex=parseInt(v,10);const x=h.getAttribute("transform"),{translation:N}=ie.Dom.parseTransformString(x);r=new J.Point(N.tx,N.ty),e=b.Util.getBBox(s).width}else{if(!this.options.labelAddable)return this;r=o.clientToLocal(J.Point.create(this.event.clientX,this.event.clientY));const x=this.cellView.path.closestPointLength(r);this.distance=x,this.labelIndex=-1}r=o.localToGraph(r);const d=o.scale();t.left=`${r.x}px`,t.top=`${r.y}px`,t.minWidth=`${e}px`,t.transform=`scale(${d.sx}, ${d.sy}) translate(-50%, -50%)`}onDocumentMouseUp(o){if(this.editor&&o.target!==this.editor){const l=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(l!==""?l:null),this.removeElement()}}onCellDblClick({e:o}){this.editor||(o.stopPropagation(),this.removeElement(),this.event=o,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents))}onMouseDown(o){o.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const o=document.createRange(),l=window.getSelection();o.selectNodeContents(this.editor),l.removeAllRanges(),l.addRange(o)}}getCellText(){const{getText:o}=this.options;if(typeof o=="function")return ie.FunctionExt.call(o,this.cellView,{cell:this.cell,index:this.labelIndex});if(typeof o=="string"){if(this.cell.isNode())return this.cell.attr(o);if(this.cell.isEdge()&&this.labelIndex!==-1)return this.cell.prop(`labels/${this.labelIndex}/attrs/${o}`)}}setCellText(o){const l=this.options.setText;if(typeof l=="function"){ie.FunctionExt.call(l,this.cellView,{cell:this.cell,value:o,index:this.labelIndex,distance:this.distance});return}if(typeof l=="string"){if(this.cell.isNode()){o!==null&&this.cell.attr(l,o);return}if(this.cell.isEdge()){const r=this.cell;if(this.labelIndex===-1){if(o){const e={position:{distance:this.distance},attrs:{}};ie.ObjectExt.setByPath(e,`attrs/${l}`,o),r.appendLabel(e)}}else o!==null?r.prop(`labels/${this.labelIndex}/attrs/${l}`,o):typeof this.labelIndex=="number"&&r.removeLabelAt(this.labelIndex)}}}onRemove(){const o=this.cellView;o&&o.off("cell:dblclick",this.dblClick),this.removeElement()}}O.CellEditor=u,function(a){a.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mouseup:"onDocumentMouseUp",touchend:"onDocumentMouseUp",touchcancel:"onDocumentMouseUp"}})}(u=O.CellEditor||(O.CellEditor={})),function(a){a.NodeEditor=a.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),a.EdgeEditor=a.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})}(u=O.CellEditor||(O.CellEditor={}))},63011:function(bt,O,V){"use strict";var J=this&&this.__rest||function(h,m){var d={};for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&m.indexOf(v)<0&&(d[v]=h[v]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,v=Object.getOwnPropertySymbols(h);x<v.length;x++)m.indexOf(v[x])<0&&Object.prototype.propertyIsEnumerable.call(h,v[x])&&(d[v[x]]=h[v[x]]);return d};Object.defineProperty(O,"__esModule",{value:!0}),O.EdgeTool=O.NodeTool=void 0;const ie=V(77403),T=V(39436),b=V(9912),u=V(61177),a=V(8114),o=V(96402),l=V(74051),r=V(2914),e=V(66064);var t;(function(h){h.presets={boundary:u.Boundary,button:b.Button,"button-remove":b.Button.Remove,"node-editor":e.CellEditor.NodeEditor},h.registry=ie.Registry.create({type:"node tool",process(m,d){if(typeof d=="function")return d;let v=T.ToolsView.ToolItem;const{inherit:x}=d,N=J(d,["inherit"]);if(x){const F=this.get(x);F==null?this.onNotFound(x,"inherited"):v=F}return N.name==null&&(N.name=m),v.define.call(v,N)}}),h.registry.register(h.presets,!0)})(t=O.NodeTool||(O.NodeTool={}));var s;(function(h){h.presets={boundary:u.Boundary,vertices:a.Vertices,segments:o.Segments,button:b.Button,"button-remove":b.Button.Remove,"source-anchor":l.SourceAnchor,"target-anchor":l.TargetAnchor,"source-arrowhead":r.SourceArrowhead,"target-arrowhead":r.TargetArrowhead,"edge-editor":e.CellEditor.EdgeEditor},h.registry=ie.Registry.create({type:"edge tool",process(m,d){if(typeof d=="function")return d;let v=T.ToolsView.ToolItem;const{inherit:x}=d,N=J(d,["inherit"]);if(x){const F=this.get(x);F==null?this.onNotFound(x,"inherited"):v=F}return N.name==null&&(N.name=m),v.define.call(v,N)}}),h.registry.register(h.presets,!0)})(s=O.EdgeTool||(O.EdgeTool={}))},96402:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(e,t,s,h){h===void 0&&(h=s);var m=Object.getOwnPropertyDescriptor(t,s);(!m||("get"in m?!t.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,h,m)}:function(e,t,s,h){h===void 0&&(h=s),e[h]=t[s]}),ie=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),T=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var s in e)s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)&&J(t,e,s);return ie(t,e),t};Object.defineProperty(O,"__esModule",{value:!0}),O.Segments=void 0;const b=V(35695),u=V(62595),a=V(33551),o=V(39436),l=T(V(11062));class r extends o.ToolsView.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){b.Dom.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const t=this.cellView,s=[...this.vertices];s.unshift(t.sourcePoint),s.push(t.targetPoint);for(let h=0,m=s.length;h<m-1;h+=1){const d=s[h],v=s[h+1],x=this.renderHandle(d,v,h);this.stamp(x.container),this.handles.push(x)}return this}renderHandle(t,s,h){const m=this.options.createHandle({index:h,graph:this.graph,guard:d=>this.guard(d),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(m),this.updateHandle(m,t,s),this.container.appendChild(m.container),this.startHandleListening(m),m}startHandleListening(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)}stopHandleListening(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(s=>{this.stopHandleListening(s),s.remove()})}shiftHandleIndexes(t){const s=this.handles;for(let h=0,m=s.length;h<m;h+=1)s[h].options.index+=t}resetAnchor(t,s){const h=this.cellView.cell,m={ui:!0,toolId:this.cid};s?h.prop([t,"anchor"],s,m):h.removeProp([t,"anchor"],m)}snapHandle(t,s,h){const m=t.options.axis,d=t.options.index,N=this.cellView.cell.getVertices(),F=N[d-2]||h.sourceAnchor,ae=N[d+1]||h.targetAnchor,$=this.options.snapRadius;return Math.abs(s[m]-F[m])<$?s[m]=F[m]:Math.abs(s[m]-ae[m])<$&&(s[m]=ae[m]),s}onHandleChanging({handle:t,e:s}){const h=this.graph,m=this.options,d=this.cellView,v=m.anchor,x=t.options.axis,N=t.options.index-1,F=this.getEventData(s),ae=this.normalizeEvent(s),$=h.snapToGrid(ae.clientX,ae.clientY),te=this.snapHandle(t,$.clone(),F),fe=b.ObjectExt.cloneDeep(this.vertices);let B=fe[N],he=fe[N+1];const z=d.sourceView,ee=d.sourceBBox;let pe=!1,S=!1;if(B?N===0?ee.containsPoint(B)?(fe.shift(),this.shiftHandleIndexes(-1),pe=!0):(B[x]=te[x],S=!0):B[x]=te[x]:(B=d.sourceAnchor.toJSON(),B[x]=te[x],ee.containsPoint(B)?pe=!0:(fe.unshift(B),this.shiftHandleIndexes(1),S=!0)),typeof v=="function"&&z){if(pe){const ue=F.sourceAnchor.clone();ue[x]=te[x];const se=b.FunctionExt.call(v,d,ue,z,d.sourceMagnet||z.container,"source",d,this);this.resetAnchor("source",se)}S&&this.resetAnchor("source",F.sourceAnchorDef)}const q=d.targetView,M=d.targetBBox;let I=!1,j=!1;if(he?N===fe.length-2?M.containsPoint(he)?(fe.pop(),I=!0):(he[x]=te[x],j=!0):he[x]=te[x]:(he=d.targetAnchor.toJSON(),he[x]=te[x],M.containsPoint(he)?I=!0:(fe.push(he),j=!0)),typeof v=="function"&&q){if(I){const ue=F.targetAnchor.clone();ue[x]=te[x];const se=b.FunctionExt.call(v,d,ue,q,d.targetMagnet||q.container,"target",d,this);this.resetAnchor("target",se)}j&&this.resetAnchor("target",F.targetAnchorDef)}u.Point.equalPoints(fe,this.vertices)||this.cellView.cell.setVertices(fe,{ui:!0,toolId:this.cid}),this.updateHandle(t,B,he,0),m.stopPropagation||d.notifyMouseMove(ae,$.x,$.y)}onHandleChange({handle:t,e:s}){const h=this.options,m=this.handles,d=this.cellView,v=t.options.index;if(Array.isArray(m)){for(let x=0,N=m.length;x<N;x+=1)x!==v&&m[x].hide();if(this.focus(),this.setEventData(s,{sourceAnchor:d.sourceAnchor.clone(),targetAnchor:d.targetAnchor.clone(),sourceAnchorDef:b.ObjectExt.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:b.ObjectExt.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!h.stopPropagation){const x=this.normalizeEvent(s),N=this.graph.snapToGrid(x.clientX,x.clientY);d.notifyMouseDown(x,N.x,N.y)}}}onHandleChanged({e:t}){const s=this.options,h=this.cellView;s.removeRedundancies&&h.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const m=this.normalizeEvent(t),d=this.graph.snapToGrid(m.clientX,m.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),s.stopPropagation||h.notifyMouseUp(m,d.x,d.y),h.checkMouseleave(m),s.onChanged&&s.onChanged({edge:h.cell,edgeView:h})}updateHandle(t,s,h,m=0){const d=this.options.precision||0,v=Math.abs(s.x-h.x)<d,x=Math.abs(s.y-h.y)<d;if(v||x){const N=new u.Line(s,h);if(N.length()<this.options.threshold)t.hide();else{const ae=N.getCenter(),$=v?"x":"y";ae[$]+=m||0;const te=N.vector().vectorAngle(new u.Point(1,0));t.updatePosition(ae.x,ae.y,te,this.cellView),t.show(),t.options.axis=$}}else t.hide()}onRemove(){this.resetHandles()}}O.Segments=r,function(e){class t extends a.View{constructor(h){super(),this.options=h,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=a.View.createElement("rect",!0);const h=this.options.attrs;if(typeof h=="function"){const m=e.getDefaults();this.setAttrs(Object.assign(Object.assign({},m.attrs),h(this)))}else this.setAttrs(h);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(h,m,d,v){const x=v.getClosestPoint(new u.Point(h,m))||new u.Point(h,m);let N=b.Dom.createSVGMatrix().translate(x.x,x.y);if(x.equals({x:h,y:m}))N=N.rotate(d);else{let ae=new u.Line(h,m,x.x,x.y).vector().vectorAngle(new u.Point(1,0));ae!==0&&(ae+=90),N=N.rotate(ae)}this.setAttrs({transform:b.Dom.matrixToTransformString(N),cursor:d%180===0?"row-resize":"col-resize"})}onMouseDown(h){this.options.guard(h)||(this.trigger("change",{e:h,handle:this}),h.stopPropagation(),h.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},h.data))}onMouseMove(h){this.emit("changing",{e:h,handle:this})}onMouseUp(h){this.emit("changed",{e:h,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}e.Handle=t}(r=O.Segments||(O.Segments={})),function(e){e.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:t=>new e.Handle(t),anchor:l.getAnchor})}(r=O.Segments||(O.Segments={}))},11062:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getViewBBox=O.getAnchor=void 0;const J=V(35695),ie=V(80703);function T(u,a,o,l){return J.FunctionExt.call(ie.ConnectionStrategy.presets.pinRelative,this.graph,{},a,o,u,this.cell,l,{}).anchor}O.getAnchor=T;function b(u,a){return a?u.cell.getBBox():u.cell.isEdge()?u.getConnection().bbox():u.getUnrotatedBBoxOfElement(u.container)}O.getViewBBox=b},8114:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Vertices=void 0;const J=V(62595),ie=V(35695),T=V(7090),b=V(33551),u=V(39436);class a extends u.ToolsView.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const l=this.handles;this.handles=[],l&&l.forEach(r=>{this.stopHandleListening(r),r.remove()})}renderHandles(){const l=this.vertices;for(let r=0,e=l.length;r<e;r+=1){const t=l[r],s=this.options.createHandle,h=this.options.processHandle,m=s({index:r,graph:this.graph,guard:d=>this.guard(d),attrs:this.options.attrs||{}});h&&h(m),m.updatePosition(t.x,t.y),this.stamp(m.container),this.container.appendChild(m.container),this.handles.push(m),this.startHandleListening(m)}}updateHandles(){const l=this.vertices;for(let r=0,e=l.length;r<e;r+=1){const t=l[r],s=this.handles[r];s&&s.updatePosition(t.x,t.y)}}updatePath(){const l=this.childNodes.connection;l&&l.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(l){const r=this.cellView;r.can("vertexMovable")&&(l.on("change",this.onHandleChange,this),l.on("changing",this.onHandleChanging,this),l.on("changed",this.onHandleChanged,this)),r.can("vertexDeletable")&&l.on("remove",this.onHandleRemove,this)}stopHandleListening(l){const r=this.cellView;r.can("vertexMovable")&&(l.off("change",this.onHandleChange,this),l.off("changing",this.onHandleChanging,this),l.off("changed",this.onHandleChanged,this)),r.can("vertexDeletable")&&l.off("remove",this.onHandleRemove,this)}getNeighborPoints(l){const r=this.cellView,e=this.vertices,t=l>0?e[l-1]:r.sourceAnchor,s=l<e.length-1?e[l+1]:r.targetAnchor;return{prev:J.Point.create(t),next:J.Point.create(s)}}getMouseEventArgs(l){const r=this.normalizeEvent(l),{x:e,y:t}=this.graph.snapToGrid(r.clientX,r.clientY);return{e:r,x:e,y:t}}onHandleChange({e:l}){this.focus();const r=this.cellView;if(r.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e,x:t,y:s}=this.getMouseEventArgs(l);this.eventData(e,{start:{x:t,y:s}}),r.notifyMouseDown(e,t,s)}}onHandleChanging({handle:l,e:r}){const e=this.cellView,t=l.options.index,{e:s,x:h,y:m}=this.getMouseEventArgs(r),d={x:h,y:m};this.snapVertex(d,t),e.cell.setVertexAt(t,d,{ui:!0,toolId:this.cid}),l.updatePosition(d.x,d.y),this.options.stopPropagation||e.notifyMouseMove(s,h,m)}stopBatch(l){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),l&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}onHandleChanged({e:l}){const r=this.options,e=this.cellView;if(r.addable&&this.updatePath(),!r.removeRedundancies){this.stopBatch(this.eventData(l).vertexAdded);return}e.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(l).vertexAdded);const{e:s,x:h,y:m}=this.getMouseEventArgs(l);if(!this.options.stopPropagation){e.notifyMouseUp(s,h,m);const{start:d}=this.eventData(s);if(d){const{x:v,y:x}=d;v===h&&x===m&&e.onClick(s,h,m)}}e.checkMouseleave(s),r.onChanged&&r.onChanged({edge:e.cell,edgeView:e})}snapVertex(l,r){const e=this.options.snapRadius||0;if(e>0){const t=this.getNeighborPoints(r),s=t.prev,h=t.next;Math.abs(l.x-s.x)<e?l.x=s.x:Math.abs(l.x-h.x)<e&&(l.x=h.x),Math.abs(l.y-s.y)<e?l.y=t.prev.y:Math.abs(l.y-h.y)<e&&(l.y=h.y)}}onHandleRemove({handle:l,e:r}){if(this.options.removable){const e=l.options.index,t=this.cellView;t.cell.removeVertexAt(e,{ui:!0}),this.options.addable&&this.updatePath(),t.checkMouseleave(this.normalizeEvent(r))}}allowAddVertex(l){const r=this.guard(l),e=this.options.addable&&this.cellView.can("vertexAddable"),t=this.options.modifiers?ie.ModifierKey.isMatch(l,this.options.modifiers):!0;return!r&&e&&t}onPathMouseDown(l){const r=this.cellView;if(!this.allowAddVertex(l))return;l.stopPropagation(),l.preventDefault();const e=this.normalizeEvent(l),t=this.graph.snapToGrid(e.clientX,e.clientY).toJSON();r.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const s=r.getVertexIndex(t.x,t.y);this.snapVertex(t,s),r.cell.insertVertex(t,s,{ui:!0,toolId:this.cid}),this.render();const h=this.handles[s];this.eventData(e,{vertexAdded:!0}),h.onMouseDown(e)}onRemove(){this.resetHandles()}}O.Vertices=a,function(o){class l extends b.View{get graph(){return this.options.graph}constructor(e){super(),this.options=e,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=b.View.createElement("circle",!0);const e=this.options.attrs;if(typeof e=="function"){const t=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},t.attrs),e(this)))}else this.setAttrs(e);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(e,t){this.setAttrs({cx:e,cy:t})}onMouseDown(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},e.data),this.emit("change",{e,handle:this}))}onMouseMove(e){this.emit("changing",{e,handle:this})}onMouseUp(e){this.emit("changed",{e,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(e){this.emit("remove",{e,handle:this})}}o.Handle=l}(a=O.Vertices||(O.Vertices={})),function(o){const l=T.Config.prefix("edge-tool-vertex-path");o.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:r=>new o.Handle(r),markup:[{tagName:"path",selector:"connection",className:l,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${l}`]:"onPathMouseDown",[`touchstart .${l}`]:"onPathMouseDown"}})}(a=O.Vertices||(O.Vertices={}))},54450:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(59908),O)},70894:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.JOB_PRIORITY=O.JobQueue=void 0;class V{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(T){if(T.priority&J.PRIOR)T.cb();else{const b=this.findInsertionIndex(T);b>=0&&this.queue.splice(b,0,T)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const T=this.getCurrentTime();let b;for(;(b=this.queue.shift())&&(b.cb(),!(this.getCurrentTime()-T>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){this.isFlushPending=!1,this.isFlushing=!0;let T;for(;T=this.queue.shift();)try{T.cb()}catch(b){console.log(b)}this.isFlushing=!1}findInsertionIndex(T){let b=0,u=this.queue.length,a=u-1;const o=T.priority;for(;b<=a;){const l=(a-b>>1)+b;o<=this.queue[l].priority?b=l+1:(u=l,a=l-1)}return u}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return typeof performance=="object"&&typeof performance.now=="function"?performance.now():Date.now()-this.initialTime}}O.JobQueue=V;var J;(function(ie){ie[ie.Update=2]="Update",ie[ie.RenderEdge=4]="RenderEdge",ie[ie.RenderNode=8]="RenderNode",ie[ie.PRIOR=1048576]="PRIOR"})(J=O.JOB_PRIORITY||(O.JOB_PRIORITY={}))},59908:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(l,r,e,t){var s=arguments.length,h=s<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,e):t,m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(l,r,e,t);else for(var d=l.length-1;d>=0;d--)(m=l[d])&&(h=(s<3?m(h):s>3?m(r,e,h):m(r,e))||h);return s>3&&h&&Object.defineProperty(r,e,h),h};Object.defineProperty(O,"__esModule",{value:!0}),O.Renderer=void 0;const ie=V(62595),T=V(46764),b=V(67861),u=V(88146),a=V(56994);class o extends T.Base{constructor(){super(...arguments),this.schedule=new u.Scheduler(this.graph)}requestViewUpdate(r,e,t={}){this.schedule.requestViewUpdate(r,e,t)}isViewMounted(r){return this.schedule.isViewMounted(r)}setRenderArea(r){this.schedule.setRenderArea(r)}findViewByElem(r){if(r==null)return null;const e=this.options.container,t=typeof r=="string"?e.querySelector(r):r instanceof Element?r:r[0];if(t){const s=this.graph.view.findAttr("data-cell-id",t);if(s){const h=this.schedule.views;if(h[s])return h[s].view}}return null}findViewByCell(r){if(r==null)return null;const e=b.Cell.isCell(r)?r.id:r,t=this.schedule.views;return t[e]?t[e].view:null}findViewsFromPoint(r){const e={x:r.x,y:r.y};return this.model.getCells().map(t=>this.findViewByCell(t)).filter(t=>t!=null?a.Util.getBBox(t.container,{target:this.view.stage}).containsPoint(e):!1)}findEdgeViewsFromPoint(r,e=5){return this.model.getEdges().map(t=>this.findViewByCell(t)).filter(t=>{if(t!=null){const s=t.getClosestPoint(r);if(s)return s.distance(r)<=e}return!1})}findViewsInArea(r,e={}){const t=ie.Rectangle.create(r);return this.model.getCells().map(s=>this.findViewByCell(s)).filter(s=>{if(s){if(e.nodeOnly&&!s.isNodeView())return!1;const h=a.Util.getBBox(s.container,{target:this.view.stage});return h.width===0?h.inflate(1,0):h.height===0&&h.inflate(0,1),e.strict?t.containsRect(h):t.isIntersectWithRect(h)}return!1})}dispose(){this.schedule.dispose()}}J([T.Base.dispose()],o.prototype,"dispose",null),O.Renderer=o},88146:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(a,o,l,r){var e=arguments.length,t=e<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,l):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,o,l,r);else for(var h=a.length-1;h>=0;h--)(s=a[h])&&(t=(e<3?s(t):e>3?s(o,l,t):s(o,l))||t);return e>3&&t&&Object.defineProperty(o,l,t),t};Object.defineProperty(O,"__esModule",{value:!0}),O.Scheduler=void 0;const ie=V(35695),T=V(70982),b=V(70894);class u extends ie.Disposable{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(o){super(),this.views={},this.willRemoveViews={},this.queue=new b.JobQueue,this.graph=o,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:o}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews();const l=this.model.getCells();this.renderViews(l,Object.assign(Object.assign({},o),{queue:l.map(r=>r.id)}))}onCellAdded({cell:o,options:l}){this.renderViews([o],l)}onCellRemoved({cell:o}){this.removeViews([o])}onCellZIndexChanged({cell:o,options:l}){const r=this.views[o.id];r&&this.requestViewUpdate(r.view,u.FLAG_INSERT,l,b.JOB_PRIORITY.Update,!0)}onCellVisibleChanged({cell:o,current:l}){this.toggleVisible(o,!!l)}requestViewUpdate(o,l,r={},e=b.JOB_PRIORITY.Update,t=!0){const s=o.cell.id,h=this.views[s];if(!h)return;h.flag=l,h.options=r,(o.hasAction(l,["translate","resize","rotate"])||r.async===!1)&&(e=b.JOB_PRIORITY.PRIOR,t=!1),this.queue.queueJob({id:s,priority:e,cb:()=>{this.renderViewInArea(o,l,r);const v=r.queue;if(v){const x=v.indexOf(o.cell.id);x>=0&&v.splice(x,1),v.length===0&&this.graph.trigger("render:done")}}}),this.getEffectedEdges(o).forEach(v=>{this.requestViewUpdate(v.view,v.flag,r,e,!1)}),t&&this.flush()}setRenderArea(o){this.renderArea=o,this.flushWaitingViews()}isViewMounted(o){if(o==null)return!1;const l=this.views[o.cell.id];return l?l.state===u.ViewState.MOUNTED:!1}renderViews(o,l={}){o.sort((r,e)=>r.isNode()&&e.isEdge()?-1:0),o.forEach(r=>{const e=r.id,t=this.views;let s=0,h=t[e];if(h)s=u.FLAG_INSERT;else{const m=this.createCellView(r);m&&(m.graph=this.graph,s=u.FLAG_INSERT|m.getBootstrapFlag(),h={view:m,flag:s,options:l,state:u.ViewState.CREATED},this.views[e]=h)}h&&this.requestViewUpdate(h.view,s,l,this.getRenderPriority(h.view),!1)}),this.flush()}renderViewInArea(o,l,r={}){const e=o.cell,t=e.id,s=this.views[t];if(!s)return;let h=0;this.isUpdatable(o)?(h=this.updateView(o,l,r),s.flag=h):s.state===u.ViewState.MOUNTED?(h=this.updateView(o,l,r),s.flag=h):s.state=u.ViewState.WAITING,h&&e.isEdge()&&!(h&o.getFlag(["source","target"]))&&this.queue.queueJob({id:t,priority:b.JOB_PRIORITY.RenderEdge,cb:()=>{this.updateView(o,l,r)}})}removeViews(o){o.forEach(l=>{const r=l.id,e=this.views[r];e&&(this.willRemoveViews[r]=e,delete this.views[r],this.queue.queueJob({id:r,priority:this.getRenderPriority(e.view),cb:()=>{this.removeView(e.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaitingViews(){Object.values(this.views).forEach(o=>{if(o&&o.state===u.ViewState.WAITING){const{view:l,flag:r,options:e}=o;this.requestViewUpdate(l,r,e,this.getRenderPriority(l),!1)}}),this.flush()}updateView(o,l,r={}){if(o==null)return 0;if(T.CellView.isCellView(o)){if(l&u.FLAG_REMOVE)return this.removeView(o.cell),0;l&u.FLAG_INSERT&&(this.insertView(o),l^=u.FLAG_INSERT)}return l?o.confirmUpdate(l,r):0}insertView(o){const l=this.views[o.cell.id];if(l){const r=o.cell.getZIndex(),e=this.addZPivot(r);this.container.insertBefore(o.container,e),o.cell.isVisible()||this.toggleVisible(o.cell,!1),l.state=u.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:o})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(o=>{o&&this.removeView(o.view)}),this.views={},this.willRemoveViews={}}removeView(o){const l=o.cell,r=this.willRemoveViews[l.id];r&&o&&(r.view.remove(),delete this.willRemoveViews[l.id],this.graph.trigger("view:unmounted",{view:o}))}toggleVisible(o,l){const r=this.model.getConnectedEdges(o);for(let t=0,s=r.length;t<s;t+=1){const h=r[t];if(l){const m=h.getSourceCell(),d=h.getTargetCell();if(m&&!m.isVisible()||d&&!d.isVisible())continue;this.toggleVisible(h,!0)}else this.toggleVisible(h,!1)}const e=this.views[o.id];e&&ie.Dom.css(e.view.container,{display:l?"unset":"none"})}addZPivot(o=0){this.zPivots==null&&(this.zPivots={});const l=this.zPivots;let r=l[o];if(r)return r;r=l[o]=document.createComment(`z-index:${o+1}`);let e=-1/0;for(const s in l){const h=+s;h<o&&h>e&&(e=h,o-1)}const t=this.container;if(e!==-1/0){const s=l[e];t.insertBefore(r,s.nextSibling)}else t.insertBefore(r,t.firstChild);return r}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(o=>{o&&o.parentNode&&o.parentNode.removeChild(o)}),this.zPivots={}}createCellView(o){const l={graph:this.graph},r=this.graph.options.createCellView;if(r){const t=ie.FunctionExt.call(r,this.graph,o);if(t)return new t(o,l);if(t===null)return null}const e=o.view;if(e!=null&&typeof e=="string"){const t=T.CellView.registry.get(e);return t?new t(o,l):T.CellView.registry.onNotFound(e)}return o.isNode()?new T.NodeView(o,l):o.isEdge()?new T.EdgeView(o,l):null}getEffectedEdges(o){const l=[],r=o.cell,e=this.model.getConnectedEdges(r);for(let t=0,s=e.length;t<s;t+=1){const h=e[t],m=this.views[h.id];if(!m)continue;const d=m.view;if(!this.isViewMounted(d))continue;const v=["update"];h.getTargetCell()===r&&v.push("target"),h.getSourceCell()===r&&v.push("source"),l.push({id:h.id,view:d,flag:d.getFlag(v)})}return l}isUpdatable(o){if(o.isNodeView())return this.renderArea?this.renderArea.isIntersectWithRect(o.cell.getBBox()):!0;if(o.isEdgeView()){const l=o.cell,r=l.getSourceCell(),e=l.getTargetCell();if(this.renderArea&&r&&e)return this.renderArea.isIntersectWithRect(r.getBBox())||this.renderArea.isIntersectWithRect(e.getBBox())}return!0}getRenderPriority(o){return o.cell.isNode()?b.JOB_PRIORITY.RenderNode:b.JOB_PRIORITY.RenderEdge}dispose(){this.stopListening(),Object.keys(this.views).forEach(o=>{this.views[o].view.dispose()}),this.views={}}}J([ie.Disposable.dispose()],u.prototype,"dispose",null),O.Scheduler=u,function(a){a.FLAG_INSERT=1<<30,a.FLAG_REMOVE=1<<29,a.FLAG_RENDER=(1<<26)-1}(u=O.Scheduler||(O.Scheduler={})),function(a){let o;(function(l){l[l.CREATED=0]="CREATED",l[l.MOUNTED=1]="MOUNTED",l[l.WAITING=2]="WAITING"})(o=a.ViewState||(a.ViewState={}))}(u=O.Scheduler||(O.Scheduler={}))},50129:function(bt,O,V){"use strict";var J=this&&this.__rest||function(u,a){var o={};for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&a.indexOf(l)<0&&(o[l]=u[l]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(u);r<l.length;r++)a.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(u,l[r])&&(o[l[r]]=u[l[r]]);return o};Object.defineProperty(O,"__esModule",{value:!0}),O.Base=void 0;const ie=V(35695),T=V(67861);class b extends T.Node{get label(){return this.getLabel()}set label(a){this.setLabel(a)}getLabel(){return this.getAttrByPath("text/text")}setLabel(a,o){return a==null?this.removeLabel():this.setAttrByPath("text/text",a,o),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}O.Base=b,function(u){u.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},u.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},u.config({attrs:{text:Object.assign({},u.labelAttr)},propHooks(a){const{label:o}=a,l=J(a,["label"]);return o&&ie.ObjectExt.setByPath(l,"attrs/text/text",o),l},visible:!0})}(b=O.Base||(O.Base={}))},13703:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Circle=void 0;const J=V(77160);O.Circle=(0,J.createShape)("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}})},93982:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Edge=void 0;const J=V(51924);O.Edge=J.Edge.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}})},2061:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Ellipse=void 0;const J=V(77160);O.Ellipse=(0,J.createShape)("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}})},20182:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(r,e,t,s){var h=arguments.length,m=h<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(r,e,t,s);else for(var v=r.length-1;v>=0;v--)(d=r[v])&&(m=(h<3?d(m):h>3?d(e,t,m):d(e,t))||m);return h>3&&m&&Object.defineProperty(e,t,m),m},ie=this&&this.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,s=Object.getOwnPropertySymbols(r);h<s.length;h++)e.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(r,s[h])&&(t[s[h]]=r[s[h]]);return t};Object.defineProperty(O,"__esModule",{value:!0}),O.HTML=void 0;const T=V(35695),b=V(70982),u=V(37798),a=V(45170),o=V(4520);class l extends u.Node{}O.HTML=l,function(r){class e extends a.NodeView{init(){super.init(),this.cell.on("change:*",this.onCellChangeAny,this)}onCellChangeAny({key:s}){const h=r.shapeMaps[this.cell.shape];if(h){const{effect:m}=h;(!m||m.includes(s))&&this.renderHTMLComponent()}}confirmUpdate(s){const h=super.confirmUpdate(s);return this.handleAction(h,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const s=this.selectors&&this.selectors.foContent;if(s){T.Dom.empty(s);const h=r.shapeMaps[this.cell.shape];if(!h)return;let{html:m}=h;typeof m=="function"&&(m=m(this.cell)),m&&(typeof m=="string"?s.innerHTML=m:T.Dom.append(s,m))}}dispose(){this.cell.off("change:*",this.onCellChangeAny,this)}}J([e.dispose()],e.prototype,"dispose",null),r.View=e,function(t){t.action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),a.NodeView.registry.register("html-view",t,!0)}(e=r.View||(r.View={}))}(l=O.HTML||(O.HTML={})),function(r){r.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},b.Markup.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),u.Node.registry.register("html",r,!0)}(l=O.HTML||(O.HTML={})),function(r){r.shapeMaps={};function e(t){const{shape:s,html:h,effect:m,inherit:d}=t,v=ie(t,["shape","html","effect","inherit"]);if(!s)throw new Error("should specify shape in config");r.shapeMaps[s]={html:h,effect:m},o.Graph.registerNode(s,Object.assign({inherit:d||"html"},v),!0)}r.register=e}(l=O.HTML||(O.HTML={}))},20557:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Image=void 0;const J=V(77160);O.Image=(0,J.createShape)("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:(0,J.getImageUrlHook)()},{selector:"image"})},13342:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(79946),O),ie(V(93982),O),ie(V(79946),O),ie(V(2061),O),ie(V(86618),O),ie(V(27053),O),ie(V(61447),O),ie(V(60522),O),ie(V(20557),O),ie(V(93982),O),ie(V(13703),O),ie(V(20182),O)},61447:function(bt,O,V){"use strict";var J=this&&this.__rest||function(b,u){var a={};for(var o in b)Object.prototype.hasOwnProperty.call(b,o)&&u.indexOf(o)<0&&(a[o]=b[o]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(b);l<o.length;l++)u.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(b,o[l])&&(a[o[l]]=b[o[l]]);return a};Object.defineProperty(O,"__esModule",{value:!0}),O.Path=void 0;const ie=V(35695),T=V(50129);O.Path=T.Base.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(b){const{path:u}=b,a=J(b,["path"]);return u&&ie.ObjectExt.setByPath(a,"attrs/body/refD",u),a}})},17304:function(bt,O,V){"use strict";var J=this&&this.__rest||function(a,o){var l={};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&o.indexOf(r)<0&&(l[r]=a[r]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,r=Object.getOwnPropertySymbols(a);e<r.length;e++)o.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(a,r[e])&&(l[r[e]]=a[r[e]]);return l};Object.defineProperty(O,"__esModule",{value:!0}),O.Poly=void 0;const ie=V(62595),T=V(35695),b=V(50129);class u extends b.Base{get points(){return this.getPoints()}set points(o){this.setPoints(o)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(o,l){return o==null?this.removePoints():this.setAttrByPath("body/refPoints",u.pointsToString(o),l),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}O.Poly=u,function(a){function o(l){return typeof l=="string"?l:l.map(r=>Array.isArray(r)?r.join(","):ie.Point.isPointLike(r)?`${r.x}, ${r.y}`:"").join(" ")}a.pointsToString=o,a.config({propHooks(l){const{points:r}=l,e=J(l,["points"]);if(r){const t=o(r);t&&T.ObjectExt.setByPath(e,"attrs/body/refPoints",t)}return e}})}(u=O.Poly||(O.Poly={}))},86618:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Polygon=void 0;const J=V(17304),ie=V(77160);O.Polygon=(0,ie.createShape)("polygon",{},{parent:J.Poly})},27053:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Polyline=void 0;const J=V(17304),ie=V(77160);O.Polyline=(0,ie.createShape)("polyline",{},{parent:J.Poly})},79946:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Rect=void 0;const J=V(77160);O.Rect=(0,J.createShape)("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}})},60522:function(bt,O,V){"use strict";var J=this&&this.__rest||function(u,a){var o={};for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&a.indexOf(l)<0&&(o[l]=u[l]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(u);r<l.length;r++)a.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(u,l[r])&&(o[l[r]]=u[l[r]]);return o};Object.defineProperty(O,"__esModule",{value:!0}),O.TextBlock=void 0;const ie=V(35695),T=V(22608),b=V(50129);O.TextBlock=b.Base.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},ie.Platform.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:ie.Dom.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},b.Base.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(u){const{text:a}=u,o=J(u,["text"]);return a&&ie.ObjectExt.setByPath(o,"attrs/label/text",a),o},attrHooks:{text:{set(u,{cell:a,view:o,refBBox:l,elem:r,attrs:e}){if(r instanceof HTMLElement)r.textContent=u;else{const t=e.style||{},s={text:u,width:-5,height:"100%"},h=Object.assign({textVerticalAnchor:"middle"},t),m=T.Attr.presets.textWrap;return ie.FunctionExt.call(m.set,this,s,{cell:a,view:o,elem:r,refBBox:l,attrs:h}),{fill:t.color||null}}},position(u,{refBBox:a,elem:o}){if(o instanceof SVGElement)return a.getCenter()}}}})},77160:function(bt,O,V){"use strict";var J=this&&this.__rest||function(o,l){var r={};for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&l.indexOf(e)<0&&(r[e]=o[e]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(o);t<e.length;t++)l.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(o,e[t])&&(r[e[t]]=o[e[t]]);return r};Object.defineProperty(O,"__esModule",{value:!0}),O.createShape=O.getImageUrlHook=O.getMarkup=void 0;const ie=V(35695),T=V(50129);function b(o,l="body"){return[{tagName:o,selector:l},{tagName:"text",selector:"label"}]}O.getMarkup=b;function u(o="xlink:href"){return r=>{const{imageUrl:e,imageWidth:t,imageHeight:s}=r,h=J(r,["imageUrl","imageWidth","imageHeight"]);if(e!=null||t!=null||s!=null){const m=()=>{if(h.attrs){const d=h.attrs.image;e!=null&&(d[o]=e),t!=null&&(d.width=t),s!=null&&(d.height=s),h.attrs.image=d}};h.attrs?(h.attrs.image==null&&(h.attrs.image={}),m()):(h.attrs={image:{}},m())}return h}}O.getImageUrlHook=u;function a(o,l,r={}){const e={constructorName:o,markup:b(o,r.selector),attrs:{[o]:Object.assign({},T.Base.bodyAttr)}};return(r.parent||T.Base).define(ie.ObjectExt.merge(e,l,{shape:o}))}O.createShape=a},39141:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.content=void 0,O.content=`.x6-graph {
  position: relative;
  overflow: hidden;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`},56994:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Util=void 0;const J=V(62595),ie=V(35695),T=V(89922);var b;(function(u){u.normalizeMarker=T.normalize;function a(x,N){const F=ie.Dom.createSVGPoint(x.x,x.y).matrixTransform(N);return new J.Point(F.x,F.y)}u.transformPoint=a;function o(x,N){return new J.Line(a(x.start,N),a(x.end,N))}u.transformLine=o;function l(x,N){let F=x instanceof J.Polyline?x.points:x;return Array.isArray(F)||(F=[]),new J.Polyline(F.map(ae=>a(ae,N)))}u.transformPolyline=l;function r(x,N){const ae=ie.Dom.createSvgElement("svg").createSVGPoint();ae.x=x.x,ae.y=x.y;const $=ae.matrixTransform(N);ae.x=x.x+x.width,ae.y=x.y;const te=ae.matrixTransform(N);ae.x=x.x+x.width,ae.y=x.y+x.height;const fe=ae.matrixTransform(N);ae.x=x.x,ae.y=x.y+x.height;const B=ae.matrixTransform(N),he=Math.min($.x,te.x,fe.x,B.x),z=Math.max($.x,te.x,fe.x,B.x),ee=Math.min($.y,te.y,fe.y,B.y),pe=Math.max($.y,te.y,fe.y,B.y);return new J.Rectangle(he,ee,z-he,pe-ee)}u.transformRectangle=r;function e(x,N,F){let ae;const $=x.ownerSVGElement;if(!$)return new J.Rectangle(0,0,0,0);try{ae=x.getBBox()}catch(fe){ae={x:x.clientLeft,y:x.clientTop,width:x.clientWidth,height:x.clientHeight}}if(N)return J.Rectangle.create(ae);const te=ie.Dom.getTransformToElement(x,F||$);return r(ae,te)}u.bbox=e;function t(x,N={}){let F;if(!x.ownerSVGElement||!ie.Dom.isSVGGraphicsElement(x)){if(ie.Dom.isHTMLElement(x)){const{left:fe,top:B,width:he,height:z}=s(x);return new J.Rectangle(fe,B,he,z)}return new J.Rectangle(0,0,0,0)}let $=N.target;if(!N.recursive){try{F=x.getBBox()}catch(B){F={x:x.clientLeft,y:x.clientTop,width:x.clientWidth,height:x.clientHeight}}if(!$)return J.Rectangle.create(F);const fe=ie.Dom.getTransformToElement(x,$);return r(F,fe)}{const fe=x.childNodes,B=fe.length;if(B===0)return t(x,{target:$});$||($=x);for(let he=0;he<B;he+=1){const z=fe[he];let ee;z.childNodes.length===0?ee=t(z,{target:$}):ee=t(z,{target:$,recursive:!0}),F?F=F.union(ee):F=ee}return F}}u.getBBox=t;function s(x){let N=0,F=0,ae=0,$=0;if(x){let te=x;for(;te;)N+=te.offsetLeft,F+=te.offsetTop,te=te.offsetParent,te&&(N+=parseInt(ie.Dom.getComputedStyle(te,"borderLeft"),10),F+=parseInt(ie.Dom.getComputedStyle(te,"borderTop"),10));ae=x.offsetWidth,$=x.offsetHeight}return{left:N,top:F,width:ae,height:$}}u.getBoundingOffsetRect=s;function h(x){const N=F=>{const ae=x.getAttribute(F),$=ae?parseFloat(ae):0;return Number.isNaN($)?0:$};switch(x instanceof SVGElement&&x.nodeName.toLowerCase()){case"rect":return new J.Rectangle(N("x"),N("y"),N("width"),N("height"));case"circle":return new J.Ellipse(N("cx"),N("cy"),N("r"),N("r"));case"ellipse":return new J.Ellipse(N("cx"),N("cy"),N("rx"),N("ry"));case"polyline":{const F=ie.Dom.getPointsFromSvgElement(x);return new J.Polyline(F)}case"polygon":{const F=ie.Dom.getPointsFromSvgElement(x);return F.length>1&&F.push(F[0]),new J.Polyline(F)}case"path":{let F=x.getAttribute("d");return J.Path.isValid(F)||(F=J.Path.normalize(F)),J.Path.parse(F)}case"line":return new J.Line(N("x1"),N("y1"),N("x2"),N("y2"));default:break}return t(x)}u.toGeometryShape=h;function m(x,N,F,ae){const $=J.Point.create(N),te=J.Point.create(F);ae||(ae=x instanceof SVGSVGElement?x:x.ownerSVGElement);const fe=ie.Dom.scale(x);x.setAttribute("transform","");const B=t(x,{target:ae}).scale(fe.sx,fe.sy),he=ie.Dom.createSVGTransform();he.setTranslate(-B.x-B.width/2,-B.y-B.height/2);const z=ie.Dom.createSVGTransform(),ee=$.angleBetween(te,$.clone().translate(1,0));ee&&z.setRotate(ee,0,0);const pe=ie.Dom.createSVGTransform(),S=$.clone().move(te,B.width/2);pe.setTranslate(2*$.x-S.x,2*$.y-S.y);const q=ie.Dom.getTransformToElement(x,ae),M=ie.Dom.createSVGTransform();M.setMatrix(pe.matrix.multiply(z.matrix.multiply(he.matrix.multiply(q.scale(fe.sx,fe.sy))))),x.setAttribute("transform",ie.Dom.matrixToTransformString(M.matrix))}u.translateAndAutoOrient=m;function d(x){if(x==null)return null;let N=x;do{let F=N.tagName;if(typeof F!="string")return null;if(F=F.toUpperCase(),ie.Dom.hasClass(N,"x6-port"))N=N.nextElementSibling;else if(F==="G")N=N.firstElementChild;else if(F==="TITLE")N=N.nextElementSibling;else break}while(N);return N}u.findShapeNode=d;function v(x){const N=d(x);if(!ie.Dom.isSVGGraphicsElement(N)){if(ie.Dom.isHTMLElement(x)){const{left:$,top:te,width:fe,height:B}=s(x);return new J.Rectangle($,te,fe,B)}return new J.Rectangle(0,0,0,0)}return h(N).bbox()||J.Rectangle.create()}u.getBBoxV2=v})(b=O.Util||(O.Util={}))},6611:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.AttrManager=void 0;const J=V(35695),ie=V(62595),T=V(89042),b=V(33551),u=V(56994);class a{constructor(l){this.view=l}get cell(){return this.view.cell}getDefinition(l){return this.cell.getAttrDefinition(l)}processAttrs(l,r){let e,t,s,h;const m=[];return Object.keys(r).forEach(d=>{const v=r[d],x=this.getDefinition(d),N=J.FunctionExt.call(T.Attr.isValidDefinition,this.view,x,v,{elem:l,attrs:r,cell:this.cell,view:this.view});if(x&&N)typeof x=="string"?(e==null&&(e={}),e[x]=v):v!==null&&m.push({name:d,definition:x});else{e==null&&(e={});const F=J.Dom.CASE_SENSITIVE_ATTR.includes(d)?d:J.StringExt.kebabCase(d);e[F]=v}}),m.forEach(({name:d,definition:v})=>{const x=r[d];typeof v.set=="function"&&(t==null&&(t={}),t[d]=x),typeof v.offset=="function"&&(s==null&&(s={}),s[d]=x),typeof v.position=="function"&&(h==null&&(h={}),h[d]=x)}),{raw:r,normal:e,set:t,offset:s,position:h}}mergeProcessedAttrs(l,r){l.set=Object.assign(Object.assign({},l.set),r.set),l.position=Object.assign(Object.assign({},l.position),r.position),l.offset=Object.assign(Object.assign({},l.offset),r.offset);const e=l.normal&&l.normal.transform;e!=null&&r.normal&&(r.normal.transform=e),l.normal=r.normal}findAttrs(l,r,e,t){const s=[],h=new J.Dictionary;return Object.keys(l).forEach(m=>{const d=l[m];if(!J.ObjectExt.isPlainObject(d))return;const{isCSSSelector:v,elems:x}=b.View.find(m,r,t);e[m]=x;for(let N=0,F=x.length;N<F;N+=1){const ae=x[N],$=t&&t[m]===ae,te=h.get(ae);if(te){te.array||(s.push(ae),te.array=!0,te.attrs=[te.attrs],te.priority=[te.priority]);const fe=te.attrs,B=te.priority;if($)fe.unshift(d),B.unshift(-1);else{const he=J.ArrayExt.sortedIndex(B,v?-1:F);fe.splice(he,0,d),B.splice(he,0,F)}}else h.set(ae,{elem:ae,attrs:d,priority:$?-1:F,array:!1})}}),s.forEach(m=>{const d=h.get(m),v=d.attrs;d.attrs=v.reduceRight((x,N)=>J.ObjectExt.merge(x,N),{})}),h}updateRelativeAttrs(l,r,e){const t=r.raw||{};let s=r.normal||{};const h=r.set,m=r.position,d=r.offset,v=()=>({elem:l,cell:this.cell,view:this.view,attrs:t,refBBox:e.clone()});if(h!=null&&Object.keys(h).forEach(fe=>{const B=h[fe],he=this.getDefinition(fe);if(he!=null){const z=J.FunctionExt.call(he.set,this.view,B,v());typeof z=="object"?s=Object.assign(Object.assign({},s),z):z!=null&&(s[fe]=z)}}),l instanceof HTMLElement){this.view.setAttrs(s,l);return}const x=s.transform,N=x?`${x}`:null,F=J.Dom.transformStringToMatrix(N),ae=new ie.Point(F.e,F.f);x&&(delete s.transform,F.e=0,F.f=0);let $=!1;m!=null&&Object.keys(m).forEach(fe=>{const B=m[fe],he=this.getDefinition(fe);if(he!=null){const z=J.FunctionExt.call(he.position,this.view,B,v());z!=null&&($=!0,ae.translate(ie.Point.create(z)))}}),this.view.setAttrs(s,l);let te=!1;if(d!=null){const fe=this.view.getBoundingRectOfElement(l);if(fe.width>0&&fe.height>0){const B=u.Util.transformRectangle(fe,F);Object.keys(d).forEach(he=>{const z=d[he],ee=this.getDefinition(he);if(ee!=null){const pe=J.FunctionExt.call(ee.offset,this.view,z,{elem:l,cell:this.cell,view:this.view,attrs:t,refBBox:B});pe!=null&&(te=!0,ae.translate(ie.Point.create(pe)))}})}}(x!=null||$||te)&&(ae.round(1),F.e=ae.x,F.f=ae.y,l.setAttribute("transform",J.Dom.matrixToTransformString(F)))}update(l,r,e){const t={},s=this.findAttrs(e.attrs||r,l,t,e.selectors),h=e.attrs?this.findAttrs(r,l,t,e.selectors):s,m=[];s.each(x=>{const N=x.elem,F=x.attrs,ae=this.processAttrs(N,F);if(ae.set==null&&ae.position==null&&ae.offset==null)this.view.setAttrs(ae.normal,N);else{const $=h.get(N),te=$?$.attrs:null,fe=te&&F.ref==null?te.ref:F.ref;let B;if(fe){if(B=(t[fe]||this.view.find(fe,l,e.selectors))[0],!B)throw new Error(`"${fe}" reference does not exist.`)}else B=null;const he={node:N,refNode:B,attributes:te,processedAttributes:ae},z=m.findIndex(ee=>ee.refNode===N);z>-1?m.splice(z,0,he):m.push(he)}});const d=new J.Dictionary;let v;m.forEach(x=>{const N=x.node,F=x.refNode;let ae;const $=F!=null&&e.rotatableNode!=null&&J.Dom.contains(e.rotatableNode,F);if(F&&(ae=d.get(F)),!ae){const B=$?e.rotatableNode:l;ae=F?u.Util.getBBox(F,{target:B}):e.rootBBox,F&&d.set(F,ae)}let te;e.attrs&&x.attributes?(te=this.processAttrs(N,x.attributes),this.mergeProcessedAttrs(te,x.processedAttributes)):te=x.processedAttributes;let fe=ae;$&&e.rotatableNode!=null&&!e.rotatableNode.contains(N)&&(v||(v=J.Dom.transformStringToMatrix(J.Dom.attr(e.rotatableNode,"transform"))),fe=u.Util.transformRectangle(ae,v)),this.updateRelativeAttrs(N,te,fe)})}}O.AttrManager=a},35387:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Cache=void 0;const J=V(35695),ie=V(56994);class T{constructor(u){this.view=u,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new J.Dictionary,this.pathCache={}}get(u){return this.elemCache.has(u)||this.elemCache.set(u,{}),this.elemCache.get(u)}getData(u){const a=this.get(u);return a.data||(a.data={}),a.data}getMatrix(u){const a=this.get(u);if(a.matrix==null){const o=this.view.container;a.matrix=J.Dom.getTransformToParentElement(u,o)}return J.Dom.createSVGMatrix(a.matrix)}getShape(u){const a=this.get(u);return a.shape==null&&(a.shape=ie.Util.toGeometryShape(u)),a.shape.clone()}getBoundingRect(u){const a=this.get(u);return a.boundingRect==null&&(a.boundingRect=ie.Util.getBBoxV2(u)),a.boundingRect.clone()}}O.Cache=T},97042:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(m,d,v,x){var N=arguments.length,F=N<3?d:x===null?x=Object.getOwnPropertyDescriptor(d,v):x,ae;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(m,d,v,x);else for(var $=m.length-1;$>=0;$--)(ae=m[$])&&(F=(N<3?ae(F):N>3?ae(d,v,F):ae(d,v))||F);return N>3&&F&&Object.defineProperty(d,v,F),F},ie=this&&this.__rest||function(m,d){var v={};for(var x in m)Object.prototype.hasOwnProperty.call(m,x)&&d.indexOf(x)<0&&(v[x]=m[x]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var N=0,x=Object.getOwnPropertySymbols(m);N<x.length;N++)d.indexOf(x[N])<0&&Object.prototype.propertyIsEnumerable.call(m,x[N])&&(v[x[N]]=m[x[N]]);return v};Object.defineProperty(O,"__esModule",{value:!0}),O.CellView=void 0;const T=V(62595),b=V(35695),u=V(77403),a=V(33551),o=V(35387),l=V(48250),r=V(39436),e=V(6611),t=V(34728),s=V(56994);class h extends a.View{static getDefaults(){return this.defaults}static config(d){this.defaults=this.getOptions(d)}static getOptions(d){const v=(fe,B)=>B!=null?b.ArrayExt.uniq([...Array.isArray(fe)?fe:[fe],...Array.isArray(B)?B:[B]]):Array.isArray(fe)?[...fe]:[fe],x=b.ObjectExt.cloneDeep(this.getDefaults()),{bootstrap:N,actions:F,events:ae,documentEvents:$}=d,te=ie(d,["bootstrap","actions","events","documentEvents"]);return N&&(x.bootstrap=v(x.bootstrap,N)),F&&Object.entries(F).forEach(([fe,B])=>{const he=x.actions[fe];B&&he?x.actions[fe]=v(he,B):B&&(x.actions[fe]=v(B))}),ae&&(x.events=Object.assign(Object.assign({},x.events),ae)),d.documentEvents&&(x.documentEvents=Object.assign(Object.assign({},x.documentEvents),$)),b.ObjectExt.merge(x,te)}get[Symbol.toStringTag](){return h.toStringTag}constructor(d,v={}){super(),this.cell=d,this.options=this.ensureOptions(v),this.graph=this.options.graph,this.attr=new e.AttrManager(this),this.flag=new t.FlagManager(this,this.options.actions,this.options.bootstrap),this.cache=new o.Cache(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(d){return this.getConstructor().getOptions(d)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return a.View.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(d){if(this.container!==d){this.undelegateEvents(),this.container=d,this.options.events!=null&&this.delegateEvents(this.options.events);const v=this.getContainerAttrs();v!=null&&this.setAttrs(v,d);const x=this.getContainerStyle();x!=null&&this.setStyle(x,d);const N=this.getContainerClassName();N!=null&&this.addClass(N,d)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(d,v={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(d){return this.flag.getFlag(d)}hasAction(d,v){return this.flag.hasAction(d,v)}removeAction(d,v){return this.flag.removeAction(d,v)}handleAction(d,v,x,N){if(this.hasAction(d,v)){x();const F=[v];return N&&(typeof N=="string"?F.push(N):F.push(...N)),this.removeAction(d,F)}return d}setup(){this.cell.on("changed",this.onCellChanged,this)}onCellChanged({options:d}){this.onAttrsChange(d)}onAttrsChange(d){let v=this.flag.getChangedFlag();d.updated||!v||(d.dirty&&this.hasAction(v,"update")&&(v|=this.getFlag("render")),d.toolId&&(d.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,v,d))}parseJSONMarkup(d,v){const x=l.Markup.parseJSONMarkup(d),N=x.selectors,F=this.rootSelector;if(v&&F){if(N[F])throw new Error("Invalid root selector");N[F]=v}return x}can(d){let v=this.graph.options.interacting;if(typeof v=="function"&&(v=b.FunctionExt.call(v,this.graph,this)),typeof v=="object"){let x=v[d];return typeof x=="function"&&(x=b.FunctionExt.call(x,this.graph,this)),x!==!1}return typeof v=="boolean"?v:!1}cleanCache(){return this.cache.clean(),this}getCache(d){return this.cache.get(d)}getDataOfElement(d){return this.cache.getData(d)}getMatrixOfElement(d){return this.cache.getMatrix(d)}getShapeOfElement(d){return this.cache.getShape(d)}getBoundingRectOfElement(d){return this.cache.getBoundingRect(d)}getBBoxOfElement(d){const v=this.getBoundingRectOfElement(d),x=this.getMatrixOfElement(d),N=this.getRootRotatedMatrix(),F=this.getRootTranslatedMatrix();return s.Util.transformRectangle(v,F.multiply(N).multiply(x))}getUnrotatedBBoxOfElement(d){const v=this.getBoundingRectOfElement(d),x=this.getMatrixOfElement(d),N=this.getRootTranslatedMatrix();return s.Util.transformRectangle(v,N.multiply(x))}getBBox(d={}){let v;if(d.useCellGeometry){const x=this.cell,N=x.isNode()?x.getAngle():0;v=x.getBBox().bbox(N)}else v=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(v)}getRootTranslatedMatrix(){const d=this.cell,v=d.isNode()?d.getPosition():{x:0,y:0};return b.Dom.createSVGMatrix().translate(v.x,v.y)}getRootRotatedMatrix(){let d=b.Dom.createSVGMatrix();const v=this.cell,x=v.isNode()?v.getAngle():0;if(x){const N=v.getBBox(),F=N.width/2,ae=N.height/2;d=d.translate(F,ae).rotate(x).translate(-F,-ae)}return d}findMagnet(d=this.container){return this.findByAttr("magnet",d)}updateAttrs(d,v,x={}){x.rootBBox==null&&(x.rootBBox=new T.Rectangle),x.selectors==null&&(x.selectors=this.selectors),this.attr.update(d,v,x)}isEdgeElement(d){return this.cell.isEdge()&&(d==null||d===this.container)}prepareHighlight(d,v={}){const x=d||this.container;return v.partial=x===this.container,x}highlight(d,v={}){const x=this.prepareHighlight(d,v);return this.notify("cell:highlight",{magnet:x,options:v,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:x,options:v,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:x,options:v,view:this,node:this.cell,cell:this.cell}),this}unhighlight(d,v={}){const x=this.prepareHighlight(d,v);return this.notify("cell:unhighlight",{magnet:x,options:v,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:x,options:v,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:x,options:v,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(d,v){}getEdgeTerminal(d,v,x,N,F){const ae=this.cell,$=this.findAttr("port",d),te=d.getAttribute("data-selector"),fe={cell:ae.id};return te!=null&&(fe.magnet=te),$!=null?(fe.port=$,ae.isNode()&&!ae.hasPort($)&&te==null&&(fe.selector=this.getSelector(d))):te==null&&this.container!==d&&(fe.selector=this.getSelector(d)),fe}getMagnetFromEdgeTerminal(d){const v=this.cell,x=this.container,N=d.port;let F=d.magnet,ae;return N!=null&&v.isNode()&&v.hasPort(N)?ae=this.findPortElem(N,F)||x:(F||(F=d.selector),!F&&N!=null&&(F=`[port="${N}"]`),ae=this.findOne(F,x,this.selectors)),ae}hasTools(d){const v=this.tools;return v==null?!1:d==null?!0:v.name===d}addTools(d){if(this.removeTools(),d){if(!this.can("toolsAddable"))return this;const v=r.ToolsView.isToolsView(d)?d:new r.ToolsView(d);this.tools=v,v.config({view:this}),v.mount()}return this}updateTools(d={}){return this.tools&&this.tools.update(d),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const d=this.cell.getTools();return this.addTools(d),this}notify(d,v){return this.trigger(d,v),this.graph.trigger(d,v),this}getEventArgs(d,v,x){const N=this,F=N.cell;return v==null||x==null?{e:d,view:N,cell:F}:{e:d,x:v,y:x,view:N,cell:F}}onClick(d,v,x){this.notify("cell:click",this.getEventArgs(d,v,x))}onDblClick(d,v,x){this.notify("cell:dblclick",this.getEventArgs(d,v,x))}onContextMenu(d,v,x){this.notify("cell:contextmenu",this.getEventArgs(d,v,x))}onMouseDown(d,v,x){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(d,v,x))}onMouseUp(d,v,x){this.notify("cell:mouseup",this.getEventArgs(d,v,x)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(d,v,x){this.notify("cell:mousemove",this.getEventArgs(d,v,x))}onMouseOver(d){this.notify("cell:mouseover",this.getEventArgs(d))}onMouseOut(d){this.notify("cell:mouseout",this.getEventArgs(d))}onMouseEnter(d){this.notify("cell:mouseenter",this.getEventArgs(d))}onMouseLeave(d){this.notify("cell:mouseleave",this.getEventArgs(d))}onMouseWheel(d,v,x,N){this.notify("cell:mousewheel",Object.assign({delta:N},this.getEventArgs(d,v,x)))}onCustomEvent(d,v,x,N){this.notify("cell:customevent",Object.assign({name:v},this.getEventArgs(d,x,N))),this.notify(v,Object.assign({},this.getEventArgs(d,x,N)))}onMagnetMouseDown(d,v,x,N){}onMagnetDblClick(d,v,x,N){}onMagnetContextMenu(d,v,x,N){}onLabelMouseDown(d,v,x){}checkMouseleave(d){const v=this.getEventTarget(d,{fromPoint:!0}),x=this.graph.findViewByElem(v);x!==this&&(this.onMouseLeave(d),x&&x.onMouseEnter(d))}dispose(){this.cell.off("changed",this.onCellChanged,this)}}h.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},J([h.dispose()],h.prototype,"dispose",null),O.CellView=h,function(m){m.Flag=t.FlagManager,m.Attr=e.AttrManager}(h=O.CellView||(O.CellView={})),function(m){m.toStringTag=`X6.${m.name}`;function d(v){if(v==null)return!1;if(v instanceof m)return!0;const x=v[Symbol.toStringTag],N=v;return(x==null||x===m.toStringTag)&&typeof N.isNodeView=="function"&&typeof N.isEdgeView=="function"&&typeof N.confirmUpdate=="function"}m.isCellView=d}(h=O.CellView||(O.CellView={})),function(m){function d(x){return function(N){N.config({priority:x})}}m.priority=d;function v(x){return function(N){N.config({bootstrap:x})}}m.bootstrap=v}(h=O.CellView||(O.CellView={})),function(m){m.registry=u.Registry.create({type:"view"})}(h=O.CellView||(O.CellView={}))},64068:function(bt,O,V){"use strict";var J=this&&this.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,s=Object.getOwnPropertySymbols(r);h<s.length;h++)e.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(r,s[h])&&(t[s[h]]=r[s[h]]);return t};Object.defineProperty(O,"__esModule",{value:!0}),O.EdgeView=void 0;const ie=V(62595),T=V(35695),b=V(22608),u=V(51924),a=V(97042),o=V(45170);class l extends a.CellView{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.labelDestroyFn={}}get[Symbol.toStringTag](){return l.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const s=this.cell.getSource();return new ie.Rectangle(s.x,s.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new ie.Rectangle(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const s=this.cell.getTarget();return new ie.Rectangle(s.x,s.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new ie.Rectangle(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let s=e;if(this.hasAction(s,"source")){if(!this.updateTerminalProperties("source"))return s;s=this.removeAction(s,"source")}if(this.hasAction(s,"target")){if(!this.updateTerminalProperties("target"))return s;s=this.removeAction(s,"target")}return this.hasAction(s,"render")?(this.render(),s=this.removeAction(s,["render","update","labels","tools"]),s):(s=this.handleAction(s,"update",()=>this.update(t)),s=this.handleAction(s,"labels",()=>this.onLabelsChange(t)),s=this.handleAction(s,"tools",()=>this.renderTools()),s)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const e=this.cell.markup;if(e){if(typeof e=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(e)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}customizeLabels(){if(this.labelContainer){const e=this.cell,t=e.labels;for(let s=0,h=t.length;s<h;s+=1){const m=t[s],d=this.labelCache[s],v=this.labelSelectors[s],x=this.graph.options.onEdgeLabelRendered;if(x){const N=x({edge:e,label:m,container:d,selectors:v});N&&(this.labelDestroyFn[s]=N)}}}}destroyCustomizeLabels(){const e=this.cell.labels;if(this.labelCache&&this.labelSelectors&&this.labelDestroyFn)for(let t=0,s=e.length;t<s;t+=1){const h=this.labelDestroyFn[t],m=this.labelCache[t],d=this.labelSelectors[t];h&&m&&d&&h({edge:this.cell,label:e[t],container:m,selectors:d})}this.labelDestroyFn={}}renderLabels(){const e=this.cell,t=e.getLabels(),s=t.length;let h=this.labelContainer;if(this.labelCache={},this.labelSelectors={},s<=0)return h&&h.parentNode&&h.parentNode.removeChild(h),this;h?this.empty(h):(h=T.Dom.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),h),this.labelContainer=h);for(let m=0,d=t.length;m<d;m+=1){const v=t[m],x=this.normalizeLabelMarkup(this.parseLabelMarkup(v.markup));let N,F;if(x)N=x.node,F=x.selectors;else{const $=e.getDefaultLabel(),te=this.normalizeLabelMarkup(this.parseLabelMarkup($.markup));N=te.node,F=te.selectors}N.setAttribute("data-index",`${m}`),h.appendChild(N);const ae=this.rootSelector;if(F[ae])throw new Error("Ambiguous label root selector.");F[ae]=N,this.labelCache[m]=N,this.labelSelectors[m]=F}return h.parentNode==null&&this.container.appendChild(h),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(e={}){this.destroyCustomizeLabels(),this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(t==null)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const s=e.propertyPathArray||[],h=s.length;if(h>1){const m=s[1];if(t[m]){if(h===2)return typeof e.propertyValue=="object"&&T.ObjectExt.has(e.propertyValue,"markup");if(s[2]!=="markup")return!1}}}return!0}parseLabelMarkup(e){return e?typeof e=="string"?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=T.Vector.createVectors(e),s=document.createDocumentFragment();for(let h=0,m=t.length;h<m;h+=1){const d=t[h].node;s.appendChild(d)}return{fragment:s,selectors:{}}}normalizeLabelMarkup(e){if(e==null)return;const t=e.fragment;if(!(t instanceof DocumentFragment)||!t.hasChildNodes())throw new Error("Invalid label markup.");let s;const h=t.childNodes;return h.length>1||h[0].nodeName.toUpperCase()!=="G"?s=T.Vector.create("g").append(t):s=T.Vector.create(h[0]),s.addClass(this.prefixClassName("edge-label")),{node:s.node,selectors:e.selectors}}updateLabels(){if(this.labelContainer){const e=this.cell,t=e.labels,s=this.can("edgeLabelMovable"),h=e.getDefaultLabel();for(let m=0,d=t.length;m<d;m+=1){const v=this.labelCache[m],x=this.labelSelectors[m];v.setAttribute("cursor",s?"move":"default");const N=t[m],F=T.ObjectExt.merge({},h.attrs,N.attrs);this.updateAttrs(v,F,{selectors:x,rootBBox:N.size?ie.Rectangle.fromSize(N.size):void 0})}}}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}update(e={}){this.cleanCache(),this.updateConnection(e);const t=this.cell.getAttrs(),{text:s}=t,h=J(t,["text"]);return h!=null&&this.updateAttrs(this.container,h,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(e),this}removeRedundantLinearVertices(e={}){const t=this.cell,s=t.getVertices(),h=[this.sourceAnchor,...s,this.targetAnchor],m=h.length,d=new ie.Polyline(h);d.simplify({threshold:.01});const v=d.points.map(N=>N.toJSON()),x=v.length;return m===x?0:(t.setVertices(v.slice(1,x-1),e),m-x)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return ie.Point.create(this.sourceAnchor);case"target":return ie.Point.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return ie.Point.create(this.sourcePoint);case"target":return ie.Point.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const s=this.sourceView;return s?this.sourceMagnet||s.container:null}case"target":{if(t.raw)return this.targetMagnet;const s=this.targetView;return s?this.targetMagnet||s.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const s=e.tx||0,h=e.ty||0;this.routePoints=new ie.Polyline(this.routePoints).translate(s,h).points,this.translateConnectionPoints(s,h),this.path.translate(s,h)}else{const s=t.getVertices(),h=this.findAnchors(s);this.sourceAnchor=h.source,this.targetAnchor=h.target,this.routePoints=this.findRoutePoints(s);const m=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=m.source,this.targetPoint=m.target;const d=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,d.source||this.sourcePoint,d.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,s=t.source,h=t.target,m=e[0],d=e[e.length-1];return h.priority&&!s.priority?this.findAnchorsOrdered("target",d,"source",m):this.findAnchorsOrdered("source",m,"target",d)}findAnchorsOrdered(e,t,s,h){let m,d;const v=this.cell,x=v[e],N=v[s],F=this.getTerminalView(e),ae=this.getTerminalView(s),$=this.getTerminalMagnet(e),te=this.getTerminalMagnet(s);if(F){let fe;t?fe=ie.Point.create(t):ae?fe=te:fe=ie.Point.create(N),m=this.getAnchor(x.anchor,F,$,fe,e)}else m=ie.Point.create(x);if(ae){const fe=ie.Point.create(h||m);d=this.getAnchor(N.anchor,ae,te,fe,s)}else d=ie.Point.isPointLike(N)?ie.Point.create(N):new ie.Point;return{[e]:m,[s]:d}}getAnchor(e,t,s,h,m){const d=t.isEdgeElement(s),v=this.graph.options.connecting;let x=typeof e=="string"?{name:e}:e;if(!x){const ae=d?(m==="source"?v.sourceEdgeAnchor:v.targetEdgeAnchor)||v.edgeAnchor:(m==="source"?v.sourceAnchor:v.targetAnchor)||v.anchor;x=typeof ae=="string"?{name:ae}:ae}if(!x)throw new Error("Anchor should be specified.");let N;const F=x.name;if(d){const ae=b.EdgeAnchor.registry.get(F);if(typeof ae!="function")return b.EdgeAnchor.registry.onNotFound(F);N=T.FunctionExt.call(ae,this,t,s,h,x.args||{},m)}else{const ae=b.NodeAnchor.registry.get(F);if(typeof ae!="function")return b.NodeAnchor.registry.onNotFound(F);N=T.FunctionExt.call(ae,this,t,s,h,x.args||{},m)}return N?N.round(this.POINT_ROUNDING):new ie.Point}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||b.Router.presets.normal,s=this.cell.getRouter()||t;let h;if(typeof s=="function")h=T.FunctionExt.call(s,this,e,{},this);else{const m=typeof s=="string"?s:s.name,d=typeof s=="string"?{}:s.args||{},v=m?b.Router.registry.get(m):b.Router.presets.normal;if(typeof v!="function")return b.Router.registry.onNotFound(m);h=T.FunctionExt.call(v,this,e,d,this)}return h==null?e.map(m=>ie.Point.create(m)):h.map(m=>ie.Point.create(m))}findConnectionPoints(e,t,s){const h=this.cell,m=this.graph.options.connecting,d=h.getSource(),v=h.getTarget(),x=this.sourceView,N=this.targetView,F=e[0],ae=e[e.length-1];let $;if(x&&!x.isEdgeElement(this.sourceMagnet)){const fe=this.sourceMagnet||x.container,B=F||s,he=new ie.Line(B,t),z=d.connectionPoint||m.sourceConnectionPoint||m.connectionPoint;$=this.getConnectionPoint(z,x,fe,he,"source")}else $=t;let te;if(N&&!N.isEdgeElement(this.targetMagnet)){const fe=this.targetMagnet||N.container,B=v.connectionPoint||m.targetConnectionPoint||m.connectionPoint,he=ae||t,z=new ie.Line(he,s);te=this.getConnectionPoint(B,N,fe,z,"target")}else te=s;return{source:$,target:te}}getConnectionPoint(e,t,s,h,m){const d=h.end;if(e==null)return d;const v=typeof e=="string"?e:e.name,x=typeof e=="string"?{}:e.args,N=b.ConnectionPoint.registry.get(v);if(typeof N!="function")return b.ConnectionPoint.registry.onNotFound(v);const F=T.FunctionExt.call(N,this,h,t,s,x||{},m);return F?F.round(this.POINT_ROUNDING):d}findMarkerPoints(e,t,s){const h=ae=>{const $=this.cell.getAttrs(),te=Object.keys($);for(let fe=0,B=te.length;fe<B;fe+=1){const he=$[te[fe]];if(he[`${ae}Marker`]||he[`${ae}-marker`]){const z=he.strokeWidth||he["stroke-width"];if(z)return parseFloat(z);break}}return null},m=e[0],d=e[e.length-1];let v,x;const N=h("source");N&&(v=t.clone().move(m||s,-N));const F=h("target");return F&&(x=s.clone().move(d||t,-F)),this.sourceMarkerPoint=v||t.clone(),this.targetMarkerPoint=x||s.clone(),{source:v,target:x}}findPath(e,t,s){const h=this.cell.getConnector()||this.graph.options.connecting.connector;let m,d,v;if(typeof h=="string"?m=h:(m=h.name,d=h.args),m){const N=b.Connector.registry.get(m);if(typeof N!="function")return b.Connector.registry.onNotFound(m);v=N}else v=b.Connector.presets.normal;const x=T.FunctionExt.call(v,this,t,s,e,Object.assign(Object.assign({},d),{raw:!0}),this);return typeof x=="string"?ie.Path.parse(x):x}translateConnectionPoints(e,t){this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t),this.sourceMarkerPoint.translate(e,t),this.targetMarkerPoint.translate(e,t)}updateLabelPositions(){if(this.labelContainer==null)return this;if(!this.path)return this;const t=this.cell,s=t.getLabels();if(s.length===0)return this;const h=t.getDefaultLabel(),m=this.normalizeLabelPosition(h.position);for(let d=0,v=s.length;d<v;d+=1){const x=s[d],N=this.labelCache[d];if(!N)continue;const F=this.normalizeLabelPosition(x.position),ae=T.ObjectExt.merge({},m,F),$=this.getLabelTransformationMatrix(ae);N.setAttribute("transform",T.Dom.matrixToTransformString($))}return this}updateTerminalProperties(e){const t=this.cell,s=this.graph,h=t[e],m=h&&h.cell,d=`${e}View`;if(!m)return this[d]=null,this.updateTerminalMagnet(e),!0;const v=s.getCellById(m);if(!v)throw new Error(`Edge's ${e} node with id "${m}" not exists`);const x=v.findView(s);return x?(this[d]=x,this.updateTerminalMagnet(e),!0):!1}updateTerminalMagnet(e){const t=`${e}Magnet`,s=this.getTerminalView(e);if(s){let h=s.getMagnetFromEdgeTerminal(this.cell[e]);h===s.container&&(h=null),this[t]=h}else this[t]=null}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&typeof t.position=="object"&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&typeof t.position=="object")return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&typeof e.position=="object")return e.position.options}mergeLabelPositionArgs(e,t){return e===null?null:e===void 0?t===null?null:t:T.ObjectExt.merge({},t,e)}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const e=this.cache.pathCache;return T.ObjectExt.has(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const e=this.cache.pathCache;return T.ObjectExt.has(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const e=this.cache.pathCache;return T.ObjectExt.has(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return this.path==null?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return this.path==null?null:(T.NumberExt.isPercentage(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return this.path==null?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return this.path==null?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return this.path==null?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return this.path==null?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return this.path==null?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,s,h){const m={distance:0};let d=0,v;typeof s=="number"?(d=s,v=h):v=s,v!=null&&(m.options=v);const x=v&&v.absoluteOffset,N=!(v&&v.absoluteDistance),F=v&&v.absoluteDistance&&v.reverseDistance,ae=this.path,$={segmentSubdivisions:this.getConnectionSubdivisions()},te=new ie.Point(e,t),fe=ae.closestPointT(te,$),B=this.getConnectionLength()||0;let he=ae.lengthAtT(fe,$);N&&(he=B>0?he/B:0),F&&(he=-1*(B-he)||1),m.distance=he;let z;x||(z=ae.tangentAtT(fe));let ee;if(z)ee=z.pointOffset(te);else{const pe=ae.pointAtT(fe),S=te.diff(pe);ee={x:S.x,y:S.y}}return m.offset=ee,m.angle=d,m}normalizeLabelPosition(e){return typeof e=="number"?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),s=t.options||{},h=t.angle||0,m=t.distance,d=m>0&&m<=1;let v=0;const x={x:0,y:0},N=t.offset;N&&(typeof N=="number"?v=N:(N.x!=null&&(x.x=N.x),N.y!=null&&(x.y=N.y)));const F=x.x!==0||x.y!==0||v===0,ae=s.keepGradient,$=s.ensureLegibility,te=this.path,fe={segmentSubdivisions:this.getConnectionSubdivisions()},B=d?m*this.getConnectionLength():m,he=te.tangentAtLength(B,fe);let z,ee=h;if(he){if(F)z=he.start,z.translate(x);else{const pe=he.clone();pe.rotate(-90,he.start),pe.setLength(v),z=pe.end}ae&&(ee=he.angle()+h,$&&(ee=ie.Angle.normalize((ee+90)%180-90)))}else z=te.start,F&&z.translate(x);return T.Dom.createSVGMatrix().translate(z.x,z.y).rotate(ee)}getVertexIndex(e,t){const h=this.cell.getVertices(),m=this.getClosestPointLength(new ie.Point(e,t));let d=0;if(m!=null)for(const v=h.length;d<v;d+=1){const x=h[d],N=this.getClosestPointLength(x);if(N!=null&&m<N)break}return d}getEventArgs(e,t,s){const h=this,m=h.cell,d=m;return t==null||s==null?{e,view:h,edge:m,cell:d}:{e,x:t,y:s,view:h,edge:m,cell:d}}notifyUnhandledMouseDown(e,t,s){this.notify("edge:unhandled:mousedown",{e,x:t,y:s,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,s){super.onMouseDown(e,t,s),this.notify("edge:mousedown",this.getEventArgs(e,t,s))}notifyMouseMove(e,t,s){super.onMouseMove(e,t,s),this.notify("edge:mousemove",this.getEventArgs(e,t,s))}notifyMouseUp(e,t,s){super.onMouseUp(e,t,s),this.notify("edge:mouseup",this.getEventArgs(e,t,s))}onClick(e,t,s){super.onClick(e,t,s),this.notify("edge:click",this.getEventArgs(e,t,s))}onDblClick(e,t,s){super.onDblClick(e,t,s),this.notify("edge:dblclick",this.getEventArgs(e,t,s))}onContextMenu(e,t,s){super.onContextMenu(e,t,s),this.notify("edge:contextmenu",this.getEventArgs(e,t,s))}onMouseDown(e,t,s){this.notifyMouseDown(e,t,s),this.startEdgeDragging(e,t,s)}onMouseMove(e,t,s){const h=this.getEventData(e);switch(h.action){case"drag-label":{this.dragLabel(e,t,s);break}case"drag-arrowhead":{this.dragArrowhead(e,t,s);break}case"drag-edge":{this.dragEdge(e,t,s);break}default:break}return this.notifyMouseMove(e,t,s),h}onMouseUp(e,t,s){const h=this.getEventData(e);switch(h.action){case"drag-label":{this.stopLabelDragging(e,t,s);break}case"drag-arrowhead":{this.stopArrowheadDragging(e,t,s);break}case"drag-edge":{this.stopEdgeDragging(e,t,s);break}default:break}return this.notifyMouseUp(e,t,s),this.checkMouseleave(e),h}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,s,h){super.onMouseWheel(e,t,s,h),this.notify("edge:mousewheel",Object.assign({delta:h},this.getEventArgs(e,t,s)))}onCustomEvent(e,t,s,h){if(T.Dom.findParentByClass(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if(t==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,s,h)))}this.notifyMouseDown(e,s,h)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,s,h))),super.onCustomEvent(e,t,s,h)}onLabelMouseDown(e,t,s){this.notifyMouseDown(e,t,s),this.startLabelDragging(e,t,s),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,s){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(e,t,s);return}this.setEventData(e,{x:t,y:s,moving:!1,action:"drag-edge"})}dragEdge(e,t,s){const h=this.getEventData(e);h.moving||(h.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:s,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-h.x,s-h.y,{ui:!0}),this.setEventData(e,{x:t,y:s}),this.notify("edge:moving",{e,x:t,y:s,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,s){const h=this.getEventData(e);h.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:s,view:this,cell:this.cell,edge:this.cell})),h.moving=!1}prepareArrowheadDragging(e,t){const s=this.getTerminalMagnet(e),h={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:t.isNewEdge===!0,terminalType:e,initialMagnet:s,initialTerminal:T.ObjectExt.clone(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(h),h}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let s,h=0,m=0;e==="source"?(h=2,s="target"):(m=2,s="source");const d=this.cell[s],v=d.cell;if(v){let x;const N=t[h]=this.graph.findViewByCell(v);N&&(x=N.getMagnetFromEdgeTerminal(d),x===N.container&&(x=void 0)),t[h+1]=x}return(x,N)=>(t[m]=x,t[m+1]=x.container===N?void 0:N,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){e.zIndex!=null&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);const t=this.container;t.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}validateConnection(e,t,s,h,m,d,v){const x=this.graph.options.connecting,N=x.allowLoop,F=x.allowNode,ae=x.allowEdge,$=x.allowPort,te=x.allowMulti,fe=x.validateConnection,B=d?d.cell:null,he=m==="target"?s:e,z=m==="target"?h:t;let ee=!0;const pe=S=>{const q=m==="source"?v?v.port:null:B?B.getSourcePortId():null,M=m==="target"?v?v.port:null:B?B.getTargetPortId():null;return T.FunctionExt.call(S,this.graph,{edge:B,edgeView:d,sourceView:e,targetView:s,sourcePort:q,targetPort:M,sourceMagnet:t,targetMagnet:h,sourceCell:e?e.cell:null,targetCell:s?s.cell:null,type:m})};if(N!=null&&(typeof N=="boolean"?!N&&e===s&&(ee=!1):ee=pe(N)),ee&&$!=null&&(typeof $=="boolean"?!$&&z&&(ee=!1):ee=pe($)),ee&&ae!=null&&(typeof ae=="boolean"?!ae&&l.isEdgeView(he)&&(ee=!1):ee=pe(ae)),ee&&F!=null&&z==null&&(typeof F=="boolean"?!F&&o.NodeView.isNodeView(he)&&(ee=!1):ee=pe(F)),ee&&te!=null&&d){const S=d.cell,q=m==="source"?v:S.getSource(),M=m==="target"?v:S.getTarget(),I=v?this.graph.getCellById(v.cell):null;if(q&&M&&q.cell&&M.cell&&I)if(typeof te=="function")ee=pe(te);else{const j=this.graph.model.getConnectedEdges(I,{outgoing:m==="source",incoming:m==="target"});j.length&&(te==="withPort"?j.some(se=>{const Ee=se.getSource(),Ce=se.getTarget();return Ee&&Ce&&Ee.cell===q.cell&&Ce.cell===M.cell&&Ee.port!=null&&Ee.port===q.port&&Ce.port!=null&&Ce.port===M.port})&&(ee=!1):te||j.some(se=>{const Ee=se.getSource(),Ce=se.getTarget();return Ee&&Ce&&Ee.cell===q.cell&&Ce.cell===M.cell})&&(ee=!1))}}return ee&&fe!=null&&(ee=pe(fe)),ee}allowConnectToBlank(e){const t=this.graph,h=t.options.connecting.allowBlank;if(typeof h!="function")return!!h;const m=t.findViewByCell(e),d=e.getSourceCell(),v=e.getTargetCell(),x=t.findViewByCell(d),N=t.findViewByCell(v);return T.FunctionExt.call(h,t,{edge:e,edgeView:m,sourceCell:d,targetCell:v,sourceView:x,targetView:N,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:m.sourceMagnet,targetMagnet:m.targetMagnet})}validateEdge(e,t,s){const h=this.graph;if(!this.allowConnectToBlank(e)){const d=e.getSourceCellId(),v=e.getTargetCellId();if(!(d&&v))return!1}const m=h.options.connecting.validateEdge;return m?T.FunctionExt.call(m,h,{edge:e,type:t,previous:s}):!0}arrowheadDragging(e,t,s,h){h.x=t,h.y=s,h.currentTarget!==e&&(h.currentMagnet&&h.currentView&&h.currentView.unhighlight(h.currentMagnet,{type:"magnetAdsorbed"}),h.currentView=this.graph.findViewByElem(e),h.currentView?(h.currentMagnet=h.currentView.findMagnet(e),h.currentMagnet&&this.validateConnection(...h.getValidateConnectionArgs(h.currentView,h.currentMagnet),h.currentView.getEdgeTerminal(h.currentMagnet,t,s,this.cell,h.terminalType))?h.currentView.highlight(h.currentMagnet,{type:"magnetAdsorbed"}):h.currentMagnet=null):h.currentMagnet=null),h.currentTarget=e,this.cell.prop(h.terminalType,{x:t,y:s},Object.assign(Object.assign({},h.options),{ui:!0}))}arrowheadDragged(e,t,s){const h=e.currentView,m=e.currentMagnet;if(!m||!h)return;h.unhighlight(m,{type:"magnetAdsorbed"});const d=e.terminalType,v=h.getEdgeTerminal(m,t,s,this.cell,d);this.cell.setTerminal(d,v,{ui:!0})}snapArrowhead(e,t,s){const h=this.graph,{snap:m,allowEdge:d}=h.options.connecting,v=typeof m=="object"&&m.radius||50,x=typeof m=="object"&&m.anchor||"center",N=h.renderer.findViewsInArea({x:e-v,y:t-v,width:2*v,height:2*v},{nodeOnly:!0});if(d){const S=h.renderer.findEdgeViewsFromPoint({x:e,y:t},v).filter(q=>q!==this);N.push(...S)}const F=s.closestView||null,ae=s.closestMagnet||null;s.closestView=null,s.closestMagnet=null;let $,te=Number.MAX_SAFE_INTEGER;const fe=new ie.Point(e,t);N.forEach(S=>{if(S.container.getAttribute("magnet")!=="false"){if(S.isNodeView())$=x==="center"?S.cell.getBBox().getCenter().distance(fe):S.cell.getBBox().getNearestPointToPoint(fe).distance(fe);else if(S.isEdgeView()){const q=S.getClosestPoint(fe);q?$=q.distance(fe):$=Number.MAX_SAFE_INTEGER}$<v&&$<te&&(ae===S.container||this.validateConnection(...s.getValidateConnectionArgs(S,null),S.getEdgeTerminal(S.container,e,t,this.cell,s.terminalType)))&&(te=$,s.closestView=S,s.closestMagnet=S.container)}S.container.querySelectorAll("[magnet]").forEach(q=>{if(q.getAttribute("magnet")!=="false"){const M=S.getBBoxOfElement(q);$=fe.distance(M.getCenter()),$<v&&$<te&&(ae===q||this.validateConnection(...s.getValidateConnectionArgs(S,q),S.getEdgeTerminal(q,e,t,this.cell,s.terminalType)))&&(te=$,s.closestView=S,s.closestMagnet=q)}})});let B;const he=s.terminalType,z=s.closestView,ee=s.closestMagnet,pe=ae!==ee;if(F&&pe&&F.unhighlight(ae,{type:"magnetAdsorbed"}),z){if(!pe)return;z.highlight(ee,{type:"magnetAdsorbed"}),B=z.getEdgeTerminal(ee,e,t,this.cell,he)}else B={x:e,y:t};this.cell.setTerminal(he,B,{},Object.assign(Object.assign({},s.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,s=e.closestMagnet;t&&s&&(t.unhighlight(s,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(s)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){switch(e.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0});break}}notifyConnectionEvent(e,t){const s=e.terminalType,h=e.initialTerminal,m=this.cell[s];if(m&&!u.Edge.equalTerminals(h,m)){const v=this.graph,x=h,N=x.cell?v.getCellById(x.cell):null,F=x.port,ae=N?v.findViewByCell(N):null,$=N||e.isNewEdge?null:ie.Point.create(h).toJSON(),te=m,fe=te.cell?v.getCellById(te.cell):null,B=te.port,he=fe?v.findViewByCell(fe):null,z=fe?null:ie.Point.create(m).toJSON();this.notify("edge:connected",{e:t,previousCell:N,previousPort:F,previousView:ae,previousPoint:$,currentCell:fe,currentView:he,currentPort:B,currentPoint:z,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:s,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,s=t.model.getCells();e.marked={};for(let h=0,m=s.length;h<m;h+=1){const d=t.findViewByCell(s[h]);if(!d||d.cell.id===this.cell.id)continue;const v=Array.prototype.slice.call(d.container.querySelectorAll("[magnet]"));d.container.getAttribute("magnet")!=="false"&&v.push(d.container);const x=v.filter(N=>this.validateConnection(...e.getValidateConnectionArgs(d,N),d.getEdgeTerminal(N,e.x,e.y,this.cell,e.terminalType)));if(x.length>0){for(let N=0,F=x.length;N<F;N+=1)d.highlight(x[N],{type:"magnetAvailable"});d.highlight(null,{type:"nodeAvailable"}),e.marked[d.cell.id]=x}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(s=>{const h=this.graph.findViewByCell(s);h&&(t[s].forEach(d=>{h.unhighlight(d,{type:"magnetAvailable"})}),h.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,s){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(e,t,s);return}const m=e.target.getAttribute("data-terminal"),d=this.prepareArrowheadDragging(m,{x:t,y:s});this.setEventData(e,d)}dragArrowhead(e,t,s){const h=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,s,h):this.arrowheadDragging(this.getEventTarget(e),t,s,h)}stopArrowheadDragging(e,t,s){const h=this.graph,m=this.getEventData(e);h.options.connecting.snap?this.snapArrowheadEnd(m):this.arrowheadDragged(m,t,s),this.validateEdge(this.cell,m.terminalType,m.initialTerminal)?(this.finishEmbedding(m),this.notifyConnectionEvent(m,e)):this.fallbackConnection(m),this.afterArrowheadDragging(m)}startLabelDragging(e,t,s){if(this.can("edgeLabelMovable")){const h=e.currentTarget,m=parseInt(h.getAttribute("data-index"),10),d=this.getLabelPositionAngle(m),v=this.getLabelPositionArgs(m),x=this.getDefaultLabelPositionArgs(),N=this.mergeLabelPositionArgs(v,x);this.setEventData(e,{index:m,positionAngle:d,positionArgs:N,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,s){const h=this.getEventData(e),m=this.cell.getLabelAt(h.index),d=T.ObjectExt.merge({},m,{position:this.getLabelPosition(t,s,h.positionAngle,h.positionArgs)});this.cell.setLabelAt(h.index,d)}stopLabelDragging(e,t,s){}}O.EdgeView=l,function(r){r.toStringTag=`X6.${r.name}`;function e(t){if(t==null)return!1;if(t instanceof r)return!0;const s=t[Symbol.toStringTag],h=t;return(s==null||s===r.toStringTag)&&typeof h.isNodeView=="function"&&typeof h.isEdgeView=="function"&&typeof h.confirmUpdate=="function"&&typeof h.update=="function"&&typeof h.getConnection=="function"}r.isEdgeView=e}(l=O.EdgeView||(O.EdgeView={})),l.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),l.registry.register("edge",l,!0)},34728:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.FlagManager=void 0;class V{get cell(){return this.view.cell}constructor(ie,T,b=[]){this.view=ie;const u={},a={};let o=0;Object.keys(T).forEach(r=>{let e=T[r];Array.isArray(e)||(e=[e]),e.forEach(t=>{let s=u[t];s||(o+=1,s=u[t]=1<<o),a[r]|=s})});let l=b;if(Array.isArray(l)||(l=[l]),l.forEach(r=>{u[r]||(o+=1,u[r]=1<<o)}),o>25)throw new Error("Maximum number of flags exceeded.");this.flags=u,this.attrs=a,this.bootstrap=b}getFlag(ie){const T=this.flags;return T==null?0:Array.isArray(ie)?ie.reduce((b,u)=>b|T[u],0):T[ie]|0}hasAction(ie,T){return ie&this.getFlag(T)}removeAction(ie,T){return ie^ie&this.getFlag(T)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let ie=0;return this.attrs&&Object.keys(this.attrs).forEach(T=>{this.cell.hasChanged(T)&&(ie|=this.attrs[T])}),ie}}O.FlagManager=V},70982:function(bt,O,V){"use strict";var J=this&&this.__createBinding||(Object.create?function(T,b,u,a){a===void 0&&(a=u);var o=Object.getOwnPropertyDescriptor(b,u);(!o||("get"in o?!b.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return b[u]}}),Object.defineProperty(T,a,o)}:function(T,b,u,a){a===void 0&&(a=u),T[a]=b[u]}),ie=this&&this.__exportStar||function(T,b){for(var u in T)u!=="default"&&!Object.prototype.hasOwnProperty.call(b,u)&&J(b,T,u)};Object.defineProperty(O,"__esModule",{value:!0}),ie(V(48250),O),ie(V(33551),O),ie(V(97042),O),ie(V(64068),O),ie(V(45170),O),ie(V(39436),O)},48250:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Markup=void 0;const J=V(35695);var ie;(function(T){function b(s){return s!=null&&!u(s)}T.isJSONMarkup=b;function u(s){return s!=null&&typeof s=="string"}T.isStringMarkup=u;function a(s){return s==null||u(s)?s:J.ObjectExt.cloneDeep(s)}T.clone=a;function o(s){return`${s}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}T.sanitize=o;function l(s,h={ns:J.Dom.ns.svg}){const m=document.createDocumentFragment(),d={},v={},x=[{markup:Array.isArray(s)?s:[s],parent:m,ns:h.ns}];for(;x.length>0;){const N=x.pop();let F=N.ns||J.Dom.ns.svg;const ae=N.markup,$=N.parent;ae.forEach(te=>{const fe=te.tagName;if(!fe)throw new TypeError("Invalid tagName");te.ns&&(F=te.ns);const B=F?J.Dom.createElementNS(fe,F):J.Dom.createElement(fe),he=te.attrs;he&&J.Dom.attr(B,J.Dom.kebablizeAttrs(he));const z=te.style;z&&J.Dom.css(B,z);const ee=te.className;ee!=null&&B.setAttribute("class",Array.isArray(ee)?ee.join(" "):ee),te.textContent&&(B.textContent=te.textContent);const pe=te.selector;if(pe!=null){if(v[pe])throw new TypeError("Selector must be unique");v[pe]=B}if(te.groupSelector){let q=te.groupSelector;Array.isArray(q)||(q=[q]),q.forEach(M=>{d[M]||(d[M]=[]),d[M].push(B)})}$.appendChild(B);const S=te.children;Array.isArray(S)&&x.push({ns:F,markup:S,parent:B})})}return Object.keys(d).forEach(N=>{if(v[N])throw new Error("Ambiguous group selector");v[N]=d[N]}),{fragment:m,selectors:v,groups:d}}T.parseJSONMarkup=l;function r(s){return s instanceof SVGElement?J.Dom.createSvgElement("g"):J.Dom.createElement("div")}function e(s){if(u(s)){const v=J.Vector.createVectors(s),x=v.length;if(x===1)return{elem:v[0].node};if(x>1){const N=r(v[0].node);return v.forEach(F=>{N.appendChild(F.node)}),{elem:N}}return{}}const h=l(s),m=h.fragment;let d=null;return m.childNodes.length>1?(d=r(m.firstChild),d.appendChild(m)):d=m.firstChild,{elem:d,selectors:h.selectors}}T.renderMarkup=e;function t(s){const h=J.Vector.createVectors(s),m=document.createDocumentFragment();for(let d=0,v=h.length;d<v;d+=1){const x=h[d].node;m.appendChild(x)}return{fragment:m,selectors:{}}}T.parseLabelStringMarkup=t})(ie=O.Markup||(O.Markup={})),function(T){function b(u,a,o){if(u!=null){let l;const r=u.tagName.toLowerCase();if(u===a)return typeof o=="string"?l=`> ${r} > ${o}`:l=`> ${r}`,l;const e=u.parentNode;if(e&&e.childNodes.length>1){const t=J.Dom.index(u)+1;l=`${r}:nth-child(${t})`}else l=r;return o&&(l+=` > ${o}`),b(u.parentNode,a,l)}return o}T.getSelector=b}(ie=O.Markup||(O.Markup={})),function(T){function b(){return"g"}T.getPortContainerMarkup=b;function u(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}T.getPortMarkup=u;function a(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}T.getPortLabelMarkup=a}(ie=O.Markup||(O.Markup={})),function(T){function b(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}T.getEdgeMarkup=b}(ie=O.Markup||(O.Markup={})),function(T){function b(u=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:J.Dom.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:J.Dom.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:u?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}T.getForeignObjectMarkup=b}(ie=O.Markup||(O.Markup={}))},45170:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.NodeView=void 0;const J=V(35695),ie=V(62595),T=V(7090),b=V(15675),u=V(97042),a=V(48250);class o extends u.CellView{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return o.toStringTag}getContainerClassName(){const r=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||r.push(this.prefixClassName("node-immovable")),r.join(" ")}updateClassName(r){const e=r.target;if(e.hasAttribute("magnet")){const t=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?J.Dom.removeClass(e,t):J.Dom.addClass(e,t)}else{const t=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(t):this.addClass(t)}}isNodeView(){return!0}confirmUpdate(r,e={}){let t=r;return this.hasAction(t,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(t,"render")?(this.render(),t=this.removeAction(t,["render","update","resize","translate","rotate","ports","tools"])):(t=this.handleAction(t,"resize",()=>this.resize(),"update"),t=this.handleAction(t,"update",()=>this.update(),T.Config.useCSSSelector?"ports":null),t=this.handleAction(t,"translate",()=>this.translate()),t=this.handleAction(t,"rotate",()=>this.rotate()),t=this.handleAction(t,"ports",()=>this.renderPorts()),t=this.handleAction(t,"tools",()=>{this.getFlag("tools")===r?this.renderTools():this.updateTools(e)})),t}update(r){this.cleanCache(),T.Config.useCSSSelector&&this.removePorts();const e=this.cell,t=e.getSize(),s=e.getAttrs();this.updateAttrs(this.container,s,{attrs:r===s?null:r,rootBBox:new ie.Rectangle(0,0,t.width,t.height),selectors:this.selectors}),T.Config.useCSSSelector&&this.renderPorts()}renderMarkup(){const r=this.cell.markup;if(r){if(typeof r=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(r)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(r){const e=this.parseJSONMarkup(r,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),T.Config.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const r=this.cell.getPosition();return`translate(${r.x},${r.y})`}getRotationString(){const r=this.cell.getAngle();if(r){const e=this.cell.getSize();return`rotate(${r},${e.width/2},${e.height/2})`}}updateTransform(){let r=this.getTranslationString();const e=this.getRotationString();e&&(r+=` ${e}`),this.container.setAttribute("transform",r)}findPortElem(r,e){const t=r?this.portsCache[r]:null;if(!t)return null;const s=t.portContentElement,h=t.portContentSelectors||{};return this.findOne(e,s,h)}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(r=>{J.Dom.remove(r.portElement)})}renderPorts(){const r=this.container,e=[];r.childNodes.forEach(m=>{e.push(m)});const t=this.cell.getParsedPorts(),s=J.ArrayExt.groupBy(t,"zIndex"),h="auto";s[h]&&s[h].forEach(m=>{const d=this.getPortElement(m);r.append(d),e.push(d)}),Object.keys(s).forEach(m=>{if(m!==h){const d=parseInt(m,10);this.appendPorts(s[m],d,e)}}),this.updatePorts()}appendPorts(r,e,t){const s=r.map(h=>this.getPortElement(h));t[e]||e<0?J.Dom.before(t[Math.max(e,0)],s):J.Dom.append(this.container,s)}getPortElement(r){const e=this.portsCache[r.id];return e?e.portElement:this.createPortElement(r)}createPortElement(r){let e=a.Markup.renderMarkup(this.cell.getPortContainerMarkup());const t=e.elem;if(t==null)throw new Error("Invalid port container markup.");e=a.Markup.renderMarkup(this.getPortMarkup(r));const s=e.elem,h=e.selectors;if(s==null)throw new Error("Invalid port markup.");this.setAttrs({port:r.id,"port-group":r.group},s);let m="x6-port";r.group&&(m+=` x6-port-${r.group}`),J.Dom.addClass(t,m),J.Dom.addClass(t,"x6-port"),J.Dom.addClass(s,"x6-port-body"),t.appendChild(s);let d=h,v,x;if(this.existPortLabel(r)){if(e=a.Markup.renderMarkup(this.getPortLabelMarkup(r.label)),v=e.elem,x=e.selectors,v==null)throw new Error("Invalid port label markup.");if(h&&x){for(const F in x)if(h[F]&&F!==this.rootSelector)throw new Error("Selectors within port must be unique.");d=Object.assign(Object.assign({},h),x)}J.Dom.addClass(v,"x6-port-label"),t.appendChild(v)}return this.portsCache[r.id]={portElement:t,portSelectors:d,portLabelElement:v,portLabelSelectors:x,portContentElement:s,portContentSelectors:h},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:r,node:this.cell,container:t,selectors:d,labelContainer:v,labelSelectors:x,contentContainer:s,contentSelectors:h}),t}updatePorts(){const r=this.cell.getParsedGroups(),e=Object.keys(r);e.length===0?this.updatePortGroup():e.forEach(t=>this.updatePortGroup(t))}updatePortGroup(r){const e=ie.Rectangle.fromSize(this.cell.getSize()),t=this.cell.getPortsLayoutByGroup(r,e);for(let s=0,h=t.length;s<h;s+=1){const m=t[s],d=m.portId,v=this.portsCache[d]||{},x=m.portLayout;if(this.applyPortTransform(v.portElement,x),m.portAttrs!=null){const F={selectors:v.portSelectors||{}};m.portSize&&(F.rootBBox=ie.Rectangle.fromSize(m.portSize)),this.updateAttrs(v.portElement,m.portAttrs,F)}const N=m.labelLayout;if(N&&v.portLabelElement&&(this.applyPortTransform(v.portLabelElement,N,-(x.angle||0)),N.attrs)){const F={selectors:v.portLabelSelectors||{}};m.labelSize&&(F.rootBBox=ie.Rectangle.fromSize(m.labelSize)),this.updateAttrs(v.portLabelElement,N.attrs,F)}}}applyPortTransform(r,e,t=0){const s=e.angle,h=e.position,m=J.Dom.createSVGMatrix().rotate(t).translate(h.x||0,h.y||0).rotate(s||0);J.Dom.transform(r,m,{absolute:!0})}getPortMarkup(r){return r.markup||this.cell.portMarkup}getPortLabelMarkup(r){return r.markup||this.cell.portLabelMarkup}existPortLabel(r){return r.attrs&&r.attrs.text}getEventArgs(r,e,t){const s=this,h=s.cell,m=h;return e==null||t==null?{e:r,view:s,node:h,cell:m}:{e:r,x:e,y:t,view:s,node:h,cell:m}}getPortEventArgs(r,e,t){const s=this,h=s.cell,m=h;return t?{e:r,x:t.x,y:t.y,view:s,node:h,cell:m,port:e}:{e:r,view:s,node:h,cell:m,port:e}}notifyMouseDown(r,e,t){super.onMouseDown(r,e,t),this.notify("node:mousedown",this.getEventArgs(r,e,t))}notifyMouseMove(r,e,t){super.onMouseMove(r,e,t),this.notify("node:mousemove",this.getEventArgs(r,e,t))}notifyMouseUp(r,e,t){super.onMouseUp(r,e,t),this.notify("node:mouseup",this.getEventArgs(r,e,t))}notifyPortEvent(r,e,t){const s=this.findAttr("port",e.target);if(s){const h=e.type;r==="node:port:mouseenter"?e.type="mouseenter":r==="node:port:mouseleave"&&(e.type="mouseleave"),this.notify(r,this.getPortEventArgs(e,s,t)),e.type=h}}onClick(r,e,t){super.onClick(r,e,t),this.notify("node:click",this.getEventArgs(r,e,t)),this.notifyPortEvent("node:port:click",r,{x:e,y:t})}onDblClick(r,e,t){super.onDblClick(r,e,t),this.notify("node:dblclick",this.getEventArgs(r,e,t)),this.notifyPortEvent("node:port:dblclick",r,{x:e,y:t})}onContextMenu(r,e,t){super.onContextMenu(r,e,t),this.notify("node:contextmenu",this.getEventArgs(r,e,t)),this.notifyPortEvent("node:port:contextmenu",r,{x:e,y:t})}onMouseDown(r,e,t){this.isPropagationStopped(r)||(this.notifyMouseDown(r,e,t),this.notifyPortEvent("node:port:mousedown",r,{x:e,y:t}),this.startNodeDragging(r,e,t))}onMouseMove(r,e,t){const s=this.getEventData(r),h=s.action;if(h==="magnet")this.dragMagnet(r,e,t);else{if(h==="move"){const d=s.targetView||this;d.dragNode(r,e,t),d.notify("node:moving",{e:r,x:e,y:t,view:d,cell:d.cell,node:d.cell})}this.notifyMouseMove(r,e,t),this.notifyPortEvent("node:port:mousemove",r,{x:e,y:t})}this.setEventData(r,s)}onMouseUp(r,e,t){const s=this.getEventData(r),h=s.action;h==="magnet"?this.stopMagnetDragging(r,e,t):(this.notifyMouseUp(r,e,t),this.notifyPortEvent("node:port:mouseup",r,{x:e,y:t}),h==="move"&&(s.targetView||this).stopNodeDragging(r,e,t));const m=s.targetMagnet;m&&this.onMagnetClick(r,m,e,t),this.checkMouseleave(r)}onMouseOver(r){super.onMouseOver(r),this.notify("node:mouseover",this.getEventArgs(r)),this.notifyPortEvent("node:port:mouseenter",r),this.notifyPortEvent("node:port:mouseover",r)}onMouseOut(r){super.onMouseOut(r),this.notify("node:mouseout",this.getEventArgs(r)),this.notifyPortEvent("node:port:mouseleave",r),this.notifyPortEvent("node:port:mouseout",r)}onMouseEnter(r){this.updateClassName(r),super.onMouseEnter(r),this.notify("node:mouseenter",this.getEventArgs(r))}onMouseLeave(r){super.onMouseLeave(r),this.notify("node:mouseleave",this.getEventArgs(r))}onMouseWheel(r,e,t,s){super.onMouseWheel(r,e,t,s),this.notify("node:mousewheel",Object.assign({delta:s},this.getEventArgs(r,e,t)))}onMagnetClick(r,e,t,s){const h=this.graph;h.view.getMouseMovedCount(r)>h.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:e},this.getEventArgs(r,t,s)))}onMagnetDblClick(r,e,t,s){this.notify("node:magnet:dblclick",Object.assign({magnet:e},this.getEventArgs(r,t,s)))}onMagnetContextMenu(r,e,t,s){this.notify("node:magnet:contextmenu",Object.assign({magnet:e},this.getEventArgs(r,t,s)))}onMagnetMouseDown(r,e,t,s){this.startMagnetDragging(r,t,s)}onCustomEvent(r,e,t,s){this.notify("node:customevent",Object.assign({name:e},this.getEventArgs(r,t,s))),super.onCustomEvent(r,e,t,s)}prepareEmbedding(r){const e=this.graph,s=this.getEventData(r).cell||this.cell,h=e.findViewByCell(s),m=e.snapToGrid(r.clientX,r.clientY);this.notify("node:embed",{e:r,node:s,view:h,cell:s,x:m.x,y:m.y,currentParent:s.getParent()})}processEmbedding(r,e){const t=e.cell||this.cell,s=e.graph||this.graph,h=s.options.embedding,m=h.findParent;let d=typeof m=="function"?J.FunctionExt.call(m,s,{view:this,node:this.cell}).filter(ae=>b.Cell.isCell(ae)&&this.cell.id!==ae.id&&!ae.isDescendantOf(this.cell)):s.model.getNodesUnderNode(t,{by:m});if(h.frontOnly&&d.length>0){const ae=J.ArrayExt.groupBy(d,"zIndex"),$=J.ArrayExt.max(Object.keys(ae).map(te=>parseInt(te,10)));$&&(d=ae[$])}d=d.filter(ae=>ae.visible);let v=null;const x=e.candidateEmbedView,N=h.validate;for(let ae=d.length-1;ae>=0;ae-=1){const $=d[ae];if(x&&x.cell.id===$.id){v=x;break}else{const te=$.findView(s);if(N&&J.FunctionExt.call(N,s,{child:this.cell,parent:te.cell,childView:this,parentView:te})){v=te;break}}}this.clearEmbedding(e),v&&v.highlight(null,{type:"embedding"}),e.candidateEmbedView=v;const F=s.snapToGrid(r.clientX,r.clientY);this.notify("node:embedding",{e:r,cell:t,node:t,view:s.findViewByCell(t),x:F.x,y:F.y,currentParent:t.getParent(),candidateParent:v?v.cell:null})}clearEmbedding(r){const e=r.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),r.candidateEmbedView=null)}finalizeEmbedding(r,e){this.graph.startBatch("embedding");const t=e.cell||this.cell,s=e.graph||this.graph,h=s.findViewByCell(t),m=t.getParent(),d=e.candidateEmbedView;if(d?(d.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,(m==null||m.id!==d.cell.id)&&d.cell.insertChild(t,void 0,{ui:!0})):m&&m.unembed(t,{ui:!0}),s.model.getConnectedEdges(t,{deep:!0}).forEach(v=>{v.updateParent({ui:!0})}),h&&d){const v=s.snapToGrid(r.clientX,r.clientY);h.notify("node:embedded",{e:r,cell:t,x:v.x,y:v.y,node:t,view:s.findViewByCell(t),previousParent:m,currentParent:t.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let r=this.cell,e=this;for(;e&&!r.isEdge();){if(!r.hasParent()||e.can("stopDelegateOnDragging"))return e;r=r.getParent(),e=this.graph.findViewByCell(r)}return null}validateMagnet(r,e,t){if(e.getAttribute("magnet")!=="passive"){const s=this.graph.options.connecting.validateMagnet;return s?J.FunctionExt.call(s,this.graph,{e:t,magnet:e,view:r,cell:r.cell}):!0}return!1}startMagnetDragging(r,e,t){if(!this.can("magnetConnectable"))return;r.stopPropagation();const s=r.currentTarget,h=this.graph;this.setEventData(r,{targetMagnet:s}),this.validateMagnet(this,s,r)?(h.options.magnetThreshold<=0&&this.startConnectting(r,s,e,t),this.setEventData(r,{action:"magnet"}),this.stopPropagation(r)):this.onMouseDown(r,e,t),h.view.delegateDragEvents(r,this)}startConnectting(r,e,t,s){this.graph.model.startBatch("add-edge");const h=this.createEdgeFromMagnet(e,t,s);h.setEventData(r,h.prepareArrowheadDragging("target",{x:t,y:s,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(r,{edgeView:h}),h.notifyMouseDown(r,t,s)}getDefaultEdge(r,e){let t;const s=this.graph.options.connecting.createEdge;return s&&(t=J.FunctionExt.call(s,this.graph,{sourceMagnet:e,sourceView:r,sourceCell:r.cell})),t}createEdgeFromMagnet(r,e,t){const s=this.graph,h=s.model,m=this.getDefaultEdge(this,r);return m.setSource(Object.assign(Object.assign({},m.getSource()),this.getEdgeTerminal(r,e,t,m,"source"))),m.setTarget(Object.assign(Object.assign({},m.getTarget()),{x:e,y:t})),m.addTo(h,{async:!1,ui:!0}),m.findView(s)}dragMagnet(r,e,t){const s=this.getEventData(r),h=s.edgeView;if(h)h.onMouseMove(r,e,t),this.autoScrollGraph(r.clientX,r.clientY);else{const m=this.graph,d=m.options.magnetThreshold,v=this.getEventTarget(r),x=s.targetMagnet;if(d==="onleave"){if(x===v||x.contains(v))return}else if(m.view.getMouseMovedCount(r)<=d)return;this.startConnectting(r,x,e,t)}}stopMagnetDragging(r,e,t){const h=this.eventData(r).edgeView;h&&(h.onMouseUp(r,e,t),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(r,e,t){this.notify("node:unhandled:mousedown",{e:r,x:e,y:t,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(r,e,t,s,h){let m=[h];const d=this.graph.getPlugin("selection");if(d&&d.isSelectionMovable()){const v=d.getSelectedCells();v.includes(h)&&(m=v.filter(x=>x.isNode()))}m.forEach(v=>{this.notify(r,{e,x:t,y:s,cell:v,node:v,view:v.findView(this.graph)})})}getRestrictArea(r){const e=this.graph.options.translating.restrict,t=typeof e=="function"?J.FunctionExt.call(e,this.graph,r):e;return typeof t=="number"?this.graph.transform.getGraphArea().inflate(t):t===!0?this.graph.transform.getGraphArea():t||null}startNodeDragging(r,e,t){const s=this.getDelegatedView();if(s==null||!s.can("nodeMovable"))return this.notifyUnhandledMouseDown(r,e,t);this.setEventData(r,{targetView:s,action:"move"});const h=ie.Point.create(s.cell.getPosition());s.setEventData(r,{moving:!1,offset:h.diff(e,t),restrict:this.getRestrictArea(s)})}dragNode(r,e,t){const s=this.cell,h=this.graph,m=h.getGridSize(),d=this.getEventData(r),v=d.offset,x=d.restrict;d.moving||(d.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",r,e,t,this.cell)),this.autoScrollGraph(r.clientX,r.clientY);const N=ie.GeometryUtil.snapToGrid(e+v.x,m),F=ie.GeometryUtil.snapToGrid(t+v.y,m);s.setPosition(N,F,{restrict:x,deep:!0,ui:!0}),h.options.embedding.enabled&&(d.embedding||(this.prepareEmbedding(r),d.embedding=!0),this.processEmbedding(r,d))}stopNodeDragging(r,e,t){const s=this.getEventData(r);s.embedding&&this.finalizeEmbedding(r,s),s.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",r,e,t,this.cell)),s.moving=!1,s.embedding=!1}autoScrollGraph(r,e){const t=this.graph.getPlugin("scroller");t&&t.autoScroll(r,e)}}O.NodeView=o,function(l){l.toStringTag=`X6.${l.name}`;function r(e){if(e==null)return!1;if(e instanceof l)return!0;const t=e[Symbol.toStringTag],s=e;return(t==null||t===l.toStringTag)&&typeof s.isNodeView=="function"&&typeof s.isEdgeView=="function"&&typeof s.confirmUpdate=="function"&&typeof s.update=="function"&&typeof s.findPortElem=="function"&&typeof s.resize=="function"&&typeof s.rotate=="function"&&typeof s.translate=="function"}l.isNodeView=r}(o=O.NodeView||(O.NodeView={})),o.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),o.registry.register("node",o,!0)},39436:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ToolsView=void 0;const J=V(35695),ie=V(63011),T=V(33551),b=V(97042),u=V(48250);class a extends T.View{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return a.toStringTag}constructor(l={}){super(),this.svgContainer=this.createContainer(!0,l),this.htmlContainer=this.createContainer(!1,l),this.config(l)}createContainer(l,r){const e=l?T.View.createElement("g",!0):T.View.createElement("div",!1);return J.Dom.addClass(e,this.prefixClassName("cell-tools")),r.className&&J.Dom.addClass(e,r.className),e}config(l){if(this.options=Object.assign(Object.assign({},this.options),l),!b.CellView.isCellView(l.view)||l.view===this.cellView)return this;this.cellView=l.view,this.cell.isEdge()?(J.Dom.addClass(this.svgContainer,this.prefixClassName("edge-tools")),J.Dom.addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(J.Dom.addClass(this.svgContainer,this.prefixClassName("node-tools")),J.Dom.addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const r=this.options.items;if(!Array.isArray(r))return this;this.tools=[];const e=[];r.forEach(t=>{a.ToolItem.isToolItem(t)?t.name==="vertices"?e.unshift(t):e.push(t):(typeof t=="object"?t.name:t)==="vertices"?e.unshift(t):e.push(t)});for(let t=0;t<e.length;t+=1){const s=e[t];let h;if(a.ToolItem.isToolItem(s))h=s;else{const m=typeof s=="object"?s.name:s,d=typeof s=="object"?s.args||{}:{};if(m){if(this.cell.isNode()){const v=ie.NodeTool.registry.get(m);if(v)h=new v(d);else return ie.NodeTool.registry.onNotFound(m)}else if(this.cell.isEdge()){const v=ie.EdgeTool.registry.get(m);if(v)h=new v(d);else return ie.EdgeTool.registry.onNotFound(m)}}}h&&(h.config(this.cellView,this),h.render(),(h.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(h.container),this.tools.push(h))}return this}update(l={}){const r=this.tools;return r&&r.forEach(e=>{l.toolId!==e.cid&&e.isVisible()&&e.update()}),this}focus(l){const r=this.tools;return r&&r.forEach(e=>{l===e?e.show():e.hide()}),this}blur(l){const r=this.tools;return r&&r.forEach(e=>{e!==l&&!e.isVisible()&&(e.show(),e.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const l=this.tools;return l&&(l.forEach(r=>r.remove()),this.tools=null),J.Dom.remove(this.svgContainer),J.Dom.remove(this.htmlContainer),super.remove()}mount(){const l=this.tools,r=this.cellView;if(r&&l){const e=l.some(s=>s.options.isSVGElement!==!1),t=l.some(s=>s.options.isSVGElement===!1);e&&(this.options.local?r.container:r.graph.view.decorator).appendChild(this.svgContainer),t&&this.graph.container.appendChild(this.htmlContainer)}return this}}O.ToolsView=a,function(o){o.toStringTag=`X6.${o.name}`;function l(r){if(r==null)return!1;if(r instanceof o)return!0;const e=r[Symbol.toStringTag],t=r;return(e==null||e===o.toStringTag)&&t.graph!=null&&t.cell!=null&&typeof t.config=="function"&&typeof t.update=="function"&&typeof t.focus=="function"&&typeof t.blur=="function"&&typeof t.show=="function"&&typeof t.hide=="function"}o.isToolsView=l}(a=O.ToolsView||(O.ToolsView={})),function(o){class l extends T.View{static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){return J.ObjectExt.merge(J.ObjectExt.cloneDeep(this.getDefaults()),e)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return l.toStringTag}constructor(e={}){super(),this.visible=!0,this.options=this.getOptions(e),this.container=T.View.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),J.Dom.addClass(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&J.Dom.addClass(this.container,this.options.className),this.init()}init(){}getOptions(e){return this.constructor.getOptions(e)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(e,t){return this.cellView=e,this.parent=t,this.stamp(this.container),this.cell.isEdge()?J.Dom.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&J.Dom.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const e=this.options.markup;if(e){const t=u.Markup.parseJSONMarkup(e);this.container.appendChild(t.fragment),this.childNodes=t.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(e){e&&e.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const e=this.options.focusOpacity;return e!=null&&Number.isFinite(e)&&(this.container.style.opacity=`${e}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(e){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(e,this.cellView)}}l.defaults={isSVGElement:!0,tagName:"g"},o.ToolItem=l,function(r){let e=0;function t(h){return h?J.StringExt.pascalCase(h):(e+=1,`CustomTool${e}`)}function s(h){const m=J.ObjectExt.createClass(t(h.name),this);return m.config(h),m}r.define=s}(l=o.ToolItem||(o.ToolItem={})),function(r){r.toStringTag=`X6.${r.name}`;function e(t){if(t==null)return!1;if(t instanceof r)return!0;const s=t[Symbol.toStringTag],h=t;return(s==null||s===r.toStringTag)&&h.graph!=null&&h.cell!=null&&typeof h.config=="function"&&typeof h.update=="function"&&typeof h.focus=="function"&&typeof h.blur=="function"&&typeof h.show=="function"&&typeof h.hide=="function"&&typeof h.isVisible=="function"}r.isToolItem=e}(l=o.ToolItem||(o.ToolItem={}))}(a=O.ToolsView||(O.ToolsView={}))},33551:function(bt,O,V){"use strict";var J=this&&this.__decorate||function(a,o,l,r){var e=arguments.length,t=e<3?o:r===null?r=Object.getOwnPropertyDescriptor(o,l):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(a,o,l,r);else for(var h=a.length-1;h>=0;h--)(s=a[h])&&(t=(e<3?s(t):e>3?s(o,l,t):s(o,l))||t);return e>3&&t&&Object.defineProperty(o,l,t),t};Object.defineProperty(O,"__esModule",{value:!0}),O.View=void 0;const ie=V(35695),T=V(7090);class b extends ie.Basecoat{get priority(){return 2}get disposeContainer(){return!0}constructor(){super(),this.cid=u.uniqueId(),b.views[this.cid]=this}confirmUpdate(o,l){return 0}empty(o=this.container){return ie.Dom.empty(o),this}unmount(o=this.container){return ie.Dom.remove(o),this}remove(o=this.container){return o===this.container?(this.removeEventListeners(document),this.onRemove(),delete b.views[this.cid],this.disposeContainer&&this.unmount(o)):this.unmount(o),this}onRemove(){}setClass(o,l=this.container){l.classList.value=Array.isArray(o)?o.join(" "):o}addClass(o,l=this.container){return ie.Dom.addClass(l,Array.isArray(o)?o.join(" "):o),this}removeClass(o,l=this.container){return ie.Dom.removeClass(l,Array.isArray(o)?o.join(" "):o),this}setStyle(o,l=this.container){return ie.Dom.css(l,o),this}setAttrs(o,l=this.container){return o!=null&&l!=null&&ie.Dom.attr(l,o),this}findAttr(o,l=this.container){let r=l;for(;r&&r.nodeType===1;){const e=r.getAttribute(o);if(e!=null)return e;if(r===this.container)return null;r=r.parentNode}return null}find(o,l=this.container,r=this.selectors){return b.find(o,l,r).elems}findOne(o,l=this.container,r=this.selectors){const e=this.find(o,l,r);return e.length>0?e[0]:null}findByAttr(o,l=this.container){let r=l;for(;r&&r.getAttribute;){const e=r.getAttribute(o);if((e!=null||r===this.container)&&e!=="false")return r;r=r.parentNode}return null}getSelector(o,l){let r;if(o===this.container)return typeof l=="string"&&(r=`> ${l}`),r;if(o){const e=ie.Dom.index(o)+1;r=`${o.tagName.toLowerCase()}:nth-child(${e})`,l&&(r+=` > ${l}`),r=this.getSelector(o.parentNode,r)}return r}prefixClassName(o){return T.Config.prefix(o)}delegateEvents(o,l){if(o==null)return this;l||this.undelegateEvents();const r=/^(\S+)\s*(.*)$/;return Object.keys(o).forEach(e=>{const t=e.match(r);if(t==null)return;const s=this.getEventHandler(o[e]);typeof s=="function"&&this.delegateEvent(t[1],t[2],s)}),this}undelegateEvents(){return ie.Dom.Event.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(o,l){return this.addEventListeners(document,o,l),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(o,l,r){return ie.Dom.Event.on(this.container,o+this.getEventNamespace(),l,r),this}undelegateEvent(o,l,r){const e=o+this.getEventNamespace();return l==null?ie.Dom.Event.off(this.container,e):typeof l=="string"?ie.Dom.Event.off(this.container,e,l,r):ie.Dom.Event.off(this.container,e,l),this}addEventListeners(o,l,r){if(l==null)return this;const e=this.getEventNamespace();return Object.keys(l).forEach(t=>{const s=this.getEventHandler(l[t]);typeof s=="function"&&ie.Dom.Event.on(o,t+e,r,s)}),this}removeEventListeners(o){return o!=null&&ie.Dom.Event.off(o,this.getEventNamespace()),this}getEventNamespace(){return`.${T.Config.prefixCls}-event-${this.cid}`}getEventHandler(o){let l;if(typeof o=="string"){const r=this[o];typeof r=="function"&&(l=(...e)=>r.call(this,...e))}else l=(...r)=>o.call(this,...r);return l}getEventTarget(o,l={}){const{target:r,type:e,clientX:t=0,clientY:s=0}=o;return l.fromPoint||e==="touchmove"||e==="touchend"?document.elementFromPoint(t,s):r}stopPropagation(o){return this.setEventData(o,{propagationStopped:!0}),this}isPropagationStopped(o){return this.getEventData(o).propagationStopped===!0}getEventData(o){return this.eventData(o)}setEventData(o,l){return this.eventData(o,l)}eventData(o,l){if(o==null)throw new TypeError("Event object required");let r=o.data;const e=`__${this.cid}__`;return l==null?r==null?{}:r[e]||{}:(r==null&&(r=o.data={}),r[e]==null?r[e]=Object.assign({},l):r[e]=Object.assign(Object.assign({},r[e]),l),r[e])}normalizeEvent(o){return b.normalizeEvent(o)}dispose(){this.remove()}}J([b.dispose()],b.prototype,"dispose",null),O.View=b,function(a){function o(e,t){return t?ie.Dom.createSvgElement(e||"g"):ie.Dom.createElementNS(e||"div")}a.createElement=o;function l(e,t,s){if(!e||e===".")return{elems:[t]};if(s){const h=s[e];if(h)return{elems:Array.isArray(h)?h:[h]}}if(T.Config.useCSSSelector){const h=e.includes(">")?`:scope ${e}`:e;return{isCSSSelector:!0,elems:Array.prototype.slice.call(t.querySelectorAll(h))}}return{elems:[]}}a.find=l;function r(e){let t=e;const s=e.originalEvent,h=s&&s.changedTouches&&s.changedTouches[0];if(h){for(const m in e)h[m]===void 0&&(h[m]=e[m]);t=h}return t}a.normalizeEvent=r}(b=O.View||(O.View={})),function(a){a.views={};function o(l){return a.views[l]||null}a.getView=o}(b=O.View||(O.View={}));var u;(function(a){let o=0;function l(){const r=`v${o}`;return o+=1,r}a.uniqueId=l})(u||(u={}))},85788:function(bt,O,V){var J=V(58579);bt.exports={Graph:J.Graph,json:V(62485),alg:V(39100),version:J.version}},74774:function(bt,O,V){var J=V(8057);bt.exports=ie;function ie(T){var b={},u=[],a;function o(l){J.has(b,l)||(b[l]=!0,a.push(l),J.each(T.successors(l),o),J.each(T.predecessors(l),o))}return J.each(T.nodes(),function(l){a=[],o(l),a.length&&u.push(a)}),u}},65179:function(bt,O,V){var J=V(8057);bt.exports=ie;function ie(b,u,a){J.isArray(u)||(u=[u]);var o=(b.isDirected()?b.successors:b.neighbors).bind(b),l=[],r={};return J.each(u,function(e){if(!b.hasNode(e))throw new Error("Graph does not have node: "+e);T(b,e,a==="post",r,o,l)}),l}function T(b,u,a,o,l,r){J.has(o,u)||(o[u]=!0,a||r.push(u),J.each(l(u),function(e){T(b,e,a,o,l,r)}),a&&r.push(u))}},78698:function(bt,O,V){var J=V(69205),ie=V(8057);bt.exports=T;function T(b,u,a){return ie.transform(b.nodes(),function(o,l){o[l]=J(b,l,u,a)},{})}},69205:function(bt,O,V){var J=V(8057),ie=V(96129);bt.exports=b;var T=J.constant(1);function b(a,o,l,r){return u(a,String(o),l||T,r||function(e){return a.outEdges(e)})}function u(a,o,l,r){var e={},t=new ie,s,h,m=function(d){var v=d.v!==s?d.v:d.w,x=e[v],N=l(d),F=h.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+N);F<x.distance&&(x.distance=F,x.predecessor=s,t.decrease(v,F))};for(a.nodes().forEach(function(d){var v=d===o?0:Number.POSITIVE_INFINITY;e[d]={distance:v},t.add(d,v)});t.size()>0&&(s=t.removeMin(),h=e[s],h.distance!==Number.POSITIVE_INFINITY);)r(s).forEach(m);return e}},32630:function(bt,O,V){var J=V(8057),ie=V(93070);bt.exports=T;function T(b){return J.filter(ie(b),function(u){return u.length>1||u.length===1&&b.hasEdge(u[0],u[0])})}},3171:function(bt,O,V){var J=V(8057);bt.exports=T;var ie=J.constant(1);function T(u,a,o){return b(u,a||ie,o||function(l){return u.outEdges(l)})}function b(u,a,o){var l={},r=u.nodes();return r.forEach(function(e){l[e]={},l[e][e]={distance:0},r.forEach(function(t){e!==t&&(l[e][t]={distance:Number.POSITIVE_INFINITY})}),o(e).forEach(function(t){var s=t.v===e?t.w:t.v,h=a(t);l[e][s]={distance:h,predecessor:e}})}),r.forEach(function(e){var t=l[e];r.forEach(function(s){var h=l[s];r.forEach(function(m){var d=h[e],v=t[m],x=h[m],N=d.distance+v.distance;N<x.distance&&(x.distance=N,x.predecessor=v.predecessor)})})}),l}},39100:function(bt,O,V){bt.exports={components:V(74774),dijkstra:V(69205),dijkstraAll:V(78698),findCycles:V(32630),floydWarshall:V(3171),isAcyclic:V(78149),postorder:V(85979),preorder:V(5340),prim:V(74975),tarjan:V(93070),topsort:V(37034)}},78149:function(bt,O,V){var J=V(37034);bt.exports=ie;function ie(T){try{J(T)}catch(b){if(b instanceof J.CycleException)return!1;throw b}return!0}},85979:function(bt,O,V){var J=V(65179);bt.exports=ie;function ie(T,b){return J(T,b,"post")}},5340:function(bt,O,V){var J=V(65179);bt.exports=ie;function ie(T,b){return J(T,b,"pre")}},74975:function(bt,O,V){var J=V(8057),ie=V(1053),T=V(96129);bt.exports=b;function b(u,a){var o=new ie,l={},r=new T,e;function t(h){var m=h.v===e?h.w:h.v,d=r.priority(m);if(d!==void 0){var v=a(h);v<d&&(l[m]=e,r.decrease(m,v))}}if(u.nodeCount()===0)return o;J.each(u.nodes(),function(h){r.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),r.decrease(u.nodes()[0],0);for(var s=!1;r.size()>0;){if(e=r.removeMin(),J.has(l,e))o.setEdge(e,l[e]);else{if(s)throw new Error("Input graph is not connected: "+u);s=!0}u.nodeEdges(e).forEach(t)}return o}},93070:function(bt,O,V){var J=V(8057);bt.exports=ie;function ie(T){var b=0,u=[],a={},o=[];function l(r){var e=a[r]={onStack:!0,lowlink:b,index:b++};if(u.push(r),T.successors(r).forEach(function(h){J.has(a,h)?a[h].onStack&&(e.lowlink=Math.min(e.lowlink,a[h].index)):(l(h),e.lowlink=Math.min(e.lowlink,a[h].lowlink))}),e.lowlink===e.index){var t=[],s;do s=u.pop(),a[s].onStack=!1,t.push(s);while(r!==s);o.push(t)}}return T.nodes().forEach(function(r){J.has(a,r)||l(r)}),o}},37034:function(bt,O,V){var J=V(8057);bt.exports=ie,ie.CycleException=T;function ie(b){var u={},a={},o=[];function l(r){if(J.has(a,r))throw new T;J.has(u,r)||(a[r]=!0,u[r]=!0,J.each(b.predecessors(r),l),delete a[r],o.push(r))}if(J.each(b.sinks(),l),J.size(u)!==b.nodeCount())throw new T;return o}function T(){}},96129:function(bt,O,V){var J=V(8057);bt.exports=ie;function ie(){this._arr=[],this._keyIndices={}}ie.prototype.size=function(){return this._arr.length},ie.prototype.keys=function(){return this._arr.map(function(T){return T.key})},ie.prototype.has=function(T){return J.has(this._keyIndices,T)},ie.prototype.priority=function(T){var b=this._keyIndices[T];if(b!==void 0)return this._arr[b].priority},ie.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ie.prototype.add=function(T,b){var u=this._keyIndices;if(T=String(T),!J.has(u,T)){var a=this._arr,o=a.length;return u[T]=o,a.push({key:T,priority:b}),this._decrease(o),!0}return!1},ie.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var T=this._arr.pop();return delete this._keyIndices[T.key],this._heapify(0),T.key},ie.prototype.decrease=function(T,b){var u=this._keyIndices[T];if(b>this._arr[u].priority)throw new Error("New priority is greater than current priority. Key: "+T+" Old: "+this._arr[u].priority+" New: "+b);this._arr[u].priority=b,this._decrease(u)},ie.prototype._heapify=function(T){var b=this._arr,u=2*T,a=u+1,o=T;u<b.length&&(o=b[u].priority<b[o].priority?u:o,a<b.length&&(o=b[a].priority<b[o].priority?a:o),o!==T&&(this._swap(T,o),this._heapify(o)))},ie.prototype._decrease=function(T){for(var b=this._arr,u=b[T].priority,a;T!==0&&(a=T>>1,!(b[a].priority<u));)this._swap(T,a),T=a},ie.prototype._swap=function(T,b){var u=this._arr,a=this._keyIndices,o=u[T],l=u[b];u[T]=l,u[b]=o,a[l.key]=T,a[o.key]=b}},1053:function(bt,O,V){"use strict";var J=V(8057);bt.exports=u;var ie="\0",T="\0",b="";function u(t){this._isDirected=J.has(t,"directed")?t.directed:!0,this._isMultigraph=J.has(t,"multigraph")?t.multigraph:!1,this._isCompound=J.has(t,"compound")?t.compound:!1,this._label=void 0,this._defaultNodeLabelFn=J.constant(void 0),this._defaultEdgeLabelFn=J.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[T]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}u.prototype._nodeCount=0,u.prototype._edgeCount=0,u.prototype.isDirected=function(){return this._isDirected},u.prototype.isMultigraph=function(){return this._isMultigraph},u.prototype.isCompound=function(){return this._isCompound},u.prototype.setGraph=function(t){return this._label=t,this},u.prototype.graph=function(){return this._label},u.prototype.setDefaultNodeLabel=function(t){return J.isFunction(t)||(t=J.constant(t)),this._defaultNodeLabelFn=t,this},u.prototype.nodeCount=function(){return this._nodeCount},u.prototype.nodes=function(){return J.keys(this._nodes)},u.prototype.sources=function(){return J.filter(this.nodes(),J.bind(function(t){return J.isEmpty(this._in[t])},this))},u.prototype.sinks=function(){return J.filter(this.nodes(),J.bind(function(t){return J.isEmpty(this._out[t])},this))},u.prototype.setNodes=function(t,s){var h=arguments;return J.each(t,J.bind(function(m){h.length>1?this.setNode(m,s):this.setNode(m)},this)),this},u.prototype.setNode=function(t,s){return J.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=s),this):(this._nodes[t]=arguments.length>1?s:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=T,this._children[t]={},this._children[T][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},u.prototype.node=function(t){return this._nodes[t]},u.prototype.hasNode=function(t){return J.has(this._nodes,t)},u.prototype.removeNode=function(t){var s=this;if(J.has(this._nodes,t)){var h=function(m){s.removeEdge(s._edgeObjs[m])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],J.each(this.children(t),J.bind(function(m){this.setParent(m)},this)),delete this._children[t]),J.each(J.keys(this._in[t]),h),delete this._in[t],delete this._preds[t],J.each(J.keys(this._out[t]),h),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},u.prototype.setParent=function(t,s){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(J.isUndefined(s))s=T;else{s+="";for(var h=s;!J.isUndefined(h);h=this.parent(h))if(h===t)throw new Error("Setting "+s+" as parent of "+t+" would create create a cycle");this.setNode(s)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=s,this._children[s][t]=!0,this},u.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},u.prototype.parent=function(t){if(this._isCompound){var s=this._parent[t];if(s!==T)return s}},u.prototype.children=function(t){if(J.isUndefined(t)&&(t=T),this._isCompound){var s=this._children[t];if(s)return J.keys(s)}else{if(t===T)return this.nodes();if(this.hasNode(t))return[]}},u.prototype.predecessors=function(t){var s=this._preds[t];if(s)return J.keys(s)},u.prototype.successors=function(t){var s=this._sucs[t];if(s)return J.keys(s)},u.prototype.neighbors=function(t){var s=this.predecessors(t);if(s)return J.union(s,this.successors(t))},u.prototype.isLeaf=function(t){var s;return this.isDirected()?s=this.successors(t):s=this.neighbors(t),s.length===0},u.prototype.filterNodes=function(t){var s=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});s.setGraph(this.graph()),J.each(this._nodes,J.bind(function(v,x){t(x)&&s.setNode(x,v)},this)),J.each(this._edgeObjs,J.bind(function(v){s.hasNode(v.v)&&s.hasNode(v.w)&&s.setEdge(v,this.edge(v))},this));var h=this,m={};function d(v){var x=h.parent(v);return x===void 0||s.hasNode(x)?(m[v]=x,x):x in m?m[x]:d(x)}return this._isCompound&&J.each(s.nodes(),function(v){s.setParent(v,d(v))}),s},u.prototype.setDefaultEdgeLabel=function(t){return J.isFunction(t)||(t=J.constant(t)),this._defaultEdgeLabelFn=t,this},u.prototype.edgeCount=function(){return this._edgeCount},u.prototype.edges=function(){return J.values(this._edgeObjs)},u.prototype.setPath=function(t,s){var h=this,m=arguments;return J.reduce(t,function(d,v){return m.length>1?h.setEdge(d,v,s):h.setEdge(d,v),v}),this},u.prototype.setEdge=function(){var t,s,h,m,d=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(t=v.v,s=v.w,h=v.name,arguments.length===2&&(m=arguments[1],d=!0)):(t=v,s=arguments[1],h=arguments[3],arguments.length>2&&(m=arguments[2],d=!0)),t=""+t,s=""+s,J.isUndefined(h)||(h=""+h);var x=l(this._isDirected,t,s,h);if(J.has(this._edgeLabels,x))return d&&(this._edgeLabels[x]=m),this;if(!J.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(s),this._edgeLabels[x]=d?m:this._defaultEdgeLabelFn(t,s,h);var N=r(this._isDirected,t,s,h);return t=N.v,s=N.w,Object.freeze(N),this._edgeObjs[x]=N,a(this._preds[s],t),a(this._sucs[t],s),this._in[s][x]=N,this._out[t][x]=N,this._edgeCount++,this},u.prototype.edge=function(t,s,h){var m=arguments.length===1?e(this._isDirected,arguments[0]):l(this._isDirected,t,s,h);return this._edgeLabels[m]},u.prototype.hasEdge=function(t,s,h){var m=arguments.length===1?e(this._isDirected,arguments[0]):l(this._isDirected,t,s,h);return J.has(this._edgeLabels,m)},u.prototype.removeEdge=function(t,s,h){var m=arguments.length===1?e(this._isDirected,arguments[0]):l(this._isDirected,t,s,h),d=this._edgeObjs[m];return d&&(t=d.v,s=d.w,delete this._edgeLabels[m],delete this._edgeObjs[m],o(this._preds[s],t),o(this._sucs[t],s),delete this._in[s][m],delete this._out[t][m],this._edgeCount--),this},u.prototype.inEdges=function(t,s){var h=this._in[t];if(h){var m=J.values(h);return s?J.filter(m,function(d){return d.v===s}):m}},u.prototype.outEdges=function(t,s){var h=this._out[t];if(h){var m=J.values(h);return s?J.filter(m,function(d){return d.w===s}):m}},u.prototype.nodeEdges=function(t,s){var h=this.inEdges(t,s);if(h)return h.concat(this.outEdges(t,s))};function a(t,s){t[s]?t[s]++:t[s]=1}function o(t,s){--t[s]||delete t[s]}function l(t,s,h,m){var d=""+s,v=""+h;if(!t&&d>v){var x=d;d=v,v=x}return d+b+v+b+(J.isUndefined(m)?ie:m)}function r(t,s,h,m){var d=""+s,v=""+h;if(!t&&d>v){var x=d;d=v,v=x}var N={v:d,w:v};return m&&(N.name=m),N}function e(t,s){return l(t,s.v,s.w,s.name)}},58579:function(bt,O,V){bt.exports={Graph:V(1053),version:V(82321)}},62485:function(bt,O,V){var J=V(8057),ie=V(1053);bt.exports={write:T,read:a};function T(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:b(o),edges:u(o)};return J.isUndefined(o.graph())||(l.value=J.clone(o.graph())),l}function b(o){return J.map(o.nodes(),function(l){var r=o.node(l),e=o.parent(l),t={v:l};return J.isUndefined(r)||(t.value=r),J.isUndefined(e)||(t.parent=e),t})}function u(o){return J.map(o.edges(),function(l){var r=o.edge(l),e={v:l.v,w:l.w};return J.isUndefined(l.name)||(e.name=l.name),J.isUndefined(r)||(e.value=r),e})}function a(o){var l=new ie(o.options).setGraph(o.value);return J.each(o.nodes,function(r){l.setNode(r.v,r.value),r.parent&&l.setParent(r.v,r.parent)}),J.each(o.edges,function(r){l.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),l}},8057:function(bt,O,V){var J;try{J=V(96486)}catch(ie){}J||(J=window._),bt.exports=J},82321:function(bt){bt.exports="2.1.4"},49612:function(bt,O,V){"use strict";var J,ie=V(28785).default,T=V(48374).default,b=V(29777).default,u=V(25457).default,a=V(98637).default,o=V(25098).default,l=V(31996).default,r=V(26037).default,e=V(80363).default,t=V(9783).default,s=V(74978).default,h=V(5574).default,m=V(64599).default,d=V(15009).default,v=V(52677).default,x=V(12444).default,N=V(72004).default;J={value:!0};var F=V(44091),ae=V(75823),$=" ".repeat(2),te=" ".repeat(4);function fe(){return B(this)}function B(ot){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=mt.maxRows,Z=_e===void 0?15:_e,Q=mt.maxColumns,le=Q===void 0?10:Q,Xe=mt.maxNumSize,dt=Xe===void 0?8:Xe,ft=mt.padMinus,gt=ft===void 0?"auto":ft;return"".concat(ot.constructor.name,` {
`).concat($,`[
`).concat(te).concat(he(ot,Z,le,dt,gt),`
`).concat($,`]
`).concat($,"rows: ").concat(ot.rows,`
`).concat($,"columns: ").concat(ot.columns,`
}`)}function he(ot,mt,_e,Z,Q){var le=ot.rows,Xe=ot.columns,dt=Math.min(le,mt),ft=Math.min(Xe,_e),gt=[];if(Q==="auto"){Q=!1;e:for(var ln=0;ln<dt;ln++)for(var bn=0;bn<ft;bn++)if(ot.get(ln,bn)<0){Q=!0;break e}}for(var En=0;En<dt;En++){for(var Cr=[],tr=0;tr<ft;tr++)Cr.push(z(ot.get(En,tr),Z,Q));gt.push("".concat(Cr.join(" ")))}return ft!==Xe&&(gt[gt.length-1]+=" ... ".concat(Xe-_e," more columns")),dt!==le&&gt.push("... ".concat(le-mt," more rows")),gt.join(`
`.concat(te))}function z(ot,mt,_e){return(ot>=0&&_e?" ".concat(ee(ot,mt-1)):ee(ot,mt)).padEnd(mt)}function ee(ot,mt){var _e=ot.toString();if(_e.length<=mt)return _e;var Z=ot.toFixed(mt);if(Z.length>mt&&(Z=ot.toFixed(Math.max(0,mt-(Z.length-mt)))),Z.length<=mt&&!Z.startsWith("0.000")&&!Z.startsWith("-0.000"))return Z;var Q=ot.toExponential(mt);return Q.length>mt&&(Q=ot.toExponential(Math.max(0,mt-(Q.length-mt)))),Q.slice(0)}function pe(ot,mt){ot.prototype.add=function(Z){return typeof Z=="number"?this.addS(Z):this.addM(Z)},ot.prototype.addS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)+Z);return this},ot.prototype.addM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)+Z.get(Q,le));return this},ot.add=function(Z,Q){var le=new mt(Z);return le.add(Q)},ot.prototype.sub=function(Z){return typeof Z=="number"?this.subS(Z):this.subM(Z)},ot.prototype.subS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)-Z);return this},ot.prototype.subM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)-Z.get(Q,le));return this},ot.sub=function(Z,Q){var le=new mt(Z);return le.sub(Q)},ot.prototype.subtract=ot.prototype.sub,ot.prototype.subtractS=ot.prototype.subS,ot.prototype.subtractM=ot.prototype.subM,ot.subtract=ot.sub,ot.prototype.mul=function(Z){return typeof Z=="number"?this.mulS(Z):this.mulM(Z)},ot.prototype.mulS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)*Z);return this},ot.prototype.mulM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)*Z.get(Q,le));return this},ot.mul=function(Z,Q){var le=new mt(Z);return le.mul(Q)},ot.prototype.multiply=ot.prototype.mul,ot.prototype.multiplyS=ot.prototype.mulS,ot.prototype.multiplyM=ot.prototype.mulM,ot.multiply=ot.mul,ot.prototype.div=function(Z){return typeof Z=="number"?this.divS(Z):this.divM(Z)},ot.prototype.divS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)/Z);return this},ot.prototype.divM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)/Z.get(Q,le));return this},ot.div=function(Z,Q){var le=new mt(Z);return le.div(Q)},ot.prototype.divide=ot.prototype.div,ot.prototype.divideS=ot.prototype.divS,ot.prototype.divideM=ot.prototype.divM,ot.divide=ot.div,ot.prototype.mod=function(Z){return typeof Z=="number"?this.modS(Z):this.modM(Z)},ot.prototype.modS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)%Z);return this},ot.prototype.modM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)%Z.get(Q,le));return this},ot.mod=function(Z,Q){var le=new mt(Z);return le.mod(Q)},ot.prototype.modulus=ot.prototype.mod,ot.prototype.modulusS=ot.prototype.modS,ot.prototype.modulusM=ot.prototype.modM,ot.modulus=ot.mod,ot.prototype.and=function(Z){return typeof Z=="number"?this.andS(Z):this.andM(Z)},ot.prototype.andS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)&Z);return this},ot.prototype.andM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)&Z.get(Q,le));return this},ot.and=function(Z,Q){var le=new mt(Z);return le.and(Q)},ot.prototype.or=function(Z){return typeof Z=="number"?this.orS(Z):this.orM(Z)},ot.prototype.orS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)|Z);return this},ot.prototype.orM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)|Z.get(Q,le));return this},ot.or=function(Z,Q){var le=new mt(Z);return le.or(Q)},ot.prototype.xor=function(Z){return typeof Z=="number"?this.xorS(Z):this.xorM(Z)},ot.prototype.xorS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)^Z);return this},ot.prototype.xorM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)^Z.get(Q,le));return this},ot.xor=function(Z,Q){var le=new mt(Z);return le.xor(Q)},ot.prototype.leftShift=function(Z){return typeof Z=="number"?this.leftShiftS(Z):this.leftShiftM(Z)},ot.prototype.leftShiftS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)<<Z);return this},ot.prototype.leftShiftM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)<<Z.get(Q,le));return this},ot.leftShift=function(Z,Q){var le=new mt(Z);return le.leftShift(Q)},ot.prototype.signPropagatingRightShift=function(Z){return typeof Z=="number"?this.signPropagatingRightShiftS(Z):this.signPropagatingRightShiftM(Z)},ot.prototype.signPropagatingRightShiftS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)>>Z);return this},ot.prototype.signPropagatingRightShiftM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)>>Z.get(Q,le));return this},ot.signPropagatingRightShift=function(Z,Q){var le=new mt(Z);return le.signPropagatingRightShift(Q)},ot.prototype.rightShift=function(Z){return typeof Z=="number"?this.rightShiftS(Z):this.rightShiftM(Z)},ot.prototype.rightShiftS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)>>>Z);return this},ot.prototype.rightShiftM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)>>>Z.get(Q,le));return this},ot.rightShift=function(Z,Q){var le=new mt(Z);return le.rightShift(Q)},ot.prototype.zeroFillRightShift=ot.prototype.rightShift,ot.prototype.zeroFillRightShiftS=ot.prototype.rightShiftS,ot.prototype.zeroFillRightShiftM=ot.prototype.rightShiftM,ot.zeroFillRightShift=ot.rightShift,ot.prototype.not=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,~this.get(Z,Q));return this},ot.not=function(Z){var Q=new mt(Z);return Q.not()},ot.prototype.abs=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.abs(this.get(Z,Q)));return this},ot.abs=function(Z){var Q=new mt(Z);return Q.abs()},ot.prototype.acos=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.acos(this.get(Z,Q)));return this},ot.acos=function(Z){var Q=new mt(Z);return Q.acos()},ot.prototype.acosh=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.acosh(this.get(Z,Q)));return this},ot.acosh=function(Z){var Q=new mt(Z);return Q.acosh()},ot.prototype.asin=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.asin(this.get(Z,Q)));return this},ot.asin=function(Z){var Q=new mt(Z);return Q.asin()},ot.prototype.asinh=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.asinh(this.get(Z,Q)));return this},ot.asinh=function(Z){var Q=new mt(Z);return Q.asinh()},ot.prototype.atan=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.atan(this.get(Z,Q)));return this},ot.atan=function(Z){var Q=new mt(Z);return Q.atan()},ot.prototype.atanh=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.atanh(this.get(Z,Q)));return this},ot.atanh=function(Z){var Q=new mt(Z);return Q.atanh()},ot.prototype.cbrt=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.cbrt(this.get(Z,Q)));return this},ot.cbrt=function(Z){var Q=new mt(Z);return Q.cbrt()},ot.prototype.ceil=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.ceil(this.get(Z,Q)));return this},ot.ceil=function(Z){var Q=new mt(Z);return Q.ceil()},ot.prototype.clz32=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.clz32(this.get(Z,Q)));return this},ot.clz32=function(Z){var Q=new mt(Z);return Q.clz32()},ot.prototype.cos=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.cos(this.get(Z,Q)));return this},ot.cos=function(Z){var Q=new mt(Z);return Q.cos()},ot.prototype.cosh=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.cosh(this.get(Z,Q)));return this},ot.cosh=function(Z){var Q=new mt(Z);return Q.cosh()},ot.prototype.exp=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.exp(this.get(Z,Q)));return this},ot.exp=function(Z){var Q=new mt(Z);return Q.exp()},ot.prototype.expm1=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.expm1(this.get(Z,Q)));return this},ot.expm1=function(Z){var Q=new mt(Z);return Q.expm1()},ot.prototype.floor=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.floor(this.get(Z,Q)));return this},ot.floor=function(Z){var Q=new mt(Z);return Q.floor()},ot.prototype.fround=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.fround(this.get(Z,Q)));return this},ot.fround=function(Z){var Q=new mt(Z);return Q.fround()},ot.prototype.log=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.log(this.get(Z,Q)));return this},ot.log=function(Z){var Q=new mt(Z);return Q.log()},ot.prototype.log1p=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.log1p(this.get(Z,Q)));return this},ot.log1p=function(Z){var Q=new mt(Z);return Q.log1p()},ot.prototype.log10=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.log10(this.get(Z,Q)));return this},ot.log10=function(Z){var Q=new mt(Z);return Q.log10()},ot.prototype.log2=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.log2(this.get(Z,Q)));return this},ot.log2=function(Z){var Q=new mt(Z);return Q.log2()},ot.prototype.round=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.round(this.get(Z,Q)));return this},ot.round=function(Z){var Q=new mt(Z);return Q.round()},ot.prototype.sign=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.sign(this.get(Z,Q)));return this},ot.sign=function(Z){var Q=new mt(Z);return Q.sign()},ot.prototype.sin=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.sin(this.get(Z,Q)));return this},ot.sin=function(Z){var Q=new mt(Z);return Q.sin()},ot.prototype.sinh=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.sinh(this.get(Z,Q)));return this},ot.sinh=function(Z){var Q=new mt(Z);return Q.sinh()},ot.prototype.sqrt=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.sqrt(this.get(Z,Q)));return this},ot.sqrt=function(Z){var Q=new mt(Z);return Q.sqrt()},ot.prototype.tan=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.tan(this.get(Z,Q)));return this},ot.tan=function(Z){var Q=new mt(Z);return Q.tan()},ot.prototype.tanh=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.tanh(this.get(Z,Q)));return this},ot.tanh=function(Z){var Q=new mt(Z);return Q.tanh()},ot.prototype.trunc=function(){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<this.columns;Q++)this.set(Z,Q,Math.trunc(this.get(Z,Q)));return this},ot.trunc=function(Z){var Q=new mt(Z);return Q.trunc()},ot.pow=function(Z,Q){var le=new mt(Z);return le.pow(Q)},ot.prototype.pow=function(Z){return typeof Z=="number"?this.powS(Z):this.powM(Z)},ot.prototype.powS=function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,Math.pow(this.get(Q,le),Z));return this},ot.prototype.powM=function(Z){if(Z=mt.checkMatrix(Z),this.rows!==Z.rows||this.columns!==Z.columns)throw new RangeError("Matrices dimensions must be equal");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,Math.pow(this.get(Q,le),Z.get(Q,le)));return this}}function S(ot,mt,_e){var Z=_e?ot.rows:ot.rows-1;if(mt<0||mt>Z)throw new RangeError("Row index out of range")}function q(ot,mt,_e){var Z=_e?ot.columns:ot.columns-1;if(mt<0||mt>Z)throw new RangeError("Column index out of range")}function M(ot,mt){if(mt.to1DArray&&(mt=mt.to1DArray()),mt.length!==ot.columns)throw new RangeError("vector size must be the same as the number of columns");return mt}function I(ot,mt){if(mt.to1DArray&&(mt=mt.to1DArray()),mt.length!==ot.rows)throw new RangeError("vector size must be the same as the number of rows");return mt}function j(ot,mt){if(!F.isAnyArray(mt))throw new TypeError("row indices must be an array");for(var _e=0;_e<mt.length;_e++)if(mt[_e]<0||mt[_e]>=ot.rows)throw new RangeError("row indices are out of range")}function ue(ot,mt){if(!F.isAnyArray(mt))throw new TypeError("column indices must be an array");for(var _e=0;_e<mt.length;_e++)if(mt[_e]<0||mt[_e]>=ot.columns)throw new RangeError("column indices are out of range")}function se(ot,mt,_e,Z,Q){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Ce("startRow",mt),Ce("endRow",_e),Ce("startColumn",Z),Ce("endColumn",Q),mt>_e||Z>Q||mt<0||mt>=ot.rows||_e<0||_e>=ot.rows||Z<0||Z>=ot.columns||Q<0||Q>=ot.columns)throw new RangeError("Submatrix indices are out of range")}function Ee(ot){for(var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_e=[],Z=0;Z<ot;Z++)_e.push(mt);return _e}function Ce(ot,mt){if(typeof mt!="number")throw new TypeError("".concat(ot," must be a number"))}function xe(ot){if(ot.isEmpty())throw new Error("Empty matrix has no elements to index")}function Oe(ot){for(var mt=Ee(ot.rows),_e=0;_e<ot.rows;++_e)for(var Z=0;Z<ot.columns;++Z)mt[_e]+=ot.get(_e,Z);return mt}function Le(ot){for(var mt=Ee(ot.columns),_e=0;_e<ot.rows;++_e)for(var Z=0;Z<ot.columns;++Z)mt[Z]+=ot.get(_e,Z);return mt}function Ge(ot){for(var mt=0,_e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)mt+=ot.get(_e,Z);return mt}function He(ot){for(var mt=Ee(ot.rows,1),_e=0;_e<ot.rows;++_e)for(var Z=0;Z<ot.columns;++Z)mt[_e]*=ot.get(_e,Z);return mt}function Et(ot){for(var mt=Ee(ot.columns,1),_e=0;_e<ot.rows;++_e)for(var Z=0;Z<ot.columns;++Z)mt[Z]*=ot.get(_e,Z);return mt}function Ct(ot){for(var mt=1,_e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)mt*=ot.get(_e,Z);return mt}function Gt(ot,mt,_e){for(var Z=ot.rows,Q=ot.columns,le=[],Xe=0;Xe<Z;Xe++){for(var dt=0,ft=0,gt=0,ln=0;ln<Q;ln++)gt=ot.get(Xe,ln)-_e[Xe],dt+=gt,ft+=gt*gt;mt?le.push((ft-dt*dt/Q)/(Q-1)):le.push((ft-dt*dt/Q)/Q)}return le}function At(ot,mt,_e){for(var Z=ot.rows,Q=ot.columns,le=[],Xe=0;Xe<Q;Xe++){for(var dt=0,ft=0,gt=0,ln=0;ln<Z;ln++)gt=ot.get(ln,Xe)-_e[Xe],dt+=gt,ft+=gt*gt;mt?le.push((ft-dt*dt/Z)/(Z-1)):le.push((ft-dt*dt/Z)/Z)}return le}function vt(ot,mt,_e){for(var Z=ot.rows,Q=ot.columns,le=Z*Q,Xe=0,dt=0,ft=0,gt=0;gt<Z;gt++)for(var ln=0;ln<Q;ln++)ft=ot.get(gt,ln)-_e,Xe+=ft,dt+=ft*ft;return mt?(dt-Xe*Xe/le)/(le-1):(dt-Xe*Xe/le)/le}function cn(ot,mt){for(var _e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)ot.set(_e,Z,ot.get(_e,Z)-mt[_e])}function hn(ot,mt){for(var _e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)ot.set(_e,Z,ot.get(_e,Z)-mt[Z])}function Bn(ot,mt){for(var _e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)ot.set(_e,Z,ot.get(_e,Z)-mt)}function Fn(ot){for(var mt=[],_e=0;_e<ot.rows;_e++){for(var Z=0,Q=0;Q<ot.columns;Q++)Z+=Math.pow(ot.get(_e,Q),2)/(ot.columns-1);mt.push(Math.sqrt(Z))}return mt}function ir(ot,mt){for(var _e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)ot.set(_e,Z,ot.get(_e,Z)/mt[_e])}function Nr(ot){for(var mt=[],_e=0;_e<ot.columns;_e++){for(var Z=0,Q=0;Q<ot.rows;Q++)Z+=Math.pow(ot.get(Q,_e),2)/(ot.rows-1);mt.push(Math.sqrt(Z))}return mt}function Ei(ot,mt){for(var _e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)ot.set(_e,Z,ot.get(_e,Z)/mt[Z])}function ci(ot){for(var mt=ot.size-1,_e=0,Z=0;Z<ot.columns;Z++)for(var Q=0;Q<ot.rows;Q++)_e+=Math.pow(ot.get(Q,Z),2)/mt;return Math.sqrt(_e)}function Ot(ot,mt){for(var _e=0;_e<ot.rows;_e++)for(var Z=0;Z<ot.columns;Z++)ot.set(_e,Z,ot.get(_e,Z)/mt)}var fr=function(ot){function mt(){x(this,mt)}return N(mt,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(Z){if(typeof Z!="function")throw new TypeError("callback must be a function");for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)Z.call(this,Q,le);return this}},{key:"to1DArray",value:function(){for(var Z=[],Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)Z.push(this.get(Q,le));return Z}},{key:"to2DArray",value:function(){for(var Z=[],Q=0;Q<this.rows;Q++){Z.push([]);for(var le=0;le<this.columns;le++)Z[Q].push(this.get(Q,le))}return Z}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var Z=0;Z<this.rows;Z++)for(var Q=0;Q<=Z;Q++)if(this.get(Z,Q)!==this.get(Q,Z))return!1;return!0}return!1}},{key:"isDistance",value:function(){if(!this.isSymmetric())return!1;for(var Z=0;Z<this.rows;Z++)if(this.get(Z,Z)!==0)return!1;return!0}},{key:"isEchelonForm",value:function(){for(var Z=0,Q=0,le=-1,Xe=!0,dt=!1;Z<this.rows&&Xe;){for(Q=0,dt=!1;Q<this.columns&&dt===!1;)this.get(Z,Q)===0?Q++:this.get(Z,Q)===1&&Q>le?(dt=!0,le=Q):(Xe=!1,dt=!0);Z++}return Xe}},{key:"isReducedEchelonForm",value:function(){for(var Z=0,Q=0,le=-1,Xe=!0,dt=!1;Z<this.rows&&Xe;){for(Q=0,dt=!1;Q<this.columns&&dt===!1;)this.get(Z,Q)===0?Q++:this.get(Z,Q)===1&&Q>le?(dt=!0,le=Q):(Xe=!1,dt=!0);for(var ft=Q+1;ft<this.rows;ft++)this.get(Z,ft)!==0&&(Xe=!1);Z++}return Xe}},{key:"echelonForm",value:function(){for(var Z=this.clone(),Q=0,le=0;Q<Z.rows&&le<Z.columns;){for(var Xe=Q,dt=Q;dt<Z.rows;dt++)Z.get(dt,le)>Z.get(Xe,le)&&(Xe=dt);if(Z.get(Xe,le)===0)le++;else{Z.swapRows(Q,Xe);for(var ft=Z.get(Q,le),gt=le;gt<Z.columns;gt++)Z.set(Q,gt,Z.get(Q,gt)/ft);for(var ln=Q+1;ln<Z.rows;ln++){var bn=Z.get(ln,le)/Z.get(Q,le);Z.set(ln,le,0);for(var En=le+1;En<Z.columns;En++)Z.set(ln,En,Z.get(ln,En)-Z.get(Q,En)*bn)}Q++,le++}}return Z}},{key:"reducedEchelonForm",value:function(){for(var Z=this.echelonForm(),Q=Z.columns,le=Z.rows,Xe=le-1;Xe>=0;)if(Z.maxRow(Xe)===0)Xe--;else{for(var dt=0,ft=!1;dt<le&&ft===!1;)Z.get(Xe,dt)===1?ft=!0:dt++;for(var gt=0;gt<Xe;gt++)for(var ln=Z.get(gt,dt),bn=dt;bn<Q;bn++){var En=Z.get(gt,bn)-ln*Z.get(Xe,bn);Z.set(gt,bn,En)}Xe--}return Z}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(v(Z)!=="object")throw new TypeError("options must be an object");var Q=Z.rows,le=Q===void 0?1:Q,Xe=Z.columns,dt=Xe===void 0?1:Xe;if(!Number.isInteger(le)||le<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(dt)||dt<=0)throw new TypeError("columns must be a positive integer");for(var ft=new $e(this.rows*le,this.columns*dt),gt=0;gt<le;gt++)for(var ln=0;ln<dt;ln++)ft.setSubMatrix(this,this.rows*gt,this.columns*ln);return ft}},{key:"fill",value:function(Z){for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,Z);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(Z){S(this,Z);for(var Q=[],le=0;le<this.columns;le++)Q.push(this.get(Z,le));return Q}},{key:"getRowVector",value:function(Z){return $e.rowVector(this.getRow(Z))}},{key:"setRow",value:function(Z,Q){S(this,Z),Q=M(this,Q);for(var le=0;le<this.columns;le++)this.set(Z,le,Q[le]);return this}},{key:"swapRows",value:function(Z,Q){S(this,Z),S(this,Q);for(var le=0;le<this.columns;le++){var Xe=this.get(Z,le);this.set(Z,le,this.get(Q,le)),this.set(Q,le,Xe)}return this}},{key:"getColumn",value:function(Z){q(this,Z);for(var Q=[],le=0;le<this.rows;le++)Q.push(this.get(le,Z));return Q}},{key:"getColumnVector",value:function(Z){return $e.columnVector(this.getColumn(Z))}},{key:"setColumn",value:function(Z,Q){q(this,Z),Q=I(this,Q);for(var le=0;le<this.rows;le++)this.set(le,Z,Q[le]);return this}},{key:"swapColumns",value:function(Z,Q){q(this,Z),q(this,Q);for(var le=0;le<this.rows;le++){var Xe=this.get(le,Z);this.set(le,Z,this.get(le,Q)),this.set(le,Q,Xe)}return this}},{key:"addRowVector",value:function(Z){Z=M(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)+Z[le]);return this}},{key:"subRowVector",value:function(Z){Z=M(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)-Z[le]);return this}},{key:"mulRowVector",value:function(Z){Z=M(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)*Z[le]);return this}},{key:"divRowVector",value:function(Z){Z=M(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)/Z[le]);return this}},{key:"addColumnVector",value:function(Z){Z=I(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)+Z[Q]);return this}},{key:"subColumnVector",value:function(Z){Z=I(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)-Z[Q]);return this}},{key:"mulColumnVector",value:function(Z){Z=I(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)*Z[Q]);return this}},{key:"divColumnVector",value:function(Z){Z=I(this,Z);for(var Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)this.set(Q,le,this.get(Q,le)/Z[Q]);return this}},{key:"mulRow",value:function(Z,Q){S(this,Z);for(var le=0;le<this.columns;le++)this.set(Z,le,this.get(Z,le)*Q);return this}},{key:"mulColumn",value:function(Z,Q){q(this,Z);for(var le=0;le<this.rows;le++)this.set(le,Z,this.get(le,Z)*Q);return this}},{key:"max",value:function(Z){if(this.isEmpty())return NaN;switch(Z){case"row":{for(var Q=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),le=0;le<this.rows;le++)for(var Xe=0;Xe<this.columns;Xe++)this.get(le,Xe)>Q[le]&&(Q[le]=this.get(le,Xe));return Q}case"column":{for(var dt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),ft=0;ft<this.rows;ft++)for(var gt=0;gt<this.columns;gt++)this.get(ft,gt)>dt[gt]&&(dt[gt]=this.get(ft,gt));return dt}case void 0:{for(var ln=this.get(0,0),bn=0;bn<this.rows;bn++)for(var En=0;En<this.columns;En++)this.get(bn,En)>ln&&(ln=this.get(bn,En));return ln}default:throw new Error("invalid option: ".concat(Z))}}},{key:"maxIndex",value:function(){xe(this);for(var Z=this.get(0,0),Q=[0,0],le=0;le<this.rows;le++)for(var Xe=0;Xe<this.columns;Xe++)this.get(le,Xe)>Z&&(Z=this.get(le,Xe),Q[0]=le,Q[1]=Xe);return Q}},{key:"min",value:function(Z){if(this.isEmpty())return NaN;switch(Z){case"row":{for(var Q=new Array(this.rows).fill(Number.POSITIVE_INFINITY),le=0;le<this.rows;le++)for(var Xe=0;Xe<this.columns;Xe++)this.get(le,Xe)<Q[le]&&(Q[le]=this.get(le,Xe));return Q}case"column":{for(var dt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),ft=0;ft<this.rows;ft++)for(var gt=0;gt<this.columns;gt++)this.get(ft,gt)<dt[gt]&&(dt[gt]=this.get(ft,gt));return dt}case void 0:{for(var ln=this.get(0,0),bn=0;bn<this.rows;bn++)for(var En=0;En<this.columns;En++)this.get(bn,En)<ln&&(ln=this.get(bn,En));return ln}default:throw new Error("invalid option: ".concat(Z))}}},{key:"minIndex",value:function(){xe(this);for(var Z=this.get(0,0),Q=[0,0],le=0;le<this.rows;le++)for(var Xe=0;Xe<this.columns;Xe++)this.get(le,Xe)<Z&&(Z=this.get(le,Xe),Q[0]=le,Q[1]=Xe);return Q}},{key:"maxRow",value:function(Z){if(S(this,Z),this.isEmpty())return NaN;for(var Q=this.get(Z,0),le=1;le<this.columns;le++)this.get(Z,le)>Q&&(Q=this.get(Z,le));return Q}},{key:"maxRowIndex",value:function(Z){S(this,Z),xe(this);for(var Q=this.get(Z,0),le=[Z,0],Xe=1;Xe<this.columns;Xe++)this.get(Z,Xe)>Q&&(Q=this.get(Z,Xe),le[1]=Xe);return le}},{key:"minRow",value:function(Z){if(S(this,Z),this.isEmpty())return NaN;for(var Q=this.get(Z,0),le=1;le<this.columns;le++)this.get(Z,le)<Q&&(Q=this.get(Z,le));return Q}},{key:"minRowIndex",value:function(Z){S(this,Z),xe(this);for(var Q=this.get(Z,0),le=[Z,0],Xe=1;Xe<this.columns;Xe++)this.get(Z,Xe)<Q&&(Q=this.get(Z,Xe),le[1]=Xe);return le}},{key:"maxColumn",value:function(Z){if(q(this,Z),this.isEmpty())return NaN;for(var Q=this.get(0,Z),le=1;le<this.rows;le++)this.get(le,Z)>Q&&(Q=this.get(le,Z));return Q}},{key:"maxColumnIndex",value:function(Z){q(this,Z),xe(this);for(var Q=this.get(0,Z),le=[0,Z],Xe=1;Xe<this.rows;Xe++)this.get(Xe,Z)>Q&&(Q=this.get(Xe,Z),le[0]=Xe);return le}},{key:"minColumn",value:function(Z){if(q(this,Z),this.isEmpty())return NaN;for(var Q=this.get(0,Z),le=1;le<this.rows;le++)this.get(le,Z)<Q&&(Q=this.get(le,Z));return Q}},{key:"minColumnIndex",value:function(Z){q(this,Z),xe(this);for(var Q=this.get(0,Z),le=[0,Z],Xe=1;Xe<this.rows;Xe++)this.get(Xe,Z)<Q&&(Q=this.get(Xe,Z),le[0]=Xe);return le}},{key:"diag",value:function(){for(var Z=Math.min(this.rows,this.columns),Q=[],le=0;le<Z;le++)Q.push(this.get(le,le));return Q}},{key:"norm",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius";switch(Z){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(Z))}}},{key:"cumulativeSum",value:function(){for(var Z=0,Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)Z+=this.get(Q,le),this.set(Q,le,Z);return this}},{key:"dot",value:function(Z){mt.isMatrix(Z)&&(Z=Z.to1DArray());var Q=this.to1DArray();if(Q.length!==Z.length)throw new RangeError("vectors do not have the same size");for(var le=0,Xe=0;Xe<Q.length;Xe++)le+=Q[Xe]*Z[Xe];return le}},{key:"mmul",value:function(Z){Z=$e.checkMatrix(Z);for(var Q=this.rows,le=this.columns,Xe=Z.columns,dt=new $e(Q,Xe),ft=new Float64Array(le),gt=0;gt<Xe;gt++){for(var ln=0;ln<le;ln++)ft[ln]=Z.get(ln,gt);for(var bn=0;bn<Q;bn++){for(var En=0,Cr=0;Cr<le;Cr++)En+=this.get(bn,Cr)*ft[Cr];dt.set(bn,gt,En)}}return dt}},{key:"strassen2x2",value:function(Z){Z=$e.checkMatrix(Z);var Q=new $e(2,2),le=this.get(0,0),Xe=Z.get(0,0),dt=this.get(0,1),ft=Z.get(0,1),gt=this.get(1,0),ln=Z.get(1,0),bn=this.get(1,1),En=Z.get(1,1),Cr=(le+bn)*(Xe+En),tr=(gt+bn)*Xe,ii=le*(ft-En),Zi=bn*(ln-Xe),Mn=(le+dt)*En,Xn=(gt-le)*(Xe+ft),$r=(dt-bn)*(ln+En),Re=Cr+Zi-Mn+$r,Ne=ii+Mn,Te=tr+Zi,U=Cr-tr+ii+Xn;return Q.set(0,0,Re),Q.set(0,1,Ne),Q.set(1,0,Te),Q.set(1,1,U),Q}},{key:"strassen3x3",value:function(Z){Z=$e.checkMatrix(Z);var Q=new $e(3,3),le=this.get(0,0),Xe=this.get(0,1),dt=this.get(0,2),ft=this.get(1,0),gt=this.get(1,1),ln=this.get(1,2),bn=this.get(2,0),En=this.get(2,1),Cr=this.get(2,2),tr=Z.get(0,0),ii=Z.get(0,1),Zi=Z.get(0,2),Mn=Z.get(1,0),Xn=Z.get(1,1),$r=Z.get(1,2),Re=Z.get(2,0),Ne=Z.get(2,1),Te=Z.get(2,2),U=(le+Xe+dt-ft-gt-En-Cr)*Xn,Y=(le-ft)*(-ii+Xn),ge=gt*(-tr+ii+Mn-Xn-$r-Re+Te),Ye=(-le+ft+gt)*(tr-ii+Xn),ct=(ft+gt)*(-tr+ii),nt=le*tr,lt=(-le+bn+En)*(tr-Zi+$r),fn=(-le+bn)*(Zi-$r),on=(bn+En)*(-tr+Zi),Gn=(le+Xe+dt-gt-ln-bn-En)*$r,er=En*(-tr+Zi+Mn-Xn-$r-Re+Ne),Kn=(-dt+En+Cr)*(Xn+Re-Ne),qr=(dt-Cr)*(Xn-Ne),xi=dt*Re,Pn=(En+Cr)*(-Re+Ne),$n=(-dt+gt+ln)*($r+Re-Te),Rr=(dt-ln)*($r-Te),Di=(gt+ln)*(-Re+Te),Jr=Xe*Mn,$o=ln*Ne,Vo=ft*Zi,lo=bn*ii,Xi=Cr*Te,Ho=nt+xi+Jr,cs=U+Ye+ct+nt+Kn+xi+Pn,li=nt+lt+on+Gn+xi+$n+Di,xs=Y+ge+Ye+nt+xi+$n+Rr,Ae=Y+Ye+ct+nt+$o,Ke=xi+$n+Rr+Di+Vo,pt=nt+lt+fn+er+Kn+qr+xi,Ht=Kn+qr+xi+Pn+lo,an=nt+lt+fn+on+Xi;return Q.set(0,0,Ho),Q.set(0,1,cs),Q.set(0,2,li),Q.set(1,0,xs),Q.set(1,1,Ae),Q.set(1,2,Ke),Q.set(2,0,pt),Q.set(2,1,Ht),Q.set(2,2,an),Q}},{key:"mmulStrassen",value:function(Z){Z=$e.checkMatrix(Z);var Q=this.clone(),le=Q.rows,Xe=Q.columns,dt=Z.rows,ft=Z.columns;Xe!==dt&&console.warn("Multiplying ".concat(le," x ").concat(Xe," and ").concat(dt," x ").concat(ft," matrix: dimensions do not match."));function gt(Cr,tr,ii){var Zi=Cr.rows,Mn=Cr.columns;if(Zi===tr&&Mn===ii)return Cr;var Xn=mt.zeros(tr,ii);return Xn=Xn.setSubMatrix(Cr,0,0),Xn}var ln=Math.max(le,dt),bn=Math.max(Xe,ft);Q=gt(Q,ln,bn),Z=gt(Z,ln,bn);function En(Cr,tr,ii,Zi){if(ii<=512||Zi<=512)return Cr.mmul(tr);ii%2===1&&Zi%2===1?(Cr=gt(Cr,ii+1,Zi+1),tr=gt(tr,ii+1,Zi+1)):ii%2===1?(Cr=gt(Cr,ii+1,Zi),tr=gt(tr,ii+1,Zi)):Zi%2===1&&(Cr=gt(Cr,ii,Zi+1),tr=gt(tr,ii,Zi+1));var Mn=parseInt(Cr.rows/2,10),Xn=parseInt(Cr.columns/2,10),$r=Cr.subMatrix(0,Mn-1,0,Xn-1),Re=tr.subMatrix(0,Mn-1,0,Xn-1),Ne=Cr.subMatrix(0,Mn-1,Xn,Cr.columns-1),Te=tr.subMatrix(0,Mn-1,Xn,tr.columns-1),U=Cr.subMatrix(Mn,Cr.rows-1,0,Xn-1),Y=tr.subMatrix(Mn,tr.rows-1,0,Xn-1),ge=Cr.subMatrix(Mn,Cr.rows-1,Xn,Cr.columns-1),Ye=tr.subMatrix(Mn,tr.rows-1,Xn,tr.columns-1),ct=En(mt.add($r,ge),mt.add(Re,Ye),Mn,Xn),nt=En(mt.add(U,ge),Re,Mn,Xn),lt=En($r,mt.sub(Te,Ye),Mn,Xn),fn=En(ge,mt.sub(Y,Re),Mn,Xn),on=En(mt.add($r,Ne),Ye,Mn,Xn),Gn=En(mt.sub(U,$r),mt.add(Re,Te),Mn,Xn),er=En(mt.sub(Ne,ge),mt.add(Y,Ye),Mn,Xn),Kn=mt.add(ct,fn);Kn.sub(on),Kn.add(er);var qr=mt.add(lt,on),xi=mt.add(nt,fn),Pn=mt.sub(ct,nt);Pn.add(lt),Pn.add(Gn);var $n=mt.zeros(2*Kn.rows,2*Kn.columns);return $n=$n.setSubMatrix(Kn,0,0),$n=$n.setSubMatrix(qr,Kn.rows,0),$n=$n.setSubMatrix(xi,0,Kn.columns),$n=$n.setSubMatrix(Pn,Kn.rows,Kn.columns),$n.subMatrix(0,ii-1,0,Zi-1)}return En(Q,Z,ln,bn)}},{key:"scaleRows",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(v(Z)!=="object")throw new TypeError("options must be an object");var Q=Z.min,le=Q===void 0?0:Q,Xe=Z.max,dt=Xe===void 0?1:Xe;if(!Number.isFinite(le))throw new TypeError("min must be a number");if(!Number.isFinite(dt))throw new TypeError("max must be a number");if(le>=dt)throw new RangeError("min must be smaller than max");for(var ft=new $e(this.rows,this.columns),gt=0;gt<this.rows;gt++){var ln=this.getRow(gt);ln.length>0&&ae(ln,{min:le,max:dt,output:ln}),ft.setRow(gt,ln)}return ft}},{key:"scaleColumns",value:function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(v(Z)!=="object")throw new TypeError("options must be an object");var Q=Z.min,le=Q===void 0?0:Q,Xe=Z.max,dt=Xe===void 0?1:Xe;if(!Number.isFinite(le))throw new TypeError("min must be a number");if(!Number.isFinite(dt))throw new TypeError("max must be a number");if(le>=dt)throw new RangeError("min must be smaller than max");for(var ft=new $e(this.rows,this.columns),gt=0;gt<this.columns;gt++){var ln=this.getColumn(gt);ln.length&&ae(ln,{min:le,max:dt,output:ln}),ft.setColumn(gt,ln)}return ft}},{key:"flipRows",value:function(){for(var Z=Math.ceil(this.columns/2),Q=0;Q<this.rows;Q++)for(var le=0;le<Z;le++){var Xe=this.get(Q,le),dt=this.get(Q,this.columns-1-le);this.set(Q,le,dt),this.set(Q,this.columns-1-le,Xe)}return this}},{key:"flipColumns",value:function(){for(var Z=Math.ceil(this.rows/2),Q=0;Q<this.columns;Q++)for(var le=0;le<Z;le++){var Xe=this.get(le,Q),dt=this.get(this.rows-1-le,Q);this.set(le,Q,dt),this.set(this.rows-1-le,Q,Xe)}return this}},{key:"kroneckerProduct",value:function(Z){Z=$e.checkMatrix(Z);for(var Q=this.rows,le=this.columns,Xe=Z.rows,dt=Z.columns,ft=new $e(Q*Xe,le*dt),gt=0;gt<Q;gt++)for(var ln=0;ln<le;ln++)for(var bn=0;bn<Xe;bn++)for(var En=0;En<dt;En++)ft.set(Xe*gt+bn,dt*ln+En,this.get(gt,ln)*Z.get(bn,En));return ft}},{key:"kroneckerSum",value:function(Z){if(Z=$e.checkMatrix(Z),!this.isSquare()||!Z.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var Q=this.rows,le=Z.rows,Xe=this.kroneckerProduct($e.eye(le,le)),dt=$e.eye(Q,Q).kroneckerProduct(Z);return Xe.add(dt)}},{key:"transpose",value:function(){for(var Z=new $e(this.columns,this.rows),Q=0;Q<this.rows;Q++)for(var le=0;le<this.columns;le++)Z.set(le,Q,this.get(Q,le));return Z}},{key:"sortRows",value:function(){for(var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pi,Q=0;Q<this.rows;Q++)this.setRow(Q,this.getRow(Q).sort(Z));return this}},{key:"sortColumns",value:function(){for(var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pi,Q=0;Q<this.columns;Q++)this.setColumn(Q,this.getColumn(Q).sort(Z));return this}},{key:"subMatrix",value:function(Z,Q,le,Xe){se(this,Z,Q,le,Xe);for(var dt=new $e(Q-Z+1,Xe-le+1),ft=Z;ft<=Q;ft++)for(var gt=le;gt<=Xe;gt++)dt.set(ft-Z,gt-le,this.get(ft,gt));return dt}},{key:"subMatrixRow",value:function(Z,Q,le){if(Q===void 0&&(Q=0),le===void 0&&(le=this.columns-1),Q>le||Q<0||Q>=this.columns||le<0||le>=this.columns)throw new RangeError("Argument out of range");for(var Xe=new $e(Z.length,le-Q+1),dt=0;dt<Z.length;dt++)for(var ft=Q;ft<=le;ft++){if(Z[dt]<0||Z[dt]>=this.rows)throw new RangeError("Row index out of range: ".concat(Z[dt]));Xe.set(dt,ft-Q,this.get(Z[dt],ft))}return Xe}},{key:"subMatrixColumn",value:function(Z,Q,le){if(Q===void 0&&(Q=0),le===void 0&&(le=this.rows-1),Q>le||Q<0||Q>=this.rows||le<0||le>=this.rows)throw new RangeError("Argument out of range");for(var Xe=new $e(le-Q+1,Z.length),dt=0;dt<Z.length;dt++)for(var ft=Q;ft<=le;ft++){if(Z[dt]<0||Z[dt]>=this.columns)throw new RangeError("Column index out of range: ".concat(Z[dt]));Xe.set(ft-Q,dt,this.get(ft,Z[dt]))}return Xe}},{key:"setSubMatrix",value:function(Z,Q,le){if(Z=$e.checkMatrix(Z),Z.isEmpty())return this;var Xe=Q+Z.rows-1,dt=le+Z.columns-1;se(this,Q,Xe,le,dt);for(var ft=0;ft<Z.rows;ft++)for(var gt=0;gt<Z.columns;gt++)this.set(Q+ft,le+gt,Z.get(ft,gt));return this}},{key:"selection",value:function(Z,Q){j(this,Z),ue(this,Q);for(var le=new $e(Z.length,Q.length),Xe=0;Xe<Z.length;Xe++)for(var dt=Z[Xe],ft=0;ft<Q.length;ft++){var gt=Q[ft];le.set(Xe,ft,this.get(dt,gt))}return le}},{key:"trace",value:function(){for(var Z=Math.min(this.rows,this.columns),Q=0,le=0;le<Z;le++)Q+=this.get(le,le);return Q}},{key:"clone",value:function(){return this.constructor.copy(this,new $e(this.rows,this.columns))}},{key:"sum",value:function(Z){switch(Z){case"row":return Oe(this);case"column":return Le(this);case void 0:return Ge(this);default:throw new Error("invalid option: ".concat(Z))}}},{key:"product",value:function(Z){switch(Z){case"row":return He(this);case"column":return Et(this);case void 0:return Ct(this);default:throw new Error("invalid option: ".concat(Z))}}},{key:"mean",value:function(Z){var Q=this.sum(Z);switch(Z){case"row":{for(var le=0;le<this.rows;le++)Q[le]/=this.columns;return Q}case"column":{for(var Xe=0;Xe<this.columns;Xe++)Q[Xe]/=this.rows;return Q}case void 0:return Q/this.size;default:throw new Error("invalid option: ".concat(Z))}}},{key:"variance",value:function(Z){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(v(Z)==="object"&&(Q=Z,Z=void 0),v(Q)!=="object")throw new TypeError("options must be an object");var le=Q,Xe=le.unbiased,dt=Xe===void 0?!0:Xe,ft=le.mean,gt=ft===void 0?this.mean(Z):ft;if(typeof dt!="boolean")throw new TypeError("unbiased must be a boolean");switch(Z){case"row":{if(!F.isAnyArray(gt))throw new TypeError("mean must be an array");return Gt(this,dt,gt)}case"column":{if(!F.isAnyArray(gt))throw new TypeError("mean must be an array");return At(this,dt,gt)}case void 0:{if(typeof gt!="number")throw new TypeError("mean must be a number");return vt(this,dt,gt)}default:throw new Error("invalid option: ".concat(Z))}}},{key:"standardDeviation",value:function(Z,Q){v(Z)==="object"&&(Q=Z,Z=void 0);var le=this.variance(Z,Q);if(Z===void 0)return Math.sqrt(le);for(var Xe=0;Xe<le.length;Xe++)le[Xe]=Math.sqrt(le[Xe]);return le}},{key:"center",value:function(Z){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(v(Z)==="object"&&(Q=Z,Z=void 0),v(Q)!=="object")throw new TypeError("options must be an object");var le=Q,Xe=le.center,dt=Xe===void 0?this.mean(Z):Xe;switch(Z){case"row":{if(!F.isAnyArray(dt))throw new TypeError("center must be an array");return cn(this,dt),this}case"column":{if(!F.isAnyArray(dt))throw new TypeError("center must be an array");return hn(this,dt),this}case void 0:{if(typeof dt!="number")throw new TypeError("center must be a number");return Bn(this,dt),this}default:throw new Error("invalid option: ".concat(Z))}}},{key:"scale",value:function(Z){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(v(Z)==="object"&&(Q=Z,Z=void 0),v(Q)!=="object")throw new TypeError("options must be an object");var le=Q.scale;switch(Z){case"row":{if(le===void 0)le=Fn(this);else if(!F.isAnyArray(le))throw new TypeError("scale must be an array");return ir(this,le),this}case"column":{if(le===void 0)le=Nr(this);else if(!F.isAnyArray(le))throw new TypeError("scale must be an array");return Ei(this,le),this}case void 0:{if(le===void 0)le=ci(this);else if(typeof le!="number")throw new TypeError("scale must be a number");return Ot(this,le),this}default:throw new Error("invalid option: ".concat(Z))}}},{key:"toString",value:function(Z){return B(this,Z)}},{key:ot,value:function(){return this.entries()}},{key:"entries",value:d().mark(function _e(){var Z,Q;return d().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:Z=0;case 1:if(!(Z<this.rows)){Xe.next=12;break}Q=0;case 3:if(!(Q<this.columns)){Xe.next=9;break}return Xe.next=6,[Z,Q,this.get(Z,Q)];case 6:Q++,Xe.next=3;break;case 9:Z++,Xe.next=1;break;case 12:case"end":return Xe.stop()}},_e,this)})},{key:"values",value:d().mark(function _e(){var Z,Q;return d().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:Z=0;case 1:if(!(Z<this.rows)){Xe.next=12;break}Q=0;case 3:if(!(Q<this.columns)){Xe.next=9;break}return Xe.next=6,this.get(Z,Q);case 6:Q++,Xe.next=3;break;case 9:Z++,Xe.next=1;break;case 12:case"end":return Xe.stop()}},_e,this)})}],[{key:"from1DArray",value:function(Z,Q,le){var Xe=Z*Q;if(Xe!==le.length)throw new RangeError("data length does not match given dimensions");for(var dt=new $e(Z,Q),ft=0;ft<Z;ft++)for(var gt=0;gt<Q;gt++)dt.set(ft,gt,le[ft*Q+gt]);return dt}},{key:"rowVector",value:function(Z){for(var Q=new $e(1,Z.length),le=0;le<Z.length;le++)Q.set(0,le,Z[le]);return Q}},{key:"columnVector",value:function(Z){for(var Q=new $e(Z.length,1),le=0;le<Z.length;le++)Q.set(le,0,Z[le]);return Q}},{key:"zeros",value:function(Z,Q){return new $e(Z,Q)}},{key:"ones",value:function(Z,Q){return new $e(Z,Q).fill(1)}},{key:"rand",value:function(Z,Q){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(v(le)!=="object")throw new TypeError("options must be an object");for(var Xe=le.random,dt=Xe===void 0?Math.random:Xe,ft=new $e(Z,Q),gt=0;gt<Z;gt++)for(var ln=0;ln<Q;ln++)ft.set(gt,ln,dt());return ft}},{key:"randInt",value:function(Z,Q){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(v(le)!=="object")throw new TypeError("options must be an object");var Xe=le.min,dt=Xe===void 0?0:Xe,ft=le.max,gt=ft===void 0?1e3:ft,ln=le.random,bn=ln===void 0?Math.random:ln;if(!Number.isInteger(dt))throw new TypeError("min must be an integer");if(!Number.isInteger(gt))throw new TypeError("max must be an integer");if(dt>=gt)throw new RangeError("min must be smaller than max");for(var En=gt-dt,Cr=new $e(Z,Q),tr=0;tr<Z;tr++)for(var ii=0;ii<Q;ii++){var Zi=dt+Math.round(bn()*En);Cr.set(tr,ii,Zi)}return Cr}},{key:"eye",value:function(Z,Q,le){Q===void 0&&(Q=Z),le===void 0&&(le=1);for(var Xe=Math.min(Z,Q),dt=this.zeros(Z,Q),ft=0;ft<Xe;ft++)dt.set(ft,ft,le);return dt}},{key:"diag",value:function(Z,Q,le){var Xe=Z.length;Q===void 0&&(Q=Xe),le===void 0&&(le=Q);for(var dt=Math.min(Xe,Q,le),ft=this.zeros(Q,le),gt=0;gt<dt;gt++)ft.set(gt,gt,Z[gt]);return ft}},{key:"min",value:function(Z,Q){Z=this.checkMatrix(Z),Q=this.checkMatrix(Q);for(var le=Z.rows,Xe=Z.columns,dt=new $e(le,Xe),ft=0;ft<le;ft++)for(var gt=0;gt<Xe;gt++)dt.set(ft,gt,Math.min(Z.get(ft,gt),Q.get(ft,gt)));return dt}},{key:"max",value:function(Z,Q){Z=this.checkMatrix(Z),Q=this.checkMatrix(Q);for(var le=Z.rows,Xe=Z.columns,dt=new this(le,Xe),ft=0;ft<le;ft++)for(var gt=0;gt<Xe;gt++)dt.set(ft,gt,Math.max(Z.get(ft,gt),Q.get(ft,gt)));return dt}},{key:"checkMatrix",value:function(Z){return mt.isMatrix(Z)?Z:new $e(Z)}},{key:"isMatrix",value:function(Z){return Z!=null&&Z.klass==="Matrix"}},{key:"copy",value:function(Z,Q){var le=m(Z.entries()),Xe;try{for(le.s();!(Xe=le.n()).done;){var dt=h(Xe.value,3),ft=dt[0],gt=dt[1],ln=dt[2];Q.set(ft,gt,ln)}}catch(bn){le.e(bn)}finally{le.f()}return Q}}]),mt}(Symbol.iterator);fr.prototype.klass="Matrix",typeof Symbol!="undefined"&&(fr.prototype[Symbol.for("nodejs.util.inspect.custom")]=fe);function Pi(ot,mt){return ot-mt}function Li(ot){return ot.every(function(mt){return typeof mt=="number"})}fr.random=fr.rand,fr.randomInt=fr.randInt,fr.diagonal=fr.diag,fr.prototype.diagonal=fr.prototype.diag,fr.identity=fr.eye,fr.prototype.negate=fr.prototype.neg,fr.prototype.tensorProduct=fr.prototype.kroneckerProduct;var zn=new WeakSet,$e=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q){var le;if(x(this,_e),le=mt.call(this),e(o(le),zn),t(o(le),"data",void 0),_e.isMatrix(Z))s(o(le),zn,Xt).call(o(le),Z.rows,Z.columns),_e.copy(Z,o(le));else if(Number.isInteger(Z)&&Z>=0)s(o(le),zn,Xt).call(o(le),Z,Q);else if(F.isAnyArray(Z)){var Xe=Z;if(Z=Xe.length,Q=Z?Xe[0].length:0,typeof Q!="number")throw new TypeError("Data must be a 2D array with at least one element");le.data=[];for(var dt=0;dt<Z;dt++){if(Xe[dt].length!==Q)throw new RangeError("Inconsistent array dimensions");if(!Li(Xe[dt]))throw new TypeError("Input data contains non-numeric values");le.data.push(Float64Array.from(Xe[dt]))}le.rows=Z,le.columns=Q}else throw new TypeError("First argument must be a positive number or an array");return le}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.data[Q][le]=Xe,this}},{key:"get",value:function(Q,le){return this.data[Q][le]}},{key:"removeRow",value:function(Q){return S(this,Q),this.data.splice(Q,1),this.rows-=1,this}},{key:"addRow",value:function(Q,le){return le===void 0&&(le=Q,Q=this.rows),S(this,Q,!0),le=Float64Array.from(M(this,le)),this.data.splice(Q,0,le),this.rows+=1,this}},{key:"removeColumn",value:function(Q){q(this,Q);for(var le=0;le<this.rows;le++){for(var Xe=new Float64Array(this.columns-1),dt=0;dt<Q;dt++)Xe[dt]=this.data[le][dt];for(var ft=Q+1;ft<this.columns;ft++)Xe[ft-1]=this.data[le][ft];this.data[le]=Xe}return this.columns-=1,this}},{key:"addColumn",value:function(Q,le){typeof le=="undefined"&&(le=Q,Q=this.columns),q(this,Q,!0),le=I(this,le);for(var Xe=0;Xe<this.rows;Xe++){for(var dt=new Float64Array(this.columns+1),ft=0;ft<Q;ft++)dt[ft]=this.data[Xe][ft];for(dt[ft++]=le[Xe];ft<this.columns+1;ft++)dt[ft]=this.data[Xe][ft-1];this.data[Xe]=dt}return this.columns+=1,this}}]),_e}(fr);function Xt(ot,mt){if(this.data=[],Number.isInteger(mt)&&mt>=0)for(var _e=0;_e<ot;_e++)this.data.push(new Float64Array(mt));else throw new TypeError("nColumns must be a positive integer");this.rows=ot,this.columns=mt}pe(fr,$e);var Rt=new WeakMap,_t=function(ot){l(_e,ot);var mt=r(_e);function _e(Z){var Q;if(x(this,_e),Q=mt.call(this),b(o(Q),Rt,{writable:!0,value:void 0}),$e.isMatrix(Z)){if(!Z.isSymmetric())throw new TypeError("not symmetric data");u(o(Q),Rt,$e.copy(Z,new $e(Z.rows,Z.rows)))}else if(Number.isInteger(Z)&&Z>=0)u(o(Q),Rt,new $e(Z,Z));else if(u(o(Q),Rt,new $e(Z)),!Q.isSymmetric())throw new TypeError("not symmetric data");return Q}return N(_e,[{key:"size",get:function(){return a(this,Rt).size}},{key:"rows",get:function(){return a(this,Rt).rows}},{key:"columns",get:function(){return a(this,Rt).columns}},{key:"diagonalSize",get:function(){return this.rows}},{key:"clone",value:function(){var Q=new _e(this.diagonalSize),le=m(this.upperRightEntries()),Xe;try{for(le.s();!(Xe=le.n()).done;){var dt=h(Xe.value,3),ft=dt[0],gt=dt[1],ln=dt[2];Q.set(ft,gt,ln)}}catch(bn){le.e(bn)}finally{le.f()}return Q}},{key:"toMatrix",value:function(){return new $e(this)}},{key:"get",value:function(Q,le){return a(this,Rt).get(Q,le)}},{key:"set",value:function(Q,le,Xe){return a(this,Rt).set(Q,le,Xe),a(this,Rt).set(le,Q,Xe),this}},{key:"removeCross",value:function(Q){return a(this,Rt).removeRow(Q),a(this,Rt).removeColumn(Q),this}},{key:"addCross",value:function(Q,le){le===void 0&&(le=Q,Q=this.diagonalSize);var Xe=le.slice();return Xe.splice(Q,1),a(this,Rt).addRow(Q,Xe),a(this,Rt).addColumn(Q,le),this}},{key:"applyMask",value:function(Q){if(Q.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");var le=[],Xe=m(Q.entries()),dt;try{for(Xe.s();!(dt=Xe.n()).done;){var ft=h(dt.value,2),gt=ft[0],ln=ft[1];ln||le.push(gt)}}catch(tr){Xe.e(tr)}finally{Xe.f()}le.reverse();for(var bn=0,En=le;bn<En.length;bn++){var Cr=En[bn];this.removeCross(Cr)}return this}},{key:"toCompact",value:function(){for(var Q=this.diagonalSize,le=new Array(Q*(Q+1)/2),Xe=0,dt=0,ft=0;ft<le.length;ft++)le[ft]=this.get(dt,Xe),++Xe>=Q&&(Xe=++dt);return le}},{key:"upperRightEntries",value:d().mark(function Z(){var Q,le,Xe;return d().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:Q=0,le=0;case 1:if(!(Q<this.diagonalSize)){ft.next=9;break}return Xe=this.get(Q,le),ft.next=5,[Q,le,Xe];case 5:++le>=this.diagonalSize&&(le=++Q);case 6:ft.next=1;break;case 9:case"end":return ft.stop()}},Z,this)})},{key:"upperRightValues",value:d().mark(function Z(){var Q,le,Xe;return d().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:Q=0,le=0;case 1:if(!(Q<this.diagonalSize)){ft.next=9;break}return Xe=this.get(Q,le),ft.next=5,Xe;case 5:++le>=this.diagonalSize&&(le=++Q);case 6:ft.next=1;break;case 9:case"end":return ft.stop()}},Z,this)})}],[{key:"isSymmetricMatrix",value:function(Q){return $e.isMatrix(Q)&&Q.klassType==="SymmetricMatrix"}},{key:"zeros",value:function(Q){return new this(Q)}},{key:"ones",value:function(Q){return new this(Q).fill(1)}},{key:"fromCompact",value:function(Q){var le=Q.length,Xe=(Math.sqrt(8*le+1)-1)/2;if(!Number.isInteger(Xe))throw new TypeError("This array is not a compact representation of a Symmetric Matrix, ".concat(JSON.stringify(Q)));for(var dt=new _e(Xe),ft=0,gt=0,ln=0;ln<le;ln++)dt.set(ft,gt,Q[ln]),++ft>=Xe&&(ft=++gt);return dt}}]),_e}(fr);_t.prototype.klassType="SymmetricMatrix";var Tt=function(ot){l(_e,ot);var mt=r(_e);function _e(Z){var Q;if(x(this,_e),Q=mt.call(this,Z),!Q.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix");return Q}return N(_e,[{key:"set",value:function(Q,le,Xe){return Q===le&&(Xe=0),ie(T(_e.prototype),"set",this).call(this,Q,le,Xe)}},{key:"addCross",value:function(Q,le){return le===void 0&&(le=Q,Q=this.diagonalSize),le=le.slice(),le[Q]=0,ie(T(_e.prototype),"addCross",this).call(this,Q,le)}},{key:"toSymmetricMatrix",value:function(){return new _t(this)}},{key:"clone",value:function(){var Q=new _e(this.diagonalSize),le=m(this.upperRightEntries()),Xe;try{for(le.s();!(Xe=le.n()).done;){var dt=h(Xe.value,3),ft=dt[0],gt=dt[1],ln=dt[2];ft!==gt&&Q.set(ft,gt,ln)}}catch(bn){le.e(bn)}finally{le.f()}return Q}},{key:"toCompact",value:function(){for(var Q=this.diagonalSize,le=(Q-1)*Q/2,Xe=new Array(le),dt=1,ft=0,gt=0;gt<Xe.length;gt++)Xe[gt]=this.get(ft,dt),++dt>=Q&&(dt=++ft+1);return Xe}}],[{key:"isDistanceMatrix",value:function(Q){return _t.isSymmetricMatrix(Q)&&Q.klassSubType==="DistanceMatrix"}},{key:"fromCompact",value:function(Q){var le=Q.length,Xe=(Math.sqrt(8*le+1)+1)/2;if(!Number.isInteger(Xe))throw new TypeError("This array is not a compact representation of a DistanceMatrix, ".concat(JSON.stringify(Q)));for(var dt=new this(Xe),ft=1,gt=0,ln=0;ln<le;ln++)dt.set(ft,gt,Q[ln]),++ft>=Xe&&(ft=++gt+1);return dt}}]),_e}(_t);Tt.prototype.klassSubType="DistanceMatrix";var at=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q,le){var Xe;return x(this,_e),Xe=mt.call(this),Xe.matrix=Z,Xe.rows=Q,Xe.columns=le,Xe}return N(_e)}(fr),ce=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q){var le;return x(this,_e),q(Z,Q),le=mt.call(this,Z,Z.rows,1),le.column=Q,le}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(Q,this.column,Xe),this}},{key:"get",value:function(Q){return this.matrix.get(Q,this.column)}}]),_e}(at),ut=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q){var le;return x(this,_e),ue(Z,Q),le=mt.call(this,Z,Z.rows,Q.length),le.columnIndices=Q,le}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(Q,this.columnIndices[le],Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(Q,this.columnIndices[le])}}]),_e}(at),Ze=function(ot){l(_e,ot);var mt=r(_e);function _e(Z){return x(this,_e),mt.call(this,Z,Z.rows,Z.columns)}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(Q,this.columns-le-1,Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(Q,this.columns-le-1)}}]),_e}(at),Wt=function(ot){l(_e,ot);var mt=r(_e);function _e(Z){return x(this,_e),mt.call(this,Z,Z.rows,Z.columns)}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(this.rows-Q-1,le,Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(this.rows-Q-1,le)}}]),_e}(at),Ut=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q){var le;return x(this,_e),S(Z,Q),le=mt.call(this,Z,1,Z.columns),le.row=Q,le}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(this.row,le,Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(this.row,le)}}]),_e}(at),jt=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q){var le;return x(this,_e),j(Z,Q),le=mt.call(this,Z,Q.length,Z.columns),le.rowIndices=Q,le}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(this.rowIndices[Q],le,Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(this.rowIndices[Q],le)}}]),_e}(at),xt=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q,le){var Xe;return x(this,_e),j(Z,Q),ue(Z,le),Xe=mt.call(this,Z,Q.length,le.length),Xe.rowIndices=Q,Xe.columnIndices=le,Xe}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(this.rowIndices[Q],this.columnIndices[le],Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(this.rowIndices[Q],this.columnIndices[le])}}]),_e}(at),$t=function(ot){l(_e,ot);var mt=r(_e);function _e(Z,Q,le,Xe,dt){var ft;return x(this,_e),se(Z,Q,le,Xe,dt),ft=mt.call(this,Z,le-Q+1,dt-Xe+1),ft.startRow=Q,ft.startColumn=Xe,ft}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(this.startRow+Q,this.startColumn+le,Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(this.startRow+Q,this.startColumn+le)}}]),_e}(at),Un=function(ot){l(_e,ot);var mt=r(_e);function _e(Z){return x(this,_e),mt.call(this,Z,Z.columns,Z.rows)}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.matrix.set(le,Q,Xe),this}},{key:"get",value:function(Q,le){return this.matrix.get(le,Q)}}]),_e}(at),qn=function(ot){l(_e,ot);var mt=r(_e);function _e(Z){var Q,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x(this,_e);var Xe=le.rows,dt=Xe===void 0?1:Xe;if(Z.length%dt!==0)throw new Error("the data length is not divisible by the number of rows");return Q=mt.call(this),Q.rows=dt,Q.columns=Z.length/dt,Q.data=Z,Q}return N(_e,[{key:"set",value:function(Q,le,Xe){var dt=this._calculateIndex(Q,le);return this.data[dt]=Xe,this}},{key:"get",value:function(Q,le){var Xe=this._calculateIndex(Q,le);return this.data[Xe]}},{key:"_calculateIndex",value:function(Q,le){return Q*this.columns+le}}]),_e}(fr),rr=function(ot){l(_e,ot);var mt=r(_e);function _e(Z){var Q;return x(this,_e),Q=mt.call(this),Q.data=Z,Q.rows=Z.length,Q.columns=Z[0].length,Q}return N(_e,[{key:"set",value:function(Q,le,Xe){return this.data[Q][le]=Xe,this}},{key:"get",value:function(Q,le){return this.data[Q][le]}}]),_e}(fr);function xn(ot,mt){if(F.isAnyArray(ot))return ot[0]&&F.isAnyArray(ot[0])?new rr(ot):new qn(ot,mt);throw new Error("the argument is not an array")}var Or=function(){function ot(mt){x(this,ot),mt=rr.checkMatrix(mt);var _e=mt.clone(),Z=_e.rows,Q=_e.columns,le=new Float64Array(Z),Xe=1,dt,ft,gt,ln,bn,En,Cr,tr,ii;for(dt=0;dt<Z;dt++)le[dt]=dt;for(tr=new Float64Array(Z),ft=0;ft<Q;ft++){for(dt=0;dt<Z;dt++)tr[dt]=_e.get(dt,ft);for(dt=0;dt<Z;dt++){for(ii=Math.min(dt,ft),bn=0,gt=0;gt<ii;gt++)bn+=_e.get(dt,gt)*tr[gt];tr[dt]-=bn,_e.set(dt,ft,tr[dt])}for(ln=ft,dt=ft+1;dt<Z;dt++)Math.abs(tr[dt])>Math.abs(tr[ln])&&(ln=dt);if(ln!==ft){for(gt=0;gt<Q;gt++)En=_e.get(ln,gt),_e.set(ln,gt,_e.get(ft,gt)),_e.set(ft,gt,En);Cr=le[ln],le[ln]=le[ft],le[ft]=Cr,Xe=-Xe}if(ft<Z&&_e.get(ft,ft)!==0)for(dt=ft+1;dt<Z;dt++)_e.set(dt,ft,_e.get(dt,ft)/_e.get(ft,ft))}this.LU=_e,this.pivotVector=le,this.pivotSign=Xe}return N(ot,[{key:"isSingular",value:function(){for(var _e=this.LU,Z=_e.columns,Q=0;Q<Z;Q++)if(_e.get(Q,Q)===0)return!0;return!1}},{key:"solve",value:function(_e){_e=$e.checkMatrix(_e);var Z=this.LU,Q=Z.rows;if(Q!==_e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var le=_e.columns,Xe=_e.subMatrixRow(this.pivotVector,0,le-1),dt=Z.columns,ft,gt,ln;for(ln=0;ln<dt;ln++)for(ft=ln+1;ft<dt;ft++)for(gt=0;gt<le;gt++)Xe.set(ft,gt,Xe.get(ft,gt)-Xe.get(ln,gt)*Z.get(ft,ln));for(ln=dt-1;ln>=0;ln--){for(gt=0;gt<le;gt++)Xe.set(ln,gt,Xe.get(ln,gt)/Z.get(ln,ln));for(ft=0;ft<ln;ft++)for(gt=0;gt<le;gt++)Xe.set(ft,gt,Xe.get(ft,gt)-Xe.get(ln,gt)*Z.get(ft,ln))}return Xe}},{key:"determinant",get:function(){var _e=this.LU;if(!_e.isSquare())throw new Error("Matrix must be square");for(var Z=this.pivotSign,Q=_e.columns,le=0;le<Q;le++)Z*=_e.get(le,le);return Z}},{key:"lowerTriangularMatrix",get:function(){for(var _e=this.LU,Z=_e.rows,Q=_e.columns,le=new $e(Z,Q),Xe=0;Xe<Z;Xe++)for(var dt=0;dt<Q;dt++)Xe>dt?le.set(Xe,dt,_e.get(Xe,dt)):Xe===dt?le.set(Xe,dt,1):le.set(Xe,dt,0);return le}},{key:"upperTriangularMatrix",get:function(){for(var _e=this.LU,Z=_e.rows,Q=_e.columns,le=new $e(Z,Q),Xe=0;Xe<Z;Xe++)for(var dt=0;dt<Q;dt++)Xe<=dt?le.set(Xe,dt,_e.get(Xe,dt)):le.set(Xe,dt,0);return le}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),ot}();function Pr(ot,mt){var _e=0;return Math.abs(ot)>Math.abs(mt)?(_e=mt/ot,Math.abs(ot)*Math.sqrt(1+_e*_e)):mt!==0?(_e=ot/mt,Math.abs(mt)*Math.sqrt(1+_e*_e)):0}var cr=function(){function ot(mt){x(this,ot),mt=rr.checkMatrix(mt);var _e=mt.clone(),Z=mt.rows,Q=mt.columns,le=new Float64Array(Q),Xe,dt,ft,gt;for(ft=0;ft<Q;ft++){var ln=0;for(Xe=ft;Xe<Z;Xe++)ln=Pr(ln,_e.get(Xe,ft));if(ln!==0){for(_e.get(ft,ft)<0&&(ln=-ln),Xe=ft;Xe<Z;Xe++)_e.set(Xe,ft,_e.get(Xe,ft)/ln);for(_e.set(ft,ft,_e.get(ft,ft)+1),dt=ft+1;dt<Q;dt++){for(gt=0,Xe=ft;Xe<Z;Xe++)gt+=_e.get(Xe,ft)*_e.get(Xe,dt);for(gt=-gt/_e.get(ft,ft),Xe=ft;Xe<Z;Xe++)_e.set(Xe,dt,_e.get(Xe,dt)+gt*_e.get(Xe,ft))}}le[ft]=-ln}this.QR=_e,this.Rdiag=le}return N(ot,[{key:"solve",value:function(_e){_e=$e.checkMatrix(_e);var Z=this.QR,Q=Z.rows;if(_e.rows!==Q)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var le=_e.columns,Xe=_e.clone(),dt=Z.columns,ft,gt,ln,bn;for(ln=0;ln<dt;ln++)for(gt=0;gt<le;gt++){for(bn=0,ft=ln;ft<Q;ft++)bn+=Z.get(ft,ln)*Xe.get(ft,gt);for(bn=-bn/Z.get(ln,ln),ft=ln;ft<Q;ft++)Xe.set(ft,gt,Xe.get(ft,gt)+bn*Z.get(ft,ln))}for(ln=dt-1;ln>=0;ln--){for(gt=0;gt<le;gt++)Xe.set(ln,gt,Xe.get(ln,gt)/this.Rdiag[ln]);for(ft=0;ft<ln;ft++)for(gt=0;gt<le;gt++)Xe.set(ft,gt,Xe.get(ft,gt)-Xe.get(ln,gt)*Z.get(ft,ln))}return Xe.subMatrix(0,dt-1,0,le-1)}},{key:"isFullRank",value:function(){for(var _e=this.QR.columns,Z=0;Z<_e;Z++)if(this.Rdiag[Z]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var _e=this.QR,Z=_e.columns,Q=new $e(Z,Z),le,Xe;for(le=0;le<Z;le++)for(Xe=0;Xe<Z;Xe++)le<Xe?Q.set(le,Xe,_e.get(le,Xe)):le===Xe?Q.set(le,Xe,this.Rdiag[le]):Q.set(le,Xe,0);return Q}},{key:"orthogonalMatrix",get:function(){var _e=this.QR,Z=_e.rows,Q=_e.columns,le=new $e(Z,Q),Xe,dt,ft,gt;for(ft=Q-1;ft>=0;ft--){for(Xe=0;Xe<Z;Xe++)le.set(Xe,ft,0);for(le.set(ft,ft,1),dt=ft;dt<Q;dt++)if(_e.get(ft,ft)!==0){for(gt=0,Xe=ft;Xe<Z;Xe++)gt+=_e.get(Xe,ft)*le.get(Xe,dt);for(gt=-gt/_e.get(ft,ft),Xe=ft;Xe<Z;Xe++)le.set(Xe,dt,le.get(Xe,dt)+gt*_e.get(Xe,ft))}}return le}}]),ot}(),ki=function(){function ot(mt){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x(this,ot),mt=rr.checkMatrix(mt),mt.isEmpty())throw new Error("Matrix must be non-empty");var Z=mt.rows,Q=mt.columns,le=_e.computeLeftSingularVectors,Xe=le===void 0?!0:le,dt=_e.computeRightSingularVectors,ft=dt===void 0?!0:dt,gt=_e.autoTranspose,ln=gt===void 0?!1:gt,bn=!!Xe,En=!!ft,Cr=!1,tr;if(Z<Q)if(!ln)tr=mt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{tr=mt.transpose(),Z=tr.rows,Q=tr.columns,Cr=!0;var ii=bn;bn=En,En=ii}else tr=mt.clone();for(var Zi=Math.min(Z,Q),Mn=Math.min(Z+1,Q),Xn=new Float64Array(Mn),$r=new $e(Z,Zi),Re=new $e(Q,Q),Ne=new Float64Array(Q),Te=new Float64Array(Z),U=new Float64Array(Mn),Y=0;Y<Mn;Y++)U[Y]=Y;for(var ge=Math.min(Z-1,Q),Ye=Math.max(0,Math.min(Q-2,Z)),ct=Math.max(ge,Ye),nt=0;nt<ct;nt++){if(nt<ge){Xn[nt]=0;for(var lt=nt;lt<Z;lt++)Xn[nt]=Pr(Xn[nt],tr.get(lt,nt));if(Xn[nt]!==0){tr.get(nt,nt)<0&&(Xn[nt]=-Xn[nt]);for(var fn=nt;fn<Z;fn++)tr.set(fn,nt,tr.get(fn,nt)/Xn[nt]);tr.set(nt,nt,tr.get(nt,nt)+1)}Xn[nt]=-Xn[nt]}for(var on=nt+1;on<Q;on++){if(nt<ge&&Xn[nt]!==0){for(var Gn=0,er=nt;er<Z;er++)Gn+=tr.get(er,nt)*tr.get(er,on);Gn=-Gn/tr.get(nt,nt);for(var Kn=nt;Kn<Z;Kn++)tr.set(Kn,on,tr.get(Kn,on)+Gn*tr.get(Kn,nt))}Ne[on]=tr.get(nt,on)}if(bn&&nt<ge)for(var qr=nt;qr<Z;qr++)$r.set(qr,nt,tr.get(qr,nt));if(nt<Ye){Ne[nt]=0;for(var xi=nt+1;xi<Q;xi++)Ne[nt]=Pr(Ne[nt],Ne[xi]);if(Ne[nt]!==0){Ne[nt+1]<0&&(Ne[nt]=0-Ne[nt]);for(var Pn=nt+1;Pn<Q;Pn++)Ne[Pn]/=Ne[nt];Ne[nt+1]+=1}if(Ne[nt]=-Ne[nt],nt+1<Z&&Ne[nt]!==0){for(var $n=nt+1;$n<Z;$n++)Te[$n]=0;for(var Rr=nt+1;Rr<Z;Rr++)for(var Di=nt+1;Di<Q;Di++)Te[Rr]+=Ne[Di]*tr.get(Rr,Di);for(var Jr=nt+1;Jr<Q;Jr++)for(var $o=-Ne[Jr]/Ne[nt+1],Vo=nt+1;Vo<Z;Vo++)tr.set(Vo,Jr,tr.get(Vo,Jr)+$o*Te[Vo])}if(En)for(var lo=nt+1;lo<Q;lo++)Re.set(lo,nt,Ne[lo])}}var Xi=Math.min(Q,Z+1);if(ge<Q&&(Xn[ge]=tr.get(ge,ge)),Z<Xi&&(Xn[Xi-1]=0),Ye+1<Xi&&(Ne[Ye]=tr.get(Ye,Xi-1)),Ne[Xi-1]=0,bn){for(var Ho=ge;Ho<Zi;Ho++){for(var cs=0;cs<Z;cs++)$r.set(cs,Ho,0);$r.set(Ho,Ho,1)}for(var li=ge-1;li>=0;li--)if(Xn[li]!==0){for(var xs=li+1;xs<Zi;xs++){for(var Ae=0,Ke=li;Ke<Z;Ke++)Ae+=$r.get(Ke,li)*$r.get(Ke,xs);Ae=-Ae/$r.get(li,li);for(var pt=li;pt<Z;pt++)$r.set(pt,xs,$r.get(pt,xs)+Ae*$r.get(pt,li))}for(var Ht=li;Ht<Z;Ht++)$r.set(Ht,li,-$r.get(Ht,li));$r.set(li,li,1+$r.get(li,li));for(var an=0;an<li-1;an++)$r.set(an,li,0)}else{for(var Ln=0;Ln<Z;Ln++)$r.set(Ln,li,0);$r.set(li,li,1)}}if(En)for(var wr=Q-1;wr>=0;wr--){if(wr<Ye&&Ne[wr]!==0)for(var yr=wr+1;yr<Q;yr++){for(var ei=0,Ii=wr+1;Ii<Q;Ii++)ei+=Re.get(Ii,wr)*Re.get(Ii,yr);ei=-ei/Re.get(wr+1,wr);for(var to=wr+1;to<Q;to++)Re.set(to,yr,Re.get(to,yr)+ei*Re.get(to,wr))}for(var Ji=0;Ji<Q;Ji++)Re.set(Ji,wr,0);Re.set(wr,wr,1)}for(var Yi=Xi-1,Uo=Number.EPSILON;Xi>0;){var Oi=void 0,Co=void 0;for(Oi=Xi-2;Oi>=-1&&Oi!==-1;Oi--){var Fs=Number.MIN_VALUE+Uo*Math.abs(Xn[Oi]+Math.abs(Xn[Oi+1]));if(Math.abs(Ne[Oi])<=Fs||Number.isNaN(Ne[Oi])){Ne[Oi]=0;break}}if(Oi===Xi-2)Co=4;else{var ss=void 0;for(ss=Xi-1;ss>=Oi&&ss!==Oi;ss--){var qo=(ss!==Xi?Math.abs(Ne[ss]):0)+(ss!==Oi+1?Math.abs(Ne[ss-1]):0);if(Math.abs(Xn[ss])<=Uo*qo){Xn[ss]=0;break}}ss===Oi?Co=3:ss===Xi-1?Co=1:(Co=2,Oi=ss)}switch(Oi++,Co){case 1:{var js=Ne[Xi-2];Ne[Xi-2]=0;for(var Zs=Xi-2;Zs>=Oi;Zs--){var Mo=Pr(Xn[Zs],js),la=Xn[Zs]/Mo,X=js/Mo;if(Xn[Zs]=Mo,Zs!==Oi&&(js=-X*Ne[Zs-1],Ne[Zs-1]=la*Ne[Zs-1]),En)for(var ve=0;ve<Q;ve++)Mo=la*Re.get(ve,Zs)+X*Re.get(ve,Xi-1),Re.set(ve,Xi-1,-X*Re.get(ve,Zs)+la*Re.get(ve,Xi-1)),Re.set(ve,Zs,Mo)}break}case 2:{var Ie=Ne[Oi-1];Ne[Oi-1]=0;for(var ke=Oi;ke<Xi;ke++){var st=Pr(Xn[ke],Ie),P=Xn[ke]/st,W=Ie/st;if(Xn[ke]=st,Ie=-W*Ne[ke],Ne[ke]=P*Ne[ke],bn)for(var ye=0;ye<Z;ye++)st=P*$r.get(ye,ke)+W*$r.get(ye,Oi-1),$r.set(ye,Oi-1,-W*$r.get(ye,ke)+P*$r.get(ye,Oi-1)),$r.set(ye,ke,st)}break}case 3:{var Se=Math.max(Math.abs(Xn[Xi-1]),Math.abs(Xn[Xi-2]),Math.abs(Ne[Xi-2]),Math.abs(Xn[Oi]),Math.abs(Ne[Oi])),Be=Xn[Xi-1]/Se,Fe=Xn[Xi-2]/Se,qe=Ne[Xi-2]/Se,Mt=Xn[Oi]/Se,Lt=Ne[Oi]/Se,vn=((Fe+Be)*(Fe-Be)+qe*qe)/2,Zn=Be*qe*(Be*qe),Qn=0;(vn!==0||Zn!==0)&&(vn<0?Qn=0-Math.sqrt(vn*vn+Zn):Qn=Math.sqrt(vn*vn+Zn),Qn=Zn/(vn+Qn));for(var jn=(Mt+Be)*(Mt-Be)+Qn,pr=Mt*Lt,vi=Oi;vi<Xi-1;vi++){var co=Pr(jn,pr);co===0&&(co=Number.MIN_VALUE);var di=jn/co,Zo=pr/co;if(vi!==Oi&&(Ne[vi-1]=co),jn=di*Xn[vi]+Zo*Ne[vi],Ne[vi]=di*Ne[vi]-Zo*Xn[vi],pr=Zo*Xn[vi+1],Xn[vi+1]=di*Xn[vi+1],En)for(var qi=0;qi<Q;qi++)co=di*Re.get(qi,vi)+Zo*Re.get(qi,vi+1),Re.set(qi,vi+1,-Zo*Re.get(qi,vi)+di*Re.get(qi,vi+1)),Re.set(qi,vi,co);if(co=Pr(jn,pr),co===0&&(co=Number.MIN_VALUE),di=jn/co,Zo=pr/co,Xn[vi]=co,jn=di*Ne[vi]+Zo*Xn[vi+1],Xn[vi+1]=-Zo*Ne[vi]+di*Xn[vi+1],pr=Zo*Ne[vi+1],Ne[vi+1]=di*Ne[vi+1],bn&&vi<Z-1)for(var is=0;is<Z;is++)co=di*$r.get(is,vi)+Zo*$r.get(is,vi+1),$r.set(is,vi+1,-Zo*$r.get(is,vi)+di*$r.get(is,vi+1)),$r.set(is,vi,co)}Ne[Xi-2]=jn;break}case 4:{if(Xn[Oi]<=0&&(Xn[Oi]=Xn[Oi]<0?-Xn[Oi]:0,En))for(var Js=0;Js<=Yi;Js++)Re.set(Js,Oi,-Re.get(Js,Oi));for(;Oi<Yi&&!(Xn[Oi]>=Xn[Oi+1]);){var Yo=Xn[Oi];if(Xn[Oi]=Xn[Oi+1],Xn[Oi+1]=Yo,En&&Oi<Q-1)for(var Ss=0;Ss<Q;Ss++)Yo=Re.get(Ss,Oi+1),Re.set(Ss,Oi+1,Re.get(Ss,Oi)),Re.set(Ss,Oi,Yo);if(bn&&Oi<Z-1)for(var ko=0;ko<Z;ko++)Yo=$r.get(ko,Oi+1),$r.set(ko,Oi+1,$r.get(ko,Oi)),$r.set(ko,Oi,Yo);Oi++}Xi--;break}}}if(Cr){var vs=Re;Re=$r,$r=vs}this.m=Z,this.n=Q,this.s=Xn,this.U=$r,this.V=Re}return N(ot,[{key:"solve",value:function(_e){for(var Z=_e,Q=this.threshold,le=this.s.length,Xe=$e.zeros(le,le),dt=0;dt<le;dt++)Math.abs(this.s[dt])<=Q?Xe.set(dt,dt,0):Xe.set(dt,dt,1/this.s[dt]);for(var ft=this.U,gt=this.rightSingularVectors,ln=gt.mmul(Xe),bn=gt.rows,En=ft.rows,Cr=$e.zeros(bn,En),tr=0;tr<bn;tr++)for(var ii=0;ii<En;ii++){for(var Zi=0,Mn=0;Mn<le;Mn++)Zi+=ln.get(tr,Mn)*ft.get(ii,Mn);Cr.set(tr,ii,Zi)}return Cr.mmul(Z)}},{key:"solveForDiagonal",value:function(_e){return this.solve($e.diag(_e))}},{key:"inverse",value:function(){for(var _e=this.V,Z=this.threshold,Q=_e.rows,le=_e.columns,Xe=new $e(Q,this.s.length),dt=0;dt<Q;dt++)for(var ft=0;ft<le;ft++)Math.abs(this.s[ft])>Z&&Xe.set(dt,ft,_e.get(dt,ft)/this.s[ft]);for(var gt=this.U,ln=gt.rows,bn=gt.columns,En=new $e(Q,ln),Cr=0;Cr<Q;Cr++)for(var tr=0;tr<ln;tr++){for(var ii=0,Zi=0;Zi<bn;Zi++)ii+=Xe.get(Cr,Zi)*gt.get(tr,Zi);En.set(Cr,tr,ii)}return En}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var _e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Z=0,Q=this.s,le=0,Xe=Q.length;le<Xe;le++)Q[le]>_e&&Z++;return Z}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return $e.diag(this.s)}}]),ot}();function Vr(ot){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ot=rr.checkMatrix(ot),mt?new ki(ot).inverse():kr(ot,$e.eye(ot.rows))}function kr(ot,mt){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return ot=rr.checkMatrix(ot),mt=rr.checkMatrix(mt),_e?new ki(ot).solve(mt):ot.isSquare()?new Or(ot).solve(mt):new cr(ot).solve(mt)}function Ui(ot){if(ot=$e.checkMatrix(ot),ot.isSquare()){if(ot.columns===0)return 1;var mt,_e,Z,Q;if(ot.columns===2)return mt=ot.get(0,0),_e=ot.get(0,1),Z=ot.get(1,0),Q=ot.get(1,1),mt*Q-_e*Z;if(ot.columns===3){var le,Xe,dt;return le=new xt(ot,[1,2],[1,2]),Xe=new xt(ot,[1,2],[0,2]),dt=new xt(ot,[1,2],[0,1]),mt=ot.get(0,0),_e=ot.get(0,1),Z=ot.get(0,2),mt*Ui(le)-_e*Ui(Xe)+Z*Ui(dt)}else return new Or(ot).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Wr(ot,mt){for(var _e=[],Z=0;Z<ot;Z++)Z!==mt&&_e.push(Z);return _e}function no(ot,mt,_e){var Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,Q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(ot>Q)return new Array(mt.rows+1).fill(0);for(var le=mt.addRow(_e,[0]),Xe=0;Xe<le.rows;Xe++)Math.abs(le.get(Xe,0))<Z&&le.set(Xe,0,0);return le.to1DArray()}function uo(ot){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=mt.thresholdValue,Z=_e===void 0?1e-9:_e,Q=mt.thresholdError,le=Q===void 0?1e-9:Q;ot=$e.checkMatrix(ot);for(var Xe=ot.rows,dt=new $e(Xe,Xe),ft=0;ft<Xe;ft++){var gt=$e.columnVector(ot.getRow(ft)),ln=ot.subMatrixRow(Wr(Xe,ft)).transpose(),bn=new ki(ln),En=bn.solve(gt),Cr=$e.sub(gt,ln.mmul(En)).abs().max();dt.setRow(ft,no(Cr,En,ft,Z,le))}return dt}function wi(ot){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(ot=$e.checkMatrix(ot),ot.isEmpty())return ot.transpose();for(var _e=new ki(ot,{autoTranspose:!0}),Z=_e.leftSingularVectors,Q=_e.rightSingularVectors,le=_e.diagonal,Xe=0;Xe<le.length;Xe++)Math.abs(le[Xe])>mt?le[Xe]=1/le[Xe]:le[Xe]=0;return Q.mmul($e.diag(le).mmul(Z.transpose()))}function wo(ot){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot,_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ot=new $e(ot);var Z=!1;if(v(mt)==="object"&&!$e.isMatrix(mt)&&!F.isAnyArray(mt)?(_e=mt,mt=ot,Z=!0):mt=new $e(mt),ot.rows!==mt.rows)throw new TypeError("Both matrices must have the same number of rows");var Q=_e,le=Q.center,Xe=le===void 0?!0:le;Xe&&(ot=ot.center("column"),Z||(mt=mt.center("column")));for(var dt=ot.transpose().mmul(mt),ft=0;ft<dt.rows;ft++)for(var gt=0;gt<dt.columns;gt++)dt.set(ft,gt,dt.get(ft,gt)*(1/(ot.rows-1)));return dt}function fs(ot){var mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot,_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ot=new $e(ot);var Z=!1;if(v(mt)==="object"&&!$e.isMatrix(mt)&&!F.isAnyArray(mt)?(_e=mt,mt=ot,Z=!0):mt=new $e(mt),ot.rows!==mt.rows)throw new TypeError("Both matrices must have the same number of rows");var Q=_e,le=Q.center,Xe=le===void 0?!0:le,dt=Q.scale,ft=dt===void 0?!0:dt;Xe&&(ot.center("column"),Z||mt.center("column")),ft&&(ot.scale("column"),Z||mt.scale("column"));for(var gt=ot.standardDeviation("column",{unbiased:!0}),ln=Z?gt:mt.standardDeviation("column",{unbiased:!0}),bn=ot.transpose().mmul(mt),En=0;En<bn.rows;En++)for(var Cr=0;Cr<bn.columns;Cr++)bn.set(En,Cr,bn.get(En,Cr)*(1/(gt[En]*ln[Cr]))*(1/(ot.rows-1)));return bn}var zo=function(){function ot(mt){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x(this,ot);var Z=_e.assumeSymmetric,Q=Z===void 0?!1:Z;if(mt=rr.checkMatrix(mt),!mt.isSquare())throw new Error("Matrix is not a square matrix");if(mt.isEmpty())throw new Error("Matrix must be non-empty");var le=mt.columns,Xe=new $e(le,le),dt=new Float64Array(le),ft=new Float64Array(le),gt=mt,ln,bn,En=!1;if(Q?En=!0:En=mt.isSymmetric(),En){for(ln=0;ln<le;ln++)for(bn=0;bn<le;bn++)Xe.set(ln,bn,gt.get(ln,bn));hs(le,ft,dt,Xe),ks(le,ft,dt,Xe)}else{var Cr=new $e(le,le),tr=new Float64Array(le);for(bn=0;bn<le;bn++)for(ln=0;ln<le;ln++)Cr.set(ln,bn,gt.get(ln,bn));rs(le,Cr,tr,Xe),Eo(le,ft,dt,Xe,Cr)}this.n=le,this.e=ft,this.d=dt,this.V=Xe}return N(ot,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var _e=this.n,Z=this.e,Q=this.d,le=new $e(_e,_e),Xe,dt;for(Xe=0;Xe<_e;Xe++){for(dt=0;dt<_e;dt++)le.set(Xe,dt,0);le.set(Xe,Xe,Q[Xe]),Z[Xe]>0?le.set(Xe,Xe+1,Z[Xe]):Z[Xe]<0&&le.set(Xe,Xe-1,Z[Xe])}return le}}]),ot}();function hs(ot,mt,_e,Z){var Q,le,Xe,dt,ft,gt,ln,bn;for(ft=0;ft<ot;ft++)_e[ft]=Z.get(ot-1,ft);for(dt=ot-1;dt>0;dt--){for(bn=0,Xe=0,gt=0;gt<dt;gt++)bn=bn+Math.abs(_e[gt]);if(bn===0)for(mt[dt]=_e[dt-1],ft=0;ft<dt;ft++)_e[ft]=Z.get(dt-1,ft),Z.set(dt,ft,0),Z.set(ft,dt,0);else{for(gt=0;gt<dt;gt++)_e[gt]/=bn,Xe+=_e[gt]*_e[gt];for(Q=_e[dt-1],le=Math.sqrt(Xe),Q>0&&(le=-le),mt[dt]=bn*le,Xe=Xe-Q*le,_e[dt-1]=Q-le,ft=0;ft<dt;ft++)mt[ft]=0;for(ft=0;ft<dt;ft++){for(Q=_e[ft],Z.set(ft,dt,Q),le=mt[ft]+Z.get(ft,ft)*Q,gt=ft+1;gt<=dt-1;gt++)le+=Z.get(gt,ft)*_e[gt],mt[gt]+=Z.get(gt,ft)*Q;mt[ft]=le}for(Q=0,ft=0;ft<dt;ft++)mt[ft]/=Xe,Q+=mt[ft]*_e[ft];for(ln=Q/(Xe+Xe),ft=0;ft<dt;ft++)mt[ft]-=ln*_e[ft];for(ft=0;ft<dt;ft++){for(Q=_e[ft],le=mt[ft],gt=ft;gt<=dt-1;gt++)Z.set(gt,ft,Z.get(gt,ft)-(Q*mt[gt]+le*_e[gt]));_e[ft]=Z.get(dt-1,ft),Z.set(dt,ft,0)}}_e[dt]=Xe}for(dt=0;dt<ot-1;dt++){if(Z.set(ot-1,dt,Z.get(dt,dt)),Z.set(dt,dt,1),Xe=_e[dt+1],Xe!==0){for(gt=0;gt<=dt;gt++)_e[gt]=Z.get(gt,dt+1)/Xe;for(ft=0;ft<=dt;ft++){for(le=0,gt=0;gt<=dt;gt++)le+=Z.get(gt,dt+1)*Z.get(gt,ft);for(gt=0;gt<=dt;gt++)Z.set(gt,ft,Z.get(gt,ft)-le*_e[gt])}}for(gt=0;gt<=dt;gt++)Z.set(gt,dt+1,0)}for(ft=0;ft<ot;ft++)_e[ft]=Z.get(ot-1,ft),Z.set(ot-1,ft,0);Z.set(ot-1,ot-1,1),mt[0]=0}function ks(ot,mt,_e,Z){var Q,le,Xe,dt,ft,gt,ln,bn,En,Cr,tr,ii,Zi,Mn,Xn,$r;for(Xe=1;Xe<ot;Xe++)mt[Xe-1]=mt[Xe];mt[ot-1]=0;var Re=0,Ne=0,Te=Number.EPSILON;for(gt=0;gt<ot;gt++){for(Ne=Math.max(Ne,Math.abs(_e[gt])+Math.abs(mt[gt])),ln=gt;ln<ot&&!(Math.abs(mt[ln])<=Te*Ne);)ln++;if(ln>gt)do{for(Q=_e[gt],bn=(_e[gt+1]-Q)/(2*mt[gt]),En=Pr(bn,1),bn<0&&(En=-En),_e[gt]=mt[gt]/(bn+En),_e[gt+1]=mt[gt]*(bn+En),Cr=_e[gt+1],le=Q-_e[gt],Xe=gt+2;Xe<ot;Xe++)_e[Xe]-=le;for(Re=Re+le,bn=_e[ln],tr=1,ii=tr,Zi=tr,Mn=mt[gt+1],Xn=0,$r=0,Xe=ln-1;Xe>=gt;Xe--)for(Zi=ii,ii=tr,$r=Xn,Q=tr*mt[Xe],le=tr*bn,En=Pr(bn,mt[Xe]),mt[Xe+1]=Xn*En,Xn=mt[Xe]/En,tr=bn/En,bn=tr*_e[Xe]-Xn*Q,_e[Xe+1]=le+Xn*(tr*Q+Xn*_e[Xe]),ft=0;ft<ot;ft++)le=Z.get(ft,Xe+1),Z.set(ft,Xe+1,Xn*Z.get(ft,Xe)+tr*le),Z.set(ft,Xe,tr*Z.get(ft,Xe)-Xn*le);bn=-Xn*$r*Zi*Mn*mt[gt]/Cr,mt[gt]=Xn*bn,_e[gt]=tr*bn}while(Math.abs(mt[gt])>Te*Ne);_e[gt]=_e[gt]+Re,mt[gt]=0}for(Xe=0;Xe<ot-1;Xe++){for(ft=Xe,bn=_e[Xe],dt=Xe+1;dt<ot;dt++)_e[dt]<bn&&(ft=dt,bn=_e[dt]);if(ft!==Xe)for(_e[ft]=_e[Xe],_e[Xe]=bn,dt=0;dt<ot;dt++)bn=Z.get(dt,Xe),Z.set(dt,Xe,Z.get(dt,ft)),Z.set(dt,ft,bn)}}function rs(ot,mt,_e,Z){var Q=0,le=ot-1,Xe,dt,ft,gt,ln,bn,En;for(bn=Q+1;bn<=le-1;bn++){for(En=0,gt=bn;gt<=le;gt++)En=En+Math.abs(mt.get(gt,bn-1));if(En!==0){for(ft=0,gt=le;gt>=bn;gt--)_e[gt]=mt.get(gt,bn-1)/En,ft+=_e[gt]*_e[gt];for(dt=Math.sqrt(ft),_e[bn]>0&&(dt=-dt),ft=ft-_e[bn]*dt,_e[bn]=_e[bn]-dt,ln=bn;ln<ot;ln++){for(Xe=0,gt=le;gt>=bn;gt--)Xe+=_e[gt]*mt.get(gt,ln);for(Xe=Xe/ft,gt=bn;gt<=le;gt++)mt.set(gt,ln,mt.get(gt,ln)-Xe*_e[gt])}for(gt=0;gt<=le;gt++){for(Xe=0,ln=le;ln>=bn;ln--)Xe+=_e[ln]*mt.get(gt,ln);for(Xe=Xe/ft,ln=bn;ln<=le;ln++)mt.set(gt,ln,mt.get(gt,ln)-Xe*_e[ln])}_e[bn]=En*_e[bn],mt.set(bn,bn-1,En*dt)}}for(gt=0;gt<ot;gt++)for(ln=0;ln<ot;ln++)Z.set(gt,ln,gt===ln?1:0);for(bn=le-1;bn>=Q+1;bn--)if(mt.get(bn,bn-1)!==0){for(gt=bn+1;gt<=le;gt++)_e[gt]=mt.get(gt,bn-1);for(ln=bn;ln<=le;ln++){for(dt=0,gt=bn;gt<=le;gt++)dt+=_e[gt]*Z.get(gt,ln);for(dt=dt/_e[bn]/mt.get(bn,bn-1),gt=bn;gt<=le;gt++)Z.set(gt,ln,Z.get(gt,ln)+dt*_e[gt])}}}function Eo(ot,mt,_e,Z,Q){var le=ot-1,Xe=0,dt=ot-1,ft=Number.EPSILON,gt=0,ln=0,bn=0,En=0,Cr=0,tr=0,ii=0,Zi=0,Mn,Xn,$r,Re,Ne,Te,U,Y,ge,Ye,ct,nt,lt,fn,on;for(Mn=0;Mn<ot;Mn++)for((Mn<Xe||Mn>dt)&&(_e[Mn]=Q.get(Mn,Mn),mt[Mn]=0),Xn=Math.max(Mn-1,0);Xn<ot;Xn++)ln=ln+Math.abs(Q.get(Mn,Xn));for(;le>=Xe;){for(Re=le;Re>Xe&&(tr=Math.abs(Q.get(Re-1,Re-1))+Math.abs(Q.get(Re,Re)),tr===0&&(tr=ln),!(Math.abs(Q.get(Re,Re-1))<ft*tr));)Re--;if(Re===le)Q.set(le,le,Q.get(le,le)+gt),_e[le]=Q.get(le,le),mt[le]=0,le--,Zi=0;else if(Re===le-1){if(U=Q.get(le,le-1)*Q.get(le-1,le),bn=(Q.get(le-1,le-1)-Q.get(le,le))/2,En=bn*bn+U,ii=Math.sqrt(Math.abs(En)),Q.set(le,le,Q.get(le,le)+gt),Q.set(le-1,le-1,Q.get(le-1,le-1)+gt),Y=Q.get(le,le),En>=0){for(ii=bn>=0?bn+ii:bn-ii,_e[le-1]=Y+ii,_e[le]=_e[le-1],ii!==0&&(_e[le]=Y-U/ii),mt[le-1]=0,mt[le]=0,Y=Q.get(le,le-1),tr=Math.abs(Y)+Math.abs(ii),bn=Y/tr,En=ii/tr,Cr=Math.sqrt(bn*bn+En*En),bn=bn/Cr,En=En/Cr,Xn=le-1;Xn<ot;Xn++)ii=Q.get(le-1,Xn),Q.set(le-1,Xn,En*ii+bn*Q.get(le,Xn)),Q.set(le,Xn,En*Q.get(le,Xn)-bn*ii);for(Mn=0;Mn<=le;Mn++)ii=Q.get(Mn,le-1),Q.set(Mn,le-1,En*ii+bn*Q.get(Mn,le)),Q.set(Mn,le,En*Q.get(Mn,le)-bn*ii);for(Mn=Xe;Mn<=dt;Mn++)ii=Z.get(Mn,le-1),Z.set(Mn,le-1,En*ii+bn*Z.get(Mn,le)),Z.set(Mn,le,En*Z.get(Mn,le)-bn*ii)}else _e[le-1]=Y+bn,_e[le]=Y+bn,mt[le-1]=ii,mt[le]=-ii;le=le-2,Zi=0}else{if(Y=Q.get(le,le),ge=0,U=0,Re<le&&(ge=Q.get(le-1,le-1),U=Q.get(le,le-1)*Q.get(le-1,le)),Zi===10){for(gt+=Y,Mn=Xe;Mn<=le;Mn++)Q.set(Mn,Mn,Q.get(Mn,Mn)-Y);tr=Math.abs(Q.get(le,le-1))+Math.abs(Q.get(le-1,le-2)),Y=ge=.75*tr,U=-.4375*tr*tr}if(Zi===30&&(tr=(ge-Y)/2,tr=tr*tr+U,tr>0)){for(tr=Math.sqrt(tr),ge<Y&&(tr=-tr),tr=Y-U/((ge-Y)/2+tr),Mn=Xe;Mn<=le;Mn++)Q.set(Mn,Mn,Q.get(Mn,Mn)-tr);gt+=tr,Y=ge=U=.964}for(Zi=Zi+1,Ne=le-2;Ne>=Re&&(ii=Q.get(Ne,Ne),Cr=Y-ii,tr=ge-ii,bn=(Cr*tr-U)/Q.get(Ne+1,Ne)+Q.get(Ne,Ne+1),En=Q.get(Ne+1,Ne+1)-ii-Cr-tr,Cr=Q.get(Ne+2,Ne+1),tr=Math.abs(bn)+Math.abs(En)+Math.abs(Cr),bn=bn/tr,En=En/tr,Cr=Cr/tr,!(Ne===Re||Math.abs(Q.get(Ne,Ne-1))*(Math.abs(En)+Math.abs(Cr))<ft*(Math.abs(bn)*(Math.abs(Q.get(Ne-1,Ne-1))+Math.abs(ii)+Math.abs(Q.get(Ne+1,Ne+1))))));)Ne--;for(Mn=Ne+2;Mn<=le;Mn++)Q.set(Mn,Mn-2,0),Mn>Ne+2&&Q.set(Mn,Mn-3,0);for($r=Ne;$r<=le-1&&(fn=$r!==le-1,$r!==Ne&&(bn=Q.get($r,$r-1),En=Q.get($r+1,$r-1),Cr=fn?Q.get($r+2,$r-1):0,Y=Math.abs(bn)+Math.abs(En)+Math.abs(Cr),Y!==0&&(bn=bn/Y,En=En/Y,Cr=Cr/Y)),Y!==0);$r++)if(tr=Math.sqrt(bn*bn+En*En+Cr*Cr),bn<0&&(tr=-tr),tr!==0){for($r!==Ne?Q.set($r,$r-1,-tr*Y):Re!==Ne&&Q.set($r,$r-1,-Q.get($r,$r-1)),bn=bn+tr,Y=bn/tr,ge=En/tr,ii=Cr/tr,En=En/bn,Cr=Cr/bn,Xn=$r;Xn<ot;Xn++)bn=Q.get($r,Xn)+En*Q.get($r+1,Xn),fn&&(bn=bn+Cr*Q.get($r+2,Xn),Q.set($r+2,Xn,Q.get($r+2,Xn)-bn*ii)),Q.set($r,Xn,Q.get($r,Xn)-bn*Y),Q.set($r+1,Xn,Q.get($r+1,Xn)-bn*ge);for(Mn=0;Mn<=Math.min(le,$r+3);Mn++)bn=Y*Q.get(Mn,$r)+ge*Q.get(Mn,$r+1),fn&&(bn=bn+ii*Q.get(Mn,$r+2),Q.set(Mn,$r+2,Q.get(Mn,$r+2)-bn*Cr)),Q.set(Mn,$r,Q.get(Mn,$r)-bn),Q.set(Mn,$r+1,Q.get(Mn,$r+1)-bn*En);for(Mn=Xe;Mn<=dt;Mn++)bn=Y*Z.get(Mn,$r)+ge*Z.get(Mn,$r+1),fn&&(bn=bn+ii*Z.get(Mn,$r+2),Z.set(Mn,$r+2,Z.get(Mn,$r+2)-bn*Cr)),Z.set(Mn,$r,Z.get(Mn,$r)-bn),Z.set(Mn,$r+1,Z.get(Mn,$r+1)-bn*En)}}}if(ln!==0){for(le=ot-1;le>=0;le--)if(bn=_e[le],En=mt[le],En===0)for(Re=le,Q.set(le,le,1),Mn=le-1;Mn>=0;Mn--){for(U=Q.get(Mn,Mn)-bn,Cr=0,Xn=Re;Xn<=le;Xn++)Cr=Cr+Q.get(Mn,Xn)*Q.get(Xn,le);if(mt[Mn]<0)ii=U,tr=Cr;else if(Re=Mn,mt[Mn]===0?Q.set(Mn,le,U!==0?-Cr/U:-Cr/(ft*ln)):(Y=Q.get(Mn,Mn+1),ge=Q.get(Mn+1,Mn),En=(_e[Mn]-bn)*(_e[Mn]-bn)+mt[Mn]*mt[Mn],Te=(Y*tr-ii*Cr)/En,Q.set(Mn,le,Te),Q.set(Mn+1,le,Math.abs(Y)>Math.abs(ii)?(-Cr-U*Te)/Y:(-tr-ge*Te)/ii)),Te=Math.abs(Q.get(Mn,le)),ft*Te*Te>1)for(Xn=Mn;Xn<=le;Xn++)Q.set(Xn,le,Q.get(Xn,le)/Te)}else if(En<0)for(Re=le-1,Math.abs(Q.get(le,le-1))>Math.abs(Q.get(le-1,le))?(Q.set(le-1,le-1,En/Q.get(le,le-1)),Q.set(le-1,le,-(Q.get(le,le)-bn)/Q.get(le,le-1))):(on=Qo(0,-Q.get(le-1,le),Q.get(le-1,le-1)-bn,En),Q.set(le-1,le-1,on[0]),Q.set(le-1,le,on[1])),Q.set(le,le-1,0),Q.set(le,le,1),Mn=le-2;Mn>=0;Mn--){for(Ye=0,ct=0,Xn=Re;Xn<=le;Xn++)Ye=Ye+Q.get(Mn,Xn)*Q.get(Xn,le-1),ct=ct+Q.get(Mn,Xn)*Q.get(Xn,le);if(U=Q.get(Mn,Mn)-bn,mt[Mn]<0)ii=U,Cr=Ye,tr=ct;else if(Re=Mn,mt[Mn]===0?(on=Qo(-Ye,-ct,U,En),Q.set(Mn,le-1,on[0]),Q.set(Mn,le,on[1])):(Y=Q.get(Mn,Mn+1),ge=Q.get(Mn+1,Mn),nt=(_e[Mn]-bn)*(_e[Mn]-bn)+mt[Mn]*mt[Mn]-En*En,lt=(_e[Mn]-bn)*2*En,nt===0&&lt===0&&(nt=ft*ln*(Math.abs(U)+Math.abs(En)+Math.abs(Y)+Math.abs(ge)+Math.abs(ii))),on=Qo(Y*Cr-ii*Ye+En*ct,Y*tr-ii*ct-En*Ye,nt,lt),Q.set(Mn,le-1,on[0]),Q.set(Mn,le,on[1]),Math.abs(Y)>Math.abs(ii)+Math.abs(En)?(Q.set(Mn+1,le-1,(-Ye-U*Q.get(Mn,le-1)+En*Q.get(Mn,le))/Y),Q.set(Mn+1,le,(-ct-U*Q.get(Mn,le)-En*Q.get(Mn,le-1))/Y)):(on=Qo(-Cr-ge*Q.get(Mn,le-1),-tr-ge*Q.get(Mn,le),ii,En),Q.set(Mn+1,le-1,on[0]),Q.set(Mn+1,le,on[1]))),Te=Math.max(Math.abs(Q.get(Mn,le-1)),Math.abs(Q.get(Mn,le))),ft*Te*Te>1)for(Xn=Mn;Xn<=le;Xn++)Q.set(Xn,le-1,Q.get(Xn,le-1)/Te),Q.set(Xn,le,Q.get(Xn,le)/Te)}for(Mn=0;Mn<ot;Mn++)if(Mn<Xe||Mn>dt)for(Xn=Mn;Xn<ot;Xn++)Z.set(Mn,Xn,Q.get(Mn,Xn));for(Xn=ot-1;Xn>=Xe;Xn--)for(Mn=Xe;Mn<=dt;Mn++){for(ii=0,$r=Xe;$r<=Math.min(Xn,dt);$r++)ii=ii+Z.get(Mn,$r)*Q.get($r,Xn);Z.set(Mn,Xn,ii)}}}function Qo(ot,mt,_e,Z){var Q,le;return Math.abs(_e)>Math.abs(Z)?(Q=Z/_e,le=_e+Q*Z,[(ot+Q*mt)/le,(mt-Q*ot)/le]):(Q=_e/Z,le=Z+Q*_e,[(Q*ot+mt)/le,(Q*mt-ot)/le])}var Xs=function(){function ot(mt){if(x(this,ot),mt=rr.checkMatrix(mt),!mt.isSymmetric())throw new Error("Matrix is not symmetric");var _e=mt,Z=_e.rows,Q=new $e(Z,Z),le=!0,Xe,dt,ft;for(dt=0;dt<Z;dt++){var gt=0;for(ft=0;ft<dt;ft++){var ln=0;for(Xe=0;Xe<ft;Xe++)ln+=Q.get(ft,Xe)*Q.get(dt,Xe);ln=(_e.get(dt,ft)-ln)/Q.get(ft,ft),Q.set(dt,ft,ln),gt=gt+ln*ln}for(gt=_e.get(dt,dt)-gt,le&=gt>0,Q.set(dt,dt,Math.sqrt(Math.max(gt,0))),ft=dt+1;ft<Z;ft++)Q.set(dt,ft,0)}this.L=Q,this.positiveDefinite=!!le}return N(ot,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(_e){_e=rr.checkMatrix(_e);var Z=this.L,Q=Z.rows;if(_e.rows!==Q)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var le=_e.columns,Xe=_e.clone(),dt,ft,gt;for(gt=0;gt<Q;gt++)for(ft=0;ft<le;ft++){for(dt=0;dt<gt;dt++)Xe.set(gt,ft,Xe.get(gt,ft)-Xe.get(dt,ft)*Z.get(gt,dt));Xe.set(gt,ft,Xe.get(gt,ft)/Z.get(gt,gt))}for(gt=Q-1;gt>=0;gt--)for(ft=0;ft<le;ft++){for(dt=gt+1;dt<Q;dt++)Xe.set(gt,ft,Xe.get(gt,ft)-Xe.get(dt,ft)*Z.get(dt,gt));Xe.set(gt,ft,Xe.get(gt,ft)/Z.get(gt,gt))}return Xe}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),ot}(),Ys=N(function ot(mt){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x(this,ot),mt=rr.checkMatrix(mt);var Z=_e.Y,Q=_e.scaleScores,le=Q===void 0?!1:Q,Xe=_e.maxIterations,dt=Xe===void 0?1e3:Xe,ft=_e.terminationCriteria,gt=ft===void 0?1e-10:ft,ln;if(Z){if(F.isAnyArray(Z)&&typeof Z[0]=="number"?Z=$e.columnVector(Z):Z=rr.checkMatrix(Z),Z.rows!==mt.rows)throw new Error("Y should have the same number of rows as X");ln=Z.getColumnVector(0)}else ln=mt.getColumnVector(0);for(var bn=1,En,Cr,tr,ii,Zi=0;Zi<dt&&bn>gt;Zi++)tr=mt.transpose().mmul(ln).div(ln.transpose().mmul(ln).get(0,0)),tr=tr.div(tr.norm()),En=mt.mmul(tr).div(tr.transpose().mmul(tr).get(0,0)),Zi>0&&(bn=En.clone().sub(ii).pow(2).sum()),ii=En.clone(),Z?(Cr=Z.transpose().mmul(En).div(En.transpose().mmul(En).get(0,0)),Cr=Cr.div(Cr.norm()),ln=Z.mmul(Cr).div(Cr.transpose().mmul(Cr).get(0,0))):ln=En;if(Z){var Mn=mt.transpose().mmul(En).div(En.transpose().mmul(En).get(0,0));Mn=Mn.div(Mn.norm());var Xn=mt.clone().sub(En.clone().mmul(Mn.transpose())),$r=ln.transpose().mmul(En).div(En.transpose().mmul(En).get(0,0)),Re=Z.clone().sub(En.clone().mulS($r.get(0,0)).mmul(Cr.transpose()));this.t=En,this.p=Mn.transpose(),this.w=tr.transpose(),this.q=Cr,this.u=ln,this.s=En.transpose().mmul(En),this.xResidual=Xn,this.yResidual=Re,this.betas=$r}else this.w=tr.transpose(),this.s=En.transpose().mmul(En).sqrt(),le?this.t=En.clone().div(this.s.get(0,0)):this.t=En,this.xResidual=mt.sub(En.mmul(tr.transpose()))});O.XA=fr,O.a_=Xs,O.yQ=Xs,O.Hs=Tt,O.Ec=zo,O.dx=zo,O.LU=Or,O.Rm=Or,O.y3=$e,O.qK=ut,O.pb=ce,O.j=Ze,O.sO=Wt,O.BZ=jt,O.EK=Ut,O.Db=xt,O.Fx=$t,O.tU=Un,O.Ym=Ys,O.rs=Ys,O.QR=cr,O.TB=cr,O.oH=ki,O.Sc=ki,O.BN=_t,O.it=qn,O.$r=rr,O.QM=fs,O.AV=wo,J=$e,O.GH=Ui,O.SO=Vr,O.uZ=uo,O.yU=wi,O.F1=kr,O.re=xn},11904:function(){"use strict"},1186:function(bt){(function(V,J){if(!0)bt.exports=J();else var ie,T})(self,function(){return function(){var O={8570:function(T){(function(u,a){T.exports=a()})(typeof self!="undefined"?self:this,function(){return function(b){var u={};function a(o){if(u[o])return u[o].exports;var l=u[o]={i:o,l:!1,exports:{}};return b[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=b,a.c=u,a.d=function(o,l,r){a.o(o,l)||Object.defineProperty(o,l,{configurable:!1,enumerable:!0,get:r})},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s=36)}([function(b,u,a){"use strict";var o=a(3);u.a=function(l){return Array.isArray?Array.isArray(l):Object(o.a)(l,"Array")}},function(b,u,a){"use strict";var o=function(l){return l!==null&&typeof l!="function"&&isFinite(l.length)};u.a=o},function(b,u,a){"use strict";var o=a(3);u.a=function(l){return Object(o.a)(l,"Function")}},function(b,u,a){"use strict";var o={}.toString,l=function(r,e){return o.call(r)==="[object "+e+"]"};u.a=l},function(b,u,a){"use strict";var o=a(3);u.a=function(l){return Object(o.a)(l,"String")}},function(b,u,a){"use strict";var o=a(3),l=function(r){return Object(o.a)(r,"Number")};u.a=l},function(b,u,a){var o=a(38),l=o.mix;function r(e,t,s,h){return h===void 0&&(h="height"),s==="center"?(e[h]+t[h])/2:e.height}b.exports={assign:l,getHeight:r}},function(b,u,a){"use strict";var o=function(l){return l==null};u.a=o},function(b,u,a){"use strict";var o=a(0),l=a(12);function r(e,t){if(e){var s;if(Object(o.a)(e))for(var h=0,m=e.length;h<m&&(s=t(e[h],h),s!==!1);h++);else if(Object(l.a)(e)){for(var d in e)if(e.hasOwnProperty(d)&&(s=t(e[d],d),s===!1))break}}}u.a=r},function(b,u,a){"use strict";var o=a(7);u.a=function(l){return Object(o.a)(l)?"":l.toString()}},function(b,u,a){"use strict";var o=a(14),l=a(3),r=function(e){if(!Object(o.a)(e)||!Object(l.a)(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};u.a=r},function(b,u,a){var o=a(18),l=function(){function r(t,s){s===void 0&&(s={});var h=this;h.options=s,h.rootNode=o(t,s)}var e=r.prototype;return e.execute=function(){throw new Error("please override this method")},r}();b.exports=l},function(b,u,a){"use strict";u.a=function(o){var l=typeof o;return o!==null&&l==="object"||l==="function"}},function(b,u,a){"use strict";var o=a(1),l=function(r,e){return Object(o.a)(r)?r.indexOf(e)>-1:!1};u.a=l},function(b,u,a){"use strict";var o=function(l){return typeof l=="object"&&l!==null};u.a=o},function(b,u,a){"use strict";var o=a(8),l=a(2),r=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Object(o.a)(e,function(s,h){Object(l.a)(e)&&h==="prototype"||t.push(s)}),t};u.a=r},function(b,u,a){"use strict";u.a=l;function o(r,e){for(var t in e)e.hasOwnProperty(t)&&t!=="constructor"&&e[t]!==void 0&&(r[t]=e[t])}function l(r,e,t,s){return e&&o(r,e),t&&o(r,t),s&&o(r,s),r}},function(b,u,a){var o=a(35),l=["LR","RL","TB","BT","H","V"],r=["LR","RL","H"],e=function(h){return r.indexOf(h)>-1},t=l[0];b.exports=function(s,h,m){var d=h.direction||t;if(h.isHorizontal=e(d),d&&l.indexOf(d)===-1)throw new TypeError("Invalid direction: "+d);if(d===l[0])m(s,h);else if(d===l[1])m(s,h),s.right2left();else if(d===l[2])m(s,h);else if(d===l[3])m(s,h),s.bottom2top();else if(d===l[4]||d===l[5]){var v=o(s,h),x=v.left,N=v.right;m(x,h),m(N,h),h.isHorizontal?x.right2left():x.bottom2top(),N.translate(x.x-N.x,x.y-N.y),s.x=x.x,s.y=N.y;var F=s.getBoundingBox();h.isHorizontal?F.top<0&&s.translate(0,-F.top):F.left<0&&s.translate(-F.left,0)}var ae=h.fixedRoot;return ae===void 0&&(ae=!0),ae&&s.translate(-(s.x+s.width/2+s.hgap),-(s.y+s.height/2+s.vgap)),s}},function(b,u,a){var o=a(6),l=18,r=l*2,e=l,t={getId:function(d){return d.id||d.name},getPreH:function(d){return d.preH||0},getPreV:function(d){return d.preV||0},getHGap:function(d){return d.hgap||e},getVGap:function(d){return d.vgap||e},getChildren:function(d){return d.children},getHeight:function(d){return d.height||r},getWidth:function(d){var v=d.label||" ";return d.width||v.split("").length*l}};function s(m,d){var v=this;if(v.vgap=v.hgap=0,m instanceof s)return m;v.data=m;var x=d.getHGap(m),N=d.getVGap(m);return v.preH=d.getPreH(m),v.preV=d.getPreV(m),v.width=d.getWidth(m),v.height=d.getHeight(m),v.width+=v.preH,v.height+=v.preV,v.id=d.getId(m),v.x=v.y=0,v.depth=0,v.children||(v.children=[]),v.addGap(x,N),v}o.assign(s.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(d,v){var x=this;x.hgap+=d,x.vgap+=v,x.width+=2*d,x.height+=2*v},eachNode:function(d){for(var v=this,x=[v],N;N=x.shift();)d(N),x=N.children.concat(x)},DFTraverse:function(d){this.eachNode(d)},BFTraverse:function(d){for(var v=this,x=[v],N;N=x.shift();)d(N),x=x.concat(N.children)},getBoundingBox:function(){var d={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(v){d.left=Math.min(d.left,v.x),d.top=Math.min(d.top,v.y),d.width=Math.max(d.width,v.x+v.width),d.height=Math.max(d.height,v.y+v.height)}),d},translate:function(d,v){d===void 0&&(d=0),v===void 0&&(v=0),this.eachNode(function(x){x.x+=d,x.y+=v,x.x+=x.preH,x.y+=x.preV})},right2left:function(){var d=this,v=d.getBoundingBox();d.eachNode(function(x){x.x=x.x-(x.x-v.left)*2-x.width}),d.translate(v.width,0)},bottom2top:function(){var d=this,v=d.getBoundingBox();d.eachNode(function(x){x.y=x.y-(x.y-v.top)*2-x.height}),d.translate(0,v.height)}});function h(m,d,v){d===void 0&&(d={}),d=o.assign({},t,d);var x=new s(m,d),N=[x],F;if(!v&&!m.collapsed){for(;F=N.shift();)if(!F.data.collapsed){var ae=d.getChildren(F.data),$=ae?ae.length:0;if(F.children=new Array($),ae&&$)for(var te=0;te<$;te++){var fe=new s(ae[te],d);F.children[te]=fe,N.push(fe),fe.parent=F,fe.depth=F.depth+1}}}return x}b.exports=h},function(b,u,a){"use strict";var o=a(1),l=function(r,e){if(!Object(o.a)(r))return r;for(var t=[],s=0;s<r.length;s++){var h=r[s];e(h,s)&&t.push(h)}return t};u.a=l},function(b,u,a){"use strict";var o=a(7),l=a(21);function r(e,t){var s=Object(l.a)(t),h=s.length;if(Object(o.a)(e))return!h;for(var m=0;m<h;m+=1){var d=s[m];if(t[d]!==e[d]||!(d in e))return!1}return!0}u.a=r},function(b,u,a){"use strict";var o=a(8),l=a(2),r=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Object(o.a)(e,function(s,h){Object(l.a)(e)&&h==="prototype"||t.push(h)}),t};u.a=r},function(b,u,a){"use strict";var o=a(0);u.a=function(l){if(Object(o.a)(l))return l.reduce(function(r,e){return Math.max(r,e)},l[0])}},function(b,u,a){"use strict";var o=a(0);u.a=function(l){if(Object(o.a)(l))return l.reduce(function(r,e){return Math.min(r,e)},l[0])}},function(b,u,a){"use strict";var o=a(1),l=Array.prototype.splice,r=function(t,s){if(!Object(o.a)(t))return[];for(var h=t?s.length:0,m=h-1;h--;){var d=void 0,v=s[h];(h===m||v!==d)&&(d=v,l.call(t,v,1))}return t};u.a=r},function(b,u,a){"use strict";var o=a(8),l=a(0),r=a(10),e=function(t,s,h){if(!Object(l.a)(t)&&!Object(r.a)(t))return t;var m=h;return Object(o.a)(t,function(d,v){m=s(m,d,v)}),m};u.a=e},function(b,u,a){"use strict";u.a=o;function o(l,r){r===void 0&&(r=new Map);var e=[];if(Array.isArray(l))for(var t=0,s=l.length;t<s;t++){var h=l[t];r.has(h)||(e.push(h),r.set(h,!0))}return e}},function(b,u,a){"use strict";u.a=e;var o=a(0),l=a(2),r=a(28);function e(t,s){if(!s)return{0:t};if(!Object(l.a)(s)){var h=Object(o.a)(s)?s:s.replace(/\s+/g,"").split("*");s=function(m){for(var d="_",v=0,x=h.length;v<x;v++)d+=m[h[v]]&&m[h[v]].toString();return d}}return Object(r.a)(t,s)}},function(b,u,a){"use strict";var o=a(0),l=a(2),r=Object.prototype.hasOwnProperty;function e(t,s){if(!s||!Object(o.a)(t))return{};for(var h={},m=Object(l.a)(s)?s:function(N){return N[s]},d,v=0;v<t.length;v++){var x=t[v];d=m(x),r.call(h,d)?h[d].push(x):h[d]=[x]}return h}u.a=e},function(b,u,a){"use strict";u.a=function(o,l){return o.hasOwnProperty(l)}},function(b,u,a){"use strict";var o={}.toString,l=function(r){return o.call(r).replace(/^\[object /,"").replace(/]$/,"")};u.a=l},function(b,u,a){"use strict";var o=Object.prototype,l=function(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||o;return r===t};u.a=l},function(b,u,a){"use strict";var o=a(2);u.a=function(l,r){if(!Object(o.a)(l))throw new TypeError("Expected a function");var e=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var h=r?r.apply(this,t):t[0],m=e.cache;if(m.has(h))return m.get(h);var d=l.apply(this,t);return m.set(h,d),d};return e.cache=new Map,e}},function(b,u,a){"use strict";var o=a(14),l=a(1),r=a(4),e=function(t,s){if(t===s)return!0;if(!t||!s||Object(r.a)(t)||Object(r.a)(s))return!1;if(Object(l.a)(t)||Object(l.a)(s)){if(t.length!==s.length)return!1;for(var h=!0,m=0;m<t.length&&(h=e(t[m],s[m]),!!h);m++);return h}if(Object(o.a)(t)||Object(o.a)(s)){var d=Object.keys(t),v=Object.keys(s);if(d.length!==v.length)return!1;for(var h=!0,m=0;m<d.length&&(h=e(t[d[m]],s[d[m]]),!!h);m++);return h}return!1};u.a=e},function(b,u,a){"use strict";var o=a(116),l=a(15),r=a(32),e=a(4),t;u.a=Object(r.a)(function(s,h){h===void 0&&(h={});var m=h.fontSize,d=h.fontFamily,v=h.fontWeight,x=h.fontStyle,N=h.fontVariant;return t||(t=document.createElement("canvas").getContext("2d")),t.font=[x,N,v,m+"px",d].join(" "),t.measureText(Object(e.a)(s)?s:"").width},function(s,h){return h===void 0&&(h={}),Object(o.a)([s],Object(l.a)(h)).join("")})},function(b,u,a){var o=a(18);b.exports=function(l,r){for(var e=o(l.data,r,!0),t=o(l.data,r,!0),s=l.children.length,h=Math.round(s/2),m=r.getSide||function(N,F){return F<h?"right":"left"},d=0;d<s;d++){var v=l.children[d],x=m(v,d);x==="right"?t.children.push(v):e.children.push(v)}return e.eachNode(function(N){N.isRoot()||(N.side="left")}),t.eachNode(function(N){N.isRoot()||(N.side="right")}),{left:e,right:t}}},function(b,u,a){var o={compactBox:a(37),dendrogram:a(120),indented:a(122),mindmap:a(124)};b.exports=o},function(b,u,a){function o(v,x){v.prototype=Object.create(x.prototype),v.prototype.constructor=v,l(v,x)}function l(v,x){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,ae){return F.__proto__=ae,F},l(v,x)}var r=a(11),e=a(119),t=a(17),s=a(6),h=function(v){o(x,v);function x(){return v.apply(this,arguments)||this}var N=x.prototype;return N.execute=function(){var ae=this;return t(ae.rootNode,ae.options,e)},x}(r),m={};function d(v,x){return x=s.assign({},m,x),new h(v,x).execute()}b.exports=d},function(b,u,a){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var o=a(13);a.d(u,"contains",function(){return o.a}),a.d(u,"includes",function(){return o.a});var l=a(39);a.d(u,"difference",function(){return l.a});var r=a(40);a.d(u,"find",function(){return r.a});var e=a(41);a.d(u,"findIndex",function(){return e.a});var t=a(42);a.d(u,"firstValue",function(){return t.a});var s=a(43);a.d(u,"flatten",function(){return s.a});var h=a(44);a.d(u,"flattenDeep",function(){return h.a});var m=a(45);a.d(u,"getRange",function(){return m.a});var d=a(46);a.d(u,"pull",function(){return d.a});var v=a(24);a.d(u,"pullAt",function(){return v.a});var x=a(25);a.d(u,"reduce",function(){return x.a});var N=a(47);a.d(u,"remove",function(){return N.a});var F=a(48);a.d(u,"sortBy",function(){return F.a});var ae=a(49);a.d(u,"union",function(){return ae.a});var $=a(26);a.d(u,"uniq",function(){return $.a});var te=a(50);a.d(u,"valuesOfKey",function(){return te.a});var fe=a(51);a.d(u,"head",function(){return fe.a});var B=a(52);a.d(u,"last",function(){return B.a});var he=a(53);a.d(u,"startsWith",function(){return he.a});var z=a(54);a.d(u,"endsWith",function(){return z.a});var ee=a(19);a.d(u,"filter",function(){return ee.a});var pe=a(55);a.d(u,"every",function(){return pe.a});var S=a(56);a.d(u,"some",function(){return S.a});var q=a(57);a.d(u,"group",function(){return q.a});var M=a(28);a.d(u,"groupBy",function(){return M.a});var I=a(27);a.d(u,"groupToMap",function(){return I.a});var j=a(58);a.d(u,"getWrapBehavior",function(){return j.a});var ue=a(59);a.d(u,"wrapBehavior",function(){return ue.a});var se=a(60);a.d(u,"number2color",function(){return se.a});var Ee=a(61);a.d(u,"parseRadius",function(){return Ee.a});var Ce=a(62);a.d(u,"clamp",function(){return Ce.a});var xe=a(63);a.d(u,"fixedBase",function(){return xe.a});var Oe=a(64);a.d(u,"isDecimal",function(){return Oe.a});var Le=a(65);a.d(u,"isEven",function(){return Le.a});var Ge=a(66);a.d(u,"isInteger",function(){return Ge.a});var He=a(67);a.d(u,"isNegative",function(){return He.a});var Et=a(68);a.d(u,"isNumberEqual",function(){return Et.a});var Ct=a(69);a.d(u,"isOdd",function(){return Ct.a});var Gt=a(70);a.d(u,"isPositive",function(){return Gt.a});var At=a(22);a.d(u,"max",function(){return At.a});var vt=a(71);a.d(u,"maxBy",function(){return vt.a});var cn=a(23);a.d(u,"min",function(){return cn.a});var hn=a(72);a.d(u,"minBy",function(){return hn.a});var Bn=a(73);a.d(u,"mod",function(){return Bn.a});var Fn=a(74);a.d(u,"toDegree",function(){return Fn.a});var ir=a(75);a.d(u,"toInteger",function(){return ir.a});var Nr=a(76);a.d(u,"toRadian",function(){return Nr.a});var Ei=a(77);a.d(u,"forIn",function(){return Ei.a});var ci=a(29);a.d(u,"has",function(){return ci.a});var Ot=a(78);a.d(u,"hasKey",function(){return Ot.a});var fr=a(79);a.d(u,"hasValue",function(){return fr.a});var Pi=a(21);a.d(u,"keys",function(){return Pi.a});var Li=a(20);a.d(u,"isMatch",function(){return Li.a});var zn=a(15);a.d(u,"values",function(){return zn.a});var $e=a(80);a.d(u,"lowerCase",function(){return $e.a});var Xt=a(81);a.d(u,"lowerFirst",function(){return Xt.a});var Rt=a(82);a.d(u,"substitute",function(){return Rt.a});var _t=a(83);a.d(u,"upperCase",function(){return _t.a});var Tt=a(84);a.d(u,"upperFirst",function(){return Tt.a});var at=a(30);a.d(u,"getType",function(){return at.a});var ce=a(85);a.d(u,"isArguments",function(){return ce.a});var ut=a(0);a.d(u,"isArray",function(){return ut.a});var Ze=a(1);a.d(u,"isArrayLike",function(){return Ze.a});var Wt=a(86);a.d(u,"isBoolean",function(){return Wt.a});var Ut=a(87);a.d(u,"isDate",function(){return Ut.a});var jt=a(88);a.d(u,"isError",function(){return jt.a});var xt=a(2);a.d(u,"isFunction",function(){return xt.a});var $t=a(89);a.d(u,"isFinite",function(){return $t.a});var Un=a(7);a.d(u,"isNil",function(){return Un.a});var qn=a(90);a.d(u,"isNull",function(){return qn.a});var rr=a(5);a.d(u,"isNumber",function(){return rr.a});var xn=a(12);a.d(u,"isObject",function(){return xn.a});var Or=a(14);a.d(u,"isObjectLike",function(){return Or.a});var Pr=a(10);a.d(u,"isPlainObject",function(){return Pr.a});var cr=a(31);a.d(u,"isPrototype",function(){return cr.a});var ki=a(91);a.d(u,"isRegExp",function(){return ki.a});var Vr=a(4);a.d(u,"isString",function(){return Vr.a});var kr=a(3);a.d(u,"isType",function(){return kr.a});var Ui=a(92);a.d(u,"isUndefined",function(){return Ui.a});var Wr=a(93);a.d(u,"isElement",function(){return Wr.a});var no=a(94);a.d(u,"requestAnimationFrame",function(){return no.a});var uo=a(95);a.d(u,"clearAnimationFrame",function(){return uo.a});var wi=a(96);a.d(u,"augment",function(){return wi.a});var wo=a(97);a.d(u,"clone",function(){return wo.a});var fs=a(98);a.d(u,"debounce",function(){return fs.a});var zo=a(32);a.d(u,"memoize",function(){return zo.a});var hs=a(99);a.d(u,"deepMix",function(){return hs.a});var ks=a(8);a.d(u,"each",function(){return ks.a});var rs=a(100);a.d(u,"extend",function(){return rs.a});var Eo=a(101);a.d(u,"indexOf",function(){return Eo.a});var Qo=a(102);a.d(u,"isEmpty",function(){return Qo.a});var Xs=a(33);a.d(u,"isEqual",function(){return Xs.a});var Ys=a(103);a.d(u,"isEqualWith",function(){return Ys.a});var ot=a(104);a.d(u,"map",function(){return ot.a});var mt=a(105);a.d(u,"mapValues",function(){return mt.a});var _e=a(16);a.d(u,"mix",function(){return _e.a}),a.d(u,"assign",function(){return _e.a});var Z=a(106);a.d(u,"get",function(){return Z.a});var Q=a(107);a.d(u,"set",function(){return Q.a});var le=a(108);a.d(u,"pick",function(){return le.a});var Xe=a(109);a.d(u,"omit",function(){return Xe.a});var dt=a(110);a.d(u,"throttle",function(){return dt.a});var ft=a(111);a.d(u,"toArray",function(){return ft.a});var gt=a(9);a.d(u,"toString",function(){return gt.a});var ln=a(112);a.d(u,"uniqueId",function(){return ln.a});var bn=a(113);a.d(u,"noop",function(){return bn.a});var En=a(114);a.d(u,"identity",function(){return En.a});var Cr=a(115);a.d(u,"size",function(){return Cr.a});var tr=a(34);a.d(u,"measureTextWidth",function(){return tr.a});var ii=a(117);a.d(u,"getEllipsisText",function(){return ii.a});var Zi=a(118);a.d(u,"Cache",function(){return Zi.a})},function(b,u,a){"use strict";var o=a(19),l=a(13),r=function(e,t){return t===void 0&&(t=[]),Object(o.a)(e,function(s){return!Object(l.a)(t,s)})};u.a=r},function(b,u,a){"use strict";var o=a(2),l=a(20),r=a(0),e=a(10);function t(s,h){if(!Object(r.a)(s))return null;var m;if(Object(o.a)(h)&&(m=h),Object(e.a)(h)&&(m=function(v){return Object(l.a)(v,h)}),m){for(var d=0;d<s.length;d+=1)if(m(s[d]))return s[d]}return null}u.a=t},function(b,u,a){"use strict";function o(l,r,e){e===void 0&&(e=0);for(var t=e;t<l.length;t++)if(r(l[t],t))return t;return-1}u.a=o},function(b,u,a){"use strict";var o=a(7),l=a(0),r=function(e,t){for(var s=null,h=0;h<e.length;h++){var m=e[h],d=m[t];if(!Object(o.a)(d)){Object(l.a)(d)?s=d[0]:s=d;break}}return s};u.a=r},function(b,u,a){"use strict";var o=a(0),l=function(r){if(!Object(o.a)(r))return[];for(var e=[],t=0;t<r.length;t++)e=e.concat(r[t]);return e};u.a=l},function(b,u,a){"use strict";var o=a(0),l=function(r,e){if(e===void 0&&(e=[]),!Object(o.a)(r))e.push(r);else for(var t=0;t<r.length;t+=1)l(r[t],e);return e};u.a=l},function(b,u,a){"use strict";var o=a(0),l=a(22),r=a(23),e=function(t){var s=t.filter(function(x){return!isNaN(x)});if(!s.length)return{min:0,max:0};if(Object(o.a)(t[0])){for(var h=[],m=0;m<t.length;m++)h=h.concat(t[m]);s=h}var d=Object(l.a)(s),v=Object(r.a)(s);return{min:v,max:d}};u.a=e},function(b,u,a){"use strict";var o=Array.prototype,l=o.splice,r=o.indexOf,e=function(t){for(var s=[],h=1;h<arguments.length;h++)s[h-1]=arguments[h];for(var m=0;m<s.length;m++)for(var d=s[m],v=-1;(v=r.call(t,d))>-1;)l.call(t,v,1);return t};u.a=e},function(b,u,a){"use strict";var o=a(1),l=a(24),r=function(e,t){var s=[];if(!Object(o.a)(e))return s;for(var h=-1,m=[],d=e.length;++h<d;){var v=e[h];t(v,h,e)&&(s.push(v),m.push(h))}return Object(l.a)(e,m),s};u.a=r},function(b,u,a){"use strict";var o=a(0),l=a(4),r=a(2);function e(t,s){var h;if(Object(r.a)(s))h=function(d,v){return s(d)-s(v)};else{var m=[];Object(l.a)(s)?m.push(s):Object(o.a)(s)&&(m=s),h=function(d,v){for(var x=0;x<m.length;x+=1){var N=m[x];if(d[N]>v[N])return 1;if(d[N]<v[N])return-1}return 0}}return t.sort(h),t}u.a=e},function(b,u,a){"use strict";var o=a(26),l=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Object(o.a)([].concat.apply([],r))};u.a=l},function(b,u,a){"use strict";var o=a(0),l=a(7);u.a=function(r,e){for(var t=[],s={},h=0;h<r.length;h++){var m=r[h],d=m[e];if(!Object(l.a)(d)){Object(o.a)(d)||(d=[d]);for(var v=0;v<d.length;v++){var x=d[v];s[x]||(t.push(x),s[x]=!0)}}}return t}},function(b,u,a){"use strict";u.a=l;var o=a(1);function l(r){if(Object(o.a)(r))return r[0]}},function(b,u,a){"use strict";u.a=l;var o=a(1);function l(r){if(Object(o.a)(r)){var e=r;return e[e.length-1]}}},function(b,u,a){"use strict";var o=a(0),l=a(4);function r(e,t){return Object(o.a)(e)||Object(l.a)(e)?e[0]===t:!1}u.a=r},function(b,u,a){"use strict";var o=a(0),l=a(4);function r(e,t){return Object(o.a)(e)||Object(l.a)(e)?e[e.length-1]===t:!1}u.a=r},function(b,u,a){"use strict";var o=function(l,r){for(var e=0;e<l.length;e++)if(!r(l[e],e))return!1;return!0};u.a=o},function(b,u,a){"use strict";var o=function(l,r){for(var e=0;e<l.length;e++)if(r(l[e],e))return!0;return!1};u.a=o},function(b,u,a){"use strict";var o=a(27);u.a=function(l,r){if(!r)return[l];var e=Object(o.a)(l,r),t=[];for(var s in e)t.push(e[s]);return t}},function(b,u,a){"use strict";function o(l,r){return l["_wrap_"+r]}u.a=o},function(b,u,a){"use strict";function o(l,r){if(l["_wrap_"+r])return l["_wrap_"+r];var e=function(t){l[r](t)};return l["_wrap_"+r]=e,e}u.a=o},function(b,u,a){"use strict";var o={};function l(r){var e=o[r];if(!e){for(var t=r.toString(16),s=t.length;s<6;s++)t="0"+t;e="#"+t,o[r]=e}return e}u.a=l},function(b,u,a){"use strict";var o=a(0);function l(r){var e=0,t=0,s=0,h=0;return Object(o.a)(r)?r.length===1?e=t=s=h=r[0]:r.length===2?(e=s=r[0],t=h=r[1]):r.length===3?(e=r[0],t=h=r[1],s=r[2]):(e=r[0],t=r[1],s=r[2],h=r[3]):e=t=s=h=r,{r1:e,r2:t,r3:s,r4:h}}u.a=l},function(b,u,a){"use strict";var o=function(l,r,e){return l<r?r:l>e?e:l};u.a=o},function(b,u,a){"use strict";var o=function(l,r){var e=r.toString(),t=e.indexOf(".");if(t===-1)return Math.round(l);var s=e.substr(t+1).length;return s>20&&(s=20),parseFloat(l.toFixed(s))};u.a=o},function(b,u,a){"use strict";var o=a(5),l=function(r){return Object(o.a)(r)&&r%1!==0};u.a=l},function(b,u,a){"use strict";var o=a(5),l=function(r){return Object(o.a)(r)&&r%2===0};u.a=l},function(b,u,a){"use strict";var o=a(5),l=Number.isInteger?Number.isInteger:function(r){return Object(o.a)(r)&&r%1===0};u.a=l},function(b,u,a){"use strict";var o=a(5),l=function(r){return Object(o.a)(r)&&r<0};u.a=l},function(b,u,a){"use strict";u.a=l;var o=1e-5;function l(r,e,t){return t===void 0&&(t=o),Math.abs(r-e)<t}},function(b,u,a){"use strict";var o=a(5),l=function(r){return Object(o.a)(r)&&r%2!==0};u.a=l},function(b,u,a){"use strict";var o=a(5),l=function(r){return Object(o.a)(r)&&r>0};u.a=l},function(b,u,a){"use strict";var o=a(0),l=a(2);u.a=function(r,e){if(Object(o.a)(r)){for(var t,s=-1/0,h=0;h<r.length;h++){var m=r[h],d=Object(l.a)(e)?e(m):m[e];d>s&&(t=m,s=d)}return t}}},function(b,u,a){"use strict";var o=a(0),l=a(2);u.a=function(r,e){if(Object(o.a)(r)){for(var t,s=1/0,h=0;h<r.length;h++){var m=r[h],d=Object(l.a)(e)?e(m):m[e];d<s&&(t=m,s=d)}return t}}},function(b,u,a){"use strict";var o=function(l,r){return(l%r+r)%r};u.a=o},function(b,u,a){"use strict";var o=180/Math.PI,l=function(r){return o*r};u.a=l},function(b,u,a){"use strict";u.a=parseInt},function(b,u,a){"use strict";var o=Math.PI/180,l=function(r){return o*r};u.a=l},function(b,u,a){"use strict";var o=a(8);u.a=o.a},function(b,u,a){"use strict";var o=a(29);u.a=o.a},function(b,u,a){"use strict";var o=a(13),l=a(15);u.a=function(r,e){return Object(o.a)(Object(l.a)(r),e)}},function(b,u,a){"use strict";var o=a(9),l=function(r){return Object(o.a)(r).toLowerCase()};u.a=l},function(b,u,a){"use strict";var o=a(9),l=function(r){var e=Object(o.a)(r);return e.charAt(0).toLowerCase()+e.substring(1)};u.a=l},function(b,u,a){"use strict";function o(l,r){return!l||!r?l:l.replace(/\\?\{([^{}]+)\}/g,function(e,t){return e.charAt(0)==="\\"?e.slice(1):r[t]===void 0?"":r[t]})}u.a=o},function(b,u,a){"use strict";var o=a(9),l=function(r){return Object(o.a)(r).toUpperCase()};u.a=l},function(b,u,a){"use strict";var o=a(9),l=function(r){var e=Object(o.a)(r);return e.charAt(0).toUpperCase()+e.substring(1)};u.a=l},function(b,u,a){"use strict";var o=a(3),l=function(r){return Object(o.a)(r,"Arguments")};u.a=l},function(b,u,a){"use strict";var o=a(3),l=function(r){return Object(o.a)(r,"Boolean")};u.a=l},function(b,u,a){"use strict";var o=a(3),l=function(r){return Object(o.a)(r,"Date")};u.a=l},function(b,u,a){"use strict";var o=a(3),l=function(r){return Object(o.a)(r,"Error")};u.a=l},function(b,u,a){"use strict";var o=a(5);u.a=function(l){return Object(o.a)(l)&&isFinite(l)}},function(b,u,a){"use strict";var o=function(l){return l===null};u.a=o},function(b,u,a){"use strict";var o=a(3),l=function(r){return Object(o.a)(r,"RegExp")};u.a=l},function(b,u,a){"use strict";var o=function(l){return l===void 0};u.a=o},function(b,u,a){"use strict";var o=function(l){return l instanceof Element||l instanceof HTMLDocument};u.a=o},function(b,u,a){"use strict";u.a=o;function o(l){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)};return r(l)}},function(b,u,a){"use strict";u.a=o;function o(l){var r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;r(l)}},function(b,u,a){"use strict";var o=a(16),l=a(2),r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var s=e[0],h=1;h<e.length;h++){var m=e[h];Object(l.a)(m)&&(m=m.prototype),Object(o.a)(s.prototype,m)}};u.a=r},function(b,u,a){"use strict";var o=a(0),l=function(r){if(typeof r!="object"||r===null)return r;var e;if(Object(o.a)(r)){e=[];for(var t=0,s=r.length;t<s;t++)typeof r[t]=="object"&&r[t]!=null?e[t]=l(r[t]):e[t]=r[t]}else{e={};for(var h in r)typeof r[h]=="object"&&r[h]!=null?e[h]=l(r[h]):e[h]=r[h]}return e};u.a=l},function(b,u,a){"use strict";function o(l,r,e){var t;return function(){var s=this,h=arguments,m=function(){t=null,e||l.apply(s,h)},d=e&&!t;clearTimeout(t),t=setTimeout(m,r),d&&l.apply(s,h)}}u.a=o},function(b,u,a){"use strict";var o=a(0),l=a(10),r=5;function e(s,h,m,d){m=m||0,d=d||r;for(var v in h)if(h.hasOwnProperty(v)){var x=h[v];x!==null&&Object(l.a)(x)?(Object(l.a)(s[v])||(s[v]={}),m<d?e(s[v],x,m+1,d):s[v]=h[v]):Object(o.a)(x)?(s[v]=[],s[v]=s[v].concat(x)):x!==void 0&&(s[v]=x)}}var t=function(s){for(var h=[],m=1;m<arguments.length;m++)h[m-1]=arguments[m];for(var d=0;d<h.length;d+=1)e(s,h[d]);return s};u.a=t},function(b,u,a){"use strict";var o=a(16),l=a(2),r=function(e,t,s,h){Object(l.a)(t)||(s=t,t=e,e=function(){});var m=Object.create?function(v,x){return Object.create(v,{constructor:{value:x}})}:function(v,x){function N(){}N.prototype=v;var F=new N;return F.constructor=x,F},d=m(t.prototype,e);return e.prototype=Object(o.a)(d,e.prototype),e.superclass=m(t.prototype,t),Object(o.a)(d,s),Object(o.a)(e,h),e};u.a=r},function(b,u,a){"use strict";var o=a(1),l=function(r,e){if(!Object(o.a)(r))return-1;var t=Array.prototype.indexOf;if(t)return t.call(r,e);for(var s=-1,h=0;h<r.length;h++)if(r[h]===e){s=h;break}return s};u.a=l},function(b,u,a){"use strict";var o=a(7),l=a(1),r=a(30),e=a(31),t=Object.prototype.hasOwnProperty;function s(h){if(Object(o.a)(h))return!0;if(Object(l.a)(h))return!h.length;var m=Object(r.a)(h);if(m==="Map"||m==="Set")return!h.size;if(Object(e.a)(h))return!Object.keys(h).length;for(var d in h)if(t.call(h,d))return!1;return!0}u.a=s},function(b,u,a){"use strict";var o=a(2),l=a(33);u.a=function(r,e,t){return Object(o.a)(t)?!!t(r,e):Object(l.a)(r,e)}},function(b,u,a){"use strict";var o=a(1),l=function(r,e){if(!Object(o.a)(r))return r;for(var t=[],s=0;s<r.length;s++){var h=r[s];t.push(e(h,s))}return t};u.a=l},function(b,u,a){"use strict";var o=a(7),l=a(12),r=function(e){return e};u.a=function(e,t){t===void 0&&(t=r);var s={};return Object(l.a)(e)&&!Object(o.a)(e)&&Object.keys(e).forEach(function(h){s[h]=t(e[h],h)}),s}},function(b,u,a){"use strict";var o=a(4);u.a=function(l,r,e){for(var t=0,s=Object(o.a)(r)?r.split("."):r;l&&t<s.length;)l=l[s[t++]];return l===void 0||t<s.length?e:l}},function(b,u,a){"use strict";var o=a(12),l=a(4),r=a(5);u.a=function(e,t,s){var h=e,m=Object(l.a)(t)?t.split("."):t;return m.forEach(function(d,v){v<m.length-1?(Object(o.a)(h[d])||(h[d]=Object(r.a)(m[v+1])?[]:{}),h=h[d]):h[d]=s}),e}},function(b,u,a){"use strict";var o=a(8),l=a(10),r=Object.prototype.hasOwnProperty;u.a=function(e,t){if(e===null||!Object(l.a)(e))return{};var s={};return Object(o.a)(t,function(h){r.call(e,h)&&(s[h]=e[h])}),s}},function(b,u,a){"use strict";var o=a(25);u.a=function(l,r){return Object(o.a)(l,function(e,t,s){return r.includes(s)||(e[s]=t),e},{})}},function(b,u,a){"use strict";u.a=function(o,l,r){var e,t,s,h,m=0;r||(r={});var d=function(){m=r.leading===!1?0:Date.now(),e=null,h=o.apply(t,s),e||(t=s=null)},v=function(){var x=Date.now();!m&&r.leading===!1&&(m=x);var N=l-(x-m);return t=this,s=arguments,N<=0||N>l?(e&&(clearTimeout(e),e=null),m=x,h=o.apply(t,s),e||(t=s=null)):!e&&r.trailing!==!1&&(e=setTimeout(d,N)),h};return v.cancel=function(){clearTimeout(e),m=0,e=t=s=null},v}},function(b,u,a){"use strict";var o=a(1);u.a=function(l){return Object(o.a)(l)?Array.prototype.slice.call(l):[]}},function(b,u,a){"use strict";var o={};u.a=function(l){return l=l||"g",o[l]?o[l]+=1:o[l]=1,l+o[l]}},function(b,u,a){"use strict";u.a=function(){}},function(b,u,a){"use strict";u.a=function(o){return o}},function(b,u,a){"use strict";u.a=r;var o=a(7),l=a(1);function r(e){return Object(o.a)(e)?0:Object(l.a)(e)?e.length:Object.keys(e).length}},function(b,u,a){"use strict";u.a=he;var o=function(xe,Oe){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Le,Ge){Le.__proto__=Ge}||function(Le,Ge){for(var He in Ge)Object.prototype.hasOwnProperty.call(Ge,He)&&(Le[He]=Ge[He])},o(xe,Oe)};function l(xe,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");o(xe,Oe);function Le(){this.constructor=xe}xe.prototype=Oe===null?Object.create(Oe):(Le.prototype=Oe.prototype,new Le)}var r=function(){return r=Object.assign||function(Oe){for(var Le,Ge=1,He=arguments.length;Ge<He;Ge++){Le=arguments[Ge];for(var Et in Le)Object.prototype.hasOwnProperty.call(Le,Et)&&(Oe[Et]=Le[Et])}return Oe},r.apply(this,arguments)};function e(xe,Oe){var Le={};for(var Ge in xe)Object.prototype.hasOwnProperty.call(xe,Ge)&&Oe.indexOf(Ge)<0&&(Le[Ge]=xe[Ge]);if(xe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var He=0,Ge=Object.getOwnPropertySymbols(xe);He<Ge.length;He++)Oe.indexOf(Ge[He])<0&&Object.prototype.propertyIsEnumerable.call(xe,Ge[He])&&(Le[Ge[He]]=xe[Ge[He]]);return Le}function t(xe,Oe,Le,Ge){var He=arguments.length,Et=He<3?Oe:Ge===null?Ge=Object.getOwnPropertyDescriptor(Oe,Le):Ge,Ct;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Et=Reflect.decorate(xe,Oe,Le,Ge);else for(var Gt=xe.length-1;Gt>=0;Gt--)(Ct=xe[Gt])&&(Et=(He<3?Ct(Et):He>3?Ct(Oe,Le,Et):Ct(Oe,Le))||Et);return He>3&&Et&&Object.defineProperty(Oe,Le,Et),Et}function s(xe,Oe){return function(Le,Ge){Oe(Le,Ge,xe)}}function h(xe,Oe,Le,Ge,He,Et){function Ct(ci){if(ci!==void 0&&typeof ci!="function")throw new TypeError("Function expected");return ci}for(var Gt=Ge.kind,At=Gt==="getter"?"get":Gt==="setter"?"set":"value",vt=!Oe&&xe?Ge.static?xe:xe.prototype:null,cn=Oe||(vt?Object.getOwnPropertyDescriptor(vt,Ge.name):{}),hn,Bn=!1,Fn=Le.length-1;Fn>=0;Fn--){var ir={};for(var Nr in Ge)ir[Nr]=Nr==="access"?{}:Ge[Nr];for(var Nr in Ge.access)ir.access[Nr]=Ge.access[Nr];ir.addInitializer=function(ci){if(Bn)throw new TypeError("Cannot add initializers after decoration has completed");Et.push(Ct(ci||null))};var Ei=(0,Le[Fn])(Gt==="accessor"?{get:cn.get,set:cn.set}:cn[At],ir);if(Gt==="accessor"){if(Ei===void 0)continue;if(Ei===null||typeof Ei!="object")throw new TypeError("Object expected");(hn=Ct(Ei.get))&&(cn.get=hn),(hn=Ct(Ei.set))&&(cn.set=hn),(hn=Ct(Ei.init))&&He.push(hn)}else(hn=Ct(Ei))&&(Gt==="field"?He.push(hn):cn[At]=hn)}vt&&Object.defineProperty(vt,Ge.name,cn),Bn=!0}function m(xe,Oe,Le){for(var Ge=arguments.length>2,He=0;He<Oe.length;He++)Le=Ge?Oe[He].call(xe,Le):Oe[He].call(xe);return Ge?Le:void 0}function d(xe){return typeof xe=="symbol"?xe:"".concat(xe)}function v(xe,Oe,Le){return typeof Oe=="symbol"&&(Oe=Oe.description?"[".concat(Oe.description,"]"):""),Object.defineProperty(xe,"name",{configurable:!0,value:Le?"".concat(Le," ",Oe):Oe})}function x(xe,Oe){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(xe,Oe)}function N(xe,Oe,Le,Ge){function He(Et){return Et instanceof Le?Et:new Le(function(Ct){Ct(Et)})}return new(Le||(Le=Promise))(function(Et,Ct){function Gt(cn){try{vt(Ge.next(cn))}catch(hn){Ct(hn)}}function At(cn){try{vt(Ge.throw(cn))}catch(hn){Ct(hn)}}function vt(cn){cn.done?Et(cn.value):He(cn.value).then(Gt,At)}vt((Ge=Ge.apply(xe,Oe||[])).next())})}function F(xe,Oe){var Le={label:0,sent:function(){if(Et[0]&1)throw Et[1];return Et[1]},trys:[],ops:[]},Ge,He,Et,Ct;return Ct={next:Gt(0),throw:Gt(1),return:Gt(2)},typeof Symbol=="function"&&(Ct[Symbol.iterator]=function(){return this}),Ct;function Gt(vt){return function(cn){return At([vt,cn])}}function At(vt){if(Ge)throw new TypeError("Generator is already executing.");for(;Ct&&(Ct=0,vt[0]&&(Le=0)),Le;)try{if(Ge=1,He&&(Et=vt[0]&2?He.return:vt[0]?He.throw||((Et=He.return)&&Et.call(He),0):He.next)&&!(Et=Et.call(He,vt[1])).done)return Et;switch(He=0,Et&&(vt=[vt[0]&2,Et.value]),vt[0]){case 0:case 1:Et=vt;break;case 4:return Le.label++,{value:vt[1],done:!1};case 5:Le.label++,He=vt[1],vt=[0];continue;case 7:vt=Le.ops.pop(),Le.trys.pop();continue;default:if(Et=Le.trys,!(Et=Et.length>0&&Et[Et.length-1])&&(vt[0]===6||vt[0]===2)){Le=0;continue}if(vt[0]===3&&(!Et||vt[1]>Et[0]&&vt[1]<Et[3])){Le.label=vt[1];break}if(vt[0]===6&&Le.label<Et[1]){Le.label=Et[1],Et=vt;break}if(Et&&Le.label<Et[2]){Le.label=Et[2],Le.ops.push(vt);break}Et[2]&&Le.ops.pop(),Le.trys.pop();continue}vt=Oe.call(xe,Le)}catch(cn){vt=[6,cn],He=0}finally{Ge=Et=0}if(vt[0]&5)throw vt[1];return{value:vt[0]?vt[1]:void 0,done:!0}}}var ae=Object.create?function(xe,Oe,Le,Ge){Ge===void 0&&(Ge=Le);var He=Object.getOwnPropertyDescriptor(Oe,Le);(!He||("get"in He?!Oe.__esModule:He.writable||He.configurable))&&(He={enumerable:!0,get:function(){return Oe[Le]}}),Object.defineProperty(xe,Ge,He)}:function(xe,Oe,Le,Ge){Ge===void 0&&(Ge=Le),xe[Ge]=Oe[Le]};function $(xe,Oe){for(var Le in xe)Le!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,Le)&&ae(Oe,xe,Le)}function te(xe){var Oe=typeof Symbol=="function"&&Symbol.iterator,Le=Oe&&xe[Oe],Ge=0;if(Le)return Le.call(xe);if(xe&&typeof xe.length=="number")return{next:function(){return xe&&Ge>=xe.length&&(xe=void 0),{value:xe&&xe[Ge++],done:!xe}}};throw new TypeError(Oe?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(xe,Oe){var Le=typeof Symbol=="function"&&xe[Symbol.iterator];if(!Le)return xe;var Ge=Le.call(xe),He,Et=[],Ct;try{for(;(Oe===void 0||Oe-- >0)&&!(He=Ge.next()).done;)Et.push(He.value)}catch(Gt){Ct={error:Gt}}finally{try{He&&!He.done&&(Le=Ge.return)&&Le.call(Ge)}finally{if(Ct)throw Ct.error}}return Et}function B(){for(var xe=[],Oe=0;Oe<arguments.length;Oe++)xe=xe.concat(fe(arguments[Oe]));return xe}function he(){for(var xe=0,Oe=0,Le=arguments.length;Oe<Le;Oe++)xe+=arguments[Oe].length;for(var Ge=Array(xe),He=0,Oe=0;Oe<Le;Oe++)for(var Et=arguments[Oe],Ct=0,Gt=Et.length;Ct<Gt;Ct++,He++)Ge[He]=Et[Ct];return Ge}function z(xe,Oe,Le){if(Le||arguments.length===2)for(var Ge=0,He=Oe.length,Et;Ge<He;Ge++)(Et||!(Ge in Oe))&&(Et||(Et=Array.prototype.slice.call(Oe,0,Ge)),Et[Ge]=Oe[Ge]);return xe.concat(Et||Array.prototype.slice.call(Oe))}function ee(xe){return this instanceof ee?(this.v=xe,this):new ee(xe)}function pe(xe,Oe,Le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge=Le.apply(xe,Oe||[]),He,Et=[];return He={},Ct("next"),Ct("throw"),Ct("return"),He[Symbol.asyncIterator]=function(){return this},He;function Ct(Bn){Ge[Bn]&&(He[Bn]=function(Fn){return new Promise(function(ir,Nr){Et.push([Bn,Fn,ir,Nr])>1||Gt(Bn,Fn)})})}function Gt(Bn,Fn){try{At(Ge[Bn](Fn))}catch(ir){hn(Et[0][3],ir)}}function At(Bn){Bn.value instanceof ee?Promise.resolve(Bn.value.v).then(vt,cn):hn(Et[0][2],Bn)}function vt(Bn){Gt("next",Bn)}function cn(Bn){Gt("throw",Bn)}function hn(Bn,Fn){Bn(Fn),Et.shift(),Et.length&&Gt(Et[0][0],Et[0][1])}}function S(xe){var Oe,Le;return Oe={},Ge("next"),Ge("throw",function(He){throw He}),Ge("return"),Oe[Symbol.iterator]=function(){return this},Oe;function Ge(He,Et){Oe[He]=xe[He]?function(Ct){return(Le=!Le)?{value:ee(xe[He](Ct)),done:!1}:Et?Et(Ct):Ct}:Et}}function q(xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe=xe[Symbol.asyncIterator],Le;return Oe?Oe.call(xe):(xe=typeof te=="function"?te(xe):xe[Symbol.iterator](),Le={},Ge("next"),Ge("throw"),Ge("return"),Le[Symbol.asyncIterator]=function(){return this},Le);function Ge(Et){Le[Et]=xe[Et]&&function(Ct){return new Promise(function(Gt,At){Ct=xe[Et](Ct),He(Gt,At,Ct.done,Ct.value)})}}function He(Et,Ct,Gt,At){Promise.resolve(At).then(function(vt){Et({value:vt,done:Gt})},Ct)}}function M(xe,Oe){return Object.defineProperty?Object.defineProperty(xe,"raw",{value:Oe}):xe.raw=Oe,xe}var I=Object.create?function(xe,Oe){Object.defineProperty(xe,"default",{enumerable:!0,value:Oe})}:function(xe,Oe){xe.default=Oe};function j(xe){if(xe&&xe.__esModule)return xe;var Oe={};if(xe!=null)for(var Le in xe)Le!=="default"&&Object.prototype.hasOwnProperty.call(xe,Le)&&ae(Oe,xe,Le);return I(Oe,xe),Oe}function ue(xe){return xe&&xe.__esModule?xe:{default:xe}}function se(xe,Oe,Le,Ge){if(Le==="a"&&!Ge)throw new TypeError("Private accessor was defined without a getter");if(typeof Oe=="function"?xe!==Oe||!Ge:!Oe.has(xe))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Le==="m"?Ge:Le==="a"?Ge.call(xe):Ge?Ge.value:Oe.get(xe)}function Ee(xe,Oe,Le,Ge,He){if(Ge==="m")throw new TypeError("Private method is not writable");if(Ge==="a"&&!He)throw new TypeError("Private accessor was defined without a setter");if(typeof Oe=="function"?xe!==Oe||!He:!Oe.has(xe))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Ge==="a"?He.call(xe,Le):He?He.value=Le:Oe.set(xe,Le),Le}function Ce(xe,Oe){if(Oe===null||typeof Oe!="object"&&typeof Oe!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof xe=="function"?Oe===xe:xe.has(Oe)}},function(b,u,a){"use strict";var o=a(4),l=a(9),r=a(34);u.a=function(e,t,s,h){h===void 0&&(h="...");var m=16,d=Object(r.a)(h,s),v=Object(o.a)(e)?e:Object(l.a)(e),x=t,N=[],F,ae;if(Object(r.a)(e,s)<=t)return e;for(;F=v.substr(0,m),ae=Object(r.a)(F,s),!(ae+d>x&&ae>x);)if(N.push(F),x-=ae,v=v.substr(m),!v)return N.join("");for(;F=v.substr(0,1),ae=Object(r.a)(F,s),!(ae+d>x);)if(N.push(F),x-=ae,v=v.substr(1),!v)return N.join("");return""+N.join("")+h}},function(b,u,a){"use strict";var o=function(){function l(){this.map={}}return l.prototype.has=function(r){return this.map[r]!==void 0},l.prototype.get=function(r,e){var t=this.map[r];return t===void 0?e:t},l.prototype.set=function(r,e){this.map[r]=e},l.prototype.clear=function(){this.map={}},l.prototype.delete=function(r){delete this.map[r]},l.prototype.size=function(){return Object.keys(this.map).length},l}();u.a=o},function(b,u){function a(s,h,m,d){d===void 0&&(d=[]);var v=this;v.w=s||0,v.h=h||0,v.y=m||0,v.x=0,v.c=d||[],v.cs=d.length,v.prelim=0,v.mod=0,v.shift=0,v.change=0,v.tl=null,v.tr=null,v.el=null,v.er=null,v.msel=0,v.mser=0}a.fromNode=function(s,h){if(!s)return null;var m=[];return s.children.forEach(function(d){m.push(a.fromNode(d,h))}),h?new a(s.height,s.width,s.x,m):new a(s.width,s.height,s.y,m)};function o(s,h,m){m?s.y+=h:s.x+=h,s.children.forEach(function(d){o(d,h,m)})}function l(s,h){var m=h?s.y:s.x;return s.children.forEach(function(d){m=Math.min(l(d,h),m)}),m}function r(s,h){var m=l(s,h);o(s,-m,h)}function e(s,h,m){m?h.y=s.x:h.x=s.x,s.c.forEach(function(d,v){e(d,h.children[v],m)})}function t(s,h,m){m===void 0&&(m=0),h?(s.x=m,m+=s.width):(s.y=m,m+=s.height),s.children.forEach(function(d){t(d,h,m)})}b.exports=function(s,h){h===void 0&&(h={});var m=h.isHorizontal;function d(q){if(q.cs===0){v(q);return}d(q.c[0]);for(var M=pe($(q.c[0].el),0,null),I=1;I<q.cs;++I){d(q.c[I]);var j=$(q.c[I].er);x(q,I,M),M=pe(j,I,M)}B(q),v(q)}function v(q){q.cs===0?(q.el=q,q.er=q,q.msel=q.mser=0):(q.el=q.c[0].el,q.msel=q.c[0].msel,q.er=q.c[q.cs-1].er,q.mser=q.c[q.cs-1].mser)}function x(q,M,I){for(var j=q.c[M-1],ue=j.mod,se=q.c[M],Ee=se.mod;j!==null&&se!==null;){$(j)>I.low&&(I=I.nxt);var Ce=ue+j.prelim+j.w-(Ee+se.prelim);Ce>0&&(Ee+=Ce,N(q,M,I.index,Ce));var xe=$(j),Oe=$(se);xe<=Oe&&(j=ae(j),j!==null&&(ue+=j.mod)),xe>=Oe&&(se=F(se),se!==null&&(Ee+=se.mod))}!j&&se?te(q,M,se,Ee):j&&!se&&fe(q,M,j,ue)}function N(q,M,I,j){q.c[M].mod+=j,q.c[M].msel+=j,q.c[M].mser+=j,z(q,M,I,j)}function F(q){return q.cs===0?q.tl:q.c[0]}function ae(q){return q.cs===0?q.tr:q.c[q.cs-1]}function $(q){return q.y+q.h}function te(q,M,I,j){var ue=q.c[0].el;ue.tl=I;var se=j-I.mod-q.c[0].msel;ue.mod+=se,ue.prelim-=se,q.c[0].el=q.c[M].el,q.c[0].msel=q.c[M].msel}function fe(q,M,I,j){var ue=q.c[M].er;ue.tr=I;var se=j-I.mod-q.c[M].mser;ue.mod+=se,ue.prelim-=se,q.c[M].er=q.c[M-1].er,q.c[M].mser=q.c[M-1].mser}function B(q){q.prelim=(q.c[0].prelim+q.c[0].mod+q.c[q.cs-1].mod+q.c[q.cs-1].prelim+q.c[q.cs-1].w)/2-q.w/2}function he(q,M){M+=q.mod,q.x=q.prelim+M,ee(q);for(var I=0;I<q.cs;I++)he(q.c[I],M)}function z(q,M,I,j){if(I!==M-1){var ue=M-I;q.c[I+1].shift+=j/ue,q.c[M].shift-=j/ue,q.c[M].change-=j-j/ue}}function ee(q){for(var M=0,I=0,j=0;j<q.cs;j++)M+=q.c[j].shift,I+=M+q.c[j].change,q.c[j].mod+=I}function pe(q,M,I){for(;I!==null&&q>=I.low;)I=I.nxt;return{low:q,index:M,nxt:I}}t(s,m);var S=a.fromNode(s,m);return d(S),he(S,0),e(S,s,m),r(s,m),s}},function(b,u,a){function o(v,x){v.prototype=Object.create(x.prototype),v.prototype.constructor=v,l(v,x)}function l(v,x){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,ae){return F.__proto__=ae,F},l(v,x)}var r=a(11),e=a(121),t=a(17),s=a(6),h=function(v){o(x,v);function x(){return v.apply(this,arguments)||this}var N=x.prototype;return N.execute=function(){var ae=this;return ae.rootNode.width=0,t(ae.rootNode,ae.options,e)},x}(r),m={};function d(v,x){return x=s.assign({},m,x),new h(v,x).execute()}b.exports=d},function(b,u,a){var o=a(6);function l(t,s){t===void 0&&(t=0),s===void 0&&(s=[]);var h=this;h.x=h.y=0,h.leftChild=h.rightChild=null,h.height=0,h.children=s}var r={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function e(t,s,h){h?(s.x=t.x,s.y=t.y):(s.x=t.y,s.y=t.x),t.children.forEach(function(m,d){e(m,s.children[d],h)})}b.exports=function(t,s){s===void 0&&(s={}),s=o.assign({},r,s);var h=0;function m(F){if(!F)return null;F.width=0,F.depth&&F.depth>h&&(h=F.depth);var ae=F.children,$=ae.length,te=new l(F.height,[]);return ae.forEach(function(fe,B){var he=m(fe);te.children.push(he),B===0&&(te.leftChild=he),B===$-1&&(te.rightChild=he)}),te.originNode=F,te.isLeaf=F.isLeaf(),te}function d(F){if(F.isLeaf||F.children.length===0)F.drawingDepth=h;else{var ae=F.children.map(function(te){return d(te)}),$=Math.min.apply(null,ae);F.drawingDepth=$-1}return F.drawingDepth}var v;function x(F){F.x=F.drawingDepth*s.rankSep,F.isLeaf?(F.y=0,v&&(F.y=v.y+v.height+s.nodeSep,F.originNode.parent!==v.originNode.parent&&(F.y+=s.subTreeSep)),v=F):(F.children.forEach(function(ae){x(ae)}),F.y=(F.leftChild.y+F.rightChild.y)/2)}var N=m(t);return d(N),x(N),e(N,t,s.isHorizontal),t}},function(b,u,a){function o(N,F){N.prototype=Object.create(F.prototype),N.prototype.constructor=N,l(N,F)}function l(N,F){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($,te){return $.__proto__=te,$},l(N,F)}var r=a(11),e=a(123),t=a(35),s=a(6),h=["LR","RL","H"],m=h[0],d=function(N){o(F,N);function F(){return N.apply(this,arguments)||this}var ae=F.prototype;return ae.execute=function(){var te=this,fe=te.options,B=te.rootNode;fe.isHorizontal=!0;var he=fe.indent,z=he===void 0?20:he,ee=fe.dropCap,pe=ee===void 0?!0:ee,S=fe.direction,q=S===void 0?m:S,M=fe.align;if(q&&h.indexOf(q)===-1)throw new TypeError("Invalid direction: "+q);if(q===h[0])e(B,z,pe,M);else if(q===h[1])e(B,z,pe,M),B.right2left();else if(q===h[2]){var I=t(B,fe),j=I.left,ue=I.right;e(j,z,pe,M),j.right2left(),e(ue,z,pe,M);var se=j.getBoundingBox();ue.translate(se.width,0),B.x=ue.x-B.width/2}return B},F}(r),v={};function x(N,F){return F=s.assign({},v,F),new d(N,F).execute()}b.exports=x},function(b,u,a){var o=a(6);function l(r,e,t,s,h){var m=typeof t=="function"?t(r):t*r.depth;if(!s)try{if(r.id===r.parent.children[0].id){r.x+=m,r.y=e?e.y:0;return}}catch(x){}if(r.x+=m,e){if(r.y=e.y+o.getHeight(e,r,h),e.parent&&r.parent.id!==e.parent.id){var d=e.parent,v=d.y+o.getHeight(d,r,h);r.y=v>r.y?v:r.y}}else r.y=0}b.exports=function(r,e,t,s){var h=null;r.eachNode(function(m){l(m,h,e,t,s),h=m})}},function(b,u,a){function o(v,x){v.prototype=Object.create(x.prototype),v.prototype.constructor=v,l(v,x)}function l(v,x){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(F,ae){return F.__proto__=ae,F},l(v,x)}var r=a(11),e=a(125),t=a(17),s=a(6),h=function(v){o(x,v);function x(){return v.apply(this,arguments)||this}var N=x.prototype;return N.execute=function(){var ae=this;return t(ae.rootNode,ae.options,e)},x}(r),m={};function d(v,x){return x=s.assign({},m,x),new h(v,x).execute()}b.exports=d},function(b,u,a){var o=a(6);function l(t,s){var h=0;return t.children.length?t.children.forEach(function(m){h+=l(m,s)}):h=t.height,t._subTreeSep=s.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,h)+2*t._subTreeSep,t.totalHeight}function r(t){var s=t.children,h=s.length;if(h){s.forEach(function(F){r(F)});var m=s[0],d=s[h-1],v=d.y-m.y+d.height,x=0;if(s.forEach(function(F){x+=F.totalHeight}),v>t.height)t.y=m.y+v/2-t.height/2;else if(s.length!==1||t.height>x){var N=t.y+(t.height-v)/2-m.y;s.forEach(function(F){F.translate(0,N)})}else t.y=(m.y+m.height/2+d.y+d.height/2)/2-t.height/2}}var e={getSubTreeSep:function(){return 0}};b.exports=function(t,s){s===void 0&&(s={}),s=o.assign({},e,s),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(h){h.x=h.parent.x+h.parent.width}),t.parent=null,l(t,s),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(h){var m=h.children,d=m.length;if(d){var v=m[0];if(v.startY=h.startY+h._subTreeSep,d===1)v.y=h.y+h.height/2-v.height/2;else{v.y=v.startY+v.totalHeight/2-v.height/2;for(var x=1;x<d;x++){var N=m[x];N.startY=m[x-1].startY+m[x-1].totalHeight,N.y=N.startY+N.totalHeight/2-N.height/2}}}}),r(t)}}])})},6928:function(T,b,u){"use strict";u.r(b),u.d(b,{ext:function(){return r},mat3:function(){return a},vec2:function(){return o},vec3:function(){return l}});var a={};u.r(a),u.d(a,{add:function(){return Ge},adjoint:function(){return z},clone:function(){return F},copy:function(){return ae},create:function(){return x},determinant:function(){return ee},equals:function(){return At},exactEquals:function(){return Gt},frob:function(){return Le},fromMat2d:function(){return se},fromMat4:function(){return N},fromQuat:function(){return Ee},fromRotation:function(){return j},fromScaling:function(){return ue},fromTranslation:function(){return I},fromValues:function(){return $},identity:function(){return fe},invert:function(){return he},mul:function(){return vt},multiply:function(){return pe},multiplyScalar:function(){return Et},multiplyScalarAndAdd:function(){return Ct},normalFromMat4:function(){return Ce},projection:function(){return xe},rotate:function(){return q},scale:function(){return M},set:function(){return te},str:function(){return Oe},sub:function(){return cn},subtract:function(){return He},translate:function(){return S},transpose:function(){return B}});var o={};u.r(o),u.d(o,{add:function(){return Ei},angle:function(){return cr},ceil:function(){return Pi},clone:function(){return Bn},copy:function(){return ir},create:function(){return hn},cross:function(){return xt},dist:function(){return wo},distance:function(){return Tt},div:function(){return wi},divide:function(){return fr},dot:function(){return jt},equals:function(){return Ui},exactEquals:function(){return kr},floor:function(){return Li},forEach:function(){return hs},fromValues:function(){return Fn},inverse:function(){return Wt},len:function(){return Wr},length:function(){return ce},lerp:function(){return $t},max:function(){return $e},min:function(){return zn},mul:function(){return uo},multiply:function(){return Ot},negate:function(){return Ze},normalize:function(){return Ut},random:function(){return Un},rotate:function(){return Pr},round:function(){return Xt},scale:function(){return Rt},scaleAndAdd:function(){return _t},set:function(){return Nr},sqrDist:function(){return fs},sqrLen:function(){return zo},squaredDistance:function(){return at},squaredLength:function(){return ut},str:function(){return Vr},sub:function(){return no},subtract:function(){return ci},transformMat2:function(){return qn},transformMat2d:function(){return rr},transformMat3:function(){return xn},transformMat4:function(){return Or},zero:function(){return ki}});var l={};u.r(l),u.d(l,{add:function(){return ot},angle:function(){return lt},bezier:function(){return Ne},ceil:function(){return Q},clone:function(){return rs},copy:function(){return Xs},create:function(){return ks},cross:function(){return Xn},dist:function(){return Pn},distance:function(){return bn},div:function(){return xi},divide:function(){return Z},dot:function(){return Mn},equals:function(){return er},exactEquals:function(){return Gn},floor:function(){return le},forEach:function(){return Jr},fromValues:function(){return Qo},hermite:function(){return Re},inverse:function(){return ii},len:function(){return Rr},length:function(){return Eo},lerp:function(){return $r},max:function(){return dt},min:function(){return Xe},mul:function(){return qr},multiply:function(){return _e},negate:function(){return tr},normalize:function(){return Zi},random:function(){return Te},rotateX:function(){return Ye},rotateY:function(){return ct},rotateZ:function(){return nt},round:function(){return ft},scale:function(){return gt},scaleAndAdd:function(){return ln},set:function(){return Ys},sqrDist:function(){return $n},sqrLen:function(){return Di},squaredDistance:function(){return En},squaredLength:function(){return Cr},str:function(){return on},sub:function(){return Kn},subtract:function(){return mt},transformMat3:function(){return Y},transformMat4:function(){return U},transformQuat:function(){return ge},zero:function(){return fn}});var r={};u.r(r),u.d(r,{angleTo:function(){return li},direction:function(){return cs},leftRotate:function(){return Vo},leftScale:function(){return lo},leftTranslate:function(){return $o},transform:function(){return Ho},vertical:function(){return xs}});var e=1e-6,t=typeof Float32Array!="undefined"?Float32Array:Array,s=Math.random;function h(Ae){t=Ae}var m=Math.PI/180;function d(Ae){return Ae*m}function v(Ae,Ke){return Math.abs(Ae-Ke)<=e*Math.max(1,Math.abs(Ae),Math.abs(Ke))}Math.hypot||(Math.hypot=function(){for(var Ae=0,Ke=arguments.length;Ke--;)Ae+=arguments[Ke]*arguments[Ke];return Math.sqrt(Ae)});function x(){var Ae=new t(9);return t!=Float32Array&&(Ae[1]=0,Ae[2]=0,Ae[3]=0,Ae[5]=0,Ae[6]=0,Ae[7]=0),Ae[0]=1,Ae[4]=1,Ae[8]=1,Ae}function N(Ae,Ke){return Ae[0]=Ke[0],Ae[1]=Ke[1],Ae[2]=Ke[2],Ae[3]=Ke[4],Ae[4]=Ke[5],Ae[5]=Ke[6],Ae[6]=Ke[8],Ae[7]=Ke[9],Ae[8]=Ke[10],Ae}function F(Ae){var Ke=new t(9);return Ke[0]=Ae[0],Ke[1]=Ae[1],Ke[2]=Ae[2],Ke[3]=Ae[3],Ke[4]=Ae[4],Ke[5]=Ae[5],Ke[6]=Ae[6],Ke[7]=Ae[7],Ke[8]=Ae[8],Ke}function ae(Ae,Ke){return Ae[0]=Ke[0],Ae[1]=Ke[1],Ae[2]=Ke[2],Ae[3]=Ke[3],Ae[4]=Ke[4],Ae[5]=Ke[5],Ae[6]=Ke[6],Ae[7]=Ke[7],Ae[8]=Ke[8],Ae}function $(Ae,Ke,pt,Ht,an,Ln,wr,yr,ei){var Ii=new t(9);return Ii[0]=Ae,Ii[1]=Ke,Ii[2]=pt,Ii[3]=Ht,Ii[4]=an,Ii[5]=Ln,Ii[6]=wr,Ii[7]=yr,Ii[8]=ei,Ii}function te(Ae,Ke,pt,Ht,an,Ln,wr,yr,ei,Ii){return Ae[0]=Ke,Ae[1]=pt,Ae[2]=Ht,Ae[3]=an,Ae[4]=Ln,Ae[5]=wr,Ae[6]=yr,Ae[7]=ei,Ae[8]=Ii,Ae}function fe(Ae){return Ae[0]=1,Ae[1]=0,Ae[2]=0,Ae[3]=0,Ae[4]=1,Ae[5]=0,Ae[6]=0,Ae[7]=0,Ae[8]=1,Ae}function B(Ae,Ke){if(Ae===Ke){var pt=Ke[1],Ht=Ke[2],an=Ke[5];Ae[1]=Ke[3],Ae[2]=Ke[6],Ae[3]=pt,Ae[5]=Ke[7],Ae[6]=Ht,Ae[7]=an}else Ae[0]=Ke[0],Ae[1]=Ke[3],Ae[2]=Ke[6],Ae[3]=Ke[1],Ae[4]=Ke[4],Ae[5]=Ke[7],Ae[6]=Ke[2],Ae[7]=Ke[5],Ae[8]=Ke[8];return Ae}function he(Ae,Ke){var pt=Ke[0],Ht=Ke[1],an=Ke[2],Ln=Ke[3],wr=Ke[4],yr=Ke[5],ei=Ke[6],Ii=Ke[7],to=Ke[8],Ji=to*wr-yr*Ii,Yi=-to*Ln+yr*ei,Uo=Ii*Ln-wr*ei,Oi=pt*Ji+Ht*Yi+an*Uo;return Oi?(Oi=1/Oi,Ae[0]=Ji*Oi,Ae[1]=(-to*Ht+an*Ii)*Oi,Ae[2]=(yr*Ht-an*wr)*Oi,Ae[3]=Yi*Oi,Ae[4]=(to*pt-an*ei)*Oi,Ae[5]=(-yr*pt+an*Ln)*Oi,Ae[6]=Uo*Oi,Ae[7]=(-Ii*pt+Ht*ei)*Oi,Ae[8]=(wr*pt-Ht*Ln)*Oi,Ae):null}function z(Ae,Ke){var pt=Ke[0],Ht=Ke[1],an=Ke[2],Ln=Ke[3],wr=Ke[4],yr=Ke[5],ei=Ke[6],Ii=Ke[7],to=Ke[8];return Ae[0]=wr*to-yr*Ii,Ae[1]=an*Ii-Ht*to,Ae[2]=Ht*yr-an*wr,Ae[3]=yr*ei-Ln*to,Ae[4]=pt*to-an*ei,Ae[5]=an*Ln-pt*yr,Ae[6]=Ln*Ii-wr*ei,Ae[7]=Ht*ei-pt*Ii,Ae[8]=pt*wr-Ht*Ln,Ae}function ee(Ae){var Ke=Ae[0],pt=Ae[1],Ht=Ae[2],an=Ae[3],Ln=Ae[4],wr=Ae[5],yr=Ae[6],ei=Ae[7],Ii=Ae[8];return Ke*(Ii*Ln-wr*ei)+pt*(-Ii*an+wr*yr)+Ht*(ei*an-Ln*yr)}function pe(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1],Ln=Ke[2],wr=Ke[3],yr=Ke[4],ei=Ke[5],Ii=Ke[6],to=Ke[7],Ji=Ke[8],Yi=pt[0],Uo=pt[1],Oi=pt[2],Co=pt[3],Fs=pt[4],ss=pt[5],qo=pt[6],js=pt[7],Zs=pt[8];return Ae[0]=Yi*Ht+Uo*wr+Oi*Ii,Ae[1]=Yi*an+Uo*yr+Oi*to,Ae[2]=Yi*Ln+Uo*ei+Oi*Ji,Ae[3]=Co*Ht+Fs*wr+ss*Ii,Ae[4]=Co*an+Fs*yr+ss*to,Ae[5]=Co*Ln+Fs*ei+ss*Ji,Ae[6]=qo*Ht+js*wr+Zs*Ii,Ae[7]=qo*an+js*yr+Zs*to,Ae[8]=qo*Ln+js*ei+Zs*Ji,Ae}function S(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1],Ln=Ke[2],wr=Ke[3],yr=Ke[4],ei=Ke[5],Ii=Ke[6],to=Ke[7],Ji=Ke[8],Yi=pt[0],Uo=pt[1];return Ae[0]=Ht,Ae[1]=an,Ae[2]=Ln,Ae[3]=wr,Ae[4]=yr,Ae[5]=ei,Ae[6]=Yi*Ht+Uo*wr+Ii,Ae[7]=Yi*an+Uo*yr+to,Ae[8]=Yi*Ln+Uo*ei+Ji,Ae}function q(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1],Ln=Ke[2],wr=Ke[3],yr=Ke[4],ei=Ke[5],Ii=Ke[6],to=Ke[7],Ji=Ke[8],Yi=Math.sin(pt),Uo=Math.cos(pt);return Ae[0]=Uo*Ht+Yi*wr,Ae[1]=Uo*an+Yi*yr,Ae[2]=Uo*Ln+Yi*ei,Ae[3]=Uo*wr-Yi*Ht,Ae[4]=Uo*yr-Yi*an,Ae[5]=Uo*ei-Yi*Ln,Ae[6]=Ii,Ae[7]=to,Ae[8]=Ji,Ae}function M(Ae,Ke,pt){var Ht=pt[0],an=pt[1];return Ae[0]=Ht*Ke[0],Ae[1]=Ht*Ke[1],Ae[2]=Ht*Ke[2],Ae[3]=an*Ke[3],Ae[4]=an*Ke[4],Ae[5]=an*Ke[5],Ae[6]=Ke[6],Ae[7]=Ke[7],Ae[8]=Ke[8],Ae}function I(Ae,Ke){return Ae[0]=1,Ae[1]=0,Ae[2]=0,Ae[3]=0,Ae[4]=1,Ae[5]=0,Ae[6]=Ke[0],Ae[7]=Ke[1],Ae[8]=1,Ae}function j(Ae,Ke){var pt=Math.sin(Ke),Ht=Math.cos(Ke);return Ae[0]=Ht,Ae[1]=pt,Ae[2]=0,Ae[3]=-pt,Ae[4]=Ht,Ae[5]=0,Ae[6]=0,Ae[7]=0,Ae[8]=1,Ae}function ue(Ae,Ke){return Ae[0]=Ke[0],Ae[1]=0,Ae[2]=0,Ae[3]=0,Ae[4]=Ke[1],Ae[5]=0,Ae[6]=0,Ae[7]=0,Ae[8]=1,Ae}function se(Ae,Ke){return Ae[0]=Ke[0],Ae[1]=Ke[1],Ae[2]=0,Ae[3]=Ke[2],Ae[4]=Ke[3],Ae[5]=0,Ae[6]=Ke[4],Ae[7]=Ke[5],Ae[8]=1,Ae}function Ee(Ae,Ke){var pt=Ke[0],Ht=Ke[1],an=Ke[2],Ln=Ke[3],wr=pt+pt,yr=Ht+Ht,ei=an+an,Ii=pt*wr,to=Ht*wr,Ji=Ht*yr,Yi=an*wr,Uo=an*yr,Oi=an*ei,Co=Ln*wr,Fs=Ln*yr,ss=Ln*ei;return Ae[0]=1-Ji-Oi,Ae[3]=to-ss,Ae[6]=Yi+Fs,Ae[1]=to+ss,Ae[4]=1-Ii-Oi,Ae[7]=Uo-Co,Ae[2]=Yi-Fs,Ae[5]=Uo+Co,Ae[8]=1-Ii-Ji,Ae}function Ce(Ae,Ke){var pt=Ke[0],Ht=Ke[1],an=Ke[2],Ln=Ke[3],wr=Ke[4],yr=Ke[5],ei=Ke[6],Ii=Ke[7],to=Ke[8],Ji=Ke[9],Yi=Ke[10],Uo=Ke[11],Oi=Ke[12],Co=Ke[13],Fs=Ke[14],ss=Ke[15],qo=pt*yr-Ht*wr,js=pt*ei-an*wr,Zs=pt*Ii-Ln*wr,Mo=Ht*ei-an*yr,la=Ht*Ii-Ln*yr,X=an*Ii-Ln*ei,ve=to*Co-Ji*Oi,Ie=to*Fs-Yi*Oi,ke=to*ss-Uo*Oi,st=Ji*Fs-Yi*Co,P=Ji*ss-Uo*Co,W=Yi*ss-Uo*Fs,ye=qo*W-js*P+Zs*st+Mo*ke-la*Ie+X*ve;return ye?(ye=1/ye,Ae[0]=(yr*W-ei*P+Ii*st)*ye,Ae[1]=(ei*ke-wr*W-Ii*Ie)*ye,Ae[2]=(wr*P-yr*ke+Ii*ve)*ye,Ae[3]=(an*P-Ht*W-Ln*st)*ye,Ae[4]=(pt*W-an*ke+Ln*Ie)*ye,Ae[5]=(Ht*ke-pt*P-Ln*ve)*ye,Ae[6]=(Co*X-Fs*la+ss*Mo)*ye,Ae[7]=(Fs*Zs-Oi*X-ss*js)*ye,Ae[8]=(Oi*la-Co*Zs+ss*qo)*ye,Ae):null}function xe(Ae,Ke,pt){return Ae[0]=2/Ke,Ae[1]=0,Ae[2]=0,Ae[3]=0,Ae[4]=-2/pt,Ae[5]=0,Ae[6]=-1,Ae[7]=1,Ae[8]=1,Ae}function Oe(Ae){return"mat3("+Ae[0]+", "+Ae[1]+", "+Ae[2]+", "+Ae[3]+", "+Ae[4]+", "+Ae[5]+", "+Ae[6]+", "+Ae[7]+", "+Ae[8]+")"}function Le(Ae){return Math.hypot(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],Ae[6],Ae[7],Ae[8])}function Ge(Ae,Ke,pt){return Ae[0]=Ke[0]+pt[0],Ae[1]=Ke[1]+pt[1],Ae[2]=Ke[2]+pt[2],Ae[3]=Ke[3]+pt[3],Ae[4]=Ke[4]+pt[4],Ae[5]=Ke[5]+pt[5],Ae[6]=Ke[6]+pt[6],Ae[7]=Ke[7]+pt[7],Ae[8]=Ke[8]+pt[8],Ae}function He(Ae,Ke,pt){return Ae[0]=Ke[0]-pt[0],Ae[1]=Ke[1]-pt[1],Ae[2]=Ke[2]-pt[2],Ae[3]=Ke[3]-pt[3],Ae[4]=Ke[4]-pt[4],Ae[5]=Ke[5]-pt[5],Ae[6]=Ke[6]-pt[6],Ae[7]=Ke[7]-pt[7],Ae[8]=Ke[8]-pt[8],Ae}function Et(Ae,Ke,pt){return Ae[0]=Ke[0]*pt,Ae[1]=Ke[1]*pt,Ae[2]=Ke[2]*pt,Ae[3]=Ke[3]*pt,Ae[4]=Ke[4]*pt,Ae[5]=Ke[5]*pt,Ae[6]=Ke[6]*pt,Ae[7]=Ke[7]*pt,Ae[8]=Ke[8]*pt,Ae}function Ct(Ae,Ke,pt,Ht){return Ae[0]=Ke[0]+pt[0]*Ht,Ae[1]=Ke[1]+pt[1]*Ht,Ae[2]=Ke[2]+pt[2]*Ht,Ae[3]=Ke[3]+pt[3]*Ht,Ae[4]=Ke[4]+pt[4]*Ht,Ae[5]=Ke[5]+pt[5]*Ht,Ae[6]=Ke[6]+pt[6]*Ht,Ae[7]=Ke[7]+pt[7]*Ht,Ae[8]=Ke[8]+pt[8]*Ht,Ae}function Gt(Ae,Ke){return Ae[0]===Ke[0]&&Ae[1]===Ke[1]&&Ae[2]===Ke[2]&&Ae[3]===Ke[3]&&Ae[4]===Ke[4]&&Ae[5]===Ke[5]&&Ae[6]===Ke[6]&&Ae[7]===Ke[7]&&Ae[8]===Ke[8]}function At(Ae,Ke){var pt=Ae[0],Ht=Ae[1],an=Ae[2],Ln=Ae[3],wr=Ae[4],yr=Ae[5],ei=Ae[6],Ii=Ae[7],to=Ae[8],Ji=Ke[0],Yi=Ke[1],Uo=Ke[2],Oi=Ke[3],Co=Ke[4],Fs=Ke[5],ss=Ke[6],qo=Ke[7],js=Ke[8];return Math.abs(pt-Ji)<=e*Math.max(1,Math.abs(pt),Math.abs(Ji))&&Math.abs(Ht-Yi)<=e*Math.max(1,Math.abs(Ht),Math.abs(Yi))&&Math.abs(an-Uo)<=e*Math.max(1,Math.abs(an),Math.abs(Uo))&&Math.abs(Ln-Oi)<=e*Math.max(1,Math.abs(Ln),Math.abs(Oi))&&Math.abs(wr-Co)<=e*Math.max(1,Math.abs(wr),Math.abs(Co))&&Math.abs(yr-Fs)<=e*Math.max(1,Math.abs(yr),Math.abs(Fs))&&Math.abs(ei-ss)<=e*Math.max(1,Math.abs(ei),Math.abs(ss))&&Math.abs(Ii-qo)<=e*Math.max(1,Math.abs(Ii),Math.abs(qo))&&Math.abs(to-js)<=e*Math.max(1,Math.abs(to),Math.abs(js))}var vt=pe,cn=He;function hn(){var Ae=new t(2);return t!=Float32Array&&(Ae[0]=0,Ae[1]=0),Ae}function Bn(Ae){var Ke=new t(2);return Ke[0]=Ae[0],Ke[1]=Ae[1],Ke}function Fn(Ae,Ke){var pt=new t(2);return pt[0]=Ae,pt[1]=Ke,pt}function ir(Ae,Ke){return Ae[0]=Ke[0],Ae[1]=Ke[1],Ae}function Nr(Ae,Ke,pt){return Ae[0]=Ke,Ae[1]=pt,Ae}function Ei(Ae,Ke,pt){return Ae[0]=Ke[0]+pt[0],Ae[1]=Ke[1]+pt[1],Ae}function ci(Ae,Ke,pt){return Ae[0]=Ke[0]-pt[0],Ae[1]=Ke[1]-pt[1],Ae}function Ot(Ae,Ke,pt){return Ae[0]=Ke[0]*pt[0],Ae[1]=Ke[1]*pt[1],Ae}function fr(Ae,Ke,pt){return Ae[0]=Ke[0]/pt[0],Ae[1]=Ke[1]/pt[1],Ae}function Pi(Ae,Ke){return Ae[0]=Math.ceil(Ke[0]),Ae[1]=Math.ceil(Ke[1]),Ae}function Li(Ae,Ke){return Ae[0]=Math.floor(Ke[0]),Ae[1]=Math.floor(Ke[1]),Ae}function zn(Ae,Ke,pt){return Ae[0]=Math.min(Ke[0],pt[0]),Ae[1]=Math.min(Ke[1],pt[1]),Ae}function $e(Ae,Ke,pt){return Ae[0]=Math.max(Ke[0],pt[0]),Ae[1]=Math.max(Ke[1],pt[1]),Ae}function Xt(Ae,Ke){return Ae[0]=Math.round(Ke[0]),Ae[1]=Math.round(Ke[1]),Ae}function Rt(Ae,Ke,pt){return Ae[0]=Ke[0]*pt,Ae[1]=Ke[1]*pt,Ae}function _t(Ae,Ke,pt,Ht){return Ae[0]=Ke[0]+pt[0]*Ht,Ae[1]=Ke[1]+pt[1]*Ht,Ae}function Tt(Ae,Ke){var pt=Ke[0]-Ae[0],Ht=Ke[1]-Ae[1];return Math.hypot(pt,Ht)}function at(Ae,Ke){var pt=Ke[0]-Ae[0],Ht=Ke[1]-Ae[1];return pt*pt+Ht*Ht}function ce(Ae){var Ke=Ae[0],pt=Ae[1];return Math.hypot(Ke,pt)}function ut(Ae){var Ke=Ae[0],pt=Ae[1];return Ke*Ke+pt*pt}function Ze(Ae,Ke){return Ae[0]=-Ke[0],Ae[1]=-Ke[1],Ae}function Wt(Ae,Ke){return Ae[0]=1/Ke[0],Ae[1]=1/Ke[1],Ae}function Ut(Ae,Ke){var pt=Ke[0],Ht=Ke[1],an=pt*pt+Ht*Ht;return an>0&&(an=1/Math.sqrt(an)),Ae[0]=Ke[0]*an,Ae[1]=Ke[1]*an,Ae}function jt(Ae,Ke){return Ae[0]*Ke[0]+Ae[1]*Ke[1]}function xt(Ae,Ke,pt){var Ht=Ke[0]*pt[1]-Ke[1]*pt[0];return Ae[0]=Ae[1]=0,Ae[2]=Ht,Ae}function $t(Ae,Ke,pt,Ht){var an=Ke[0],Ln=Ke[1];return Ae[0]=an+Ht*(pt[0]-an),Ae[1]=Ln+Ht*(pt[1]-Ln),Ae}function Un(Ae,Ke){Ke=Ke||1;var pt=s()*2*Math.PI;return Ae[0]=Math.cos(pt)*Ke,Ae[1]=Math.sin(pt)*Ke,Ae}function qn(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1];return Ae[0]=pt[0]*Ht+pt[2]*an,Ae[1]=pt[1]*Ht+pt[3]*an,Ae}function rr(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1];return Ae[0]=pt[0]*Ht+pt[2]*an+pt[4],Ae[1]=pt[1]*Ht+pt[3]*an+pt[5],Ae}function xn(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1];return Ae[0]=pt[0]*Ht+pt[3]*an+pt[6],Ae[1]=pt[1]*Ht+pt[4]*an+pt[7],Ae}function Or(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1];return Ae[0]=pt[0]*Ht+pt[4]*an+pt[12],Ae[1]=pt[1]*Ht+pt[5]*an+pt[13],Ae}function Pr(Ae,Ke,pt,Ht){var an=Ke[0]-pt[0],Ln=Ke[1]-pt[1],wr=Math.sin(Ht),yr=Math.cos(Ht);return Ae[0]=an*yr-Ln*wr+pt[0],Ae[1]=an*wr+Ln*yr+pt[1],Ae}function cr(Ae,Ke){var pt=Ae[0],Ht=Ae[1],an=Ke[0],Ln=Ke[1],wr=Math.sqrt(pt*pt+Ht*Ht)*Math.sqrt(an*an+Ln*Ln),yr=wr&&(pt*an+Ht*Ln)/wr;return Math.acos(Math.min(Math.max(yr,-1),1))}function ki(Ae){return Ae[0]=0,Ae[1]=0,Ae}function Vr(Ae){return"vec2("+Ae[0]+", "+Ae[1]+")"}function kr(Ae,Ke){return Ae[0]===Ke[0]&&Ae[1]===Ke[1]}function Ui(Ae,Ke){var pt=Ae[0],Ht=Ae[1],an=Ke[0],Ln=Ke[1];return Math.abs(pt-an)<=e*Math.max(1,Math.abs(pt),Math.abs(an))&&Math.abs(Ht-Ln)<=e*Math.max(1,Math.abs(Ht),Math.abs(Ln))}var Wr=ce,no=ci,uo=Ot,wi=fr,wo=Tt,fs=at,zo=ut,hs=function(){var Ae=hn();return function(Ke,pt,Ht,an,Ln,wr){var yr,ei;for(pt||(pt=2),Ht||(Ht=0),an?ei=Math.min(an*pt+Ht,Ke.length):ei=Ke.length,yr=Ht;yr<ei;yr+=pt)Ae[0]=Ke[yr],Ae[1]=Ke[yr+1],Ln(Ae,Ae,wr),Ke[yr]=Ae[0],Ke[yr+1]=Ae[1];return Ke}}();function ks(){var Ae=new t(3);return t!=Float32Array&&(Ae[0]=0,Ae[1]=0,Ae[2]=0),Ae}function rs(Ae){var Ke=new t(3);return Ke[0]=Ae[0],Ke[1]=Ae[1],Ke[2]=Ae[2],Ke}function Eo(Ae){var Ke=Ae[0],pt=Ae[1],Ht=Ae[2];return Math.hypot(Ke,pt,Ht)}function Qo(Ae,Ke,pt){var Ht=new t(3);return Ht[0]=Ae,Ht[1]=Ke,Ht[2]=pt,Ht}function Xs(Ae,Ke){return Ae[0]=Ke[0],Ae[1]=Ke[1],Ae[2]=Ke[2],Ae}function Ys(Ae,Ke,pt,Ht){return Ae[0]=Ke,Ae[1]=pt,Ae[2]=Ht,Ae}function ot(Ae,Ke,pt){return Ae[0]=Ke[0]+pt[0],Ae[1]=Ke[1]+pt[1],Ae[2]=Ke[2]+pt[2],Ae}function mt(Ae,Ke,pt){return Ae[0]=Ke[0]-pt[0],Ae[1]=Ke[1]-pt[1],Ae[2]=Ke[2]-pt[2],Ae}function _e(Ae,Ke,pt){return Ae[0]=Ke[0]*pt[0],Ae[1]=Ke[1]*pt[1],Ae[2]=Ke[2]*pt[2],Ae}function Z(Ae,Ke,pt){return Ae[0]=Ke[0]/pt[0],Ae[1]=Ke[1]/pt[1],Ae[2]=Ke[2]/pt[2],Ae}function Q(Ae,Ke){return Ae[0]=Math.ceil(Ke[0]),Ae[1]=Math.ceil(Ke[1]),Ae[2]=Math.ceil(Ke[2]),Ae}function le(Ae,Ke){return Ae[0]=Math.floor(Ke[0]),Ae[1]=Math.floor(Ke[1]),Ae[2]=Math.floor(Ke[2]),Ae}function Xe(Ae,Ke,pt){return Ae[0]=Math.min(Ke[0],pt[0]),Ae[1]=Math.min(Ke[1],pt[1]),Ae[2]=Math.min(Ke[2],pt[2]),Ae}function dt(Ae,Ke,pt){return Ae[0]=Math.max(Ke[0],pt[0]),Ae[1]=Math.max(Ke[1],pt[1]),Ae[2]=Math.max(Ke[2],pt[2]),Ae}function ft(Ae,Ke){return Ae[0]=Math.round(Ke[0]),Ae[1]=Math.round(Ke[1]),Ae[2]=Math.round(Ke[2]),Ae}function gt(Ae,Ke,pt){return Ae[0]=Ke[0]*pt,Ae[1]=Ke[1]*pt,Ae[2]=Ke[2]*pt,Ae}function ln(Ae,Ke,pt,Ht){return Ae[0]=Ke[0]+pt[0]*Ht,Ae[1]=Ke[1]+pt[1]*Ht,Ae[2]=Ke[2]+pt[2]*Ht,Ae}function bn(Ae,Ke){var pt=Ke[0]-Ae[0],Ht=Ke[1]-Ae[1],an=Ke[2]-Ae[2];return Math.hypot(pt,Ht,an)}function En(Ae,Ke){var pt=Ke[0]-Ae[0],Ht=Ke[1]-Ae[1],an=Ke[2]-Ae[2];return pt*pt+Ht*Ht+an*an}function Cr(Ae){var Ke=Ae[0],pt=Ae[1],Ht=Ae[2];return Ke*Ke+pt*pt+Ht*Ht}function tr(Ae,Ke){return Ae[0]=-Ke[0],Ae[1]=-Ke[1],Ae[2]=-Ke[2],Ae}function ii(Ae,Ke){return Ae[0]=1/Ke[0],Ae[1]=1/Ke[1],Ae[2]=1/Ke[2],Ae}function Zi(Ae,Ke){var pt=Ke[0],Ht=Ke[1],an=Ke[2],Ln=pt*pt+Ht*Ht+an*an;return Ln>0&&(Ln=1/Math.sqrt(Ln)),Ae[0]=Ke[0]*Ln,Ae[1]=Ke[1]*Ln,Ae[2]=Ke[2]*Ln,Ae}function Mn(Ae,Ke){return Ae[0]*Ke[0]+Ae[1]*Ke[1]+Ae[2]*Ke[2]}function Xn(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1],Ln=Ke[2],wr=pt[0],yr=pt[1],ei=pt[2];return Ae[0]=an*ei-Ln*yr,Ae[1]=Ln*wr-Ht*ei,Ae[2]=Ht*yr-an*wr,Ae}function $r(Ae,Ke,pt,Ht){var an=Ke[0],Ln=Ke[1],wr=Ke[2];return Ae[0]=an+Ht*(pt[0]-an),Ae[1]=Ln+Ht*(pt[1]-Ln),Ae[2]=wr+Ht*(pt[2]-wr),Ae}function Re(Ae,Ke,pt,Ht,an,Ln){var wr=Ln*Ln,yr=wr*(2*Ln-3)+1,ei=wr*(Ln-2)+Ln,Ii=wr*(Ln-1),to=wr*(3-2*Ln);return Ae[0]=Ke[0]*yr+pt[0]*ei+Ht[0]*Ii+an[0]*to,Ae[1]=Ke[1]*yr+pt[1]*ei+Ht[1]*Ii+an[1]*to,Ae[2]=Ke[2]*yr+pt[2]*ei+Ht[2]*Ii+an[2]*to,Ae}function Ne(Ae,Ke,pt,Ht,an,Ln){var wr=1-Ln,yr=wr*wr,ei=Ln*Ln,Ii=yr*wr,to=3*Ln*yr,Ji=3*ei*wr,Yi=ei*Ln;return Ae[0]=Ke[0]*Ii+pt[0]*to+Ht[0]*Ji+an[0]*Yi,Ae[1]=Ke[1]*Ii+pt[1]*to+Ht[1]*Ji+an[1]*Yi,Ae[2]=Ke[2]*Ii+pt[2]*to+Ht[2]*Ji+an[2]*Yi,Ae}function Te(Ae,Ke){Ke=Ke||1;var pt=s()*2*Math.PI,Ht=s()*2-1,an=Math.sqrt(1-Ht*Ht)*Ke;return Ae[0]=Math.cos(pt)*an,Ae[1]=Math.sin(pt)*an,Ae[2]=Ht*Ke,Ae}function U(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1],Ln=Ke[2],wr=pt[3]*Ht+pt[7]*an+pt[11]*Ln+pt[15];return wr=wr||1,Ae[0]=(pt[0]*Ht+pt[4]*an+pt[8]*Ln+pt[12])/wr,Ae[1]=(pt[1]*Ht+pt[5]*an+pt[9]*Ln+pt[13])/wr,Ae[2]=(pt[2]*Ht+pt[6]*an+pt[10]*Ln+pt[14])/wr,Ae}function Y(Ae,Ke,pt){var Ht=Ke[0],an=Ke[1],Ln=Ke[2];return Ae[0]=Ht*pt[0]+an*pt[3]+Ln*pt[6],Ae[1]=Ht*pt[1]+an*pt[4]+Ln*pt[7],Ae[2]=Ht*pt[2]+an*pt[5]+Ln*pt[8],Ae}function ge(Ae,Ke,pt){var Ht=pt[0],an=pt[1],Ln=pt[2],wr=pt[3],yr=Ke[0],ei=Ke[1],Ii=Ke[2],to=an*Ii-Ln*ei,Ji=Ln*yr-Ht*Ii,Yi=Ht*ei-an*yr,Uo=an*Yi-Ln*Ji,Oi=Ln*to-Ht*Yi,Co=Ht*Ji-an*to,Fs=wr*2;return to*=Fs,Ji*=Fs,Yi*=Fs,Uo*=2,Oi*=2,Co*=2,Ae[0]=yr+to+Uo,Ae[1]=ei+Ji+Oi,Ae[2]=Ii+Yi+Co,Ae}function Ye(Ae,Ke,pt,Ht){var an=[],Ln=[];return an[0]=Ke[0]-pt[0],an[1]=Ke[1]-pt[1],an[2]=Ke[2]-pt[2],Ln[0]=an[0],Ln[1]=an[1]*Math.cos(Ht)-an[2]*Math.sin(Ht),Ln[2]=an[1]*Math.sin(Ht)+an[2]*Math.cos(Ht),Ae[0]=Ln[0]+pt[0],Ae[1]=Ln[1]+pt[1],Ae[2]=Ln[2]+pt[2],Ae}function ct(Ae,Ke,pt,Ht){var an=[],Ln=[];return an[0]=Ke[0]-pt[0],an[1]=Ke[1]-pt[1],an[2]=Ke[2]-pt[2],Ln[0]=an[2]*Math.sin(Ht)+an[0]*Math.cos(Ht),Ln[1]=an[1],Ln[2]=an[2]*Math.cos(Ht)-an[0]*Math.sin(Ht),Ae[0]=Ln[0]+pt[0],Ae[1]=Ln[1]+pt[1],Ae[2]=Ln[2]+pt[2],Ae}function nt(Ae,Ke,pt,Ht){var an=[],Ln=[];return an[0]=Ke[0]-pt[0],an[1]=Ke[1]-pt[1],an[2]=Ke[2]-pt[2],Ln[0]=an[0]*Math.cos(Ht)-an[1]*Math.sin(Ht),Ln[1]=an[0]*Math.sin(Ht)+an[1]*Math.cos(Ht),Ln[2]=an[2],Ae[0]=Ln[0]+pt[0],Ae[1]=Ln[1]+pt[1],Ae[2]=Ln[2]+pt[2],Ae}function lt(Ae,Ke){var pt=Ae[0],Ht=Ae[1],an=Ae[2],Ln=Ke[0],wr=Ke[1],yr=Ke[2],ei=Math.sqrt(pt*pt+Ht*Ht+an*an),Ii=Math.sqrt(Ln*Ln+wr*wr+yr*yr),to=ei*Ii,Ji=to&&Mn(Ae,Ke)/to;return Math.acos(Math.min(Math.max(Ji,-1),1))}function fn(Ae){return Ae[0]=0,Ae[1]=0,Ae[2]=0,Ae}function on(Ae){return"vec3("+Ae[0]+", "+Ae[1]+", "+Ae[2]+")"}function Gn(Ae,Ke){return Ae[0]===Ke[0]&&Ae[1]===Ke[1]&&Ae[2]===Ke[2]}function er(Ae,Ke){var pt=Ae[0],Ht=Ae[1],an=Ae[2],Ln=Ke[0],wr=Ke[1],yr=Ke[2];return Math.abs(pt-Ln)<=e*Math.max(1,Math.abs(pt),Math.abs(Ln))&&Math.abs(Ht-wr)<=e*Math.max(1,Math.abs(Ht),Math.abs(wr))&&Math.abs(an-yr)<=e*Math.max(1,Math.abs(an),Math.abs(yr))}var Kn=mt,qr=_e,xi=Z,Pn=bn,$n=En,Rr=Eo,Di=Cr,Jr=function(){var Ae=ks();return function(Ke,pt,Ht,an,Ln,wr){var yr,ei;for(pt||(pt=3),Ht||(Ht=0),an?ei=Math.min(an*pt+Ht,Ke.length):ei=Ke.length,yr=Ht;yr<ei;yr+=pt)Ae[0]=Ke[yr],Ae[1]=Ke[yr+1],Ae[2]=Ke[yr+2],Ln(Ae,Ae,wr),Ke[yr]=Ae[0],Ke[yr+1]=Ae[1],Ke[yr+2]=Ae[2];return Ke}}();function $o(Ae,Ke,pt){var Ht=[0,0,0,0,0,0,0,0,0];return I(Ht,pt),pe(Ae,Ht,Ke)}function Vo(Ae,Ke,pt){var Ht=[0,0,0,0,0,0,0,0,0];return j(Ht,pt),pe(Ae,Ht,Ke)}function lo(Ae,Ke,pt){var Ht=[0,0,0,0,0,0,0,0,0];return ue(Ht,pt),pe(Ae,Ht,Ke)}function Xi(Ae,Ke,pt){return pe(Ae,pt,Ke)}function Ho(Ae,Ke){for(var pt=Ae?[].concat(Ae):[1,0,0,0,1,0,0,0,1],Ht=0,an=Ke.length;Ht<an;Ht++){var Ln=Ke[Ht];switch(Ln[0]){case"t":$o(pt,pt,[Ln[1],Ln[2]]);break;case"s":lo(pt,pt,[Ln[1],Ln[2]]);break;case"r":Vo(pt,pt,Ln[1]);break;case"m":Xi(pt,pt,Ln[1]);break;default:break}}return pt}function cs(Ae,Ke){return Ae[0]*Ke[1]-Ke[0]*Ae[1]}function li(Ae,Ke,pt){var Ht=cr(Ae,Ke),an=cs(Ae,Ke)>=0;return pt?an?Math.PI*2-Ht:Ht:an?Ht:Math.PI*2-Ht}function xs(Ae,Ke,pt){return pt?(Ae[0]=Ke[1],Ae[1]=-1*Ke[0]):(Ae[0]=-1*Ke[1],Ae[1]=Ke[0]),Ae}},262:function(T,b,u){"use strict";var a=u(1377),o=pe(a),l=u(627),r=pe(l),e=u(5397),t=pe(e),s=u(3952),h=pe(s),m=u(5268),d=pe(m),v=u(7305),x=pe(v),N=u(5340),F=pe(N),ae=u(6796),$=pe(ae),te=u(9507),fe=pe(te),B=u(9962),he=pe(B),z=u(1172),ee=pe(z);u(9253);function pe(M){return M&&M.__esModule?M:{default:M}}var S=u(9392),q={Canvas:o.default,TreeCanvas:r.default,Edge:t.default,Endpoint:h.default,Group:d.default,Node:x.default,TreeNode:F.default,Minimap:$.default,Tips:fe.default,Layout:he.default,Arrow:ee.default};window.Butterfly=q,T.exports=q},2958:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var u={value:function(){}};function a(){for(var t=0,s=arguments.length,h={},m;t<s;++t){if(!(m=arguments[t]+"")||m in h||/[\s.]/.test(m))throw new Error("illegal type: "+m);h[m]=[]}return new o(h)}function o(t){this._=t}function l(t,s){return t.trim().split(/^|\s+/).map(function(h){var m="",d=h.indexOf(".");if(d>=0&&(m=h.slice(d+1),h=h.slice(0,d)),h&&!s.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:m}})}o.prototype=a.prototype={constructor:o,on:function(s,h){var m=this._,d=l(s+"",m),v,x=-1,N=d.length;if(arguments.length<2){for(;++x<N;)if((v=(s=d[x]).type)&&(v=r(m[v],s.name)))return v;return}if(h!=null&&typeof h!="function")throw new Error("invalid callback: "+h);for(;++x<N;)if(v=(s=d[x]).type)m[v]=e(m[v],s.name,h);else if(h==null)for(v in m)m[v]=e(m[v],s.name,null);return this},copy:function(){var s={},h=this._;for(var m in h)s[m]=h[m].slice();return new o(s)},call:function(s,h){if((v=arguments.length-2)>0)for(var m=new Array(v),d=0,v,x;d<v;++d)m[d]=arguments[d+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(x=this._[s],d=0,v=x.length;d<v;++d)x[d].value.apply(h,m)},apply:function(s,h,m){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var d=this._[s],v=0,x=d.length;v<x;++v)d[v].value.apply(h,m)}};function r(t,s){for(var h=0,m=t.length,d;h<m;++h)if((d=t[h]).name===s)return d.value}function e(t,s,h){for(var m=0,d=t.length;m<d;++m)if(t[m].name===s){t[m]=u,t=t.slice(0,m).concat(t.slice(m+1));break}return h!=null&&t.push({name:s,value:h}),t}b.default=a},6746:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(2958);Object.defineProperty(b,"dispatch",{enumerable:!0,get:function(){return o(a).default}});function o(l){return l&&l.__esModule?l:{default:l}}},886:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(u,a){var o,l=1;u==null&&(u=0),a==null&&(a=0);function r(){var e,t=o.length,s,h=0,m=0;for(e=0;e<t;++e)s=o[e],h+=s.x,m+=s.y;for(h=(h/t-u)*l,m=(m/t-a)*l,e=0;e<t;++e)s=o[e],s.x-=h,s.y-=m}return r.initialize=function(e){o=e},r.x=function(e){return arguments.length?(u=+e,r):u},r.y=function(e){return arguments.length?(a=+e,r):a},r.strength=function(e){return arguments.length?(l=+e,r):l},r}},1405:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(m){var d,v,x,N=1,F=1;typeof m!="function"&&(m=(0,l.default)(m==null?1:+m));function ae(){for(var fe,B=d.length,he,z,ee,pe,S,q,M=0;M<F;++M)for(he=(0,a.quadtree)(d,s,h).visitAfter($),fe=0;fe<B;++fe)z=d[fe],S=v[z.index],q=S*S,ee=z.x+z.vx,pe=z.y+z.vy,he.visit(I);function I(j,ue,se,Ee,Ce){var xe=j.data,Oe=j.r,Le=S+Oe;if(xe){if(xe.index>z.index){var Ge=ee-xe.x-xe.vx,He=pe-xe.y-xe.vy,Et=Ge*Ge+He*He;Et<Le*Le&&(Ge===0&&(Ge=(0,e.default)(x),Et+=Ge*Ge),He===0&&(He=(0,e.default)(x),Et+=He*He),Et=(Le-(Et=Math.sqrt(Et)))/Et*N,z.vx+=(Ge*=Et)*(Le=(Oe*=Oe)/(q+Oe)),z.vy+=(He*=Et)*Le,xe.vx-=Ge*(Le=1-Le),xe.vy-=He*Le)}return}return ue>ee+Le||Ee<ee-Le||se>pe+Le||Ce<pe-Le}}function $(fe){if(fe.data)return fe.r=v[fe.data.index];for(var B=fe.r=0;B<4;++B)fe[B]&&fe[B].r>fe.r&&(fe.r=fe[B].r)}function te(){if(d){var fe,B=d.length,he;for(v=new Array(B),fe=0;fe<B;++fe)he=d[fe],v[he.index]=+m(he,fe,d)}}return ae.initialize=function(fe,B){d=fe,x=B,te()},ae.iterations=function(fe){return arguments.length?(F=+fe,ae):F},ae.strength=function(fe){return arguments.length?(N=+fe,ae):N},ae.radius=function(fe){return arguments.length?(m=typeof fe=="function"?fe:(0,l.default)(+fe),te(),ae):m},ae};var a=u(1863),o=u(8549),l=t(o),r=u(6775),e=t(r);function t(m){return m&&m.__esModule?m:{default:m}}function s(m){return m.x+m.vx}function h(m){return m.y+m.vy}},8549:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(u){return function(){return u}}},897:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(886);Object.defineProperty(b,"forceCenter",{enumerable:!0,get:function(){return m(a).default}});var o=u(1405);Object.defineProperty(b,"forceCollide",{enumerable:!0,get:function(){return m(o).default}});var l=u(465);Object.defineProperty(b,"forceLink",{enumerable:!0,get:function(){return m(l).default}});var r=u(5457);Object.defineProperty(b,"forceManyBody",{enumerable:!0,get:function(){return m(r).default}});var e=u(3831);Object.defineProperty(b,"forceRadial",{enumerable:!0,get:function(){return m(e).default}});var t=u(8634);Object.defineProperty(b,"forceSimulation",{enumerable:!0,get:function(){return m(t).default}});var s=u(2935);Object.defineProperty(b,"forceX",{enumerable:!0,get:function(){return m(s).default}});var h=u(6128);Object.defineProperty(b,"forceY",{enumerable:!0,get:function(){return m(h).default}});function m(d){return d&&d.__esModule?d:{default:d}}},6775:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(u){return(u()-.5)*1e-6}},993:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(){var l=1;return function(){return(l=(u*l+a)%o)/o}};var u=1664525,a=1013904223,o=4294967296},465:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(m){var d=s,v=he,x,N=(0,o.default)(30),F,ae,$,te,fe,B=1;m==null&&(m=[]);function he(q){return 1/Math.min($[q.source.index],$[q.target.index])}function z(q){for(var M=0,I=m.length;M<B;++M)for(var j=0,ue,se,Ee,Ce,xe,Oe,Le;j<I;++j)ue=m[j],se=ue.source,Ee=ue.target,Ce=Ee.x+Ee.vx-se.x-se.vx||(0,r.default)(fe),xe=Ee.y+Ee.vy-se.y-se.vy||(0,r.default)(fe),Oe=Math.sqrt(Ce*Ce+xe*xe),Oe=(Oe-F[j])/Oe*q*x[j],Ce*=Oe,xe*=Oe,Ee.vx-=Ce*(Le=te[j]),Ee.vy-=xe*Le,se.vx+=Ce*(Le=1-Le),se.vy+=xe*Le}function ee(){if(ae){var q,M=ae.length,I=m.length,j=new Map(ae.map(function(se,Ee){return[d(se,Ee,ae),se]})),ue;for(q=0,$=new Array(M);q<I;++q)ue=m[q],ue.index=q,t(ue.source)!=="object"&&(ue.source=h(j,ue.source)),t(ue.target)!=="object"&&(ue.target=h(j,ue.target)),$[ue.source.index]=($[ue.source.index]||0)+1,$[ue.target.index]=($[ue.target.index]||0)+1;for(q=0,te=new Array(I);q<I;++q)ue=m[q],te[q]=$[ue.source.index]/($[ue.source.index]+$[ue.target.index]);x=new Array(I),pe(),F=new Array(I),S()}}function pe(){if(ae)for(var q=0,M=m.length;q<M;++q)x[q]=+v(m[q],q,m)}function S(){if(ae)for(var q=0,M=m.length;q<M;++q)F[q]=+N(m[q],q,m)}return z.initialize=function(q,M){ae=q,fe=M,ee()},z.links=function(q){return arguments.length?(m=q,ee(),z):m},z.id=function(q){return arguments.length?(d=q,z):d},z.iterations=function(q){return arguments.length?(B=+q,z):B},z.strength=function(q){return arguments.length?(v=typeof q=="function"?q:(0,o.default)(+q),pe(),z):v},z.distance=function(q){return arguments.length?(N=typeof q=="function"?q:(0,o.default)(+q),S(),z):N},z};var a=u(8549),o=e(a),l=u(6775),r=e(l);function e(m){return m&&m.__esModule?m:{default:m}}function t(m){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},t(m)}function s(m){return m.index}function h(m,d){var v=m.get(d);if(!v)throw new Error("node not found: "+d);return v}},5457:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(){var h,m,d,v,x=(0,l.default)(-30),N,F=1,ae=1/0,$=.81;function te(z){var ee,pe=h.length,S=(0,a.quadtree)(h,t.x,t.y).visitAfter(B);for(v=z,ee=0;ee<pe;++ee)m=h[ee],S.visit(he)}function fe(){if(h){var z,ee=h.length,pe;for(N=new Array(ee),z=0;z<ee;++z)pe=h[z],N[pe.index]=+x(pe,z,h)}}function B(z){var ee=0,pe,S,q=0,M,I,j;if(z.length){for(M=I=j=0;j<4;++j)(pe=z[j])&&(S=Math.abs(pe.value))&&(ee+=pe.value,q+=S,M+=S*pe.x,I+=S*pe.y);z.x=M/q,z.y=I/q}else{pe=z,pe.x=pe.data.x,pe.y=pe.data.y;do ee+=N[pe.data.index];while(pe=pe.next)}z.value=ee}function he(z,ee,pe,S){if(!z.value)return!0;var q=z.x-m.x,M=z.y-m.y,I=S-ee,j=q*q+M*M;if(I*I/$<j)return j<ae&&(q===0&&(q=(0,e.default)(d),j+=q*q),M===0&&(M=(0,e.default)(d),j+=M*M),j<F&&(j=Math.sqrt(F*j)),m.vx+=q*z.value*v/j,m.vy+=M*z.value*v/j),!0;if(z.length||j>=ae)return;(z.data!==m||z.next)&&(q===0&&(q=(0,e.default)(d),j+=q*q),M===0&&(M=(0,e.default)(d),j+=M*M),j<F&&(j=Math.sqrt(F*j)));do z.data!==m&&(I=N[z.data.index]*v/j,m.vx+=q*I,m.vy+=M*I);while(z=z.next)}return te.initialize=function(z,ee){h=z,d=ee,fe()},te.strength=function(z){return arguments.length?(x=typeof z=="function"?z:(0,l.default)(+z),fe(),te):x},te.distanceMin=function(z){return arguments.length?(F=z*z,te):Math.sqrt(F)},te.distanceMax=function(z){return arguments.length?(ae=z*z,te):Math.sqrt(ae)},te.theta=function(z){return arguments.length?($=z*z,te):Math.sqrt($)},te};var a=u(1863),o=u(8549),l=s(o),r=u(6775),e=s(r),t=u(8634);function s(h){return h&&h.__esModule?h:{default:h}}},3831:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(r,e,t){var s,h=(0,o.default)(.1),m,d;typeof r!="function"&&(r=(0,o.default)(+r)),e==null&&(e=0),t==null&&(t=0);function v(N){for(var F=0,ae=s.length;F<ae;++F){var $=s[F],te=$.x-e||1e-6,fe=$.y-t||1e-6,B=Math.sqrt(te*te+fe*fe),he=(d[F]-B)*m[F]*N/B;$.vx+=te*he,$.vy+=fe*he}}function x(){if(s){var N,F=s.length;for(m=new Array(F),d=new Array(F),N=0;N<F;++N)d[N]=+r(s[N],N,s),m[N]=isNaN(d[N])?0:+h(s[N],N,s)}}return v.initialize=function(N){s=N,x()},v.strength=function(N){return arguments.length?(h=typeof N=="function"?N:(0,o.default)(+N),x(),v):h},v.radius=function(N){return arguments.length?(r=typeof N=="function"?N:(0,o.default)(+N),x(),v):r},v.x=function(N){return arguments.length?(e=+N,v):e},v.y=function(N){return arguments.length?(t=+N,v):t},v};var a=u(8549),o=l(a);function l(r){return r&&r.__esModule?r:{default:r}}},8634:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.x=t,b.y=s,b.default=function(d){var v,x=1,N=.001,F=1-Math.pow(N,1/300),ae=0,$=.6,te=new Map,fe=(0,o.timer)(z),B=(0,a.dispatch)("tick","end"),he=(0,r.default)();d==null&&(d=[]);function z(){ee(),B.call("tick",v),x<N&&(fe.stop(),B.call("end",v))}function ee(q){var M,I=d.length,j;q===void 0&&(q=1);for(var ue=0;ue<q;++ue)for(x+=(ae-x)*F,te.forEach(function(se){se(x)}),M=0;M<I;++M)j=d[M],j.fx==null?j.x+=j.vx*=$:(j.x=j.fx,j.vx=0),j.fy==null?j.y+=j.vy*=$:(j.y=j.fy,j.vy=0);return v}function pe(){for(var q=0,M=d.length,I;q<M;++q){if(I=d[q],I.index=q,I.fx!=null&&(I.x=I.fx),I.fy!=null&&(I.y=I.fy),isNaN(I.x)||isNaN(I.y)){var j=h*Math.sqrt(.5+q),ue=q*m;I.x=j*Math.cos(ue),I.y=j*Math.sin(ue)}(isNaN(I.vx)||isNaN(I.vy))&&(I.vx=I.vy=0)}}function S(q){return q.initialize&&q.initialize(d,he),q}return pe(),v={tick:ee,restart:function(){return fe.restart(z),v},stop:function(){return fe.stop(),v},nodes:function(M){return arguments.length?(d=M,pe(),te.forEach(S),v):d},alpha:function(M){return arguments.length?(x=+M,v):x},alphaMin:function(M){return arguments.length?(N=+M,v):N},alphaDecay:function(M){return arguments.length?(F=+M,v):+F},alphaTarget:function(M){return arguments.length?(ae=+M,v):ae},velocityDecay:function(M){return arguments.length?($=1-M,v):1-$},randomSource:function(M){return arguments.length?(he=M,te.forEach(S),v):he},force:function(M,I){return arguments.length>1?(I==null?te.delete(M):te.set(M,S(I)),v):te.get(M)},find:function(M,I,j){var ue=0,se=d.length,Ee,Ce,xe,Oe,Le;for(j==null?j=1/0:j*=j,ue=0;ue<se;++ue)Oe=d[ue],Ee=M-Oe.x,Ce=I-Oe.y,xe=Ee*Ee+Ce*Ce,xe<j&&(Le=Oe,j=xe);return Le},on:function(M,I){return arguments.length>1?(B.on(M,I),v):B.on(M)}}};var a=u(6746),o=u(2245),l=u(993),r=e(l);function e(d){return d&&d.__esModule?d:{default:d}}function t(d){return d.x}function s(d){return d.y}var h=10,m=Math.PI*(3-Math.sqrt(5))},2935:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(r){var e=(0,o.default)(.1),t,s,h;typeof r!="function"&&(r=(0,o.default)(r==null?0:+r));function m(v){for(var x=0,N=t.length,F;x<N;++x)F=t[x],F.vx+=(h[x]-F.x)*s[x]*v}function d(){if(t){var v,x=t.length;for(s=new Array(x),h=new Array(x),v=0;v<x;++v)s[v]=isNaN(h[v]=+r(t[v],v,t))?0:+e(t[v],v,t)}}return m.initialize=function(v){t=v,d()},m.strength=function(v){return arguments.length?(e=typeof v=="function"?v:(0,o.default)(+v),d(),m):e},m.x=function(v){return arguments.length?(r=typeof v=="function"?v:(0,o.default)(+v),d(),m):r},m};var a=u(8549),o=l(a);function l(r){return r&&r.__esModule?r:{default:r}}},6128:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(r){var e=(0,o.default)(.1),t,s,h;typeof r!="function"&&(r=(0,o.default)(r==null?0:+r));function m(v){for(var x=0,N=t.length,F;x<N;++x)F=t[x],F.vy+=(h[x]-F.y)*s[x]*v}function d(){if(t){var v,x=t.length;for(s=new Array(x),h=new Array(x),v=0;v<x;++v)s[v]=isNaN(h[v]=+r(t[v],v,t))?0:+e(t[v],v,t)}}return m.initialize=function(v){t=v,d()},m.strength=function(v){return arguments.length?(e=typeof v=="function"?v:(0,o.default)(+v),d(),m):e},m.y=function(v){return arguments.length?(r=typeof v=="function"?v:(0,o.default)(+v),d(),m):r},m};var a=u(8549),o=l(a);function l(r){return r&&r.__esModule?r:{default:r}}},8513:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(o){var l=+this._x.call(null,o),r=+this._y.call(null,o);return u(this.cover(l,r),l,r,o)},b.addAll=a;function u(o,l,r,e){if(isNaN(l)||isNaN(r))return o;var t,s=o._root,h={data:e},m=o._x0,d=o._y0,v=o._x1,x=o._y1,N,F,ae,$,te,fe,B,he;if(!s)return o._root=h,o;for(;s.length;)if((te=l>=(N=(m+v)/2))?m=N:v=N,(fe=r>=(F=(d+x)/2))?d=F:x=F,t=s,!(s=s[B=fe<<1|te]))return t[B]=h,o;if(ae=+o._x.call(null,s.data),$=+o._y.call(null,s.data),l===ae&&r===$)return h.next=s,t?t[B]=h:o._root=h,o;do t=t?t[B]=new Array(4):o._root=new Array(4),(te=l>=(N=(m+v)/2))?m=N:v=N,(fe=r>=(F=(d+x)/2))?d=F:x=F;while((B=fe<<1|te)===(he=($>=F)<<1|ae>=N));return t[he]=s,t[B]=h,o}function a(o){var l,r,e=o.length,t,s,h=new Array(e),m=new Array(e),d=1/0,v=1/0,x=-1/0,N=-1/0;for(r=0;r<e;++r)isNaN(t=+this._x.call(null,l=o[r]))||isNaN(s=+this._y.call(null,l))||(h[r]=t,m[r]=s,t<d&&(d=t),t>x&&(x=t),s<v&&(v=s),s>N&&(N=s));if(d>x||v>N)return this;for(this.cover(d,v).cover(x,N),r=0;r<e;++r)u(this,h[r],m[r],o[r]);return this}},2890:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(u,a){if(isNaN(u=+u)||isNaN(a=+a))return this;var o=this._x0,l=this._y0,r=this._x1,e=this._y1;if(isNaN(o))r=(o=Math.floor(u))+1,e=(l=Math.floor(a))+1;else{for(var t=r-o||1,s=this._root,h,m;o>u||u>=r||l>a||a>=e;)switch(m=(a<l)<<1|u<o,h=new Array(4),h[m]=s,s=h,t*=2,m){case 0:r=o+t,e=l+t;break;case 1:o=r-t,e=l+t;break;case 2:r=o+t,l=e-t;break;case 3:o=r-t,l=e-t;break}this._root&&this._root.length&&(this._root=s)}return this._x0=o,this._y0=l,this._x1=r,this._y1=e,this}},777:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(){var u=[];return this.visit(function(a){if(!a.length)do u.push(a.data);while(a=a.next)}),u}},3164:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(u){return arguments.length?this.cover(+u[0][0],+u[0][1]).cover(+u[1][0],+u[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}},8703:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(r,e,t){var s,h=this._x0,m=this._y0,d,v,x,N,F=this._x1,ae=this._y1,$=[],te=this._root,fe,B;for(te&&$.push(new o.default(te,h,m,F,ae)),t==null?t=1/0:(h=r-t,m=e-t,F=r+t,ae=e+t,t*=t);fe=$.pop();)if(!(!(te=fe.node)||(d=fe.x0)>F||(v=fe.y0)>ae||(x=fe.x1)<h||(N=fe.y1)<m))if(te.length){var he=(d+x)/2,z=(v+N)/2;$.push(new o.default(te[3],he,z,x,N),new o.default(te[2],d,z,he,N),new o.default(te[1],he,v,x,z),new o.default(te[0],d,v,he,z)),(B=(e>=z)<<1|r>=he)&&(fe=$[$.length-1],$[$.length-1]=$[$.length-1-B],$[$.length-1-B]=fe)}else{var ee=r-+this._x.call(null,te.data),pe=e-+this._y.call(null,te.data),S=ee*ee+pe*pe;if(S<t){var q=Math.sqrt(t=S);h=r-q,m=e-q,F=r+q,ae=e+q,s=te.data}}return s};var a=u(4113),o=l(a);function l(r){return r&&r.__esModule?r:{default:r}}},1863:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(9010);Object.defineProperty(b,"quadtree",{enumerable:!0,get:function(){return o(a).default}});function o(l){return l&&l.__esModule?l:{default:l}}},4113:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(u,a,o,l,r){this.node=u,this.x0=a,this.y0=o,this.x1=l,this.y1=r}},9010:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=M;var a=u(8513),o=q(a),l=u(2890),r=q(l),e=u(777),t=q(e),s=u(3164),h=q(s),m=u(8703),d=q(m),v=u(5820),x=q(v),N=u(3869),F=q(N),ae=u(9150),$=q(ae),te=u(8239),fe=q(te),B=u(6904),he=q(B),z=u(4114),ee=q(z),pe=u(4502),S=q(pe);function q(se){return se&&se.__esModule?se:{default:se}}function M(se,Ee,Ce){var xe=new I(Ee==null?z.defaultX:Ee,Ce==null?pe.defaultY:Ce,NaN,NaN,NaN,NaN);return se==null?xe:xe.addAll(se)}function I(se,Ee,Ce,xe,Oe,Le){this._x=se,this._y=Ee,this._x0=Ce,this._y0=xe,this._x1=Oe,this._y1=Le,this._root=void 0}function j(se){for(var Ee={data:se.data},Ce=Ee;se=se.next;)Ce=Ce.next={data:se.data};return Ee}var ue=M.prototype=I.prototype;ue.copy=function(){var se=new I(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ee=this._root,Ce,xe;if(!Ee)return se;if(!Ee.length)return se._root=j(Ee),se;for(Ce=[{source:Ee,target:se._root=new Array(4)}];Ee=Ce.pop();)for(var Oe=0;Oe<4;++Oe)(xe=Ee.source[Oe])&&(xe.length?Ce.push({source:xe,target:Ee.target[Oe]=new Array(4)}):Ee.target[Oe]=j(xe));return se},ue.add=o.default,ue.addAll=a.addAll,ue.cover=r.default,ue.data=t.default,ue.extent=h.default,ue.find=d.default,ue.remove=x.default,ue.removeAll=v.removeAll,ue.root=F.default,ue.size=$.default,ue.visit=fe.default,ue.visitAfter=he.default,ue.x=ee.default,ue.y=S.default},5820:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){if(isNaN(v=+this._x.call(null,a))||isNaN(x=+this._y.call(null,a)))return this;var o,l=this._root,r,e,t,s=this._x0,h=this._y0,m=this._x1,d=this._y1,v,x,N,F,ae,$,te,fe;if(!l)return this;if(l.length)for(;;){if((ae=v>=(N=(s+m)/2))?s=N:m=N,($=x>=(F=(h+d)/2))?h=F:d=F,o=l,!(l=l[te=$<<1|ae]))return this;if(!l.length)break;(o[te+1&3]||o[te+2&3]||o[te+3&3])&&(r=o,fe=te)}for(;l.data!==a;)if(e=l,!(l=l.next))return this;return(t=l.next)&&delete l.next,e?(t?e.next=t:delete e.next,this):o?(t?o[te]=t:delete o[te],(l=o[0]||o[1]||o[2]||o[3])&&l===(o[3]||o[2]||o[1]||o[0])&&!l.length&&(r?r[fe]=l:this._root=l),this):(this._root=t,this)},b.removeAll=u;function u(a){for(var o=0,l=a.length;o<l;++o)this.remove(a[o]);return this}},3869:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(){return this._root}},9150:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(){var u=0;return this.visit(function(a){if(!a.length)do++u;while(a=a.next)}),u}},8239:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(r){var e=[],t,s=this._root,h,m,d,v,x;for(s&&e.push(new o.default(s,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!r(s=t.node,m=t.x0,d=t.y0,v=t.x1,x=t.y1)&&s.length){var N=(m+v)/2,F=(d+x)/2;(h=s[3])&&e.push(new o.default(h,N,F,v,x)),(h=s[2])&&e.push(new o.default(h,m,F,N,x)),(h=s[1])&&e.push(new o.default(h,N,d,v,F)),(h=s[0])&&e.push(new o.default(h,m,d,N,F))}return this};var a=u(4113),o=l(a);function l(r){return r&&r.__esModule?r:{default:r}}},6904:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(r){var e=[],t=[],s;for(this._root&&e.push(new o.default(this._root,this._x0,this._y0,this._x1,this._y1));s=e.pop();){var h=s.node;if(h.length){var m,d=s.x0,v=s.y0,x=s.x1,N=s.y1,F=(d+x)/2,ae=(v+N)/2;(m=h[0])&&e.push(new o.default(m,d,v,F,ae)),(m=h[1])&&e.push(new o.default(m,F,v,x,ae)),(m=h[2])&&e.push(new o.default(m,d,ae,F,N)),(m=h[3])&&e.push(new o.default(m,F,ae,x,N))}t.push(s)}for(;s=t.pop();)r(s.node,s.x0,s.y0,s.x1,s.y1);return this};var a=u(4113),o=l(a);function l(r){return r&&r.__esModule?r:{default:r}}},4114:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.defaultX=u,b.default=function(a){return arguments.length?(this._x=a,this):this._x};function u(a){return a[0]}},4502:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.defaultY=u,b.default=function(a){return arguments.length?(this._y=a,this):this._y};function u(a){return a[1]}},2245:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(8984);Object.defineProperty(b,"now",{enumerable:!0,get:function(){return a.now}}),Object.defineProperty(b,"timer",{enumerable:!0,get:function(){return a.timer}}),Object.defineProperty(b,"timerFlush",{enumerable:!0,get:function(){return a.timerFlush}});var o=u(2577);Object.defineProperty(b,"timeout",{enumerable:!0,get:function(){return r(o).default}});var l=u(5619);Object.defineProperty(b,"interval",{enumerable:!0,get:function(){return r(l).default}});function r(e){return e&&e.__esModule?e:{default:e}}},5619:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(o,l,r){var e=new a.Timer,t=l;return l==null?(e.restart(o,l,r),e):(e._restart=e.restart,e.restart=function(s,h,m){h=+h,m=m==null?(0,a.now)():+m,e._restart(function d(v){v+=t,e._restart(d,t+=h,m),s(v)},h,m)},e.restart(o,l,r),e)};var a=u(8984)},2577:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(o,l,r){var e=new a.Timer;return l=l==null?0:+l,e.restart(function(t){e.stop(),o(t+l)},l,r),e};var a=u(8984)},8984:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.now=x,b.Timer=F,b.timer=ae,b.timerFlush=$;function u(z){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},u(z)}var a=0,o=0,l=0,r=1e3,e,t,s=0,h=0,m=0,d=(typeof performance=="undefined"?"undefined":u(performance))==="object"&&performance.now?performance:Date,v=(typeof window=="undefined"?"undefined":u(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(z){setTimeout(z,17)};function x(){return h||(v(N),h=d.now()+m)}function N(){h=0}function F(){this._call=this._time=this._next=null}F.prototype=ae.prototype={constructor:F,restart:function(ee,pe,S){if(typeof ee!="function")throw new TypeError("callback is not a function");S=(S==null?x():+S)+(pe==null?0:+pe),!this._next&&t!==this&&(t?t._next=this:e=this,t=this),this._call=ee,this._time=S,he()},stop:function(){this._call&&(this._call=null,this._time=1/0,he())}};function ae(z,ee,pe){var S=new F;return S.restart(z,ee,pe),S}function $(){x(),++a;for(var z=e,ee;z;)(ee=h-z._time)>=0&&z._call.call(null,ee),z=z._next;--a}function te(){h=(s=d.now())+m,a=o=0;try{$()}finally{a=0,B(),h=0}}function fe(){var z=d.now(),ee=z-s;ee>r&&(m-=ee,s=z)}function B(){for(var z,ee=e,pe,S=1/0;ee;)ee._call?(S>ee._time&&(S=ee._time),z=ee,ee=ee._next):(pe=ee._next,ee._next=null,ee=z?z._next=pe:e=pe);t=z,he(S)}function he(z){if(!a){o&&(o=clearTimeout(o));var ee=z-h;ee>24?(z<1/0&&(o=setTimeout(te,z-d.now()-m)),l&&(l=clearInterval(l))):(l||(s=d.now(),l=setInterval(fe,r)),a=1,v(te))}}},2019:function(T,b,u){"use strict";function a(){return typeof Reflect!="undefined"&&Reflect.get?a=Reflect.get.bind():a=function(Ne,Te,U){var Y=o(Ne,Te);if(Y){var ge=Object.getOwnPropertyDescriptor(Y,Te);return ge.get?ge.get.call(arguments.length<3?Ne:U):ge.value}},a.apply(this,arguments)}function o(Re,Ne){for(;!Object.prototype.hasOwnProperty.call(Re,Ne)&&(Re=x(Re),Re!==null););return Re}function l(Re,Ne,Te){te(Re,Ne),Ne.set(Re,Te)}function r(Re,Ne,Te){var U=s(Re,Ne,"set");return e(Re,U,Te),Te}function e(Re,Ne,Te){if(Ne.set)Ne.set.call(Re,Te);else{if(!Ne.writable)throw new TypeError("attempted to set read only private field");Ne.value=Te}}function t(Re,Ne){var Te=s(Re,Ne,"get");return h(Re,Te)}function s(Re,Ne,Te){if(!Ne.has(Re))throw new TypeError("attempted to "+Te+" private field on non-instance");return Ne.get(Re)}function h(Re,Ne){return Ne.get?Ne.get.call(Re):Ne.value}function m(Re,Ne,Te){return Ne=x(Ne),d(Re,v()?Reflect.construct(Ne,Te||[],x(Re).constructor):Ne.apply(Re,Te))}function d(Re,Ne){if(Ne&&(j(Ne)==="object"||typeof Ne=="function"))return Ne;if(Ne!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N(Re)}function v(){try{var Re=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(Ne){}return(v=function(){return!!Re})()}function x(Re){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Te){return Te.__proto__||Object.getPrototypeOf(Te)},x(Re)}function N(Re){if(Re===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Re}function F(Re,Ne){if(typeof Ne!="function"&&Ne!==null)throw new TypeError("Super expression must either be null or a function");Re.prototype=Object.create(Ne&&Ne.prototype,{constructor:{value:Re,writable:!0,configurable:!0}}),Object.defineProperty(Re,"prototype",{writable:!1}),Ne&&ae(Re,Ne)}function ae(Re,Ne){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,Y){return U.__proto__=Y,U},ae(Re,Ne)}function $(Re,Ne){te(Re,Ne),Ne.add(Re)}function te(Re,Ne){if(Ne.has(Re))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fe(Re,Ne,Te){return Ne=Ce(Ne),Ne in Re?Object.defineProperty(Re,Ne,{value:Te,enumerable:!0,configurable:!0,writable:!0}):Re[Ne]=Te,Re}function B(Re,Ne,Te){if(!Ne.has(Re))throw new TypeError("attempted to get private field on non-instance");return Te}function he(Re,Ne){return pe(Re)||ee(Re,Ne)||q(Re,Ne)||z()}function z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(Re,Ne){var Te=Re==null?null:typeof Symbol!="undefined"&&Re[Symbol.iterator]||Re["@@iterator"];if(Te!=null){var U,Y,ge,Ye,ct=[],nt=!0,lt=!1;try{if(ge=(Te=Te.call(Re)).next,Ne===0){if(Object(Te)!==Te)return;nt=!1}else for(;!(nt=(U=ge.call(Te)).done)&&(ct.push(U.value),ct.length!==Ne);nt=!0);}catch(fn){lt=!0,Y=fn}finally{try{if(!nt&&Te.return!=null&&(Ye=Te.return(),Object(Ye)!==Ye))return}finally{if(lt)throw Y}}return ct}}function pe(Re){if(Array.isArray(Re))return Re}function S(Re,Ne){var Te=typeof Symbol!="undefined"&&Re[Symbol.iterator]||Re["@@iterator"];if(!Te){if(Array.isArray(Re)||(Te=q(Re))||Ne&&Re&&typeof Re.length=="number"){Te&&(Re=Te);var U=0,Y=function(){};return{s:Y,n:function(){return U>=Re.length?{done:!0}:{done:!1,value:Re[U++]}},e:function(lt){throw lt},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ge=!0,Ye=!1,ct;return{s:function(){Te=Te.call(Re)},n:function(){var lt=Te.next();return ge=lt.done,lt},e:function(lt){Ye=!0,ct=lt},f:function(){try{!ge&&Te.return!=null&&Te.return()}finally{if(Ye)throw ct}}}}function q(Re,Ne){if(Re){if(typeof Re=="string")return M(Re,Ne);var Te=Object.prototype.toString.call(Re).slice(8,-1);if(Te==="Object"&&Re.constructor&&(Te=Re.constructor.name),Te==="Map"||Te==="Set")return Array.from(Re);if(Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return M(Re,Ne)}}function M(Re,Ne){(Ne==null||Ne>Re.length)&&(Ne=Re.length);for(var Te=0,U=new Array(Ne);Te<Ne;Te++)U[Te]=Re[Te];return U}function I(){"use strict";I=function(){return Ne};var Re,Ne={},Te=Object.prototype,U=Te.hasOwnProperty,Y=Object.defineProperty||function(pt,Ht,an){pt[Ht]=an.value},ge=typeof Symbol=="function"?Symbol:{},Ye=ge.iterator||"@@iterator",ct=ge.asyncIterator||"@@asyncIterator",nt=ge.toStringTag||"@@toStringTag";function lt(pt,Ht,an){return Object.defineProperty(pt,Ht,{value:an,enumerable:!0,configurable:!0,writable:!0}),pt[Ht]}try{lt({},"")}catch(pt){lt=function(an,Ln,wr){return an[Ln]=wr}}function fn(pt,Ht,an,Ln){var wr=Ht&&Ht.prototype instanceof Pn?Ht:Pn,yr=Object.create(wr.prototype),ei=new Ae(Ln||[]);return Y(yr,"_invoke",{value:Ho(pt,an,ei)}),yr}function on(pt,Ht,an){try{return{type:"normal",arg:pt.call(Ht,an)}}catch(Ln){return{type:"throw",arg:Ln}}}Ne.wrap=fn;var Gn="suspendedStart",er="suspendedYield",Kn="executing",qr="completed",xi={};function Pn(){}function $n(){}function Rr(){}var Di={};lt(Di,Ye,function(){return this});var Jr=Object.getPrototypeOf,$o=Jr&&Jr(Jr(Ke([])));$o&&$o!==Te&&U.call($o,Ye)&&(Di=$o);var Vo=Rr.prototype=Pn.prototype=Object.create(Di);function lo(pt){["next","throw","return"].forEach(function(Ht){lt(pt,Ht,function(an){return this._invoke(Ht,an)})})}function Xi(pt,Ht){function an(wr,yr,ei,Ii){var to=on(pt[wr],pt,yr);if(to.type!=="throw"){var Ji=to.arg,Yi=Ji.value;return Yi&&j(Yi)=="object"&&U.call(Yi,"__await")?Ht.resolve(Yi.__await).then(function(Uo){an("next",Uo,ei,Ii)},function(Uo){an("throw",Uo,ei,Ii)}):Ht.resolve(Yi).then(function(Uo){Ji.value=Uo,ei(Ji)},function(Uo){return an("throw",Uo,ei,Ii)})}Ii(to.arg)}var Ln;Y(this,"_invoke",{value:function(yr,ei){function Ii(){return new Ht(function(to,Ji){an(yr,ei,to,Ji)})}return Ln=Ln?Ln.then(Ii,Ii):Ii()}})}function Ho(pt,Ht,an){var Ln=Gn;return function(wr,yr){if(Ln===Kn)throw new Error("Generator is already running");if(Ln===qr){if(wr==="throw")throw yr;return{value:Re,done:!0}}for(an.method=wr,an.arg=yr;;){var ei=an.delegate;if(ei){var Ii=cs(ei,an);if(Ii){if(Ii===xi)continue;return Ii}}if(an.method==="next")an.sent=an._sent=an.arg;else if(an.method==="throw"){if(Ln===Gn)throw Ln=qr,an.arg;an.dispatchException(an.arg)}else an.method==="return"&&an.abrupt("return",an.arg);Ln=Kn;var to=on(pt,Ht,an);if(to.type==="normal"){if(Ln=an.done?qr:er,to.arg===xi)continue;return{value:to.arg,done:an.done}}to.type==="throw"&&(Ln=qr,an.method="throw",an.arg=to.arg)}}}function cs(pt,Ht){var an=Ht.method,Ln=pt.iterator[an];if(Ln===Re)return Ht.delegate=null,an==="throw"&&pt.iterator.return&&(Ht.method="return",Ht.arg=Re,cs(pt,Ht),Ht.method==="throw")||an!=="return"&&(Ht.method="throw",Ht.arg=new TypeError("The iterator does not provide a '"+an+"' method")),xi;var wr=on(Ln,pt.iterator,Ht.arg);if(wr.type==="throw")return Ht.method="throw",Ht.arg=wr.arg,Ht.delegate=null,xi;var yr=wr.arg;return yr?yr.done?(Ht[pt.resultName]=yr.value,Ht.next=pt.nextLoc,Ht.method!=="return"&&(Ht.method="next",Ht.arg=Re),Ht.delegate=null,xi):yr:(Ht.method="throw",Ht.arg=new TypeError("iterator result is not an object"),Ht.delegate=null,xi)}function li(pt){var Ht={tryLoc:pt[0]};1 in pt&&(Ht.catchLoc=pt[1]),2 in pt&&(Ht.finallyLoc=pt[2],Ht.afterLoc=pt[3]),this.tryEntries.push(Ht)}function xs(pt){var Ht=pt.completion||{};Ht.type="normal",delete Ht.arg,pt.completion=Ht}function Ae(pt){this.tryEntries=[{tryLoc:"root"}],pt.forEach(li,this),this.reset(!0)}function Ke(pt){if(pt||pt===""){var Ht=pt[Ye];if(Ht)return Ht.call(pt);if(typeof pt.next=="function")return pt;if(!isNaN(pt.length)){var an=-1,Ln=function wr(){for(;++an<pt.length;)if(U.call(pt,an))return wr.value=pt[an],wr.done=!1,wr;return wr.value=Re,wr.done=!0,wr};return Ln.next=Ln}}throw new TypeError(j(pt)+" is not iterable")}return $n.prototype=Rr,Y(Vo,"constructor",{value:Rr,configurable:!0}),Y(Rr,"constructor",{value:$n,configurable:!0}),$n.displayName=lt(Rr,nt,"GeneratorFunction"),Ne.isGeneratorFunction=function(pt){var Ht=typeof pt=="function"&&pt.constructor;return!!Ht&&(Ht===$n||(Ht.displayName||Ht.name)==="GeneratorFunction")},Ne.mark=function(pt){return Object.setPrototypeOf?Object.setPrototypeOf(pt,Rr):(pt.__proto__=Rr,lt(pt,nt,"GeneratorFunction")),pt.prototype=Object.create(Vo),pt},Ne.awrap=function(pt){return{__await:pt}},lo(Xi.prototype),lt(Xi.prototype,ct,function(){return this}),Ne.AsyncIterator=Xi,Ne.async=function(pt,Ht,an,Ln,wr){wr===void 0&&(wr=Promise);var yr=new Xi(fn(pt,Ht,an,Ln),wr);return Ne.isGeneratorFunction(Ht)?yr:yr.next().then(function(ei){return ei.done?ei.value:yr.next()})},lo(Vo),lt(Vo,nt,"Generator"),lt(Vo,Ye,function(){return this}),lt(Vo,"toString",function(){return"[object Generator]"}),Ne.keys=function(pt){var Ht=Object(pt),an=[];for(var Ln in Ht)an.push(Ln);return an.reverse(),function wr(){for(;an.length;){var yr=an.pop();if(yr in Ht)return wr.value=yr,wr.done=!1,wr}return wr.done=!0,wr}},Ne.values=Ke,Ae.prototype={constructor:Ae,reset:function(Ht){if(this.prev=0,this.next=0,this.sent=this._sent=Re,this.done=!1,this.delegate=null,this.method="next",this.arg=Re,this.tryEntries.forEach(xs),!Ht)for(var an in this)an.charAt(0)==="t"&&U.call(this,an)&&!isNaN(+an.slice(1))&&(this[an]=Re)},stop:function(){this.done=!0;var Ht=this.tryEntries[0].completion;if(Ht.type==="throw")throw Ht.arg;return this.rval},dispatchException:function(Ht){if(this.done)throw Ht;var an=this;function Ln(Ji,Yi){return ei.type="throw",ei.arg=Ht,an.next=Ji,Yi&&(an.method="next",an.arg=Re),!!Yi}for(var wr=this.tryEntries.length-1;wr>=0;--wr){var yr=this.tryEntries[wr],ei=yr.completion;if(yr.tryLoc==="root")return Ln("end");if(yr.tryLoc<=this.prev){var Ii=U.call(yr,"catchLoc"),to=U.call(yr,"finallyLoc");if(Ii&&to){if(this.prev<yr.catchLoc)return Ln(yr.catchLoc,!0);if(this.prev<yr.finallyLoc)return Ln(yr.finallyLoc)}else if(Ii){if(this.prev<yr.catchLoc)return Ln(yr.catchLoc,!0)}else{if(!to)throw new Error("try statement without catch or finally");if(this.prev<yr.finallyLoc)return Ln(yr.finallyLoc)}}}},abrupt:function(Ht,an){for(var Ln=this.tryEntries.length-1;Ln>=0;--Ln){var wr=this.tryEntries[Ln];if(wr.tryLoc<=this.prev&&U.call(wr,"finallyLoc")&&this.prev<wr.finallyLoc){var yr=wr;break}}yr&&(Ht==="break"||Ht==="continue")&&yr.tryLoc<=an&&an<=yr.finallyLoc&&(yr=null);var ei=yr?yr.completion:{};return ei.type=Ht,ei.arg=an,yr?(this.method="next",this.next=yr.finallyLoc,xi):this.complete(ei)},complete:function(Ht,an){if(Ht.type==="throw")throw Ht.arg;return Ht.type==="break"||Ht.type==="continue"?this.next=Ht.arg:Ht.type==="return"?(this.rval=this.arg=Ht.arg,this.method="return",this.next="end"):Ht.type==="normal"&&an&&(this.next=an),xi},finish:function(Ht){for(var an=this.tryEntries.length-1;an>=0;--an){var Ln=this.tryEntries[an];if(Ln.finallyLoc===Ht)return this.complete(Ln.completion,Ln.afterLoc),xs(Ln),xi}},catch:function(Ht){for(var an=this.tryEntries.length-1;an>=0;--an){var Ln=this.tryEntries[an];if(Ln.tryLoc===Ht){var wr=Ln.completion;if(wr.type==="throw"){var yr=wr.arg;xs(Ln)}return yr}}throw new Error("illegal catch attempt")},delegateYield:function(Ht,an,Ln){return this.delegate={iterator:Ke(Ht),resultName:an,nextLoc:Ln},this.method==="next"&&(this.arg=Re),xi}},Ne}function j(Re){"@babel/helpers - typeof";return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne},j(Re)}function ue(Re,Ne){if(!(Re instanceof Ne))throw new TypeError("Cannot call a class as a function")}function se(Re,Ne){for(var Te=0;Te<Ne.length;Te++){var U=Ne[Te];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(Re,Ce(U.key),U)}}function Ee(Re,Ne,Te){return Ne&&se(Re.prototype,Ne),Te&&se(Re,Te),Object.defineProperty(Re,"prototype",{writable:!1}),Re}function Ce(Re){var Ne=xe(Re,"string");return j(Ne)=="symbol"?Ne:String(Ne)}function xe(Re,Ne){if(j(Re)!="object"||!Re)return Re;var Te=Re[Symbol.toPrimitive];if(Te!==void 0){var U=Te.call(Re,Ne||"default");if(j(U)!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ne==="string"?String:Number)(Re)}Object.defineProperty(b,"__esModule",{value:!0});var Oe=u(4634),Le=u(5053),Ge=" ".repeat(2),He=" ".repeat(4);function Et(){return Ct(this)}function Ct(Re){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=Ne.maxRows,U=Te===void 0?15:Te,Y=Ne.maxColumns,ge=Y===void 0?10:Y,Ye=Ne.maxNumSize,ct=Ye===void 0?8:Ye,nt=Ne.padMinus,lt=nt===void 0?"auto":nt;return"".concat(Re.constructor.name,` {
`).concat(Ge,`[
`).concat(He).concat(Gt(Re,U,ge,ct,lt),`
`).concat(Ge,`]
`).concat(Ge,"rows: ").concat(Re.rows,`
`).concat(Ge,"columns: ").concat(Re.columns,`
}`)}function Gt(Re,Ne,Te,U,Y){var ge=Re.rows,Ye=Re.columns,ct=Math.min(ge,Ne),nt=Math.min(Ye,Te),lt=[];if(Y==="auto"){Y=!1;e:for(var fn=0;fn<ct;fn++)for(var on=0;on<nt;on++)if(Re.get(fn,on)<0){Y=!0;break e}}for(var Gn=0;Gn<ct;Gn++){for(var er=[],Kn=0;Kn<nt;Kn++)er.push(At(Re.get(Gn,Kn),U,Y));lt.push("".concat(er.join(" ")))}return nt!==Ye&&(lt[lt.length-1]+=" ... ".concat(Ye-Te," more columns")),ct!==ge&&lt.push("... ".concat(ge-Ne," more rows")),lt.join(`
`.concat(He))}function At(Re,Ne,Te){return(Re>=0&&Te?" ".concat(vt(Re,Ne-1)):vt(Re,Ne)).padEnd(Ne)}function vt(Re,Ne){var Te=Re.toString();if(Te.length<=Ne)return Te;var U=Re.toFixed(Ne);if(U.length>Ne&&(U=Re.toFixed(Math.max(0,Ne-(U.length-Ne)))),U.length<=Ne&&!U.startsWith("0.000")&&!U.startsWith("-0.000"))return U;var Y=Re.toExponential(Ne);return Y.length>Ne&&(Y=Re.toExponential(Math.max(0,Ne-(Y.length-Ne)))),Y.slice(0)}function cn(Re,Ne){Re.prototype.add=function(U){return typeof U=="number"?this.addS(U):this.addM(U)},Re.prototype.addS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)+U);return this},Re.prototype.addM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)+U.get(Y,ge));return this},Re.add=function(U,Y){var ge=new Ne(U);return ge.add(Y)},Re.prototype.sub=function(U){return typeof U=="number"?this.subS(U):this.subM(U)},Re.prototype.subS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)-U);return this},Re.prototype.subM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)-U.get(Y,ge));return this},Re.sub=function(U,Y){var ge=new Ne(U);return ge.sub(Y)},Re.prototype.subtract=Re.prototype.sub,Re.prototype.subtractS=Re.prototype.subS,Re.prototype.subtractM=Re.prototype.subM,Re.subtract=Re.sub,Re.prototype.mul=function(U){return typeof U=="number"?this.mulS(U):this.mulM(U)},Re.prototype.mulS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)*U);return this},Re.prototype.mulM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)*U.get(Y,ge));return this},Re.mul=function(U,Y){var ge=new Ne(U);return ge.mul(Y)},Re.prototype.multiply=Re.prototype.mul,Re.prototype.multiplyS=Re.prototype.mulS,Re.prototype.multiplyM=Re.prototype.mulM,Re.multiply=Re.mul,Re.prototype.div=function(U){return typeof U=="number"?this.divS(U):this.divM(U)},Re.prototype.divS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)/U);return this},Re.prototype.divM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)/U.get(Y,ge));return this},Re.div=function(U,Y){var ge=new Ne(U);return ge.div(Y)},Re.prototype.divide=Re.prototype.div,Re.prototype.divideS=Re.prototype.divS,Re.prototype.divideM=Re.prototype.divM,Re.divide=Re.div,Re.prototype.mod=function(U){return typeof U=="number"?this.modS(U):this.modM(U)},Re.prototype.modS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)%U);return this},Re.prototype.modM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)%U.get(Y,ge));return this},Re.mod=function(U,Y){var ge=new Ne(U);return ge.mod(Y)},Re.prototype.modulus=Re.prototype.mod,Re.prototype.modulusS=Re.prototype.modS,Re.prototype.modulusM=Re.prototype.modM,Re.modulus=Re.mod,Re.prototype.and=function(U){return typeof U=="number"?this.andS(U):this.andM(U)},Re.prototype.andS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)&U);return this},Re.prototype.andM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)&U.get(Y,ge));return this},Re.and=function(U,Y){var ge=new Ne(U);return ge.and(Y)},Re.prototype.or=function(U){return typeof U=="number"?this.orS(U):this.orM(U)},Re.prototype.orS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)|U);return this},Re.prototype.orM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)|U.get(Y,ge));return this},Re.or=function(U,Y){var ge=new Ne(U);return ge.or(Y)},Re.prototype.xor=function(U){return typeof U=="number"?this.xorS(U):this.xorM(U)},Re.prototype.xorS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)^U);return this},Re.prototype.xorM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)^U.get(Y,ge));return this},Re.xor=function(U,Y){var ge=new Ne(U);return ge.xor(Y)},Re.prototype.leftShift=function(U){return typeof U=="number"?this.leftShiftS(U):this.leftShiftM(U)},Re.prototype.leftShiftS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)<<U);return this},Re.prototype.leftShiftM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)<<U.get(Y,ge));return this},Re.leftShift=function(U,Y){var ge=new Ne(U);return ge.leftShift(Y)},Re.prototype.signPropagatingRightShift=function(U){return typeof U=="number"?this.signPropagatingRightShiftS(U):this.signPropagatingRightShiftM(U)},Re.prototype.signPropagatingRightShiftS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)>>U);return this},Re.prototype.signPropagatingRightShiftM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)>>U.get(Y,ge));return this},Re.signPropagatingRightShift=function(U,Y){var ge=new Ne(U);return ge.signPropagatingRightShift(Y)},Re.prototype.rightShift=function(U){return typeof U=="number"?this.rightShiftS(U):this.rightShiftM(U)},Re.prototype.rightShiftS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)>>>U);return this},Re.prototype.rightShiftM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)>>>U.get(Y,ge));return this},Re.rightShift=function(U,Y){var ge=new Ne(U);return ge.rightShift(Y)},Re.prototype.zeroFillRightShift=Re.prototype.rightShift,Re.prototype.zeroFillRightShiftS=Re.prototype.rightShiftS,Re.prototype.zeroFillRightShiftM=Re.prototype.rightShiftM,Re.zeroFillRightShift=Re.rightShift,Re.prototype.not=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,~this.get(U,Y));return this},Re.not=function(U){var Y=new Ne(U);return Y.not()},Re.prototype.abs=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.abs(this.get(U,Y)));return this},Re.abs=function(U){var Y=new Ne(U);return Y.abs()},Re.prototype.acos=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.acos(this.get(U,Y)));return this},Re.acos=function(U){var Y=new Ne(U);return Y.acos()},Re.prototype.acosh=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.acosh(this.get(U,Y)));return this},Re.acosh=function(U){var Y=new Ne(U);return Y.acosh()},Re.prototype.asin=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.asin(this.get(U,Y)));return this},Re.asin=function(U){var Y=new Ne(U);return Y.asin()},Re.prototype.asinh=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.asinh(this.get(U,Y)));return this},Re.asinh=function(U){var Y=new Ne(U);return Y.asinh()},Re.prototype.atan=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.atan(this.get(U,Y)));return this},Re.atan=function(U){var Y=new Ne(U);return Y.atan()},Re.prototype.atanh=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.atanh(this.get(U,Y)));return this},Re.atanh=function(U){var Y=new Ne(U);return Y.atanh()},Re.prototype.cbrt=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.cbrt(this.get(U,Y)));return this},Re.cbrt=function(U){var Y=new Ne(U);return Y.cbrt()},Re.prototype.ceil=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.ceil(this.get(U,Y)));return this},Re.ceil=function(U){var Y=new Ne(U);return Y.ceil()},Re.prototype.clz32=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.clz32(this.get(U,Y)));return this},Re.clz32=function(U){var Y=new Ne(U);return Y.clz32()},Re.prototype.cos=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.cos(this.get(U,Y)));return this},Re.cos=function(U){var Y=new Ne(U);return Y.cos()},Re.prototype.cosh=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.cosh(this.get(U,Y)));return this},Re.cosh=function(U){var Y=new Ne(U);return Y.cosh()},Re.prototype.exp=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.exp(this.get(U,Y)));return this},Re.exp=function(U){var Y=new Ne(U);return Y.exp()},Re.prototype.expm1=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.expm1(this.get(U,Y)));return this},Re.expm1=function(U){var Y=new Ne(U);return Y.expm1()},Re.prototype.floor=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.floor(this.get(U,Y)));return this},Re.floor=function(U){var Y=new Ne(U);return Y.floor()},Re.prototype.fround=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.fround(this.get(U,Y)));return this},Re.fround=function(U){var Y=new Ne(U);return Y.fround()},Re.prototype.log=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.log(this.get(U,Y)));return this},Re.log=function(U){var Y=new Ne(U);return Y.log()},Re.prototype.log1p=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.log1p(this.get(U,Y)));return this},Re.log1p=function(U){var Y=new Ne(U);return Y.log1p()},Re.prototype.log10=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.log10(this.get(U,Y)));return this},Re.log10=function(U){var Y=new Ne(U);return Y.log10()},Re.prototype.log2=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.log2(this.get(U,Y)));return this},Re.log2=function(U){var Y=new Ne(U);return Y.log2()},Re.prototype.round=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.round(this.get(U,Y)));return this},Re.round=function(U){var Y=new Ne(U);return Y.round()},Re.prototype.sign=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.sign(this.get(U,Y)));return this},Re.sign=function(U){var Y=new Ne(U);return Y.sign()},Re.prototype.sin=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.sin(this.get(U,Y)));return this},Re.sin=function(U){var Y=new Ne(U);return Y.sin()},Re.prototype.sinh=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.sinh(this.get(U,Y)));return this},Re.sinh=function(U){var Y=new Ne(U);return Y.sinh()},Re.prototype.sqrt=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.sqrt(this.get(U,Y)));return this},Re.sqrt=function(U){var Y=new Ne(U);return Y.sqrt()},Re.prototype.tan=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.tan(this.get(U,Y)));return this},Re.tan=function(U){var Y=new Ne(U);return Y.tan()},Re.prototype.tanh=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.tanh(this.get(U,Y)));return this},Re.tanh=function(U){var Y=new Ne(U);return Y.tanh()},Re.prototype.trunc=function(){for(var U=0;U<this.rows;U++)for(var Y=0;Y<this.columns;Y++)this.set(U,Y,Math.trunc(this.get(U,Y)));return this},Re.trunc=function(U){var Y=new Ne(U);return Y.trunc()},Re.pow=function(U,Y){var ge=new Ne(U);return ge.pow(Y)},Re.prototype.pow=function(U){return typeof U=="number"?this.powS(U):this.powM(U)},Re.prototype.powS=function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,Math.pow(this.get(Y,ge),U));return this},Re.prototype.powM=function(U){if(U=Ne.checkMatrix(U),this.rows!==U.rows||this.columns!==U.columns)throw new RangeError("Matrices dimensions must be equal");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,Math.pow(this.get(Y,ge),U.get(Y,ge)));return this}}function hn(Re,Ne,Te){var U=Te?Re.rows:Re.rows-1;if(Ne<0||Ne>U)throw new RangeError("Row index out of range")}function Bn(Re,Ne,Te){var U=Te?Re.columns:Re.columns-1;if(Ne<0||Ne>U)throw new RangeError("Column index out of range")}function Fn(Re,Ne){if(Ne.to1DArray&&(Ne=Ne.to1DArray()),Ne.length!==Re.columns)throw new RangeError("vector size must be the same as the number of columns");return Ne}function ir(Re,Ne){if(Ne.to1DArray&&(Ne=Ne.to1DArray()),Ne.length!==Re.rows)throw new RangeError("vector size must be the same as the number of rows");return Ne}function Nr(Re,Ne){if(!Oe.isAnyArray(Ne))throw new TypeError("row indices must be an array");for(var Te=0;Te<Ne.length;Te++)if(Ne[Te]<0||Ne[Te]>=Re.rows)throw new RangeError("row indices are out of range")}function Ei(Re,Ne){if(!Oe.isAnyArray(Ne))throw new TypeError("column indices must be an array");for(var Te=0;Te<Ne.length;Te++)if(Ne[Te]<0||Ne[Te]>=Re.columns)throw new RangeError("column indices are out of range")}function ci(Re,Ne,Te,U,Y){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(fr("startRow",Ne),fr("endRow",Te),fr("startColumn",U),fr("endColumn",Y),Ne>Te||U>Y||Ne<0||Ne>=Re.rows||Te<0||Te>=Re.rows||U<0||U>=Re.columns||Y<0||Y>=Re.columns)throw new RangeError("Submatrix indices are out of range")}function Ot(Re){for(var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Te=[],U=0;U<Re;U++)Te.push(Ne);return Te}function fr(Re,Ne){if(typeof Ne!="number")throw new TypeError("".concat(Re," must be a number"))}function Pi(Re){if(Re.isEmpty())throw new Error("Empty matrix has no elements to index")}function Li(Re){for(var Ne=Ot(Re.rows),Te=0;Te<Re.rows;++Te)for(var U=0;U<Re.columns;++U)Ne[Te]+=Re.get(Te,U);return Ne}function zn(Re){for(var Ne=Ot(Re.columns),Te=0;Te<Re.rows;++Te)for(var U=0;U<Re.columns;++U)Ne[U]+=Re.get(Te,U);return Ne}function $e(Re){for(var Ne=0,Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Ne+=Re.get(Te,U);return Ne}function Xt(Re){for(var Ne=Ot(Re.rows,1),Te=0;Te<Re.rows;++Te)for(var U=0;U<Re.columns;++U)Ne[Te]*=Re.get(Te,U);return Ne}function Rt(Re){for(var Ne=Ot(Re.columns,1),Te=0;Te<Re.rows;++Te)for(var U=0;U<Re.columns;++U)Ne[U]*=Re.get(Te,U);return Ne}function _t(Re){for(var Ne=1,Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Ne*=Re.get(Te,U);return Ne}function Tt(Re,Ne,Te){for(var U=Re.rows,Y=Re.columns,ge=[],Ye=0;Ye<U;Ye++){for(var ct=0,nt=0,lt=0,fn=0;fn<Y;fn++)lt=Re.get(Ye,fn)-Te[Ye],ct+=lt,nt+=lt*lt;Ne?ge.push((nt-ct*ct/Y)/(Y-1)):ge.push((nt-ct*ct/Y)/Y)}return ge}function at(Re,Ne,Te){for(var U=Re.rows,Y=Re.columns,ge=[],Ye=0;Ye<Y;Ye++){for(var ct=0,nt=0,lt=0,fn=0;fn<U;fn++)lt=Re.get(fn,Ye)-Te[Ye],ct+=lt,nt+=lt*lt;Ne?ge.push((nt-ct*ct/U)/(U-1)):ge.push((nt-ct*ct/U)/U)}return ge}function ce(Re,Ne,Te){for(var U=Re.rows,Y=Re.columns,ge=U*Y,Ye=0,ct=0,nt=0,lt=0;lt<U;lt++)for(var fn=0;fn<Y;fn++)nt=Re.get(lt,fn)-Te,Ye+=nt,ct+=nt*nt;return Ne?(ct-Ye*Ye/ge)/(ge-1):(ct-Ye*Ye/ge)/ge}function ut(Re,Ne){for(var Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Re.set(Te,U,Re.get(Te,U)-Ne[Te])}function Ze(Re,Ne){for(var Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Re.set(Te,U,Re.get(Te,U)-Ne[U])}function Wt(Re,Ne){for(var Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Re.set(Te,U,Re.get(Te,U)-Ne)}function Ut(Re){for(var Ne=[],Te=0;Te<Re.rows;Te++){for(var U=0,Y=0;Y<Re.columns;Y++)U+=Math.pow(Re.get(Te,Y),2)/(Re.columns-1);Ne.push(Math.sqrt(U))}return Ne}function jt(Re,Ne){for(var Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Re.set(Te,U,Re.get(Te,U)/Ne[Te])}function xt(Re){for(var Ne=[],Te=0;Te<Re.columns;Te++){for(var U=0,Y=0;Y<Re.rows;Y++)U+=Math.pow(Re.get(Y,Te),2)/(Re.rows-1);Ne.push(Math.sqrt(U))}return Ne}function $t(Re,Ne){for(var Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Re.set(Te,U,Re.get(Te,U)/Ne[U])}function Un(Re){for(var Ne=Re.size-1,Te=0,U=0;U<Re.columns;U++)for(var Y=0;Y<Re.rows;Y++)Te+=Math.pow(Re.get(Y,U),2)/Ne;return Math.sqrt(Te)}function qn(Re,Ne){for(var Te=0;Te<Re.rows;Te++)for(var U=0;U<Re.columns;U++)Re.set(Te,U,Re.get(Te,U)/Ne)}var rr=function(Re){function Ne(){ue(this,Ne)}return Ee(Ne,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(U){if(typeof U!="function")throw new TypeError("callback must be a function");for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)U.call(this,Y,ge);return this}},{key:"to1DArray",value:function(){for(var U=[],Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)U.push(this.get(Y,ge));return U}},{key:"to2DArray",value:function(){for(var U=[],Y=0;Y<this.rows;Y++){U.push([]);for(var ge=0;ge<this.columns;ge++)U[Y].push(this.get(Y,ge))}return U}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var U=0;U<this.rows;U++)for(var Y=0;Y<=U;Y++)if(this.get(U,Y)!==this.get(Y,U))return!1;return!0}return!1}},{key:"isDistance",value:function(){if(!this.isSymmetric())return!1;for(var U=0;U<this.rows;U++)if(this.get(U,U)!==0)return!1;return!0}},{key:"isEchelonForm",value:function(){for(var U=0,Y=0,ge=-1,Ye=!0,ct=!1;U<this.rows&&Ye;){for(Y=0,ct=!1;Y<this.columns&&ct===!1;)this.get(U,Y)===0?Y++:this.get(U,Y)===1&&Y>ge?(ct=!0,ge=Y):(Ye=!1,ct=!0);U++}return Ye}},{key:"isReducedEchelonForm",value:function(){for(var U=0,Y=0,ge=-1,Ye=!0,ct=!1;U<this.rows&&Ye;){for(Y=0,ct=!1;Y<this.columns&&ct===!1;)this.get(U,Y)===0?Y++:this.get(U,Y)===1&&Y>ge?(ct=!0,ge=Y):(Ye=!1,ct=!0);for(var nt=Y+1;nt<this.rows;nt++)this.get(U,nt)!==0&&(Ye=!1);U++}return Ye}},{key:"echelonForm",value:function(){for(var U=this.clone(),Y=0,ge=0;Y<U.rows&&ge<U.columns;){for(var Ye=Y,ct=Y;ct<U.rows;ct++)U.get(ct,ge)>U.get(Ye,ge)&&(Ye=ct);if(U.get(Ye,ge)===0)ge++;else{U.swapRows(Y,Ye);for(var nt=U.get(Y,ge),lt=ge;lt<U.columns;lt++)U.set(Y,lt,U.get(Y,lt)/nt);for(var fn=Y+1;fn<U.rows;fn++){var on=U.get(fn,ge)/U.get(Y,ge);U.set(fn,ge,0);for(var Gn=ge+1;Gn<U.columns;Gn++)U.set(fn,Gn,U.get(fn,Gn)-U.get(Y,Gn)*on)}Y++,ge++}}return U}},{key:"reducedEchelonForm",value:function(){for(var U=this.echelonForm(),Y=U.columns,ge=U.rows,Ye=ge-1;Ye>=0;)if(U.maxRow(Ye)===0)Ye--;else{for(var ct=0,nt=!1;ct<ge&&nt===!1;)U.get(Ye,ct)===1?nt=!0:ct++;for(var lt=0;lt<Ye;lt++)for(var fn=U.get(lt,ct),on=ct;on<Y;on++){var Gn=U.get(lt,on)-fn*U.get(Ye,on);U.set(lt,on,Gn)}Ye--}return U}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(j(U)!=="object")throw new TypeError("options must be an object");var Y=U.rows,ge=Y===void 0?1:Y,Ye=U.columns,ct=Ye===void 0?1:Ye;if(!Number.isInteger(ge)||ge<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(ct)||ct<=0)throw new TypeError("columns must be a positive integer");for(var nt=new cr(this.rows*ge,this.columns*ct),lt=0;lt<ge;lt++)for(var fn=0;fn<ct;fn++)nt.setSubMatrix(this,this.rows*lt,this.columns*fn);return nt}},{key:"fill",value:function(U){for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,U);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(U){hn(this,U);for(var Y=[],ge=0;ge<this.columns;ge++)Y.push(this.get(U,ge));return Y}},{key:"getRowVector",value:function(U){return cr.rowVector(this.getRow(U))}},{key:"setRow",value:function(U,Y){hn(this,U),Y=Fn(this,Y);for(var ge=0;ge<this.columns;ge++)this.set(U,ge,Y[ge]);return this}},{key:"swapRows",value:function(U,Y){hn(this,U),hn(this,Y);for(var ge=0;ge<this.columns;ge++){var Ye=this.get(U,ge);this.set(U,ge,this.get(Y,ge)),this.set(Y,ge,Ye)}return this}},{key:"getColumn",value:function(U){Bn(this,U);for(var Y=[],ge=0;ge<this.rows;ge++)Y.push(this.get(ge,U));return Y}},{key:"getColumnVector",value:function(U){return cr.columnVector(this.getColumn(U))}},{key:"setColumn",value:function(U,Y){Bn(this,U),Y=ir(this,Y);for(var ge=0;ge<this.rows;ge++)this.set(ge,U,Y[ge]);return this}},{key:"swapColumns",value:function(U,Y){Bn(this,U),Bn(this,Y);for(var ge=0;ge<this.rows;ge++){var Ye=this.get(ge,U);this.set(ge,U,this.get(ge,Y)),this.set(ge,Y,Ye)}return this}},{key:"addRowVector",value:function(U){U=Fn(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)+U[ge]);return this}},{key:"subRowVector",value:function(U){U=Fn(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)-U[ge]);return this}},{key:"mulRowVector",value:function(U){U=Fn(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)*U[ge]);return this}},{key:"divRowVector",value:function(U){U=Fn(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)/U[ge]);return this}},{key:"addColumnVector",value:function(U){U=ir(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)+U[Y]);return this}},{key:"subColumnVector",value:function(U){U=ir(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)-U[Y]);return this}},{key:"mulColumnVector",value:function(U){U=ir(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)*U[Y]);return this}},{key:"divColumnVector",value:function(U){U=ir(this,U);for(var Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)this.set(Y,ge,this.get(Y,ge)/U[Y]);return this}},{key:"mulRow",value:function(U,Y){hn(this,U);for(var ge=0;ge<this.columns;ge++)this.set(U,ge,this.get(U,ge)*Y);return this}},{key:"mulColumn",value:function(U,Y){Bn(this,U);for(var ge=0;ge<this.rows;ge++)this.set(ge,U,this.get(ge,U)*Y);return this}},{key:"max",value:function(U){if(this.isEmpty())return NaN;switch(U){case"row":{for(var Y=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),ge=0;ge<this.rows;ge++)for(var Ye=0;Ye<this.columns;Ye++)this.get(ge,Ye)>Y[ge]&&(Y[ge]=this.get(ge,Ye));return Y}case"column":{for(var ct=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),nt=0;nt<this.rows;nt++)for(var lt=0;lt<this.columns;lt++)this.get(nt,lt)>ct[lt]&&(ct[lt]=this.get(nt,lt));return ct}case void 0:{for(var fn=this.get(0,0),on=0;on<this.rows;on++)for(var Gn=0;Gn<this.columns;Gn++)this.get(on,Gn)>fn&&(fn=this.get(on,Gn));return fn}default:throw new Error("invalid option: ".concat(U))}}},{key:"maxIndex",value:function(){Pi(this);for(var U=this.get(0,0),Y=[0,0],ge=0;ge<this.rows;ge++)for(var Ye=0;Ye<this.columns;Ye++)this.get(ge,Ye)>U&&(U=this.get(ge,Ye),Y[0]=ge,Y[1]=Ye);return Y}},{key:"min",value:function(U){if(this.isEmpty())return NaN;switch(U){case"row":{for(var Y=new Array(this.rows).fill(Number.POSITIVE_INFINITY),ge=0;ge<this.rows;ge++)for(var Ye=0;Ye<this.columns;Ye++)this.get(ge,Ye)<Y[ge]&&(Y[ge]=this.get(ge,Ye));return Y}case"column":{for(var ct=new Array(this.columns).fill(Number.POSITIVE_INFINITY),nt=0;nt<this.rows;nt++)for(var lt=0;lt<this.columns;lt++)this.get(nt,lt)<ct[lt]&&(ct[lt]=this.get(nt,lt));return ct}case void 0:{for(var fn=this.get(0,0),on=0;on<this.rows;on++)for(var Gn=0;Gn<this.columns;Gn++)this.get(on,Gn)<fn&&(fn=this.get(on,Gn));return fn}default:throw new Error("invalid option: ".concat(U))}}},{key:"minIndex",value:function(){Pi(this);for(var U=this.get(0,0),Y=[0,0],ge=0;ge<this.rows;ge++)for(var Ye=0;Ye<this.columns;Ye++)this.get(ge,Ye)<U&&(U=this.get(ge,Ye),Y[0]=ge,Y[1]=Ye);return Y}},{key:"maxRow",value:function(U){if(hn(this,U),this.isEmpty())return NaN;for(var Y=this.get(U,0),ge=1;ge<this.columns;ge++)this.get(U,ge)>Y&&(Y=this.get(U,ge));return Y}},{key:"maxRowIndex",value:function(U){hn(this,U),Pi(this);for(var Y=this.get(U,0),ge=[U,0],Ye=1;Ye<this.columns;Ye++)this.get(U,Ye)>Y&&(Y=this.get(U,Ye),ge[1]=Ye);return ge}},{key:"minRow",value:function(U){if(hn(this,U),this.isEmpty())return NaN;for(var Y=this.get(U,0),ge=1;ge<this.columns;ge++)this.get(U,ge)<Y&&(Y=this.get(U,ge));return Y}},{key:"minRowIndex",value:function(U){hn(this,U),Pi(this);for(var Y=this.get(U,0),ge=[U,0],Ye=1;Ye<this.columns;Ye++)this.get(U,Ye)<Y&&(Y=this.get(U,Ye),ge[1]=Ye);return ge}},{key:"maxColumn",value:function(U){if(Bn(this,U),this.isEmpty())return NaN;for(var Y=this.get(0,U),ge=1;ge<this.rows;ge++)this.get(ge,U)>Y&&(Y=this.get(ge,U));return Y}},{key:"maxColumnIndex",value:function(U){Bn(this,U),Pi(this);for(var Y=this.get(0,U),ge=[0,U],Ye=1;Ye<this.rows;Ye++)this.get(Ye,U)>Y&&(Y=this.get(Ye,U),ge[0]=Ye);return ge}},{key:"minColumn",value:function(U){if(Bn(this,U),this.isEmpty())return NaN;for(var Y=this.get(0,U),ge=1;ge<this.rows;ge++)this.get(ge,U)<Y&&(Y=this.get(ge,U));return Y}},{key:"minColumnIndex",value:function(U){Bn(this,U),Pi(this);for(var Y=this.get(0,U),ge=[0,U],Ye=1;Ye<this.rows;Ye++)this.get(Ye,U)<Y&&(Y=this.get(Ye,U),ge[0]=Ye);return ge}},{key:"diag",value:function(){for(var U=Math.min(this.rows,this.columns),Y=[],ge=0;ge<U;ge++)Y.push(this.get(ge,ge));return Y}},{key:"norm",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius";switch(U){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError("unknown norm type: ".concat(U))}}},{key:"cumulativeSum",value:function(){for(var U=0,Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)U+=this.get(Y,ge),this.set(Y,ge,U);return this}},{key:"dot",value:function(U){Ne.isMatrix(U)&&(U=U.to1DArray());var Y=this.to1DArray();if(Y.length!==U.length)throw new RangeError("vectors do not have the same size");for(var ge=0,Ye=0;Ye<Y.length;Ye++)ge+=Y[Ye]*U[Ye];return ge}},{key:"mmul",value:function(U){U=cr.checkMatrix(U);for(var Y=this.rows,ge=this.columns,Ye=U.columns,ct=new cr(Y,Ye),nt=new Float64Array(ge),lt=0;lt<Ye;lt++){for(var fn=0;fn<ge;fn++)nt[fn]=U.get(fn,lt);for(var on=0;on<Y;on++){for(var Gn=0,er=0;er<ge;er++)Gn+=this.get(on,er)*nt[er];ct.set(on,lt,Gn)}}return ct}},{key:"strassen2x2",value:function(U){U=cr.checkMatrix(U);var Y=new cr(2,2),ge=this.get(0,0),Ye=U.get(0,0),ct=this.get(0,1),nt=U.get(0,1),lt=this.get(1,0),fn=U.get(1,0),on=this.get(1,1),Gn=U.get(1,1),er=(ge+on)*(Ye+Gn),Kn=(lt+on)*Ye,qr=ge*(nt-Gn),xi=on*(fn-Ye),Pn=(ge+ct)*Gn,$n=(lt-ge)*(Ye+nt),Rr=(ct-on)*(fn+Gn),Di=er+xi-Pn+Rr,Jr=qr+Pn,$o=Kn+xi,Vo=er-Kn+qr+$n;return Y.set(0,0,Di),Y.set(0,1,Jr),Y.set(1,0,$o),Y.set(1,1,Vo),Y}},{key:"strassen3x3",value:function(U){U=cr.checkMatrix(U);var Y=new cr(3,3),ge=this.get(0,0),Ye=this.get(0,1),ct=this.get(0,2),nt=this.get(1,0),lt=this.get(1,1),fn=this.get(1,2),on=this.get(2,0),Gn=this.get(2,1),er=this.get(2,2),Kn=U.get(0,0),qr=U.get(0,1),xi=U.get(0,2),Pn=U.get(1,0),$n=U.get(1,1),Rr=U.get(1,2),Di=U.get(2,0),Jr=U.get(2,1),$o=U.get(2,2),Vo=(ge+Ye+ct-nt-lt-Gn-er)*$n,lo=(ge-nt)*(-qr+$n),Xi=lt*(-Kn+qr+Pn-$n-Rr-Di+$o),Ho=(-ge+nt+lt)*(Kn-qr+$n),cs=(nt+lt)*(-Kn+qr),li=ge*Kn,xs=(-ge+on+Gn)*(Kn-xi+Rr),Ae=(-ge+on)*(xi-Rr),Ke=(on+Gn)*(-Kn+xi),pt=(ge+Ye+ct-lt-fn-on-Gn)*Rr,Ht=Gn*(-Kn+xi+Pn-$n-Rr-Di+Jr),an=(-ct+Gn+er)*($n+Di-Jr),Ln=(ct-er)*($n-Jr),wr=ct*Di,yr=(Gn+er)*(-Di+Jr),ei=(-ct+lt+fn)*(Rr+Di-$o),Ii=(ct-fn)*(Rr-$o),to=(lt+fn)*(-Di+$o),Ji=Ye*Pn,Yi=fn*Jr,Uo=nt*xi,Oi=on*qr,Co=er*$o,Fs=li+wr+Ji,ss=Vo+Ho+cs+li+an+wr+yr,qo=li+xs+Ke+pt+wr+ei+to,js=lo+Xi+Ho+li+wr+ei+Ii,Zs=lo+Ho+cs+li+Yi,Mo=wr+ei+Ii+to+Uo,la=li+xs+Ae+Ht+an+Ln+wr,X=an+Ln+wr+yr+Oi,ve=li+xs+Ae+Ke+Co;return Y.set(0,0,Fs),Y.set(0,1,ss),Y.set(0,2,qo),Y.set(1,0,js),Y.set(1,1,Zs),Y.set(1,2,Mo),Y.set(2,0,la),Y.set(2,1,X),Y.set(2,2,ve),Y}},{key:"mmulStrassen",value:function(U){U=cr.checkMatrix(U);var Y=this.clone(),ge=Y.rows,Ye=Y.columns,ct=U.rows,nt=U.columns;Ye!==ct&&console.warn("Multiplying ".concat(ge," x ").concat(Ye," and ").concat(ct," x ").concat(nt," matrix: dimensions do not match."));function lt(er,Kn,qr){var xi=er.rows,Pn=er.columns;if(xi===Kn&&Pn===qr)return er;var $n=Ne.zeros(Kn,qr);return $n=$n.setSubMatrix(er,0,0),$n}var fn=Math.max(ge,ct),on=Math.max(Ye,nt);Y=lt(Y,fn,on),U=lt(U,fn,on);function Gn(er,Kn,qr,xi){if(qr<=512||xi<=512)return er.mmul(Kn);qr%2===1&&xi%2===1?(er=lt(er,qr+1,xi+1),Kn=lt(Kn,qr+1,xi+1)):qr%2===1?(er=lt(er,qr+1,xi),Kn=lt(Kn,qr+1,xi)):xi%2===1&&(er=lt(er,qr,xi+1),Kn=lt(Kn,qr,xi+1));var Pn=parseInt(er.rows/2,10),$n=parseInt(er.columns/2,10),Rr=er.subMatrix(0,Pn-1,0,$n-1),Di=Kn.subMatrix(0,Pn-1,0,$n-1),Jr=er.subMatrix(0,Pn-1,$n,er.columns-1),$o=Kn.subMatrix(0,Pn-1,$n,Kn.columns-1),Vo=er.subMatrix(Pn,er.rows-1,0,$n-1),lo=Kn.subMatrix(Pn,Kn.rows-1,0,$n-1),Xi=er.subMatrix(Pn,er.rows-1,$n,er.columns-1),Ho=Kn.subMatrix(Pn,Kn.rows-1,$n,Kn.columns-1),cs=Gn(Ne.add(Rr,Xi),Ne.add(Di,Ho),Pn,$n),li=Gn(Ne.add(Vo,Xi),Di,Pn,$n),xs=Gn(Rr,Ne.sub($o,Ho),Pn,$n),Ae=Gn(Xi,Ne.sub(lo,Di),Pn,$n),Ke=Gn(Ne.add(Rr,Jr),Ho,Pn,$n),pt=Gn(Ne.sub(Vo,Rr),Ne.add(Di,$o),Pn,$n),Ht=Gn(Ne.sub(Jr,Xi),Ne.add(lo,Ho),Pn,$n),an=Ne.add(cs,Ae);an.sub(Ke),an.add(Ht);var Ln=Ne.add(xs,Ke),wr=Ne.add(li,Ae),yr=Ne.sub(cs,li);yr.add(xs),yr.add(pt);var ei=Ne.zeros(2*an.rows,2*an.columns);return ei=ei.setSubMatrix(an,0,0),ei=ei.setSubMatrix(Ln,an.rows,0),ei=ei.setSubMatrix(wr,0,an.columns),ei=ei.setSubMatrix(yr,an.rows,an.columns),ei.subMatrix(0,qr-1,0,xi-1)}return Gn(Y,U,fn,on)}},{key:"scaleRows",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(j(U)!=="object")throw new TypeError("options must be an object");var Y=U.min,ge=Y===void 0?0:Y,Ye=U.max,ct=Ye===void 0?1:Ye;if(!Number.isFinite(ge))throw new TypeError("min must be a number");if(!Number.isFinite(ct))throw new TypeError("max must be a number");if(ge>=ct)throw new RangeError("min must be smaller than max");for(var nt=new cr(this.rows,this.columns),lt=0;lt<this.rows;lt++){var fn=this.getRow(lt);fn.length>0&&Le(fn,{min:ge,max:ct,output:fn}),nt.setRow(lt,fn)}return nt}},{key:"scaleColumns",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(j(U)!=="object")throw new TypeError("options must be an object");var Y=U.min,ge=Y===void 0?0:Y,Ye=U.max,ct=Ye===void 0?1:Ye;if(!Number.isFinite(ge))throw new TypeError("min must be a number");if(!Number.isFinite(ct))throw new TypeError("max must be a number");if(ge>=ct)throw new RangeError("min must be smaller than max");for(var nt=new cr(this.rows,this.columns),lt=0;lt<this.columns;lt++){var fn=this.getColumn(lt);fn.length&&Le(fn,{min:ge,max:ct,output:fn}),nt.setColumn(lt,fn)}return nt}},{key:"flipRows",value:function(){for(var U=Math.ceil(this.columns/2),Y=0;Y<this.rows;Y++)for(var ge=0;ge<U;ge++){var Ye=this.get(Y,ge),ct=this.get(Y,this.columns-1-ge);this.set(Y,ge,ct),this.set(Y,this.columns-1-ge,Ye)}return this}},{key:"flipColumns",value:function(){for(var U=Math.ceil(this.rows/2),Y=0;Y<this.columns;Y++)for(var ge=0;ge<U;ge++){var Ye=this.get(ge,Y),ct=this.get(this.rows-1-ge,Y);this.set(ge,Y,ct),this.set(this.rows-1-ge,Y,Ye)}return this}},{key:"kroneckerProduct",value:function(U){U=cr.checkMatrix(U);for(var Y=this.rows,ge=this.columns,Ye=U.rows,ct=U.columns,nt=new cr(Y*Ye,ge*ct),lt=0;lt<Y;lt++)for(var fn=0;fn<ge;fn++)for(var on=0;on<Ye;on++)for(var Gn=0;Gn<ct;Gn++)nt.set(Ye*lt+on,ct*fn+Gn,this.get(lt,fn)*U.get(on,Gn));return nt}},{key:"kroneckerSum",value:function(U){if(U=cr.checkMatrix(U),!this.isSquare()||!U.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var Y=this.rows,ge=U.rows,Ye=this.kroneckerProduct(cr.eye(ge,ge)),ct=cr.eye(Y,Y).kroneckerProduct(U);return Ye.add(ct)}},{key:"transpose",value:function(){for(var U=new cr(this.columns,this.rows),Y=0;Y<this.rows;Y++)for(var ge=0;ge<this.columns;ge++)U.set(ge,Y,this.get(Y,ge));return U}},{key:"sortRows",value:function(){for(var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xn,Y=0;Y<this.rows;Y++)this.setRow(Y,this.getRow(Y).sort(U));return this}},{key:"sortColumns",value:function(){for(var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xn,Y=0;Y<this.columns;Y++)this.setColumn(Y,this.getColumn(Y).sort(U));return this}},{key:"subMatrix",value:function(U,Y,ge,Ye){ci(this,U,Y,ge,Ye);for(var ct=new cr(Y-U+1,Ye-ge+1),nt=U;nt<=Y;nt++)for(var lt=ge;lt<=Ye;lt++)ct.set(nt-U,lt-ge,this.get(nt,lt));return ct}},{key:"subMatrixRow",value:function(U,Y,ge){if(Y===void 0&&(Y=0),ge===void 0&&(ge=this.columns-1),Y>ge||Y<0||Y>=this.columns||ge<0||ge>=this.columns)throw new RangeError("Argument out of range");for(var Ye=new cr(U.length,ge-Y+1),ct=0;ct<U.length;ct++)for(var nt=Y;nt<=ge;nt++){if(U[ct]<0||U[ct]>=this.rows)throw new RangeError("Row index out of range: ".concat(U[ct]));Ye.set(ct,nt-Y,this.get(U[ct],nt))}return Ye}},{key:"subMatrixColumn",value:function(U,Y,ge){if(Y===void 0&&(Y=0),ge===void 0&&(ge=this.rows-1),Y>ge||Y<0||Y>=this.rows||ge<0||ge>=this.rows)throw new RangeError("Argument out of range");for(var Ye=new cr(ge-Y+1,U.length),ct=0;ct<U.length;ct++)for(var nt=Y;nt<=ge;nt++){if(U[ct]<0||U[ct]>=this.columns)throw new RangeError("Column index out of range: ".concat(U[ct]));Ye.set(nt-Y,ct,this.get(nt,U[ct]))}return Ye}},{key:"setSubMatrix",value:function(U,Y,ge){if(U=cr.checkMatrix(U),U.isEmpty())return this;var Ye=Y+U.rows-1,ct=ge+U.columns-1;ci(this,Y,Ye,ge,ct);for(var nt=0;nt<U.rows;nt++)for(var lt=0;lt<U.columns;lt++)this.set(Y+nt,ge+lt,U.get(nt,lt));return this}},{key:"selection",value:function(U,Y){Nr(this,U),Ei(this,Y);for(var ge=new cr(U.length,Y.length),Ye=0;Ye<U.length;Ye++)for(var ct=U[Ye],nt=0;nt<Y.length;nt++){var lt=Y[nt];ge.set(Ye,nt,this.get(ct,lt))}return ge}},{key:"trace",value:function(){for(var U=Math.min(this.rows,this.columns),Y=0,ge=0;ge<U;ge++)Y+=this.get(ge,ge);return Y}},{key:"clone",value:function(){return this.constructor.copy(this,new cr(this.rows,this.columns))}},{key:"sum",value:function(U){switch(U){case"row":return Li(this);case"column":return zn(this);case void 0:return $e(this);default:throw new Error("invalid option: ".concat(U))}}},{key:"product",value:function(U){switch(U){case"row":return Xt(this);case"column":return Rt(this);case void 0:return _t(this);default:throw new Error("invalid option: ".concat(U))}}},{key:"mean",value:function(U){var Y=this.sum(U);switch(U){case"row":{for(var ge=0;ge<this.rows;ge++)Y[ge]/=this.columns;return Y}case"column":{for(var Ye=0;Ye<this.columns;Ye++)Y[Ye]/=this.rows;return Y}case void 0:return Y/this.size;default:throw new Error("invalid option: ".concat(U))}}},{key:"variance",value:function(U){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(j(U)==="object"&&(Y=U,U=void 0),j(Y)!=="object")throw new TypeError("options must be an object");var ge=Y,Ye=ge.unbiased,ct=Ye===void 0?!0:Ye,nt=ge.mean,lt=nt===void 0?this.mean(U):nt;if(typeof ct!="boolean")throw new TypeError("unbiased must be a boolean");switch(U){case"row":{if(!Oe.isAnyArray(lt))throw new TypeError("mean must be an array");return Tt(this,ct,lt)}case"column":{if(!Oe.isAnyArray(lt))throw new TypeError("mean must be an array");return at(this,ct,lt)}case void 0:{if(typeof lt!="number")throw new TypeError("mean must be a number");return ce(this,ct,lt)}default:throw new Error("invalid option: ".concat(U))}}},{key:"standardDeviation",value:function(U,Y){j(U)==="object"&&(Y=U,U=void 0);var ge=this.variance(U,Y);if(U===void 0)return Math.sqrt(ge);for(var Ye=0;Ye<ge.length;Ye++)ge[Ye]=Math.sqrt(ge[Ye]);return ge}},{key:"center",value:function(U){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(j(U)==="object"&&(Y=U,U=void 0),j(Y)!=="object")throw new TypeError("options must be an object");var ge=Y,Ye=ge.center,ct=Ye===void 0?this.mean(U):Ye;switch(U){case"row":{if(!Oe.isAnyArray(ct))throw new TypeError("center must be an array");return ut(this,ct),this}case"column":{if(!Oe.isAnyArray(ct))throw new TypeError("center must be an array");return Ze(this,ct),this}case void 0:{if(typeof ct!="number")throw new TypeError("center must be a number");return Wt(this,ct),this}default:throw new Error("invalid option: ".concat(U))}}},{key:"scale",value:function(U){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(j(U)==="object"&&(Y=U,U=void 0),j(Y)!=="object")throw new TypeError("options must be an object");var ge=Y.scale;switch(U){case"row":{if(ge===void 0)ge=Ut(this);else if(!Oe.isAnyArray(ge))throw new TypeError("scale must be an array");return jt(this,ge),this}case"column":{if(ge===void 0)ge=xt(this);else if(!Oe.isAnyArray(ge))throw new TypeError("scale must be an array");return $t(this,ge),this}case void 0:{if(ge===void 0)ge=Un(this);else if(typeof ge!="number")throw new TypeError("scale must be a number");return qn(this,ge),this}default:throw new Error("invalid option: ".concat(U))}}},{key:"toString",value:function(U){return Ct(this,U)}},{key:Re,value:function(){return this.entries()}},{key:"entries",value:I().mark(function Te(){var U,Y;return I().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:U=0;case 1:if(!(U<this.rows)){Ye.next=12;break}Y=0;case 3:if(!(Y<this.columns)){Ye.next=9;break}return Ye.next=6,[U,Y,this.get(U,Y)];case 6:Y++,Ye.next=3;break;case 9:U++,Ye.next=1;break;case 12:case"end":return Ye.stop()}},Te,this)})},{key:"values",value:I().mark(function Te(){var U,Y;return I().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:U=0;case 1:if(!(U<this.rows)){Ye.next=12;break}Y=0;case 3:if(!(Y<this.columns)){Ye.next=9;break}return Ye.next=6,this.get(U,Y);case 6:Y++,Ye.next=3;break;case 9:U++,Ye.next=1;break;case 12:case"end":return Ye.stop()}},Te,this)})}],[{key:"from1DArray",value:function(U,Y,ge){var Ye=U*Y;if(Ye!==ge.length)throw new RangeError("data length does not match given dimensions");for(var ct=new cr(U,Y),nt=0;nt<U;nt++)for(var lt=0;lt<Y;lt++)ct.set(nt,lt,ge[nt*Y+lt]);return ct}},{key:"rowVector",value:function(U){for(var Y=new cr(1,U.length),ge=0;ge<U.length;ge++)Y.set(0,ge,U[ge]);return Y}},{key:"columnVector",value:function(U){for(var Y=new cr(U.length,1),ge=0;ge<U.length;ge++)Y.set(ge,0,U[ge]);return Y}},{key:"zeros",value:function(U,Y){return new cr(U,Y)}},{key:"ones",value:function(U,Y){return new cr(U,Y).fill(1)}},{key:"rand",value:function(U,Y){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(j(ge)!=="object")throw new TypeError("options must be an object");for(var Ye=ge.random,ct=Ye===void 0?Math.random:Ye,nt=new cr(U,Y),lt=0;lt<U;lt++)for(var fn=0;fn<Y;fn++)nt.set(lt,fn,ct());return nt}},{key:"randInt",value:function(U,Y){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(j(ge)!=="object")throw new TypeError("options must be an object");var Ye=ge.min,ct=Ye===void 0?0:Ye,nt=ge.max,lt=nt===void 0?1e3:nt,fn=ge.random,on=fn===void 0?Math.random:fn;if(!Number.isInteger(ct))throw new TypeError("min must be an integer");if(!Number.isInteger(lt))throw new TypeError("max must be an integer");if(ct>=lt)throw new RangeError("min must be smaller than max");for(var Gn=lt-ct,er=new cr(U,Y),Kn=0;Kn<U;Kn++)for(var qr=0;qr<Y;qr++){var xi=ct+Math.round(on()*Gn);er.set(Kn,qr,xi)}return er}},{key:"eye",value:function(U,Y,ge){Y===void 0&&(Y=U),ge===void 0&&(ge=1);for(var Ye=Math.min(U,Y),ct=this.zeros(U,Y),nt=0;nt<Ye;nt++)ct.set(nt,nt,ge);return ct}},{key:"diag",value:function(U,Y,ge){var Ye=U.length;Y===void 0&&(Y=Ye),ge===void 0&&(ge=Y);for(var ct=Math.min(Ye,Y,ge),nt=this.zeros(Y,ge),lt=0;lt<ct;lt++)nt.set(lt,lt,U[lt]);return nt}},{key:"min",value:function(U,Y){U=this.checkMatrix(U),Y=this.checkMatrix(Y);for(var ge=U.rows,Ye=U.columns,ct=new cr(ge,Ye),nt=0;nt<ge;nt++)for(var lt=0;lt<Ye;lt++)ct.set(nt,lt,Math.min(U.get(nt,lt),Y.get(nt,lt)));return ct}},{key:"max",value:function(U,Y){U=this.checkMatrix(U),Y=this.checkMatrix(Y);for(var ge=U.rows,Ye=U.columns,ct=new this(ge,Ye),nt=0;nt<ge;nt++)for(var lt=0;lt<Ye;lt++)ct.set(nt,lt,Math.max(U.get(nt,lt),Y.get(nt,lt)));return ct}},{key:"checkMatrix",value:function(U){return Ne.isMatrix(U)?U:new cr(U)}},{key:"isMatrix",value:function(U){return U!=null&&U.klass==="Matrix"}},{key:"copy",value:function(U,Y){var ge=S(U.entries()),Ye;try{for(ge.s();!(Ye=ge.n()).done;){var ct=he(Ye.value,3),nt=ct[0],lt=ct[1],fn=ct[2];Y.set(nt,lt,fn)}}catch(on){ge.e(on)}finally{ge.f()}return Y}}]),Ne}(Symbol.iterator);rr.prototype.klass="Matrix",typeof Symbol!="undefined"&&(rr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Et);function xn(Re,Ne){return Re-Ne}function Or(Re){return Re.every(function(Ne){return typeof Ne=="number"})}rr.random=rr.rand,rr.randomInt=rr.randInt,rr.diagonal=rr.diag,rr.prototype.diagonal=rr.prototype.diag,rr.identity=rr.eye,rr.prototype.negate=rr.prototype.neg,rr.prototype.tensorProduct=rr.prototype.kroneckerProduct;var Pr=new WeakSet,cr=function(Re){F(Ne,Re);function Ne(Te,U){var Y;if(ue(this,Ne),Y=m(this,Ne),$(N(Y),Pr),fe(N(Y),"data",void 0),Ne.isMatrix(Te))B(N(Y),Pr,ki).call(N(Y),Te.rows,Te.columns),Ne.copy(Te,N(Y));else if(Number.isInteger(Te)&&Te>=0)B(N(Y),Pr,ki).call(N(Y),Te,U);else if(Oe.isAnyArray(Te)){var ge=Te;if(Te=ge.length,U=Te?ge[0].length:0,typeof U!="number")throw new TypeError("Data must be a 2D array with at least one element");Y.data=[];for(var Ye=0;Ye<Te;Ye++){if(ge[Ye].length!==U)throw new RangeError("Inconsistent array dimensions");if(!Or(ge[Ye]))throw new TypeError("Input data contains non-numeric values");Y.data.push(Float64Array.from(ge[Ye]))}Y.rows=Te,Y.columns=U}else throw new TypeError("First argument must be a positive number or an array");return Y}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.data[U][Y]=ge,this}},{key:"get",value:function(U,Y){return this.data[U][Y]}},{key:"removeRow",value:function(U){return hn(this,U),this.data.splice(U,1),this.rows-=1,this}},{key:"addRow",value:function(U,Y){return Y===void 0&&(Y=U,U=this.rows),hn(this,U,!0),Y=Float64Array.from(Fn(this,Y)),this.data.splice(U,0,Y),this.rows+=1,this}},{key:"removeColumn",value:function(U){Bn(this,U);for(var Y=0;Y<this.rows;Y++){for(var ge=new Float64Array(this.columns-1),Ye=0;Ye<U;Ye++)ge[Ye]=this.data[Y][Ye];for(var ct=U+1;ct<this.columns;ct++)ge[ct-1]=this.data[Y][ct];this.data[Y]=ge}return this.columns-=1,this}},{key:"addColumn",value:function(U,Y){typeof Y=="undefined"&&(Y=U,U=this.columns),Bn(this,U,!0),Y=ir(this,Y);for(var ge=0;ge<this.rows;ge++){for(var Ye=new Float64Array(this.columns+1),ct=0;ct<U;ct++)Ye[ct]=this.data[ge][ct];for(Ye[ct++]=Y[ge];ct<this.columns+1;ct++)Ye[ct]=this.data[ge][ct-1];this.data[ge]=Ye}return this.columns+=1,this}}]),Ne}(rr);function ki(Re,Ne){if(this.data=[],Number.isInteger(Ne)&&Ne>=0)for(var Te=0;Te<Re;Te++)this.data.push(new Float64Array(Ne));else throw new TypeError("nColumns must be a positive integer");this.rows=Re,this.columns=Ne}cn(rr,cr);var Vr=new WeakMap,kr=function(Re){F(Ne,Re);function Ne(Te){var U;if(ue(this,Ne),U=m(this,Ne),l(N(U),Vr,{writable:!0,value:void 0}),cr.isMatrix(Te)){if(!Te.isSymmetric())throw new TypeError("not symmetric data");r(N(U),Vr,cr.copy(Te,new cr(Te.rows,Te.rows)))}else if(Number.isInteger(Te)&&Te>=0)r(N(U),Vr,new cr(Te,Te));else if(r(N(U),Vr,new cr(Te)),!U.isSymmetric())throw new TypeError("not symmetric data");return U}return Ee(Ne,[{key:"size",get:function(){return t(this,Vr).size}},{key:"rows",get:function(){return t(this,Vr).rows}},{key:"columns",get:function(){return t(this,Vr).columns}},{key:"diagonalSize",get:function(){return this.rows}},{key:"clone",value:function(){var U=new Ne(this.diagonalSize),Y=S(this.upperRightEntries()),ge;try{for(Y.s();!(ge=Y.n()).done;){var Ye=he(ge.value,3),ct=Ye[0],nt=Ye[1],lt=Ye[2];U.set(ct,nt,lt)}}catch(fn){Y.e(fn)}finally{Y.f()}return U}},{key:"toMatrix",value:function(){return new cr(this)}},{key:"get",value:function(U,Y){return t(this,Vr).get(U,Y)}},{key:"set",value:function(U,Y,ge){return t(this,Vr).set(U,Y,ge),t(this,Vr).set(Y,U,ge),this}},{key:"removeCross",value:function(U){return t(this,Vr).removeRow(U),t(this,Vr).removeColumn(U),this}},{key:"addCross",value:function(U,Y){Y===void 0&&(Y=U,U=this.diagonalSize);var ge=Y.slice();return ge.splice(U,1),t(this,Vr).addRow(U,ge),t(this,Vr).addColumn(U,Y),this}},{key:"applyMask",value:function(U){if(U.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");var Y=[],ge=S(U.entries()),Ye;try{for(ge.s();!(Ye=ge.n()).done;){var ct=he(Ye.value,2),nt=ct[0],lt=ct[1];lt||Y.push(nt)}}catch(er){ge.e(er)}finally{ge.f()}Y.reverse();for(var fn=0,on=Y;fn<on.length;fn++){var Gn=on[fn];this.removeCross(Gn)}return this}},{key:"toCompact",value:function(){for(var U=this.diagonalSize,Y=new Array(U*(U+1)/2),ge=0,Ye=0,ct=0;ct<Y.length;ct++)Y[ct]=this.get(Ye,ge),++ge>=U&&(ge=++Ye);return Y}},{key:"upperRightEntries",value:I().mark(function Te(){var U,Y,ge;return I().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:U=0,Y=0;case 1:if(!(U<this.diagonalSize)){ct.next=9;break}return ge=this.get(U,Y),ct.next=5,[U,Y,ge];case 5:++Y>=this.diagonalSize&&(Y=++U);case 6:ct.next=1;break;case 9:case"end":return ct.stop()}},Te,this)})},{key:"upperRightValues",value:I().mark(function Te(){var U,Y,ge;return I().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:U=0,Y=0;case 1:if(!(U<this.diagonalSize)){ct.next=9;break}return ge=this.get(U,Y),ct.next=5,ge;case 5:++Y>=this.diagonalSize&&(Y=++U);case 6:ct.next=1;break;case 9:case"end":return ct.stop()}},Te,this)})}],[{key:"isSymmetricMatrix",value:function(U){return cr.isMatrix(U)&&U.klassType==="SymmetricMatrix"}},{key:"zeros",value:function(U){return new this(U)}},{key:"ones",value:function(U){return new this(U).fill(1)}},{key:"fromCompact",value:function(U){var Y=U.length,ge=(Math.sqrt(8*Y+1)-1)/2;if(!Number.isInteger(ge))throw new TypeError("This array is not a compact representation of a Symmetric Matrix, ".concat(JSON.stringify(U)));for(var Ye=new Ne(ge),ct=0,nt=0,lt=0;lt<Y;lt++)Ye.set(ct,nt,U[lt]),++ct>=ge&&(ct=++nt);return Ye}}]),Ne}(rr);kr.prototype.klassType="SymmetricMatrix";var Ui=function(Re){F(Ne,Re);function Ne(Te){var U;if(ue(this,Ne),U=m(this,Ne,[Te]),!U.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix");return U}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return U===Y&&(ge=0),a(x(Ne.prototype),"set",this).call(this,U,Y,ge)}},{key:"addCross",value:function(U,Y){return Y===void 0&&(Y=U,U=this.diagonalSize),Y=Y.slice(),Y[U]=0,a(x(Ne.prototype),"addCross",this).call(this,U,Y)}},{key:"toSymmetricMatrix",value:function(){return new kr(this)}},{key:"clone",value:function(){var U=new Ne(this.diagonalSize),Y=S(this.upperRightEntries()),ge;try{for(Y.s();!(ge=Y.n()).done;){var Ye=he(ge.value,3),ct=Ye[0],nt=Ye[1],lt=Ye[2];ct!==nt&&U.set(ct,nt,lt)}}catch(fn){Y.e(fn)}finally{Y.f()}return U}},{key:"toCompact",value:function(){for(var U=this.diagonalSize,Y=(U-1)*U/2,ge=new Array(Y),Ye=1,ct=0,nt=0;nt<ge.length;nt++)ge[nt]=this.get(ct,Ye),++Ye>=U&&(Ye=++ct+1);return ge}}],[{key:"isDistanceMatrix",value:function(U){return kr.isSymmetricMatrix(U)&&U.klassSubType==="DistanceMatrix"}},{key:"fromCompact",value:function(U){var Y=U.length,ge=(Math.sqrt(8*Y+1)+1)/2;if(!Number.isInteger(ge))throw new TypeError("This array is not a compact representation of a DistanceMatrix, ".concat(JSON.stringify(U)));for(var Ye=new this(ge),ct=1,nt=0,lt=0;lt<Y;lt++)Ye.set(ct,nt,U[lt]),++ct>=ge&&(ct=++nt+1);return Ye}}]),Ne}(kr);Ui.prototype.klassSubType="DistanceMatrix";var Wr=function(Re){F(Ne,Re);function Ne(Te,U,Y){var ge;return ue(this,Ne),ge=m(this,Ne),ge.matrix=Te,ge.rows=U,ge.columns=Y,ge}return Ee(Ne)}(rr),no=function(Re){F(Ne,Re);function Ne(Te,U){var Y;return ue(this,Ne),Bn(Te,U),Y=m(this,Ne,[Te,Te.rows,1]),Y.column=U,Y}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(U,this.column,ge),this}},{key:"get",value:function(U){return this.matrix.get(U,this.column)}}]),Ne}(Wr),uo=function(Re){F(Ne,Re);function Ne(Te,U){var Y;return ue(this,Ne),Ei(Te,U),Y=m(this,Ne,[Te,Te.rows,U.length]),Y.columnIndices=U,Y}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(U,this.columnIndices[Y],ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(U,this.columnIndices[Y])}}]),Ne}(Wr),wi=function(Re){F(Ne,Re);function Ne(Te){return ue(this,Ne),m(this,Ne,[Te,Te.rows,Te.columns])}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(U,this.columns-Y-1,ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(U,this.columns-Y-1)}}]),Ne}(Wr),wo=function(Re){F(Ne,Re);function Ne(Te){return ue(this,Ne),m(this,Ne,[Te,Te.rows,Te.columns])}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(this.rows-U-1,Y,ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(this.rows-U-1,Y)}}]),Ne}(Wr),fs=function(Re){F(Ne,Re);function Ne(Te,U){var Y;return ue(this,Ne),hn(Te,U),Y=m(this,Ne,[Te,1,Te.columns]),Y.row=U,Y}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(this.row,Y,ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(this.row,Y)}}]),Ne}(Wr),zo=function(Re){F(Ne,Re);function Ne(Te,U){var Y;return ue(this,Ne),Nr(Te,U),Y=m(this,Ne,[Te,U.length,Te.columns]),Y.rowIndices=U,Y}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(this.rowIndices[U],Y,ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(this.rowIndices[U],Y)}}]),Ne}(Wr),hs=function(Re){F(Ne,Re);function Ne(Te,U,Y){var ge;return ue(this,Ne),Nr(Te,U),Ei(Te,Y),ge=m(this,Ne,[Te,U.length,Y.length]),ge.rowIndices=U,ge.columnIndices=Y,ge}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(this.rowIndices[U],this.columnIndices[Y],ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(this.rowIndices[U],this.columnIndices[Y])}}]),Ne}(Wr),ks=function(Re){F(Ne,Re);function Ne(Te,U,Y,ge,Ye){var ct;return ue(this,Ne),ci(Te,U,Y,ge,Ye),ct=m(this,Ne,[Te,Y-U+1,Ye-ge+1]),ct.startRow=U,ct.startColumn=ge,ct}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(this.startRow+U,this.startColumn+Y,ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(this.startRow+U,this.startColumn+Y)}}]),Ne}(Wr),rs=function(Re){F(Ne,Re);function Ne(Te){return ue(this,Ne),m(this,Ne,[Te,Te.columns,Te.rows])}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.matrix.set(Y,U,ge),this}},{key:"get",value:function(U,Y){return this.matrix.get(Y,U)}}]),Ne}(Wr),Eo=function(Re){F(Ne,Re);function Ne(Te){var U,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ue(this,Ne);var ge=Y.rows,Ye=ge===void 0?1:ge;if(Te.length%Ye!==0)throw new Error("the data length is not divisible by the number of rows");return U=m(this,Ne),U.rows=Ye,U.columns=Te.length/Ye,U.data=Te,U}return Ee(Ne,[{key:"set",value:function(U,Y,ge){var Ye=this._calculateIndex(U,Y);return this.data[Ye]=ge,this}},{key:"get",value:function(U,Y){var ge=this._calculateIndex(U,Y);return this.data[ge]}},{key:"_calculateIndex",value:function(U,Y){return U*this.columns+Y}}]),Ne}(rr),Qo=function(Re){F(Ne,Re);function Ne(Te){var U;return ue(this,Ne),U=m(this,Ne),U.data=Te,U.rows=Te.length,U.columns=Te[0].length,U}return Ee(Ne,[{key:"set",value:function(U,Y,ge){return this.data[U][Y]=ge,this}},{key:"get",value:function(U,Y){return this.data[U][Y]}}]),Ne}(rr);function Xs(Re,Ne){if(Oe.isAnyArray(Re))return Re[0]&&Oe.isAnyArray(Re[0])?new Qo(Re):new Eo(Re,Ne);throw new Error("the argument is not an array")}var Ys=function(){function Re(Ne){ue(this,Re),Ne=Qo.checkMatrix(Ne);var Te=Ne.clone(),U=Te.rows,Y=Te.columns,ge=new Float64Array(U),Ye=1,ct,nt,lt,fn,on,Gn,er,Kn,qr;for(ct=0;ct<U;ct++)ge[ct]=ct;for(Kn=new Float64Array(U),nt=0;nt<Y;nt++){for(ct=0;ct<U;ct++)Kn[ct]=Te.get(ct,nt);for(ct=0;ct<U;ct++){for(qr=Math.min(ct,nt),on=0,lt=0;lt<qr;lt++)on+=Te.get(ct,lt)*Kn[lt];Kn[ct]-=on,Te.set(ct,nt,Kn[ct])}for(fn=nt,ct=nt+1;ct<U;ct++)Math.abs(Kn[ct])>Math.abs(Kn[fn])&&(fn=ct);if(fn!==nt){for(lt=0;lt<Y;lt++)Gn=Te.get(fn,lt),Te.set(fn,lt,Te.get(nt,lt)),Te.set(nt,lt,Gn);er=ge[fn],ge[fn]=ge[nt],ge[nt]=er,Ye=-Ye}if(nt<U&&Te.get(nt,nt)!==0)for(ct=nt+1;ct<U;ct++)Te.set(ct,nt,Te.get(ct,nt)/Te.get(nt,nt))}this.LU=Te,this.pivotVector=ge,this.pivotSign=Ye}return Ee(Re,[{key:"isSingular",value:function(){for(var Te=this.LU,U=Te.columns,Y=0;Y<U;Y++)if(Te.get(Y,Y)===0)return!0;return!1}},{key:"solve",value:function(Te){Te=cr.checkMatrix(Te);var U=this.LU,Y=U.rows;if(Y!==Te.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var ge=Te.columns,Ye=Te.subMatrixRow(this.pivotVector,0,ge-1),ct=U.columns,nt,lt,fn;for(fn=0;fn<ct;fn++)for(nt=fn+1;nt<ct;nt++)for(lt=0;lt<ge;lt++)Ye.set(nt,lt,Ye.get(nt,lt)-Ye.get(fn,lt)*U.get(nt,fn));for(fn=ct-1;fn>=0;fn--){for(lt=0;lt<ge;lt++)Ye.set(fn,lt,Ye.get(fn,lt)/U.get(fn,fn));for(nt=0;nt<fn;nt++)for(lt=0;lt<ge;lt++)Ye.set(nt,lt,Ye.get(nt,lt)-Ye.get(fn,lt)*U.get(nt,fn))}return Ye}},{key:"determinant",get:function(){var Te=this.LU;if(!Te.isSquare())throw new Error("Matrix must be square");for(var U=this.pivotSign,Y=Te.columns,ge=0;ge<Y;ge++)U*=Te.get(ge,ge);return U}},{key:"lowerTriangularMatrix",get:function(){for(var Te=this.LU,U=Te.rows,Y=Te.columns,ge=new cr(U,Y),Ye=0;Ye<U;Ye++)for(var ct=0;ct<Y;ct++)Ye>ct?ge.set(Ye,ct,Te.get(Ye,ct)):Ye===ct?ge.set(Ye,ct,1):ge.set(Ye,ct,0);return ge}},{key:"upperTriangularMatrix",get:function(){for(var Te=this.LU,U=Te.rows,Y=Te.columns,ge=new cr(U,Y),Ye=0;Ye<U;Ye++)for(var ct=0;ct<Y;ct++)Ye<=ct?ge.set(Ye,ct,Te.get(Ye,ct)):ge.set(Ye,ct,0);return ge}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),Re}();function ot(Re,Ne){var Te=0;return Math.abs(Re)>Math.abs(Ne)?(Te=Ne/Re,Math.abs(Re)*Math.sqrt(1+Te*Te)):Ne!==0?(Te=Re/Ne,Math.abs(Ne)*Math.sqrt(1+Te*Te)):0}var mt=function(){function Re(Ne){ue(this,Re),Ne=Qo.checkMatrix(Ne);var Te=Ne.clone(),U=Ne.rows,Y=Ne.columns,ge=new Float64Array(Y),Ye,ct,nt,lt;for(nt=0;nt<Y;nt++){var fn=0;for(Ye=nt;Ye<U;Ye++)fn=ot(fn,Te.get(Ye,nt));if(fn!==0){for(Te.get(nt,nt)<0&&(fn=-fn),Ye=nt;Ye<U;Ye++)Te.set(Ye,nt,Te.get(Ye,nt)/fn);for(Te.set(nt,nt,Te.get(nt,nt)+1),ct=nt+1;ct<Y;ct++){for(lt=0,Ye=nt;Ye<U;Ye++)lt+=Te.get(Ye,nt)*Te.get(Ye,ct);for(lt=-lt/Te.get(nt,nt),Ye=nt;Ye<U;Ye++)Te.set(Ye,ct,Te.get(Ye,ct)+lt*Te.get(Ye,nt))}}ge[nt]=-fn}this.QR=Te,this.Rdiag=ge}return Ee(Re,[{key:"solve",value:function(Te){Te=cr.checkMatrix(Te);var U=this.QR,Y=U.rows;if(Te.rows!==Y)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var ge=Te.columns,Ye=Te.clone(),ct=U.columns,nt,lt,fn,on;for(fn=0;fn<ct;fn++)for(lt=0;lt<ge;lt++){for(on=0,nt=fn;nt<Y;nt++)on+=U.get(nt,fn)*Ye.get(nt,lt);for(on=-on/U.get(fn,fn),nt=fn;nt<Y;nt++)Ye.set(nt,lt,Ye.get(nt,lt)+on*U.get(nt,fn))}for(fn=ct-1;fn>=0;fn--){for(lt=0;lt<ge;lt++)Ye.set(fn,lt,Ye.get(fn,lt)/this.Rdiag[fn]);for(nt=0;nt<fn;nt++)for(lt=0;lt<ge;lt++)Ye.set(nt,lt,Ye.get(nt,lt)-Ye.get(fn,lt)*U.get(nt,fn))}return Ye.subMatrix(0,ct-1,0,ge-1)}},{key:"isFullRank",value:function(){for(var Te=this.QR.columns,U=0;U<Te;U++)if(this.Rdiag[U]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var Te=this.QR,U=Te.columns,Y=new cr(U,U),ge,Ye;for(ge=0;ge<U;ge++)for(Ye=0;Ye<U;Ye++)ge<Ye?Y.set(ge,Ye,Te.get(ge,Ye)):ge===Ye?Y.set(ge,Ye,this.Rdiag[ge]):Y.set(ge,Ye,0);return Y}},{key:"orthogonalMatrix",get:function(){var Te=this.QR,U=Te.rows,Y=Te.columns,ge=new cr(U,Y),Ye,ct,nt,lt;for(nt=Y-1;nt>=0;nt--){for(Ye=0;Ye<U;Ye++)ge.set(Ye,nt,0);for(ge.set(nt,nt,1),ct=nt;ct<Y;ct++)if(Te.get(nt,nt)!==0){for(lt=0,Ye=nt;Ye<U;Ye++)lt+=Te.get(Ye,nt)*ge.get(Ye,ct);for(lt=-lt/Te.get(nt,nt),Ye=nt;Ye<U;Ye++)ge.set(Ye,ct,ge.get(Ye,ct)+lt*Te.get(Ye,nt))}}return ge}}]),Re}(),_e=function(){function Re(Ne){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ue(this,Re),Ne=Qo.checkMatrix(Ne),Ne.isEmpty())throw new Error("Matrix must be non-empty");var U=Ne.rows,Y=Ne.columns,ge=Te.computeLeftSingularVectors,Ye=ge===void 0?!0:ge,ct=Te.computeRightSingularVectors,nt=ct===void 0?!0:ct,lt=Te.autoTranspose,fn=lt===void 0?!1:lt,on=!!Ye,Gn=!!nt,er=!1,Kn;if(U<Y)if(!fn)Kn=Ne.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Kn=Ne.transpose(),U=Kn.rows,Y=Kn.columns,er=!0;var qr=on;on=Gn,Gn=qr}else Kn=Ne.clone();for(var xi=Math.min(U,Y),Pn=Math.min(U+1,Y),$n=new Float64Array(Pn),Rr=new cr(U,xi),Di=new cr(Y,Y),Jr=new Float64Array(Y),$o=new Float64Array(U),Vo=new Float64Array(Pn),lo=0;lo<Pn;lo++)Vo[lo]=lo;for(var Xi=Math.min(U-1,Y),Ho=Math.max(0,Math.min(Y-2,U)),cs=Math.max(Xi,Ho),li=0;li<cs;li++){if(li<Xi){$n[li]=0;for(var xs=li;xs<U;xs++)$n[li]=ot($n[li],Kn.get(xs,li));if($n[li]!==0){Kn.get(li,li)<0&&($n[li]=-$n[li]);for(var Ae=li;Ae<U;Ae++)Kn.set(Ae,li,Kn.get(Ae,li)/$n[li]);Kn.set(li,li,Kn.get(li,li)+1)}$n[li]=-$n[li]}for(var Ke=li+1;Ke<Y;Ke++){if(li<Xi&&$n[li]!==0){for(var pt=0,Ht=li;Ht<U;Ht++)pt+=Kn.get(Ht,li)*Kn.get(Ht,Ke);pt=-pt/Kn.get(li,li);for(var an=li;an<U;an++)Kn.set(an,Ke,Kn.get(an,Ke)+pt*Kn.get(an,li))}Jr[Ke]=Kn.get(li,Ke)}if(on&&li<Xi)for(var Ln=li;Ln<U;Ln++)Rr.set(Ln,li,Kn.get(Ln,li));if(li<Ho){Jr[li]=0;for(var wr=li+1;wr<Y;wr++)Jr[li]=ot(Jr[li],Jr[wr]);if(Jr[li]!==0){Jr[li+1]<0&&(Jr[li]=0-Jr[li]);for(var yr=li+1;yr<Y;yr++)Jr[yr]/=Jr[li];Jr[li+1]+=1}if(Jr[li]=-Jr[li],li+1<U&&Jr[li]!==0){for(var ei=li+1;ei<U;ei++)$o[ei]=0;for(var Ii=li+1;Ii<U;Ii++)for(var to=li+1;to<Y;to++)$o[Ii]+=Jr[to]*Kn.get(Ii,to);for(var Ji=li+1;Ji<Y;Ji++)for(var Yi=-Jr[Ji]/Jr[li+1],Uo=li+1;Uo<U;Uo++)Kn.set(Uo,Ji,Kn.get(Uo,Ji)+Yi*$o[Uo])}if(Gn)for(var Oi=li+1;Oi<Y;Oi++)Di.set(Oi,li,Jr[Oi])}}var Co=Math.min(Y,U+1);if(Xi<Y&&($n[Xi]=Kn.get(Xi,Xi)),U<Co&&($n[Co-1]=0),Ho+1<Co&&(Jr[Ho]=Kn.get(Ho,Co-1)),Jr[Co-1]=0,on){for(var Fs=Xi;Fs<xi;Fs++){for(var ss=0;ss<U;ss++)Rr.set(ss,Fs,0);Rr.set(Fs,Fs,1)}for(var qo=Xi-1;qo>=0;qo--)if($n[qo]!==0){for(var js=qo+1;js<xi;js++){for(var Zs=0,Mo=qo;Mo<U;Mo++)Zs+=Rr.get(Mo,qo)*Rr.get(Mo,js);Zs=-Zs/Rr.get(qo,qo);for(var la=qo;la<U;la++)Rr.set(la,js,Rr.get(la,js)+Zs*Rr.get(la,qo))}for(var X=qo;X<U;X++)Rr.set(X,qo,-Rr.get(X,qo));Rr.set(qo,qo,1+Rr.get(qo,qo));for(var ve=0;ve<qo-1;ve++)Rr.set(ve,qo,0)}else{for(var Ie=0;Ie<U;Ie++)Rr.set(Ie,qo,0);Rr.set(qo,qo,1)}}if(Gn)for(var ke=Y-1;ke>=0;ke--){if(ke<Ho&&Jr[ke]!==0)for(var st=ke+1;st<Y;st++){for(var P=0,W=ke+1;W<Y;W++)P+=Di.get(W,ke)*Di.get(W,st);P=-P/Di.get(ke+1,ke);for(var ye=ke+1;ye<Y;ye++)Di.set(ye,st,Di.get(ye,st)+P*Di.get(ye,ke))}for(var Se=0;Se<Y;Se++)Di.set(Se,ke,0);Di.set(ke,ke,1)}for(var Be=Co-1,Fe=Number.EPSILON;Co>0;){var qe=void 0,Mt=void 0;for(qe=Co-2;qe>=-1&&qe!==-1;qe--){var Lt=Number.MIN_VALUE+Fe*Math.abs($n[qe]+Math.abs($n[qe+1]));if(Math.abs(Jr[qe])<=Lt||Number.isNaN(Jr[qe])){Jr[qe]=0;break}}if(qe===Co-2)Mt=4;else{var vn=void 0;for(vn=Co-1;vn>=qe&&vn!==qe;vn--){var Zn=(vn!==Co?Math.abs(Jr[vn]):0)+(vn!==qe+1?Math.abs(Jr[vn-1]):0);if(Math.abs($n[vn])<=Fe*Zn){$n[vn]=0;break}}vn===qe?Mt=3:vn===Co-1?Mt=1:(Mt=2,qe=vn)}switch(qe++,Mt){case 1:{var Qn=Jr[Co-2];Jr[Co-2]=0;for(var jn=Co-2;jn>=qe;jn--){var pr=ot($n[jn],Qn),vi=$n[jn]/pr,co=Qn/pr;if($n[jn]=pr,jn!==qe&&(Qn=-co*Jr[jn-1],Jr[jn-1]=vi*Jr[jn-1]),Gn)for(var di=0;di<Y;di++)pr=vi*Di.get(di,jn)+co*Di.get(di,Co-1),Di.set(di,Co-1,-co*Di.get(di,jn)+vi*Di.get(di,Co-1)),Di.set(di,jn,pr)}break}case 2:{var Zo=Jr[qe-1];Jr[qe-1]=0;for(var qi=qe;qi<Co;qi++){var is=ot($n[qi],Zo),Js=$n[qi]/is,Yo=Zo/is;if($n[qi]=is,Zo=-Yo*Jr[qi],Jr[qi]=Js*Jr[qi],on)for(var Ss=0;Ss<U;Ss++)is=Js*Rr.get(Ss,qi)+Yo*Rr.get(Ss,qe-1),Rr.set(Ss,qe-1,-Yo*Rr.get(Ss,qi)+Js*Rr.get(Ss,qe-1)),Rr.set(Ss,qi,is)}break}case 3:{var ko=Math.max(Math.abs($n[Co-1]),Math.abs($n[Co-2]),Math.abs(Jr[Co-2]),Math.abs($n[qe]),Math.abs(Jr[qe])),vs=$n[Co-1]/ko,xa=$n[Co-2]/ko,ua=Jr[Co-2]/ko,_s=$n[qe]/ko,Pa=Jr[qe]/ko,Us=((xa+vs)*(xa-vs)+ua*ua)/2,ta=vs*ua*(vs*ua),La=0;(Us!==0||ta!==0)&&(Us<0?La=0-Math.sqrt(Us*Us+ta):La=Math.sqrt(Us*Us+ta),La=ta/(Us+La));for(var qs=(_s+vs)*(_s-vs)+La,mu=_s*Pa,eo=qe;eo<Co-1;eo++){var ds=ot(qs,mu);ds===0&&(ds=Number.MIN_VALUE);var Vs=qs/ds,oa=mu/ds;if(eo!==qe&&(Jr[eo-1]=ds),qs=Vs*$n[eo]+oa*Jr[eo],Jr[eo]=Vs*Jr[eo]-oa*$n[eo],mu=oa*$n[eo+1],$n[eo+1]=Vs*$n[eo+1],Gn)for(var Oa=0;Oa<Y;Oa++)ds=Vs*Di.get(Oa,eo)+oa*Di.get(Oa,eo+1),Di.set(Oa,eo+1,-oa*Di.get(Oa,eo)+Vs*Di.get(Oa,eo+1)),Di.set(Oa,eo,ds);if(ds=ot(qs,mu),ds===0&&(ds=Number.MIN_VALUE),Vs=qs/ds,oa=mu/ds,$n[eo]=ds,qs=Vs*Jr[eo]+oa*$n[eo+1],$n[eo+1]=-oa*Jr[eo]+Vs*$n[eo+1],mu=oa*Jr[eo+1],Jr[eo+1]=Vs*Jr[eo+1],on&&eo<U-1)for(var ls=0;ls<U;ls++)ds=Vs*Rr.get(ls,eo)+oa*Rr.get(ls,eo+1),Rr.set(ls,eo+1,-oa*Rr.get(ls,eo)+Vs*Rr.get(ls,eo+1)),Rr.set(ls,eo,ds)}Jr[Co-2]=qs;break}case 4:{if($n[qe]<=0&&($n[qe]=$n[qe]<0?-$n[qe]:0,Gn))for(var Ha=0;Ha<=Be;Ha++)Di.set(Ha,qe,-Di.get(Ha,qe));for(;qe<Be&&!($n[qe]>=$n[qe+1]);){var sa=$n[qe];if($n[qe]=$n[qe+1],$n[qe+1]=sa,Gn&&qe<Y-1)for(var Xa=0;Xa<Y;Xa++)sa=Di.get(Xa,qe+1),Di.set(Xa,qe+1,Di.get(Xa,qe)),Di.set(Xa,qe,sa);if(on&&qe<U-1)for(var ma=0;ma<U;ma++)sa=Rr.get(ma,qe+1),Rr.set(ma,qe+1,Rr.get(ma,qe)),Rr.set(ma,qe,sa);qe++}Co--;break}}}if(er){var uc=Di;Di=Rr,Rr=uc}this.m=U,this.n=Y,this.s=$n,this.U=Rr,this.V=Di}return Ee(Re,[{key:"solve",value:function(Te){for(var U=Te,Y=this.threshold,ge=this.s.length,Ye=cr.zeros(ge,ge),ct=0;ct<ge;ct++)Math.abs(this.s[ct])<=Y?Ye.set(ct,ct,0):Ye.set(ct,ct,1/this.s[ct]);for(var nt=this.U,lt=this.rightSingularVectors,fn=lt.mmul(Ye),on=lt.rows,Gn=nt.rows,er=cr.zeros(on,Gn),Kn=0;Kn<on;Kn++)for(var qr=0;qr<Gn;qr++){for(var xi=0,Pn=0;Pn<ge;Pn++)xi+=fn.get(Kn,Pn)*nt.get(qr,Pn);er.set(Kn,qr,xi)}return er.mmul(U)}},{key:"solveForDiagonal",value:function(Te){return this.solve(cr.diag(Te))}},{key:"inverse",value:function(){for(var Te=this.V,U=this.threshold,Y=Te.rows,ge=Te.columns,Ye=new cr(Y,this.s.length),ct=0;ct<Y;ct++)for(var nt=0;nt<ge;nt++)Math.abs(this.s[nt])>U&&Ye.set(ct,nt,Te.get(ct,nt)/this.s[nt]);for(var lt=this.U,fn=lt.rows,on=lt.columns,Gn=new cr(Y,fn),er=0;er<Y;er++)for(var Kn=0;Kn<fn;Kn++){for(var qr=0,xi=0;xi<on;xi++)qr+=Ye.get(er,xi)*lt.get(Kn,xi);Gn.set(er,Kn,qr)}return Gn}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var Te=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,U=0,Y=this.s,ge=0,Ye=Y.length;ge<Ye;ge++)Y[ge]>Te&&U++;return U}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return cr.diag(this.s)}}]),Re}();function Z(Re){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Re=Qo.checkMatrix(Re),Ne?new _e(Re).inverse():Q(Re,cr.eye(Re.rows))}function Q(Re,Ne){var Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Re=Qo.checkMatrix(Re),Ne=Qo.checkMatrix(Ne),Te?new _e(Re).solve(Ne):Re.isSquare()?new Ys(Re).solve(Ne):new mt(Re).solve(Ne)}function le(Re){if(Re=cr.checkMatrix(Re),Re.isSquare()){if(Re.columns===0)return 1;var Ne,Te,U,Y;if(Re.columns===2)return Ne=Re.get(0,0),Te=Re.get(0,1),U=Re.get(1,0),Y=Re.get(1,1),Ne*Y-Te*U;if(Re.columns===3){var ge,Ye,ct;return ge=new hs(Re,[1,2],[1,2]),Ye=new hs(Re,[1,2],[0,2]),ct=new hs(Re,[1,2],[0,1]),Ne=Re.get(0,0),Te=Re.get(0,1),U=Re.get(0,2),Ne*le(ge)-Te*le(Ye)+U*le(ct)}else return new Ys(Re).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Xe(Re,Ne){for(var Te=[],U=0;U<Re;U++)U!==Ne&&Te.push(U);return Te}function dt(Re,Ne,Te){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,Y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(Re>Y)return new Array(Ne.rows+1).fill(0);for(var ge=Ne.addRow(Te,[0]),Ye=0;Ye<ge.rows;Ye++)Math.abs(ge.get(Ye,0))<U&&ge.set(Ye,0,0);return ge.to1DArray()}function ft(Re){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=Ne.thresholdValue,U=Te===void 0?1e-9:Te,Y=Ne.thresholdError,ge=Y===void 0?1e-9:Y;Re=cr.checkMatrix(Re);for(var Ye=Re.rows,ct=new cr(Ye,Ye),nt=0;nt<Ye;nt++){var lt=cr.columnVector(Re.getRow(nt)),fn=Re.subMatrixRow(Xe(Ye,nt)).transpose(),on=new _e(fn),Gn=on.solve(lt),er=cr.sub(lt,fn.mmul(Gn)).abs().max();ct.setRow(nt,dt(er,Gn,nt,U,ge))}return ct}function gt(Re){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(Re=cr.checkMatrix(Re),Re.isEmpty())return Re.transpose();for(var Te=new _e(Re,{autoTranspose:!0}),U=Te.leftSingularVectors,Y=Te.rightSingularVectors,ge=Te.diagonal,Ye=0;Ye<ge.length;Ye++)Math.abs(ge[Ye])>Ne?ge[Ye]=1/ge[Ye]:ge[Ye]=0;return Y.mmul(cr.diag(ge).mmul(U.transpose()))}function ln(Re){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re,Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Re=new cr(Re);var U=!1;if(j(Ne)==="object"&&!cr.isMatrix(Ne)&&!Oe.isAnyArray(Ne)?(Te=Ne,Ne=Re,U=!0):Ne=new cr(Ne),Re.rows!==Ne.rows)throw new TypeError("Both matrices must have the same number of rows");var Y=Te,ge=Y.center,Ye=ge===void 0?!0:ge;Ye&&(Re=Re.center("column"),U||(Ne=Ne.center("column")));for(var ct=Re.transpose().mmul(Ne),nt=0;nt<ct.rows;nt++)for(var lt=0;lt<ct.columns;lt++)ct.set(nt,lt,ct.get(nt,lt)*(1/(Re.rows-1)));return ct}function bn(Re){var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re,Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Re=new cr(Re);var U=!1;if(j(Ne)==="object"&&!cr.isMatrix(Ne)&&!Oe.isAnyArray(Ne)?(Te=Ne,Ne=Re,U=!0):Ne=new cr(Ne),Re.rows!==Ne.rows)throw new TypeError("Both matrices must have the same number of rows");var Y=Te,ge=Y.center,Ye=ge===void 0?!0:ge,ct=Y.scale,nt=ct===void 0?!0:ct;Ye&&(Re.center("column"),U||Ne.center("column")),nt&&(Re.scale("column"),U||Ne.scale("column"));for(var lt=Re.standardDeviation("column",{unbiased:!0}),fn=U?lt:Ne.standardDeviation("column",{unbiased:!0}),on=Re.transpose().mmul(Ne),Gn=0;Gn<on.rows;Gn++)for(var er=0;er<on.columns;er++)on.set(Gn,er,on.get(Gn,er)*(1/(lt[Gn]*fn[er]))*(1/(Re.rows-1)));return on}var En=function(){function Re(Ne){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ue(this,Re);var U=Te.assumeSymmetric,Y=U===void 0?!1:U;if(Ne=Qo.checkMatrix(Ne),!Ne.isSquare())throw new Error("Matrix is not a square matrix");if(Ne.isEmpty())throw new Error("Matrix must be non-empty");var ge=Ne.columns,Ye=new cr(ge,ge),ct=new Float64Array(ge),nt=new Float64Array(ge),lt=Ne,fn,on,Gn=!1;if(Y?Gn=!0:Gn=Ne.isSymmetric(),Gn){for(fn=0;fn<ge;fn++)for(on=0;on<ge;on++)Ye.set(fn,on,lt.get(fn,on));Cr(ge,nt,ct,Ye),tr(ge,nt,ct,Ye)}else{var er=new cr(ge,ge),Kn=new Float64Array(ge);for(on=0;on<ge;on++)for(fn=0;fn<ge;fn++)er.set(fn,on,lt.get(fn,on));ii(ge,er,Kn,Ye),Zi(ge,nt,ct,Ye,er)}this.n=ge,this.e=nt,this.d=ct,this.V=Ye}return Ee(Re,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var Te=this.n,U=this.e,Y=this.d,ge=new cr(Te,Te),Ye,ct;for(Ye=0;Ye<Te;Ye++){for(ct=0;ct<Te;ct++)ge.set(Ye,ct,0);ge.set(Ye,Ye,Y[Ye]),U[Ye]>0?ge.set(Ye,Ye+1,U[Ye]):U[Ye]<0&&ge.set(Ye,Ye-1,U[Ye])}return ge}}]),Re}();function Cr(Re,Ne,Te,U){var Y,ge,Ye,ct,nt,lt,fn,on;for(nt=0;nt<Re;nt++)Te[nt]=U.get(Re-1,nt);for(ct=Re-1;ct>0;ct--){for(on=0,Ye=0,lt=0;lt<ct;lt++)on=on+Math.abs(Te[lt]);if(on===0)for(Ne[ct]=Te[ct-1],nt=0;nt<ct;nt++)Te[nt]=U.get(ct-1,nt),U.set(ct,nt,0),U.set(nt,ct,0);else{for(lt=0;lt<ct;lt++)Te[lt]/=on,Ye+=Te[lt]*Te[lt];for(Y=Te[ct-1],ge=Math.sqrt(Ye),Y>0&&(ge=-ge),Ne[ct]=on*ge,Ye=Ye-Y*ge,Te[ct-1]=Y-ge,nt=0;nt<ct;nt++)Ne[nt]=0;for(nt=0;nt<ct;nt++){for(Y=Te[nt],U.set(nt,ct,Y),ge=Ne[nt]+U.get(nt,nt)*Y,lt=nt+1;lt<=ct-1;lt++)ge+=U.get(lt,nt)*Te[lt],Ne[lt]+=U.get(lt,nt)*Y;Ne[nt]=ge}for(Y=0,nt=0;nt<ct;nt++)Ne[nt]/=Ye,Y+=Ne[nt]*Te[nt];for(fn=Y/(Ye+Ye),nt=0;nt<ct;nt++)Ne[nt]-=fn*Te[nt];for(nt=0;nt<ct;nt++){for(Y=Te[nt],ge=Ne[nt],lt=nt;lt<=ct-1;lt++)U.set(lt,nt,U.get(lt,nt)-(Y*Ne[lt]+ge*Te[lt]));Te[nt]=U.get(ct-1,nt),U.set(ct,nt,0)}}Te[ct]=Ye}for(ct=0;ct<Re-1;ct++){if(U.set(Re-1,ct,U.get(ct,ct)),U.set(ct,ct,1),Ye=Te[ct+1],Ye!==0){for(lt=0;lt<=ct;lt++)Te[lt]=U.get(lt,ct+1)/Ye;for(nt=0;nt<=ct;nt++){for(ge=0,lt=0;lt<=ct;lt++)ge+=U.get(lt,ct+1)*U.get(lt,nt);for(lt=0;lt<=ct;lt++)U.set(lt,nt,U.get(lt,nt)-ge*Te[lt])}}for(lt=0;lt<=ct;lt++)U.set(lt,ct+1,0)}for(nt=0;nt<Re;nt++)Te[nt]=U.get(Re-1,nt),U.set(Re-1,nt,0);U.set(Re-1,Re-1,1),Ne[0]=0}function tr(Re,Ne,Te,U){var Y,ge,Ye,ct,nt,lt,fn,on,Gn,er,Kn,qr,xi,Pn,$n,Rr;for(Ye=1;Ye<Re;Ye++)Ne[Ye-1]=Ne[Ye];Ne[Re-1]=0;var Di=0,Jr=0,$o=Number.EPSILON;for(lt=0;lt<Re;lt++){for(Jr=Math.max(Jr,Math.abs(Te[lt])+Math.abs(Ne[lt])),fn=lt;fn<Re&&!(Math.abs(Ne[fn])<=$o*Jr);)fn++;if(fn>lt)do{for(Y=Te[lt],on=(Te[lt+1]-Y)/(2*Ne[lt]),Gn=ot(on,1),on<0&&(Gn=-Gn),Te[lt]=Ne[lt]/(on+Gn),Te[lt+1]=Ne[lt]*(on+Gn),er=Te[lt+1],ge=Y-Te[lt],Ye=lt+2;Ye<Re;Ye++)Te[Ye]-=ge;for(Di=Di+ge,on=Te[fn],Kn=1,qr=Kn,xi=Kn,Pn=Ne[lt+1],$n=0,Rr=0,Ye=fn-1;Ye>=lt;Ye--)for(xi=qr,qr=Kn,Rr=$n,Y=Kn*Ne[Ye],ge=Kn*on,Gn=ot(on,Ne[Ye]),Ne[Ye+1]=$n*Gn,$n=Ne[Ye]/Gn,Kn=on/Gn,on=Kn*Te[Ye]-$n*Y,Te[Ye+1]=ge+$n*(Kn*Y+$n*Te[Ye]),nt=0;nt<Re;nt++)ge=U.get(nt,Ye+1),U.set(nt,Ye+1,$n*U.get(nt,Ye)+Kn*ge),U.set(nt,Ye,Kn*U.get(nt,Ye)-$n*ge);on=-$n*Rr*xi*Pn*Ne[lt]/er,Ne[lt]=$n*on,Te[lt]=Kn*on}while(Math.abs(Ne[lt])>$o*Jr);Te[lt]=Te[lt]+Di,Ne[lt]=0}for(Ye=0;Ye<Re-1;Ye++){for(nt=Ye,on=Te[Ye],ct=Ye+1;ct<Re;ct++)Te[ct]<on&&(nt=ct,on=Te[ct]);if(nt!==Ye)for(Te[nt]=Te[Ye],Te[Ye]=on,ct=0;ct<Re;ct++)on=U.get(ct,Ye),U.set(ct,Ye,U.get(ct,nt)),U.set(ct,nt,on)}}function ii(Re,Ne,Te,U){var Y=0,ge=Re-1,Ye,ct,nt,lt,fn,on,Gn;for(on=Y+1;on<=ge-1;on++){for(Gn=0,lt=on;lt<=ge;lt++)Gn=Gn+Math.abs(Ne.get(lt,on-1));if(Gn!==0){for(nt=0,lt=ge;lt>=on;lt--)Te[lt]=Ne.get(lt,on-1)/Gn,nt+=Te[lt]*Te[lt];for(ct=Math.sqrt(nt),Te[on]>0&&(ct=-ct),nt=nt-Te[on]*ct,Te[on]=Te[on]-ct,fn=on;fn<Re;fn++){for(Ye=0,lt=ge;lt>=on;lt--)Ye+=Te[lt]*Ne.get(lt,fn);for(Ye=Ye/nt,lt=on;lt<=ge;lt++)Ne.set(lt,fn,Ne.get(lt,fn)-Ye*Te[lt])}for(lt=0;lt<=ge;lt++){for(Ye=0,fn=ge;fn>=on;fn--)Ye+=Te[fn]*Ne.get(lt,fn);for(Ye=Ye/nt,fn=on;fn<=ge;fn++)Ne.set(lt,fn,Ne.get(lt,fn)-Ye*Te[fn])}Te[on]=Gn*Te[on],Ne.set(on,on-1,Gn*ct)}}for(lt=0;lt<Re;lt++)for(fn=0;fn<Re;fn++)U.set(lt,fn,lt===fn?1:0);for(on=ge-1;on>=Y+1;on--)if(Ne.get(on,on-1)!==0){for(lt=on+1;lt<=ge;lt++)Te[lt]=Ne.get(lt,on-1);for(fn=on;fn<=ge;fn++){for(ct=0,lt=on;lt<=ge;lt++)ct+=Te[lt]*U.get(lt,fn);for(ct=ct/Te[on]/Ne.get(on,on-1),lt=on;lt<=ge;lt++)U.set(lt,fn,U.get(lt,fn)+ct*Te[lt])}}}function Zi(Re,Ne,Te,U,Y){var ge=Re-1,Ye=0,ct=Re-1,nt=Number.EPSILON,lt=0,fn=0,on=0,Gn=0,er=0,Kn=0,qr=0,xi=0,Pn,$n,Rr,Di,Jr,$o,Vo,lo,Xi,Ho,cs,li,xs,Ae,Ke;for(Pn=0;Pn<Re;Pn++)for((Pn<Ye||Pn>ct)&&(Te[Pn]=Y.get(Pn,Pn),Ne[Pn]=0),$n=Math.max(Pn-1,0);$n<Re;$n++)fn=fn+Math.abs(Y.get(Pn,$n));for(;ge>=Ye;){for(Di=ge;Di>Ye&&(Kn=Math.abs(Y.get(Di-1,Di-1))+Math.abs(Y.get(Di,Di)),Kn===0&&(Kn=fn),!(Math.abs(Y.get(Di,Di-1))<nt*Kn));)Di--;if(Di===ge)Y.set(ge,ge,Y.get(ge,ge)+lt),Te[ge]=Y.get(ge,ge),Ne[ge]=0,ge--,xi=0;else if(Di===ge-1){if(Vo=Y.get(ge,ge-1)*Y.get(ge-1,ge),on=(Y.get(ge-1,ge-1)-Y.get(ge,ge))/2,Gn=on*on+Vo,qr=Math.sqrt(Math.abs(Gn)),Y.set(ge,ge,Y.get(ge,ge)+lt),Y.set(ge-1,ge-1,Y.get(ge-1,ge-1)+lt),lo=Y.get(ge,ge),Gn>=0){for(qr=on>=0?on+qr:on-qr,Te[ge-1]=lo+qr,Te[ge]=Te[ge-1],qr!==0&&(Te[ge]=lo-Vo/qr),Ne[ge-1]=0,Ne[ge]=0,lo=Y.get(ge,ge-1),Kn=Math.abs(lo)+Math.abs(qr),on=lo/Kn,Gn=qr/Kn,er=Math.sqrt(on*on+Gn*Gn),on=on/er,Gn=Gn/er,$n=ge-1;$n<Re;$n++)qr=Y.get(ge-1,$n),Y.set(ge-1,$n,Gn*qr+on*Y.get(ge,$n)),Y.set(ge,$n,Gn*Y.get(ge,$n)-on*qr);for(Pn=0;Pn<=ge;Pn++)qr=Y.get(Pn,ge-1),Y.set(Pn,ge-1,Gn*qr+on*Y.get(Pn,ge)),Y.set(Pn,ge,Gn*Y.get(Pn,ge)-on*qr);for(Pn=Ye;Pn<=ct;Pn++)qr=U.get(Pn,ge-1),U.set(Pn,ge-1,Gn*qr+on*U.get(Pn,ge)),U.set(Pn,ge,Gn*U.get(Pn,ge)-on*qr)}else Te[ge-1]=lo+on,Te[ge]=lo+on,Ne[ge-1]=qr,Ne[ge]=-qr;ge=ge-2,xi=0}else{if(lo=Y.get(ge,ge),Xi=0,Vo=0,Di<ge&&(Xi=Y.get(ge-1,ge-1),Vo=Y.get(ge,ge-1)*Y.get(ge-1,ge)),xi===10){for(lt+=lo,Pn=Ye;Pn<=ge;Pn++)Y.set(Pn,Pn,Y.get(Pn,Pn)-lo);Kn=Math.abs(Y.get(ge,ge-1))+Math.abs(Y.get(ge-1,ge-2)),lo=Xi=.75*Kn,Vo=-.4375*Kn*Kn}if(xi===30&&(Kn=(Xi-lo)/2,Kn=Kn*Kn+Vo,Kn>0)){for(Kn=Math.sqrt(Kn),Xi<lo&&(Kn=-Kn),Kn=lo-Vo/((Xi-lo)/2+Kn),Pn=Ye;Pn<=ge;Pn++)Y.set(Pn,Pn,Y.get(Pn,Pn)-Kn);lt+=Kn,lo=Xi=Vo=.964}for(xi=xi+1,Jr=ge-2;Jr>=Di&&(qr=Y.get(Jr,Jr),er=lo-qr,Kn=Xi-qr,on=(er*Kn-Vo)/Y.get(Jr+1,Jr)+Y.get(Jr,Jr+1),Gn=Y.get(Jr+1,Jr+1)-qr-er-Kn,er=Y.get(Jr+2,Jr+1),Kn=Math.abs(on)+Math.abs(Gn)+Math.abs(er),on=on/Kn,Gn=Gn/Kn,er=er/Kn,!(Jr===Di||Math.abs(Y.get(Jr,Jr-1))*(Math.abs(Gn)+Math.abs(er))<nt*(Math.abs(on)*(Math.abs(Y.get(Jr-1,Jr-1))+Math.abs(qr)+Math.abs(Y.get(Jr+1,Jr+1))))));)Jr--;for(Pn=Jr+2;Pn<=ge;Pn++)Y.set(Pn,Pn-2,0),Pn>Jr+2&&Y.set(Pn,Pn-3,0);for(Rr=Jr;Rr<=ge-1&&(Ae=Rr!==ge-1,Rr!==Jr&&(on=Y.get(Rr,Rr-1),Gn=Y.get(Rr+1,Rr-1),er=Ae?Y.get(Rr+2,Rr-1):0,lo=Math.abs(on)+Math.abs(Gn)+Math.abs(er),lo!==0&&(on=on/lo,Gn=Gn/lo,er=er/lo)),lo!==0);Rr++)if(Kn=Math.sqrt(on*on+Gn*Gn+er*er),on<0&&(Kn=-Kn),Kn!==0){for(Rr!==Jr?Y.set(Rr,Rr-1,-Kn*lo):Di!==Jr&&Y.set(Rr,Rr-1,-Y.get(Rr,Rr-1)),on=on+Kn,lo=on/Kn,Xi=Gn/Kn,qr=er/Kn,Gn=Gn/on,er=er/on,$n=Rr;$n<Re;$n++)on=Y.get(Rr,$n)+Gn*Y.get(Rr+1,$n),Ae&&(on=on+er*Y.get(Rr+2,$n),Y.set(Rr+2,$n,Y.get(Rr+2,$n)-on*qr)),Y.set(Rr,$n,Y.get(Rr,$n)-on*lo),Y.set(Rr+1,$n,Y.get(Rr+1,$n)-on*Xi);for(Pn=0;Pn<=Math.min(ge,Rr+3);Pn++)on=lo*Y.get(Pn,Rr)+Xi*Y.get(Pn,Rr+1),Ae&&(on=on+qr*Y.get(Pn,Rr+2),Y.set(Pn,Rr+2,Y.get(Pn,Rr+2)-on*er)),Y.set(Pn,Rr,Y.get(Pn,Rr)-on),Y.set(Pn,Rr+1,Y.get(Pn,Rr+1)-on*Gn);for(Pn=Ye;Pn<=ct;Pn++)on=lo*U.get(Pn,Rr)+Xi*U.get(Pn,Rr+1),Ae&&(on=on+qr*U.get(Pn,Rr+2),U.set(Pn,Rr+2,U.get(Pn,Rr+2)-on*er)),U.set(Pn,Rr,U.get(Pn,Rr)-on),U.set(Pn,Rr+1,U.get(Pn,Rr+1)-on*Gn)}}}if(fn!==0){for(ge=Re-1;ge>=0;ge--)if(on=Te[ge],Gn=Ne[ge],Gn===0)for(Di=ge,Y.set(ge,ge,1),Pn=ge-1;Pn>=0;Pn--){for(Vo=Y.get(Pn,Pn)-on,er=0,$n=Di;$n<=ge;$n++)er=er+Y.get(Pn,$n)*Y.get($n,ge);if(Ne[Pn]<0)qr=Vo,Kn=er;else if(Di=Pn,Ne[Pn]===0?Y.set(Pn,ge,Vo!==0?-er/Vo:-er/(nt*fn)):(lo=Y.get(Pn,Pn+1),Xi=Y.get(Pn+1,Pn),Gn=(Te[Pn]-on)*(Te[Pn]-on)+Ne[Pn]*Ne[Pn],$o=(lo*Kn-qr*er)/Gn,Y.set(Pn,ge,$o),Y.set(Pn+1,ge,Math.abs(lo)>Math.abs(qr)?(-er-Vo*$o)/lo:(-Kn-Xi*$o)/qr)),$o=Math.abs(Y.get(Pn,ge)),nt*$o*$o>1)for($n=Pn;$n<=ge;$n++)Y.set($n,ge,Y.get($n,ge)/$o)}else if(Gn<0)for(Di=ge-1,Math.abs(Y.get(ge,ge-1))>Math.abs(Y.get(ge-1,ge))?(Y.set(ge-1,ge-1,Gn/Y.get(ge,ge-1)),Y.set(ge-1,ge,-(Y.get(ge,ge)-on)/Y.get(ge,ge-1))):(Ke=Mn(0,-Y.get(ge-1,ge),Y.get(ge-1,ge-1)-on,Gn),Y.set(ge-1,ge-1,Ke[0]),Y.set(ge-1,ge,Ke[1])),Y.set(ge,ge-1,0),Y.set(ge,ge,1),Pn=ge-2;Pn>=0;Pn--){for(Ho=0,cs=0,$n=Di;$n<=ge;$n++)Ho=Ho+Y.get(Pn,$n)*Y.get($n,ge-1),cs=cs+Y.get(Pn,$n)*Y.get($n,ge);if(Vo=Y.get(Pn,Pn)-on,Ne[Pn]<0)qr=Vo,er=Ho,Kn=cs;else if(Di=Pn,Ne[Pn]===0?(Ke=Mn(-Ho,-cs,Vo,Gn),Y.set(Pn,ge-1,Ke[0]),Y.set(Pn,ge,Ke[1])):(lo=Y.get(Pn,Pn+1),Xi=Y.get(Pn+1,Pn),li=(Te[Pn]-on)*(Te[Pn]-on)+Ne[Pn]*Ne[Pn]-Gn*Gn,xs=(Te[Pn]-on)*2*Gn,li===0&&xs===0&&(li=nt*fn*(Math.abs(Vo)+Math.abs(Gn)+Math.abs(lo)+Math.abs(Xi)+Math.abs(qr))),Ke=Mn(lo*er-qr*Ho+Gn*cs,lo*Kn-qr*cs-Gn*Ho,li,xs),Y.set(Pn,ge-1,Ke[0]),Y.set(Pn,ge,Ke[1]),Math.abs(lo)>Math.abs(qr)+Math.abs(Gn)?(Y.set(Pn+1,ge-1,(-Ho-Vo*Y.get(Pn,ge-1)+Gn*Y.get(Pn,ge))/lo),Y.set(Pn+1,ge,(-cs-Vo*Y.get(Pn,ge)-Gn*Y.get(Pn,ge-1))/lo)):(Ke=Mn(-er-Xi*Y.get(Pn,ge-1),-Kn-Xi*Y.get(Pn,ge),qr,Gn),Y.set(Pn+1,ge-1,Ke[0]),Y.set(Pn+1,ge,Ke[1]))),$o=Math.max(Math.abs(Y.get(Pn,ge-1)),Math.abs(Y.get(Pn,ge))),nt*$o*$o>1)for($n=Pn;$n<=ge;$n++)Y.set($n,ge-1,Y.get($n,ge-1)/$o),Y.set($n,ge,Y.get($n,ge)/$o)}for(Pn=0;Pn<Re;Pn++)if(Pn<Ye||Pn>ct)for($n=Pn;$n<Re;$n++)U.set(Pn,$n,Y.get(Pn,$n));for($n=Re-1;$n>=Ye;$n--)for(Pn=Ye;Pn<=ct;Pn++){for(qr=0,Rr=Ye;Rr<=Math.min($n,ct);Rr++)qr=qr+U.get(Pn,Rr)*Y.get(Rr,$n);U.set(Pn,$n,qr)}}}function Mn(Re,Ne,Te,U){var Y,ge;return Math.abs(Te)>Math.abs(U)?(Y=U/Te,ge=Te+Y*U,[(Re+Y*Ne)/ge,(Ne-Y*Re)/ge]):(Y=Te/U,ge=U+Y*Te,[(Y*Re+Ne)/ge,(Y*Ne-Re)/ge])}var Xn=function(){function Re(Ne){if(ue(this,Re),Ne=Qo.checkMatrix(Ne),!Ne.isSymmetric())throw new Error("Matrix is not symmetric");var Te=Ne,U=Te.rows,Y=new cr(U,U),ge=!0,Ye,ct,nt;for(ct=0;ct<U;ct++){var lt=0;for(nt=0;nt<ct;nt++){var fn=0;for(Ye=0;Ye<nt;Ye++)fn+=Y.get(nt,Ye)*Y.get(ct,Ye);fn=(Te.get(ct,nt)-fn)/Y.get(nt,nt),Y.set(ct,nt,fn),lt=lt+fn*fn}for(lt=Te.get(ct,ct)-lt,ge&=lt>0,Y.set(ct,ct,Math.sqrt(Math.max(lt,0))),nt=ct+1;nt<U;nt++)Y.set(ct,nt,0)}this.L=Y,this.positiveDefinite=!!ge}return Ee(Re,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(Te){Te=Qo.checkMatrix(Te);var U=this.L,Y=U.rows;if(Te.rows!==Y)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var ge=Te.columns,Ye=Te.clone(),ct,nt,lt;for(lt=0;lt<Y;lt++)for(nt=0;nt<ge;nt++){for(ct=0;ct<lt;ct++)Ye.set(lt,nt,Ye.get(lt,nt)-Ye.get(ct,nt)*U.get(lt,ct));Ye.set(lt,nt,Ye.get(lt,nt)/U.get(lt,lt))}for(lt=Y-1;lt>=0;lt--)for(nt=0;nt<ge;nt++){for(ct=lt+1;ct<Y;ct++)Ye.set(lt,nt,Ye.get(lt,nt)-Ye.get(ct,nt)*U.get(ct,lt));Ye.set(lt,nt,Ye.get(lt,nt)/U.get(lt,lt))}return Ye}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),Re}(),$r=Ee(function Re(Ne){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ue(this,Re),Ne=Qo.checkMatrix(Ne);var U=Te.Y,Y=Te.scaleScores,ge=Y===void 0?!1:Y,Ye=Te.maxIterations,ct=Ye===void 0?1e3:Ye,nt=Te.terminationCriteria,lt=nt===void 0?1e-10:nt,fn;if(U){if(Oe.isAnyArray(U)&&typeof U[0]=="number"?U=cr.columnVector(U):U=Qo.checkMatrix(U),U.rows!==Ne.rows)throw new Error("Y should have the same number of rows as X");fn=U.getColumnVector(0)}else fn=Ne.getColumnVector(0);for(var on=1,Gn,er,Kn,qr,xi=0;xi<ct&&on>lt;xi++)Kn=Ne.transpose().mmul(fn).div(fn.transpose().mmul(fn).get(0,0)),Kn=Kn.div(Kn.norm()),Gn=Ne.mmul(Kn).div(Kn.transpose().mmul(Kn).get(0,0)),xi>0&&(on=Gn.clone().sub(qr).pow(2).sum()),qr=Gn.clone(),U?(er=U.transpose().mmul(Gn).div(Gn.transpose().mmul(Gn).get(0,0)),er=er.div(er.norm()),fn=U.mmul(er).div(er.transpose().mmul(er).get(0,0))):fn=Gn;if(U){var Pn=Ne.transpose().mmul(Gn).div(Gn.transpose().mmul(Gn).get(0,0));Pn=Pn.div(Pn.norm());var $n=Ne.clone().sub(Gn.clone().mmul(Pn.transpose())),Rr=fn.transpose().mmul(Gn).div(Gn.transpose().mmul(Gn).get(0,0)),Di=U.clone().sub(Gn.clone().mulS(Rr.get(0,0)).mmul(er.transpose()));this.t=Gn,this.p=Pn.transpose(),this.w=Kn.transpose(),this.q=er,this.u=fn,this.s=Gn.transpose().mmul(Gn),this.xResidual=$n,this.yResidual=Di,this.betas=Rr}else this.w=Kn.transpose(),this.s=Gn.transpose().mmul(Gn).sqrt(),ge?this.t=Gn.clone().div(this.s.get(0,0)):this.t=Gn,this.xResidual=Ne.sub(Gn.mmul(Kn.transpose()))});b.AbstractMatrix=rr,b.CHO=Xn,b.CholeskyDecomposition=Xn,b.DistanceMatrix=Ui,b.EVD=En,b.EigenvalueDecomposition=En,b.LU=Ys,b.LuDecomposition=Ys,b.Matrix=cr,b.MatrixColumnSelectionView=uo,b.MatrixColumnView=no,b.MatrixFlipColumnView=wi,b.MatrixFlipRowView=wo,b.MatrixRowSelectionView=zo,b.MatrixRowView=fs,b.MatrixSelectionView=hs,b.MatrixSubView=ks,b.MatrixTransposeView=rs,b.NIPALS=$r,b.Nipals=$r,b.QR=mt,b.QrDecomposition=mt,b.SVD=_e,b.SingularValueDecomposition=_e,b.SymmetricMatrix=kr,b.WrapperMatrix1D=Eo,b.WrapperMatrix2D=Qo,b.correlation=bn,b.covariance=ln,b.default=cr,b.determinant=le,b.inverse=Z,b.linearDependencies=ft,b.pseudoInverse=gt,b.solve=Q,b.wrap=Xs},1377:function(T,b,u){"use strict";function a(_t){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt},a(_t)}Object.defineProperty(b,"__esModule",{value:!0});var o=u(7711),l=j(o),r=u(7305),e=j(r),t=u(5397),s=j(t),h=u(5268),m=j(h),d=u(3952),v=j(d),x=u(9962),N=j(x),F=u(8039),ae=j(F),$=u(5500),te=j($),fe=u(1106),B=j(fe),he=u(7588),z=j(he),ee=u(3059),pe=j(ee),S=u(6796),q=j(S),M=u(9755),I=j(M);u(9370);function j(_t){return _t&&_t.__esModule?_t:{default:_t}}function ue(_t,Tt){var at=typeof Symbol!="undefined"&&_t[Symbol.iterator]||_t["@@iterator"];if(!at){if(Array.isArray(_t)||(at=Et(_t))||Tt&&_t&&typeof _t.length=="number"){at&&(_t=at);var ce=0,ut=function(){};return{s:ut,n:function(){return ce>=_t.length?{done:!0}:{done:!1,value:_t[ce++]}},e:function(xt){throw xt},f:ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ze=!0,Wt=!1,Ut;return{s:function(){at=at.call(_t)},n:function(){var xt=at.next();return Ze=xt.done,xt},e:function(xt){Wt=!0,Ut=xt},f:function(){try{!Ze&&at.return!=null&&at.return()}finally{if(Wt)throw Ut}}}}function se(_t,Tt){var at=Object.keys(_t);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(_t);Tt&&(ce=ce.filter(function(ut){return Object.getOwnPropertyDescriptor(_t,ut).enumerable})),at.push.apply(at,ce)}return at}function Ee(_t){for(var Tt=1;Tt<arguments.length;Tt++){var at=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?se(Object(at),!0).forEach(function(ce){vt(_t,ce,at[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_t,Object.getOwnPropertyDescriptors(at)):se(Object(at)).forEach(function(ce){Object.defineProperty(_t,ce,Object.getOwnPropertyDescriptor(at,ce))})}return _t}function Ce(_t){return Le(_t)||Oe(_t)||Et(_t)||xe()}function xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(_t){if(typeof Symbol!="undefined"&&_t[Symbol.iterator]!=null||_t["@@iterator"]!=null)return Array.from(_t)}function Le(_t){if(Array.isArray(_t))return Ct(_t)}function Ge(_t,Tt){return At(_t)||Gt(_t,Tt)||Et(_t,Tt)||He()}function He(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(_t,Tt){if(_t){if(typeof _t=="string")return Ct(_t,Tt);var at=Object.prototype.toString.call(_t).slice(8,-1);if(at==="Object"&&_t.constructor&&(at=_t.constructor.name),at==="Map"||at==="Set")return Array.from(_t);if(at==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(at))return Ct(_t,Tt)}}function Ct(_t,Tt){(Tt==null||Tt>_t.length)&&(Tt=_t.length);for(var at=0,ce=new Array(Tt);at<Tt;at++)ce[at]=_t[at];return ce}function Gt(_t,Tt){var at=_t==null?null:typeof Symbol!="undefined"&&_t[Symbol.iterator]||_t["@@iterator"];if(at!=null){var ce,ut,Ze,Wt,Ut=[],jt=!0,xt=!1;try{if(Ze=(at=at.call(_t)).next,Tt===0){if(Object(at)!==at)return;jt=!1}else for(;!(jt=(ce=Ze.call(at)).done)&&(Ut.push(ce.value),Ut.length!==Tt);jt=!0);}catch($t){xt=!0,ut=$t}finally{try{if(!jt&&at.return!=null&&(Wt=at.return(),Object(Wt)!==Wt))return}finally{if(xt)throw ut}}return Ut}}function At(_t){if(Array.isArray(_t))return _t}function vt(_t,Tt,at){return Tt=Fn(Tt),Tt in _t?Object.defineProperty(_t,Tt,{value:at,enumerable:!0,configurable:!0,writable:!0}):_t[Tt]=at,_t}function cn(_t,Tt){if(!(_t instanceof Tt))throw new TypeError("Cannot call a class as a function")}function hn(_t,Tt){for(var at=0;at<Tt.length;at++){var ce=Tt[at];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(_t,Fn(ce.key),ce)}}function Bn(_t,Tt,at){return Tt&&hn(_t.prototype,Tt),at&&hn(_t,at),Object.defineProperty(_t,"prototype",{writable:!1}),_t}function Fn(_t){var Tt=ir(_t,"string");return a(Tt)=="symbol"?Tt:String(Tt)}function ir(_t,Tt){if(a(_t)!="object"||!_t)return _t;var at=_t[Symbol.toPrimitive];if(at!==void 0){var ce=at.call(_t,Tt||"default");if(a(ce)!="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Tt==="string"?String:Number)(_t)}function Nr(_t,Tt,at){return Tt=Ot(Tt),Ei(_t,ci()?Reflect.construct(Tt,at||[],Ot(_t).constructor):Tt.apply(_t,at))}function Ei(_t,Tt){if(Tt&&(a(Tt)==="object"||typeof Tt=="function"))return Tt;if(Tt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fr(_t)}function ci(){try{var _t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(Tt){}return(ci=function(){return!!_t})()}function Ot(_t){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(at){return at.__proto__||Object.getPrototypeOf(at)},Ot(_t)}function fr(_t){if(_t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _t}function Pi(_t,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Super expression must either be null or a function");_t.prototype=Object.create(Tt&&Tt.prototype,{constructor:{value:_t,writable:!0,configurable:!0}}),Object.defineProperty(_t,"prototype",{writable:!1}),Tt&&Li(_t,Tt)}function Li(_t,Tt){return Li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ce,ut){return ce.__proto__=ut,ce},Li(_t,Tt)}var zn=u(4609),$e=u(9392),Xt=u(4572),Rt=function(_t){Pi(Tt,_t);function Tt(at){var ce;return cn(this,Tt),ce=Nr(this,Tt,[at]),ce.root=at.root,ce.layout=at.layout,ce.layoutOptions=at.layoutOptions,$e.isObject(ce.layout)&&!$e.isFunction(ce.layout)&&(ce.previousIsFlatNode=ce.layout.isFlatNode,ce.layoutOptions=ce.layout.options||ce.layoutOptions,ce.layout=ce.layout.type),ce.layout={type:ce.layout,options:ce.layoutOptions||{}},ce.zoomable=at.zoomable||!1,ce.moveable=at.moveable||!1,ce.draggable=at.draggable||!1,ce.linkable=at.linkable||!1,ce.disLinkable=at.disLinkable||!1,ce.theme={group:{type:$e.get(at,"theme.group.type")||"normal",includeGroups:$e.get(at,"theme.group.includeGroups",!1),dragGroupZIndex:$e.get(at,"theme.group.dragGroupZIndex",50)},node:{dragNodeZIndex:$e.get(at,"theme.node.dragNodeZIndex",250)},edge:{type:$e.get(at,"theme.edge.type")||"node",shapeType:$e.get(at,"theme.edge.shapeType")||"Straight",hasRadius:$e.get(at,"theme.edge.hasRadius")||!1,Class:$e.get(at,"theme.edge.Class")||s.default,arrow:$e.get(at,"theme.edge.arrow"),arrowShapeType:$e.get(at,"theme.edge.arrowShapeType","default"),arrowPosition:$e.get(at,"theme.edge.arrowPosition"),arrowOffset:$e.get(at,"theme.edge.arrowOffset"),draggable:$e.get(at,"theme.edge.draggable"),label:$e.get(at,"theme.edge.label"),labelPosition:$e.get(at,"theme.edge.labelPosition"),labelOffset:$e.get(at,"theme.edge.labelOffset"),labelUpdateInterval:$e.get(at,"theme.edge.labelUpdateInterval",20),isRepeat:$e.get(at,"theme.edge.isRepeat")||!1,isLinkMyself:$e.get(at,"theme.edge.isLinkMyself")||!1,isExpandWidth:$e.get(at,"theme.edge.isExpandWidth")||!1,defaultAnimate:$e.get(at,"theme.edge.defaultAnimate")||!1,dragEdgeZindex:$e.get(at,"theme.edge.dragEdgeZindex",499)},endpoint:{linkableHighlight:$e.get(at,"theme.endpoint.linkableHighlight")||!1,limitNum:$e.get(at,"theme.endpoint.limitNum"),expandArea:{left:$e.get(at,"theme.endpoint.expandArea.left")===void 0?10:$e.get(at,"theme.endpoint.expandArea.left"),right:$e.get(at,"theme.endpoint.expandArea.right")===void 0?10:$e.get(at,"theme.endpoint.expandArea.right"),top:$e.get(at,"theme.endpoint.expandArea.top")===void 0?10:$e.get(at,"theme.endpoint.expandArea.top"),bottom:$e.get(at,"theme.endpoint.expandArea.bottom")===void 0?10:$e.get(at,"theme.endpoint.expandArea.bottom")},isAllowLinkInSameNode:$e.get(at,"theme.endpoint.isAllowLinkInSameNode",!0)},zoomGap:$e.get(at,"theme.zoomGap")||.001,autoFixCanvas:{enable:$e.get(at,"theme.autoFixCanvas.enable",!1),autoMovePadding:$e.get(at,"theme.autoFixCanvas.autoMovePadding")||[20,20,20,20]},autoResizeRootSize:$e.get(at,"theme.autoResizeRootSize",!0),isMouseMoveStopPropagation:$e.get(at,"theme.isMouseMoveStopPropagation")||!1},ce.global=$e.get(at,"global",{isScopeStrict:$e.get(at,"global.isScopeStrict"),limitQueueLen:5,isCloneDeep:$e.get(at,"global.isCloneDeep",!0)}),ce._zoomData=1,ce._moveData=[0,0],ce._zoomTimer=null,ce.groups=[],ce.nodes=[],ce.edges=[],ce.isSelectMode=!1,ce.selectContents=[],ce.selectMode="include",ce.selectItem={nodes:[],edges:[],groups:[],endpoints:[]},ce._remarkZoom=void 0,ce._remarkMove=void 0,ce.svg=null,ce.wrapper=null,ce.canvasWrapper=null,ce._dragGroupZIndex=ce.theme.group.dragGroupZIndex,ce._dragNodeZIndex=ce.theme.node.dragNodeZIndex,ce._dragEdgeZindex=ce.theme.edge.dragEdgeZindex,ce._genWrapper(),ce._genSvgWrapper(),ce._genCanvasWrapper(),I.default.init(ce.svg),ce._dragType=null,ce._dragNode=null,ce._mouseMoved=!1,ce._dragEndpoint=null,ce._dragEdges=[],ce._dragPathEdge=null,ce._dragGroup=null,ce._rootWidth=zn(ce.root).width(),ce._rootHeight=zn(ce.root).height(),zn(ce.root).css("overflow","hidden"),zn(ce.root).css("position")==="static"&&zn(ce.root).css("position","relative"),ce._hoverGroupQueue=[],ce._hoverGroupObj=void 0,ce._hoverGroupTimer=void 0,ce._gridService=new z.default({root:ce.root,canvas:fr(ce)}),ce._gridObjQueue=[],ce._gridObj=void 0,ce._gridTimer=void 0,ce._guidelineService=new pe.default({root:ce.root,canvas:fr(ce)}),ce._guideObjQueue=[],ce._guideObj=void 0,ce._guideTimer=void 0,ce._coordinateService=new te.default({canvas:fr(ce),terOffsetX:zn(ce.root).offset().left,terOffsetY:zn(ce.root).offset().top,terWidth:zn(ce.root).width(),terHeight:zn(ce.root).height(),canOffsetX:ce._moveData[0],canOffsetY:ce._moveData[1],scale:ce._zoomData}),ce._addEventListener(),ce._unionData={__system:{nodes:[],edges:[],groups:[],endpoints:[]}},ce._NodeClass=e.default,ce._GroupClass=m.default,ce.actionQueue=[],ce.actionQueueIndex=-1,ce._autoMoveDir=[],ce._autoMoveTimer=null,ce._hasInited=!1,ce._updateInterval=setInterval(function(){ce.nodes.forEach(function(ut){ut._isForceUpdateSize=!0})},5e3),ce._cache={nodes:{}},ce._redrawPromises=[],ce._isRedraw=!1,ce._isFocusing=!1,ce}return Bn(Tt,[{key:"draw",value:function(ce,ut){var Ze=this,Wt=ce.groups||[],Ut=ce.nodes||[],jt=ce.edges||[];this.layout&&!ce.isNotRelayout&&this._autoLayout({groups:Wt,nodes:Ut,edges:jt});var xt=new Promise(function($t,Un){setTimeout(function(){Ze.addGroups(Wt),$t()})}).then(function(){return new Promise(function($t,Un){setTimeout(function(){Ze.addNodes(Ut),$t()},10)})}).then(function($t){return new Promise(function(Un,qn){setTimeout(function(){Ze.addEdges(jt),Un()},20)})});xt.then(function(){Ze.actionQueue=[],Ze.actionQueueIndex=-1,ut&&ut({nodes:Ze.nodes,edges:Ze.edges,groups:Ze.groups}),Ze._hasInited=!0})}},{key:"redraw",value:function(ce,ut){var Ze=this;if(this._redrawPromises.push({opts:ce,callback:ut}),!this._isRedraw){var Wt=function jt(xt){xt.then(function($t){var Un=$t.opts,qn=$t.callback;Ze.removeNodes(Ze.nodes.map(function(rr){return rr.id})||[]),Ze.removeGroups(Ze.groups.map(function(rr){return rr.id})||[]),Ze.clearActionQueue(),Ze.draw(Un||{},function(){if(qn&&qn(),Ze._redrawPromises.length>0){var rr=Ze._redrawPromises.shift();jt(Promise.resolve(rr))}else Ze._isRedraw=!1})})},Ut=this._redrawPromises.shift();Wt(Promise.resolve(Ut))}}},{key:"getDataMap",value:function(){return{nodes:this.nodes,edges:this.edges,groups:this.groups}}},{key:"autoLayout",value:function(ce,ut){var Ze=this;this.layout=$e.assign({},this.layout,{type:ce,options:ut});var Wt=this.nodes,Ut=this.groups,jt=this.edges,xt=Wt.map(function(qn){return qn.options}),$t=Ut.map(function(qn){return qn.options}),Un=jt.map(function(qn){return{source:$e.get(qn,"sourceNode.id"),target:$e.get(qn,"targetNode.id")}});this._autoLayout({groups:$t,nodes:xt,edges:Un}),xt.forEach(function(qn,rr){Ze.nodes[rr].moveTo(qn.left,qn.top)})}},{key:"_genSvgWrapper",value:function(){function ce(){var qn=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i,/Electron/i];return qn.some(function(rr){return window.navigator.userAgent.match(rr)})}var ut=ce(),Ze="100%",Wt="100%",Ut=function(){var rr=0,xn=window.screen,Or=window.navigator.userAgent.toLowerCase();return window.devicePixelRatio!==void 0?rr=window.devicePixelRatio:~Or.indexOf("msie")?xn.deviceXDPI&&xn.logicalXDPI&&(rr=xn.deviceXDPI/xn.logicalXDPI):window.outerWidth!==void 0&&window.innerWidth!==void 0&&(rr=window.outerWidth/window.innerWidth),rr&&(rr=Math.round(rr*100)),rr};if(!ut){var jt=1/(Ut()/200);Ze=1*jt+"px",Wt=1*jt+"px"}var xt=zn(document.createElementNS("http://www.w3.org/2000/svg","svg")).attr("class","butterfly-svg").attr("width",Ze).attr("height",Wt).attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg").css("z-index",this._dragEdgeZindex).appendTo(this.wrapper);if(!ut){window.onresize=function(){var qn=1/(Ut()/200);xt.attr("width",1*qn+"px").attr("height",1*qn+"px")};var $t=zn(this.wrapper)[0].getBoundingClientRect(),Un=xt[0].getBoundingClientRect();xt.css("top",$t.top-Un.top+"px").css("left",$t.left-Un.left+"px")}return this.svg=xt}},{key:"_genWrapper",value:function(){var ce=zn('<div class="butterfly-wrapper"></div>').appendTo(this.root);return this.wrapper=ce[0]}},{key:"_genCanvasWrapper",value:function(){this.canvasWrapper=new ae.default,this.canvasWrapper.init({root:this.root,_on:this.on.bind(this),_emit:this.emit.bind(this)})}},{key:"_addEventListener",value:function(){var ce=this;this.zoomable&&this.setZoomable(!0),this.moveable&&this.setMoveable(!0);var ut=/Chrome/.test(window.navigator.userAgent)&&/Google Inc/.test(window.navigator.vendor),Ze=function(){var xt=window.navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return xt?parseInt(xt[2],10):!1},Wt=ut&&Ze()>=64;if(Wt&&window.ResizeObserver&&this.theme.autoResizeRootSize){var Ut=new ResizeObserver(function(jt){ce._rootWidth=zn(ce.root).width(),ce._rootHeight=zn(ce.root).height(),ce._coordinateService._changeCanvasInfo({terOffsetX:zn(ce.root).offset().left,terOffsetY:zn(ce.root).offset().top,terWidth:zn(ce.root).width(),terHeight:zn(ce.root).height()}),ce.canvasWrapper.resize({root:ce.root}),ce.setGridMode(!0,void 0,!0)});Ut.observe(this.root)}else window.addEventListener("resize",function(){ce._rootWidth=zn(ce.root).width(),ce._rootHeight=zn(ce.root).height(),ce._coordinateService._changeCanvasInfo({terOffsetX:zn(ce.root).offset().left,terOffsetY:zn(ce.root).offset().top,terWidth:zn(ce.root).width(),terHeight:zn(ce.root).height()}),ce.canvasWrapper.resize({root:ce.root}),ce.setGridMode(!0,void 0,!0)});this.on("InnerEvents",function(jt){if(jt.type==="node:addEndpoint")ce._addEndpoint(jt.data,"node",jt.isInited);else if(jt.type==="node:removeEndpoint"){var xt=jt.data,$t=ce.edges.filter(function(Pr){return Pr.sourceNode.id===xt.nodeId&&Pr.sourceEndpoint.id===xt.id||Pr.targetNode.id===xt.nodeId&&Pr.targetEndpoint.id===xt.id});ce.removeEdges($t)}else if(jt.type==="group:addEndpoint")ce._addEndpoint(jt.data,"group",jt.isInited);else if(jt.type==="node:dragBegin")ce._dragType="node:drag",ce._dragNode=jt.data;else if(jt.type==="node:mouseDown")ce._dragType="node:mouseDown";else if(jt.type==="group:dragBegin")ce._dragType="group:drag",ce._dragNode=ce._dragGroup=jt.data;else if(jt.type==="endpoint:drag")ce._dragType="endpoint:drag",ce._dragEndpoint=jt.data;else if(jt.type==="node:move")ce._moveNode(jt.node,jt.x,jt.y,jt.isNotEventEmit);else if(jt.type==="group:move")ce._moveGroup(jt.group,jt.x,jt.y,jt.isNotEventEmit);else if(jt.type==="link:mouseDown")ce._dragType="link:mouseDown";else if(jt.type==="link:dragBegin")ce._dragType="link:drag",ce._dragPathEdge={edge:jt.edge,path:jt.path};else if(jt.type==="multiple:select"){var Un=ce._selectMultiplyItem(jt.range,jt.toDirection);$e.assign(ce._unionData.__system,ce.selectItem),ce.emit("system.multiple.select",{data:Un}),ce.emit("events",{type:"multiple:select",data:Un}),ce.selectItem={nodes:[],edges:[],endpoints:[]}}else if(jt.type==="node:resize")ce._dragType="node:resize",ce._dragNode=jt.node;else if(jt.type==="group:resize")ce._dragType="group:resize",ce._dragGroup=jt.group;else if(jt.type==="node:delete")ce.removeNode(jt.data.id);else if(jt.type==="edge:delete")ce.removeEdge(jt.data);else if(jt.type==="group:delete")ce.removeGroup(jt.data.id);else if(jt.type==="group:addNodes")$e.get(jt,"nodes",[]).forEach(function(Pr){var cr=$e.find(ce.nodes,function(Wr){return Pr.id===Wr.id});if(!cr)ce.addNode(Pr);else{var ki=[],Vr=ce.removeNode(Pr.id,!0,!0),kr=Vr.nodes[0],Ui=jt.group;ki=Vr.edges,kr._init({top:Pr.top-Ui.top,left:Pr.left-Ui.left,dom:kr.dom,group:Ui.id}),ce.addNode(kr,!0)}}),jt.isNotEventEmit||(ce.emit("events",{type:"system.group.addMembers",nodes:jt.nodes,group:jt.group}),ce.emit("system.group.addMembers",{nodes:jt.nodes,group:jt.group}));else if(jt.type==="group:removeNodes"){var qn=jt.group;$e.get(jt,"nodes",[]).forEach(function(Pr){ce.removeNode(Pr.id,!0,!0),Pr._init({group:void 0,left:Pr.left+qn.left,top:Pr.top+qn.top,dom:Pr.dom,_isDeleteGroup:!0}),ce.addNode(Pr,!0)})}else if(jt.type==="edge:updateLabel"){var rr=jt.data.labelDom;zn(ce.wrapper).append(rr)}else if(jt.type==="edge:setZIndex")ce.setEdgeZIndex([jt.edge],jt.index);else if(jt.type==="endpoint:updatePos"){var xn=jt.point,Or=ce.getNeighborEdgesByEndpoint(xn.nodeId,xn.id);Or.forEach(function(Pr){Pr.redraw()})}}),this._attachMouseDownEvent()}},{key:"_attachMouseDownEvent",value:function(){var ce=this,ut={x:0,y:0},Ze={x:0,y:0},Wt=!1,Ut=[],jt=function(kr){if(!Wt){var Ui=ce._getAllEndpoints();Ui.forEach(function(Wr){if(!(kr===Wr||Wr.type==="source"||Wr._tmpType==="source")){if(Wr.canLink&&Wr.canLink(kr)){Wr.linkable&&(Wr.linkable(),Wr._linkable=!0);return}if((0,B.default)(kr.scope,Wr.scope)){Wr.linkable&&(Wr.linkable(),Wr._linkable=!0),Ut.push(Wr);return}}}),Wt=!0}},xt=function(){Wt=!1,Ut.forEach(function(kr){kr.unLinkable&&kr.unLinkable(),kr.unHoverLinkable&&kr.unHoverLinkable(),kr._linkable=!1}),Ut=[]},$t=null,Un=!1,qn=function(kr,Ui){Un||(Un=!0,setTimeout(function(){var Wr=ce._getAllEndpoints(),no=ce._coordinateService._terminal2canvas("x",kr),uo=ce._coordinateService._terminal2canvas("y",Ui),wi=null;Wr.forEach(function(wo){var fs=wo._posLeft+wo._width+($e.get(wo,"expandArea.right")||ce.theme.endpoint.expandArea.right),zo=wo._posTop+wo._height+($e.get(wo,"expandArea.bottom")||ce.theme.endpoint.expandArea.bottom),hs=wo._posLeft-($e.get(wo,"expandArea.left")||ce.theme.endpoint.expandArea.left),ks=wo._posTop-($e.get(wo,"expandArea.top")||ce.theme.endpoint.expandArea.top);no>hs&&no<fs&&uo>ks&&uo<zo&&(wi=wo)}),wi?wi!==$t&&(wi.hoverLinkable&&wi.hoverLinkable(),$t=wi):$t&&($t.unHoverLinkable&&$t.unHoverLinkable(),$t=null),Un=!1},100))},rr=function(){ce._dragType=null,ce._dragNode=null,ce._dragEndpoint=null,ce._dragGroup=null,ce._dragPathEdge=null,ce._dragEdges=[],ce._mouseMoved=!1,Ze={x:0,y:0},ut={x:0,y:0},ce._autoMoveDir=[],ce._guidelineService.isActive&&ce._guidelineService.clearCanvas()},xn={timer:0,x:0,y:0},Or=function(kr){var Ui=0;if(ce._mouseMoved=!1,kr.button===Ui&&!ce._isFocusing){if(!ce._dragType&&ce.moveable&&(ce._dragType="canvas:drag",xn={timer:new Date().getTime(),x:ce._moveData[0],y:ce._moveData[1]}),ce.isSelectMode){ce.canvasWrapper.active(),ce._dragType="selectCanvas:drag",ce.canvasWrapper.dom.dispatchEvent(new MouseEvent("mousedown",{clientX:kr.clientX,clientY:kr.clientY}));return}ut={x:kr.clientX,y:kr.clientY},ce._dragNode&&ce._dragNode.__type=="node"&&(zn(ce._dragNode.dom).css("z-index",++ce._dragNodeZIndex*2-1),$e.get(ce._dragNode,"endpoints").forEach(function(Wr){zn(Wr.dom).css("z-index",ce._dragNodeZIndex*2)})),ce._dragNode&&ce._dragNode.__type=="group"&&(zn(ce._dragNode.dom).css("z-index",++ce._dragGroupZIndex*2-1),$e.get(ce._dragNode,"endpoints").forEach(function(Wr){zn(Wr.dom).css("z-index",ce._dragGroupZIndex*2)})),ce.emit("system.drag.start",{dragType:ce._dragType,dragNode:ce._dragNode,dragEndpoint:ce._dragEndpoint,dragEdges:ce._dragEdges,dragGroup:ce._dragGroup,position:{clientX:kr.clientX,clientY:kr.clientY,canvasX:ce._coordinateService._terminal2canvas("x",kr.clientX),canvasY:ce._coordinateService._terminal2canvas("y",kr.clientY)}}),ce.emit("events",{type:"drag:start",dragType:ce._dragType,dragNode:ce._dragNode,dragEndpoint:ce._dragEndpoint,dragEdges:ce._dragEdges,dragGroup:ce._dragGroup,position:{clientX:kr.clientX,clientY:kr.clientY,canvasX:ce._coordinateService._terminal2canvas("x",kr.clientX),canvasY:ce._coordinateService._terminal2canvas("y",kr.clientY)}}),ce._autoMoveDir=[]}},Pr=function(kr){ce._mouseMoved=!0;var Ui=0;if(kr.button===Ui&&(ce.theme.isMouseMoveStopPropagation&&kr.stopPropagation(),ce._dragType)){var Wr=ce._coordinateService._terminal2canvas("x",kr.clientX),no=ce._coordinateService._terminal2canvas("y",kr.clientY),uo=kr.clientX-ut.x,wi=kr.clientY-ut.y;if(ce._dragType==="canvas:drag")ce.move([uo+ce._moveData[0],wi+ce._moveData[1]]),ut={x:kr.clientX,y:kr.clientY};else if(ce._dragType==="node:drag"){if(Ze.x===0&&Ze.y===0){Ze={x:Wr,y:no};return}if(ce._dragNode){var wo=[ce._dragNode],fs=ce._findUnion("nodes",ce._dragNode);fs&&fs.length>0?(fs.forEach(function(En){wo=wo.concat(ce._unionData[En].nodes)}),wo=$e.uniqBy(wo,"id")):ce._rmSystemUnion(),zn(ce.svg).css("visibility","hidden"),zn(ce.wrapper).css("visibility","hidden"),wo.forEach(function(En){ce._moveNode(En,En.left+(Wr-Ze.x),En.top+(no-Ze.y)),ce._guidelineService.isActive&&ce._guidelineService.draw(En,"node")}),zn(ce.svg).css("visibility","visible"),zn(ce.wrapper).css("visibility","visible"),Ze={x:Wr,y:no},ce._hoverGroup(ce._dragNode),ce.emit("system.node.move",{nodes:wo}),ce.emit("events",{type:"node:move",nodes:wo}),ce._autoMoveCanvas(kr.clientX,kr.clientY,{type:"node:drag",nodes:wo},function(En){Ze.x+=En[0],Ze.y+=En[1]})}}else if(ce._dragType==="group:drag"){if(Ze.x===0&&Ze.y===0){Ze={x:Wr,y:no};return}if(ce._dragNode){zn(ce.svg).css("visibility","hidden"),zn(ce.wrapper).css("visibility","hidden");var zo=ce._dragNode;ce._moveGroup(zo,zo.left+(Wr-Ze.x),zo.top+(no-Ze.y)),ce._guidelineService.isActive&&ce._guidelineService.draw(zo,"group"),zn(ce.svg).css("visibility","visible"),zn(ce.wrapper).css("visibility","visible"),Ze={x:Wr,y:no},ce.emit("system.group.move",{group:zo}),ce.emit("events",{type:"group:move",group:zo}),ce._autoMoveCanvas(kr.clientX,kr.clientY,{type:"group:drag",group:zo},function(En){Ze.x+=En[0],Ze.y+=En[1]})}}else if(ce._dragType==="endpoint:drag"){var hs=ce._coordinateService._terminal2canvas("x",kr.clientX),ks=ce._coordinateService._terminal2canvas("y",kr.clientY),rs=ce._dragEndpoint.type==="source"||ce._dragEndpoint.type==="onlyConnect"||!ce._dragEndpoint.type&&(!ce._dragEndpoint._tmpType||ce._dragEndpoint._tmpType==="source"),Eo=(ce._dragEndpoint.type==="target"||!ce._dragEndpoint.type&&ce._dragEndpoint._tmpType==="target")&&ce._dragEndpoint.type!=="onlyConnect";if(rs&&ce.linkable){var Qo=ce._findUnion("endpoints",ce._dragEndpoint),Xs=[];if(!ce._dragEdges||ce._dragEdges.length===0){var Ys=ce.theme.edge.Class,ot=[];Qo&&Qo.length>0?(Qo.forEach(function(En){ot=ot.concat(ce._unionData[En].endpoints)}),ot=$e.uniqBy(ot,function(En){return En.nodeId+"||"+En.id})):ot=[ce._dragEndpoint],ot.forEach(function(En){var Cr,tr=En.nodeType==="node"?ce.getNode(En.nodeId):ce.getGroup(En.nodeId),ii=En,Zi=(Cr={type:"endpoint"},vt(vt(vt(vt(vt(vt(vt(vt(vt(vt(Cr,"type",ce.theme.edge.type),"shapeType",ce.theme.edge.shapeType),"hasRadius",ce.theme.edge.hasRadius),"orientationLimit",ce.theme.endpoint.position),"_sourceType",En.nodeType),"sourceNode",tr),"sourceEndpoint",ii),"arrow",ce.theme.edge.arrow),"arrowShapeType",ce.theme.edge.arrowShapeType),"arrowPosition",ce.theme.edge.arrowPosition),vt(vt(vt(vt(vt(vt(vt(Cr,"arrowOffset",ce.theme.edge.arrowOffset),"draggable",ce.theme.edge.draggable),"label",ce.theme.edge.label),"labelPosition",ce.theme.edge.labelPosition),"labelOffset",ce.theme.edge.labelOffset),"labelUpdateInterval",ce.theme.edge.labelUpdateInterval),"isExpandWidth",ce.theme.edge.isExpandWidth));Zi.options=$e.assign({},Zi,{sourceNode:tr.id,sourceEndpoint:ii.id});var Mn=ce.edges.filter(function($r){return $r.sourceEndpoint.nodeId+$r.sourceEndpoint.id===En.nodeId+En.id}).length+1;if(Mn>En.limitNum){console.warn("id\u4E3A".concat(En.nodeId,"\u7684\u8282\u70B9\u4E0B\u7684id\u4E3A").concat(En.id,"\u951A\u70B9\u9650\u5236\u4E86").concat(En.limitNum,"\u6761\u8FDE\u7EBF")),ce.emit("system.endpoint.limit",{endpoint:En});return}var Xn=new Ys($e.assign(Zi,{_global:ce.global,_on:ce.on.bind(ce),_emit:ce.emit.bind(ce)}));Xn._init({_coordinateService:ce._coordinateService}),zn(ce.svg).append(Xn.dom),Xn.labelDom&&zn(ce.wrapper).append(Xn.labelDom),Xn.arrowDom&&zn(ce.svg).append(Xn.arrowDom),Xs.push(Xn)}),ce._dragEdges=Xs}else Xs=ce._dragEdges;zn(ce.svg).css("visibility","hidden"),zn(ce.wrapper).css("visibility","hidden");var mt={pos:[hs,ks]};Xs.forEach(function(En){var Cr=En.sourceEndpoint._posLeft+En.sourceEndpoint._width/2,tr=En.sourceEndpoint._posTop+En.sourceEndpoint._height/2,ii={pos:[Cr,tr],orientation:En.sourceEndpoint.orientation};En.redraw(ii,mt)}),zn(ce.svg).css("visibility","visible"),zn(ce.wrapper).css("visibility","visible"),ce.theme.endpoint.linkableHighlight&&(jt(ce._dragEndpoint),qn(kr.clientX,kr.clientY)),ce._autoMoveCanvas(kr.clientX,kr.clientY,{type:"endpoint:drag",edges:Xs},function(En){Xs.forEach(function(Cr){var tr=Cr.sourceEndpoint._posLeft+Cr.sourceEndpoint._width/2,ii=Cr.sourceEndpoint._posTop+Cr.sourceEndpoint._height/2,Zi={pos:[tr,ii],orientation:Cr.sourceEndpoint.orientation};mt.pos[0]+=En[0],mt.pos[1]+=En[1],Cr.redraw(Zi,mt)})}),ce.emit("system.drag.move",{dragType:ce._dragType,pos:[kr.clientX,kr.clientY],dragNode:ce._dragNode,dragEndpoint:ce._dragEndpoint,dragEdges:Xs}),ce.emit("events",{type:"drag:move",dragType:ce._dragType,pos:[kr.clientX,kr.clientY],dragNode:ce._dragNode,dragEndpoint:ce._dragEndpoint,dragEdges:Xs})}else if(Eo&&ce.disLinkable){for(var _e=null,Z=ce.edges.length-1;Z>=0;Z--)if(ce._dragEndpoint.id===$e.get(ce.edges,[Z,"targetEndpoint","id"])&&ce._dragEndpoint.nodeId===$e.get(ce.edges,[Z,"targetNode","id"])){_e=ce.edges[Z];break}if(_e&&ce._dragEdges.length===0&&(_e._isDeletingEdge=!0,ce._dragEdges=[_e]),ce._dragEdges.length!==0){var Q=ce._dragEdges[0],le=Q.sourceEndpoint._posLeft+Q.sourceEndpoint._width/2,Xe=Q.sourceEndpoint._posTop+Q.sourceEndpoint._height/2,dt={pos:[le,Xe],orientation:Q.sourceEndpoint.orientation},ft={pos:[hs,ks]};Q.redraw(dt,ft)}ce.theme.endpoint.linkableHighlight&&(jt(ce._dragEndpoint),qn(kr.clientX,kr.clientY))}}else if(ce._dragType==="link:drag")ce._dragPathEdge.edge._updatePath(ce._dragPathEdge.path,{x:Wr,y:no});else if(ce._dragType==="node:resize")ce._dragNode.resize(Wr,no);else if(ce._dragType==="group:resize"){var gt=ce._getGroupPos(ce._dragGroup),ln=Wr-gt.left,bn=no-gt.top;ce._dragGroup.setSize(ln,bn)}else ce._dragType==="selectCanvas:drag"&&ce._autoMoveCanvas(kr.clientX,kr.clientY,{type:"selectCanvas:drag"},function(En){var Cr=Ge(En,2),tr=Cr[0],ii=Cr[1],Zi=ce.canvasWrapper,Mn=Zi.startX,Xn=Zi.startY;ce.canvasWrapper._changeCanvasInfo({startX:Mn-tr,startY:Xn-ii}),ce.canvasWrapper.drawRect()})}},cr=function(kr){var Ui=0;if(kr.button===Ui){var Wr=[];if(xt(),ce._dragType==="endpoint:drag"&&ce._dragEdges&&ce._dragEdges.length!==0){var no=ce._coordinateService._terminal2canvas("x",kr.clientX),uo=ce._coordinateService._terminal2canvas("y",kr.clientY),wi=null,wo=$e.concat(ce.nodes,ce.groups);wo.forEach(function(_e){_e.endpoints&&_e.endpoints.forEach(function(Z){var Q=Z._posLeft+Z._width+($e.get(Z,"expandArea.right")||ce.theme.endpoint.expandArea.right),le=Z._posTop+Z._height+($e.get(Z,"expandArea.bottom")||ce.theme.endpoint.expandArea.bottom),Xe=Z._posLeft-($e.get(Z,"expandArea.left")||ce.theme.endpoint.expandArea.left),dt=Z._posTop-($e.get(Z,"expandArea.top")||ce.theme.endpoint.expandArea.top);no>Xe&&no<Q&&uo>dt&&uo<le&&(wi=Z)})});var fs=!1;if((!wi||wi.type==="source"||wi._tmpType==="source")&&(fs=!0),fs||(fs=$e.some(ce._dragEdges,function(_e){return!(0,B.default)(_e.sourceEndpoint.scope,wi.scope,$e.get(ce,"global.isScopeStrict"))})),wi&&wi.limitNum!==void 0){var zo=ce.edges.filter(function(_e){if(ce._dragEdges[0]!==_e)return _e.targetEndpoint.nodeId+_e.targetEndpoint.id===wi.nodeId+wi.id}).length+ce._dragEdges.length;zo>wi.limitNum&&(console.warn("id\u4E3A".concat(wi.nodeId,"\u7684\u8282\u70B9\u4E0B\u7684id\u4E3A").concat(wi.id,"\u951A\u70B9\u9650\u5236\u4E86").concat(wi.limitNum,"\u6761\u8FDE\u7EBF")),ce.emit("system.endpoint.limit",{endpoint:wi}),fs=!0)}if(wi&&!ce.theme.endpoint.isAllowLinkInSameNode&&ce._dragEdges.forEach(function(_e){if(_e.sourceEndpoint.nodeId===wi.nodeId){fs=!0;return}}),fs)ce._dragEdges.forEach(function(_e){_e._isDeletingEdge?ce.removeEdge(_e):_e.destroy(!_e._isDeletingEdge)}),ce._dragEdges.forEach(function(_e){if($e.get(_e,"sourceEndpoint._tmpType")==="source"){var Z=$e.some(ce.edges,function(le){return _e.sourceNode.id===le.sourceNode.id&&_e.sourceEndpoint.id===le.sourceEndpoint.id});!Z&&(_e.sourceEndpoint._tmpType=void 0)}if($e.get(_e,"targetEndpoint._tmpType")==="target"){var Q=$e.some(ce.edges,function(le){return _e.targetNode.id===le.targetNode.id&&_e.targetEndpoint.id===le.targetEndpoint.id});!Q&&(_e.targetEndpoint._tmpType=void 0)}});else{var hs=[],ks=[],rs=ce._dragEdges.filter(function(_e){if(!ce.theme.edge.isRepeat){var Z=$e.some(ce.edges,function(gt){var ln=!1;return _e.sourceNode&&(gt.type==="node"?ln=_e.sourceNode.id===gt.sourceNode.id:ln=_e.sourceNode.id===gt.sourceNode.id&&_e.sourceEndpoint.id===gt.sourceEndpoint.id),ln&&wi.nodeId&&(gt.type==="node"?ln=ln&&$e.get(_e,"targetNode.id")===$e.get(gt,"targetNode.id"):ln=ln&&wi.nodeId===$e.get(gt,"targetNode.id")&&wi.id===$e.get(gt,"targetEndpoint.id")),ln&&_e._isDeletingEdge&&(ln=!1),ln});if(Z)return console.warn("id\u4E3A".concat(_e.sourceEndpoint.id,"-").concat(wi.id,"\u7684\u7EBF\u6761\u8FDE\u63A5\u91CD\u590D\uFF0C\u8BF7\u68C0\u67E5")),_e.destroy(),!1}var Q=$e.get(_e,"targetNode.id"),le=$e.get(_e,"targetEndpoint.id"),Xe=wi.nodeType==="node"?ce.getNode(wi.nodeId):ce.getGroup(wi.nodeId),dt=wi;Q&&le&&"".concat(Q,"||").concat(le)!=="".concat(Xe.id,"||").concat(dt.id)?(hs.push($e.cloneDeep(_e)),ks.push({edge:_e,preTargetNodeId:Q,preTargetPointId:le,currentTargetNodeId:Xe.id,currentTargetPointId:dt.id}),_e.targetEndpoint.connectedNum-=1,wi.connectedNum+=1):(_e.sourceEndpoint.connectedNum+=1,wi.connectedNum+=1),_e._create({id:_e.id&&!_e._isDeletingEdge?_e.id:"".concat(_e.sourceEndpoint.id,"-").concat(wi.id),targetNode:Xe,_targetType:wi.nodeType,targetEndpoint:dt,type:"endpoint"});var ft=_e.isConnect?_e.isConnect():!0;return ft?(_e._isDeletingEdge?delete _e._isDeletingEdge:(_e.mounted&&_e.mounted(),ce.edges.push(_e)),_e.type==="endpoint"&&!$e.get(_e,"sourceEndpoint.type")&&!$e.get(_e,"sourceEndpoint._tmpType")&&(_e.sourceEndpoint._tmpType="source"),_e.type==="endpoint"&&!$e.get(_e,"targetEndpoint.type")&&!$e.get(_e,"targetEndpoint._tmpType")&&(_e.targetEndpoint._tmpType="target"),Q&&le&&"".concat(Q,"||").concat(le)==="".concat(Xe.id,"||").concat(dt.id)?!1:_e):(console.warn("id\u4E3A".concat(_e.sourceEndpoint.id,"-").concat(wi.id,"\u7684\u7EBF\u6761\u65E0\u6CD5\u8FDE\u63A5\uFF0C\u8BF7\u68C0\u67E5")),_e.destroy(),!1)});hs.length!==0&&rs.length!==0?(ce.pushActionQueue({type:"system:reconnectEdges",data:{delLinks:hs,addLinks:rs,info:ks}}),ce.emit("system.link.reconnect",{delLinks:hs,addLinks:rs,info:ks}),ce.emit("events",{type:"link:reconnect",delLinks:hs,addLinks:rs,info:ks})):(hs.length!==0&&hs.forEach(function(_e){ce.pushActionQueue({type:"system:removeEdges",data:hs}),ce.emit("system.link.delete",{link:_e}),ce.emit("events",{type:"link:delete",link:_e})}),rs.length!==0&&(ce.pushActionQueue({type:"system:addEdges",data:ce._dragEdges}),ce.emit("system.link.connect",{links:ce._dragEdges}),ce.emit("events",{type:"link:connect",links:ce._dragEdges})))}}if((ce._dragType==="node:drag"||ce._dragType==="group:drag")&&ce._dragNode){var Eo=ce._dragType==="node:drag"?"node":"group",Qo=ce._dragNode,Xs=function(Z){var Q=null,le=null,Xe=Z.left,dt=Z.left+Z.getWidth(),ft=Z.top,gt=Z.top+Z.getHeight();if(Z.group){var ln=ce.getGroup(Z.group);Q=ln;for(var bn=Z;bn.group;){var En=ce.getGroup(bn.group),Cr=En.left,tr=En.top;Xe+=Cr,ft+=tr,dt+=Cr,gt+=tr,bn=En}}ce._hoverGroup(Qo),le||(le=ce._findGroupByCoordinates(Z,Xe,ft,dt,gt));var ii=[];if(Q){if(Q!==le){var Zi=Eo==="node"?ce.removeNode(Qo.id,!0,!0):ce.removeGroup(Qo.id,!0),Mn=Eo==="node"?Zi.nodes[0]:Zi.group;ii=Zi.edges;var Xn={top:ft,left:Xe,dom:Mn.dom,_isDeleteGroup:!0},$r=ce.actionQueue[ce.actionQueueIndex];if($r&&$r.type==="system:moveNodes"&&($r.data._isDraging=!0),ce.pushActionQueue({type:"system:groupRemoveMembers",data:{group:Q,nodes:Eo==="node"?[Mn]:[],groups:Eo==="group"?[Mn]:[],_isDraging:!0}}),ce.emit("events",{type:"system.group.removeMembers",group:Q,nodes:Eo==="node"?[Mn]:[],groups:Eo==="group"?[Mn]:[]}),ce.emit("system.group.removeMembers",{group:Q,nodes:Eo==="node"?[Mn]:[],groups:Eo==="group"?[Mn]:[]}),le)if((0,B.default)(Qo.scope,le.scope,$e.get(ce,"global.isScopeStrict"))){for(var Re=le;Re;)Xn.top-=Re.top,Xn.left-=Re.left,Re=ce.getGroup(Re.group);Xn.group=le.id,Xn._isDeleteGroup=!1,le.nodes.push(Mn),ce.popActionQueue(),ce.pushActionQueue({type:"system:groupAddMembers",data:{sourceGroup:Q,targetGroup:le,nodes:Eo==="node"?[Mn]:[],groups:Eo==="group"?[Mn]:[],_isDraging:!0}}),ce.emit("events",{type:"system.group.addMembers",nodes:Eo==="node"?[Mn]:[],groups:Eo==="group"?[Mn]:[],group:le}),ce.emit("system.group.addMembers",{nodes:Eo==="node"?[Mn]:[],groups:Eo==="group"?[Mn]:[],group:le}),ce._clearHoverGroup(le)}else console.warn("nodeId\u4E3A".concat(ce._dragNode.id,"\u7684\u8282\u70B9\u548CgroupId").concat(le.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165"));Mn._init(Xn),Eo==="node"?ce.addNode(Mn,!0):(ce.addGroup(Mn,Zi.groups.concat(Zi.nodes),{notResize:!0,notAdaptorPos:!0},!0),Zi.edges.length>0&&ce.addEdges(Zi.edges,!0))}}else if(le)if((0,B.default)(Qo.scope,le.scope,$e.get(ce,"global.isScopeStrict"))){var Ne=Eo==="node"?ce.removeNode(Qo.id,!0,!0):ce.removeGroup(Qo.id,!0),Te=Eo==="node"?Ne.nodes[0]:Ne.group;ii=Ne.edges;var U=ce._getGroupPos(le);Te._init({top:ft-U.top,left:Xe-U.left,dom:Te.dom,group:le.id}),Eo==="node"?ce.addNode(Te,!0):(ce.addGroup(Te,Ne.groups.concat(Ne.nodes),{notResize:!0,notAdaptorPos:!0,posType:"absolute"},!0),Ne.edges.length>0&&ce.addEdges(Ne.edges,!0));var Y=ce.actionQueue[ce.actionQueueIndex];Y&&Y.type==="system:moveNodes"&&(Y.data._isDraging=!0),ce.pushActionQueue({type:"system:groupAddMembers",data:{sourceGroup:void 0,targetGroup:le,nodes:Eo==="node"?[Te]:[],groups:Eo==="group"?[Te]:[],_isDraging:!0}}),ce.emit("events",{type:"system.group.addMembers",nodes:Eo==="node"?[Te]:[],groups:Eo==="group"?[Te]:[],group:le}),ce.emit("system.group.addMembers",{nodes:Eo==="node"?[Te]:[],groups:Eo==="group"?[Te]:[],group:le}),ce._clearHoverGroup(le)}else console.warn("nodeId\u4E3A".concat(ce._dragNode.id,"\u7684\u8282\u70B9\u548CgroupId").concat(le.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165"));ii.forEach(function(ge){ge.redraw()}),Qo.endpoints.forEach(function(ge){ge.updatePos&&ge.updatePos()}),Qo._isMoving=!1},Ys=[Qo],ot=ce._findUnion("".concat(Eo,"s"),Qo);ot&&ot.length>0&&(ot.forEach(function(_e){Ys=Ys.concat(ce._unionData[_e]["".concat(Eo,"s")])}),Ys=$e.uniqBy(Ys,"id")),Ys.forEach(function(_e){Xs(_e)}),Wr=Ys,ce._rmSystemUnion()}if(ce._dragType==="group:resize"&&ce._dragGroup&&(ce.emit("events",{type:"system.group.resize",group:ce._dragGroup}),ce.emit("system.group.resize",{group:ce._dragGroup})),!ce.isSelectMode&&ce._dragType==="canvas:drag"){var mt={timer:new Date().getTime(),x:ce._moveData[0],y:ce._moveData[1]};(mt.timer-xn.timer<300||Math.abs(xn.x-mt.x)<20&&Math.abs(xn.y-mt.y)<20)&&(ce.emit("system.canvas.click"),ce.emit("events",{type:"canvas:click"}))}ce._mouseMoved&&(ce._dragType==="node:drag"||ce._dragType==="group:drag")&&ce.pushActionQueue({type:"_system:dragNodeEnd"}),ce.emit("system.drag.end",{dragType:ce._dragType,dragNode:ce._dragNode,dragEndpoint:ce._dragEndpoint,dragEdges:ce._dragEdges,dragGroup:ce._dragGroup,unionItems:Wr}),ce.emit("events",{type:"drag:end",dragType:ce._dragType,dragNode:ce._dragNode,dragEndpoint:ce._dragEndpoint,dragEdges:ce._dragEdges,dragGroup:ce._dragGroup,unionItems:Wr}),rr()}},ki=function(kr){ce._dragEdges&&ce._dragEdges.length>0&&(ce._dragEdges.forEach(function(Ui){Ui._isDeletingEdge?ce.removeEdge(Ui):Ui.destroy(!Ui._isDeletingEdge)}),ce.emit("system.drag.mouseleave",{edges:ce._dragEdges}),ce.emit("events",{type:"drag:mouseleave",edges:ce._dragEdges})),rr()};this.root.addEventListener("mousedown",Or),this.root.addEventListener("mousemove",Pr),this.root.addEventListener("mouseup",cr),this.root.addEventListener("mouseleave",function(Vr){var kr=Vr.toElement;if(kr){var Ui=$e.get(kr,"className");Ui&&typeof Ui=="string"&&Ui.indexOf("butterfly-tooltip")===-1&&ki()}})}},{key:"getNode",value:function(ce){var ut=this._cache.nodes[ce];return ut||(ut=$e.find(this.nodes,function(Ze){return Ze.id===ce}),ut&&(this._cache.nodes[ut.id]=ut)),ut}},{key:"addNodes",value:function(ce,ut){var Ze=this,Wt=document.createDocumentFragment(),Ut=zn(this.wrapper),jt=ce.filter(function(xt){if(xt.group){var $t=Ze.getGroup(xt.group);if(!$t)return console.warn("\bnodeId\u4E3A".concat(xt.id,"\u7684\u8282\u70B9\u627E\u4E0D\u5230groupId\u4E3A").concat(xt.group,"\u7684\u8282\u70B9\u7EC4\uFF0C\u56E0\u6B64\u65E0\u6CD5\u6E32\u67D3")),!1}return!0}).map(function(xt){var $t=null;if(xt instanceof e.default||xt.__type==="node")$t=xt;else{var Un=xt.Class||Ze._NodeClass;$t=new Un($e.assign({},Ze.global.isCloneDeep?$e.cloneDeep(xt):xt,{_global:Ze.global,_on:Ze.on.bind(Ze),_emit:Ze.emit.bind(Ze),_endpointLimitNum:Ze.theme.endpoint.limitNum,draggable:xt.draggable!==void 0?xt.draggable:Ze.draggable}))}if(Ze._isExistNode($t)){console.warn("node:".concat($t.id," has existed"));return}var qn={};$t.dom&&(qn.dom=$t.dom),$t._init(qn),Ze.nodes.push($t);var rr=$t.group?Ze.getGroup($t.group):null;return rr?(0,B.default)($t.scope,rr.scope,$e.get(Ze,"global.isScopeStrict"))?rr._appendChildren([$t]):console.warn("nodeId\u4E3A".concat($t.id,"\u7684\u8282\u70B9\u548CgroupId").concat(rr.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165")):Wt.appendChild($t.dom),Ze._cache.nodes[$t.id]=$t,$t}).filter(function(xt){return!!xt});return Ut.append(Wt),jt.forEach(function(xt){xt._createEndpoint(ut),zn(xt.dom).css("z-index",Ze._dragNodeZIndex*2-1),$e.get(xt,"endpoints").forEach(function($t){zn($t.dom).css("z-index",Ze._dragNodeZIndex*2)}),!ut&&xt.mounted&&xt.mounted()}),jt&&jt.length>0&&!ut&&(this.pushActionQueue({type:"system:addNodes",data:jt}),this.emit("system.nodes.add",{nodes:jt}),this.emit("events",{type:"nodes:add",nodes:jt})),jt}},{key:"addNode",value:function(ce,ut){return this.addNodes([ce],ut)[0]}},{key:"removeNode",value:function(ce,ut,Ze){return this.removeNodes([ce],ut,Ze)}},{key:"removeNodes",value:function(ce,ut,Ze){var Wt=this,Ut=[];Ut=ce.map(function($t){return $t instanceof e.default?$t.id:$t});var jt=[],xt=[];return Ut.forEach(function($t){var Un=$e.findIndex(Wt.nodes,function(Pr){return Pr.id===$t});if(Un===-1){console.warn("\u627E\u4E0D\u5230id\u4E3A\uFF1A".concat($t,"\u7684\u8282\u70B9"));return}var qn=Wt.getNeighborEdges($t);ut||Wt.removeEdges(qn,!0,!0);var rr=Wt.nodes[Un];rr.destroy(Ze);var xn=Wt.nodes.splice(Un,1);if(rr.group){var Or=Wt.getGroup(rr.group);Or&&(Or.nodes=Or.nodes.filter(function(Pr){return Pr.id!==rr.id}))}xn.length>0&&(jt=jt.concat(xn),xt=xt.concat(qn)),delete Wt._cache.nodes[$t]}),jt.length>0&&(Ze||(this.pushActionQueue({type:"system:removeNodes",data:{nodes:jt,edges:xt}}),this.emit("system.nodes.delete",{nodes:jt,edges:xt}),this.emit("events",{type:"nodes:delete",nodes:jt,edges:xt}))),{nodes:jt,edges:xt}}},{key:"getNeighborNodes",value:function(ce){var ut=this,Ze={},Wt=$e.find(this.nodes,function(Ut){return ce===Ut.id});return Wt||console.warn("\u627E\u4E0D\u5230id\u4E3A".concat(ce,"\u7684\u8282\u70B9")),this.edges.forEach(function(Ut){Ut.sourceNode&&Ut.sourceNode.id===ce?Ze[Ut.targetNode.id]=!0:Ut.targetNode&&Ut.targetNode.id===ce&&(Ze[Ut.sourceNode.id]=!0)}),Object.keys(Ze).map(function(Ut){return ut.getNode(Ut)})}},{key:"getNeighborNodesAndEdgesByLevel",value:function(ce){var ut=ce.node,Ze=ce.endpoint,Wt=ce.type,Ut=Wt===void 0?"out":Wt,jt=ce.level,xt=jt===void 0?1/0:jt,$t=ce.iteratee,Un=$t===void 0?function(){return!0}:$t;if(!ut||!this.nodes.length)return{nodes:[],edges:[]};if(xt==0||!this.edges.length)return{nodes:[ut],edges:[]};var qn=[],rr=[],xn=new Set,Or=this._getAdjcentTable(Ut);if(Ze?qn=$e.get(Or,[ut.id,Ze.id],[]).map(function(Vr){return[].concat(Ce(Vr),[1])}):qn=(Object.values($e.get(Or,ut.id,{}))||[]).flatMap(function(Vr){return Vr.map(function(kr){return kr.concat(1)})}),xn.add(ut.id),!qn.length)return{nodes:[ut],edges:[]};for(var Pr=function(){var kr=qn.shift(),Ui=Ge(kr,3),Wr=Ui[0],no=Ui[1],uo=Ui[2];if(xn.has(Wr.id)||uo>xt||!Un(Wr,no,uo))return 1;rr=(Object.values($e.get(Or,Wr.id,{}))||[]).forEach(function(wi){wi.forEach(function(wo){var fs=Ge(wo,2),zo=fs[0],hs=fs[1];xn.has(zo.id)||qn.push([].concat(Ce(wo),[uo+1]))})}),xn.add(Wr.id)};qn.length;)Pr();var cr=new Set,ki=new Set;return this.edges.forEach(function(Vr){var kr=Vr.sourceNode,Ui=Vr.sourceEndpoint,Wr=Vr.targetNode,no=Vr.targetEndpoint;xn.has(kr.id)&&xn.has(Wr.id)&&(cr.add(kr),cr.add(Wr),ki.add(Vr))}),{nodes:Ce(cr),edges:Ce(ki)}}},{key:"_getAdjcentTable",value:function(ce){var ut={};return this.edges.forEach(function(Ze){var Wt=Ze.sourceNode,Ut=Ze.sourceEndpoint,jt=Ze.targetNode,xt=Ze.targetEndpoint,$t=Wt.id,Un=Ut.id,qn=jt.id,rr=xt.id;ce!=="out"&&(ut[qn]||(ut[qn]={}),ut[qn][rr]||(ut[qn][rr]=[]),ut[qn][rr].push([Wt,Ut])),ce!=="in"&&(ut[$t]||(ut[$t]={}),ut[$t][Un]||(ut[$t][Un]=[]),ut[$t][Un].push([jt,xt]))}),this.nodes.forEach(function(Ze){ut[Ze.id]||(ut[Ze.id]={})}),ut}},{key:"_isExistNode",value:function(ce){var ut=this.nodes.filter(function(Ze){return Ze.id===ce.id});return ut.length>0}},{key:"_moveNode",value:function(ce,ut,Ze,Wt){var Ut=!!ce.group;if(Ut){var jt=this.getGroup(ce.group),xt=jt.type||this.theme.group.type;if(xt==="inner"){var $t=zn(jt.dom).width(),Un=zn(jt.dom).height(),qn=zn(ce.dom).width(),rr=zn(ce.dom).height();if(ut<0||ut+qn>$t||Ze<0||Ze+rr>Un)return}}Wt||this.pushActionQueue({type:"system:moveNodes",data:{node:ce,top:Ze,left:ut}}),ce._moveTo(ut,Ze),ce.endpoints&&ce.endpoints.forEach(function(xn){xn.updatePos()}),this.edges.forEach(function(xn){if(xn.type==="endpoint"){var Or=$e.find(ce.endpoints,function(cr){return cr.nodeId===xn.sourceNode.id&&!!xn.sourceNode.getEndpoint(cr.id,"source")||cr.nodeId===xn.targetNode.id&&!!xn.targetNode.getEndpoint(cr.id,"target")});Or&&(xn._hasDragged=!1,xn._breakPoints=[],xn.redraw())}else if(xn.type==="node"){var Pr=xn.sourceNode.id===ce.id||xn.targetNode.id===ce.id;Pr&&(xn._hasDragged=!1,xn._breakPoints=[],xn.redraw())}})}},{key:"_addEndpoint",value:function(ce,ut,Ze){var Wt={nodeType:ut,_coordinateService:this._coordinateService};if(ce._init(Wt),!ce._isInitedDom){var Ut=ce.dom;if($e.get(ce,"_node.group")){var jt=this.getGroup(ce._node.group);zn(jt.dom).append(Ut)}else zn(this.wrapper).prepend(Ut);var xt=zn(ce._node.dom).attr("z-index");zn(Ut).css("z-index",xt),ce.updatePos()}ce.mounted&&ce.mounted()}},{key:"_getAllEndpoints",value:function(){var ce=[];return ce=ce.concat(this.nodes.map(function(ut){return ut.endpoints})),ce=ce.concat(this.groups.map(function(ut){return ut.endpoints})),ce=ce.filter(function(ut){return!!ut}),$e.flatten(ce)}},{key:"getGroup",value:function(ce){return $e.find(this.groups,function(ut){return ut.id===ce})}},{key:"addGroup",value:function(ce,ut,Ze,Wt){var Ut=this,jt=zn(this.wrapper),xt=ce.Class||this._GroupClass,$t=[],Un=$e.get(Ze,"posType")==="absolute",qn=$e.get(Ze,"notResize"),rr=$e.get(Ze,"notAdaptorPos"),xn=null;if(ce instanceof m.default?xn=ce:xn=new xt($e.assign({},this.isCloneDeep?$e.cloneDeep(ce):ce,{_global:this.global,_emit:this.emit.bind(this),_on:this.on.bind(this),_endpointLimitNum:this.theme.endpoint.limitNum,draggable:ce.draggable!==void 0?ce.draggable:this.draggable})),this._isExistGroup(xn)){console.warn("group:".concat(xn.id," has existed"));return}if(this.theme.group.includeGroups||(delete xn.group,delete xn._group),xn._init(),xn.group){var Or=this.getGroup(xn.group);if(!Or){console.warn("\bgroupId\u4E3A".concat(xn.id,"\u7684\u8282\u70B9\u7EC4\u627E\u4E0D\u5230groupId\u4E3A").concat(node.group,"\u7684\u8282\u70B9\u7EC4\uFF0C\u56E0\u6B64\u65E0\u6CD5\u6E32\u67D3"));return}(0,B.default)(xn.scope,Or.scope,$e.get(this,"global.isScopeStrict"))?Or._appendChildren([xn]):console.warn("groupId\u4E3A".concat(xn.id,"\u7684\u8282\u70B9\u7EC4\u548CgroupId").concat(Or.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165")),xn.endpoints.forEach(function(Wr){Wr.updatePos()})}else jt.prepend(xn.dom);if(xn._createEndpoint(),xn.mounted&&xn.mounted(),this.groups.push(xn),ut&&ut.length>0){if(ut=ut.filter(function(Wr){return(0,B.default)(Wr.scope,xn.scope,$e.get(Ut,"global.isScopeStrict"))&&(Wr.group===xn.id||Wr.group==null)}),!rr){var Pr=1/0,cr=1/0;ut.forEach(function(Wr){Un||(Wr.left<Pr&&(Pr=Wr.left),Wr.top<cr&&(cr=Wr.top))}),xn._moveTo(Pr-$e.get(Ze,"padding",5),cr-$e.get(Ze,"padding",5))}if($t=ut.map(function(Wr){var no=null;if(Wr.__type==="node"){var uo=Ut.getNode(Wr.id);if(uo){var wi=Ut._getGroupPos(xn);Ut.removeNode(uo.id,!0,!0),uo._init({dom:uo.dom,top:uo.top-wi.top,left:uo.left-wi.left,group:xn.id}),no=Ut.addNode(uo,!0)}else{var wo=null;if(Wr instanceof e.default||Wr.__type==="node")wo=Wr;else{var fs=Wr.Class||Ut._NodeClass;wo=new fs($e.assign({},Ut.global.isCloneDeep?$e.cloneDeep(Wr):Wr,{_global:Ut.global,_on:Ut.on.bind(Ut),_emit:Ut.emit.bind(Ut),_endpointLimitNum:Ut.theme.endpoint.limitNum,draggable:Wr.draggable!==void 0?Wr.draggable:Ut.draggable}))}Un||(wo.top=wo.top-xn.top,wo.left=wo.left-xn.left),wo.group=xn.id,no=Ut.addNode(wo)}}else{var zo=Ut.getGroup(Wr.id);if(zo){var hs=Ut.removeGroup(zo.id,!0);zo._init({dom:zo.dom,top:zo.top-xn.top,left:zo.left-xn.left,group:xn.id}),no=Ut.addGroup(zo,[],{},!0),zo.addNodes(hs.nodes.map(function(Eo){return Eo.left-=xn.left,Eo.top-=xn.top,Eo}),!0),Ut.addEdges(hs.edges||[],!0)}else{var ks=null;if(Wr instanceof m.default||Wr.__type==="group")ks=Wr;else{var rs=Wr.Class||Ut._GroupClass;_newGroupObj=new rs($e.assign({},Ut.global.isCloneDeep?$e.cloneDeep(Wr):Wr,{_global:Ut.global,_on:Ut.on.bind(Ut),_emit:Ut.emit.bind(Ut),_endpointLimitNum:Ut.theme.endpoint.limitNum,draggable:Wr.draggable!==void 0?Wr.draggable:Ut.draggable}))}Un||(_newGroupObj.top=_newGroupObj.top-ks.top,_newGroupObj.left=_newGroupObj.left-ks.left),_newGroupObj.group=_newGroupObj.id,no=Ut.addGroup(_newGroupObj)}}return no}),!qn){var ki=-1/0,Vr=-1/0;$t.forEach(function(Wr){var no=zn(Wr.dom).width(),uo=zn(Wr.dom).height();ki<Wr.left+no&&(ki=Wr.left+no),Vr<Wr.top+uo&&(Vr=Wr.top+uo)}),xn.setSize(ki+$e.get(Ze,"padding",5)*2,Vr+$e.get(Ze,"padding",5)*2)}}if(!Wt){var kr=[],Ui=[];$t.forEach(function(Wr){Wr.__type==="node"?kr.push(Wr):Ui.push(Wr)}),this.pushActionQueue({type:"system:addGroups",data:[{group:xn,nodes:kr,groups:Ui}]}),this.emit("system.group.add",{group:xn,addNodes:kr,addGroups:Ui}),this.emit("events",{type:"group:add",group:xn,addNodes:kr,addGroups:Ui})}return xn}},{key:"addGroups",value:function(ce){var ut=this,Ze=function(jt){var xt={};return jt.forEach(function($t){xt[$t.id]===void 0?xt[$t.id]=0:xt[$t.id]++,$t.group&&(xt[$t.group]===void 0?xt[$t.group]=0:xt[$t.group]++)}),ce.sort(function($t,Un){return xt[Un.id]-xt[$t.id]})},Wt=Ze(ce);return Wt.map(function(Ut){return ut.addGroup(Ut)}).filter(function(Ut){return Ut})}},{key:"removeGroup",value:function(ce,ut){var Ze=this,Wt=void 0;ce instanceof m.default?Wt=ce.id:Wt=ce;var Ut=this.getGroup(Wt);if(!Ut){console.warn("\u672A\u627E\u5230id\u4E3A".concat(Wt,"\u7684\u8282\u70B9\u7EC4"));return}var jt=[],xt=this._getGroupPos(Ut),$t=Ut.nodes.map(function(xn){var Or=Ze.removeNode(xn.id,!0,!0),Pr=Or.nodes[0],cr=Or.edges;return Pr._init({top:xn.top+xt.top,left:xn.left+xt.left,dom:xn.dom,_isDeleteGroup:!0}),Ze.addNode(Pr,!0),cr.forEach(function(ki){ki.redraw()}),jt=jt.concat(cr),Pr}),Un=Ut.groups.map(function(xn){var Or=Ze.getNeighborEdges(xn.id,"group"),Pr=$e.findIndex(Ze.groups,function(cr){return cr.id===xn.id});return Ze.groups.splice(Pr,1),xn.destroy(!0),xn._init({top:xn.top+xt.top,left:xn.left+xt.left,dom:xn.dom,_isDeleteGroup:!0}),Ze.addGroup(xn,[],{},!0),xn.endpoints.forEach(function(cr){cr.updatePos()}),Or.forEach(function(cr){cr.redraw()}),xn});Ut.groups=[];var qn=this.getNeighborEdges(Ut.id,"group");qn.length>0&&this.removeEdges(qn,ut,!0);var rr=$e.findIndex(this.groups,function(xn){return xn.id===Wt});return this.groups.splice(rr,1)[0],Ut.destroy(ut),ut||this.pushActionQueue({type:"system:removeGroup",data:{group:Ut,nodes:$t||[],groups:Un||[]}}),{group:Ut,nodes:$t||[],edges:qn||[],groups:Un||[]}}},{key:"removeGroups",value:function(){var ce=this,ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ze=arguments.length>1?arguments[1]:void 0,Wt=[];Wt=ut.map(function(jt){return jt instanceof m.default?jt.id:jt});var Ut=Wt.map(function(jt){return ce.removeGroup(jt,Ze)});return{groups:Ut}}},{key:"_isExistGroup",value:function(ce){var ut=this.groups.filter(function(Ze){return Ze.id===ce.id});return ut.length>0}},{key:"_moveGroup",value:function(ce,ut,Ze,Wt){Wt||this.pushActionQueue({type:"system:moveGroups",data:{group:ce,top:Ze,left:ut}}),ce._moveTo(ut,Ze);for(var Ut=vt({},ce.id,"group"),jt=[ce];jt.length>0;){var xt=jt.pop();xt.nodes.length>0&&xt.nodes.forEach(function($t){Ut[$t.id]="node"}),xt.groups.length>0&&(xt.groups.forEach(function($t){Ut[$t.id]="group"}),jt=jt.concat(xt.groups))}this.edges.forEach(function($t){var Un=$e.get($t,"sourceNode.id"),qn=$e.get($t,"targetNode.id"),rr=$e.get($t,"_sourceType"),xn=$e.get($t,"_targetType"),Or=Ut[Un]===rr||Ut[qn]===xn;Or&&$t.redraw()})}},{key:"_findGroupByCoordinates",value:function(ce,ut,Ze,Wt,Ut){var jt=this,xt=this.groups;ce.__type==="group"&&(xt=this.groups.filter(function(Ui){return Ui.id!==ce.id}));for(var $t=[],Un=0;Un<xt.length;Un++){var qn=xt[Un],rr=this._getGroupPos(qn),xn=rr.left,Or=rr.left+qn.getWidth(),Pr=rr.top,cr=rr.top+qn.getHeight(),ki=!1;Wt!==void 0&&Ut!==void 0?ki=xn<=ut&&Or>=Wt&&Pr<=Ze&&cr>=Ut:ki=ut>=xn&&ut<=Or&&Ze>=Pr&&Ze<=cr,ki&&$t.push(qn)}if($t.length<=1)return $t[0];var Vr=void 0,kr=-1/0;return $t.forEach(function(Ui){var Wr=jt._getGroupPos(Ui);Wr.left>kr&&(kr=Wr.left,Vr=Ui)}),Vr}},{key:"_hoverGroup",value:function(ce){var ut=this;this._hoverGroupQueue.push(ce),this._hoverGroupTimer||(this._hoverGroupTimer=setInterval(function(){if(ut._hoverGroupQueue.length===0){clearInterval(ut._hoverGroupTimer),ut._hoverGroupTimer=void 0;return}var Ze=ut._hoverGroupQueue.pop(),Wt=ut._findGroupByCoordinates(Ze,Ze.left,Ze.top);if(Wt){if(!ut._hoverGroupObj||Wt.id!==ut._hoverGroupObj.id){var Ut=ut._hoverGroupObj&&zn(ut._hoverGroupObj.dom);Ut&&Ut.removeClass("butterfly-group-hover-valid"),Ut&&Ut.removeClass("butterfly-group-hover-invalid"),Ut&&Ut.removeClass("butterfly-group-hover"),Wt.scope&&Wt.scope===Ze.scope?zn(Wt.dom).addClass("butterfly-group-hover-valid"):Wt.scope&&Wt.scope!==Ze.scope&&zn(Wt.dom).addClass("butterfly-group-hover-invalid"),zn(Wt.dom).addClass("butterfly-group-hover"),ut._hoverGroupObj=Wt}}else ut._hoverGroupObj&&zn(ut._hoverGroupObj.dom).removeClass("butterfly-group-hover"),ut._hoverGroupObj&&zn(ut._hoverGroupObj.dom).removeClass("butterfly-group-hover-valid"),ut._hoverGroupObj&&zn(ut._hoverGroupObj.dom).removeClass("butterfly-group-hover-invalid"),ut._hoverGroupObj=void 0;ut._hoverGroupQueue=[]},200))}},{key:"_clearHoverGroup",value:function(ce){this._hoverGroupObj&&zn(this._hoverGroupObj.dom).removeClass("butterfly-group-hover"),this._hoverGroupObj&&zn(this._hoverGroupObj.dom).removeClass("butterfly-group-hover-valid"),this._hoverGroupObj&&zn(this._hoverGroupObj.dom).removeClass("butterfly-group-hover-invalid"),this._hoverGroupTimer=void 0,this._hoverGroupObj=void 0,this._hoverGroupQueue=[]}},{key:"_getGroupPos",value:function(ce){for(var ut=ce,Ze=0,Wt=0;ut;)Ze+=ut.top,Wt+=ut.left,ut=ut._group;return{top:Ze,left:Wt}}},{key:"getEdge",value:function(ce){return $e.find(this.edges,function(ut){return ut.id===ce})}},{key:"addEdges",value:function(ce,ut){var Ze=this;zn(this.svg).css("visibility","hidden");var Wt=document.createDocumentFragment(),Ut=document.createDocumentFragment(),jt=ce.map(function(xt){if(!Ze.theme.endpoint.isAllowLinkInSameNode&&xt.sourceNode===xt.targetNode){console.warn("butterflies error: isAllowLinkInSameNode is ".concat(Ze.theme.endpoint.isAllowLinkInSameNode,". link sourceNodeId = link targetNodeId:").concat(xt.sourceNode));return}if(xt instanceof s.default)return xt._init({_coordinateService:Ze._coordinateService}),Wt.appendChild(xt.dom),xt.eventHandlerDom&&Wt.appendChild(xt.eventHandlerDom),xt.labelDom&&Ut.appendChild(xt.labelDom),xt.arrowDom&&Wt.appendChild(xt.arrowDom),Ze.edges.push(xt),xt.mounted&&xt.mounted(),xt;var $t=xt.Class||Ze.theme.edge.Class,Un=null,qn=null,rr=xt._sourceType,xn=xt._targetType,Or=function(wo,fs,zo){var hs=wo.type==="node"||!wo.type?wo[zo]:wo["".concat(zo,"Node")];if(fs==="node")return Ze.getNode(hs);if(fs==="group")return Ze.getGroup(hs)};if(xt.sourceNode instanceof e.default||$e.get(xt,"sourceNode.__type")==="node")rr="node",Un=xt.sourceNode;else if(xt.sourceNode instanceof m.default||$e.get(xt,"sourceNode.__type")==="group")rr="group",Un=xt.sourceNode;else if(xt._sourceType)Un=rr==="node"?Or(xt,"node","source"):Or(xt,"group","source");else{var Pr=Or(xt,"node","source");Pr?(rr="node",Un=Pr):(rr="group",Un=Or(xt,"group","source"))}if(xt.targetNode instanceof e.default||$e.get(xt,"targetNode.__type")==="node")xn="node",qn=xt.targetNode;else if(xt.targetNode instanceof m.default||$e.get(xt,"targetNode.__type")==="group")xn="group",qn=xt.targetNode;else if(xt._targetType)qn=xn==="node"?Or(xt,"node","target"):Or(xt,"group","target");else{var cr=Or(xt,"node","target");cr?(xn="node",qn=cr):(xn="group",qn=Or(xt,"group","target"))}if(xt.type==="endpoint"){var ki;if(!Un||!qn){console.warn("butterflies error: can not connect edge. link sourceNodeId:".concat(xt.sourceNode,";link targetNodeId:").concat(xt.targetNode));return}var Vr=null,kr=null;if(xt.sourceEndpoint&&(xt.sourceEndpoint instanceof v.default||xt.sourceEndpoint.__type==="endpoint")?Vr=xt.sourceEndpoint:Vr=Un.getEndpoint(xt.source,"source"),xt.targetEndpoint&&(xt.targetEndpoint instanceof v.default||xt.targetEndpoint.__type==="endpoint")?kr=xt.targetEndpoint:kr=qn.getEndpoint(xt.target,"target"),!Vr||!kr){console.warn("butterflies error: can not connect edge. link sourceId:".concat(xt.source,";link targetId:").concat(xt.target));return}if(!Ze.theme.edge.isRepeat){var Ui=$e.some(Ze.edges,function(wi){var wo=!1;return Un&&(wi.type==="node"?wo=Un.id===wi.sourceNode.id:wo=Un.id===wi.sourceNode.id&&Vr.id===wi.sourceEndpoint.id&&rr===wi.sourceEndpoint.nodeType),wo&&qn&&(wi.type==="node"?wo=qn.id===wi.targetNode.id:wo=qn.id===wi.targetNode.id&&kr.id===wi.targetEndpoint.id&&xn===wi.targetEndpoint.nodeType),wo});if(Ui){console.warn("id\u4E3A".concat(Vr.id,"-").concat(kr.id,"\u7684\u7EBF\u6761\u8FDE\u63A5\u91CD\u590D\uFF0C\u8BF7\u68C0\u67E5"));return}}var Wr=new $t((ki={type:"endpoint",id:xt.id,label:xt.label},vt(vt(vt(vt(vt(vt(vt(vt(vt(vt(ki,"type",xt.type||Ze.theme.edge.type),"shapeType",xt.shapeType||Ze.theme.edge.shapeType),"hasRadius",xt.hasRadius||Ze.theme.edge.hasRadius),"orientationLimit",Ze.theme.endpoint.position),"isExpandWidth",Ze.theme.edge.isExpandWidth),"defaultAnimate",Ze.theme.edge.defaultAnimate),"sourceNode",Un),"targetNode",qn),"sourceEndpoint",Vr),"targetEndpoint",kr),vt(vt(vt(vt(vt(vt(vt(vt(vt(vt(ki,"arrow",xt.arrow===void 0?$e.get(Ze,"theme.edge.arrow"):xt.arrow),"arrowShapeType",xt.arrowShapeType===void 0?$e.get(Ze,"theme.edge.arrowShapeType"):xt.arrowShapeType),"arrowPosition",xt.arrowPosition===void 0?$e.get(Ze,"theme.edge.arrowPosition"):xt.arrowPosition),"arrowOffset",xt.arrowOffset===void 0?$e.get(Ze,"theme.edge.arrowOffset"):xt.arrowOffset),"draggable",xt.draggable===void 0?$e.get(Ze,"theme.edge.draggable"):xt.draggable),"labelPosition",xt.labelPosition===void 0?$e.get(Ze,"theme.edge.labelPosition"):xt.labelPosition),"labelOffset",xt.labelOffset===void 0?$e.get(Ze,"theme.edge.labelOffset"):xt.labelOffset),"labelUpdateInterval",xt.labelUpdateInterval===void 0?$e.get(Ze,"theme.edge.labelUpdateInterval"):xt.labelUpdateInterval),"options",xt),"_sourceType",rr),vt(vt(vt(vt(ki,"_targetType",xn),"_global",Ze.global),"_on",Ze.on.bind(Ze)),"_emit",Ze.emit.bind(Ze))));return Wr._init({_coordinateService:Ze._coordinateService}),Wt.appendChild(Wr.dom),Wr.labelDom&&(zn(Wr.labelDom).css("z-index",Ze._dragEdgeZindex+1),Ut.appendChild(Wr.labelDom)),Wr.arrowDom&&Wt.appendChild(Wr.arrowDom),Ze.edges.push(Wr),Vr.connectedNum+=1,kr.connectedNum+=1,Wr.mounted&&Wr.mounted(),Vr.type===void 0&&(Vr._tmpType="source"),kr.type===void 0&&(kr._tmpType="target"),Wr}else{var no;if(!Un||!qn){console.warn("butterflies error: can not connect edge. link sourceId:".concat(xt.source,";link targetId:").concat(xt.target));return}var uo=new $t((no={type:"node",id:xt.id,label:xt.label,sourceNode:Un,targetNode:qn},vt(vt(vt(vt(vt(vt(vt(vt(vt(vt(no,"type",xt.type||Ze.theme.edge.type),"shapeType",xt.shapeType||Ze.theme.edge.shapeType),"hasRadius",xt.hasRadius||Ze.theme.edge.hasRadius),"orientationLimit",Ze.theme.endpoint.position),"arrow",xt.arrow===void 0?$e.get(Ze,"theme.edge.arrow"):xt.arrow),"arrowShapeType",xt.arrowShapeType===void 0?$e.get(Ze,"theme.edge.arrowShapeType"):xt.arrowShapeType),"arrowPosition",xt.arrowPosition===void 0?$e.get(Ze,"theme.edge.arrowPosition"):xt.arrowPosition),"arrowOffset",xt.arrowOffset===void 0?$e.get(Ze,"theme.edge.arrowOffset"):xt.arrowOffset),"draggable",xt.draggable===void 0?$e.get(Ze,"theme.edge.draggable"):xt.draggable),"labelPosition",xt.labelPosition===void 0?$e.get(Ze,"theme.edge.labelPosition"):xt.labelPosition),vt(vt(vt(vt(vt(vt(vt(vt(vt(vt(no,"labelOffset",xt.labelOffset===void 0?$e.get(Ze,"theme.edge.labelOffset"):xt.labelOffset),"labelUpdateInterval",xt.labelUpdateInterval===void 0?$e.get(Ze,"theme.edge.labelUpdateInterval"):xt.labelUpdateInterval),"isExpandWidth",Ze.theme.edge.isExpandWidth),"defaultAnimate",Ze.theme.edge.defaultAnimate),"options",xt),"_global",Ze.global),"_sourceType",rr),"_targetType",xn),"_on",Ze.on.bind(Ze)),"_emit",Ze.emit.bind(Ze))));return uo._init({_coordinateService:Ze._coordinateService}),Wt.appendChild(uo.dom),uo.labelDom&&Ut.appendChild(uo.labelDom),uo.arrowDom&&Wt.appendChild(uo.arrowDom),Ze.edges.push(uo),uo.mounted&&uo.mounted(),uo}}).filter(function(xt){return xt});return zn(this.svg).append(Wt),zn(this.wrapper).append(Ut),jt.forEach(function(xt){var $t={},Un={};if(xt.type==="endpoint")$t={pos:[xt.sourceEndpoint._posLeft+xt.sourceEndpoint._width/2,xt.sourceEndpoint._posTop+xt.sourceEndpoint._height/2],orientation:xt.sourceEndpoint.orientation?xt.sourceEndpoint.orientation:void 0},Un={pos:[xt.targetEndpoint._posLeft+xt.targetEndpoint._width/2,xt.targetEndpoint._posTop+xt.targetEndpoint._height/2],orientation:xt.targetEndpoint.orientation?xt.targetEndpoint.orientation:void 0};else if(xt.type==="node"){var qn=function(xn,Or){for(var Pr=0,cr=[xn.group];cr.length>0;){var ki=cr.pop(),Vr=Ze.getGroup(ki);Vr&&(Pr+=Vr[Or],Vr.group&&cr.push(Vr.group))}return Pr};$t={pos:[xt.sourceNode.left+xt.sourceNode.getWidth(!0)/2+qn(xt.sourceNode,"left"),xt.sourceNode.top+xt.sourceNode.getHeight(!0)/2+qn(xt.sourceNode,"top")]},Un={pos:[xt.targetNode.left+xt.targetNode.getWidth(!0)/2+qn(xt.targetNode,"left"),xt.targetNode.top+xt.targetNode.getHeight(!0)/2+qn(xt.targetNode,"top")]}}xt.redraw($t,Un)}),ut||(this.pushActionQueue({type:"system:addEdges",data:jt}),this.emit("system.link.connect",{links:jt}),this.emit("events",{type:"link:connect",links:jt})),zn(this.svg).css("visibility","visible"),jt}},{key:"addEdge",value:function(ce,ut){return this.addEdges([ce],ut)[0]}},{key:"removeEdges",value:function(ce,ut,Ze){var Wt=this,Ut=[];return ce.forEach(function(jt){var xt=-1;if(jt instanceof s.default||jt.__type==="edge")jt.sourceEndpoint&&(jt.sourceEndpoint.connectedNum-=1),jt.targetEndpoint&&(jt.targetEndpoint.connectedNum-=1),xt=$e.findIndex(Wt.edges,function($t){return $t.type==="node"?jt.sourceNode.id===$t.sourceNode.id&&jt.targetNode.id===$t.targetNode.id:$e.get(jt,"sourceNode.id")===$e.get($t,"sourceNode.id")&&$e.get(jt,"sourceEndpoint.id")===$e.get($t,"sourceEndpoint.id")&&$e.get(jt,"sourceEndpoint.nodeType")===$e.get($t,"sourceEndpoint.nodeType")&&$e.get(jt,"targetNode.id")===$e.get($t,"targetNode.id")&&$e.get(jt,"targetEndpoint.id")===$e.get($t,"targetEndpoint.id")&&$e.get(jt,"targetEndpoint.nodeType")===$e.get($t,"targetEndpoint.nodeType")});else if($e.isString(jt))xt=$e.findIndex(Wt.edges,function($t){return jt===$t.id});else{console.warn("\u5220\u9664\u7EBF\u6761\u9519\u8BEF\uFF0C\u4F20\u5165\u53C2\u6570\u6709\u8BEF\uFF0C\u8BF7\u68C0\u67E5");return}xt!==-1?Ut=Ut.concat(Wt.edges.splice(xt,1)):console.warn("\u5220\u9664\u7EBF\u6761\u9519\u8BEF\uFF0C\u4E0D\u5B58\u5728\u503C\u4E3A".concat(jt.id,"\u7684\u7EBF"))}),Ze||this.pushActionQueue({type:"system:removeEdges",data:Ut}),ut||(this.emit("system.links.delete",{links:Ut}),this.emit("events",{type:"links:delete",links:Ut})),Ut.forEach(function(jt){jt.destroy(ut)}),Ut.forEach(function(jt){if($e.get(jt,"sourceEndpoint._tmpType")==="source"){var xt=$e.some(Wt.edges,function(Un){return Un.type!==jt.type?!1:Un.type==="node"?jt.sourceNode.id===Un.sourceNode.id:jt.sourceNode.id===Un.sourceNode.id&&jt.sourceEndpoint.id===Un.sourceEndpoint.id});!xt&&(jt.sourceEndpoint._tmpType=void 0)}if($e.get(jt,"targetEndpoint._tmpType")==="target"){var $t=$e.some(Wt.edges,function(Un){return Un.type!==jt.type?!1:Un.type==="node"?jt.targetNode.id===Un.targetNode.id:jt.targetNode.id===Un.targetNode.id&&jt.targetEndpoint.id===Un.targetEndpoint.id});!$t&&(jt.targetEndpoint._tmpType=void 0)}}),Ut}},{key:"removeEdge",value:function(ce,ut,Ze){return this.removeEdges([ce],ut,Ze)[0]}},{key:"getNeighborEdges",value:function(ce,ut){var Ze=void 0,Wt=void 0;return ut==="node"?Ze=$e.find(this.nodes,function(Ut){return ce===Ut.id}):ut==="group"?Wt=$e.find(this.groups,function(Ut){return ce===Ut.id}):(Ze=$e.find(this.nodes,function(Ut){return ce===Ut.id}),Ze&&!ut&&(ut="node"),Wt=$e.find(this.groups,function(Ut){return ce===Ut.id}),Wt&&!ut&&(ut="group")),this.edges.filter(function(Ut){return ut==="node"?Ze&&($e.get(Ut,"sourceNode.id")===Ze.id||$e.get(Ut,"targetNode.id")===Ze.id):Wt&&($e.get(Ut,"sourceNode.id")===Wt.id||$e.get(Ut,"targetNode.id")===Wt.id)})}},{key:"getNeighborEdgesByEndpoint",value:function(ce,ut){var Ze=this.getNeighborEdges(ce);return Ze.filter(function(Wt){return Wt.type==="node"?!1:Wt.sourceNode.id===ce&&Wt.sourceEndpoint.id===ut||Wt.targetNode.id===ce&&Wt.targetEndpoint.id===ut})}},{key:"setEdgeZIndex",value:function(){var ce=this,ut,Ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(Ze.length!==0){Ze.forEach(function(qn){qn._zIndex=Wt;var rr=$e.findIndex(ce.edges,function(Or){return Or===qn});if(rr!==-1){var xn=ce.edges.splice(rr,1);zn(xn.dom).detach(),xn.eventHandlerDom&&zn(xn.eventHandlerDom).detach(),xn.arrowDom&&zn(xn.arrowDom).detach()}else return});var Ut=this._findEdgeIndex(Ze[0]),jt=[];Ze.forEach(function(qn){jt.push(qn.dom),qn.eventHandlerDom&&jt.push(qn.eventHandlerDom),qn.arrowDom&&jt.push(qn.arrowDom)});var xt=this.edges[Ut],$t=this.edges[Ut+1];if(xt){var Un=xt.dom;xt.eventHandlerDom&&(Un=xt.eventHandlerDom),xt.arrowDom&&(Un=xt.arrowDom),zn(Un).after(jt)}else $t?zn($t.dom).before(jt):zn(this.svg).append(jt);(ut=this.edges).splice.apply(ut,[Ut+1,0].concat(Ce(Ze)))}}},{key:"_findEdgeIndex",value:function(ce){var ut=this,Ze=0,Wt=ce._zIndex||0;return this.edges.forEach(function(Ut,jt){if(Wt<(Ut._zIndex||0)){Ze=jt;return}jt===ut.edges.length-1&&(Ze=jt)}),Ze}},{key:"_autoLayout",value:function(ce){var ut=this._rootWidth,Ze=this._rootHeight;if($e.isFunction($e.get(this.layout,"type")))this.layout.type(Ee({width:ut,height:Ze,data:ce},this.layoutOptions));else if($e.get(this.layout,"type")==="forceLayout"){var Wt=zn.extend({width:ut,height:Ze,center:{x:ut/2,y:Ze/2},chargeStrength:-150,link:{id:"id",distance:200,strength:1},collide:{radius:20}},$e.get(this.layout,"options"),!0);$e.get(this.layout,"type")==="forceLayout"&&N.default.forceLayout({opts:Wt,data:{groups:ce.groups,nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}}),layers:ce.layers}})}else if($e.get(this.layout,"type")==="dagreLayout")N.default.dagreLayout({rankdir:$e.get(this.layout,"options.rankdir")||"TB",align:$e.get(this.layout,"options.align"),nodeSize:$e.get(this.layout,"options.nodeSize"),nodesepFunc:$e.get(this.layout,"options.nodesepFunc"),ranksepFunc:$e.get(this.layout,"options.ranksepFunc"),nodesep:$e.get(this.layout,"options.nodesep")||50,ranksep:$e.get(this.layout,"options.ranksep")||50,controlPoints:$e.get(this.layout,"options.controlPoints")||!1,data:{nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}})}});else if($e.get(this.layout,"type")==="concentricLayout")N.default.concentLayout({center:$e.get(this.layout,"options.center")||[ut/2,Ze/2],nodeSize:$e.get(this.layout,"options.nodeSize")||30,minNodeSpacing:$e.get(this.layout,"options.minNodeSpacing")||10,preventOverlap:$e.get(this.layout,"options.preventOverlap")||!1,sweep:$e.get(this.layout,"options.sweep"),equidistant:$e.get(this.layout,"options.equidistant")||!1,startAngle:3/2*Math.PI,clockwise:$e.get(this.layout,"options.clockwise")||!0,maxLevelDiff:$e.get(this.layout,"options.maxLevelDiff"),sortBy:$e.get(this.layout,"options.sortBy")||"degree",width:ut,height:Ze,data:{groups:ce.groups,nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}})}});else if($e.get(this.layout,"type")==="circleLayout")N.default.circleLayout({radius:$e.get(this.layout,"options.radius"),getWidth:$e.get(this.layout,"options.getWidth"),getHeight:$e.get(this.layout,"options.getHeight"),data:{nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}})}});else if($e.get(this.layout,"type")==="gridLayout"){var Ut=zn.extend({width:$e.get(this.layout,"width")||150,height:$e.get(this.layout,"height")||100,begin:$e.get(this.layout,"begin")||[0,0],center:$e.get(this.layout,"center")||[ut/2,Ze/2],preventOverlap:$e.get(this.layout,"preventOverlap")||!0,preventOverlapPadding:$e.get(this.layout,"preventOverlapPadding")||10,condense:$e.get(this.layout,"condense")||!1,rows:$e.get(this.layout,"rows"),cols:$e.get(this.layout,"cols"),position:$e.get(this.layout,"position"),sortBy:$e.get(this.layout,"sortBy")||"degree",nodeSize:$e.get(this.layout,"nodeSize")||30,link:{id:"id",distance:100,strength:1}},$e.get(this.layout,"options"),!0);$e.get(this.layout,"type")==="gridLayout"&&N.default.gridLayout({opts:Ut,data:{groups:ce.groups,nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}})}})}else if($e.get(this.layout,"type")==="fruchterman"){var jt=zn.extend({width:ut,height:Ze,maxIteration:1e3,center:[ut/2,Ze/2],gravity:5,speed:5,clustering:!1,clusterGravity:10,link:{id:"id",distance:100,strength:1}},$e.get(this.layout,"options"),!0);$e.get(this.layout,"type")==="fruchterman"&&N.default.fruchterman({opts:jt,data:{groups:ce.groups,nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}})}})}else if($e.get(this.layout,"type")==="radial"){var xt=zn.extend({width:$e.get(this.layout,"options.width")||500,height:$e.get(this.layout,"options.height")||500,maxIteration:$e.get(this.layout,"options.maxIteration")||1e3,center:$e.get(this.layout,"options.center")||[ut/2,Ze/2],focusNode:$e.get(this.layout,"options.focusNode")||null,unitRadius:$e.get(this.layout,"options.unitRadius")||null,linkDistance:$e.get(this.layout,"options.linkDistance")||50,preventOverlap:$e.get(this.layout,"options.preventOverlap")||!1,nodeSize:$e.get(this.layout,"options.nodeSize")||void 0,nodeSpacing:$e.get(this.layout,"options.nodeSpacing")||void 0,strictRadial:$e.get(this.layout,"options.strictRadial")||!0,maxPreventOverlapIteration:$e.get(this.layout,"options.maxPreventOverlapIteration")||200,sortBy:$e.get(this.layout,"options.sortBy")||void 0,sortStrength:$e.get(this.layout,"options.sortStrength")||10,link:{id:"id",distance:100,strength:1}},$e.get(this.layout,"options"),!0);$e.get(this.layout,"type")==="radial"&&N.default.radial({opts:xt,data:{groups:ce.groups,nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}})}})}else $e.get(this.layout,"type")==="dagreGroupLayout"&&N.default.dagreGroupLayout({rankdir:$e.get(this.layout,"options.rankdir")||"TB",align:$e.get(this.layout,"options.align"),nodeSize:$e.get(this.layout,"options.nodeSize"),nodesepFunc:$e.get(this.layout,"options.nodesepFunc"),ranksepFunc:$e.get(this.layout,"options.ranksepFunc"),nodesep:$e.get(this.layout,"options.nodesep")||50,ranksep:$e.get(this.layout,"options.ranksep")||50,controlPoints:$e.get(this.layout,"options.controlPoints")||!1,data:{groups:ce.groups,nodes:ce.nodes,edges:ce.edges.map(function($t){return{source:$t.type==="endpoint"?$t.sourceNode:$t.source,target:$t.type==="endpoint"?$t.targetNode:$t.target}})}})}},{key:"setMinimap",value:function(){var ce=this,ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ze.events||(Ze.events=[]);var Wt=["system.canvas.zoom","system.node.delete","system.node.move","system.nodes.add","system.group.delete","system.group.move","system.drag.move","system.canvas.move"].concat(Ce(Ze.events)),Ut=function(){return ce.nodes.map(function(Pr){return{id:Pr.id,left:Pr.left,top:Pr.top,width:Pr.getWidth(),height:Pr.getHeight(),group:Pr.group,minimapActive:$e.get(Pr,"options.minimapActive")}})},jt=function(){return ce.groups.map(function(Pr){return{id:Pr.id,left:Pr.left,top:Pr.top,width:Pr.getWidth(),height:Pr.getHeight(),minimapActive:$e.get(Pr,"options.minimapActive")}})};if(ut&&!this.minimap){this.minimap=new q.default(Ee({root:this.root,move:this.move.bind(this),terminal2canvas:this.terminal2canvas.bind(this),canvas2terminal:this.canvas2terminal.bind(this),nodes:Ut(),groups:jt(),zoom:this.getZoom(),offset:this.getOffset()},Ze)),this.updateFn=function(){ce.minimap.update({nodes:Ut(),groups:jt(),zoom:ce.getZoom(),offset:ce.getOffset()})};var xt=ue(Wt),$t;try{for(xt.s();!($t=xt.n()).done;){var Un=$t.value;this.on(Un,this.updateFn)}}catch(Or){xt.e(Or)}finally{xt.f()}return}if(this.minimap){this.minimap.destroy();var qn=ue(Wt),rr;try{for(qn.s();!(rr=qn.n()).done;){var xn=rr.value;this.off(xn,this.updateFn)}}catch(Or){qn.e(Or)}finally{qn.f()}delete this.minimap,delete this.updateFn}}},{key:"focusNodesWithAnimate",value:function(ce){var ut=this,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node"],Wt=arguments.length>2?arguments[2]:void 0,Ut=arguments.length>3?arguments[3]:void 0,jt=1/0,xt=-1/0,$t=1/0,Un=-1/0;if($e.includes(Ze,"node")){var qn=ce.nodes;this.nodes.filter(function(rs){return $e.find(qn,function(Eo){return rs.id===Eo})!==void 0}).forEach(function(rs){var Eo=rs.left,Qo=rs.left+rs.getWidth(!0),Xs=rs.top,Ys=rs.top+rs.getHeight(!0);if(rs.group){var ot=ut.getGroup(rs.group);ot&&(Eo+=ot.left,Qo+=ot.left,Xs+=ot.top,Ys+=ot.top)}Eo<jt&&(jt=Eo),Qo>xt&&(xt=Qo),Xs<$t&&($t=Xs),Ys>Un&&(Un=Ys)})}if($e.includes(Ze,"group")){var rr=ce.groups;this.groups.filter(function(rs){return $e.find(rr,function(Eo){return Eo===rs.id})}).forEach(function(rs){var Eo=rs.left,Qo=rs.left+rs.getWidth(),Xs=rs.top,Ys=rs.top+rs.getHeight();Eo<jt&&(jt=Eo),Qo>xt&&(xt=Qo),Xs<$t&&($t=Xs),Ys>Un&&(Un=Ys)})}var xn=$e.get(Wt,"offset")||[0,0],Or=xt-jt,Pr=this._rootWidth-xn[0],cr=Un-$t,ki=this._rootHeight-xn[1],Vr=Pr/Or,kr=ki/cr,Ui=Vr<kr?Vr:kr;$e.get(Wt,"keepPreZoom")?Ui=this._zoomData<Ui?this._zoomData:Ui:Ui=1<Ui?1:Ui;var Wr=this._coordinateService._canvas2terminal("x",jt,{scale:Ui,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),no=this._coordinateService._canvas2terminal("x",xt,{scale:Ui,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),uo=this._coordinateService._canvas2terminal("y",$t,{scale:Ui,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),wi=this._coordinateService._canvas2terminal("y",Un,{scale:Ui,canOffsetX:0,canOffsetY:0,terOffsetX:0,terOffsetY:0,originX:50,originY:50}),wo=(Wr+no-this._rootWidth)/2,fs=(uo+wi-this._rootHeight)/2;wo=-wo+xn[0],fs=-fs+xn[1];var zo=500,hs=new Promise(function(rs){zn(ut.wrapper).animate({top:fs,left:wo},zo,function(){rs()})});this._moveData=[wo,fs],this._coordinateService._changeCanvasInfo({canOffsetX:wo,canOffsetY:fs,scale:Ui,originX:50,originY:50});var ks=new Promise(function(rs){ut.zoom(Ui,function(){rs()})});this._isFocusing=!0,Promise.all([hs,ks]).then(function(){ut._isFocusing=!1,Ut&&Ut()})}},{key:"focusCenterWithAnimate",value:function(ce,ut){var Ze=this.nodes.map(function(Ut){return Ut.id}),Wt=this.groups.map(function(Ut){return Ut.id});if(Ze.length===0&&Wt.length===0){this.move([0,0]),this.zoom(1,ut);return}this.focusNodesWithAnimate({nodes:Ze,groups:Wt},["node","group"],ce,ut)}},{key:"focusNodeWithAnimate",value:function(ce){var ut=this,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"node",Wt=arguments.length>2?arguments[2]:void 0,Ut=arguments.length>3?arguments[3]:void 0,jt=null;$e.isFunction(ce)?jt=Ze==="node"?$e.find(this.nodes,ce):$e.find(this.groups,ce):jt=Ze==="node"?$e.find(this.nodes,function(Ui){return Ui.id===ce}):$e.find(this.groups,function(Ui){return Ui.id===ce});var xt=0,$t=0;if(jt){if(xt=jt.top||jt.y||0,$t=jt.left||jt.x||0,jt.height&&(xt+=jt.height/2),jt.width&&($t+=jt.width/2),jt.group){var Un=$e.find(this.groups,function(Ui){return Ui.id===jt.group});if(!Un)return;xt+=Un.top||Un.y,$t+=Un.left||Un.x,Un.height&&(xt+=Un.height/2),Un.width&&($t+=Un.width/2)}var qn=$e.get(Wt,"offset")||[0,0],rr=this._rootWidth,xn=this._rootHeight,Or=xn/2-xt+qn[1],Pr=rr/2-$t+qn[0],cr=500,ki=new Promise(function(Ui){zn(ut.wrapper).animate({top:Or,left:Pr},cr,function(){Ui()})});this._moveData=[Pr,Or];var Vr=1;$e.get(Wt,"keepPreZoom")&&(Vr=this._zoomData<Vr?this._zoomData:Vr),this._coordinateService._changeCanvasInfo({canOffsetX:Pr,canOffsetY:Or,originX:50,originY:50,scale:Vr});var kr=new Promise(function(Ui){ut.zoom(Vr,function(){Ui()})});this._isFocusing=!0,Promise.all([ki,kr]).then(function(){ut._isFocusing=!1,Ut&&Ut()}),this._guidelineService.isActive&&this._guidelineService.clearCanvas()}}},{key:"setSelectMode",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node"],Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"include";ce?(this.isSelectMode=!0,this._rmSystemUnion(),this.selectContents=ut,this.selectMode=Ze,this.canvasWrapper.active(),this._remarkMove=this.moveable,this._remarkZoom=this.zoomable,this.setZoomable(!1),this.setMoveable(!1)):(this.isSelectMode=!1,this.canvasWrapper.unActive(),this._remarkMove&&this.setMoveable(!0),this._remarkZoom&&this.setZoomable(!0))}},{key:"getUnion",value:function(ce){if(!ce){console.error("\u4F20\u5165\u6B63\u786E\u7684name");return}return this._unionData[ce]}},{key:"getAllUnion",value:function(){return this._unionData}},{key:"add2Union",value:function(ce,ut){var Ze=this;if(!(!ce||!ut)){this._unionData[ce]||(this._unionData[ce]={nodes:[],groups:[],edges:[],endpoints:[]});var Wt=this._unionData[ce];ut.nodes&&(ut.nodes.forEach(function(Ut){var jt=$e.isString(Ut),xt=jt?Ze.getNode(Ut):Ut;Wt.nodes.push(xt)}),Wt.nodes=$e.uniqBy(Wt.nodes,"id")),ut.groups&&(ut.groups.forEach(function(Ut){var jt=$e.isString(Ut),xt=jt?Ze.getGroup(Ut):Ut;Wt.groups.push(xt)}),Wt.groups=$e.uniqBy(Wt.groups,"id")),ut.edges&&(ut.edges.forEach(function(Ut){var jt=$e.isString(Ut),xt=jt?Ze.getEdge(Ut):Ut;Wt.edges.push(xt)}),Wt.edges=$e.uniqBy(Wt.edges,"id")),ut.endpoints&&(Wt.endpoints=Wt.endpoints.concat(ut.endpoints))}}},{key:"removeUnion",value:function(ce){this._unionData[ce]={nodes:[],edges:[],groups:[],endpoints:[]}}},{key:"removeAllUnion",value:function(){this._unionData={__system:{nodes:[],edges:[],groups:[],endpoints:[]}}}},{key:"_rmSystemUnion",value:function(){this._unionData.__system.nodes=[],this._unionData.__system.edges=[],this._unionData.__system.groups=[],this._unionData.__system.endpoints=[]}},{key:"_findUnion",value:function(ce,ut){var Ze=[];for(var Wt in this._unionData){var Ut=$e.find($e.get(this._unionData,[Wt,ce],[]),function(jt){return $e.toString(jt.id)===$e.toString(ut.id)});Ut&&Ze.push(Wt)}return Ze}},{key:"_selectMultiplyItem",value:function(ce,ut){var Ze=this,Wt=this._coordinateService._terminal2canvas("x",ce[0]),Ut=this._coordinateService._terminal2canvas("y",ce[1]),jt=this._coordinateService._terminal2canvas("x",ce[2]),xt=this._coordinateService._terminal2canvas("y",ce[3]),$t=$e.includes(this.selectContents,"node"),Un=$e.includes(this.selectContents,"edge"),qn=$e.includes(this.selectContents,"endpoint"),rr=function(Or){var Pr=Or.left,cr=Or.right,ki=Or.top,Vr=Or.bottom;if(Ze.selectMode==="include"||Ze.selectMode==="senior"&&ut==="right")return Wt<Pr&&jt>cr&&Ut<ki&&xt>Vr;if(Ze.selectMode==="touch"||Ze.selectMode==="senior"&&ut==="left"){var kr=!0;return jt<Pr&&(kr=!1),Wt>cr&&(kr=!1),xt<ki&&(kr=!1),Ut>Vr&&(kr=!1),kr}};return $t&&this.nodes.forEach(function(xn){var Or=xn.left,Pr=xn.left+zn(xn.dom).width(),cr=xn.top,ki=xn.top+zn(xn.dom).height();if(xn.group){var Vr=Ze.getGroup(xn.group);Or+=Vr.left,Pr+=Vr.left,cr+=Vr.top,ki+=Vr.top}var kr=rr({left:Or,right:Pr,top:cr,bottom:ki});kr&&Ze.selectItem.nodes.push(xn)}),qn&&this.nodes.forEach(function(xn){xn.endpoints.forEach(function(Or){var Pr=Or._posLeft,cr=Or._posLeft+zn(Or.dom).width(),ki=Or._posTop,Vr=Or._posTop+zn(Or.dom).height(),kr=rr({left:Pr,right:cr,top:ki,bottom:Vr});kr&&Ze.selectItem.endpoints.push(Or)})}),Un&&this.edges.forEach(function(xn){if(xn.type==="endpoint"){var Or=xn.sourceEndpoint._posLeft<xn.targetEndpoint._posLeft?xn.sourceEndpoint._posLeft:xn.targetEndpoint._posLeft,Pr=xn.sourceEndpoint._posLeft+xn.sourceEndpoint._width>xn.targetEndpoint._posLeft+xn.targetEndpoint._width?xn.sourceEndpoint._posLeft+xn.sourceEndpoint._width:xn.targetEndpoint._posLeft+xn.targetEndpoint._width,cr=xn.sourceEndpoint._posTop<xn.targetEndpoint._posTop?xn.sourceEndpoint._posTop:xn.targetEndpoint._posTop,ki=xn.sourceEndpoint._posTop+xn.sourceEndpoint._height>xn.targetEndpoint._posTop+xn.targetEndpoint._height?xn.sourceEndpoint._posTop+xn.sourceEndpoint._height:xn.targetEndpoint._posTop+xn.targetEndpoint._height,Vr=rr({left:Or,right:Pr,top:cr,bottom:ki});Vr&&Ze.selectItem.edges.push(xn)}else xn.type}),this.selectItem}},{key:"updateRootResize",value:function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._coordinateService._changeCanvasInfo({terOffsetX:ce.terOffsetX||zn(this.root).offset().left,terOffsetY:ce.terOffsetY||zn(this.root).offset().top,terWidth:ce.terWidth||zn(this.root).width(),terHeight:ce.terHeight||zn(this.root).height()}),this.canvasWrapper._changeCanvasInfo({terScrollX:ce.terScrollX||0,terScrollY:ce.terScrollY||0}),this.canvasWrapper.resize({root:this.root}),this._gridService._resize(),this._guidelineService._resize()}},{key:"setZoomable",value:function(ce){var ut=this,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._zoomDirection;Ze!==void 0&&(this._zoomDirection=Ze),this._zoomCb||(this._zoomCb=function(Wt){Wt.preventDefault();var Ut=Wt.deltaY;if(ut._zoomDirection?ut._zoomData-=Ut*ut.theme.zoomGap:ut._zoomData+=Ut*ut.theme.zoomGap,ut._zoomData<.25){ut._zoomData=.25;return}if(ut._zoomData>5){ut._zoomData=5;return}for(var jt=["webkit","moz","ms","o"],xt="scale(".concat(ut._zoomData,")"),$t=0;$t<jt.length;$t++)ut.wrapper.style["".concat(jt[$t],"Transform")]=xt;ut.wrapper.style.transform=xt,ut._coordinateService._changeCanvasInfo({wrapper:ut.wrapper,girdWrapper:ut._guidelineService.dom,mouseX:Wt.clientX,mouseY:Wt.clientY,scale:ut._zoomData}),ut._guidelineService.zoom(ut._zoomData),ut._guidelineService.setOrigin(ut._coordinateService.originX,ut._coordinateService.originY),ut.emit("system.canvas.zoom",{zoom:ut._zoomData}),ut.emit("events",{type:"canvas.zoom",zoom:ut._zoomData})}),ce?this.root.addEventListener("wheel",this._zoomCb):this.root.removeEventListener("wheel",this._zoomCb)}},{key:"setMoveable",value:function(ce){ce?(this.moveable=!0,this._dragType==="canvas:drag"&&(this.moveable=!1)):this.moveable=!1}},{key:"setLinkable",value:function(ce){this.linkable=!!ce}},{key:"setDisLinkable",value:function(ce){this.disLinkable=!!ce}},{key:"setDraggable",value:function(ce){this.nodes.forEach(function(ut){ut.setDraggable(ce)}),this.draggable=ce}},{key:"setOrigin",value:function(ce){var ut=(ce[0]||"0").toString().replace("%",""),Ze=(ce[1]||"0").toString().replace("%","");this._coordinateService._changeCanvasInfo({originX:parseFloat(ut),originY:parseFloat(Ze)}),this._guidelineService.setOrigin(ut,Ze)}},{key:"getZoom",value:function(){return this._zoomData}},{key:"getOffset",value:function(){return this._moveData}},{key:"getOrigin",value:function(){return[this._coordinateService.originX+"%",this._coordinateService.originY+"%"]}},{key:"zoom",value:function(ce,ut){var Ze=this;ce<.25&&(ce=.25),ce>5&&(ce=5);var Wt=50,Ut=1,jt=ce-this._zoomData,xt=jt/20;clearInterval(this._zoomTimer),this._zoomTimer=null,jt!==0?this._zoomTimer=setInterval(function(){Ze._zoomData+=xt;var $t={scale:Ze._zoomData};(Ze._coordinateService.originX===void 0||Ze._coordinateService.originY===void 0)&&($t.originX=50,$t.originY=50),Ze._coordinateService._changeCanvasInfo($t),Ze._guidelineService.zoom(Ze._zoomData),Ze._guidelineService.setOrigin(Ze._coordinateService.originX,Ze._coordinateService.originY),zn(Ze.wrapper).css({transform:"scale(".concat(Ze._zoomData,")")}),Ut===20&&(clearInterval(Ze._zoomTimer),Ze.emit("system.canvas.zoom",{zoom:Ze._zoomData}),Ze.emit("events",{type:"canvas.zoom",zoom:Ze._zoomData}),ut&&ut()),Ut++},Wt/20):ut&&ut()}},{key:"move",value:function(ce){zn(this.wrapper).css("left",ce[0]).css("top",ce[1]),this._coordinateService._changeCanvasInfo({canOffsetX:ce[0],canOffsetY:ce[1]}),this._guidelineService.isActive&&this._guidelineService.move(ce[0],ce[1]),this._moveData=ce,this.emit("system.canvas.move"),this.emit("events",{type:"system.canvas.move"})}},{key:"setGridMode",value:function(){var ce=this,ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._gridObj,Wt=arguments.length>2?arguments[2]:void 0;if(ut){if(this._gridObjQueue.push(Ze),this._gridTimer)return;this._gridTimer=setInterval(function(){if(ce._gridObjQueue.length===0){clearInterval(ce._gridTimer),ce._gridTimer=null;return}ce._gridObj=ce._gridObjQueue.pop(),Wt&&ce._gridService._resize(),ce._gridService.create(ce._gridObj),ce._gridObjQueue=[]},1e3)}else this._gridService.destroy(),this._gridObjQueue=[]}},{key:"setGuideLine",value:function(){var ce=this,ut=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._guideObj;if(ut){if(this._guideObjQueue.push(Ze),this._guideTimer)return;this._guideTimer=setInterval(function(){if(ce._guideObjQueue.length===0){clearInterval(ce._guideTimer),ce._guideTimer=null;return}ce._guideObj=ce._guideObjQueue.pop(),ce._guidelineService.create(ce._guideObj),ce._guideObjQueue=[]},200)}else this._guidelineService.destroy(),this._guideObjQueue=[]}},{key:"canvas2terminal",value:function(ce,ut){return this._coordinateService.canvas2terminal(ce,ut)}},{key:"terminal2canvas",value:function(ce,ut){return this._coordinateService.terminal2canvas(ce,ut)}},{key:"save2img",value:function(ce){var ut="toPng";switch(ce.type){case"jpeg":case".jpeg":ut="toJpeg";break;case"png":case".png":ut="toPng";break;case"svg":case".svg":ut="toSvg";break}return Xt[ut](this.root,ce).then(function(Ze){return Ze}).catch(function(Ze){console.error("oops, something went wrong!",Ze)})}},{key:"justifyCoordinate",value:function(){this._gridService.justifyAllCoordinate()}},{key:"_autoMoveCanvas",value:function(ce,ut,Ze,Wt){var Ut=this;if(this.theme.autoFixCanvas.enable){this._autoMoveDir=[];var jt=this._coordinateService.terOffsetX,xt=this._coordinateService.terOffsetY;if(clearInterval(this._autoMoveTimer),this._autoMoveTimer=null,!(this._autoMoveTimer&&this._autoMoveDir.length>0)){var $t=this.theme.autoFixCanvas.autoMovePadding;if(ce-jt<=$t[3]&&this._autoMoveDir.push("left"),this._rootWidth-(ce-jt)<=$t[1]&&this._autoMoveDir.push("right"),ut-xt<=$t[0]&&this._autoMoveDir.push("top"),this._rootHeight-(ut-xt)<=$t[2]&&this._autoMoveDir.push("bottom"),this._autoMoveDir.length===0){clearInterval(this._autoMoveTimer);return}if(!this._autoMoveTimer){var Un=5;this._autoMoveTimer=setInterval(function(){Ut._autoMoveDir.includes("left")&&(Ut.move([Ut._moveData[0]+Un,Ut._moveData[1]]),qn([-Un,0])),Ut._autoMoveDir.includes("right")&&(Ut.move([Ut._moveData[0]-Un,Ut._moveData[1]]),qn([+Un,0])),Ut._autoMoveDir.includes("top")&&(Ut.move([Ut._moveData[0],Ut._moveData[1]+Un]),qn([0,-Un])),Ut._autoMoveDir.includes("bottom")&&(Ut.move([Ut._moveData[0],Ut._moveData[1]-Un]),qn([0,+Un]))},70)}var qn=function(xn){if(Ze.type==="node:drag")Ze.nodes.forEach(function(Pr){Pr.moveTo(Pr.left+xn[0],Pr.top+xn[1])});else if(Ze.type==="group:drag"){var Or=Ze.group;Or.moveTo(Or.left+xn[0],Or.top+xn[1])}Wt&&Wt(xn)}}}}},{key:"undo",value:function(){var ce=this,ut=[];if(this.actionQueueIndex<=-1){console.warn("\u56DE\u9000\u5806\u6808\u5DF2\u7A7A\uFF0C\u65E0\u6CD5\u518Dundo");return}var Ze=this.actionQueue[this.actionQueueIndex--];if(Ze.type==="_system:dragNodeEnd"&&(Ze=this.actionQueue[this.actionQueueIndex--]),ut.push(Ze),Ze.type==="system:addNodes")this.removeNodes(Ze.data,!1,!0);else if(Ze.type==="system:removeNodes")this.addNodes(Ze.data.nodes,!0),this.addEdges(Ze.data.edges,!0);else if(Ze.type==="system:addEdges")this.removeEdges(Ze.data,!0,!0);else if(Ze.type==="system:removeEdges")this.addEdges(Ze.data,!0);else if(Ze.type==="system:moveNodes")for(var Wt in Ze.data.nodes){var Ut=Ze.data.nodes[Wt],jt=this.getNode(Wt);jt.moveTo(Ut.fromLeft,Ut.fromTop,!0)}else if(Ze.type==="system:moveGroups")for(var xt in Ze.data.groups){var $t=Ze.data.groups[xt],Un=this.getGroup(xt);Un.moveTo($t.fromLeft,$t.fromTop,!0)}else if(Ze.type==="system:addGroups")Ze.data.forEach(function(no){no.nodes.length>0&&ce.removeNodes(no.nodes),ce.removeGroup(no.group.id,!0)});else if(Ze.type==="system:removeGroup")this.addGroup(Ze.data.group,Ze.data.groups.concat(Ze.data.nodes)||[],{notResize:!0,notAdaptorPos:!0},!0);else if(Ze.type==="system:groupAddMembers"){var qn=Ze.data.sourceGroup,rr=Ze.data.targetGroup;rr&&rr.removeNodes(Ze.data.nodes,!0),qn&&qn.addNodes(Ze.data.nodes,!0);var xn={};if(Ze.data._isDraging&&(xn=this.actionQueue[this.actionQueueIndex],xn.type==="system:moveNodes")){for(var Or in xn.data.nodes){var Pr=xn.data.nodes[Or],cr=this.getNode(Or);cr.moveTo(Pr.fromLeft,Pr.fromTop,!0)}ut.unshift(xn)}this.actionQueueIndex--}else if(Ze.type==="system:groupRemoveMembers"){var ki=Ze.data.group;ki&&ki.addNodes(Ze.data.nodes,!0);var Vr={};if(Ze.data._isDraging&&(Vr=this.actionQueue[this.actionQueueIndex],Vr.type==="system:moveNodes")){for(var kr in Vr.data.nodes){var Ui=Vr.data.nodes[kr],Wr=this.getNode(kr);Wr.moveTo(Ui.fromLeft,Ui.fromTop,!0)}ut.unshift(Vr),this.actionQueueIndex--}this.actionQueueIndex--}else Ze.type==="system:reconnectEdges"&&$e.get(Ze,"data.info",[]).forEach(function(no){var uo=ce.getNode(no.preTargetNodeId),wi=uo.getEndpoint(no.preTargetPointId);no.edge._create({id:"".concat(no.edge.sourceEndpoint.id,"-").concat(wi.id),targetNode:uo,_targetType:wi.nodeType,targetEndpoint:wi,type:"endpoint"})});this.emit("system.canvas.undo",{steps:ut}),this.emit("events",{type:"canvas.undo",steps:ut})}},{key:"redo",value:function(){var ce=this,ut=[];if(this.actionQueueIndex>=this.actionQueue.length-1){console.warn("\u91CD\u505A\u5806\u6808\u5DF2\u5230\u9876\uFF0C\u65E0\u6CD5\u518Dredo");return}var Ze=this.actionQueue[++this.actionQueueIndex];if(ut.push(Ze),Ze.type==="system:moveNodes"&&Ze.data._isDraging&&(Ze=this.actionQueue[++this.actionQueueIndex],ut.push(Ze)),Ze.type==="system:addNodes")this.addNodes(Ze.data,!0);else if(Ze.type==="system:removeNodes")this.removeNodes(Ze.data.nodes,!1,!0);else if(Ze.type==="system:addEdges")this.addEdges(Ze.data,!0);else if(Ze.type==="system:removeEdges")this.removeEdges(Ze.data,!0,!0);else if(Ze.type==="system:moveNodes")for(var Wt in Ze.data.nodes){var Ut=Ze.data.nodes[Wt],jt=this.getNode(Wt);jt.moveTo(Ut.toLeft,Ut.toTop,!0)}else if(Ze.type==="system:moveGroups")for(var xt in Ze.data.groups){var $t=Ze.data.groups[xt],Un=this.getGroup(xt);Un.moveTo($t.toLeft,$t.toTop,!0)}else if(Ze.type==="system:addGroups")Ze.data.forEach(function(no){ce.addGroup(no.group,no.nodes||[],void 0,!0)});else if(Ze.type==="system:removeGroup")this.removeGroup(Ze.data.group,!0);else if(Ze.type==="system:groupAddMembers"){var qn=Ze.data.sourceGroup,rr=Ze.data.targetGroup,xn=this.actionQueue[this.actionQueueIndex-1];if(xn.type==="system:moveNodes"&&xn.data._isDraging)for(var Or in xn.data.nodes){var Pr=xn.data.nodes[Or],cr=this.getNode(Or);cr.moveTo(Pr.toLeft,Pr.toTop,!0)}rr&&rr.addNodes(Ze.data.nodes,!0),qn&&qn.removeNodes(Ze.data.nodes,!0)}else if(Ze.type==="system:groupRemoveMembers"){var ki=Ze.data.group;ki&&ki.removeNodes(Ze.data.nodes,!0);var Vr={};if(Ze.data._isDraging&&(Vr=this.actionQueue[this.actionQueueIndex],Vr.type==="system:moveNodes")){for(var kr in Vr.data.nodes){var Ui=Vr.data.nodes[kr],Wr=this.getNode(kr);Wr.moveTo(Ui.fromLeft,Ui.fromTop,!0)}this.actionQueueIndex--}}else Ze.type==="system:reconnectEdges"&&$e.get(Ze,"data.info",[]).forEach(function(no){var uo=ce.getNode(no.currentTargetNodeId),wi=uo.getEndpoint(no.currentTargetPointId);no.edge._create({id:"".concat(no.edge.sourceEndpoint.id,"-").concat(wi.id),targetNode:uo,_targetType:wi.nodeType,targetEndpoint:wi,type:"endpoint"})});this.emit("system.canvas.redo",{steps:ut}),this.emit("events",{type:"canvas.redo",steps:ut}),$e.get(this.actionQueue,[this.actionQueueIndex+1,"type"])==="_system:dragNodeEnd"&&this.actionQueueIndex++}},{key:"isActionQueueTop",value:function(){return this.actionQueueIndex>=this.actionQueue.length-1}},{key:"isActionQueueBottom",value:function(){return this.actionQueueIndex<=-1}},{key:"pushActionQueue",value:function(ce){var ut=this,Ze=ce;if(ce.type==="system:moveNodes"||ce.type==="system:moveGroups"){var Wt={"system:moveNodes":"node","system:moveGroups":"group"}[ce.type],Ut=Wt+"s",jt=this.actionQueue[this.actionQueueIndex]||{};if(jt.type===ce.type&&jt.data[Ut][ce.data[Wt].id]){jt.data[Ut][ce.data[Wt].id].toTop=ce.data.top,jt.data[Ut][ce.data[Wt].id].toLeft=ce.data.left;return}else{var xt=[ce.data[Wt]],$t=this._findUnion(Ut,ce.data[Wt]);$t&&$t.length>0&&($t.forEach(function(Un){xt=xt.concat(ut._unionData[Un][Ut])}),xt=$e.uniqBy(xt,"id")),Ze={type:ce.type,data:vt({},Ut,{})},xt.forEach(function(Un){Ze.data[Ut][Un.id]={fromTop:Un.top,fromLeft:Un.left,toTop:Un.top,toLeft:Un.left}}),Ze.data[Ut][ce.data[Wt].id].toTop=ce.data.top,Ze.data[Ut][ce.data[Wt].id].toLeft=ce.data.left}}this.actionQueueIndex>=this.global.limitQueueLen&&(this.actionQueue.shift(),this.actionQueueIndex--),this.actionQueue.splice(this.actionQueueIndex+1,this.actionQueue.length),this.actionQueue.push(Ze),this.actionQueueIndex++,$e.get(this.actionQueue,[this.actionQueueIndex-1,"type"])==="_system:dragNodeEnd"&&(this.actionQueue.splice(this.actionQueueIndex-1,1),this.actionQueueIndex--)}},{key:"popActionQueue",value:function(){if(this.actionQueue.length>0){var ce=this.actionQueue.pop();return this.actionQueueIndex--,ce}else console.warn("\u64CD\u4F5C\u961F\u5217\u5DF2\u4E3A\u7A7A\uFF0C\u8BF7\u786E\u8BA4")}},{key:"clearActionQueue",value:function(){this.actionQueue=[],this.actionQueueIndex=-1}},{key:"getNodesVisibleStatus",value:function(){var ce={inside:[],outside:[]},ut=[this._coordinateService._terminal2canvas("x",0+this._coordinateService.terOffsetX),this._coordinateService._terminal2canvas("x",this._coordinateService.terWidth+this._coordinateService.terOffsetX),this._coordinateService._terminal2canvas("y",0+this._coordinateService.terOffsetY),this._coordinateService._terminal2canvas("y",this._coordinateService.terHeight+this._coordinateService.terOffsetY)];return this.nodes.forEach(function(Ze){var Wt=Ze.left,Ut=Ze.left+Ze.getWidth(!0),jt=Ze.top,xt=Ze.top+Ze.getHeight(!0);Wt>=ut[0]&&Ut<=ut[1]&&jt>=ut[2]&&xt<=ut[3]?ce.inside.push(Ze):ce.outside.push(Ze)}),ce}}]),Tt}(l.default);b.default=Rt},627:function(T,b,u){"use strict";function a(I){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},a(I)}Object.defineProperty(b,"__esModule",{value:!0});var o=u(1377),l=d(o),r=u(5340),e=d(r),t=u(7305),s=d(t),h=u(4047),m=d(h);function d(I){return I&&I.__esModule?I:{default:I}}function v(I,j){if(!(I instanceof j))throw new TypeError("Cannot call a class as a function")}function x(I,j){for(var ue=0;ue<j.length;ue++){var se=j[ue];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(I,F(se.key),se)}}function N(I,j,ue){return j&&x(I.prototype,j),ue&&x(I,ue),Object.defineProperty(I,"prototype",{writable:!1}),I}function F(I){var j=ae(I,"string");return a(j)=="symbol"?j:String(j)}function ae(I,j){if(a(I)!="object"||!I)return I;var ue=I[Symbol.toPrimitive];if(ue!==void 0){var se=ue.call(I,j||"default");if(a(se)!="object")return se;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(I)}function $(I,j,ue){return j=ee(j),te(I,B()?Reflect.construct(j,ue||[],ee(I).constructor):j.apply(I,ue))}function te(I,j){if(j&&(a(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fe(I)}function fe(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function B(){try{var I=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(j){}return(B=function(){return!!I})()}function he(){return typeof Reflect!="undefined"&&Reflect.get?he=Reflect.get.bind():he=function(j,ue,se){var Ee=z(j,ue);if(Ee){var Ce=Object.getOwnPropertyDescriptor(Ee,ue);return Ce.get?Ce.get.call(arguments.length<3?j:se):Ce.value}},he.apply(this,arguments)}function z(I,j){for(;!Object.prototype.hasOwnProperty.call(I,j)&&(I=ee(I),I!==null););return I}function ee(I){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},ee(I)}function pe(I,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(j&&j.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),Object.defineProperty(I,"prototype",{writable:!1}),j&&S(I,j)}function S(I,j){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,Ee){return se.__proto__=Ee,se},S(I,j)}var q=u(9392),M=function(I){pe(j,I);function j(ue){var se;return v(this,j),se=$(this,j,[ue]),se._NodeClass=e.default,se}return N(j,[{key:"_handleTreeNodes",value:function(se,Ee){if(Ee)return se;for(var Ce=[se],xe=[],Oe=function(){var Ge=Ce.pop();xe.push(Ge),Ge.children&&Ge.children.length>0&&(Ge.children.forEach(function(He){He.parent=Ge.id}),Ce=Ce.concat(Ge.children))};Ce.length>0;)Oe();return xe}},{key:"_isExistNode",value:function(se){var Ee=he(ee(j.prototype),"_isExistNode",this).call(this,se);Ee&&se.subCollapsed&&(Ee=!1)}},{key:"_addEventListener",value:function(){var se=this;he(ee(j.prototype),"_addEventListener",this).call(this),this.on("InnerEvents",function(Ee){Ee.type==="node:collapse"?se.collapseNode(Ee.nodeId):Ee.type=="node:expand"&&se.expandNode(Ee.nodeId)})}},{key:"findSubTree",value:function(se){for(var Ee=[se],Ce=[];Ee.length>0;){var xe,Oe=Ee.pop();Ce.push(Oe),((xe=Oe.children)===null||xe===void 0?void 0:xe.length)>0&&(Ee=Ee.concat(Oe.children))}return Ce}},{key:"collapseNode",value:function(se){var Ee=[],Ce=[],xe=this.getNode(se);if(xe.collapsed=!0,xe.options.collapsed=!0,!!xe){for(var Oe=[xe];Oe.length>0;){var Le=Oe.pop();Ee.push(Le),Le.children&&Le.children.length>0&&(Oe=Oe.concat(Le.children))}Ee=Ee.filter(function(He){return He.id!==xe.id});var Ge={};return Ee.forEach(function(He){Ge[He.id]=He,He.subCollapsed=!0}),Ce=this.edges.filter(function(He){var Et=!1;return He.type==="endpoint"?Et=!!Ge[He.sourceNode.id]||!!Ge[He.targetNode.id]:Et=!!Ge[He.source.id]||!!Ge[He.target.id],He.sourceNode.id===xe.id&&(Et=!0),Et&&(He.collapsed=!0),Et}),Ee.unshift(xe),Ee.forEach(function(He){He.subCollapsed&&He.destroy(!0),He.id!==se&&He.collapsed&&delete He.collapsed}),Ce.forEach(function(He){He.destroy(!0)}),this.redraw(),this.emit("system.node.collapse",{target:xe,nodes:Ee,edges:Ce}),this.emit("events",{type:"node.collapse",target:xe,nodes:Ee,edges:Ce}),{nodes:Ee,edges:Ce}}}},{key:"expandNode",value:function(se,Ee){for(var Ce=this.getNode(se),xe=[],Oe=[],Le=[Ce];Le.length>0;){var Ge=Le.pop();xe.push(Ge),Ge.children&&Ge.children.length>0&&(Le=Le.concat(Ge.children))}xe=xe.filter(function(Gt){return Gt.id!==Ce.id});var He={};xe.forEach(function(Gt){He[Gt.id]=Gt,Gt.subCollapsed=!0}),Oe=this.edges.filter(function(Gt){var At=!1;return Gt.type==="endpoint"?At=!!He[Gt.sourceNode.id]||!!He[Gt.targetNode.id]:At=!!He[Gt.source.id]||!!He[Gt.target.id],Gt.sourceNode.id===Ce.id&&(At=!0),At}),this.nodes=q.differenceBy(this.nodes,xe,"id");var Et=this.addNodes(xe,!0);this.edges=q.filter(this.edges,function(Gt){return Gt.type==="endpoint"?!q.some(Oe,function(At){return Gt.sourceNode.id===At.sourceNode.id&&Gt.targetNode.id===At.targetNode.id&&Gt.source===At.source&&Gt.target===At.target}):!q.some(Oe,function(At){return Gt.source===At.source&&Gt.target===At.target})});var Ct=this.addEdges(Oe,!0);xe.forEach(function(Gt){delete Gt.subCollapsed}),delete Ce.collapsed,Oe.forEach(function(Gt){delete Gt.collapsed}),this.redraw(),this.emit("system.node.expand",{target:Ce,nodes:Et,edges:Ct}),this.emit("events",{type:"node.expand",target:Ce,nodes:Et,edges:Ct})}},{key:"redraw",value:function(se,Ee,Ce){if(se)this.removeNodes(this.nodes.map(function(Ct){return Ct.id})||[]),this.clearActionQueue(),this.draw(se||{},Ee,Ce);else{for(var xe=this.getRootNode(),Oe=[],Le={},Ge=[xe],He=function(){var Gt=Ge.pop(),At={id:Gt.id};Le[Gt.id]?At=Le[Gt.id]:Le[At.id]=At,Gt.isRoot&&(At.isRoot=Gt.isRoot),Gt.collapsed&&(At.collapsed=Gt.collapsed),Oe.push(At),Gt.children&&Gt.children.length>0&&(At.children=[],Gt.children.forEach(function(vt){var cn={id:vt.id};Le[vt.id]?cn=Le[vt.id]:Le[vt.id]=cn,vt.isRoot&&(cn.isRoot=vt.isRoot),vt.collapsed&&(cn.collapsed=vt.collapsed),At.children.push(cn)}),Ge=Ge.concat(Gt.children))};Ge.length>0;)He();var Et=Oe.filter(function(Ct){return!0});q.get(Ee,"isNotRelayout")||this._autoLayout({nodes:Et,edges:[],groups:[]}),this.nodes.forEach(function(Ct){var Gt;if(!Ct.subCollapsed){Ct==null||(Gt=Ct.endpoints)===null||Gt===void 0||Gt.forEach(function(vt){vt.updatePos()});var At=Le[Ct.id];(Ct.top!==At.top||Ct.left!==At.left)&&(Ct.options.top=At.top,Ct.options.left=At.left,Ct.options.treePos=At.treePos,Ct.moveTo(At.left,At.top))}}),this.edges.forEach(function(Ct){Ct.redraw()})}this.emit("system.canvas.redraw"),this.emit("events",{type:"canvas:redraw"})}},{key:"addNodes",value:function(se,Ee){var Ce=this,xe=he(ee(j.prototype),"addNodes",this).call(this,se,Ee);return xe.forEach(function(Oe){if(Oe.parent){var Le=Ce.getNode(Oe.parent);q.some(Le.children,["id",Oe.id])||(!Le.children&&(Le.children=[]),Le.children.push(Oe))}}),xe}},{key:"removeNodes",value:function(se,Ee,Ce){var xe=this,Oe=se.map(function(He){return He instanceof s.default?He:xe.getNode(He)}),Le=[];Oe.forEach(function(He){var Et=xe.findSubTree(He);if(Le=Le.concat(Et),He.parent){var Ct=xe.getNode(He.parent);Ct&&(Ct.children=Ct.children.filter(function(Gt){return Gt.id!==He.id}))}}),Le=q.unionBy(Le,"id");var Ge=he(ee(j.prototype),"removeNodes",this).call(this,Le,Ee,Ce);return Ge}},{key:"getRootNode",value:function(){return this.nodes.filter(function(se){return se.isRoot})[0]}},{key:"draw",value:function(se,Ee,Ce){var xe=this,Oe=this._handleTreeNodes(se.nodes||[],this.previousIsFlatNode);q.get(Ee,"isNotRelayout")&&(this.__layout=this.layout,this.layout=void 0),he(ee(j.prototype),"draw",this).call(this,{nodes:Oe,edges:se.edges,groups:se.groups},function(){var Le={};xe.nodes.forEach(function(Ge){Le[Ge.id]=Ge,Ge.children=[]}),xe.nodes.forEach(function(Ge){if(!(Ge.isRoot||!Ge.parent)){var He=Le[Ge.parent];He&&(!He.children&&(He.children=[]),He.children.unshift(Ge))}}),Ce&&Ce({nodes:xe.nodes,edges:xe.edges,groups:xe.groups}),q.get(Ee,"isNotRelayout")&&(xe.layout=xe.__layout,xe.__layout=void 0)})}},{key:"_autoLayout",value:function(se){var Ee=se.nodes.filter(function(Ge){return Ge.isRoot})[0];if(Ee){var Ce=q.get(this,"layout.type","compactBox");if(m.default[Ce]){var xe=16,Oe=30,Le=5;m.default[Ce](Ee,q.assign({direction:"H",getId:function(He){return He.id},getHeight:function(He){return He.isRoot?xe*2:xe},getWidth:function(He){return He.isRoot?Oe*2:Oe},getHGap:function(He){return 100},getVGap:function(He){return 30},getSubTreeSep:function(He){return!He.children||!He.children.length?0:Le}},q.get(this,"layout.options",{})))}}}}]),j}(l.default);b.default=M},5397:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(1172),o=v(a),l=u(4882),r=d(l),e=u(9755),t=v(e);u(3706);var s=u(8409),h=v(s);function m(se){if(typeof WeakMap!="function")return null;var Ee=new WeakMap,Ce=new WeakMap;return(m=function(Oe){return Oe?Ce:Ee})(se)}function d(se,Ee){if(!Ee&&se&&se.__esModule)return se;if(se===null||x(se)!="object"&&typeof se!="function")return{default:se};var Ce=m(Ee);if(Ce&&Ce.has(se))return Ce.get(se);var xe={__proto__:null},Oe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Le in se)if(Le!=="default"&&Object.prototype.hasOwnProperty.call(se,Le)){var Ge=Oe?Object.getOwnPropertyDescriptor(se,Le):null;Ge&&(Ge.get||Ge.set)?Object.defineProperty(xe,Le,Ge):xe[Le]=se[Le]}return xe.default=se,Ce&&Ce.set(se,xe),xe}function v(se){return se&&se.__esModule?se:{default:se}}function x(se){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee},x(se)}function N(se,Ee){if(!(se instanceof Ee))throw new TypeError("Cannot call a class as a function")}function F(se,Ee){for(var Ce=0;Ce<Ee.length;Ce++){var xe=Ee[Ce];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(se,$(xe.key),xe)}}function ae(se,Ee,Ce){return Ee&&F(se.prototype,Ee),Ce&&F(se,Ce),Object.defineProperty(se,"prototype",{writable:!1}),se}function $(se){var Ee=te(se,"string");return x(Ee)=="symbol"?Ee:String(Ee)}function te(se,Ee){if(x(se)!="object"||!se)return se;var Ce=se[Symbol.toPrimitive];if(Ce!==void 0){var xe=Ce.call(se,Ee||"default");if(x(xe)!="object")return xe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ee==="string"?String:Number)(se)}function fe(se,Ee,Ce){return Ee=S(Ee),B(se,z()?Reflect.construct(Ee,Ce||[],S(se).constructor):Ee.apply(se,Ce))}function B(se,Ee){if(Ee&&(x(Ee)==="object"||typeof Ee=="function"))return Ee;if(Ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return he(se)}function he(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function z(){try{var se=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(Ee){}return(z=function(){return!!se})()}function ee(){return typeof Reflect!="undefined"&&Reflect.get?ee=Reflect.get.bind():ee=function(Ee,Ce,xe){var Oe=pe(Ee,Ce);if(Oe){var Le=Object.getOwnPropertyDescriptor(Oe,Ce);return Le.get?Le.get.call(arguments.length<3?Ee:xe):Le.value}},ee.apply(this,arguments)}function pe(se,Ee){for(;!Object.prototype.hasOwnProperty.call(se,Ee)&&(se=S(se),se!==null););return se}function S(se){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ce){return Ce.__proto__||Object.getPrototypeOf(Ce)},S(se)}function q(se,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function");se.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:se,writable:!0,configurable:!0}}),Object.defineProperty(se,"prototype",{writable:!1}),Ee&&M(se,Ee)}function M(se,Ee){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(xe,Oe){return xe.__proto__=Oe,xe},M(se,Ee)}var I=u(9392),j=u(4609),ue=function(se){q(Ee,se);function Ee(Ce){var xe;return N(this,Ee),xe=fe(this,Ee,[Ce]),xe.id=I.get(Ce,"id"),xe.targetNode=I.get(Ce,"targetNode"),xe._targetType=I.get(Ce,"_targetType"),xe.targetEndpoint=I.get(Ce,"targetEndpoint"),xe.sourceNode=I.get(Ce,"sourceNode"),xe._sourceType=I.get(Ce,"_sourceType"),xe.sourceEndpoint=I.get(Ce,"sourceEndpoint"),xe.type=I.get(Ce,"type","endpoint"),xe.orientationLimit=I.get(Ce,"orientationLimit"),xe.shapeType=I.get(Ce,"shapeType","Straight"),xe.hasRadius=I.get(Ce,"hasRadius",!1),xe.label=I.get(Ce,"label"),xe.arrow=I.get(Ce,"arrow"),xe.arrowShapeType=I.get(Ce,"arrowShapeType","default"),xe.arrowPosition=I.get(Ce,"arrowPosition",.5),xe.arrowOffset=I.get(Ce,"arrowOffset",0),xe.labelPosition=I.get(Ce,"labelPosition",.5),xe.labelOffset=I.get(Ce,"labelOffset",0),xe.isExpandWidth=I.get(Ce,"isExpandWidth",!1),xe.defaultAnimate=I.get(Ce,"defaultAnimate",!1),xe.dom=null,xe.labelDom=null,xe.arrowDom=null,xe.eventHandlerDom=null,xe._hasEventListener=!1,xe._coordinateService=null,xe.__type="edge",xe._path=null,xe.options=I.get(Ce,"options")||Ce,xe._isDeletingEdge=Ce._isDeletingEdge,xe._global=Ce._global,xe._on=Ce._on,xe._emit=Ce._emit,xe._labelWidth=0,xe._labelHeight=0,xe._updateTimer=null,xe._UPDATE_INTERVAL=I.get(Ce,"labelUpdateInterval",20),xe._sourcePoint=null,xe._targetPoint=null,xe._zIndex=0,xe.draggable=I.get(Ce,"draggable",!1),xe._breakPoints=[],xe._hasDragged=!1,xe.options.breakPoints&&xe.options.breakPoints.length>0&&(xe._breakPoints=xe.options.breakPoints,xe._breakPoints[0].type,xe._breakPoints[xe._breakPoints.length-1].type,delete xe.options.breakPoints,xe._hasDragged=!0),xe}return ae(Ee,[{key:"_init",value:function(xe){this._isInited||(xe._coordinateService&&(this._coordinateService=xe._coordinateService),this._isInited=!0,this.dom=this.draw({id:this.id,dom:this.dom,options:this.options}),this.labelDom=this.drawLabel(this.label),this.arrowDom=this.drawArrow(this.arrow)),this._hasEventListener||(this._addEventListener(),this._hasEventListener=!0)}},{key:"draw",value:function(xe){var Oe=document.createElementNS("http://www.w3.org/2000/svg","path");return Oe.setAttribute("class","butterflies-link"),this.isExpandWidth&&(this.eventHandlerDom=document.createElementNS("http://www.w3.org/2000/svg","path"),this.eventHandlerDom.setAttribute("class","butterflies-link-event-handler")),Oe}},{key:"mounted",value:function(){this.defaultAnimate&&this.addAnimate()}},{key:"_calcPath",value:function(xe,Oe){var Le=function(Ct,Gt){for(var At=0,vt=[Ct._group];vt.length>0;){var cn=vt.pop();cn&&(At+=cn[Gt],cn._group&&vt.push(cn._group))}return At};xe||(xe={pos:[this.type==="endpoint"?this.sourceEndpoint._posLeft+this.sourceEndpoint._width/2:this.sourceNode.left+this.sourceNode.getWidth(!0)/2+Le(this.sourceNode,"left"),this.type==="endpoint"?this.sourceEndpoint._posTop+this.sourceEndpoint._height/2:this.sourceNode.top+this.sourceNode.getHeight(!0)/2+Le(this.sourceNode,"top")],orientation:this.type==="endpoint"&&this.sourceEndpoint.orientation?this.sourceEndpoint.orientation:void 0}),Oe||(Oe={pos:[this.type==="endpoint"?this.targetEndpoint._posLeft+this.targetEndpoint._width/2:this.targetNode.left+this.targetNode.getWidth(!0)/2+Le(this.targetNode,"left"),this.type==="endpoint"?this.targetEndpoint._posTop+this.targetEndpoint._height/2:this.targetNode.top+this.targetNode.getHeight(!0)/2+Le(this.targetNode,"top")],orientation:this.type==="endpoint"&&this.targetEndpoint.orientation?this.targetEndpoint.orientation:void 0}),this._sourcePoint=xe,this._targetPoint=Oe;var Ge="";if(this.calcPath)Ge=this.calcPath(xe,Oe);else if(this.shapeType==="Bezier")Ge=r.drawBezier(xe,Oe);else if(this.shapeType==="Straight")Ge=r.drawStraight(xe,Oe);else if(this.shapeType==="Flow")Ge=r.drawFlow(xe,Oe,this.orientationLimit);else if(this.shapeType==="Manhattan"){var He=r.drawManhattan(xe,Oe,{breakPoints:this._breakPoints,hasDragged:this._hasDragged,draggable:this.draggable,hasRadius:this.hasRadius});Ge=He.path,He.breakPoints[0].type="start",He.breakPoints[He.breakPoints.length-1].type="end",this._breakPoints=He.breakPoints}else this.shapeType==="AdvancedBezier"?Ge=r.drawAdvancedBezier(xe,Oe):/^Bezier2-[1-3]$/.test(this.shapeType)?Ge=r.drawSecondBezier(xe,Oe,this.shapeType):this.shapeType==="BrokenLine"&&(Ge=r.drawBrokenLine(xe,Oe));return this._path=Ge,Ge}},{key:"redrawLabel",value:function(){var xe=this.dom.getTotalLength();if(xe){var Oe=xe*this.labelPosition+this.labelOffset,Le=this.dom.getPointAtLength(Oe);j(this.labelDom).css("left",Le.x-this.labelDom.offsetWidth/2).css("top",Le.y-this.labelDom.offsetHeight/2)}}},{key:"drawLabel",value:function(xe){var Oe=(typeof HTMLElement=="undefined"?"undefined":x(HTMLElement))==="object"?function(Ge){return Ge instanceof HTMLElement}:function(Ge){return Ge&&x(Ge)==="object"&&Ge.nodeType===1&&typeof Ge.nodeName=="string"};if(xe){if(Oe(xe))return j(xe).addClass("butterflies-label"),xe;var Le=document.createElement("span");return Le.className="butterflies-label",Le.innerText=xe,Le}}},{key:"updateLabel",value:function(xe){var Oe=this,Le=this.drawLabel(xe);this.labelDom&&(j(this.labelDom).off(),j(this.labelDom).remove()),this.label=xe,this.labelDom=Le,setTimeout(function(){Oe.redrawLabel()}),this.emit("InnerEvents",{type:"edge:updateLabel",data:this})}},{key:"redrawArrow",value:function(xe){var Oe=this.dom.getTotalLength();if(Oe){this.arrowFinalPosition=(Oe*this.arrowPosition+this.arrowOffset)/Oe,this.arrowFinalPosition>1&&(this.arrowFinalPosition=1),this.arrowFinalPosition<0&&(this.arrowFinalPosition=0),1-this.arrowFinalPosition<o.default.ARROW_TYPE.length/Oe&&(this.arrowFinalPosition=(Oe*this.arrowFinalPosition-o.default.ARROW_TYPE.length)/Oe),this.shapeType==="Bezier"&&(this.arrowFinalPosition=1-this.arrowFinalPosition);var Le=this.dom.getPointAtLength(Oe*this.arrowFinalPosition),Ge=Le.x,He=Le.y,Et=Ge,Ct=He,Gt=o.default.calcSlope({shapeType:this.shapeType,dom:this.dom,arrowPosition:this.arrowFinalPosition,path:xe}),At=Math.atan2(Gt.y,Gt.x)/Math.PI*180,vt=o.default.ARROW_TYPE[this.arrowShapeType],cn=vt.width||8,hn=vt.height||8;vt.type==="pathString"?this.arrowDom.setAttribute("d",vt.content):vt.type==="svg"&&(Gt.x===0||(Et-=cn/2),Ct-=hn/2),this.arrowDom.setAttribute("transform","rotate(".concat(At,", ").concat(Ge,", ").concat(He,")translate(").concat(Et,", ").concat(Ct,")"))}}},{key:"drawArrow",value:function(xe){if(xe){var Oe=o.default.ARROW_TYPE[this.arrowShapeType],Le=Oe.width||8,Ge=Oe.height||8,He=void 0;return Oe.type==="pathString"?He=document.createElementNS("http://www.w3.org/2000/svg","path"):Oe.type==="svg"&&(He=document.createElementNS("http://www.w3.org/2000/svg","image"),He.setAttribute("href",Oe.content),He.setAttribute("width","".concat(Le,"px")),He.setAttribute("height","".concat(Ge,"px"))),He.setAttribute("class","butterflies-arrow"),He}}},{key:"redraw",value:function(xe,Oe,Le){var Ge=this,He=this._path,Et=this._calcPath(xe,Oe);He!==Et&&(this.dom.setAttribute("d",Et),this.isExpandWidth&&(this.eventHandlerDom.setAttribute("d",Et),j(this.eventHandlerDom).insertAfter(this.dom)),this._updateTimer||(this._updateTimer=setTimeout(function(){Ge.labelDom&&Ge.redrawLabel(),Ge.arrowDom&&Ge.redrawArrow(Et),Ge.animateDom&&Ge.redrawAnimate(Et),Ge._updateTimer=null},this._UPDATE_INTERVAL)),this.updated&&this.updated())}},{key:"isConnect",value:function(){return!0}},{key:"addAnimate",value:function(xe){this.animateDom=t.default.addAnimate(this.dom,this._path,I.assign({},{num:1,radius:3,color:"#776ef3"},xe),this.animateDom)}},{key:"redrawAnimate",value:function(){this.animateDom=t.default.addAnimate(this.dom,this._path,{_isContinue:!0},this.animateDom)}},{key:"emit",value:function(xe,Oe){ee(S(Ee.prototype),"emit",this).call(this,xe,Oe),this._emit(xe,Oe)}},{key:"on",value:function(xe,Oe){ee(S(Ee.prototype),"on",this).call(this,xe,Oe),this._on(xe,Oe)}},{key:"remove",value:function(){this.emit("InnerEvents",{type:"edge:delete",data:this})}},{key:"setZIndex",value:function(xe){this.emit("InnerEvents",{type:"edge:setZIndex",edge:this,index:xe})}},{key:"destroy",value:function(xe){this.labelDom&&(j(this.labelDom).off(),j(this.labelDom).remove()),this.arrowDom&&j(this.arrowDom).remove(),this.eventHandlerDom&&(j(this.eventHandlerDom).off(),j(this.eventHandlerDom).remove()),this.animateDom&&j(this.animateDom).remove(),j(this.dom).remove(),this._hasEventListener=!1,this.id&&!xe&&this.removeAllListeners()}},{key:"getBreakPoints",value:function(){return this._breakPoints}},{key:"_addEventListener",value:function(){var xe=this,Oe=function(He){He.preventDefault(),He.stopPropagation(),xe.emit("system.link.click",{edge:xe}),xe.emit("events",{type:"link:click",edge:xe})},Le=function(He){var Et=He.clientX,Ct=He.clientY;if(xe.shapeType==="Manhattan"&&xe.draggable){var Gt=xe._coordinateService._terminal2canvas("x",Et),At=xe._coordinateService._terminal2canvas("y",Ct),vt=r.findManhattanPoint(xe._breakPoints,{x:Gt,y:At});xe.emit("InnerEvents",{type:"link:dragBegin",edge:xe,path:vt})}else xe.emit("InnerEvents",{type:"link:mouseDown",edge:xe})};this.isExpandWidth?(j(this.eventHandlerDom).on("click",Oe),j(this.eventHandlerDom).on("mousedown",Le)):(j(this.dom).on("click",Oe),j(this.dom).on("mousedown",Le))}},{key:"_create",value:function(xe){this.id=I.get(xe,"id")||this.id,this.targetNode=I.get(xe,"targetNode")||this.targetNode,this._targetType=I.get(xe,"_targetType")||this._targetType,this.targetEndpoint=I.get(xe,"targetEndpoint")||this.targetEndpoint,this.sourceNode=I.get(xe,"sourceNode")||this.sourceNode,this._sourceType=I.get(xe,"_sourceType")||this._sourceType,this.sourceEndpoint=I.get(xe,"sourceEndpoint")||this.sourceEndpoint,this.type=I.get(xe,"type")||this.type,I.set(this,"options.sourceNode",I.get(this,"sourceNode.id")),I.set(this,"options.sourceEndpoint",I.get(this,"sourceEndpoint.id")),I.set(this,"options.targetNode",I.get(this,"targetNode.id")),I.set(this,"options.targetEndpoint",I.get(this,"targetEndpoint.id")),this.redraw()}},{key:"_updatePath",value:function(xe,Oe){if(this._breakPoints[xe.index].type==="start"){var Le=I.cloneDeep(this._breakPoints[xe.index]);this._breakPoints.unshift(Le),xe.index++,delete this._breakPoints[xe.index].type}else if(this._breakPoints[xe.index+1].type==="end"){var Ge=I.cloneDeep(this._breakPoints[xe.index+1]);this._breakPoints.push(Ge),delete this._breakPoints[xe.index+1].type}xe.direction==="vertical"?(this._breakPoints[xe.index].x=Oe.x,this._breakPoints[xe.index+1].x=Oe.x):(this._breakPoints[xe.index].y=Oe.y,this._breakPoints[xe.index+1].y=Oe.y),this._hasDragged=!0,this.redraw();for(var He=0;He<this._breakPoints.length-1;He++){var Et=this._breakPoints[He],Ct=this._breakPoints[He+1];Et.x===Ct.x&&Et.y===Ct.y&&Et.type!=="start"&&Ct.type!=="end"&&(this._breakPoints.splice(He,2),xe.index=xe.index-2>0?xe.index-2:0)}}}]),Ee}(h.default);b.default=ue},3952:function(T,b,u){"use strict";function a(ee){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},a(ee)}Object.defineProperty(b,"__esModule",{value:!0}),u(6828);var o=u(2707),l=r(o);function r(ee){return ee&&ee.__esModule?ee:{default:ee}}function e(ee,pe){if(!(ee instanceof pe))throw new TypeError("Cannot call a class as a function")}function t(ee,pe){for(var S=0;S<pe.length;S++){var q=pe[S];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(ee,h(q.key),q)}}function s(ee,pe,S){return pe&&t(ee.prototype,pe),S&&t(ee,S),Object.defineProperty(ee,"prototype",{writable:!1}),ee}function h(ee){var pe=m(ee,"string");return a(pe)=="symbol"?pe:String(pe)}function m(ee,pe){if(a(ee)!="object"||!ee)return ee;var S=ee[Symbol.toPrimitive];if(S!==void 0){var q=S.call(ee,pe||"default");if(a(q)!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(pe==="string"?String:Number)(ee)}function d(ee,pe,S){return pe=$(pe),v(ee,N()?Reflect.construct(pe,S||[],$(ee).constructor):pe.apply(ee,S))}function v(ee,pe){if(pe&&(a(pe)==="object"||typeof pe=="function"))return pe;if(pe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(ee)}function x(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}function N(){try{var ee=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(pe){}return(N=function(){return!!ee})()}function F(){return typeof Reflect!="undefined"&&Reflect.get?F=Reflect.get.bind():F=function(pe,S,q){var M=ae(pe,S);if(M){var I=Object.getOwnPropertyDescriptor(M,S);return I.get?I.get.call(arguments.length<3?pe:q):I.value}},F.apply(this,arguments)}function ae(ee,pe){for(;!Object.prototype.hasOwnProperty.call(ee,pe)&&(ee=$(ee),ee!==null););return ee}function $(ee){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},$(ee)}function te(ee,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(pe&&pe.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),Object.defineProperty(ee,"prototype",{writable:!1}),pe&&fe(ee,pe)}function fe(ee,pe){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(q,M){return q.__proto__=M,q},fe(ee,pe)}var B=u(4609),he=u(9392),z=function(ee){te(pe,ee);function pe(S){var q;return e(this,pe),q=d(this,pe,[S]),q.id=S.id,q.options=S,q.orientation=S.orientation,q.pos=S.pos,q.type=S.type,q.nodeType=he.get(S,"nodeType","node"),q.nodeId=he.get(S,"_node.id"),q.root=S.root,q.scope=S.scope,q.expandArea=S.expandArea,q.limitNum=S.limitNum,q.connectedNum=0,q.options=S,q.__type="endpoint",q._node=S._node,q._global=S._global,q._on=S._on,q._emit=S._emit,q._top=0,q._left=0,q._posTop=0,q._posLeft=0,q._width=0,q._height=0,q._linkable=!1,q._coordinateService=null,q.dom=null,q._isInitedDom=!1,S.dom&&(q.dom=S.dom,q._isInitedDom=!0),q}return s(pe,[{key:"_init",value:function(q){if(this._coordinateService=q._coordinateService,q.nodeType&&(this.nodeType=q.nodeType),!this._isInitedDom)this.dom=this.draw({id:this.id,orientation:this.orientation,pos:this.pos,dom:this.dom,root:this.root,type:this.type,options:this.options});else{this._width=B(this.dom).outerWidth(),this._height=B(this.dom).outerHeight();var M=this.dom.getBoundingClientRect();this._left=this._coordinateService._terminal2canvas("x",M.left),this._top=this._coordinateService._terminal2canvas("y",M.top),this._posTop=this._top,this._posLeft=this._left}this.attachEvent()}},{key:"draw",value:function(q){var M=q.dom;return M?M=B(M):M=B('<div class="butterflie-circle-endpoint"></div>').attr("id",this.id),M[0]}},{key:"updatePos",value:function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dom,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.orientation,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.pos;if(this._isInitedDom){this._width=B(this.dom).outerWidth(),this._height=B(this.dom).outerHeight();var j=this.dom.getBoundingClientRect();this._left=this._coordinateService._terminal2canvas("x",j.left),this._top=this._coordinateService._terminal2canvas("y",j.top),this._posLeft=this._left,this._posTop=this._top}else{var ue=this._node,se=B(this._node.dom),Ee=this.nodeType,Ce=se.outerWidth(),xe=se.outerHeight(),Oe=null,Le=0,Ge=0;this.root&&(Oe=se.find(this.root),Le=Oe.width(),Ge=Oe.height()),this._width=B(q).outerWidth(),this._height=B(q).outerHeight();var He=this._width/2,Et=this._height/2,Ct=0,Gt=0,At=M||this.orientation||[0,-1],vt=I||this.pos||[At[0]===0?.5:0,At[1]===0?.5:0],cn=[0,0],hn=At[0],Bn=At[1],Fn=vt[0],ir=vt[1];if(hn===0?cn[0]=this.root?Le*Fn-He:Ce*Fn-He:hn===-1?cn[0]=0-He:hn===1&&(cn[0]=this.root?Le-He:Ce-He),Bn===0?cn[1]=this.root?Ge*ir-Et:xe*ir-Et:Bn===-1?cn[1]=0-Et:Bn===1&&(cn[1]=this.root?Ge-Et:xe-Et),ue&&!this.root)Ct+=ue.top,Gt+=ue.left;else if(ue&&this.root){var Nr=se.offset(),Ei=Oe.offset();Ct+=Ei.top-Nr.top+ue.top,Gt+=Ei.left-Nr.left+ue.left}if(this._top=cn[1]+Ct,this._left=cn[0]+Gt,this._posTop=this._top,this._posLeft=this._left,ue._group){var ci=this._getGroupPos(ue._group);this._posTop+=ci.top,this._posLeft+=ci.left}B(q).css("top",this._top).css("left",this._left),this.updated&&this.updated()}this.emit("InnerEvents",{type:"endpoint:updatePos",point:this})}},{key:"_getGroupPos",value:function(q){for(var M=q,I=0,j=0;M;)I+=M.top,j+=M.left,M=M._group;return{top:I,left:j}}},{key:"hasConnection",value:function(){return this.connectedNum>0}},{key:"moveTo",value:function(q,M){this._top=M,this._left=q,this._posTop=this._top,this._posLeft=this._left,this._isInitedDom||(B(this.dom).css("top",M).css("left",q),he.get(this,"_node._group")&&(this._posTop+=this._node._group.top,this._posLeft+=this._node._group.left))}},{key:"linkable",value:function(){B(this.dom).addClass("linkable")}},{key:"unLinkable",value:function(){B(this.dom).removeClass("linkable")}},{key:"hoverLinkable",value:function(){B(this.dom).addClass("hover")}},{key:"unHoverLinkable",value:function(){B(this.dom).removeClass("hover")}},{key:"attachEvent",value:function(){var q=this;B(this.dom).on("mousedown",function(M){var I=0;M.button===I&&(M.preventDefault(),M.stopPropagation(),q.emit("InnerEvents",{type:"endpoint:drag",data:q}))})}},{key:"emit",value:function(q,M){F($(pe.prototype),"emit",this).call(this,q,M),this._emit(q,M)}},{key:"on",value:function(q,M){F($(pe.prototype),"on",this).call(this,q,M),this._on(q,M)}},{key:"destroy",value:function(q){q?B(this.dom).detach():(B(this.dom).off(),B(this.dom).remove(),this.removeAllListeners())}}]),pe}(l.default);b.default=z},5268:function(T,b,u){"use strict";function a(I){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},a(I)}Object.defineProperty(b,"__esModule",{value:!0}),u(8031);var o=u(2592),l=h(o),r=u(3952),e=h(r),t=u(1106),s=h(t);function h(I){return I&&I.__esModule?I:{default:I}}function m(I,j,ue){return j=N(j),j in I?Object.defineProperty(I,j,{value:ue,enumerable:!0,configurable:!0,writable:!0}):I[j]=ue,I}function d(I,j){if(!(I instanceof j))throw new TypeError("Cannot call a class as a function")}function v(I,j){for(var ue=0;ue<j.length;ue++){var se=j[ue];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(I,N(se.key),se)}}function x(I,j,ue){return j&&v(I.prototype,j),ue&&v(I,ue),Object.defineProperty(I,"prototype",{writable:!1}),I}function N(I){var j=F(I,"string");return a(j)=="symbol"?j:String(j)}function F(I,j){if(a(I)!="object"||!I)return I;var ue=I[Symbol.toPrimitive];if(ue!==void 0){var se=ue.call(I,j||"default");if(a(se)!="object")return se;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(I)}function ae(I,j,ue){return j=z(j),$(I,fe()?Reflect.construct(j,ue||[],z(I).constructor):j.apply(I,ue))}function $(I,j){if(j&&(a(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return te(I)}function te(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function fe(){try{var I=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(j){}return(fe=function(){return!!I})()}function B(){return typeof Reflect!="undefined"&&Reflect.get?B=Reflect.get.bind():B=function(j,ue,se){var Ee=he(j,ue);if(Ee){var Ce=Object.getOwnPropertyDescriptor(Ee,ue);return Ce.get?Ce.get.call(arguments.length<3?j:se):Ce.value}},B.apply(this,arguments)}function he(I,j){for(;!Object.prototype.hasOwnProperty.call(I,j)&&(I=z(I),I!==null););return I}function z(I){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ue){return ue.__proto__||Object.getPrototypeOf(ue)},z(I)}function ee(I,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function");I.prototype=Object.create(j&&j.prototype,{constructor:{value:I,writable:!0,configurable:!0}}),Object.defineProperty(I,"prototype",{writable:!1}),j&&pe(I,j)}function pe(I,j){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,Ee){return se.__proto__=Ee,se},pe(I,j)}var S=u(4609),q=u(9392),M=function(I){ee(j,I);function j(ue){var se;return d(this,j),se=ae(this,j,[ue]),se.id=ue.id,se.scope=ue.scope,se.top=ue.top,se.left=ue.left,se.width=ue.width||300,se.height=ue.height||150,se.resize=ue.resize,se.draggable=ue.draggable,se.group=ue.group,se.dom=null,se.nodes=[],se.groups=[],se.options=ue.options,se.__type="group",se._global=ue._global,se._on=ue._on,se._emit=ue._emit,se._container=null,se.endpoints=[],se._endpointsData=ue.endpoints,se._isMoving=!1,se._isResizing=!1,se}return x(j,[{key:"_init",value:function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._isInited||(se.left&&(this.left=se.left),se.top&&(this.top=se.top),se.width&&(this.width=se.width),se.height&&(this.height=se.height),this._isInited=!0,se._isDeleteGroup?(this.group=void 0,this._group=void 0):se.group&&(this.group=se.group),se.dom&&(this.dom=se.dom),this.dom?(this.left&&S(this.dom).css("left","".concat(this.left,"px")),this.top&&S(this.dom).css("top","".concat(this.top,"px")),this.width&&S(this.dom).css("width","".concat(this.width,"px")),this.height&&S(this.dom).css("height","".concat(this.height,"px"))):this.dom=this.draw({id:this.id,top:this.top,left:this.left,width:this.width,height:this.height,dom:this.dom,options:this.options}),this._hasEventListener||(this._addEventListener(),this._hasEventListener=!0))}},{key:"draw",value:function(se){var Ee=se.dom;Ee||(Ee=S("<div></div>").attr("class","group").attr("id",se.id));var Ce=S(Ee),xe=S("<div></div>").attr("class","title");return q.get(this,"options.title")&&xe.text(q.get(this,"options.title")),Ce.append(xe),this._container=S("<div></div>").attr("class","container"),Ce.append(this._container),this.resize!==!1&&this.setResize(!0,Ce),se.top!==void 0&&Ce.css("top",se.top+"px"),se.left!==void 0&&Ce.css("left",se.left+"px"),se.width!==void 0&&Ce.css("width",se.width+"px"),se.height!==void 0&&Ce.css("height",se.height+"px"),this.updated&&this.updated(),Ce[0]}},{key:"addNodes",value:function(){var se=this,Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ce=arguments.length>1?arguments[1]:void 0,xe=[];Ee.forEach(function(Oe){(0,s.default)(Oe.scope,se.scope,q.get(se,"_global.isScopeStrict"))?xe.push(Oe):console.log("nodeId\u4E3A".concat(Oe.id,"\u7684\u8282\u70B9\u548CgroupId").concat(se.id,"\u7684\u8282\u70B9\u7EC4scope\u503C\u4E0D\u7B26\uFF0C\u65E0\u6CD5\u52A0\u5165"))}),this.emit("InnerEvents",{type:"group:addNodes",nodes:Ee,group:this,isNotEventEmit:Ce})}},{key:"addNode",value:function(se){this.addNodes([se])}},{key:"removeNodes",value:function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Ee=arguments.length>1?arguments[1]:void 0,Ce=[];return this.nodes.forEach(function(xe){var Oe=q.find(se,function(Le){return Le.id===xe.id});Oe&&Ce.push(Oe)}),this.emit("InnerEvents",{type:"group:removeNodes",group:this,nodes:Ce,isNotEventEmit:Ee}),Ee||(this.emit("events",m({type:"system.group.removeNodes",group:this,nodes:Ce},"group",targetGroup)),this.emit("system.group.removeNodes",m({group:this,nodes:Ce},"group",targetGroup))),Ce}},{key:"removeNode",value:function(se){return this.removeNodes([se])}},{key:"setResize",value:function(se){var Ee=this,Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.dom,xe=arguments.length>2?arguments[2]:void 0,Oe=function(He){var Et=0;He.button===Et&&(Ee._isResizing=!0,He.preventDefault(),Ee.emit("InnerEvents",{type:"group:resize",group:Ee}))};if(se){var Le=null;xe?(Le=S(xe),Le.addClass("butterfly-group-icon-resize")):Le=S('<span class="butterfly-group-icon-resize group-icon-resize butterfly-icon icon-drag"></span>'),Le.appendTo(Ce),Le.on("mousedown",Oe)}}},{key:"setSize",value:function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.width,Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.height;this.width=se,this.height=Ee,S(this.dom).css("width",this.width).css("height",this.height)}},{key:"remove",value:function(){this.emit("InnerEvents",{type:"group:delete",data:this})}},{key:"_moveTo",value:function(se,Ee){var Ce=this;S(this.dom).css("top",Ee).css("left",se),this.endpoints.forEach(function(Oe){Oe.moveTo(se-Ce.left+Oe._left,Ee-Ce.top+Oe._top)});var xe=function(Le){for(var Ge=[],He=[Le];He.length>0;){var Et=He.pop();Ge=Ge.concat(Et.nodes),Ge=Ge.concat(Et.groups),He=He.concat(Et.groups)}return Ge};xe(this).forEach(function(Oe){Oe.endpoints.forEach(function(Le){Le.updatePos()})}),this.top=Ee,this.left=se}},{key:"moveTo",value:function(se,Ee,Ce){this.emit("InnerEvents",{type:"group:move",group:this,x:se,y:Ee,isNotEventEmit:Ce})}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getEndpoint",value:function(se){return q.find(this.endpoints,function(Ee){return se===Ee.id})}},{key:"removeEndpoint",value:function(se){var Ee=q.findIndex(this.endpoints,function(xe){return xe.id===se});if(Ee!==-1){var Ce=this.endpoints.splice(Ee,1)[0];return this.emit("InnerEvents",{type:"node:removeEndpoint",data:Ce}),Ce.destroy(),Ce}}},{key:"_appendChildren",value:function(){var se=this,Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];Ee.forEach(function(Ce){Ce._group=se,Ce.group=se.id,S(se.dom).append(Ce.dom),Ce.__type==="node"?se.nodes.push(Ce):se.groups.push(Ce)})}},{key:"_addEventListener",value:function(){var se=this,Ee={timer:0,x:0,y:0};S(this.dom).on("mousedown",function(Ce){for(var xe=se.getSubGroup().concat(se),Oe=!1,Le=0;Le<xe.length&&(Oe=q.some(xe[Le].nodes.concat(xe[Le].groups),function(Et){return Et._isMoving}),!Oe);Le++);if(!Oe){var Ge=S(Ce.target).attr("class");if(!(Ge&&Ge.indexOf("butterfly-group-icon-resize")!==-1)){var He=0;Ce.button===He&&(q.isFunction(se.canMousedown)&&!se.canMousedown(Ce)||(Ce.preventDefault(),se._group&&Ce.stopPropagation(),Ee={timer:new Date().getTime(),x:se.left,y:se.top},se.draggable&&(se._isMoving=!0,se.emit("InnerEvents",{type:"group:dragBegin",data:se}))))}}}),S(this.dom).on("mouseup",function(Ce){var xe=Ce.originalEvent.path||[],Oe=q.some(se.nodes,function(Ct){return q.some(xe,function(Gt){return Ct.dom===Gt})});if(!Oe&&!(q.isFunction(se.canMouseUp)&&!se.canMouseUp(Ce))){for(var Le={timer:new Date().getTime(),x:se.left,y:se.top},Ge=!1,He=0;He<se.nodes.length;He++){var Et=se.nodes[He];if(S(Et.dom).find(Ce.target).length>0){Ge=!0;break}}!se._isResizing&&!Ge&&(Le.timer-Ee.timer<300||Math.abs(Ee.x-Le.x)<20&&Math.abs(Ee.y-Le.y)<20)&&(se.emit("system.group.click",{group:se}),se.emit("events",{type:"group:click",group:se})),se._isResizing=!1}})}},{key:"_createEndpoint",value:function(se){var Ee=this;se?this.endpoints.forEach(function(Ce){return Ee.addEndpoint(Ce,se)}):this._endpointsData&&this._endpointsData.map(function(Ce){return Ee.addEndpoint(Ce)})}},{key:"getParentGroup",value:function(){for(var se=[],Ee=this;Ee;)Ee=Ee._group,Ee&&se.push(Ee);return se}},{key:"getSubGroup",value:function(){for(var se=[],Ee=[this];Ee.length>0;){var Ce=Ee.pop();se=se.concat(Ce.groups),Ee=Ee.concat(Ce.groups)}return se}},{key:"addEndpoint",value:function(se,Ee){if(Ee)return this.emit("InnerEvents",{type:"group:addEndpoint",data:se,isInited:Ee}),se;var Ce=se.Class||e.default,xe=new Ce(q.assign({_on:this._on,_emit:this._emit,_node:this,_global:this._global},se));return this.emit("InnerEvents",{type:"group:addEndpoint",data:xe}),this.endpoints.push(xe),xe}},{key:"emit",value:function(se,Ee){B(z(j.prototype),"emit",this).call(this,se,Ee),this._emit(se,Ee)}},{key:"on",value:function(se,Ee){B(z(j.prototype),"on",this).call(this,se,Ee),this._on(se,Ee)}},{key:"destroy",value:function(se){this.endpoints.forEach(function(Ee){!Ee._isInitedDom&&Ee.destroy(se)}),se?S(this.dom).detach():(this._emit("system.group.delete",{group:this}),this._emit("events",{type:"group:delete",group:this}),S(this.dom).off(),S(this.dom).remove(),this.removeAllListeners(),this._hasEventListener=!1),this._isInited=!1}}]),j}(l.default);b.default=M},7711:function(T,b,u){"use strict";function a($){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},a($)}Object.defineProperty(b,"__esModule",{value:!0});function o($,te){if(!($ instanceof te))throw new TypeError("Cannot call a class as a function")}function l($,te){for(var fe=0;fe<te.length;fe++){var B=te[fe];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty($,e(B.key),B)}}function r($,te,fe){return te&&l($.prototype,te),fe&&l($,fe),Object.defineProperty($,"prototype",{writable:!1}),$}function e($){var te=t($,"string");return a(te)=="symbol"?te:String(te)}function t($,te){if(a($)!="object"||!$)return $;var fe=$[Symbol.toPrimitive];if(fe!==void 0){var B=fe.call($,te||"default");if(a(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)($)}function s($,te,fe){return te=v(te),h($,d()?Reflect.construct(te,fe||[],v($).constructor):te.apply($,fe))}function h($,te){if(te&&(a(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m($)}function m($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function d(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(te){}return(d=function(){return!!$})()}function v($){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},v($)}function x($,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(te&&te.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),te&&N($,te)}function N($,te){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,he){return B.__proto__=he,B},N($,te)}var F=u(666),ae=function($){x(te,$);function te(){return o(this,te),s(this,te)}return r(te,[{key:"draw",value:function(){}},{key:"getNode",value:function(){}},{key:"getEdge",value:function(){}},{key:"getGroup",value:function(){}},{key:"addNode",value:function(){}},{key:"addNodes",value:function(){}},{key:"addEdge",value:function(){}},{key:"addEdges",value:function(){}},{key:"addGroups",value:function(){}},{key:"removeNode",value:function(){}},{key:"removeNodes",value:function(){}},{key:"removeEdge",value:function(){}},{key:"removeEdges",value:function(){}},{key:"removeGroup",value:function(){}},{key:"getNeighborEdges",value:function(){}},{key:"getNeighborNodes",value:function(){}},{key:"getNeighborNodesAndEdgesByLevel",value:function(){}},{key:"getAdjcentTable",value:function(){}},{key:"getZoom",value:function(){}},{key:"setZoomable",value:function(){}},{key:"zoom",value:function(){}},{key:"getOffset",value:function(){}},{key:"setMoveable",value:function(){}},{key:"move",value:function(){}},{key:"getOrigin",value:function(){}},{key:"setOrigin",value:function(){}},{key:"getDataMap",value:function(){}},{key:"setGirdMode",value:function(){}},{key:"setGuideLine",value:function(){}},{key:"justifyCoordinate",value:function(){}},{key:"setSelectMode",value:function(){}},{key:"getUnion",value:function(){}},{key:"getAllUnion",value:function(){}},{key:"add2Union",value:function(){}},{key:"removeUnion",value:function(){}},{key:"removeAllUnion",value:function(){}},{key:"focusNodeWithAnimate",value:function(){}},{key:"focusNodesWithAnimate",value:function(){}},{key:"canvas2terminal",value:function(){}},{key:"terminal2canvas",value:function(){}},{key:"save2img",value:function(){}},{key:"updateRootResize",value:function(){}},{key:"click",value:function(){}},{key:"doubleClick",value:function(){}},{key:"onContextmenu",value:function(){}}]),te}(F);b.default=ae},8409:function(T,b,u){"use strict";function a($){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},a($)}Object.defineProperty(b,"__esModule",{value:!0});function o($,te){if(!($ instanceof te))throw new TypeError("Cannot call a class as a function")}function l($,te){for(var fe=0;fe<te.length;fe++){var B=te[fe];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty($,e(B.key),B)}}function r($,te,fe){return te&&l($.prototype,te),fe&&l($,fe),Object.defineProperty($,"prototype",{writable:!1}),$}function e($){var te=t($,"string");return a(te)=="symbol"?te:String(te)}function t($,te){if(a($)!="object"||!$)return $;var fe=$[Symbol.toPrimitive];if(fe!==void 0){var B=fe.call($,te||"default");if(a(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)($)}function s($,te,fe){return te=v(te),h($,d()?Reflect.construct(te,fe||[],v($).constructor):te.apply($,fe))}function h($,te){if(te&&(a(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m($)}function m($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function d(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(te){}return(d=function(){return!!$})()}function v($){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},v($)}function x($,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(te&&te.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),te&&N($,te)}function N($,te){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,he){return B.__proto__=he,B},N($,te)}var F=u(666),ae=function($){x(te,$);function te(){return o(this,te),s(this,te)}return r(te,[{key:"draw",value:function(){}},{key:"redraw",value:function(){}},{key:"drawLabel",value:function(){}},{key:"redrawLabel",value:function(){}},{key:"drawArrow",value:function(){}},{key:"redrawArrow",value:function(){}},{key:"isConnect",value:function(){}},{key:"destroy",value:function(){}},{key:"remove",value:function(){}},{key:"click",value:function(){}},{key:"hover",value:function(){}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}}]),te}(F);b.default=ae},2707:function(T,b,u){"use strict";function a($){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},a($)}Object.defineProperty(b,"__esModule",{value:!0});function o($,te){for(var fe=0;fe<te.length;fe++){var B=te[fe];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty($,r(B.key),B)}}function l($,te,fe){return te&&o($.prototype,te),fe&&o($,fe),Object.defineProperty($,"prototype",{writable:!1}),$}function r($){var te=e($,"string");return a(te)=="symbol"?te:String(te)}function e($,te){if(a($)!="object"||!$)return $;var fe=$[Symbol.toPrimitive];if(fe!==void 0){var B=fe.call($,te||"default");if(a(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)($)}function t($,te){if(!($ instanceof te))throw new TypeError("Cannot call a class as a function")}function s($,te,fe){return te=v(te),h($,d()?Reflect.construct(te,fe||[],v($).constructor):te.apply($,fe))}function h($,te){if(te&&(a(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m($)}function m($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function d(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(te){}return(d=function(){return!!$})()}function v($){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},v($)}function x($,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(te&&te.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),te&&N($,te)}function N($,te){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,he){return B.__proto__=he,B},N($,te)}var F=u(666),ae=function($){x(te,$);function te(){return t(this,te),s(this,te)}return l(te)}(F);b.default=ae},2592:function(T,b,u){"use strict";function a($){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},a($)}Object.defineProperty(b,"__esModule",{value:!0});function o($,te){if(!($ instanceof te))throw new TypeError("Cannot call a class as a function")}function l($,te){for(var fe=0;fe<te.length;fe++){var B=te[fe];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty($,e(B.key),B)}}function r($,te,fe){return te&&l($.prototype,te),fe&&l($,fe),Object.defineProperty($,"prototype",{writable:!1}),$}function e($){var te=t($,"string");return a(te)=="symbol"?te:String(te)}function t($,te){if(a($)!="object"||!$)return $;var fe=$[Symbol.toPrimitive];if(fe!==void 0){var B=fe.call($,te||"default");if(a(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)($)}function s($,te,fe){return te=v(te),h($,d()?Reflect.construct(te,fe||[],v($).constructor):te.apply($,fe))}function h($,te){if(te&&(a(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m($)}function m($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function d(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(te){}return(d=function(){return!!$})()}function v($){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},v($)}function x($,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(te&&te.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),te&&N($,te)}function N($,te){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,he){return B.__proto__=he,B},N($,te)}var F=u(666),ae=function($){x(te,$);function te(){return o(this,te),s(this,te)}return r(te,[{key:"draw",value:function(){}},{key:"addNode",value:function(){}},{key:"addNodes",value:function(){}},{key:"getWidth",value:function(){}},{key:"getHeight",value:function(){}},{key:"removeNode",value:function(){}},{key:"removeNodes",value:function(){}},{key:"setResize",value:function(){}},{key:"setSize",value:function(){}},{key:"moveTo",value:function(){}},{key:"getEndpoint",value:function(){}},{key:"addEndpoint",value:function(){}},{key:"remove",value:function(){}},{key:"destroy",value:function(){}},{key:"removeEndpoint",value:function(){}},{key:"collapse",value:function(){}},{key:"stretch",value:function(){}},{key:"click",value:function(){}},{key:"doubleClick",value:function(){}},{key:"onContextmenu",value:function(){}},{key:"hover",value:function(){}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}}]),te}(F);b.default=ae},7125:function(T,b,u){"use strict";function a($){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},a($)}Object.defineProperty(b,"__esModule",{value:!0});function o($,te){if(!($ instanceof te))throw new TypeError("Cannot call a class as a function")}function l($,te){for(var fe=0;fe<te.length;fe++){var B=te[fe];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty($,e(B.key),B)}}function r($,te,fe){return te&&l($.prototype,te),fe&&l($,fe),Object.defineProperty($,"prototype",{writable:!1}),$}function e($){var te=t($,"string");return a(te)=="symbol"?te:String(te)}function t($,te){if(a($)!="object"||!$)return $;var fe=$[Symbol.toPrimitive];if(fe!==void 0){var B=fe.call($,te||"default");if(a(B)!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(te==="string"?String:Number)($)}function s($,te,fe){return te=v(te),h($,d()?Reflect.construct(te,fe||[],v($).constructor):te.apply($,fe))}function h($,te){if(te&&(a(te)==="object"||typeof te=="function"))return te;if(te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m($)}function m($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function d(){try{var $=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(te){}return(d=function(){return!!$})()}function v($){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(fe){return fe.__proto__||Object.getPrototypeOf(fe)},v($)}function x($,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(te&&te.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),Object.defineProperty($,"prototype",{writable:!1}),te&&N($,te)}function N($,te){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,he){return B.__proto__=he,B},N($,te)}var F=u(666),ae=function($){x(te,$);function te(){return o(this,te),s(this,te)}return r(te,[{key:"draw",value:function(){}},{key:"getEndpoint",value:function(){}},{key:"addEndpoint",value:function(){}},{key:"removeEndpoint",value:function(){}},{key:"moveTo",value:function(){}},{key:"getWidth",value:function(){}},{key:"getHeight",value:function(){}},{key:"setDraggable",value:function(){}},{key:"remove",value:function(){}},{key:"destroy",value:function(){}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}},{key:"click",value:function(){}},{key:"doubleClick",value:function(){}},{key:"onContextmenu",value:function(){}},{key:"hover",value:function(){}}]),te}(F);b.default=ae},7305:function(T,b,u){"use strict";function a(S){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},a(S)}Object.defineProperty(b,"__esModule",{value:!0});var o=u(7125),l=t(o),r=u(3952),e=t(r);function t(S){return S&&S.__esModule?S:{default:S}}function s(S,q){if(!(S instanceof q))throw new TypeError("Cannot call a class as a function")}function h(S,q){for(var M=0;M<q.length;M++){var I=q[M];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,d(I.key),I)}}function m(S,q,M){return q&&h(S.prototype,q),M&&h(S,M),Object.defineProperty(S,"prototype",{writable:!1}),S}function d(S){var q=v(S,"string");return a(q)=="symbol"?q:String(q)}function v(S,q){if(a(S)!="object"||!S)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var I=M.call(S,q||"default");if(a(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(S)}function x(S,q,M){return q=fe(q),N(S,ae()?Reflect.construct(q,M||[],fe(S).constructor):q.apply(S,M))}function N(S,q){if(q&&(a(q)==="object"||typeof q=="function"))return q;if(q!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(S)}function F(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function ae(){try{var S=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(q){}return(ae=function(){return!!S})()}function $(){return typeof Reflect!="undefined"&&Reflect.get?$=Reflect.get.bind():$=function(q,M,I){var j=te(q,M);if(j){var ue=Object.getOwnPropertyDescriptor(j,M);return ue.get?ue.get.call(arguments.length<3?q:I):ue.value}},$.apply(this,arguments)}function te(S,q){for(;!Object.prototype.hasOwnProperty.call(S,q)&&(S=fe(S),S!==null););return S}function fe(S){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},fe(S)}function B(S,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(q&&q.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),q&&he(S,q)}function he(S,q){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(I,j){return I.__proto__=j,I},he(S,q)}var z=u(4609),ee=u(9392),pe=function(S){B(q,S);function q(M){var I;return s(this,q),I=x(this,q,[M]),I.id=M.id,I.scope=M.scope,I.group=M.group,I.top=M.top||0,I.left=M.left||0,I.dom=M.dom||null,I.draggable=M.draggable,I.options=M,I.__type="node",I._on=M._on,I._emit=M._emit,I._global=M._global,I.endpoints=[],I._endpointsData=M.endpoints,I._endpointLimitNum=M._endpointLimitNum,I._isMoving=!1,I.width=void 0,I.height=void 0,I._isForceUpdateSize=!1,I}return m(q,[{key:"draw",value:function(I){var j=I.dom;j||(j=z("<div></div>").attr("class","node").attr("id",I.id));var ue=z(j);return I.top!==void 0&&ue.css("top","".concat(I.top,"px")),I.left!==void 0&&ue.css("left","".concat(I.left,"px")),this.updated&&this.updated(),ue[0]}},{key:"focus",value:function(){}},{key:"unFocus",value:function(){}},{key:"addEndpoint",value:function(I,j){if(j)return this.emit("InnerEvents",{type:"node:addEndpoint",data:I,isInited:j}),I;var ue=I.Class||e.default,se=new ue(ee.assign({limitNum:I.limitNum||this._endpointLimitNum,_on:this._on,_emit:this._emit,_node:this,_global:this._global},I));this.emit("InnerEvents",{type:"node:addEndpoint",data:se});var Ee=z(this.dom).css("z-index");return Ee!=="auto"&&z(se.dom).css("z-index",Number(Ee)+1),this.endpoints.push(se),se}},{key:"removeEndpoint",value:function(I){var j=ee.findIndex(this.endpoints,function(se){return se.id===I});if(j!==-1){var ue=this.endpoints.splice(j,1)[0];return this.emit("InnerEvents",{type:"node:removeEndpoint",data:ue}),ue.destroy(),ue}}},{key:"getEndpoint",value:function(I,j){return ee.find(this.endpoints,function(ue){return!ue.type||ue.type==="onlyConnect"?I===ue.id:I===ue.id&&(j&&j===ue.type||!j)})}},{key:"_init",value:function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._isInited||(I.left&&(this.left=I.left),I.top&&(this.top=I.top),I._isDeleteGroup?(this.group=void 0,this._group=void 0):I.group&&(this.group=I.group),delete I._isDeleteGroup,this._isInited=!0,I.dom?(this.dom=I.dom,I.left&&z(this.dom).css("left","".concat(I.left,"px")),I.top&&z(this.dom).css("top","".concat(I.top,"px"))):this.dom=this.draw(ee.assign({id:this.id,top:this.top,left:this.left,dom:this.dom,options:this.options},I)),this._hasEventListener||(this._addEventListener(),this._hasEventListener=!0))}},{key:"_moveTo",value:function(I,j){var ue=this;z(this.dom).css("top",j).css("left",I),this.endpoints.forEach(function(se){se.moveTo(I-ue.left+se._left,j-ue.top+se._top)}),this.top=j,this.left=I}},{key:"moveTo",value:function(I,j,ue){this.emit("InnerEvents",{type:"node:move",node:this,x:I,y:j,isNotEventEmit:ue})}},{key:"getWidth",value:function(I){return(!I||!this.width||this._isForceUpdateSize)&&(this.width=z(this.dom).outerWidth(),this._isForceUpdateSize=!1),this.width}},{key:"getHeight",value:function(I){return(!I||!this.height||this._isForceUpdateSize)&&(this.height=z(this.dom).outerHeight(),this._isForceUpdateSize=!1),this.height}},{key:"_createEndpoint",value:function(I){var j=this;I?this.endpoints.forEach(function(ue){return j.addEndpoint(ue,I)}):this._endpointsData&&this._endpointsData.map(function(ue){return j.addEndpoint(ue)})}},{key:"_addEventListener",value:function(){var I=this,j={timer:0,x:0,y:0};z(this.dom).on("mousedown",function(ue){var se=0;ue.button===se&&(ee.isFunction(I.canMouseDown)&&!I.canMouseDown(ue)||(["SELECT","INPUT","RADIO","CHECKBOX","TEXTAREA"].includes(ue.target.nodeName)||ue.preventDefault(),j={timer:new Date().getTime(),x:I.left,y:I.top},I.draggable?(I._isMoving=!0,I.emit("InnerEvents",{type:"node:dragBegin",data:I})):I.emit("InnerEvents",{type:"node:mouseDown",data:I})))}),z(this.dom).on("mouseup",function(ue){if(!(ee.isFunction(I.canMouseUp)&&!I.canMouseUp(ue))){var se={timer:new Date().getTime(),x:I.left,y:I.top};(se.timer-j.timer<300||Math.abs(j.x-se.x)<20&&Math.abs(j.y-se.y)<20)&&(I.emit("system.node.click",{node:I}),I.emit("events",{type:"node:click",node:I}))}}),this.setDraggable(this.draggable)}},{key:"setDraggable",value:function(I){this.draggable=I}},{key:"remove",value:function(){this.emit("InnerEvents",{type:"node:delete",data:this})}},{key:"emit",value:function(I,j){$(fe(q.prototype),"emit",this).call(this,I,j),this._emit(I,j)}},{key:"on",value:function(I,j){$(fe(q.prototype),"on",this).call(this,I,j),this._on(I,j)}},{key:"destroy",value:function(I){I?(this.endpoints.forEach(function(j){!j._isInitedDom&&j.destroy(I)}),z(this.dom).detach()):(this.endpoints.forEach(function(j){!j._isInitedDom&&j.destroy()}),z(this.dom).remove(),this.removeAllListeners(),this._hasEventListener=!1),this._isInited=!1}}]),q}(l.default);b.default=pe},5340:function(T,b,u){"use strict";function a(he){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},a(he)}Object.defineProperty(b,"__esModule",{value:!0});var o=u(7305),l=r(o);function r(he){return he&&he.__esModule?he:{default:he}}function e(he,z){if(!(he instanceof z))throw new TypeError("Cannot call a class as a function")}function t(he,z){for(var ee=0;ee<z.length;ee++){var pe=z[ee];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(he,h(pe.key),pe)}}function s(he,z,ee){return z&&t(he.prototype,z),ee&&t(he,ee),Object.defineProperty(he,"prototype",{writable:!1}),he}function h(he){var z=m(he,"string");return a(z)=="symbol"?z:String(z)}function m(he,z){if(a(he)!="object"||!he)return he;var ee=he[Symbol.toPrimitive];if(ee!==void 0){var pe=ee.call(he,z||"default");if(a(pe)!="object")return pe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(z==="string"?String:Number)(he)}function d(he,z,ee){return z=$(z),v(he,N()?Reflect.construct(z,ee||[],$(he).constructor):z.apply(he,ee))}function v(he,z){if(z&&(a(z)==="object"||typeof z=="function"))return z;if(z!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(he)}function x(he){if(he===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return he}function N(){try{var he=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(z){}return(N=function(){return!!he})()}function F(){return typeof Reflect!="undefined"&&Reflect.get?F=Reflect.get.bind():F=function(z,ee,pe){var S=ae(z,ee);if(S){var q=Object.getOwnPropertyDescriptor(S,ee);return q.get?q.get.call(arguments.length<3?z:pe):q.value}},F.apply(this,arguments)}function ae(he,z){for(;!Object.prototype.hasOwnProperty.call(he,z)&&(he=$(he),he!==null););return he}function $(he){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},$(he)}function te(he,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");he.prototype=Object.create(z&&z.prototype,{constructor:{value:he,writable:!0,configurable:!0}}),Object.defineProperty(he,"prototype",{writable:!1}),z&&fe(he,z)}function fe(he,z){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(pe,S){return pe.__proto__=S,pe},fe(he,z)}var B=function(he){te(z,he);function z(ee){var pe;return e(this,z),pe=d(this,z,[ee]),pe.children=ee.children,pe.parent=ee.parent,pe.collapsed=ee.collapsed||!1,ee.isRoot&&(pe.isRoot=ee.isRoot),pe}return s(z,[{key:"_init",value:function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};F($(z.prototype),"_init",this).call(this,pe),pe.parent&&(this.parent=pe.parent,this.options.parent=pe.parent)}},{key:"collapse",value:function(){this._emit("InnerEvents",{type:"node:collapse",nodeId:this.id}),this.collapsed=!0}},{key:"expand",value:function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this._emit("InnerEvents",{type:"node:expand",nodeId:this.id,nodes:pe}),delete this.collapsed}},{key:"detectLeaf",value:function(){return!(this.children&&this.children.length>0)}},{key:"detectRoot",value:function(){return this.isRoot}}]),z}(l.default);b.default=B},1172:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(9392),o=l(a);function l(s){return s&&s.__esModule?s:{default:s}}var r={default1:{type:"pathString",content:"M0 0 L-3 3 L2 0 L-3 -3 Z"},default:{type:"pathString",content:"M5 0 L0 -2 Q 1.0 0 0 2 Z"},length:5};function e(s){var h=o.default.get(s,"shapeType"),m=o.default.get(s,"dom"),d=o.default.get(s,"arrowPosition",.5),v=o.default.get(s,"path"),x=v.split(" "),N=0,F=0;if(h==="BezierTest"||h==="AdvancedBezierTest"){var ae={x:x[8],y:x[9]},$={x:x[1],y:x[2]};d!==1?(ae=m.getPointAtLength(m.getTotalLength()*d+.001),$=m.getPointAtLength(m.getTotalLength()*d)):(ae=m.getPointAtLength(m.getTotalLength()*d),$=m.getPointAtLength(m.getTotalLength()*d-.001)),N=$.x-ae.x,F=$.y-ae.y}else if(h==="Straight"){var te={x:x[1],y:x[2]},fe={x:x[4],y:x[5]};N=fe.x-te.x,F=fe.y-te.y}else{var B=0,he=1;d!==1?(B=m.getPointAtLength(m.getTotalLength()*d),he=m.getPointAtLength(m.getTotalLength()*d+.001)):(B=m.getPointAtLength(m.getTotalLength()*d-.001),he=m.getPointAtLength(m.getTotalLength()*d)),N=he.x-B.x,F=he.y-B.y}return{x:N,y:F}}var t=function(h){h.forEach(function(m){r[m.key]={type:m.type,content:m.content,width:m.width,height:m.height}})};b.default={calcSlope:e,ARROW_TYPE:r,registerArrow:t}},5500:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function a(m){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},a(m)}function o(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function l(m,d){for(var v=0;v<d.length;v++){var x=d[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,e(x.key),x)}}function r(m,d,v){return d&&l(m.prototype,d),v&&l(m,v),Object.defineProperty(m,"prototype",{writable:!1}),m}function e(m){var d=t(m,"string");return a(d)=="symbol"?d:String(d)}function t(m,d){if(a(m)!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var x=v.call(m,d||"default");if(a(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(m)}var s=u(9392),h=function(){function m(d){o(this,m),this.canvas=d.canvas,this.terOffsetX=d.terOffsetX||0,this.terOffsetY=d.terOffsetY||0,this.terWidth=d.terWidth||0,this.terHeight=d.terHeight||0,this.canOffsetX=d.canOffsetX||0,this.canOffsetY=d.canOffsetY||0,this.scale=d.scale||1,this.scrollTop=0,this.scrollLeft=0,this.scrollTimer=void 0,this._calcScrollPos(!0),this.originX=void 0,this.originY=void 0,this._currentTerX=0,this._currentTerY=0}return r(m,[{key:"_changeCanvasInfo",value:function(v){v.terOffsetX!==void 0&&(this.terOffsetX=v.terOffsetX),v.terOffsetY!==void 0&&(this.terOffsetY=v.terOffsetY),v.terWidth!==void 0&&(this.terWidth=v.terWidth),v.terHeight!==void 0&&(this.terHeight=v.terHeight),v.canOffsetX!==void 0&&(this.canOffsetX=v.canOffsetX),v.canOffsetY!==void 0&&(this.canOffsetY=v.canOffsetY),v.scale!==void 0&&(this._lastScale=this.scale,this.scale=v.scale),v.canvas&&(this.canvas=v.canvas);var x=!1;v.originX!==void 0&&(this.originX=v.originX,x=!0),v.originY!==void 0&&(this.originY=v.originY,x=!0),x&&(this.canvas.wrapper.style.transformOrigin="".concat(this.originX,"% ").concat(this.originY,"%"));var N=!1;if(v.mouseX!==void 0&&this._currentTerX!==v.mouseX-this.terOffsetX&&(this._currentTerX=v.mouseX-this.terOffsetX,N=!0),v.mouseY!==void 0&&this._currentTerY!==v.mouseY-this.terOffsetY&&(this._currentTerY=v.mouseY-this.terOffsetY,N=!0),N){(this.originX===void 0||this.originY===void 0)&&(this.originX=0,this.originY=0);var F=this.originX/100*this.terWidth,ae=this.originY/100*this.terHeight,$=[parseInt(this.canOffsetX),parseInt(this.canOffsetY)],te=(v.mouseX-(F*(1-this._lastScale)+$[0])-this.terOffsetX)/this._lastScale,fe=(v.mouseY-(ae*(1-this._lastScale)+$[1])-this.terOffsetY)/this._lastScale,B=te/this.terWidth*100,he=fe/this.terHeight*100,z=-F*(1-this._lastScale),ee=-ae*(1-this._lastScale);F=B/100*this.terWidth,ae=he/100*this.terHeight;var pe=-F*(1-this._lastScale),S=-ae*(1-this._lastScale),q=pe-z+$[0],M=S-ee+$[1];this.canvas.wrapper.style.transformOrigin="".concat(B,"% ").concat(he,"%"),this.canvas.move([q,M]),this.originX=B,this.originY=he}}},{key:"canvas2terminal",value:function(v,x){return[this._canvas2terminal("x",v[0],x),this._canvas2terminal("y",v[1],x)]}},{key:"terminal2canvas",value:function(v,x){return[this._terminal2canvas("x",v[0],x),this._terminal2canvas("y",v[1],x)]}},{key:"_canvas2terminal",value:function(v,x,N){this._calcScrollPos();var F=s.get(N,"scale")||this.scale,ae=s.get(N,"canOffsetX")!==void 0?s.get(N,"canOffsetX"):this.canOffsetX,$=s.get(N,"canOffsetY")!==void 0?s.get(N,"canOffsetY"):this.canOffsetY,te=s.get(N,"terOffsetX")!==void 0?s.get(N,"terOffsetX"):this.terOffsetX,fe=s.get(N,"terOffsetY")!==void 0?s.get(N,"terOffsetY"):this.terOffsetY,B=s.get(N,"originX")!==void 0?s.get(N,"originX"):this.originX||0,he=s.get(N,"originY")!==void 0?s.get(N,"originY"):this.originY||0;if(v==="x"){var z=B/100*this.terWidth;return x*F+(z*(1-F)+ae)+te}if(v==="y"){var ee=he/100*this.terHeight;return x*F+(ee*(1-F)+$)+fe}}},{key:"_terminal2canvas",value:function(v,x,N){this._calcScrollPos();var F=s.get(N,"scale")||this.scale,ae=s.get(N,"canOffsetX")!==void 0?s.get(N,"canOffsetX"):this.canOffsetX,$=s.get(N,"canOffsetY")!==void 0?s.get(N,"canOffsetY"):this.canOffsetY,te=s.get(N,"terOffsetX")!==void 0?s.get(N,"terOffsetX"):this.terOffsetX,fe=s.get(N,"terOffsetY")!==void 0?s.get(N,"terOffsetY"):this.terOffsetY,B=s.get(N,"originX")!==void 0?s.get(N,"originX"):this.originX||0,he=s.get(N,"originY")!==void 0?s.get(N,"originY"):this.originY||0,z=this.scrollTop,ee=this.scrollLeft;if(v==="x"){var pe=B/100*this.terWidth;return(x-(pe*(1-F)+ae)-te-ee)/F}if(v==="y"){var S=he/100*this.terHeight;return(x-(S*(1-F)+$)-fe-z)/F}}},{key:"_calcScrollPos",value:function(v){var x=this;if(v&&(clearTimeout(this.scrollTimer),this.scrollTimer=void 0),!this.scrollTimer){var N=this.canvas.root,F=N.getBoundingClientRect();this.scrollTop=F.top-this.terOffsetY,this.scrollLeft=F.left-this.terOffsetX,this.scrollTimer=setTimeout(function(){x.scrollTimer=void 0},100)}}}]),m}();b.default=h},7588:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function a(d){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},a(d)}function o(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")}function l(d,v){for(var x=0;x<v.length;x++){var N=v[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,e(N.key),N)}}function r(d,v,x){return v&&l(d.prototype,v),x&&l(d,x),Object.defineProperty(d,"prototype",{writable:!1}),d}function e(d){var v=t(d,"string");return a(v)=="symbol"?v:String(v)}function t(d,v){if(a(d)!="object"||!d)return d;var x=d[Symbol.toPrimitive];if(x!==void 0){var N=x.call(d,v||"default");if(a(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}var s=u(4609),h=u(9392),m=function(){function d(v){o(this,d),this.root=v.root,this.canvas=v.canvas,this.domWrapper=h.get(v,"canvas.wrapper"),this.canvasHeight=0,this.canvasWidth=0,this.dom=null,this.isActive=!1,this.theme=h.get(v,"theme",{})||{shapeType:"circle",gap:10,adsorbGap:5,background:"#fff",lineColor:"#000",lineWidth:"1px",circleRadiu:2,circleColor:"#000"}}return r(d,[{key:"_resize",value:function(){this.canvasHeight=s(this.root).height(),this.canvasWidth=s(this.root).width(),s(this.dom).attr("width",this.canvasWidth),s(this.dom).attr("height",this.canvasHeight)}},{key:"create",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.theme=h.merge(this.theme,x.theme||{}),this.dom||(this.dom=s('<canvas class="butterfly-gird-canvas"></canvas>')[0],this._resize(),s(this.dom).appendTo(this.root)),this.theme.shapeType==="circle"?this.createCircle():this.theme.shapeType==="line"&&this.createLine(),this.theme.background&&s(this.dom).css("background",this.theme.background),this.isActive=!0}},{key:"createCircle",value:function(){var x=this.dom.getContext("2d");x.clearRect(0,0,this.canvasWidth,this.canvasHeight),x.beginPath(),x.fillStyle=this.theme.circleColor||"#000";var N=Math.PI*2,F=parseInt(this.theme.gap);F=F<5?5:F;for(var ae=0;ae<this.canvasWidth;ae+=F)for(var $=0;$<this.canvasHeight;$+=F)x.moveTo(ae,$),x.arc(ae,$,this.theme.circleRadiu,0,N);x.fill()}},{key:"createLine",value:function(){var x=this.dom.getContext("2d");x.strokeStyle=this.theme.lineColor||"#000",x.lineWidth=this.theme.lineWidth||1;var N=parseInt(this.theme.gap);N=N<5?5:N;for(var F=0;F<this.canvasHeight;F+=N)x.beginPath(),x.moveTo(0,F),x.lineTo(this.canvasWidth,F),x.stroke(),x.closePath();for(var ae=0;ae<this.canvasWidth;ae+=N)x.beginPath(),x.moveTo(ae,0),x.lineTo(ae,this.canvasHeight),x.stroke(),x.closePath();x.stroke()}},{key:"justifyAllCoordinate",value:function(){var x=this,N=this.canvas.groups,F=this.canvas.nodes,ae=function(te,fe){var B=te.left,he=te.top,z=te.left+te.getWidth(),ee=te.top+te.getHeight(),pe=B%x.theme.gap,S=z%x.theme.gap,q=he%x.theme.gap,M=ee%x.theme.gap,I=x.theme.gap-pe,j=x.theme.gap-S,ue=x.theme.gap-q,se=x.theme.gap-M,Ee={left:1/0,right:1/0,top:1/0,bottom:1/0};pe<S&&pe<Ee.left&&(Ee.left=pe),I<pe&&I<Ee.right&&(Ee.right=I),S<pe&&S<Ee.right&&(Ee.left=S),j<S&&j<Ee.left&&(Ee.right=j),q<M&&q<Ee.top&&(Ee.top=q),ue<q&&ue<Ee.bottom&&(Ee.bottom=ue),M<q&&M<Ee.bottom&&(Ee.top=M),se<M&&se<Ee.top&&(Ee.bottom=se);var Ce=[te.left,te.top];Ee.left=Ee.left<=x.theme.adsorbGap?Ee.left:1/0,Ee.right=Ee.right<=x.theme.adsorbGap?Ee.right:1/0,Ee.top=Ee.top<=x.theme.adsorbGap?Ee.top:1/0,Ee.bottom=Ee.bottom<=x.theme.adsorbGap?Ee.bottom:1/0,Ee.left<Ee.right&&(Ce[0]-=Ee.left),Ee.right<Ee.left&&(Ce[0]+=Ee.right),Ee.top<Ee.bottom&&(Ce[1]-=Ee.top),Ee.bottom<Ee.top&&(Ce[1]+=Ee.bottom),(Ce[0]!==te.left||Ce[1]!==te.top)&&(fe==="node"?x.canvas._moveNode(te,Ce[0],Ce[1]):fe==="group"&&x.canvas._moveGroup(te,Ce[0],Ce[1]))};N.forEach(function($){ae($,"group"),($.nodes||[]).forEach(function(te){ae(te,"node")})}),F.forEach(function($){ae($,"node")})}},{key:"destroy",value:function(){this.dom.remove(),this.isActive=!1}}]),d}();b.default=m},3059:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function a(d){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},a(d)}function o(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")}function l(d,v){for(var x=0;x<v.length;x++){var N=v[x];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,e(N.key),N)}}function r(d,v,x){return v&&l(d.prototype,v),x&&l(d,x),Object.defineProperty(d,"prototype",{writable:!1}),d}function e(d){var v=t(d,"string");return a(v)=="symbol"?v:String(v)}function t(d,v){if(a(d)!="object"||!d)return d;var x=d[Symbol.toPrimitive];if(x!==void 0){var N=x.call(d,v||"default");if(a(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}var s=u(4609),h=u(9392),m=function(){function d(v){o(this,d),this.root=v.root,this.canvas=v.canvas,this.dom=null,this.cxt=null,this.isActive=!1,this.limitNum=v.limitNum,this.adsorp=h.assign({enable:!1,gap:5},v.adsorp||{}),this.theme={lineColor:"#9fd1ff",lineWidth:1},this._adsorpTimer=null}return r(d,[{key:"_resize",value:function(){this.canvasHeight=s(this.root).height(),this.canvasWidth=s(this.root).width(),s(this.guideLineCanvas).attr("width",this.canvasWidth),s(this.guideLineCanvas).attr("height",this.canvasHeight)}},{key:"create",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.theme=h.merge(this.theme,x.theme||{}),this.adsorp=h.merge(this.adsorp,x.adsorp||{}),this.dom||(this.dom=s('<div class="butterfly-guide-canvas-wrapper"></div>')[0],this.guideLineCanvas=s('<canvas class="butterfly-guideline-canvas"></canvas>')[0],this._resize(),s(this.guideLineCanvas).appendTo(this.dom),s(this.dom).appendTo(this.root)),this.cxt=this.guideLineCanvas.getContext("2d"),this.cxt.strokeStyle=this.theme.lineColor||"#000",this.cxt.lineWidth=this.theme.lineWidth||1,this.isActive=!0}},{key:"guidLine",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0],N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],F=function($){return Math.floor($)+.5};this.cxt.beginPath(),this.cxt.moveTo(F(x[0]),F(x[1])),this.cxt.lineTo(F(N[0]),F(N[1])),this.cxt.stroke(),this.cxt.closePath()}},{key:"draw",value:function(x,N){var F=this;this.cxt.clearRect(0,0,this.canvasWidth,this.canvasHeight);var ae=parseInt(x.left),$=parseInt(x.left+x.getWidth(!0)),te=parseInt(x.top),fe=parseInt(x.top+x.getHeight(!0)),B=1/0,he=1/0,z=1/0,ee=1/0,pe=this.adsorp.enable?this.adsorp.gap:0,S=null,q=null,M=null,I=null,j=this.canvas.groups,ue=this.canvas.nodes;j.forEach(function(ir){if(!(N==="group"&&x.id===ir.id)){var Nr=parseInt(ir.left),Ei=parseInt(ir.left+ir.getWidth()),ci=parseInt(ir.top),Ot=parseInt(ir.top+ir.getHeight());Math.abs(ae-Nr)<=pe&&Math.abs(ci-te)<z&&(z=Math.abs(ci-te),S={item:ir,gap:ae-Nr}),Math.abs($-Ei)<=pe&&Math.abs(Ot-fe)<ee&&(ee=Math.abs(Ot-fe),q={item:ir,gap:$-Ei}),Math.abs(te-ci)<=pe&&Math.abs(Nr-ae)<B&&(B=Math.abs(Nr-ae),M={item:ir,gap:te-ci}),Math.abs(fe-Ot)<=pe&&Math.abs(Ei-$)<he&&(he=Math.abs(Ei-$),I={item:ir,gap:Ei-$})}}),ue.forEach(function(ir){if(!(N==="node"&&x.id===ir.id)){var Nr=parseInt(ir.left),Ei=parseInt(ir.left+ir.getWidth()),ci=parseInt(ir.top),Ot=parseInt(ir.top+ir.getHeight());ir._group&&(Nr+=ir._group.left,Ei+=ir._group.left,ci+=ir._group.top,Ot+=ir._group.top),Math.abs(ae-Nr)<=pe&&Math.abs(ci-te)<z&&(z=Math.abs(ci-te),S={item:ir,gap:ae-Nr}),Math.abs($-Ei)<=pe&&Math.abs(Ot-fe)<ee&&(ee=Math.abs(Ot-fe),q={item:ir,gap:$-Ei}),Math.abs(te-ci)<=pe&&Math.abs(Nr-ae)<B&&(B=Math.abs(Nr-ae),M={item:ir,gap:te-ci}),Math.abs(fe-Ot)<=pe&&Math.abs(Ei-$)<he&&(he=Math.abs(Ei-$),I={item:ir,gap:fe-Ot})}});var se=function(Nr,Ei,ci){F._adsorpTimer||(Nr.moveTo(Ei,ci,!1),F._adsorpTimer=setTimeout(function(){clearTimeout(F._adsorpTimer),F._adsorpTimer=null},100))};if(S){var Ee=S.item,Ce=te>Ee.top?Ee.top:te,xe=te>Ee.top?fe:Ee.top+Ee.getHeight(),Oe=Ee.left;se(x,x.left-S.gap,x.top),this.guidLine([Oe,Ce],[Oe,xe])}if(q){var Le=q.item,Ge=te>Le.top?Le.top:te,He=te>Le.top?fe:Le.top+Le.getWidth(),Et=parseInt(Le.left+Le.getWidth(!0));se(x,x.left-q.gap,x.top),this.guidLine([Et,Ge],[Et,He])}if(M){var Ct=M.item,Gt=ae>Ct.left?Ct.left:ae,At=ae>Ct.left?$:Ct.left+Ct.getWidth(),vt=Ct.top;se(x,x.left,x.top-M.gap),this.guidLine([Gt,vt],[At,vt])}if(I){var cn=I.item,hn=ae>cn.left?cn.left:ae,Bn=ae>cn.left?$:cn.left+cn.getHeight(),Fn=parseInt(cn.top+cn.getHeight(!0));se(x,x.left,x.top-I.gap),this.guidLine([hn,Fn],[Bn,Fn])}}},{key:"zoom",value:function(x){s(this.dom).css({transform:"scale(".concat(x,")")}),this.clearCanvas()}},{key:"move",value:function(x,N){s(this.dom).css("left",x).css("top",N),this.clearCanvas()}},{key:"setOrigin",value:function(x,N){s(this.dom).css("transform-origin","".concat(x,"% ").concat(N,"%"))}},{key:"clearCanvas",value:function(){this.cxt&&this.cxt.clearRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"destroy",value:function(){this.dom&&s(this.dom).destroy(),this.isActive=!1}}]),d}();b.default=m},408:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function u(a){var o=a.radius,l=a.data.nodes.filter(function(s){return s._isCircle}),r=360/l.length,e=0;a.getWidth&&(e=a.getWidth()/2);var t=0;a.getHeight&&(e=a.getHeight()/2),l.forEach(function(s,h){var m=2*Math.PI/360,d=h*r,v=o*Math.sin(d*m)-t,x=o*Math.cos(d*m)-e,N=(o+30)*Math.sin(d*m)-t,F=(o+30)*Math.cos(d*m)-e;s.top=v,s.left=x,s.posInfo={angle:d,_textTop:N,_textLeft:F}})}b.default={circleLayout:u}},1802:function(T){"use strict";function b(u){var a=u.center,o=u.nodeSize,l=u.minNodeSpacing,r=u.preventOverlap,e=u.sweep,t=u.equidistant,s=u.startAngle,h=s===void 0?3/2*Math.PI:s,m=u.clockwise,d=u.maxLevelDiff,v=u.sortBy,x=u.width,N=u.height,F=u.data,ae=F.nodes,$=F.edges,te=ae.map(function(At){return{id:At.id,top:At.top,left:At.left,degree:At.degree,size:At.size}}),fe=$.map(function(At){return{source:At.source,target:At.target}}),B=te.length,he,z;if(B!==0){if(B===1){te[0].x=a[0],te[0].y=a[1];return}var ee=[],pe;_.isArray(o)?pe=Math.max(o[0],o[1]):pe=o,te.forEach(function(At){ee.push(At);var vt=pe;_.isArray(At.size)?vt=Math.max(At.size[0],At.size[1]):_.isNumber(At.size)&&(vt=At.size),pe=Math.max(pe,vt)}),!x&&typeof window!="undefined"&&(x=window.innerWidth),!N&&typeof window!="undefined"&&(N=window.innerHeight),m=z!==void 0?!z:m;var S={},q={};if(ee.forEach(function(At,vt){S[At.id]=At,q[At.id]=vt}),(v==="degree"||!_.isString(v)||ee[0][v]===void 0)&&(v="degree",!_.isNumber(te[0].degree))){for(var M=[],I=te.length,j=0;j<I;j++)M[j]=0;fe.forEach(function(At){At.source&&(M[q[At.source]]+=1),At.target&&(M[q[At.target]]+=1)}),ee.forEach(function(At,vt){At.degree=M[vt]})}ee.sort(function(At,vt){return vt[v]-At[v]}),he=ee[0],d=d||he[v]/4;var ue=[[]],se=ue[0];ee.forEach(function(At){if(se.length>0){var vt=Math.abs(se[0][v]-At[v]);d&&vt>=d&&(se=[],ue.push(se))}se.push(At)});var Ee=pe+l;if(!r){var Ce=ue.length>0&&ue[0].length>1,xe=Math.min(x,N)/2-Ee,Oe=xe/(ue.length+(Ce?1:0));Ee=Math.min(Ee,Oe)}var Le=0;if(ue.forEach(function(At){var vt=vt;vt===void 0&&(vt=2*Math.PI-2*Math.PI/At.length);var cn=At.dTheta=vt/Math.max(1,At.length-1);if(At.length>1&&r){var hn=Math.cos(cn)-Math.cos(0),Bn=Math.sin(cn)-Math.sin(0),Fn=Math.sqrt(Ee*Ee/(hn*hn+Bn*Bn));Le=Math.max(Fn,Le)}At.r=Le,Le+=Ee}),t){for(var Ge=0,He=0,Et=0;Et<ue.length;Et++){var Ct=ue[Et],Gt=Ct.r-He;Ge=Math.max(Ge,Gt)}He=0,ue.forEach(function(At,vt){vt===0&&(He=At.r),At.r=He,He+=Ge})}ue.forEach(function(At){var vt=At.dTheta,cn=At.r;At.forEach(function(hn,Bn){var Fn=h+(m?1:-1)*vt*Bn;hn.x=a[0]+cn*Math.cos(Fn),hn.y=a[1]+cn*Math.sin(Fn)})}),u.data.nodes.forEach(function(At,vt){At.top=te[vt].y,At.left=te[vt].x})}}T.exports=b},4090:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(9097),o=l(a);function l(ee){return ee&&ee.__esModule?ee:{default:ee}}function r(ee){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe},r(ee)}function e(ee){return m(ee)||h(ee)||s(ee)||t()}function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(ee,pe){if(ee){if(typeof ee=="string")return d(ee,pe);var S=Object.prototype.toString.call(ee).slice(8,-1);if(S==="Object"&&ee.constructor&&(S=ee.constructor.name),S==="Map"||S==="Set")return Array.from(ee);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return d(ee,pe)}}function h(ee){if(typeof Symbol!="undefined"&&ee[Symbol.iterator]!=null||ee["@@iterator"]!=null)return Array.from(ee)}function m(ee){if(Array.isArray(ee))return d(ee)}function d(ee,pe){(pe==null||pe>ee.length)&&(pe=ee.length);for(var S=0,q=new Array(pe);S<pe;S++)q[S]=ee[S];return q}function v(ee,pe){var S=Object.keys(ee);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(ee);pe&&(q=q.filter(function(M){return Object.getOwnPropertyDescriptor(ee,M).enumerable})),S.push.apply(S,q)}return S}function x(ee){for(var pe=1;pe<arguments.length;pe++){var S=arguments[pe]!=null?arguments[pe]:{};pe%2?v(Object(S),!0).forEach(function(q){N(ee,q,S[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(S)):v(Object(S)).forEach(function(q){Object.defineProperty(ee,q,Object.getOwnPropertyDescriptor(S,q))})}return ee}function N(ee,pe,S){return pe=F(pe),pe in ee?Object.defineProperty(ee,pe,{value:S,enumerable:!0,configurable:!0,writable:!0}):ee[pe]=S,ee}function F(ee){var pe=ae(ee,"string");return r(pe)=="symbol"?pe:String(pe)}function ae(ee,pe){if(r(ee)!="object"||!ee)return ee;var S=ee[Symbol.toPrimitive];if(S!==void 0){var q=S.call(ee,pe||"default");if(r(q)!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(pe==="string"?String:Number)(ee)}var $=u(9392),te=function(){var pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2?arguments[2]:void 0,M=[];return pe.forEach(function(I){var j=S.find(function(se){return se.id===I.id});if(j){var ue={top:0,left:0};q&&(ue=q),M.push({id:I.id,top:j.top+ue.top,left:j.left+ue.left,width:j.width,height:j.height})}}),M},fe=function ee(pe,S){var q=$.cloneDeep(pe),M=q.data,I=q.ranksep,j=q.nodesep,ue=q.rankdir,se=[],Ee=[],Ce=M.nodes.filter(function(Gt){return!Gt.group}),xe=M.groups.filter(function(Gt){return!Gt.group}),Oe=!1,Le=B(M),Ge=x(x({},q),{},{ranksep:I,nodesep:j,data:{nodes:[].concat(e(Ce),e(xe)),edges:Le}});(0,o.default)(Ge),Ee.push.apply(Ee,e(te(xe,Ge.data.nodes,S))),se.push.apply(se,e(te(Ce,Ge.data.nodes,S))),(q.data.groups||[]).forEach(function(Gt,At){var vt=M.nodes.filter(function(fr){return fr.group===Gt.id}),cn=he(Gt.id),hn=x(x({},q),{},{nodesep:j,data:{nodes:vt,edges:cn}});(0,o.default)(hn);var Bn=te(q.data.nodes,hn.data.nodes),Fn,ir,Nr,Ei;Bn.forEach(function(fr){(!Fn||fr.left<Fn)&&(Fn=fr.left),(!ir||fr.top<ir)&&(ir=fr.top),(!Nr||vt.find(function(Pi){return Pi.id===fr.id}).width+fr.left>Nr)&&(Nr=fr.left+vt.find(function(Pi){return Pi.id===fr.id}).width),(!Ei||vt.find(function(Pi){return Pi.id===fr.id}).height+fr.top>Ei)&&(Ei=fr.top+vt.find(function(Pi){return Pi.id===fr.id}).height)}),ue&&(ue==="LR"||ue==="RL")?(ir-=j/2,Ei+=j/2,Fn-=I/2,Nr+=I/2):(ir-=I/2,Ei+=I/2,Fn-=j/2,Nr+=j/2),Gt.width<Nr-Fn&&(Gt.width=Nr-Fn,Oe=!0),Gt.height<Ei-ir&&(Gt.height=Ei-ir,Oe=!0);var ci=(Gt.width-(Nr-Fn))/2-Fn,Ot=(Gt.height-(Ei-ir))/2-ir;Oe||Bn.forEach(function(fr){fr.left+=ci,fr.top+=Ot}),se.push.apply(se,e(Bn))});var He=$.uniq(M.groups.filter(function(Gt){return Gt.group}).map(function(Gt){return Gt.group})),Et=[],Ct=[];return $.isEmpty(He)||He.forEach(function(Gt){var At=M.groups.filter(function(Nr){return Nr.group===Gt});At.forEach(function(Nr){return delete Nr.group});var vt=At.map(function(Nr){return Nr.id}),cn=M.nodes.filter(function(Nr){return[Gt].concat(e(vt)).includes(Nr.group)}),hn=Ee.find(function(Nr){return Nr.id===Gt}),Bn=ee(x(x({},q),{},{data:{nodes:cn,groups:At,edges:M.edges}}),hn),Fn=Bn.nodes,ir=Bn.groups;Et=Fn,Ct=ir}),Oe?ee(q,S):{nodes:[].concat(se,e(Et)),groups:[].concat(Ee,e(Ct))}},B=function(pe){var S=pe.nodes,q=S===void 0?[]:S,M=pe.edges,I=M===void 0?[]:M,j=pe.groups,ue=j===void 0?[]:j,se=[];ue.forEach(function(Ce){var xe=q.filter(function(Oe){return Oe.group===Ce.id});xe.forEach(function(Oe){var Le=I.filter(function(He){return String(He.source)===String(Oe.id)}),Ge=I.filter(function(He){return String(He.target)===String(Oe.id)});Le.forEach(function(He){return He.source=Ce.id}),Ge.forEach(function(He){return He.target=Ce.id}),se.push.apply(se,e(Le).concat(e(Ge)))})});var Ee=q.filter(function(Ce){return!Ce.group});return Ee.forEach(function(Ce){var xe=I.filter(function(Le){return String(Le.source)===String(Ce.id)}),Oe=I.filter(function(Le){return String(Le.target)===String(Ce.id)});se.push.apply(se,e(xe).concat(e(Oe)))}),$.uniqWith(se,$.isEqual)},he=function(pe,S){var q=pe.nodes,M=q===void 0?[]:q,I=pe.edges,j=I===void 0?[]:I,ue=[],se=M.filter(function(Ee){return Ee.group===S});return se.forEach(function(Ee){var Ce=j.filter(function(Oe){return String(Oe.source)===String(Ee.id)}),xe=j.filter(function(Oe){return String(Oe.target)===String(Ee.id)});ue.push.apply(ue,e(Ce).concat(e(xe)))}),$.uniqWith(ue,$.isEqual)};function z(ee){var pe=ee.data;if($.isEmpty(pe.groups)){(0,o.default)(ee);return}var S=fe(ee);ee.data.nodes.forEach(function(q){var M=S.nodes.find(function(I){return I.id===q.id});M&&(q.top=M.top,q.left=M.left,q.width=M.width,q.height=M.height)}),ee.data.groups.forEach(function(q){var M=S.groups.find(function(I){return I.id===q.id});M&&(q.top=M.top,q.left=M.left,q.width=M.width,q.height=M.height)})}b.default={dagreGroupLayout:z}},9097:function(T,b,u){"use strict";var a=u(2546);function o(r){var e=r.nodeSize,t=r.rankdir,s=r.nodesepFunc,h=r.ranksepFunc,m=r.nodesep,d=r.ranksep,v=r.controlPoints,x=r.data.edges,N=x===void 0?[]:x,F=r.data.nodes,ae=F.map(function(z){return{id:z.id,top:z.top,left:z.left,width:z.width,height:z.height}});if(ae){var $=new a.graphlib.Graph,te;e?_.isArray(e)?te=function(){return e}:te=function(){return[e,e]}:te=function(ee){return ee.size?_.isArray(ee.size)?ee.size:[ee.size,ee.size]:[40,40]};var fe=l(s,m,50),B=l(h,d,50);(t==="LR"||t==="RL")&&(fe=l(h,d,50),B=l(s,m,50)),ae.forEach(function(z){var ee=te(z),pe=B(z),S=fe(z),q=z.width||ee[0]+2*S,M=z.height||ee[1]+2*pe;$.setNode(z.id,{width:q,height:M})}),N.forEach(function(z){$.setEdge(z.source,z.target,{weight:z.weight||1})}),$.setDefaultEdgeLabel(function(){return{}}),r.nodes=ae,$.setGraph(r),a.layout($);var he;return $.nodes().forEach(function(z){if(he=$.node(z),he){var ee=ae.findIndex(function(pe){return pe.id===z});ae[ee].left=he.x,ae[ee].top=he.y,ae[ee].posInfo={_out:$._out[z],_in:$._in[z],_preds:$._preds[z],_sucs:$._sucs[z]}}}),$.edges().forEach(function(z){he=$.edge(z);var ee=N.findIndex(function(pe){return pe.source===z.v&&pe.target===z.w});v&&N[ee].type!=="loop"&&N[ee].shape!=="loop"&&(N[ee].controlPoints=he.points.slice(1,he.points.length-1))}),ae.forEach(function(z,ee){F[ee].left=z.left,F[ee].top=z.top,F[ee].posInfo=z.posInfo}),r}}function l(r,e,t){var s;return r?s=r:_.isNumber(e)?s=function(){return e}:s=function(){return t},s}T.exports=o},6457:function(T,b,u){"use strict";var a=u(897);function o(l){var r=l.opts,e=_.cloneDeep(l.data),t=e.nodes.filter(function(x){return!x.group}),s=e.nodes.filter(function(x){return x.group});t=t.concat(e.groups),s.forEach(function(x){var N=_.find(e.groups,function(F){return F.id===x.group});x.x=Math.random()*(N.width||150),x.y=Math.random()*(N.height||120)});for(var h=e.edges.map(function(x){var N=_.find(s,function(ae){return ae.source===x.id});N&&(x.source=N.group);var F=_.find(s,function(ae){return ae.target===x.id});return F&&(x.target=N.group),x}),m=a.forceSimulation(t).force("charge",function(){return r.chargeStrength?a.forceManyBody().strength(r.chargeStrength):a.forceManyBody()}()).force("collision",a.forceCollide().radius(r.collide.radius)).force("center",a.forceCenter(r.width/2,r.height/2)).force("link",a.forceLink(h).id(function(x){return x[_.get(r.link,"id","id")]}).distance(r.link.distance).strength(r.link.strength)).stop(),d=0,v=Math.ceil(Math.log(m.alphaMin())/Math.log(1-m.alphaDecay()));d<v;++d)m.tick();l.data.nodes.forEach(function(x,N){x.top=e.nodes[N].y,x.left=e.nodes[N].x}),l.data.groups.forEach(function(x,N){x.top=e.groups[N].y,x.left=e.groups[N].x})}T.exports=o},8783:function(T){"use strict";var b=800;function u(e){var t=e.opts,s=e.data.nodes,h=t.center;if(!(!s||s.length===0)){if(s.length===1){s[0].x=h[0],s[0].y=h[1];return}var m={},d={};s.forEach(function(v,x){_.isNumber(v.x)||(v.x=Math.random()*t.width),_.isNumber(v.y)||(v.y=Math.random()*t.height),m[v.id]=v,d[v.id]=x}),t.nodeMap=m,t.nodeIdxMap=d,a(e)}}function a(e){var t=e.opts,s=e.data.nodes,h=e.data.edges,m=t.maxIteration;!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var d=t.center,v=t.width/10,x=Math.sqrt(t.width*t.height/(s.length+1)),N=t.gravity,F=t.speed,ae=t.clustering,$={};if(ae){s.forEach(function(he){if($[he.cluster]===void 0){var z={name:he.cluster,cx:0,cy:0,count:0};$[he.cluster]=z}var ee=$[he.cluster];_.isNumber(he.x)&&(ee.cx+=he.x),_.isNumber(he.y)&&(ee.cy+=he.y),ee.count++});for(var te in $)$[te].cx/=$[te].count,$[te].cy/=$[te].count}for(var fe=function(){var z=[];if(s.forEach(function(q,M){z[M]={x:0,y:0}}),o(s,h,z,x,t),ae){var ee=t.clusterGravity||N;s.forEach(function(q,M){if(!(!_.isNumber(q.x)||!_.isNumber(q.y))){var I=$[q.cluster],j=Math.sqrt((q.x-I.cx)*(q.x-I.cx)+(q.y-I.cy)*(q.y-I.cy)),ue=x*ee;z[M].x-=ue*(q.x-I.cx)/j,z[M].y-=ue*(q.y-I.cy)/j}});for(var pe in $)$[pe].cx=0,$[pe].cy=0,$[pe].count=0;s.forEach(function(q){var M=$[q.cluster];_.isNumber(q.x)&&(M.cx+=q.x),_.isNumber(q.y)&&(M.cy+=q.y),M.count++});for(var S in $)$[S].cx/=$[S].count,$[S].cy/=$[S].count}s.forEach(function(q,M){if(!(!_.isNumber(q.x)||!_.isNumber(q.y))){var I=.01*x*N;z[M].x-=I*(q.x-d[0]),z[M].y-=I*(q.y-d[1])}}),s.forEach(function(q,M){if(!(!_.isNumber(q.x)||!_.isNumber(q.y))){var I=Math.sqrt(z[M].x*z[M].x+z[M].y*z[M].y);if(I>0){var j=Math.min(v*(F/b),I);q.x+=z[M].x/I*j,q.y+=z[M].y/I*j}}})},B=0;B<m;B++)fe()}function o(e,t,s,h,m){l(e,s,h),r(t,s,h,m)}function l(e,t,s){e.forEach(function(h,m){t[m]={x:0,y:0},e.forEach(function(d,v){if(m!==v&&!(!_.isNumber(h.x)||!_.isNumber(d.x)||!_.isNumber(h.y)||!_.isNumber(d.y))){var x=h.x-d.x,N=h.y-d.y,F=x*x+N*N;if(F===0){F=1;var ae=m>v?1:-1;x=.01*ae,N=.01*ae}var $=s*s/F;t[m].x+=x*$,t[m].y+=N*$}})})}function r(e,t,s,h){e.forEach(function(m){if(!(!m.source||!m.target)){var d=h.nodeIdxMap[m.source],v=h.nodeIdxMap[m.target];if(d!==v){var x=h.nodeMap[m.source],N=h.nodeMap[m.target];if(!(!_.isNumber(N.x)||!_.isNumber(x.x)||!_.isNumber(N.y)||!_.isNumber(x.y))){var F=N.x-x.x,ae=N.y-x.y,$=Math.sqrt(F*F+ae*ae),te=$*$/s;t[v].x-=F/$*te,t[v].y-=ae/$*te,t[d].x+=F/$*te,t[d].y+=ae/$*te}}}})}T.exports=u},7287:function(T){"use strict";function b(e){var t=e.opts,s=e.data.nodes,h=s.length,m=t.center;if(h!==0){if(h===1){s[0].x=m[0],s[0].y=m[1],s[0].left=m[0],s[0].top=m[1];return}var d=e.data.edges,v=[];s.forEach(function(he){v.push(he)});var x={};if(v.forEach(function(he,z){x[he.id]=z}),(t.sortBy==="degree"||typeof t.sortBy=="string"||v[0][t.sortBy]===void 0)&&(t.sortBy="degree",isNaN(s[0].degree))){var N=u(v.length,x,d);v.forEach(function(he,z){he.degree=N[z]})}v.sort(function(he,z){return z[t.sortBy]-he[t.sortBy]}),!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight);var F=t.rows,ae=t.cols!=null?t.cols:t.columns;t.cells=h,F!=null&&ae!=null?(t.rows=F,t.cols=ae):F!=null&&ae==null?(t.rows=F,t.cols=Math.ceil(t.cells/t.rows)):F==null&&ae!=null?(t.cols=ae,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&v.forEach(function(he){(!he.x||!he.y)&&(he.x=0,he.y=0);var z,ee;typeof he.size=="number"&&(z=he.size,ee=he.size),(z===void 0||ee===void 0)&&(typeof he.nodeSize=="number"?(z=t.nodeSize,ee=t.nodeSize):(z=30,ee=30));var pe=t.preventOverlapPadding,S=z+pe,q=ee+pe;t.cellWidth=Math.max(t.cellWidth,S),t.cellHeight=Math.max(t.cellHeight,q)}),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var $=0;$<v.length;$++){var te=v[$],fe=void 0;if(t.position&&(fe=t.position(te)),fe&&(fe.row!==void 0||fe.col!==void 0)){var B={row:fe.row,col:fe.col};if(B.col===void 0)for(B.col=0;o(B.row,B.col,t);)B.col++;else if(B.row===void 0)for(B.row=0;o(B.row,B.col,t);)B.row++;t.id2manPos[te.id]=B,a(B.row,B.col)}r(te,t)}}}function u(e,t,s){for(var h=[],m=0;m<e;m++)h[m]=0;return s.forEach(function(d){d.source&&(h[t[d.source]]+=1),d.target&&(h[t[d.target]]+=1)}),h}function a(e,t,s){s.cellUsed["c-".concat(e,"-").concat(t)]=!0}function o(e,t,s){return s.cellUsed["c-".concat(e,"-").concat(t)]||!1}function l(e){var t=e,s=t.cols||5;t.col++,t.col>=s&&(t.col=0,t.row++)}function r(e,t){var s=t,h=s.begin,m=s.width,d=s.height,v,x,N=s.id2manPos[e.id];if(N)v=N.col*m+m/2+h[0],x=N.row*d+d/2+h[1];else{for(;o(s.row,s.col,s);)l(t);v=s.col*m+m/2+h[0],x=s.row*d+d/2+h[1],a(s.row,s.col,s),l(t)}e.x=v,e.y=x,e.left=v,e.top=x}T.exports=b},4047:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(8570);function o(l){for(var r=[l],e=[];r.length>0;){var t=r.pop(),s=t.data;s.left=t.x,s.top=t.y,s.treePos={hgap:t.hgap,vgap:t.vgap,x:t.x,y:t.y,depth:t.depth,side:t.side},e.push(s),r=r.concat(t.children)}return e[0]}b.default={compactBox:function(r,e){return o(a.compactBox(r,e))},dendrogram:function(r,e){return o(a.dendrogram(r,e))},indented:function(r,e){return o(a.indented(r,e))},mindmap:function(r,e){return o(a.mindmap(r,e))}}},9962:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(408),o=B(a),l=u(8783),r=B(l),e=u(7287),t=B(e),s=u(6457),h=B(s),m=u(1802),d=B(m),v=u(9097),x=B(v),N=u(9006),F=B(N),ae=u(4090),$=B(ae),te=u(4047),fe=B(te);function B(pe){return pe&&pe.__esModule?pe:{default:pe}}var he=u(897),z=u(9392);function ee(pe){for(var S=pe.opts,q=z.cloneDeep(pe.data),M=he.forceSimulation(q.nodes).force("charge",he.forceManyBody().strength(S.chargeStrength)).force("center",he.forceCenter(S.width/2,S.height/2)).force("link",he.forceLink(q.edges).distance(S.link.distance).strength(S.link.strength)).force("x",he.forceX()).force("y",he.forceY()).stop(),I=0,j=Math.ceil(Math.log(M.alphaMin())/Math.log(1-M.alphaDecay()));I<j;++I)M.tick();pe.data.nodes.forEach(function(ue,se){ue.top=q.nodes[se].y,ue.left=q.nodes[se].x})}b.default={forceLayout:h.default,forceTreeLayout:ee,treeLayout:fe.default,dagreLayout:x.default,concentLayout:d.default,gridLayout:t.default,fruchterman:r.default,circleLayout:o.default.circleLayout,radial:F.default,dagreGroupLayout:$.default.dagreGroupLayout}},1997:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getDegree=b.rotate=b.scale=b.move=b.translate=b.getAdjMatrix=b.floydWarshall=b.scaleMatrix=b.distance=b.getCircleCenterByPoints=b.invertMatrix=b.applyMatrix=b.getEllipseIntersectByPoint=b.getCircleIntersectByPoint=b.getRectIntersectByPoint=void 0;var a=u(6928),o=function(he,z,ee){return he>=z&&he<=ee},l=function(he,z,ee,pe){var S=.001,q={x:ee.x-he.x,y:ee.y-he.y},M={x:z.x-he.x,y:z.y-he.y},I={x:pe.x-ee.x,y:pe.y-ee.y},j=M.x*I.y-M.y*I.x,ue=j*j,se=M.x*M.x+M.y*M.y,Ee=I.x*I.x+I.y*I.y,Ce=null;if(ue>S*se*Ee){var xe=(q.x*I.y-q.y*I.x)/j,Oe=(q.x*M.y-q.y*M.x)/j;o(xe,0,1)&&o(Oe,0,1)&&(Ce={x:he.x+xe*M.x,y:he.y+xe*M.y})}return Ce},r=b.getRectIntersectByPoint=function(he,z){var ee=he.x,pe=he.y,S=he.width,q=he.height,M=ee+S/2,I=pe+q/2,j=[],ue={x:M,y:I};j.push({x:ee,y:pe}),j.push({x:ee+S,y:pe}),j.push({x:ee+S,y:pe+q}),j.push({x:ee,y:pe+q}),j.push({x:ee,y:pe});for(var se=null,Ee=1;Ee<j.length&&(se=l(j[Ee-1],j[Ee],ue,z),!se);Ee++);return se},e=b.getCircleIntersectByPoint=function(he,z){var ee=he.x,pe=he.y,S=he.r,q=z.x,M=z.y,I=q-ee,j=M-pe,ue=Math.sqrt(I*I+j*j);if(ue<S)return null;var se=Math.sign(I),Ee=Math.sign(j),Ce=Math.atan(j/I);return{x:ee+Math.abs(S*Math.cos(Ce))*se,y:pe+Math.abs(S*Math.sin(Ce))*Ee}},t=b.getEllipseIntersectByPoint=function(he,z){var ee=he.rx,pe=he.ry,S=he.x,q=he.y,M=z.x-S,I=z.y-q,j=Math.atan2(I/pe,M/ee);return j<0&&(j+=2*Math.PI),{x:S+ee*Math.cos(j),y:q+pe*Math.sin(j)}},s=b.applyMatrix=function(he,z,ee){var pe=[he.x,he.y,ee];return(!z||z[0]===NaN)&&(z=a.mat3.create()),a.vec3.transformMat3(pe,pe,z),{x:pe[0],y:pe[1]}},h=b.invertMatrix=function(he,z,ee){(!z||z[0]===NaN)&&(z=a.mat3.create());var pe=a.mat3.invert([],z);pe||(pe=a.mat3.create());var S=[he.x,he.y,ee];return a.vec3.transformMat3(S,S,pe),{x:S[0],y:S[1]}},m=b.getCircleCenterByPoints=function(he,z,ee){var pe=he.x-z.x,S=he.y-z.y,q=he.x-ee.x,M=he.y-ee.y,I=(he.x*he.x-z.x*z.x-z.y*z.y+he.y*he.y)/2,j=(he.x*he.x-ee.x*ee.x-ee.y*ee.y+he.y*he.y)/2,ue=S*q-pe*M;return{x:-(M*I-S*j)/ue,y:-(pe*j-q*I)/ue}},d=b.distance=function(he,z){var ee=he.x-z.x,pe=he.y-z.y;return Math.sqrt(ee*ee+pe*pe)},v=b.scaleMatrix=function(he,z){var ee=[];return he.forEach(function(pe){var S=[];pe.forEach(function(q){S.push(q*z)}),ee.push(S)}),ee},x=b.floydWarshall=function(he){for(var z=[],ee=he.length,pe=0;pe<ee;pe+=1){z[pe]=[];for(var S=0;S<ee;S+=1)pe===S?z[pe][S]=0:he[pe][S]===0||!he[pe][S]?z[pe][S]=1/0:z[pe][S]=he[pe][S]}for(var q=0;q<ee;q+=1)for(var M=0;M<ee;M+=1)for(var I=0;I<ee;I+=1)z[M][I]>z[M][q]+z[q][I]&&(z[M][I]=z[M][q]+z[q][I]);return z},N=b.getAdjMatrix=function(he,z){var ee=he.nodes,pe=he.edges,S=[],q={};if(!ee)throw new Error("invalid nodes data!");return ee&&ee.forEach(function(M,I){q[M.id]=I;var j=[];S.push(j)}),pe&&pe.forEach(function(M){var I=M.source,j=M.target,ue=q[I],se=q[j];S[ue][se]=1,z||(S[se][ue]=1)}),S},F=b.translate=function(he,z){he.translate(z.x,z.y)},ae=b.move=function(he,z){var ee=he.getMatrix();ee||(ee=a.mat3.create());var pe=he.getCanvasBBox(),S=z.x-pe.minX,q=z.y-pe.minY,M=(0,a.transform)(ee,[["t",S,q]]);he.setMatrix(M)},$=b.scale=function(he,z){var ee=he.getMatrix();ee||(ee=a.mat3.create());var pe=z;isArray(z)||(pe=[z,z]),isArray(z)&&z.length===1&&(pe=[z[0],z[0]]),ee=(0,a.transform)(ee,[["s",pe[0],pe[1]]]),he.setMatrix(ee)},te=b.rotate=function(he,z){var ee=he.getMatrix();ee||(ee=a.mat3.create()),ee=(0,a.transform)(ee,[["r",z]]),he.setMatrix(ee)},fe=b.getDegree=function(he,z,ee){for(var pe=[],S=0;S<he;S++)pe[S]=0;return ee.forEach(function(q){q.source&&(pe[z[q.source]]+=1),q.target&&(pe[z[q.target]]+=1)}),pe}},7839:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var a=u(2019);function o(m){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},o(m)}function l(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function r(m,d){for(var v=0;v<d.length;v++){var x=d[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,t(x.key),x)}}function e(m,d,v){return d&&r(m.prototype,d),v&&r(m,v),Object.defineProperty(m,"prototype",{writable:!1}),m}function t(m){var d=s(m,"string");return o(d)=="symbol"?d:String(d)}function s(m,d){if(o(m)!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var x=v.call(m,d||"default");if(o(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(m)}var h=function(){function m(d){l(this,m),this.distances=d.distances,this.dimension=d.dimension||2,this.linkDistance=d.linkDistance}return e(m,[{key:"layout",value:function(){var v=this,x=v.dimension,N=v.distances,F=v.linkDistance;try{var ae=a.Matrix.mul(a.Matrix.pow(N,2),-.5),$=ae.mean("row"),te=ae.mean("column"),fe=ae.mean();ae.add(fe).subRowVector($).subColumnVector(te);var B=new a.SingularValueDecomposition(ae),he=a.Matrix.sqrt(B.diagonalMatrix).diagonal();return B.leftSingularVectors.toJSON().map(function(q){return a.Matrix.mul([q],[he]).toJSON()[0].splice(0,x)})}catch(q){for(var z=[],ee=0;ee<N.length;ee++){var pe=Math.random()*F,S=Math.random()*F;z.push([pe,S])}return z}}}]),m}();b.default=h},9006:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(7839),o=t(a),l=u(4886),r=t(l),e=u(1997);function t(ee){return ee&&ee.__esModule?ee:{default:ee}}function s(ee){return v(ee)||d(ee)||m(ee)||h()}function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(ee,pe){if(ee){if(typeof ee=="string")return x(ee,pe);var S=Object.prototype.toString.call(ee).slice(8,-1);if(S==="Object"&&ee.constructor&&(S=ee.constructor.name),S==="Map"||S==="Set")return Array.from(ee);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return x(ee,pe)}}function d(ee){if(typeof Symbol!="undefined"&&ee[Symbol.iterator]!=null||ee["@@iterator"]!=null)return Array.from(ee)}function v(ee){if(Array.isArray(ee))return x(ee)}function x(ee,pe){(pe==null||pe>ee.length)&&(pe=ee.length);for(var S=0,q=new Array(pe);S<pe;S++)q[S]=ee[S];return q}function N(ee){for(var pe=ee.length,S=ee[0].length,q=[],M=0;M<pe;M++){for(var I=[],j=0;j<S;j++)ee[M][j]!==0?I.push(1/(ee[M][j]*ee[M][j])):I.push(0);q.push(I)}return q}function F(ee,pe){var S=-1;return ee.forEach(function(q,M){q.id===pe&&(S=M)}),S}function ae(ee,pe){return Math.sqrt((ee[0]-pe[0])*(ee[0]-pe[0])+(ee[1]-pe[1])*(ee[1]-pe[1]))}function $(ee){var pe=ee.opts,S=ee.data.nodes,q=ee.data.edges||[],M=pe.center;if(!(!S||S.length===0)){if(S.length===1){S[0].x=S[0].left=M[0],S[0].y=S[0].top=M[1];return}var I=pe.linkDistance,j=null;if(String(pe.focusNode)){for(var ue=!1,se=0;se<S.length;se++)S[se].id===pe.focusNode&&(j=S[se],pe.focusNode=j,ue=!0,se=S.length);ue||(j=null)}else j=pe.focusNode;j||(j=S[0],pe.focusNode=j);var Ee=F(S,j.id);pe.focusIndex=Ee;var Ce=(0,e.getAdjMatrix)({nodes:S,edges:q},!1),xe=(0,e.floydWarshall)(Ce),Oe=z(xe,Ee);he(xe,Ee,Oe+1),pe.distances=xe;var Le=xe[Ee];!pe.width&&typeof window!="undefined"&&(pe.width=window.innerWidth),!pe.height&&typeof window!="undefined"&&(pe.height=window.innerHeight);var Ge=pe.width||500,He=pe.height||500,Et=Ge-M[0]>M[0]?M[0]:Ge-M[0],Ct=He-M[1]>M[1]?M[1]:He-M[1];Et===0&&(Et=Ge/2),Ct===0&&(Ct=He/2);var Gt=Ct>Et?Et:Ct,At=Math.max.apply(Math,s(Le)),vt=[];Le.forEach(function(zn,$e){pe.unitRadius||(pe.unitRadius=Gt/At),vt[$e]=zn*pe.unitRadius}),pe.radii=vt;var cn=B(ee);pe.eIdealDistances=cn;var hn=N(cn);pe.weights=hn;var Bn=new o.default({distances:cn,linkDistance:I}),Fn=Bn.layout();Fn.forEach(function(zn){isNaN(zn[0])&&(zn[0]=Math.random()*I),isNaN(zn[1])&&(zn[1]=Math.random()*I)}),pe.positions=Fn,Fn.forEach(function(zn,$e){S[$e].x=S[$e].left=zn[0]+M[0],S[$e].y=S[$e].top=zn[1]+M[1]}),Fn.forEach(function(zn){zn[0]-=Fn[Ee][0],zn[1]-=Fn[Ee][1]}),te(ee);var ir=pe.preventOverlap,Nr=pe.nodeSize,Ei,ci=pe.strictRadial;if(ir){var Ot=pe.nodeSpacing,fr;_.isNumber(Ot)?fr=function(){return Ot}:_.isFunction(Ot)?fr=Ot:fr=function(){return 0},Nr?_.isArray(Nr)?Ei=function($e){var Xt=Nr[0]>Nr[1]?Nr[0]:Nr[1];return Xt+fr($e)}:Ei=function($e){return Nr+fr($e)}:Ei=function($e){if($e.size){if(_.isArray($e.size)){var Xt=$e.size[0]>$e.size[1]?$e.size[0]:$e.size[1];return Xt+fr($e)}return $e.size+fr($e)}return 10+fr($e)};var Pi={nodeSizeFunc:Ei,adjMatrix:Ce,positions:Fn,radii:vt,height:He,width:Ge,strictRadial:ci,focusID:Ee,iterations:pe.maxPreventOverlapIteration||200,k:Fn.length/4.5,nodes:S},Li=new r.default(Pi);Fn=Li.layout()}Fn.forEach(function(zn,$e){S[$e].x=S[$e].left=zn[0]+M[0],S[$e].y=S[$e].top=zn[1]+M[1]})}}function te(ee){for(var pe=ee.opts,S=pe.maxIteration,q=pe.positions||[],M=pe.weights||[],I=pe.eIdealDistances||[],j=pe.radii||[],ue=0;ue<=S;ue++){var se=ue/S;fe(se,q,j,I,M,ee)}}function fe(ee,pe,S,q,M,I){var j=I.opts,ue=1-ee,se=j.focusIndex;pe.forEach(function(Ee,Ce){var xe=ae(Ee,[0,0]),Oe=xe===0?0:1/xe;if(Ce!==se){var Le=0,Ge=0,He=0;pe.forEach(function(Ct,Gt){if(Ce!==Gt){var At=ae(Ee,Ct),vt=At===0?0:1/At,cn=q[Gt][Ce];He+=M[Ce][Gt],Le+=M[Ce][Gt]*(Ct[0]+cn*(Ee[0]-Ct[0])*vt),Ge+=M[Ce][Gt]*(Ct[1]+cn*(Ee[1]-Ct[1])*vt)}});var Et=S[Ce]===0?0:1/S[Ce];He*=ue,He+=ee*Et*Et,Le*=ue,Le+=ee*Et*Ee[0]*Oe,Ee[0]=Le/He,Ge*=ue,Ge+=ee*Et*Ee[1]*Oe,Ee[1]=Ge/He}})}function B(ee){var pe=ee.opts,S=ee.data.nodes;if(!S)return[];var q=pe.distances,M=pe.linkDistance,I=pe.radii||[],j=pe.unitRadius||50,ue=[];return q&&q.forEach(function(se,Ee){var Ce=[];se.forEach(function(xe,Oe){if(Ee===Oe)Ce.push(0);else if(I[Ee]===I[Oe])if(pe.sortBy==="data")Ce.push(xe*(Math.abs(Ee-Oe)*pe.sortStrength)/(I[Ee]/j));else if(pe.sortBy){var Le=S[Ee][pe.sortBy]||0,Ge=S[Oe][pe.sortBy]||0;isString(Le)&&(Le=Le.charCodeAt(0)),isString(Ge)&&(Ge=Ge.charCodeAt(0)),Ce.push(xe*(Math.abs(Le-Ge)*pe.sortStrength)/(I[Ee]/j))}else Ce.push(xe*M/(I[Ee]/j));else{var He=(M+j)/2;Ce.push(xe*He)}}),ue.push(Ce)}),ue}function he(ee,pe,S){for(var q=ee.length,M=0;M<q;M++)if(ee[pe][M]===1/0){ee[pe][M]=S,ee[M][pe]=S;for(var I=0;I<q;I++)ee[M][I]!==1/0&&ee[pe][I]===1/0&&(ee[pe][I]=S+ee[M][I],ee[I][pe]=S+ee[M][I])}for(var j=0;j<q;j++)if(j!==pe){for(var ue=0;ue<q;ue++)if(ee[j][ue]===1/0){var se=Math.abs(ee[pe][j]-ee[pe][ue]);se=se===0?1:se,ee[j][ue]=se}}}function z(ee,pe){for(var S=0,q=0;q<ee[pe].length;q++)ee[pe][q]!==1/0&&(S=ee[pe][q]>S?ee[pe][q]:S);return S}b.default=$},4886:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function u(h){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},u(h)}function a(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}function o(h,m){for(var d=0;d<m.length;d++){var v=m[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(h,r(v.key),v)}}function l(h,m,d){return m&&o(h.prototype,m),d&&o(h,d),Object.defineProperty(h,"prototype",{writable:!1}),h}function r(h){var m=e(h,"string");return u(m)=="symbol"?m:String(m)}function e(h,m){if(u(h)!="object"||!h)return h;var d=h[Symbol.toPrimitive];if(d!==void 0){var v=d.call(h,m||"default");if(u(v)!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(h)}var t=800,s=function(){function h(m){a(this,h),this.positions=m.positions,this.adjMatrix=m.adjMatrix,this.focusID=m.focusID,this.radii=m.radii,this.iterations=m.iterations||10,this.height=m.height||10,this.width=m.width||10,this.speed=m.speed||100,this.gravity=m.gravity||10,this.nodeSizeFunc=m.nodeSizeFunc,this.k=m.k||5,this.strictRadial=m.strictRadial,this.nodes=m.nodes}return l(h,[{key:"layout",value:function(){var d=this,v=d.positions,x=[],N=d.iterations,F=d.width/10;d.maxDisplace=F,d.disp=x;for(var ae=0;ae<N;ae++)v.forEach(function($,te){x[te]={x:0,y:0}}),d.getRepulsion(),d.updatePositions();return v}},{key:"getRepulsion",value:function(){var d=this,v=d.positions,x=d.nodes,N=d.disp,F=d.k,ae=d.radii||[];v.forEach(function($,te){N[te]={x:0,y:0},v.forEach(function(fe,B){if(te!==B&&ae[te]===ae[B]){var he=$[0]-fe[0],z=$[1]-fe[1],ee=Math.sqrt(he*he+z*z);if(ee===0){ee=1;var pe=te>B?1:-1;he=.01*pe,z=.01*pe}if(ee<d.nodeSizeFunc(x[te])/2+d.nodeSizeFunc(x[B])/2){var S=F*F/ee;N[te].x+=he/ee*S,N[te].y+=z/ee*S}}})})}},{key:"updatePositions",value:function(){var d=this,v=d.positions,x=d.disp,N=d.speed,F=d.strictRadial,ae=d.focusID,$=d.maxDisplace||d.width/10;F&&x.forEach(function(fe,B){var he=v[B][0]-v[ae][0],z=v[B][1]-v[ae][1],ee=Math.sqrt(he*he+z*z),pe=z/ee,S=-he/ee,q=Math.sqrt(fe.x*fe.x+fe.y*fe.y),M=Math.acos((pe*fe.x+S*fe.y)/q);M>Math.PI/2&&(M-=Math.PI/2,pe*=-1,S*=-1);var I=Math.cos(M)*q;fe.x=pe*I,fe.y=S*I});var te=d.radii;v.forEach(function(fe,B){if(B!==ae){var he=Math.sqrt(x[B].x*x[B].x+x[B].y*x[B].y);if(he>0&&B!==ae){var z=Math.min($*(N/t),he);if(fe[0]+=x[B].x/he*z,fe[1]+=x[B].y/he*z,F){var ee=fe[0]-v[ae][0],pe=fe[1]-v[ae][1],S=Math.sqrt(ee*ee+pe*pe);ee=ee/S*te[B],pe=pe/S*te[B],fe[0]=v[ae][0]+ee,fe[1]=v[ae][1]+pe}}}})}}]),h}();b.default=s},6369:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BOTTOM=b.TOP=b.RIGHT=b.LEFT=b.Point=b.DEFAULT_RADIUS=void 0,b._route=F,b._calcOrientation=ae,b._findControlPoint=$,b._findSecondControlPoint=te,b._findManhattanPoint=fe;var a=u(9392),o=l(a);function l(B){return B&&B.__esModule?B:{default:B}}var r=20,e=.1,t=.01,s=20,h=b.DEFAULT_RADIUS=15,m=b.Point=function(he,z){this.x=he,this.y=z},d=b.LEFT="Left",v=b.RIGHT="Right",x=b.TOP="Top",N=b.BOTTOM="Bottom";function F(B,he,z,ee,pe){he.x=he.x||0,he.y=he.y||0,ee.x=ee.x||0,ee.y=ee.y||0;var S=he.x-ee.x,q=he.y-ee.y,M,I,j;if(B.push(new m(he.x,he.y)),S*S<t&&q*q<t){B.push(new m(ee.x,ee.y));return}z===d?S>0&&q*q<e&&pe===v?(M=ee,I=pe):(S<0?M=new m(he.x-r,he.y):q>0&&pe===N||q<0&&pe===x?M=new m(ee.x,he.y):z===pe?(j=Math.min(he.x,ee.x)-r,M=new m(j,he.y)):M=new m(he.x-S/2,he.y),q>0?I=x:I=N):z===v?S<0&&q*q<e&&pe===d?(M=ee,I=pe):(S>0?M=new m(he.x+r,he.y):q>0&&pe===N||q<0&&pe===x?M=new m(ee.x,he.y):z===pe?(j=Math.max(he.x,ee.x)+r,M=new m(j,he.y)):M=new m(he.x-S/2,he.y),q>0?I=x:I=N):z===N?S*S<e&&q<0&&pe===x?(M=ee,I=pe):(q>0?M=new m(he.x,he.y+r):S>0&&pe===v||S<0&&pe===d?M=new m(he.x,ee.y):z===pe?(j=Math.max(he.y,ee.y)+r,M=new m(he.x,j)):M={x:he.x,y:he.y-q/2},S>0?I=d:I=v):z===x&&(S*S<e&&q>0&&pe===N?(M=ee,I=pe):(q<0?M=new m(he.x,he.y-r):S>0&&pe===v||S<0&&pe===d?M=new m(he.x,ee.y):z===pe?(j=Math.min(he.y,ee.y)-r,M=new m(he.x,j)):M={x:he.x,y:he.y-q/2},S>0?I=d:I=v)),F(B,M,I,ee,pe)}function ae(B,he,z,ee,pe){var S=function(se){if(pe){for(var Ee=function(Le){var Ge=o.default.some(pe,function(He){return He===se[Le]});if(Ge)return{v:se[Le]}},Ce,xe=0;xe<se.length;xe++)if(Ce=Ee(xe),Ce)return Ce.v;return se[0]}else return se[0]},q=z-B,M=ee-he,I=null,j=Math.abs(M/q);switch(q===0||M===0?(q===0&&(I=M>=0?S(["Top","Left","Right","Bottom"]):I,I=M<0?S(["Bottom","Left","Right","Top"]):I),M===0&&(I=q>=0?S(["Right","Top","Bottom","Left"]):I,I=q<0?S(["Left","Top","Bottom","Right"]):I)):q>0&&M>0?j>1?I=S(["Top","Left","Right","Bottom"]):I=S(["Left","Top","Bottom","Right"]):q<0&&M>0?j>1?I=S(["Top","Right","Left","Bottom"]):I=S(["Right","Top","Bottom","Left"]):q<0&&M<0?j>1?I=S(["Bottom","Right","Left","Top"]):I=S(["Right","Bottom","Top","Left"]):j>1?I=S(["Bottom","Left","Right","Top"]):I=S(["Left","Bottom","Top","Right"]),I){case"Left":return[-1,0];case"Right":return[1,0];case"Top":return[0,-1];case"Bottom":return[0,1]}}function $(B,he,z,ee,pe){var S=10,q=10,M=[];if(he.pos[0]===z.pos[0]&&ee[1]!==pe[1]&&ee[0]===0&&pe[0]===0)return M=[B[0],B[1]+S*ee[1]],M;if(he.pos[1]===z.pos[1]&&ee[0]!==pe[0]&&ee[1]===0&&pe[1]===0)return M=[B[0]+S*ee[0],B[1]],M;var I=ee[0]!==pe[0]||ee[1]===pe[1];return I?(pe[0]===0?M.push(z.pos[0]<he.pos[0]?B[0]+q:B[0]-q):M.push(B[0]+S*pe[0]),pe[1]===0?M.push(z.pos[1]<he.pos[1]?B[1]+q:B[1]-q):M.push(B[1]+S*ee[1])):(ee[0]===0?M.push(he.pos[0]<z.pos[0]?B[0]+q:B[0]-q):M.push(B[0]-S*ee[0]),ee[1]===0?M.push(he.pos[1]<z.pos[1]?B[1]+q:B[1]-q):M.push(B[1]-S*pe[1])),M}function te(B,he,z,ee,pe){var S=(B.pos[0]+he.pos[0])/2,q=(B.pos[1]+he.pos[1])/2,M=S-(S-B.pos[0])/2,I=q-(q-B.pos[1])/2,j=S+(S-B.pos[0])/2,ue=q+(q-B.pos[1])/2,se=S,Ee=q;pe==="Bezier2-1"?(se=S,Ee=q):pe==="Bezier2-2"?(se=M,Ee=I):pe==="Bezier2-3"&&(se=j,Ee=ue);var Ce,xe,Oe=Math.abs(B.pos[0]-B.pos[0]),Le=Math.abs(B.pos[1]-he.pos[1]),Ge=Math.sqrt(Oe*Oe+Le*Le),He=(he.pos[1]-B.pos[1])/(he.pos[0]-B.pos[0]);if(He===0&&(B.pos[0]<he.pos[0]&&z[0]===1&&ee[0]===-1||B.pos[0]>he.pos[0]&&z[0]===-1&&ee[0]===1||B.pos[1]<he.pos[1]&&z[1]===1&&ee[1]===-1||B.pos[1]>he.pos[1]&&z[1]===-1&&ee[1]===1))return Ce=[S,q];var Et=-1/He,Ct=Ee-Et*se;xe=Math.sqrt(3)*Ge/6;var Gt,At=z[0]+ee[0],vt=z[1]+ee[1];he.pos[0]<B.pos[0]&&he.pos[1]<B.pos[1]&&(At===0&&vt===0||At===1&&vt===-1)||he.pos[0]>B.pos[0]&&he.pos[1]<B.pos[1]&&At===1&&vt===1||he.pos[0]<B.pos[0]&&he.pos[1]>B.pos[1]&&(At===0&&vt===0||At===1&&vt===1)||he.pos[0]>B.pos[0]&&he.pos[1]>B.pos[1]&&At===1&&vt===-1?Gt=1:Gt=-1,Ce=[se+xe*Gt,Et*(se+xe*Gt)+Ct];var cn=.25,hn=100;xe=Ge*cn+hn;var Bn=0,Fn=0,ir=0,Nr=0;return z[0]===-1&&he.pos[0]>B.pos[0]||z[0]===1&&he.pos[0]<B.pos[0]||z[1]===1&&he.pos[1]<B.pos[1]||z[1]===-1&&he.pos[1]>B.pos[1]?(z[0]!==0&&(Bn=xe*z[0]),z[1]!==0&&(Fn=xe*z[1]),Ce=[B.pos[0]+Bn,B.pos[1]+Fn]):((z[0]===ee[0]&&z[1]===ee[1]||z[0]!==0&&he.pos[1]<B.pos[1]&&ee[1]===-1||z[0]!==0&&he.pos[1]>B.pos[1]&&ee[1]===1||z[1]!==0&&he.pos[0]<B.pos[0]&&ee[0]===-1||z[1]!==0&&he.pos[0]>B.pos[0]&&ee[0]===1)&&(ee[0]!==0?ir=xe*ee[0]:ee[1]!==0&&(Nr=xe*ee[1]),Ce=[he.pos[0]+ir,he.pos[1]+Nr]),Ce)}function fe(B,he){for(var z=void 0,ee=1/0,pe=0;pe<B.length-1;pe++){var S=B[pe].x===B[pe+1].x?"vertical":"horizontal",q=B[pe],M=B[pe+1];S==="vertical"?ee>Math.abs(he.x-q.x)&&(ee=Math.abs(he.x-q.x),z={from:q,to:M,direction:S,index:pe}):ee>Math.abs(he.y-q.y)&&(ee=Math.abs(he.y-q.y),z={from:q,to:M,direction:S,index:pe})}return z}},6471:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(6369),o=function(r,e){r.orientation||(r.orientation=(0,a._calcOrientation)(e.pos[0],e.pos[1],r.pos[0],r.pos[1])),e.orientation||(e.orientation=(0,a._calcOrientation)(r.pos[0],r.pos[1],e.pos[0],e.pos[1]));var t=Math.abs(r.pos[0]-e.pos[0]),s=Math.abs(r.pos[1]-e.pos[1]),h=r.orientation,m=e.orientation,d=Math.sqrt(t*t+s*s),v=.25,x=30,N=0,F=0;h[0]!==0?N=(d*v+x)*h[0]:h[1]!==0&&(F=(d*v+x)*h[1]);var ae=0,$=0;m[0]!==0?ae=(d*v+x)*m[0]:m[1]!==0&&($=(d*v+x)*m[1]);var te=[r.pos[0]+N,r.pos[1]+F],fe=[e.pos[0]+ae,e.pos[1]+$],B=["M",r.pos[0],r.pos[1]];return B=B.concat(["C",te[0],te[1]],fe[0],fe[1]),B=B.concat([e.pos[0],e.pos[1]]),B.join(" ")};b.default=o},8476:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(6369);function o(l,r){l.orientation||(l.orientation=(0,a._calcOrientation)(r.pos[0],r.pos[1],l.pos[0],l.pos[1])),r.orientation||(r.orientation=(0,a._calcOrientation)(l.pos[0],l.pos[1],r.pos[0],r.pos[1]));var e=Math.abs(l.pos[0]-r.pos[0]),t=Math.abs(l.pos[1]-r.pos[1]),s=l.pos[0]<r.pos[0]?e:0,h=l.pos[1]<r.pos[1]?t:0,m=l.pos[0]<r.pos[0]?0:e,d=l.pos[1]<r.pos[1]?0:t,v=l.orientation,x=r.orientation,N=(0,a._findControlPoint)([s,h],l,r,v,x),F=(0,a._findControlPoint)([m,d],r,l,x,v),ae=l.pos[0]<r.pos[0]?l.pos[0]:r.pos[0],$=l.pos[1]<r.pos[1]?l.pos[1]:r.pos[1];N=[N[0]+ae,N[1]+$],F=[F[0]+ae,F[1]+$];var te=["M",l.pos[0],l.pos[1]];return te=te.concat(["C",F[0],F[1],N[0],N[1]]),te=te.concat([r.pos[0],r.pos[1]]),te.join(" ")}b.default=o},7221:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(6369),o=function(r,e){r.orientation||(r.orientation=(0,a._calcOrientation)(e.pos[0],e.pos[1],r.pos[0],r.pos[1])),e.orientation||(e.orientation=(0,a._calcOrientation)(r.pos[0],r.pos[1],e.pos[0],e.pos[1]));var t=r.orientation,s=e.orientation,h=Math.abs(r.pos[0]-e.pos[0]),m=Math.abs(r.pos[1]-e.pos[1]),d=[],v=["M",r.pos[0],r.pos[1]];d=[e.pos[0]+h*.2*s[0],e.pos[1]+m*.2*s[1]],(e.pos[1]===r.pos[1]||e.pos[0]===r.pos[0])&&(d=[]);var x=[];return(t[0]===-1&&e.pos[0]>r.pos[0]||t[0]===1&&e.pos[0]<r.pos[0]||t[1]===1&&e.pos[1]<r.pos[1]||t[1]===-1&&e.pos[1]>r.pos[1])&&(d=[],x=[r.pos[0]+h*.2*t[0],r.pos[1]+m*.2*t[1]],(t[0]*s[0]===-1||t[1]*s[1]===-1)&&(d=[e.pos[0]+h*.2*s[0],e.pos[1]+m*.2*s[1]])),x.length&&(v=t[0]?v.concat(["H",x[0]]):v.concat(["V",x[1]])),d.length&&(v=v.concat(["L",d[0],d[1]])),x.length&&!d.length?v=v.concat(["L",e.pos[0],e.pos[1]]):v=s[0]?v.concat(["H",e.pos[0]]):v.concat(["V",e.pos[1]]),v.join(" ")};b.default=o},3003:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(9392),o=r(a),l=u(6369);function r(s){return s&&s.__esModule?s:{default:s}}function e(s,h){for(var m=null,d=null,v=0,x=1,N=function(Ce){return Math.sqrt(Math.pow(Ce[0]-Ce[2],2)+Math.pow(Ce[1]-Ce[3],2))},F=[],ae=function(Ce){return["M",Ce.x1+h.x,Ce.y1+h.y,"L",Ce.x2+h.x,Ce.y2+h.y]},$=function(Ce){var xe=function(hn,Bn){return Bn[0]>hn[0]||Bn[0]===hn[0]?Bn[1]>hn[1]?2:1:Bn[1]>hn[1]?3:4},Oe=function(hn,Bn){return Bn[0]===hn[0]?Bn[1]>hn[0]?1/0:-1/0:Bn[1]===hn[1]?Bn[0]>hn[0]?0:-0:(Bn[1]-hn[1])/(Bn[0]-hn[0])},Le=function(hn,Bn){var Fn=Oe(hn,Bn),ir=Math.atan(Fn),Nr=xe(hn,Bn);return(Nr===4||Nr===3)&&(ir+=Math.PI),ir<0&&(ir+=2*Math.PI),ir},Ge=function(hn,Bn){return Le([Ce.cx,Ce.cy],[hn,Bn])},He=Ge(x1,y1),Et=Ge(x2,y2),Ct=2*Math.PI;Et<0&&(Et+=Ct),He<0&&(He+=Ct);var Gt=Et<He?Et+Ct:Et,At=Math.abs(Gt-He),vt=Ce.ac;return vt&&(At=Ct-At),["M",Ce.x1+h.x,Ce.y1+h.y,"A",Ce.r,Ce.r,"0",",",Ce.x2+h.x,Ce.y2+h.y]},te=0;te<s.length-1;te++){if(m=m||o.default.cloneDeep(s[te]),d=o.default.cloneDeep(s[te+1]),v>0&&m[4]!==d[4]){var fe=Math.min(v,N(m),N(d));m[2]-=m[5]*fe,m[3]-=m[6]*fe,d[0]+=d[5]*fe,d[1]+=d[6]*fe;var B=m[6]===d[5]&&d[5]===1||m[6]===d[5]&&d[5]===0&&m[5]!==d[6]||m[6]===d[5]&&d[5]===-1,he=d[1]>m[3]?1:-1,z=d[0]>m[2]?1:-1,ee=he===z,pe=ee&&B||!ee&&!B?d[0]:m[2],S=ee&&B||!ee&&!B?m[3]:d[1],q=ae({x1:m[0],y1:m[1],x2:m[2],y2:m[3]}),M=$({r:fe,x1:m[2],y1:m[3],x2:d[0],y2:d[1],cx:pe,cy:S,ac:B});F=F.concat(q),F=F.concat(M)}else{var I=m[2]===m[0]?0:m[2]>m[0]?x/2:-(x/2),j=m[3]===m[1]?0:m[3]>m[1]?x/2:-(x/2),ue=ae({x1:m[0]-I,y1:m[1]-j,x2:m[2]+I,y2:m[3]+j});F=F.concat(ue)}m=d}if(d!==null){var se=ae({x1:d[0],y1:d[1],x2:d[2],y2:d[3]});F=F.concat(se)}return F.join(" ")}function t(s,h,m){s.orientation||(s.orientation=(0,l._calcOrientation)(h.pos[0],h.pos[1],s.pos[0],s.pos[1],m)),h.orientation||(h.orientation=(0,l._calcOrientation)(s.pos[0],s.pos[1],h.pos[0],h.pos[1],m));var d=30,v=.5,x=Math.abs(s.pos[0]-h.pos[0]),N=Math.abs(s.pos[1]-h.pos[1]),F=h.pos[0]<s.pos[0]?x:0,ae=h.pos[1]<s.pos[1]?N:0,$=h.pos[0]<s.pos[0]?0:x,te=h.pos[1]<s.pos[1]?0:N,fe=s.pos[0]<h.pos[0]?s.pos[0]:h.pos[0],B=s.pos[1]<h.pos[1]?s.pos[1]:h.pos[1],he=s.orientation,z=h.orientation,ee=he[0]*z[0]+he[1]*z[1],pe=he[0]===0?"y":"x",S=F+he[0]*d,q=ae+he[1]*d,M=$+z[0]*d,I=te+z[1]*d,j=Math.abs(F-$)>d+d,ue=Math.abs(ae-te)>d+d,se=null;ee===-1?se="opposite":ee===0?se="perpendicular":ee===1&&(se="orthogonal");var Ee=function(){return[S,q,M,I]},Ce={perpendicular:Ee,orthogonal:Ee,opposite:function(fr){var Pi=fr==="x"?0:1,Li={x:function(){return he[Pi]===1&&(S>M&&$>S||F>M&&$>F)||he[Pi]===-1&&(S<M&&$<S||F<M&&$<F)},y:function(){return he[Pi]===1&&(q>I&&te>q||ae>I&&te>ae)||he[Pi]===-1&&(q<I&&te<q||ae<I&&te<ae)}};return Li[fr]()?{x:[(F+$)/2,q,(F+$)/2,I],y:[S,(ae+te)/2,M,(ae+te)/2]}[fr]:[S,q,M,I]}},xe=null,Oe=null,Le=[],Ge=function(fr){return fr<0?-1:fr===0?0:1},He=function(fr,Pi){if(!(xe===fr&&Oe===Pi)){var Li=xe==null?F:xe,zn=Oe==null?ae:Oe,$e=Li===fr?"v":"h",Xt=Ge(fr-Li),Rt=Ge(Pi-zn);xe=fr,Oe=Pi,Le.push([Li,zn,fr,Pi,$e,Xt,Rt])}},Et=Ce[se](pe),Ct=pe==="x"?0:1,Gt=pe==="x"?0:1,At=Et[Ct],vt=Et[Gt],cn=Et[Ct+2],hn=Et[Gt+2];He(Et[0],Et[1]);var Bn=S+(M-S)*v,Fn=q+(I-q)*v,ir={x:[0,1],y:[1,0]},Nr={perpendicular:function(fr){var Pi={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},Li={x:[[S,M],null,[M,S]],y:[[q,I],null,[I,q]]},zn={x:[[Bn,q],[Bn,I]],y:[[S,Fn],[M,Fn]]},$e={x:[[M,q]],y:[[S,I]]},Xt={x:[[S,I],[M,I]],y:[[M,q],[M,I]]},Rt={x:[[S,Fn],[M,Fn],[M,I]],y:[[Bn,q],[Bn,I],[M,I]]},_t={x:[q,I],y:[S,M]},Tt=ir[fr][0],at=ir[fr][1],ce=he[Tt]+1,ut=z[at]+1,Ze=z[at]===-1&&_t[fr][1]<_t[fr][0]||z[at]===1&&_t[fr][1]>_t[fr][0],Wt=Li[fr][ce][0],Ut=Li[fr][ce][1],jt=Pi[fr][ce][ut],xt=function(qn,rr){return rr.pos[0]>qn.pos[0]||rr.pos[0]==qn.pos[0]?rr.pos[1]>qn.pos[1]?2:1:rr.pos[1]>qn.pos[1]?3:4},$t=xt(s,h);if($t===jt[3]||$t===jt[2]&&Ze)return zn[fr];if($t===jt[2]&&Ut<Wt)return $e[fr];if($t===jt[2]&&Ut>=Wt||$t===jt[1]&&!Ze)return Rt[fr];if($t===jt[0]||$t===jt[1]&&Ze)return Xt[fr]},orthogonal:function(fr,Pi,Li,zn,$e){var Xt={x:he[0]===-1?Math.min(Pi,zn):Math.max(Pi,zn),y:he[1]===-1?Math.min(Pi,zn):Math.max(Pi,zn)}[fr];return{x:[[Xt,Li],[Xt,$e],[zn,$e]],y:[[Li,Xt],[$e,Xt],[$e,zn]]}[fr]},opposite:function(fr,Pi,Li,zn){var $e={x:"y",y:"x"}[fr],Xt={x:"height",y:"width"}[fr],Rt=fr==="x"?j:ue;if(!(s.pos[0]===h.pos[0]&&s.pos[1]===h.pos[1])){if(!Rt||he[Ct]===1&&Pi>zn||he[Ct]===-1&&Pi<zn)return{x:[[Pi,Fn],[zn,Fn]],y:[[Bn,Pi],[Bn,zn]]}[fr];if(he[Ct]===1&&Pi<zn||he[Ct]===-1&&Pi>zn)return{x:[[Bn,ae],[Bn,te]],y:[[F,Fn],[$,Fn]]}[fr]}}},Ei=Nr[se](pe,At,vt,cn,hn);if(Ei)for(var ci=0;ci<Ei.length;Ei++)He(Ei[ci][0],Ei[ci][1]);return He(Et[2],Et[3]),He($,te),e(Le,{x:fe,y:B})}b.default=t},1995:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(9392),o=r(a),l=u(6369);function r(he){return he&&he.__esModule?he:{default:he}}function e(he){return h(he)||s(he)||v(he)||t()}function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(he){if(typeof Symbol!="undefined"&&he[Symbol.iterator]!=null||he["@@iterator"]!=null)return Array.from(he)}function h(he){if(Array.isArray(he))return x(he)}function m(he,z){return F(he)||N(he,z)||v(he,z)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(he,z){if(he){if(typeof he=="string")return x(he,z);var ee=Object.prototype.toString.call(he).slice(8,-1);if(ee==="Object"&&he.constructor&&(ee=he.constructor.name),ee==="Map"||ee==="Set")return Array.from(he);if(ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee))return x(he,z)}}function x(he,z){(z==null||z>he.length)&&(z=he.length);for(var ee=0,pe=new Array(z);ee<z;ee++)pe[ee]=he[ee];return pe}function N(he,z){var ee=he==null?null:typeof Symbol!="undefined"&&he[Symbol.iterator]||he["@@iterator"];if(ee!=null){var pe,S,q,M,I=[],j=!0,ue=!1;try{if(q=(ee=ee.call(he)).next,z===0){if(Object(ee)!==ee)return;j=!1}else for(;!(j=(pe=q.call(ee)).done)&&(I.push(pe.value),I.length!==z);j=!0);}catch(se){ue=!0,S=se}finally{try{if(!j&&ee.return!=null&&(M=ee.return(),Object(M)!==M))return}finally{if(ue)throw S}}return I}}function F(he){if(Array.isArray(he))return he}var ae=function(z){var ee=z.reduce(function(pe,S){return pe.push(["L",S.x,S.y].join(" ")),pe},[["M",z[0].x,z[0].y].join(" ")]).join(" ");return ee},$=function(z,ee,pe){var S=new l.Point;return["x","y"].forEach(function(q){z[q]>ee[q]?S[q]=ee[q]+pe:z[q]<ee[q]?S[q]=ee[q]-pe:S[q]=z[q]}),S},te=function(z,ee,pe,S){var q=$(z,ee,S),M=$(pe,ee,S),I=0,j=new l.Point((z.x+pe.x)/2,(z.y+pe.y)/2);return ee.y<j.y?I=1:I=0,z.x>pe.x&&(I=I===1?0:1),[z,q,M,I]};function fe(he){var z="",ee=l.DEFAULT_RADIUS,pe=m(he,3),S=pe[0],q=pe[1],M=pe[2],I=he[he.length-1];if(Math.abs(S.y-I.y)<2*l.DEFAULT_RADIUS&&(ee=Math.abs(S.y-I.y)/2),o.default.first(he).x===o.default.last(he).x||o.default.first(he).y===o.default.last(he).y)return z=["M",o.default.first(he).x,o.default.first(he).y,"L",o.default.last(he).x,o.default.last(he).y].join(" "),{path:z,breakPoints:he};o.default.first(he).x>o.default.last(he).x;for(var j=[],ue=0;ue<he.length-2;ue++)j=[].concat(e(j),[te(he[ue],he[ue+1],he[ue+2],ee)]);return j.forEach(function(se,Ee){Ee%2==0?Ee===2?z=z+" "+["L",se[1].x,se[1].y,"M",se[1].x,se[1].y,"A",ee,ee,90,0,se[3],se[2].x,se[2].y].join(" "):z=z+" "+["M",se[0].x,se[0].y,"L",se[1].x,se[1].y,"A",ee,ee,90,0,se[3],se[2].x,se[2].y].join(" "):z=z+" "+["L",se[1].x,se[1].y,"M",se[1].x,se[1].y,"A",ee,ee,90,0,se[3],se[2].x,se[2].y].join(" ")}),z=z+["L",I.x,I.y].join(" "),{path:z,breakPoints:he}}function B(he,z,ee){if(ee.draggable&&ee.hasDragged)return{path:ae(ee.breakPoints),breakPoints:ee.breakPoints};he.orientation||(he.orientation=(0,l._calcOrientation)(z.pos[0],z.pos[1],he.pos[0],he.pos[1])),z.orientation||(z.orientation=(0,l._calcOrientation)(he.pos[0],he.pos[1],z.pos[0],z.pos[1]));var pe=[],S={x:he.pos[0],y:he.pos[1]},q={x:z.pos[0],y:z.pos[1]},M={"-10":l.LEFT,10:l.RIGHT,"0-1":l.TOP,"01":l.BOTTOM};return(0,l._route)(pe,S,M[he.orientation.join("")],q,M[z.orientation.join("")]),pe.length<2?"":pe.length===2?{path:"M ".concat(pe[0].x," ").concat(pe[0].y," L ").concat(pe[1].x," ").concat(pe[1].y),breakPoints:pe}:(pe.pop(),ee.hasRadius?pe.length<3?{path:ae(pe),breakPoints:pe}:fe(pe):{path:ae(pe),breakPoints:pe})}b.default=B},1645:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(6369),o=function(r,e,t){r.orientation||(r.orientation=(0,a._calcOrientation)(e.pos[0],e.pos[1],r.pos[0],r.pos[1])),e.orientation||(e.orientation=(0,a._calcOrientation)(r.pos[0],r.pos[1],e.pos[0],e.pos[1]));var s=r.orientation,h=e.orientation,m=(0,a._findSecondControlPoint)(r,e,s,h,t),d=["M",r.pos[0],r.pos[1]];return d=d.concat(["Q",m[0],m[1]]),d=d.concat([e.pos[0],e.pos[1]]),d.join(" ")};b.default=o},3962:function(T,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function u(a,o){var l=["M",a.pos[0],a.pos[1],"L",o.pos[0],o.pos[1]];return l.join(" ")}b.default=u},4882:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.findManhattanPoint=b.drawBrokenLine=b.drawSecondBezier=b.drawManhattan=b.drawFlow=b.drawStraight=b.drawBezier=b.drawAdvancedBezier=void 0;var a=u(6471);Object.defineProperty(b,"drawAdvancedBezier",{enumerable:!0,get:function(){return m(a).default}});var o=u(8476);Object.defineProperty(b,"drawBezier",{enumerable:!0,get:function(){return m(o).default}});var l=u(3962);Object.defineProperty(b,"drawStraight",{enumerable:!0,get:function(){return m(l).default}});var r=u(3003);Object.defineProperty(b,"drawFlow",{enumerable:!0,get:function(){return m(r).default}});var e=u(1995);Object.defineProperty(b,"drawManhattan",{enumerable:!0,get:function(){return m(e).default}});var t=u(1645);Object.defineProperty(b,"drawSecondBezier",{enumerable:!0,get:function(){return m(t).default}});var s=u(7221);Object.defineProperty(b,"drawBrokenLine",{enumerable:!0,get:function(){return m(s).default}});var h=u(6369);function m(d){return d&&d.__esModule?d:{default:d}}b.findManhattanPoint=h._findManhattanPoint},9755:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(4609),o=null,l=new Date().getTime(),r=function(s){o=s,l=new Date().getTime()},e=function(s,h){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=arguments.length>3?arguments[3]:void 0,v=d,x=null,N=null;if(v||(x=document.createElementNS("http://www.w3.org/2000/svg","circle"),N=document.createElementNS("http://www.w3.org/2000/svg","animateMotion"),x.append(N)),m._isContinue){var F=v.cloneNode(!0);a(F).find("animateMotion").attr("path",h),a(v).replaceWith(F),v=F}else{var ae=(new Date().getTime()-l)/1e3;v&&(x=v,N=a(v).find("animateMotion")[0],a(x).css("display","block")),x.setAttribute("cx",0),x.setAttribute("cy",0),x.setAttribute("r",m.radius||2),x.setAttribute("fill",m.color||"#999"),N.setAttribute("path",h),N.setAttribute("begin","".concat(ae,"s")),N.setAttribute("dur",m.dur||"8s"),N.setAttribute("fill","freeze"),N.setAttribute("repeatCount",m.repeatCount||"indefinite"),m.repeatCount&&m.repeatCount!=="indefinite"&&setTimeout(function(){a(x).css("display","none")},parseFloat(m.dur)*parseInt(m.repeatCount)*1e3)}return v||(v=x,setTimeout(function(){a(v).insertAfter(s)},20)),v};b.default={init:r,addAnimate:e}},6796:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function a(S,q){var M=Object.keys(S);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(S);q&&(I=I.filter(function(j){return Object.getOwnPropertyDescriptor(S,j).enumerable})),M.push.apply(M,I)}return M}function o(S){for(var q=1;q<arguments.length;q++){var M=arguments[q]!=null?arguments[q]:{};q%2?a(Object(M),!0).forEach(function(I){m(S,I,M[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(M)):a(Object(M)).forEach(function(I){Object.defineProperty(S,I,Object.getOwnPropertyDescriptor(M,I))})}return S}function l(S,q){var M=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!M){if(Array.isArray(S)||(M=r(S))||q&&S&&typeof S.length=="number"){M&&(S=M);var I=0,j=function(){};return{s:j,n:function(){return I>=S.length?{done:!0}:{done:!1,value:S[I++]}},e:function(xe){throw xe},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ue=!0,se=!1,Ee;return{s:function(){M=M.call(S)},n:function(){var xe=M.next();return ue=xe.done,xe},e:function(xe){se=!0,Ee=xe},f:function(){try{!ue&&M.return!=null&&M.return()}finally{if(se)throw Ee}}}}function r(S,q){if(S){if(typeof S=="string")return e(S,q);var M=Object.prototype.toString.call(S).slice(8,-1);if(M==="Object"&&S.constructor&&(M=S.constructor.name),M==="Map"||M==="Set")return Array.from(S);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return e(S,q)}}function e(S,q){(q==null||q>S.length)&&(q=S.length);for(var M=0,I=new Array(q);M<q;M++)I[M]=S[M];return I}function t(S,q){if(!(S instanceof q))throw new TypeError("Cannot call a class as a function")}function s(S,q){for(var M=0;M<q.length;M++){var I=q[M];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(S,d(I.key),I)}}function h(S,q,M){return q&&s(S.prototype,q),M&&s(S,M),Object.defineProperty(S,"prototype",{writable:!1}),S}function m(S,q,M){return q=d(q),q in S?Object.defineProperty(S,q,{value:M,enumerable:!0,configurable:!0,writable:!0}):S[q]=M,S}function d(S){var q=v(S,"string");return x(q)=="symbol"?q:String(q)}function v(S,q){if(x(S)!="object"||!S)return S;var M=S[Symbol.toPrimitive];if(M!==void 0){var I=M.call(S,q||"default");if(x(I)!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(S)}function x(S){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},x(S)}var N=u(9392),F=u(4609),ae="rgba(246, 105, 2, 1)",$="rgba(61, 86, 92, 1)",te="rgba(255, 253, 76, 1)",fe="rgba(255, 253, 76, 1)",B=20,he=function(q,M){!q||!q.style||Object.keys(M).forEach(function(I){q.style[I]=M[I]})},z=function(q){var M=q.backingStorePixelRatio||q.webkitBackingStorePixelRatio||q.mozBackingStorePixelRatio||q.msBackingStorePixelRatio||q.oBackingStorePixelRatio||q.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/M},ee=function(q){if(!q)throw new Error("options cant be empty");if(!q.root||x(q.root)!=="object"||!F(q.root))throw new Error("options.root must be a html element");if(!q.move||typeof q.move!="function")throw new Error("options.move must be a fuction");if(!q.terminal2canvas||typeof q.terminal2canvas!="function")throw new Error("options.move must be a fuction")},pe=function(){function S(q){var M=this;t(this,S),m(this,"getItemsPoint",function(){var I=N.cloneDeep(M.options.nodes),j=N.cloneDeep(M.options.groups),ue=M.options.canvas2terminal,se=M.$root.height(),Ee=M.$root.width();I.push({left:0,top:0,height:1,width:1}),I.push({left:Ee,top:se,height:1,width:1});var Ce=l(I),xe;try{for(Ce.s();!(xe=Ce.n()).done;){var Oe=xe.value;if(Oe.group){var Le=N.find(j,{id:Oe.group});if(!Le)continue;Oe.rleft=Le.left+Oe.left,Oe.rtop=Le.top+Oe.top;continue}Oe.rleft=Oe.left,Oe.rtop=Oe.top}}catch(Ge){Ce.e(Ge)}finally{Ce.f()}return j.forEach(function(Ge){var He=[Ge.left,Ge.top],Et=[Ge.left+Ge.width,Ge.top+Ge.height],Ct=ue(He),Gt=ue(Et);Ge.screenLeftTop=Ct,Ge.screenRightBottom=Gt,Ge.left=Ct[0],Ge.top=Ct[1],Ge.width=Gt[0]-Ct[0],Ge.height=Gt[1]-Ct[1]}),I.forEach(function(Ge){var He=[Ge.rleft,Ge.rtop],Et=[Ge.rleft+Ge.width,Ge.rtop+Ge.height],Ct=ue(He),Gt=ue(Et);Ge.left=Ct[0],Ge.top=Ct[1],Ge.width=Gt[0]-Ct[0],Ge.height=Gt[1]-Ct[1]}),{groups:j,nodes:I}}),m(this,"getViewportBBox",function(){var I=F(M.viewportDOM),j=I.offsetParent(),ue=I.offset(),se=F(j).offset(),Ee=ue.left-se.left,Ce=ue.top-se.top,xe=I.width(),Oe=I.height(),Le=Ee+xe,Ge=Ce+Oe;return{left:Ee,top:Ce,right:Le,bottom:Ge,height:Oe,width:xe}}),m(this,"debounceRender",N.debounce(function(){M.renderViewPort(),M.renderBG()},100)),ee(q),this.root=q.root,this.$root=F(this.root),this.options=o({height:200,width:200,className:"butterfly-minimap-container",containerStyle:{},viewportStyle:{},backgroudStyle:{},nodeColor:ae,groupColor:$,activeNodeColor:te,activeGroupColor:fe,containerWidth:F(this.root).width(),containerHeight:F(this.root).height(),nodes:[],groups:[],offset:[0,0],zoom:1,move:function(){return null},terminal2canvas:function(){return null},safeDistance:B},q),this.ratio=1,this.initContainer(),this.renderViewPort(),this.renderBG()}return h(S,[{key:"getBBox",value:function(){var M=this.getItemsPoint(),I=M.nodes,j=M.groups,ue=function(ir){return N.isNumber(ir)?ir:0},se=I.map(function(Fn){return Fn.top}),Ee=I.map(function(Fn){return Fn.left}),Ce=I.map(function(Fn){return Fn.top+Fn.height}),xe=I.map(function(Fn){return Fn.left+Fn.width}),Oe=j.map(function(Fn){return Fn.top}),Le=j.map(function(Fn){return Fn.left}),Ge=j.map(function(Fn){return Fn.top+Fn.height}),He=j.map(function(Fn){return Fn.left+Fn.width}),Et=se.concat(Oe),Ct=Ee.concat(Le),Gt=Ce.concat(Ge),At=xe.concat(He),vt=ue(N.min(Ct)),cn=ue(N.min(Et)),hn=ue(N.max(At)),Bn=ue(N.max(Gt));return{minX:vt,minY:cn,width:hn-vt,height:Bn-cn}}},{key:"setRatio",value:function(){var M=this.options.height,I=this.options.width,j=this.getBBox();if(j.width===0||j.height===0)return 0;var ue=Math.min(I/j.width,M/j.height);this.ratio=Number(ue.toFixed(2))}},{key:"update",value:function(M){var I=M.nodes,j=I===void 0?[]:I,ue=M.groups,se=ue===void 0?[]:ue,Ee=M.zoom,Ce=Ee===void 0?1:Ee,xe=M.offset,Oe=xe===void 0?[0,0]:xe;this.options.nodes=j,this.options.groups=se,this.options.zoom=Ce,this.options.offset=Oe,this.debounceRender()}},{key:"initContainer",value:function(){var M=this.options,I=M.height,j=M.width,ue=M.className,se=M.viewportStyle,Ee=M.backgroudStyle,Ce=M.containerStyle;this.container=document.createElement("div"),this.viewportDOM=document.createElement("div"),this.backgroundDOM=document.createElement("div"),this.container.setAttribute("class",ue);var xe={position:"absolute",left:0,top:0,overflow:"hidden",height:I+"px",width:j+"px"};he(this.container,o(o({},xe),{},{right:"10px",bottom:"10px",left:"none",top:"none",height:I+"px",width:j+"px",border:"1px solid #aaa","z-index":100},Ce)),he(this.viewportDOM,o(o({},xe),{},{left:0,top:0,"background-color":"rgba(246,105,2,0.20)"},se)),he(this.backgroundDOM,o(o(o({},xe),Ee),{},{height:I+"px",width:j+"px"})),this.root.appendChild(this.container),this.container.appendChild(this.backgroundDOM),this.container.appendChild(this.viewportDOM),this.initBGCanvas(),this.initViewportEvts()}},{key:"initBGCanvas",value:function(){var M=this.options,I=M.width,j=M.height,ue=document.createElement("canvas");this.backgroundDOM.appendChild(ue),ue.setAttribute("width",I),ue.setAttribute("height",j),he(ue,{position:"absolute",width:"100%",height:"100%",left:0,top:0});var se=ue.getContext("2d");this.cvsCtx=se,this.cvsRatio=z(se),se.scale(this.cvsRatio,this.cvsRatio)}},{key:"initViewportEvts",value:function(){var M=this,I=!1,j=0,ue=0,se=0,Ee=0;this.viewportEvents={mousedown:function(xe){xe.preventDefault(),xe.stopPropagation();var Oe=M.viewportDOM;if(xe.target===M.viewportDOM){var Le=M.getViewportBBox();se=parseInt(Le.left,10),Ee=parseInt(Le.top,10),I=!0,j=xe.clientX,ue=xe.clientY}},mousemove:function(xe){if(xe.preventDefault(),xe.stopPropagation(),!(!I||N.isNil(xe.clientX)||N.isNil(xe.clientY))){var Oe=j-xe.clientX,Le=ue-xe.clientY;se-=Oe,Ee-=Le;var Ge=M.options,He=Ge.width,Et=Ge.height,Ct=Ge.safeDistance,Gt=M.getViewportBBox(),At=Gt.width,vt=Gt.height;if(se>=He-Ct||Ee>=Et-Ct||se+At<=Ct||Ee+vt<=Ct){se+=Oe,Ee+=Le;return}he(M.viewportDOM,{left:se+"px",top:Ee+"px"});var cn=M.getBBox(),hn=cn.minX,Bn=cn.minY,Fn=M.$root.offset(),ir=M.options.offset,Nr=(-se/M.ratio+Fn.left-hn)*M.ratio,Ei=(-Ee/M.ratio+Fn.top-Bn)*M.ratio;M.options.move([ir[0]+Nr/M.ratio,ir[1]+Ei/M.ratio]),j=xe.clientX,ue=xe.clientY}},mouseleave:function(){I=!1},mouseup:function(){I=!1}},Object.keys(this.viewportEvents).forEach(function(Ce){M.container.addEventListener(Ce,M.viewportEvents[Ce])})}},{key:"renderBG",value:function(){var M=this,I=this.cvsCtx,j=this.options,ue=j.width,se=j.height,Ee=j.nodeColor,Ce=j.groupColor,xe=j.activeNodeColor,Oe=j.activeGroupColor,Le=this.cvsRatio;I.clearRect(0,0,ue,se);var Ge=this.getItemsPoint(),He=Ge.nodes,Et=Ge.groups,Ct=this.getBBox(),Gt=Ct.minX,At=Ct.minY;Et.forEach(function(vt){var cn=(vt.left-Gt)*M.ratio,hn=(vt.top-At)*M.ratio,Bn=vt.width*M.ratio,Fn=vt.height*M.ratio,ir=vt.minimapActive;ir?I.fillStyle=Oe:I.fillStyle=Ce,I.fillRect(cn/Le,hn/Le,Bn/Le,Fn/Le)}),He.forEach(function(vt){var cn=(vt.left-Gt)*M.ratio,hn=(vt.top-At)*M.ratio,Bn=vt.width*M.ratio,Fn=vt.height*M.ratio;vt.minimapActive?I.fillStyle=xe:I.fillStyle=Ee,I.fillRect(cn/Le,hn/Le,Bn/Le,Fn/Le)})}},{key:"renderViewPort",value:function(){this.setRatio();var M=this.getBBox(),I=M.minX,j=M.minY,ue=this.$root.offset(),se=ue.top,Ee=ue.left,Ce=this.$root.width(),xe=this.$root.height(),Oe=[Ee-I,se-j],Le=this.ratio,Ge=Ce*this.ratio,He=xe*this.ratio,Et=Math.round(Math.round(Oe[0])*Le),Ct=Math.round(Math.round(Oe[1])*Le);he(this.viewportDOM,{width:"".concat(Ge,"px"),height:"".concat(He,"px"),left:"".concat(Et,"px"),top:"".concat(Ct,"px")})}},{key:"destroy",value:function(){this.root.removeChild(this.container)}}]),S}();b.default=pe},1106:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=u(9392);b.default=function(o,l,r){var e=(o||"").split(" ").filter(function(m){return!!m}),t=(l||"").split(" ").filter(function(m){return!!m});if(!r&&(!o||!l))return!0;if(r&&!o&&!l)return!0;var s=e.concat(t),h=a.uniq(s);return s.length!==h.length}},8039:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function a(m){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},a(m)}function o(m,d){if(!(m instanceof d))throw new TypeError("Cannot call a class as a function")}function l(m,d){for(var v=0;v<d.length;v++){var x=d[v];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(m,e(x.key),x)}}function r(m,d,v){return d&&l(m.prototype,d),v&&l(m,v),Object.defineProperty(m,"prototype",{writable:!1}),m}function e(m){var d=t(m,"string");return a(d)=="symbol"?d:String(d)}function t(m,d){if(a(m)!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var x=v.call(m,d||"default");if(a(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(m)}var s=u(4609),h=function(){function m(){o(this,m),this.dom=s('<canvas class="butterfly-selected-canvas"></canvas>')[0],this.cxt=this.dom.getContext("2d"),this.canvasTop=0,this.canvasLeft=0,this.canvasHeight=0,this.canvasWidth=0,this.canScrollX=0,this.canScrollY=0,this.startX=0,this.startY=0,this.endX=0,this.endY=0,this._on=null,this._emit=null,this.isDraw=!1,this.root=null,this.isActive=!1}return r(m,[{key:"init",value:function(v){var x=v.root;this.resize(v),this.addEventListener(),this._on=v._on,this._emit=v._emit,s(this.dom).appendTo(x)}},{key:"resize",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=v.root||this.root;this.root=x;var N=x.getBoundingClientRect();this.canvasTop=N.top,this.canvasLeft=N.left,this.canvasHeight=s(x).height(),this.canvasWidth=s(x).width(),s(this.dom).attr("width",this.canvasWidth),s(this.dom).attr("height",this.canvasHeight)}},{key:"addEventListener",value:function(){this.dom.addEventListener("mousedown",this.mouseDown.bind(this)),this.dom.addEventListener("mouseup",this.mouseUp.bind(this)),this.dom.addEventListener("mousemove",this.mouseMove.bind(this)),this.dom.addEventListener("mouseleave",this.mouseLeave.bind(this))}},{key:"mouseDown",value:function(v){this.startX=v.clientX,this.startY=v.clientY,this.resize(),this.isDraw=!0}},{key:"mouseUp",value:function(v){this.isDraw=!1,this.clearCanvas();var x=this.startX,N=this.startY,F=this.endX=v.clientX,ae=this.endY=v.clientY,$=F-x>0?"right":"left",te=x>F?F:x,fe=N>ae?ae:N,B=x>F?x:F,he=N>ae?N:ae;this._emit("InnerEvents",{type:"multiple:select",range:[te,fe,B,he],toDirection:$}),this.unActive()}},{key:"mouseMove",value:function(v){this.isDraw&&(this.endX=v.clientX,this.endY=v.clientY,this.drawRect())}},{key:"mouseLeave",value:function(v){this.isDraw=!1,this.clearCanvas()}},{key:"drawRect",value:function(){if(this.isDraw){this.clearCanvas();var v=Math.min(this.startX,this.endX)-this.canvasLeft+this.canScrollX,x=Math.min(this.startY,this.endY)-this.canvasTop+this.canScrollY,N=Math.abs(this.startX-this.endX),F=Math.abs(this.startY-this.endY);this.cxt.beginPath(),this.cxt.rect(v,x,N,F),this.cxt.fillStyle="#b3dbff",this.cxt.fill(),this.cxt.lineWidth="1",this.cxt.strokeStyle="#3da4ff",this.cxt.stroke()}}},{key:"clearCanvas",value:function(){this.cxt.clearRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"getCanvas",value:function(){return this.dom}},{key:"active",value:function(){this.isActive||(s(this.dom).addClass("wrapper-up"),this.isActive=!0)}},{key:"unActive",value:function(){this.isActive&&(s(this.dom).removeClass("wrapper-up"),this.isActive=!1)}},{key:"_changeCanvasInfo",value:function(v){v.terScrollX!==void 0&&(this.canScrollX=v.terScrollX),v.terScrollY!==void 0&&(this.canScrollY=v.terScrollY),v.startX!==void 0&&(this.startX=v.startX),v.startY!==void 0&&(this.startY=v.startY)}}]),m}();b.default=h},9507:function(T,b,u){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),u(9868);var a=u(4609),o={TEMPLATE:'<div class="butterfly-tooltip-container"><div class="butterfly-tooltip-arrow"></div><div class="butterfly-tooltip-inner"></div></div>',$viewAppend:"body",$viewCon:{tips:".butterfly-tips",menu:".butterfly-menu",common:".butterfly-tooltip-container"},$inner:".butterfly-tooltip-inner"},l=function(z){if(!z)return 0;if(Number(z))return Number(parseFloat(z).toFixed(3))},r=function(z,ee){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{x:0,y:0},S={},q=ee.left,M=ee.top,I=ee.width,j=ee.height,ue=ee.actualWidth,se=ee.actualHeight;switch(q=l(q),M=l(M),I=l(I),j=l(j),ue=l(ue),se=l(se),z){case"top":S.left=q+I/2-ue/2,S.top=M-se-5;break;case"left":S.left=q-ue-5,S.top=M+j/2-se/2;break;case"right":S.left=q+I+5,S.top=M+j/2-se/2;break;case"bottom":S.left=q+I/2-ue/2,S.top=M+j+5;break;default:S.left=q+I/2-ue/2,S.top=M-j-5}return pe.x&&(S.left+=pe.x),pe.y&&(S.top+=pe.y),S},e={x:0,y:0},t=function(z,ee,pe,S,q){a(o.$viewCon[ee]).remove();var M=a(o.TEMPLATE);M.find(o.$inner).append(pe),a(M).appendTo(z.viewAppend||o.$viewAppend);var I=z.placement||"top";a(M).addClass(o.$viewCon[ee].replace(".","")).addClass(I).addClass("in"),z.className&&M.addClass(z.className);var j={top:a(S).offset().top,left:a(S).offset().left,width:a(S).outerWidth(),height:a(S).outerHeight(),actualWidth:a(M).outerWidth(),actualHeight:a(M).outerHeight()};if(["path","g"].includes(a(S)[0].tagName)){var ue=a(S)[0].getBBox();j.width=ue.width,j.height=ue.height}z.viewAppend&&(j.top-=a(z.viewAppend).offset().top,j.left-=a(z.viewAppend).offset().left);var se={};if(z.x||z.x===0)se={left:z.offsetX?z.x+z.offsetX:z.x,top:z.offsetY?z.y+z.offsetY:z.y};else{var Ee={x:0,y:0};z.offsetX&&(Ee.x=z.offsetX),z.offsetY&&(Ee.y=z.offsetY),se=r(I,j,Ee)}e={x:se.left,y:se.top};var Ce="top: ".concat(se.top,"px; left: ").concat(se.left,"px;");return a(M).attr("style",Ce),q&&q(M[0]),M[0]},s=function(z,ee){a(z).removeClass("in").remove(),ee&&ee(z)},h=function(z,ee){var pe=null,S=null,q=!1,M=!1,I=!1,j=null,ue=!!z.notEventThrough,se=z.needTipsHidden===void 0?!0:!!z.needTipsHidden,Ee=function(At){I?q=!1:q=!0},Ce=function(At){I=!1,q=!1,xe()},xe=function(){j&&clearTimeout(j),j=setTimeout(function(){!q&&!M&&pe&&(s(pe),pe.removeEventListener("mouseover",Ee),pe.removeEventListener("mousemove",Ee),pe.removeEventListener("mouseout",Ce))},50)},Oe=z.data,Le=z.targetDom,Ge=z.genTipDom,He=z.tipsDom;Le.addEventListener("mouseover",function(Gt){He&&(S=He),Ge&&(S=Ge(Oe)),!(I||!S)&&(ue&&(Gt.stopPropagation(),Gt.preventDefault()),M=!0,pe=t(z,"tips",S,Le,ee),pe.addEventListener("mouseover",Ee),pe.addEventListener("mousemove",Ee),pe.addEventListener("mouseout",Ce))});var Et=Le.onmouseout;Le.onmouseout=function(Gt){Et&&Et(Gt),ue&&(Gt.stopPropagation(),Gt.preventDefault()),M=!1,xe()};var Ct=Le.onmousedown;Le.onmousedown=function(Gt){if(Ct&&Ct(Gt),se){var At=function vt(){I=!1,document.removeEventListener("mouseup",vt)};document.addEventListener("mouseup",At),I=!0,M=!1,xe()}}},m=null,d=null,v=!1,x={x:0,y:0},N=function he(z){z.target===m||a(m).find(z.target).length>0||(m&&s(m),document.removeEventListener("click",he))},F=function(z,ee){var pe=z.data,S=z.targetDom,q=z.genTipDom,M=function(){var j=null;q&&(j=q(pe)),z.tipsDom&&(j=z.tipsDom),m=t(z,"menu",j,S,ee),z.closable&&document.addEventListener("click",N),z.draggable&&(z.dragDom?d=z.dragDom:d=m,document.addEventListener("mousedown",$),document.addEventListener("mousemove",fe),document.addEventListener("mouseup",B))};z.action==="click"?S.addEventListener("click",M):M()},ae=function(z){m&&(s(m,z),m=null,document.removeEventListener("click",N),d&&(document.removeEventListener("mousedown",$),document.removeEventListener("mousemove",fe),document.removeEventListener("mouseup",B),d=null))},$=function(z){v=!0,x={x:z.clientX,y:z.clientY}},te=null,fe=function(z){if(v&&d){if(te)return;te=setTimeout(function(){var ee=e.y+(z.clientY-x.y),pe=e.x+(z.clientX-x.x);a(m).css("top",ee).css("left",pe),x={x:z.clientX,y:z.clientY},e={x:pe,y:ee},te=null},20)}},B=function(z){v=!1};b.default={createTip:h,createMenu:F,closeMenu:ae}},2546:function(T,b,u){T.exports={graphlib:u(6626),layout:u(7194),debug:u(1303),util:{time:u(3063).time,notime:u(3063).notime},version:u(2275)}},1255:function(T,b,u){"use strict";var a=u(2361),o=u(9240);T.exports={run:l,undo:e};function l(t){var s=t.graph().acyclicer==="greedy"?o(t,h(t)):r(t);a.forEach(s,function(m){var d=t.edge(m);t.removeEdge(m),d.forwardName=m.name,d.reversed=!0,t.setEdge(m.w,m.v,d,a.uniqueId("rev"))});function h(m){return function(d){return m.edge(d).weight}}}function r(t){var s=[],h={},m={};function d(v){a.has(m,v)||(m[v]=!0,h[v]=!0,a.forEach(t.outEdges(v),function(x){a.has(h,x.w)?s.push(x):d(x.w)}),delete h[v])}return a.forEach(t.nodes(),d),s}function e(t){a.forEach(t.edges(),function(s){var h=t.edge(s);if(h.reversed){t.removeEdge(s);var m=h.forwardName;delete h.reversed,delete h.forwardName,t.setEdge(s.w,s.v,h,m)}})}},765:function(T,b,u){var a=u(2361),o=u(3063);T.exports=l;function l(e){function t(s){var h=e.children(s),m=e.node(s);if(h.length&&a.forEach(h,t),a.has(m,"minRank")){m.borderLeft=[],m.borderRight=[];for(var d=m.minRank,v=m.maxRank+1;d<v;++d)r(e,"borderLeft","_bl",s,m,d),r(e,"borderRight","_br",s,m,d)}}a.forEach(e.children(),t)}function r(e,t,s,h,m,d){var v={width:0,height:0,rank:d,borderType:t},x=m[t][d-1],N=o.addDummyNode(e,"border",v,s);m[t][d]=N,e.setParent(N,h),x&&e.setEdge(x,N,{weight:1})}},3257:function(T,b,u){"use strict";var a=u(2361);T.exports={adjust:o,undo:l};function o(d){var v=d.graph().rankdir.toLowerCase();(v==="lr"||v==="rl")&&r(d)}function l(d){var v=d.graph().rankdir.toLowerCase();(v==="bt"||v==="rl")&&t(d),(v==="lr"||v==="rl")&&(h(d),r(d))}function r(d){a.forEach(d.nodes(),function(v){e(d.node(v))}),a.forEach(d.edges(),function(v){e(d.edge(v))})}function e(d){var v=d.width;d.width=d.height,d.height=v}function t(d){a.forEach(d.nodes(),function(v){s(d.node(v))}),a.forEach(d.edges(),function(v){var x=d.edge(v);a.forEach(x.points,s),a.has(x,"y")&&s(x)})}function s(d){d.y=-d.y}function h(d){a.forEach(d.nodes(),function(v){m(d.node(v))}),a.forEach(d.edges(),function(v){var x=d.edge(v);a.forEach(x.points,m),a.has(x,"x")&&m(x)})}function m(d){var v=d.x;d.x=d.y,d.y=v}},1135:function(T){T.exports=b;function b(){var o={};o._next=o._prev=o,this._sentinel=o}b.prototype.dequeue=function(){var o=this._sentinel,l=o._prev;if(l!==o)return u(l),l},b.prototype.enqueue=function(o){var l=this._sentinel;o._prev&&o._next&&u(o),o._next=l._next,l._next._prev=o,l._next=o,o._prev=l},b.prototype.toString=function(){for(var o=[],l=this._sentinel,r=l._prev;r!==l;)o.push(JSON.stringify(r,a)),r=r._prev;return"["+o.join(", ")+"]"};function u(o){o._prev._next=o._next,o._next._prev=o._prev,delete o._next,delete o._prev}function a(o,l){if(o!=="_next"&&o!=="_prev")return l}},1303:function(T,b,u){var a=u(2361),o=u(3063),l=u(6626).Graph;T.exports={debugOrdering:r};function r(e){var t=o.buildLayerMatrix(e),s=new l({compound:!0,multigraph:!0}).setGraph({});return a.forEach(e.nodes(),function(h){s.setNode(h,{label:h}),s.setParent(h,"layer"+e.node(h).rank)}),a.forEach(e.edges(),function(h){s.setEdge(h.v,h.w,{},h.name)}),a.forEach(t,function(h,m){var d="layer"+m;s.setNode(d,{rank:"same"}),a.reduce(h,function(v,x){return s.setEdge(v,x,{style:"invis"}),x})}),s}},6626:function(T,b,u){var a;try{a=u(5172)}catch(o){}a||(a=window.graphlib),T.exports=a},9240:function(T,b,u){var a=u(2361),o=u(6626).Graph,l=u(1135);T.exports=e;var r=a.constant(1);function e(d,v){if(d.nodeCount()<=1)return[];var x=h(d,v||r),N=t(x.graph,x.buckets,x.zeroIdx);return a.flatten(a.map(N,function(F){return d.outEdges(F.v,F.w)}),!0)}function t(d,v,x){for(var N=[],F=v[v.length-1],ae=v[0],$;d.nodeCount();){for(;$=ae.dequeue();)s(d,v,x,$);for(;$=F.dequeue();)s(d,v,x,$);if(d.nodeCount()){for(var te=v.length-2;te>0;--te)if($=v[te].dequeue(),$){N=N.concat(s(d,v,x,$,!0));break}}}return N}function s(d,v,x,N,F){var ae=F?[]:void 0;return a.forEach(d.inEdges(N.v),function($){var te=d.edge($),fe=d.node($.v);F&&ae.push({v:$.v,w:$.w}),fe.out-=te,m(v,x,fe)}),a.forEach(d.outEdges(N.v),function($){var te=d.edge($),fe=$.w,B=d.node(fe);B.in-=te,m(v,x,B)}),d.removeNode(N.v),ae}function h(d,v){var x=new o,N=0,F=0;a.forEach(d.nodes(),function(te){x.setNode(te,{v:te,in:0,out:0})}),a.forEach(d.edges(),function(te){var fe=x.edge(te.v,te.w)||0,B=v(te),he=fe+B;x.setEdge(te.v,te.w,he),F=Math.max(F,x.node(te.v).out+=B),N=Math.max(N,x.node(te.w).in+=B)});var ae=a.range(F+N+3).map(function(){return new l}),$=N+1;return a.forEach(x.nodes(),function(te){m(ae,$,x.node(te))}),{graph:x,buckets:ae,zeroIdx:$}}function m(d,v,x){x.out?x.in?d[x.out-x.in+v].enqueue(x):d[d.length-1].enqueue(x):d[0].enqueue(x)}},7194:function(T,b,u){"use strict";var a=u(2361),o=u(1255),l=u(7163),r=u(4505),e=u(3063).normalizeRanks,t=u(1970),s=u(3063).removeEmptyRanks,h=u(1733),m=u(765),d=u(3257),v=u(2852),x=u(3021),N=u(3063),F=u(6626).Graph;T.exports=ae;function ae(At,vt){var cn=vt&&vt.debugTiming?N.time:N.notime;cn("layout",function(){var hn=cn("  buildLayoutGraph",function(){return M(At)});cn("  runLayout",function(){$(hn,cn)}),cn("  updateInputGraph",function(){te(At,hn)})})}function $(At,vt){vt("    makeSpaceForEdgeLabels",function(){I(At)}),vt("    removeSelfEdges",function(){Ge(At)}),vt("    acyclic",function(){o.run(At)}),vt("    nestingGraph.run",function(){h.run(At)}),vt("    rank",function(){r(N.asNonCompoundGraph(At))}),vt("    injectEdgeLabelProxies",function(){j(At)}),vt("    removeEmptyRanks",function(){s(At)}),vt("    nestingGraph.cleanup",function(){h.cleanup(At)}),vt("    normalizeRanks",function(){e(At)}),vt("    assignRankMinMax",function(){ue(At)}),vt("    removeEdgeLabelProxies",function(){se(At)}),vt("    normalize.run",function(){l.run(At)}),vt("    parentDummyChains",function(){t(At)}),vt("    addBorderSegments",function(){m(At)}),vt("    order",function(){v(At)}),vt("    insertSelfEdges",function(){He(At)}),vt("    adjustCoordinateSystem",function(){d.adjust(At)}),vt("    position",function(){x(At)}),vt("    positionSelfEdges",function(){Et(At)}),vt("    removeBorderNodes",function(){Le(At)}),vt("    normalize.undo",function(){l.undo(At)}),vt("    fixupEdgeLabelCoords",function(){xe(At)}),vt("    undoCoordinateSystem",function(){d.undo(At)}),vt("    translateGraph",function(){Ee(At)}),vt("    assignNodeIntersects",function(){Ce(At)}),vt("    reversePoints",function(){Oe(At)}),vt("    acyclic.undo",function(){o.undo(At)})}function te(At,vt){a.forEach(At.nodes(),function(cn){var hn=At.node(cn),Bn=vt.node(cn);hn&&(hn.x=Bn.x,hn.y=Bn.y,vt.children(cn).length&&(hn.width=Bn.width,hn.height=Bn.height))}),a.forEach(At.edges(),function(cn){var hn=At.edge(cn),Bn=vt.edge(cn);hn.points=Bn.points,a.has(Bn,"x")&&(hn.x=Bn.x,hn.y=Bn.y)}),At.graph().width=vt.graph().width,At.graph().height=vt.graph().height}var fe=["nodesep","edgesep","ranksep","marginx","marginy"],B={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},he=["acyclicer","ranker","rankdir","align"],z=["width","height"],ee={width:0,height:0},pe=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},q=["labelpos"];function M(At){var vt=new F({multigraph:!0,compound:!0}),cn=Gt(At.graph());return vt.setGraph(a.merge({},B,Ct(cn,fe),a.pick(cn,he))),a.forEach(At.nodes(),function(hn){var Bn=Gt(At.node(hn));vt.setNode(hn,a.defaults(Ct(Bn,z),ee)),vt.setParent(hn,At.parent(hn))}),a.forEach(At.edges(),function(hn){var Bn=Gt(At.edge(hn));vt.setEdge(hn,a.merge({},S,Ct(Bn,pe),a.pick(Bn,q)))}),vt}function I(At){var vt=At.graph();vt.ranksep/=2,a.forEach(At.edges(),function(cn){var hn=At.edge(cn);hn.minlen*=2,hn.labelpos.toLowerCase()!=="c"&&(vt.rankdir==="TB"||vt.rankdir==="BT"?hn.width+=hn.labeloffset:hn.height+=hn.labeloffset)})}function j(At){a.forEach(At.edges(),function(vt){var cn=At.edge(vt);if(cn.width&&cn.height){var hn=At.node(vt.v),Bn=At.node(vt.w),Fn={rank:(Bn.rank-hn.rank)/2+hn.rank,e:vt};N.addDummyNode(At,"edge-proxy",Fn,"_ep")}})}function ue(At){var vt=0;a.forEach(At.nodes(),function(cn){var hn=At.node(cn);hn.borderTop&&(hn.minRank=At.node(hn.borderTop).rank,hn.maxRank=At.node(hn.borderBottom).rank,vt=a.max(vt,hn.maxRank))}),At.graph().maxRank=vt}function se(At){a.forEach(At.nodes(),function(vt){var cn=At.node(vt);cn.dummy==="edge-proxy"&&(At.edge(cn.e).labelRank=cn.rank,At.removeNode(vt))})}function Ee(At){var vt=Number.POSITIVE_INFINITY,cn=0,hn=Number.POSITIVE_INFINITY,Bn=0,Fn=At.graph(),ir=Fn.marginx||0,Nr=Fn.marginy||0;function Ei(ci){var Ot=ci.x,fr=ci.y,Pi=ci.width,Li=ci.height;vt=Math.min(vt,Ot-Pi/2),cn=Math.max(cn,Ot+Pi/2),hn=Math.min(hn,fr-Li/2),Bn=Math.max(Bn,fr+Li/2)}a.forEach(At.nodes(),function(ci){Ei(At.node(ci))}),a.forEach(At.edges(),function(ci){var Ot=At.edge(ci);a.has(Ot,"x")&&Ei(Ot)}),vt-=ir,hn-=Nr,a.forEach(At.nodes(),function(ci){var Ot=At.node(ci);Ot.x-=vt,Ot.y-=hn}),a.forEach(At.edges(),function(ci){var Ot=At.edge(ci);a.forEach(Ot.points,function(fr){fr.x-=vt,fr.y-=hn}),a.has(Ot,"x")&&(Ot.x-=vt),a.has(Ot,"y")&&(Ot.y-=hn)}),Fn.width=cn-vt+ir,Fn.height=Bn-hn+Nr}function Ce(At){a.forEach(At.edges(),function(vt){var cn=At.edge(vt),hn=At.node(vt.v),Bn=At.node(vt.w),Fn,ir;cn.points?(Fn=cn.points[0],ir=cn.points[cn.points.length-1]):(cn.points=[],Fn=Bn,ir=hn),cn.points.unshift(N.intersectRect(hn,Fn)),cn.points.push(N.intersectRect(Bn,ir))})}function xe(At){a.forEach(At.edges(),function(vt){var cn=At.edge(vt);if(a.has(cn,"x"))switch((cn.labelpos==="l"||cn.labelpos==="r")&&(cn.width-=cn.labeloffset),cn.labelpos){case"l":cn.x-=cn.width/2+cn.labeloffset;break;case"r":cn.x+=cn.width/2+cn.labeloffset;break}})}function Oe(At){a.forEach(At.edges(),function(vt){var cn=At.edge(vt);cn.reversed&&cn.points.reverse()})}function Le(At){a.forEach(At.nodes(),function(vt){if(At.children(vt).length){var cn=At.node(vt),hn=At.node(cn.borderTop),Bn=At.node(cn.borderBottom),Fn=At.node(a.last(cn.borderLeft)),ir=At.node(a.last(cn.borderRight));cn.width=Math.abs(ir.x-Fn.x),cn.height=Math.abs(Bn.y-hn.y),cn.x=Fn.x+cn.width/2,cn.y=hn.y+cn.height/2}}),a.forEach(At.nodes(),function(vt){At.node(vt).dummy==="border"&&At.removeNode(vt)})}function Ge(At){a.forEach(At.edges(),function(vt){if(vt.v===vt.w){var cn=At.node(vt.v);cn.selfEdges||(cn.selfEdges=[]),cn.selfEdges.push({e:vt,label:At.edge(vt)}),At.removeEdge(vt)}})}function He(At){var vt=N.buildLayerMatrix(At);a.forEach(vt,function(cn){var hn=0;a.forEach(cn,function(Bn,Fn){var ir=At.node(Bn);ir.order=Fn+hn,a.forEach(ir.selfEdges,function(Nr){N.addDummyNode(At,"selfedge",{width:Nr.label.width,height:Nr.label.height,rank:ir.rank,order:Fn+ ++hn,e:Nr.e,label:Nr.label},"_se")}),delete ir.selfEdges})})}function Et(At){a.forEach(At.nodes(),function(vt){var cn=At.node(vt);if(cn.dummy==="selfedge"){var hn=At.node(cn.e.v),Bn=hn.x+hn.width/2,Fn=hn.y,ir=cn.x-Bn,Nr=hn.height/2;At.setEdge(cn.e,cn.label),At.removeNode(vt),cn.label.points=[{x:Bn+2*ir/3,y:Fn-Nr},{x:Bn+5*ir/6,y:Fn-Nr},{x:Bn+ir,y:Fn},{x:Bn+5*ir/6,y:Fn+Nr},{x:Bn+2*ir/3,y:Fn+Nr}],cn.label.x=cn.x,cn.label.y=cn.y}})}function Ct(At,vt){return a.mapValues(a.pick(At,vt),Number)}function Gt(At){var vt={};return a.forEach(At,function(cn,hn){vt[hn.toLowerCase()]=cn}),vt}},2361:function(T,b,u){var a;try{a={cloneDeep:u(250),constant:u(3503),defaults:u(8548),each:u(6934),filter:u(4725),find:u(9785),flatten:u(151),forEach:u(9204),forIn:u(3190),has:u(9946),isUndefined:u(6513),last:u(611),map:u(9924),mapValues:u(642),max:u(5987),merge:u(8440),min:u(3376),minBy:u(3296),now:u(5795),pick:u(9409),range:u(859),reduce:u(6473),sortBy:u(351),uniqueId:u(5708),values:u(1229),zipObject:u(5441)}}catch(o){}a||(a=window._),T.exports=a},1733:function(T,b,u){var a=u(2361),o=u(3063);T.exports={run:l,cleanup:s};function l(h){var m=o.addDummyNode(h,"root",{},"_root"),d=e(h),v=a.max(a.values(d))-1,x=2*v+1;h.graph().nestingRoot=m,a.forEach(h.edges(),function(F){h.edge(F).minlen*=x});var N=t(h)+1;a.forEach(h.children(),function(F){r(h,m,x,N,v,d,F)}),h.graph().nodeRankFactor=x}function r(h,m,d,v,x,N,F){var ae=h.children(F);if(!ae.length){F!==m&&h.setEdge(m,F,{weight:0,minlen:d});return}var $=o.addBorderNode(h,"_bt"),te=o.addBorderNode(h,"_bb"),fe=h.node(F);h.setParent($,F),fe.borderTop=$,h.setParent(te,F),fe.borderBottom=te,a.forEach(ae,function(B){r(h,m,d,v,x,N,B);var he=h.node(B),z=he.borderTop?he.borderTop:B,ee=he.borderBottom?he.borderBottom:B,pe=he.borderTop?v:2*v,S=z!==ee?1:x-N[F]+1;h.setEdge($,z,{weight:pe,minlen:S,nestingEdge:!0}),h.setEdge(ee,te,{weight:pe,minlen:S,nestingEdge:!0})}),h.parent(F)||h.setEdge(m,$,{weight:0,minlen:x+N[F]})}function e(h){var m={};function d(v,x){var N=h.children(v);N&&N.length&&a.forEach(N,function(F){d(F,x+1)}),m[v]=x}return a.forEach(h.children(),function(v){d(v,1)}),m}function t(h){return a.reduce(h.edges(),function(m,d){return m+h.edge(d).weight},0)}function s(h){var m=h.graph();h.removeNode(m.nestingRoot),delete m.nestingRoot,a.forEach(h.edges(),function(d){var v=h.edge(d);v.nestingEdge&&h.removeEdge(d)})}},7163:function(T,b,u){"use strict";var a=u(2361),o=u(3063);T.exports={run:l,undo:e};function l(t){t.graph().dummyChains=[],a.forEach(t.edges(),function(s){r(t,s)})}function r(t,s){var h=s.v,m=t.node(h).rank,d=s.w,v=t.node(d).rank,x=s.name,N=t.edge(s),F=N.labelRank;if(v!==m+1){t.removeEdge(s);var ae,$,te;for(te=0,++m;m<v;++te,++m)N.points=[],$={width:0,height:0,edgeLabel:N,edgeObj:s,rank:m},ae=o.addDummyNode(t,"edge",$,"_d"),m===F&&($.width=N.width,$.height=N.height,$.dummy="edge-label",$.labelpos=N.labelpos),t.setEdge(h,ae,{weight:N.weight},x),te===0&&t.graph().dummyChains.push(ae),h=ae;t.setEdge(h,d,{weight:N.weight},x)}}function e(t){a.forEach(t.graph().dummyChains,function(s){var h=t.node(s),m=h.edgeLabel,d;for(t.setEdge(h.edgeObj,m);h.dummy;)d=t.successors(s)[0],t.removeNode(s),m.points.push({x:h.x,y:h.y}),h.dummy==="edge-label"&&(m.x=h.x,m.y=h.y,m.width=h.width,m.height=h.height),s=d,h=t.node(s)})}},2205:function(T,b,u){var a=u(2361);T.exports=o;function o(l,r,e){var t={},s;a.forEach(e,function(h){for(var m=l.parent(h),d,v;m;){if(d=l.parent(m),d?(v=t[d],t[d]=m):(v=s,s=m),v&&v!==m){r.setEdge(v,m);return}m=d}})}},9506:function(T,b,u){var a=u(2361);T.exports=o;function o(l,r){return a.map(r,function(e){var t=l.inEdges(e);if(t.length){var s=a.reduce(t,function(h,m){var d=l.edge(m),v=l.node(m.v);return{sum:h.sum+d.weight*v.order,weight:h.weight+d.weight}},{sum:0,weight:0});return{v:e,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:e}})}},9105:function(T,b,u){var a=u(2361),o=u(6626).Graph;T.exports=l;function l(e,t,s){var h=r(e),m=new o({compound:!0}).setGraph({root:h}).setDefaultNodeLabel(function(d){return e.node(d)});return a.forEach(e.nodes(),function(d){var v=e.node(d),x=e.parent(d);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(m.setNode(d),m.setParent(d,x||h),a.forEach(e[s](d),function(N){var F=N.v===d?N.w:N.v,ae=m.edge(F,d),$=a.isUndefined(ae)?0:ae.weight;m.setEdge(F,d,{weight:e.edge(N).weight+$})}),a.has(v,"minRank")&&m.setNode(d,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),m}function r(e){for(var t;e.hasNode(t=a.uniqueId("_root")););return t}},5456:function(T,b,u){"use strict";var a=u(2361);T.exports=o;function o(r,e){for(var t=0,s=1;s<e.length;++s)t+=l(r,e[s-1],e[s]);return t}function l(r,e,t){for(var s=a.zipObject(t,a.map(t,function(N,F){return F})),h=a.flatten(a.map(e,function(N){return a.sortBy(a.map(r.outEdges(N),function(F){return{pos:s[F.w],weight:r.edge(F).weight}}),"pos")}),!0),m=1;m<t.length;)m<<=1;var d=2*m-1;m-=1;var v=a.map(new Array(d),function(){return 0}),x=0;return a.forEach(h.forEach(function(N){var F=N.pos+m;v[F]+=N.weight;for(var ae=0;F>0;)F%2&&(ae+=v[F+1]),F=F-1>>1,v[F]+=N.weight;x+=N.weight*ae})),x}},2852:function(T,b,u){"use strict";var a=u(2361),o=u(8043),l=u(5456),r=u(6490),e=u(9105),t=u(2205),s=u(6626).Graph,h=u(3063);T.exports=m;function m(N){var F=h.maxRank(N),ae=d(N,a.range(1,F+1),"inEdges"),$=d(N,a.range(F-1,-1,-1),"outEdges"),te=o(N);x(N,te);for(var fe=Number.POSITIVE_INFINITY,B,he=0,z=0;z<4;++he,++z){v(he%2?ae:$,he%4>=2),te=h.buildLayerMatrix(N);var ee=l(N,te);ee<fe&&(z=0,B=a.cloneDeep(te),fe=ee)}x(N,B)}function d(N,F,ae){return a.map(F,function($){return e(N,$,ae)})}function v(N,F){var ae=new s;a.forEach(N,function($){var te=$.graph().root,fe=r($,te,ae,F);a.forEach(fe.vs,function(B,he){$.node(B).order=he}),t($,ae,fe.vs)})}function x(N,F){a.forEach(F,function(ae){a.forEach(ae,function($,te){N.node($).order=te})})}},8043:function(T,b,u){"use strict";var a=u(2361);T.exports=o;function o(l){var r={},e=a.filter(l.nodes(),function(d){return!l.children(d).length}),t=a.max(a.map(e,function(d){return l.node(d).rank})),s=a.map(a.range(t+1),function(){return[]});function h(d){if(!a.has(r,d)){r[d]=!0;var v=l.node(d);s[v.rank].push(d),a.forEach(l.successors(d),h)}}var m=a.sortBy(e,function(d){return l.node(d).rank});return a.forEach(m,h),s}},5926:function(T,b,u){"use strict";var a=u(2361);T.exports=o;function o(e,t){var s={};a.forEach(e,function(m,d){var v=s[m.v]={indegree:0,in:[],out:[],vs:[m.v],i:d};a.isUndefined(m.barycenter)||(v.barycenter=m.barycenter,v.weight=m.weight)}),a.forEach(t.edges(),function(m){var d=s[m.v],v=s[m.w];!a.isUndefined(d)&&!a.isUndefined(v)&&(v.indegree++,d.out.push(s[m.w]))});var h=a.filter(s,function(m){return!m.indegree});return l(h)}function l(e){var t=[];function s(d){return function(v){v.merged||(a.isUndefined(v.barycenter)||a.isUndefined(d.barycenter)||v.barycenter>=d.barycenter)&&r(d,v)}}function h(d){return function(v){v.in.push(d),--v.indegree===0&&e.push(v)}}for(;e.length;){var m=e.pop();t.push(m),a.forEach(m.in.reverse(),s(m)),a.forEach(m.out,h(m))}return a.map(a.filter(t,function(d){return!d.merged}),function(d){return a.pick(d,["vs","i","barycenter","weight"])})}function r(e,t){var s=0,h=0;e.weight&&(s+=e.barycenter*e.weight,h+=e.weight),t.weight&&(s+=t.barycenter*t.weight,h+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=s/h,e.weight=h,e.i=Math.min(t.i,e.i),t.merged=!0}},6490:function(T,b,u){var a=u(2361),o=u(9506),l=u(5926),r=u(1349);T.exports=e;function e(h,m,d,v){var x=h.children(m),N=h.node(m),F=N?N.borderLeft:void 0,ae=N?N.borderRight:void 0,$={};F&&(x=a.filter(x,function(ee){return ee!==F&&ee!==ae}));var te=o(h,x);a.forEach(te,function(ee){if(h.children(ee.v).length){var pe=e(h,ee.v,d,v);$[ee.v]=pe,a.has(pe,"barycenter")&&s(ee,pe)}});var fe=l(te,d);t(fe,$);var B=r(fe,v);if(F&&(B.vs=a.flatten([F,B.vs,ae],!0),h.predecessors(F).length)){var he=h.node(h.predecessors(F)[0]),z=h.node(h.predecessors(ae)[0]);a.has(B,"barycenter")||(B.barycenter=0,B.weight=0),B.barycenter=(B.barycenter*B.weight+he.order+z.order)/(B.weight+2),B.weight+=2}return B}function t(h,m){a.forEach(h,function(d){d.vs=a.flatten(d.vs.map(function(v){return m[v]?m[v].vs:v}),!0)})}function s(h,m){a.isUndefined(h.barycenter)?(h.barycenter=m.barycenter,h.weight=m.weight):(h.barycenter=(h.barycenter*h.weight+m.barycenter*m.weight)/(h.weight+m.weight),h.weight+=m.weight)}},1349:function(T,b,u){var a=u(2361),o=u(3063);T.exports=l;function l(t,s){var h=o.partition(t,function($){return a.has($,"barycenter")}),m=h.lhs,d=a.sortBy(h.rhs,function($){return-$.i}),v=[],x=0,N=0,F=0;m.sort(e(!!s)),F=r(v,d,F),a.forEach(m,function($){F+=$.vs.length,v.push($.vs),x+=$.barycenter*$.weight,N+=$.weight,F=r(v,d,F)});var ae={vs:a.flatten(v,!0)};return N&&(ae.barycenter=x/N,ae.weight=N),ae}function r(t,s,h){for(var m;s.length&&(m=a.last(s)).i<=h;)s.pop(),t.push(m.vs),h++;return h}function e(t){return function(s,h){return s.barycenter<h.barycenter?-1:s.barycenter>h.barycenter?1:t?h.i-s.i:s.i-h.i}}},1970:function(T,b,u){var a=u(2361);T.exports=o;function o(e){var t=r(e);a.forEach(e.graph().dummyChains,function(s){for(var h=e.node(s),m=h.edgeObj,d=l(e,t,m.v,m.w),v=d.path,x=d.lca,N=0,F=v[N],ae=!0;s!==m.w;){if(h=e.node(s),ae){for(;(F=v[N])!==x&&e.node(F).maxRank<h.rank;)N++;F===x&&(ae=!1)}if(!ae){for(;N<v.length-1&&e.node(F=v[N+1]).minRank<=h.rank;)N++;F=v[N]}e.setParent(s,F),s=e.successors(s)[0]}})}function l(e,t,s,h){var m=[],d=[],v=Math.min(t[s].low,t[h].low),x=Math.max(t[s].lim,t[h].lim),N,F;N=s;do N=e.parent(N),m.push(N);while(N&&(t[N].low>v||x>t[N].lim));for(F=N,N=h;(N=e.parent(N))!==F;)d.push(N);return{path:m.concat(d.reverse()),lca:F}}function r(e){var t={},s=0;function h(m){var d=s;a.forEach(e.children(m),h),t[m]={low:d,lim:s++}}return a.forEach(e.children(),h),t}},2080:function(T,b,u){"use strict";var a=u(2361),o=u(6626).Graph,l=u(3063);T.exports={positionX:ae,findType1Conflicts:r,findType2Conflicts:e,addConflict:s,hasConflict:h,verticalAlignment:m,horizontalCompaction:d,alignCoordinates:N,findSmallestWidthAlignment:x,balance:F};function r(fe,B){var he={};function z(ee,pe){var S=0,q=0,M=ee.length,I=a.last(pe);return a.forEach(pe,function(j,ue){var se=t(fe,j),Ee=se?fe.node(se).order:M;(se||j===I)&&(a.forEach(pe.slice(q,ue+1),function(Ce){a.forEach(fe.predecessors(Ce),function(xe){var Oe=fe.node(xe),Le=Oe.order;(Le<S||Ee<Le)&&!(Oe.dummy&&fe.node(Ce).dummy)&&s(he,xe,Ce)})}),q=ue+1,S=Ee)}),pe}return a.reduce(B,z),he}function e(fe,B){var he={};function z(pe,S,q,M,I){var j;a.forEach(a.range(S,q),function(ue){j=pe[ue],fe.node(j).dummy&&a.forEach(fe.predecessors(j),function(se){var Ee=fe.node(se);Ee.dummy&&(Ee.order<M||Ee.order>I)&&s(he,se,j)})})}function ee(pe,S){var q=-1,M,I=0;return a.forEach(S,function(j,ue){if(fe.node(j).dummy==="border"){var se=fe.predecessors(j);se.length&&(M=fe.node(se[0]).order,z(S,I,ue,q,M),I=ue,q=M)}z(S,I,S.length,M,pe.length)}),S}return a.reduce(B,ee),he}function t(fe,B){if(fe.node(B).dummy)return a.find(fe.predecessors(B),function(he){return fe.node(he).dummy})}function s(fe,B,he){if(B>he){var z=B;B=he,he=z}var ee=fe[B];ee||(fe[B]=ee={}),ee[he]=!0}function h(fe,B,he){if(B>he){var z=B;B=he,he=z}return a.has(fe[B],he)}function m(fe,B,he,z){var ee={},pe={},S={};return a.forEach(B,function(q){a.forEach(q,function(M,I){ee[M]=M,pe[M]=M,S[M]=I})}),a.forEach(B,function(q){var M=-1;a.forEach(q,function(I){var j=z(I);if(j.length){j=a.sortBy(j,function(xe){return S[xe]});for(var ue=(j.length-1)/2,se=Math.floor(ue),Ee=Math.ceil(ue);se<=Ee;++se){var Ce=j[se];pe[I]===I&&M<S[Ce]&&!h(he,I,Ce)&&(pe[Ce]=I,pe[I]=ee[I]=ee[Ce],M=S[Ce])}}})}),{root:ee,align:pe}}function d(fe,B,he,z,ee){var pe={},S=v(fe,B,he,ee),q=ee?"borderLeft":"borderRight";function M(ue,se){for(var Ee=S.nodes(),Ce=Ee.pop(),xe={};Ce;)xe[Ce]?ue(Ce):(xe[Ce]=!0,Ee.push(Ce),Ee=Ee.concat(se(Ce))),Ce=Ee.pop()}function I(ue){pe[ue]=S.inEdges(ue).reduce(function(se,Ee){return Math.max(se,pe[Ee.v]+S.edge(Ee))},0)}function j(ue){var se=S.outEdges(ue).reduce(function(Ce,xe){return Math.min(Ce,pe[xe.w]-S.edge(xe))},Number.POSITIVE_INFINITY),Ee=fe.node(ue);se!==Number.POSITIVE_INFINITY&&Ee.borderType!==q&&(pe[ue]=Math.max(pe[ue],se))}return M(I,S.predecessors.bind(S)),M(j,S.successors.bind(S)),a.forEach(z,function(ue){pe[ue]=pe[he[ue]]}),pe}function v(fe,B,he,z){var ee=new o,pe=fe.graph(),S=$(pe.nodesep,pe.edgesep,z);return a.forEach(B,function(q){var M;a.forEach(q,function(I){var j=he[I];if(ee.setNode(j),M){var ue=he[M],se=ee.edge(ue,j);ee.setEdge(ue,j,Math.max(S(fe,I,M),se||0))}M=I})}),ee}function x(fe,B){return a.minBy(a.values(B),function(he){var z=Number.NEGATIVE_INFINITY,ee=Number.POSITIVE_INFINITY;return a.forIn(he,function(pe,S){var q=te(fe,S)/2;z=Math.max(pe+q,z),ee=Math.min(pe-q,ee)}),z-ee})}function N(fe,B){var he=a.values(B),z=a.min(he),ee=a.max(he);a.forEach(["u","d"],function(pe){a.forEach(["l","r"],function(S){var q=pe+S,M=fe[q],I;if(M!==B){var j=a.values(M);I=S==="l"?z-a.min(j):ee-a.max(j),I&&(fe[q]=a.mapValues(M,function(ue){return ue+I}))}})})}function F(fe,B){return a.mapValues(fe.ul,function(he,z){if(B)return fe[B.toLowerCase()][z];var ee=a.sortBy(a.map(fe,z));return(ee[1]+ee[2])/2})}function ae(fe){var B=l.buildLayerMatrix(fe),he=a.merge(r(fe,B),e(fe,B)),z={},ee;a.forEach(["u","d"],function(S){ee=S==="u"?B:a.values(B).reverse(),a.forEach(["l","r"],function(q){q==="r"&&(ee=a.map(ee,function(ue){return a.values(ue).reverse()}));var M=(S==="u"?fe.predecessors:fe.successors).bind(fe),I=m(fe,ee,he,M),j=d(fe,ee,I.root,I.align,q==="r");q==="r"&&(j=a.mapValues(j,function(ue){return-ue})),z[S+q]=j})});var pe=x(fe,z);return N(z,pe),F(z,fe.graph().align)}function $(fe,B,he){return function(z,ee,pe){var S=z.node(ee),q=z.node(pe),M=0,I;if(M+=S.width/2,a.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":I=-S.width/2;break;case"r":I=S.width/2;break}if(I&&(M+=he?I:-I),I=0,M+=(S.dummy?B:fe)/2,M+=(q.dummy?B:fe)/2,M+=q.width/2,a.has(q,"labelpos"))switch(q.labelpos.toLowerCase()){case"l":I=q.width/2;break;case"r":I=-q.width/2;break}return I&&(M+=he?I:-I),I=0,M}}function te(fe,B){return fe.node(B).width}},3021:function(T,b,u){"use strict";var a=u(2361),o=u(3063),l=u(2080).positionX;T.exports=r;function r(t){t=o.asNonCompoundGraph(t),e(t),a.forEach(l(t),function(s,h){t.node(h).x=s})}function e(t){var s=o.buildLayerMatrix(t),h=t.graph().ranksep,m=0;a.forEach(s,function(d){var v=a.max(a.map(d,function(x){return t.node(x).height}));a.forEach(d,function(x){t.node(x).y=m+v/2}),m+=v+h})}},1031:function(T,b,u){"use strict";var a=u(2361),o=u(6626).Graph,l=u(2416).slack;T.exports=r;function r(h){var m=new o({directed:!1}),d=h.nodes()[0],v=h.nodeCount();m.setNode(d,{});for(var x,N;e(m,h)<v;)x=t(m,h),N=m.hasNode(x.v)?l(h,x):-l(h,x),s(m,h,N);return m}function e(h,m){function d(v){a.forEach(m.nodeEdges(v),function(x){var N=x.v,F=v===N?x.w:N;!h.hasNode(F)&&!l(m,x)&&(h.setNode(F,{}),h.setEdge(v,F,{}),d(F))})}return a.forEach(h.nodes(),d),h.nodeCount()}function t(h,m){return a.minBy(m.edges(),function(d){if(h.hasNode(d.v)!==h.hasNode(d.w))return l(m,d)})}function s(h,m,d){a.forEach(h.nodes(),function(v){m.node(v).rank+=d})}},4505:function(T,b,u){"use strict";var a=u(2416),o=a.longestPath,l=u(1031),r=u(7076);T.exports=e;function e(m){switch(m.graph().ranker){case"network-simplex":h(m);break;case"tight-tree":s(m);break;case"longest-path":t(m);break;default:h(m)}}var t=o;function s(m){o(m),l(m)}function h(m){r(m)}},7076:function(T,b,u){"use strict";var a=u(2361),o=u(1031),l=u(2416).slack,r=u(2416).longestPath,e=u(6626).alg.preorder,t=u(6626).alg.postorder,s=u(3063).simplify;T.exports=h,h.initLowLimValues=x,h.initCutValues=m,h.calcCutValue=v,h.leaveEdge=F,h.enterEdge=ae,h.exchangeEdges=$;function h(he){he=s(he),r(he);var z=o(he);x(z),m(z,he);for(var ee,pe;ee=F(z);)pe=ae(z,he,ee),$(z,he,ee,pe)}function m(he,z){var ee=t(he,he.nodes());ee=ee.slice(0,ee.length-1),a.forEach(ee,function(pe){d(he,z,pe)})}function d(he,z,ee){var pe=he.node(ee),S=pe.parent;he.edge(ee,S).cutvalue=v(he,z,ee)}function v(he,z,ee){var pe=he.node(ee),S=pe.parent,q=!0,M=z.edge(ee,S),I=0;return M||(q=!1,M=z.edge(S,ee)),I=M.weight,a.forEach(z.nodeEdges(ee),function(j){var ue=j.v===ee,se=ue?j.w:j.v;if(se!==S){var Ee=ue===q,Ce=z.edge(j).weight;if(I+=Ee?Ce:-Ce,fe(he,ee,se)){var xe=he.edge(ee,se).cutvalue;I+=Ee?-xe:xe}}}),I}function x(he,z){arguments.length<2&&(z=he.nodes()[0]),N(he,{},1,z)}function N(he,z,ee,pe,S){var q=ee,M=he.node(pe);return z[pe]=!0,a.forEach(he.neighbors(pe),function(I){a.has(z,I)||(ee=N(he,z,ee,I,pe))}),M.low=q,M.lim=ee++,S?M.parent=S:delete M.parent,ee}function F(he){return a.find(he.edges(),function(z){return he.edge(z).cutvalue<0})}function ae(he,z,ee){var pe=ee.v,S=ee.w;z.hasEdge(pe,S)||(pe=ee.w,S=ee.v);var q=he.node(pe),M=he.node(S),I=q,j=!1;q.lim>M.lim&&(I=M,j=!0);var ue=a.filter(z.edges(),function(se){return j===B(he,he.node(se.v),I)&&j!==B(he,he.node(se.w),I)});return a.minBy(ue,function(se){return l(z,se)})}function $(he,z,ee,pe){var S=ee.v,q=ee.w;he.removeEdge(S,q),he.setEdge(pe.v,pe.w,{}),x(he),m(he,z),te(he,z)}function te(he,z){var ee=a.find(he.nodes(),function(S){return!z.node(S).parent}),pe=e(he,ee);pe=pe.slice(1),a.forEach(pe,function(S){var q=he.node(S).parent,M=z.edge(S,q),I=!1;M||(M=z.edge(q,S),I=!0),z.node(S).rank=z.node(q).rank+(I?M.minlen:-M.minlen)})}function fe(he,z,ee){return he.hasEdge(z,ee)}function B(he,z,ee){return ee.low<=z.lim&&z.lim<=ee.lim}},2416:function(T,b,u){"use strict";var a=u(2361);T.exports={longestPath:o,slack:l};function o(r){var e={};function t(s){var h=r.node(s);if(a.has(e,s))return h.rank;e[s]=!0;var m=a.min(a.map(r.outEdges(s),function(d){return t(d.w)-r.edge(d).minlen}));return(m===Number.POSITIVE_INFINITY||m===void 0||m===null)&&(m=0),h.rank=m}a.forEach(r.sources(),t)}function l(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen}},3063:function(T,b,u){"use strict";var a=u(2361),o=u(6626).Graph;T.exports={addDummyNode:l,simplify:r,asNonCompoundGraph:e,successorWeights:t,predecessorWeights:s,intersectRect:h,buildLayerMatrix:m,normalizeRanks:d,removeEmptyRanks:v,addBorderNode:x,maxRank:N,partition:F,time:ae,notime:$};function l(te,fe,B,he){var z;do z=a.uniqueId(he);while(te.hasNode(z));return B.dummy=fe,te.setNode(z,B),z}function r(te){var fe=new o().setGraph(te.graph());return a.forEach(te.nodes(),function(B){fe.setNode(B,te.node(B))}),a.forEach(te.edges(),function(B){var he=fe.edge(B.v,B.w)||{weight:0,minlen:1},z=te.edge(B);fe.setEdge(B.v,B.w,{weight:he.weight+z.weight,minlen:Math.max(he.minlen,z.minlen)})}),fe}function e(te){var fe=new o({multigraph:te.isMultigraph()}).setGraph(te.graph());return a.forEach(te.nodes(),function(B){te.children(B).length||fe.setNode(B,te.node(B))}),a.forEach(te.edges(),function(B){fe.setEdge(B,te.edge(B))}),fe}function t(te){var fe=a.map(te.nodes(),function(B){var he={};return a.forEach(te.outEdges(B),function(z){he[z.w]=(he[z.w]||0)+te.edge(z).weight}),he});return a.zipObject(te.nodes(),fe)}function s(te){var fe=a.map(te.nodes(),function(B){var he={};return a.forEach(te.inEdges(B),function(z){he[z.v]=(he[z.v]||0)+te.edge(z).weight}),he});return a.zipObject(te.nodes(),fe)}function h(te,fe){var B=te.x,he=te.y,z=fe.x-B,ee=fe.y-he,pe=te.width/2,S=te.height/2;if(!z&&!ee)throw new Error("Not possible to find intersection inside of the rectangle");var q,M;return Math.abs(ee)*pe>Math.abs(z)*S?(ee<0&&(S=-S),q=S*z/ee,M=S):(z<0&&(pe=-pe),q=pe,M=pe*ee/z),{x:B+q,y:he+M}}function m(te){var fe=a.map(a.range(N(te)+1),function(){return[]});return a.forEach(te.nodes(),function(B){var he=te.node(B),z=he.rank;a.isUndefined(z)||(fe[z][he.order]=B)}),fe}function d(te){var fe=a.min(a.map(te.nodes(),function(B){return te.node(B).rank}));a.forEach(te.nodes(),function(B){var he=te.node(B);a.has(he,"rank")&&(he.rank-=fe)})}function v(te){var fe=a.min(a.map(te.nodes(),function(ee){return te.node(ee).rank})),B=[];a.forEach(te.nodes(),function(ee){var pe=te.node(ee).rank-fe;B[pe]||(B[pe]=[]),B[pe].push(ee)});var he=0,z=te.graph().nodeRankFactor;a.forEach(B,function(ee,pe){a.isUndefined(ee)&&pe%z!==0?--he:he&&a.forEach(ee,function(S){te.node(S).rank+=he})})}function x(te,fe,B,he){var z={width:0,height:0};return arguments.length>=4&&(z.rank=B,z.order=he),l(te,"border",z,fe)}function N(te){return a.max(a.map(te.nodes(),function(fe){var B=te.node(fe).rank;if(!a.isUndefined(B))return B}))}function F(te,fe){var B={lhs:[],rhs:[]};return a.forEach(te,function(he){fe(he)?B.lhs.push(he):B.rhs.push(he)}),B}function ae(te,fe){var B=a.now();try{return fe()}finally{console.log(te+" time: "+(a.now()-B)+"ms")}}function $(te,fe){return fe()}},2275:function(T){T.exports="0.8.5"},4572:function(T){(function(b){"use strict";var u=te(),a=fe(),o=B(),l=he(),r={imagePlaceholder:void 0,cacheBust:!1},e={toSvg:t,toPng:h,toJpeg:m,toBlob:d,toPixelData:s,impl:{fontFaces:o,images:l,util:u,inliner:a,options:{}}};T.exports=e;function t(z,ee){return ee=ee||{},v(ee),Promise.resolve(z).then(function(S){return N(S,ee.filter,!0)}).then(F).then(ae).then(pe).then(function(S){return $(S,ee.width||u.width(z),ee.height||u.height(z))});function pe(S){return ee.bgcolor&&(S.style.backgroundColor=ee.bgcolor),ee.width&&(S.style.width=ee.width+"px"),ee.height&&(S.style.height=ee.height+"px"),ee.style&&Object.keys(ee.style).forEach(function(q){S.style[q]=ee.style[q]}),S}}function s(z,ee){return x(z,ee||{}).then(function(pe){return pe.getContext("2d").getImageData(0,0,u.width(z),u.height(z)).data})}function h(z,ee){return x(z,ee||{}).then(function(pe){return pe.toDataURL()})}function m(z,ee){return ee=ee||{},x(z,ee).then(function(pe){return pe.toDataURL("image/jpeg",ee.quality||1)})}function d(z,ee){return x(z,ee||{}).then(u.canvasToBlob)}function v(z){typeof z.imagePlaceholder=="undefined"?e.impl.options.imagePlaceholder=r.imagePlaceholder:e.impl.options.imagePlaceholder=z.imagePlaceholder,typeof z.cacheBust=="undefined"?e.impl.options.cacheBust=r.cacheBust:e.impl.options.cacheBust=z.cacheBust}function x(z,ee){return t(z,ee).then(u.makeImage).then(u.delay(100)).then(function(S){var q=pe(z);return q.getContext("2d").drawImage(S,0,0),q});function pe(S){var q=document.createElement("canvas");if(q.width=ee.width||u.width(S),q.height=ee.height||u.height(S),ee.bgcolor){var M=q.getContext("2d");M.fillStyle=ee.bgcolor,M.fillRect(0,0,q.width,q.height)}return q}}function N(z,ee,pe){if(!pe&&ee&&!ee(z))return Promise.resolve();return Promise.resolve(z).then(S).then(function(I){return q(z,I,ee)}).then(function(I){return M(z,I)});function S(I){return I instanceof HTMLCanvasElement?u.makeImage(I.toDataURL()):I.cloneNode(!1)}function q(I,j,ue){var se=I.childNodes;if(se.length===0)return Promise.resolve(j);return Ee(j,u.asArray(se),ue).then(function(){return j});function Ee(Ce,xe,Oe){var Le=Promise.resolve();return xe.forEach(function(Ge){Le=Le.then(function(){return N(Ge,Oe)}).then(function(He){He&&Ce.appendChild(He)})}),Le}}function M(I,j){if(!(j instanceof Element))return j;return Promise.resolve().then(ue).then(se).then(Ee).then(Ce).then(function(){return j});function ue(){xe(window.getComputedStyle(I),j.style);function xe(Oe,Le){Oe.cssText?Le.cssText=Oe.cssText:Ge(Oe,Le);function Ge(He,Et){u.asArray(He).forEach(function(Ct){Et.setProperty(Ct,He.getPropertyValue(Ct),He.getPropertyPriority(Ct))})}}}function se(){[":before",":after"].forEach(function(Oe){xe(Oe)});function xe(Oe){var Le=window.getComputedStyle(I,Oe),Ge=Le.getPropertyValue("content");if(Ge===""||Ge==="none")return;var He=u.uid();j.className=j.className+" "+He;var Et=document.createElement("style");Et.appendChild(Ct(He,Oe,Le)),j.appendChild(Et);function Ct(Gt,At,vt){var cn="."+Gt+":"+At,hn=vt.cssText?Bn(vt):Fn(vt);return document.createTextNode(cn+"{"+hn+"}");function Bn(ir){var Nr=ir.getPropertyValue("content");return ir.cssText+" content: "+Nr+";"}function Fn(ir){return u.asArray(ir).map(Nr).join("; ")+";";function Nr(Ei){return Ei+": "+ir.getPropertyValue(Ei)+(ir.getPropertyPriority(Ei)?" !important":"")}}}}}function Ee(){I instanceof HTMLTextAreaElement&&(j.innerHTML=I.value),I instanceof HTMLInputElement&&j.setAttribute("value",I.value)}function Ce(){j instanceof SVGElement&&(j.setAttribute("xmlns","http://www.w3.org/2000/svg"),j instanceof SVGRectElement&&["width","height"].forEach(function(xe){var Oe=j.getAttribute(xe);Oe&&j.style.setProperty(xe,Oe)}))}}}function F(z){return o.resolveAll().then(function(ee){var pe=document.createElement("style");return z.appendChild(pe),pe.appendChild(document.createTextNode(ee)),z})}function ae(z){return l.inlineAll(z).then(function(){return z})}function $(z,ee,pe){return Promise.resolve(z).then(function(S){return S.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(S)}).then(u.escapeXhtml).then(function(S){return'<foreignObject x="0" y="0" width="100%" height="100%">'+S+"</foreignObject>"}).then(function(S){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+ee+'" height="'+pe+'">'+S+"</svg>"}).then(function(S){return"data:image/svg+xml;charset=utf-8,"+S})}function te(){return{escape:Ce,parseExtension:ee,mimeType:pe,dataAsUrl:Ee,isDataUrl:S,canvasToBlob:M,resolveUrl:I,getAndEncode:se,uid:j(),delay:xe,asArray:Oe,escapeXhtml:Le,makeImage:ue,width:Ge,height:He};function z(){var Ct="application/font-woff",Gt="image/jpeg";return{woff:Ct,woff2:Ct,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Gt,jpeg:Gt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function ee(Ct){var Gt=/\.([^\.\/]*?)$/g.exec(Ct);return Gt?Gt[1]:""}function pe(Ct){var Gt=ee(Ct).toLowerCase();return z()[Gt]||""}function S(Ct){return Ct.search(/^(data:)/)!==-1}function q(Ct){return new Promise(function(Gt){for(var At=window.atob(Ct.toDataURL().split(",")[1]),vt=At.length,cn=new Uint8Array(vt),hn=0;hn<vt;hn++)cn[hn]=At.charCodeAt(hn);Gt(new Blob([cn],{type:"image/png"}))})}function M(Ct){return Ct.toBlob?new Promise(function(Gt){Ct.toBlob(Gt)}):q(Ct)}function I(Ct,Gt){var At=document.implementation.createHTMLDocument(),vt=At.createElement("base");At.head.appendChild(vt);var cn=At.createElement("a");return At.body.appendChild(cn),vt.href=Gt,cn.href=Ct,cn.href}function j(){var Ct=0;return function(){return"u"+Gt()+Ct++;function Gt(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function ue(Ct){return new Promise(function(Gt,At){var vt=new Image;vt.onload=function(){Gt(vt)},vt.onerror=At,vt.src=Ct})}function se(Ct){var Gt=3e4;return e.impl.options.cacheBust&&(Ct+=(/\?/.test(Ct)?"&":"?")+new Date().getTime()),new Promise(function(At){var vt=new XMLHttpRequest;vt.onreadystatechange=Bn,vt.ontimeout=Fn,vt.responseType="blob",vt.timeout=Gt,vt.open("GET",Ct,!0),vt.send();var cn;if(e.impl.options.imagePlaceholder){var hn=e.impl.options.imagePlaceholder.split(/,/);hn&&hn[1]&&(cn=hn[1])}function Bn(){if(vt.readyState===4){if(vt.status!==200){cn?At(cn):ir("cannot fetch resource: "+Ct+", status: "+vt.status);return}var Nr=new FileReader;Nr.onloadend=function(){var Ei=Nr.result.split(/,/)[1];At(Ei)},Nr.readAsDataURL(vt.response)}}function Fn(){cn?At(cn):ir("timeout of "+Gt+"ms occured while fetching resource: "+Ct)}function ir(Nr){console.error(Nr),At("")}})}function Ee(Ct,Gt){return"data:"+Gt+";base64,"+Ct}function Ce(Ct){return Ct.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function xe(Ct){return function(Gt){return new Promise(function(At){setTimeout(function(){At(Gt)},Ct)})}}function Oe(Ct){for(var Gt=[],At=Ct.length,vt=0;vt<At;vt++)Gt.push(Ct[vt]);return Gt}function Le(Ct){return Ct.replace(/#/g,"%23").replace(/\n/g,"%0A")}function Ge(Ct){var Gt=Et(Ct,"border-left-width"),At=Et(Ct,"border-right-width");return Ct.scrollWidth+Gt+At}function He(Ct){var Gt=Et(Ct,"border-top-width"),At=Et(Ct,"border-bottom-width");return Ct.scrollHeight+Gt+At}function Et(Ct,Gt){var At=window.getComputedStyle(Ct).getPropertyValue(Gt);return parseFloat(At.replace("px",""))}}function fe(){var z=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:q,shouldProcess:ee,impl:{readUrls:pe,inline:S}};function ee(M){return M.search(z)!==-1}function pe(M){for(var I=[],j;(j=z.exec(M))!==null;)I.push(j[1]);return I.filter(function(ue){return!u.isDataUrl(ue)})}function S(M,I,j,ue){return Promise.resolve(I).then(function(Ee){return j?u.resolveUrl(Ee,j):Ee}).then(ue||u.getAndEncode).then(function(Ee){return u.dataAsUrl(Ee,u.mimeType(I))}).then(function(Ee){return M.replace(se(I),"$1"+Ee+"$3")});function se(Ee){return new RegExp(`(url\\(['"]?)(`+u.escape(Ee)+`)(['"]?\\))`,"g")}}function q(M,I,j){if(ue())return Promise.resolve(M);return Promise.resolve(M).then(pe).then(function(se){var Ee=Promise.resolve(M);return se.forEach(function(Ce){Ee=Ee.then(function(xe){return S(xe,Ce,I,j)})}),Ee});function ue(){return!ee(M)}}}function B(){return{resolveAll:z,impl:{readAll:ee}};function z(){return ee(document).then(function(pe){return Promise.all(pe.map(function(S){return S.resolve()}))}).then(function(pe){return pe.join(`
`)})}function ee(){return Promise.resolve(u.asArray(document.styleSheets)).then(S).then(pe).then(function(M){return M.map(q)});function pe(M){return M.filter(function(I){return I.type===CSSRule.FONT_FACE_RULE}).filter(function(I){return a.shouldProcess(I.style.getPropertyValue("src"))})}function S(M){var I=[];return M.forEach(function(j){try{u.asArray(j.cssRules||[]).forEach(I.push.bind(I))}catch(ue){console.log("Error while reading CSS rules from "+j.href,ue.toString())}}),I}function q(M){return{resolve:function(){var j=(M.parentStyleSheet||{}).href;return a.inlineAll(M.cssText,j)},src:function(){return M.style.getPropertyValue("src")}}}}}function he(){return{inlineAll:ee,impl:{newImage:z}};function z(pe){return{inline:S};function S(q){return u.isDataUrl(pe.src)?Promise.resolve():Promise.resolve(pe.src).then(q||u.getAndEncode).then(function(M){return u.dataAsUrl(M,u.mimeType(pe.src))}).then(function(M){return new Promise(function(I,j){pe.onload=I,pe.onerror=j,pe.src=M})})}}function ee(pe){if(!(pe instanceof Element))return Promise.resolve(pe);return S(pe).then(function(){return pe instanceof HTMLImageElement?z(pe).inline():Promise.all(u.asArray(pe.childNodes).map(function(q){return ee(q)}))});function S(q){var M=q.style.getPropertyValue("background");return M?a.inlineAll(M).then(function(I){q.style.setProperty("background",I,q.style.getPropertyPriority("background"))}).then(function(){return q}):Promise.resolve(q)}}}})(this)},666:function(T){"use strict";var b=Object.prototype.hasOwnProperty,u="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(u=!1));function o(t,s,h){this.fn=t,this.context=s,this.once=h||!1}function l(t,s,h,m,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new o(h,m||t,d),x=u?u+s:s;return t._events[x]?t._events[x].fn?t._events[x]=[t._events[x],v]:t._events[x].push(v):(t._events[x]=v,t._eventsCount++),t}function r(t,s){--t._eventsCount===0?t._events=new a:delete t._events[s]}function e(){this._events=new a,this._eventsCount=0}e.prototype.eventNames=function(){var s=[],h,m;if(this._eventsCount===0)return s;for(m in h=this._events)b.call(h,m)&&s.push(u?m.slice(1):m);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(h)):s},e.prototype.listeners=function(s){var h=u?u+s:s,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var d=0,v=m.length,x=new Array(v);d<v;d++)x[d]=m[d].fn;return x},e.prototype.listenerCount=function(s){var h=u?u+s:s,m=this._events[h];return m?m.fn?1:m.length:0},e.prototype.emit=function(s,h,m,d,v,x){var N=u?u+s:s;if(!this._events[N])return!1;var F=this._events[N],ae=arguments.length,$,te;if(F.fn){switch(F.once&&this.removeListener(s,F.fn,void 0,!0),ae){case 1:return F.fn.call(F.context),!0;case 2:return F.fn.call(F.context,h),!0;case 3:return F.fn.call(F.context,h,m),!0;case 4:return F.fn.call(F.context,h,m,d),!0;case 5:return F.fn.call(F.context,h,m,d,v),!0;case 6:return F.fn.call(F.context,h,m,d,v,x),!0}for(te=1,$=new Array(ae-1);te<ae;te++)$[te-1]=arguments[te];F.fn.apply(F.context,$)}else{var fe=F.length,B;for(te=0;te<fe;te++)switch(F[te].once&&this.removeListener(s,F[te].fn,void 0,!0),ae){case 1:F[te].fn.call(F[te].context);break;case 2:F[te].fn.call(F[te].context,h);break;case 3:F[te].fn.call(F[te].context,h,m);break;case 4:F[te].fn.call(F[te].context,h,m,d);break;default:if(!$)for(B=1,$=new Array(ae-1);B<ae;B++)$[B-1]=arguments[B];F[te].fn.apply(F[te].context,$)}}return!0},e.prototype.on=function(s,h,m){return l(this,s,h,m,!1)},e.prototype.once=function(s,h,m){return l(this,s,h,m,!0)},e.prototype.removeListener=function(s,h,m,d){var v=u?u+s:s;if(!this._events[v])return this;if(!h)return r(this,v),this;var x=this._events[v];if(x.fn)x.fn===h&&(!d||x.once)&&(!m||x.context===m)&&r(this,v);else{for(var N=0,F=[],ae=x.length;N<ae;N++)(x[N].fn!==h||d&&!x[N].once||m&&x[N].context!==m)&&F.push(x[N]);F.length?this._events[v]=F.length===1?F[0]:F:r(this,v)}return this},e.prototype.removeAllListeners=function(s){var h;return s?(h=u?u+s:s,this._events[h]&&r(this,h)):(this._events=new a,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prefixed=u,e.EventEmitter=e,T.exports=e},5172:function(T,b,u){var a=u(9224);T.exports={Graph:a.Graph,json:u(7401),alg:u(4613),version:a.version}},1606:function(T,b,u){var a=u(5329);T.exports=o;function o(l){var r={},e=[],t;function s(h){a.has(r,h)||(r[h]=!0,t.push(h),a.each(l.successors(h),s),a.each(l.predecessors(h),s))}return a.each(l.nodes(),function(h){t=[],s(h),t.length&&e.push(t)}),e}},1482:function(T,b,u){var a=u(5329);T.exports=o;function o(r,e,t){a.isArray(e)||(e=[e]);var s=(r.isDirected()?r.successors:r.neighbors).bind(r),h=[],m={};return a.each(e,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);l(r,d,t==="post",m,s,h)}),h}function l(r,e,t,s,h,m){a.has(s,e)||(s[e]=!0,t||m.push(e),a.each(h(e),function(d){l(r,d,t,s,h,m)}),t&&m.push(e))}},845:function(T,b,u){var a=u(3746),o=u(5329);T.exports=l;function l(r,e,t){return o.transform(r.nodes(),function(s,h){s[h]=a(r,h,e,t)},{})}},3746:function(T,b,u){var a=u(5329),o=u(6614);T.exports=r;var l=a.constant(1);function r(t,s,h,m){return e(t,String(s),h||l,m||function(d){return t.outEdges(d)})}function e(t,s,h,m){var d={},v=new o,x,N,F=function(ae){var $=ae.v!==x?ae.v:ae.w,te=d[$],fe=h(ae),B=N.distance+fe;if(fe<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ae+" Weight: "+fe);B<te.distance&&(te.distance=B,te.predecessor=x,v.decrease($,B))};for(t.nodes().forEach(function(ae){var $=ae===s?0:Number.POSITIVE_INFINITY;d[ae]={distance:$},v.add(ae,$)});v.size()>0&&(x=v.removeMin(),N=d[x],N.distance!==Number.POSITIVE_INFINITY);)m(x).forEach(F);return d}},9324:function(T,b,u){var a=u(5329),o=u(4558);T.exports=l;function l(r){return a.filter(o(r),function(e){return e.length>1||e.length===1&&r.hasEdge(e[0],e[0])})}},2893:function(T,b,u){var a=u(5329);T.exports=l;var o=a.constant(1);function l(e,t,s){return r(e,t||o,s||function(h){return e.outEdges(h)})}function r(e,t,s){var h={},m=e.nodes();return m.forEach(function(d){h[d]={},h[d][d]={distance:0},m.forEach(function(v){d!==v&&(h[d][v]={distance:Number.POSITIVE_INFINITY})}),s(d).forEach(function(v){var x=v.v===d?v.w:v.v,N=t(v);h[d][x]={distance:N,predecessor:d}})}),m.forEach(function(d){var v=h[d];m.forEach(function(x){var N=h[x];m.forEach(function(F){var ae=N[d],$=v[F],te=N[F],fe=ae.distance+$.distance;fe<te.distance&&(te.distance=fe,te.predecessor=$.predecessor)})})}),h}},4613:function(T,b,u){T.exports={components:u(1606),dijkstra:u(3746),dijkstraAll:u(845),findCycles:u(9324),floydWarshall:u(2893),isAcyclic:u(588),postorder:u(8049),preorder:u(7158),prim:u(6058),tarjan:u(4558),topsort:u(7793)}},588:function(T,b,u){var a=u(7793);T.exports=o;function o(l){try{a(l)}catch(r){if(r instanceof a.CycleException)return!1;throw r}return!0}},8049:function(T,b,u){var a=u(1482);T.exports=o;function o(l,r){return a(l,r,"post")}},7158:function(T,b,u){var a=u(1482);T.exports=o;function o(l,r){return a(l,r,"pre")}},6058:function(T,b,u){var a=u(5329),o=u(6349),l=u(6614);T.exports=r;function r(e,t){var s=new o,h={},m=new l,d;function v(N){var F=N.v===d?N.w:N.v,ae=m.priority(F);if(ae!==void 0){var $=t(N);$<ae&&(h[F]=d,m.decrease(F,$))}}if(e.nodeCount()===0)return s;a.each(e.nodes(),function(N){m.add(N,Number.POSITIVE_INFINITY),s.setNode(N)}),m.decrease(e.nodes()[0],0);for(var x=!1;m.size()>0;){if(d=m.removeMin(),a.has(h,d))s.setEdge(d,h[d]);else{if(x)throw new Error("Input graph is not connected: "+e);x=!0}e.nodeEdges(d).forEach(v)}return s}},4558:function(T,b,u){var a=u(5329);T.exports=o;function o(l){var r=0,e=[],t={},s=[];function h(m){var d=t[m]={onStack:!0,lowlink:r,index:r++};if(e.push(m),l.successors(m).forEach(function(N){a.has(t,N)?t[N].onStack&&(d.lowlink=Math.min(d.lowlink,t[N].index)):(h(N),d.lowlink=Math.min(d.lowlink,t[N].lowlink))}),d.lowlink===d.index){var v=[],x;do x=e.pop(),t[x].onStack=!1,v.push(x);while(m!==x);s.push(v)}}return l.nodes().forEach(function(m){a.has(t,m)||h(m)}),s}},7793:function(T,b,u){var a=u(5329);T.exports=o,o.CycleException=l;function o(r){var e={},t={},s=[];function h(m){if(a.has(t,m))throw new l;a.has(e,m)||(t[m]=!0,e[m]=!0,a.each(r.predecessors(m),h),delete t[m],s.push(m))}if(a.each(r.sinks(),h),a.size(e)!==r.nodeCount())throw new l;return s}function l(){}l.prototype=new Error},6614:function(T,b,u){var a=u(5329);T.exports=o;function o(){this._arr=[],this._keyIndices={}}o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map(function(l){return l.key})},o.prototype.has=function(l){return a.has(this._keyIndices,l)},o.prototype.priority=function(l){var r=this._keyIndices[l];if(r!==void 0)return this._arr[r].priority},o.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(l,r){var e=this._keyIndices;if(l=String(l),!a.has(e,l)){var t=this._arr,s=t.length;return e[l]=s,t.push({key:l,priority:r}),this._decrease(s),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var l=this._arr.pop();return delete this._keyIndices[l.key],this._heapify(0),l.key},o.prototype.decrease=function(l,r){var e=this._keyIndices[l];if(r>this._arr[e].priority)throw new Error("New priority is greater than current priority. Key: "+l+" Old: "+this._arr[e].priority+" New: "+r);this._arr[e].priority=r,this._decrease(e)},o.prototype._heapify=function(l){var r=this._arr,e=2*l,t=e+1,s=l;e<r.length&&(s=r[e].priority<r[s].priority?e:s,t<r.length&&(s=r[t].priority<r[s].priority?t:s),s!==l&&(this._swap(l,s),this._heapify(s)))},o.prototype._decrease=function(l){for(var r=this._arr,e=r[l].priority,t;l!==0&&(t=l>>1,!(r[t].priority<e));)this._swap(l,t),l=t},o.prototype._swap=function(l,r){var e=this._arr,t=this._keyIndices,s=e[l],h=e[r];e[l]=h,e[r]=s,t[h.key]=l,t[s.key]=r}},6349:function(T,b,u){"use strict";var a=u(5329);T.exports=e;var o="\0",l="\0",r="";function e(v){this._isDirected=a.has(v,"directed")?v.directed:!0,this._isMultigraph=a.has(v,"multigraph")?v.multigraph:!1,this._isCompound=a.has(v,"compound")?v.compound:!1,this._label=void 0,this._defaultNodeLabelFn=a.constant(void 0),this._defaultEdgeLabelFn=a.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[l]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}e.prototype._nodeCount=0,e.prototype._edgeCount=0,e.prototype.isDirected=function(){return this._isDirected},e.prototype.isMultigraph=function(){return this._isMultigraph},e.prototype.isCompound=function(){return this._isCompound},e.prototype.setGraph=function(v){return this._label=v,this},e.prototype.graph=function(){return this._label},e.prototype.setDefaultNodeLabel=function(v){return a.isFunction(v)||(v=a.constant(v)),this._defaultNodeLabelFn=v,this},e.prototype.nodeCount=function(){return this._nodeCount},e.prototype.nodes=function(){return a.keys(this._nodes)},e.prototype.sources=function(){var v=this;return a.filter(this.nodes(),function(x){return a.isEmpty(v._in[x])})},e.prototype.sinks=function(){var v=this;return a.filter(this.nodes(),function(x){return a.isEmpty(v._out[x])})},e.prototype.setNodes=function(v,x){var N=arguments,F=this;return a.each(v,function(ae){N.length>1?F.setNode(ae,x):F.setNode(ae)}),this},e.prototype.setNode=function(v,x){return a.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=x),this):(this._nodes[v]=arguments.length>1?x:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]=l,this._children[v]={},this._children[l][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},e.prototype.node=function(v){return this._nodes[v]},e.prototype.hasNode=function(v){return a.has(this._nodes,v)},e.prototype.removeNode=function(v){var x=this;if(a.has(this._nodes,v)){var N=function(F){x.removeEdge(x._edgeObjs[F])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],a.each(this.children(v),function(F){x.setParent(F)}),delete this._children[v]),a.each(a.keys(this._in[v]),N),delete this._in[v],delete this._preds[v],a.each(a.keys(this._out[v]),N),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},e.prototype.setParent=function(v,x){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(a.isUndefined(x))x=l;else{x+="";for(var N=x;!a.isUndefined(N);N=this.parent(N))if(N===v)throw new Error("Setting "+x+" as parent of "+v+" would create a cycle");this.setNode(x)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=x,this._children[x][v]=!0,this},e.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},e.prototype.parent=function(v){if(this._isCompound){var x=this._parent[v];if(x!==l)return x}},e.prototype.children=function(v){if(a.isUndefined(v)&&(v=l),this._isCompound){var x=this._children[v];if(x)return a.keys(x)}else{if(v===l)return this.nodes();if(this.hasNode(v))return[]}},e.prototype.predecessors=function(v){var x=this._preds[v];if(x)return a.keys(x)},e.prototype.successors=function(v){var x=this._sucs[v];if(x)return a.keys(x)},e.prototype.neighbors=function(v){var x=this.predecessors(v);if(x)return a.union(x,this.successors(v))},e.prototype.isLeaf=function(v){var x;return this.isDirected()?x=this.successors(v):x=this.neighbors(v),x.length===0},e.prototype.filterNodes=function(v){var x=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});x.setGraph(this.graph());var N=this;a.each(this._nodes,function($,te){v(te)&&x.setNode(te,$)}),a.each(this._edgeObjs,function($){x.hasNode($.v)&&x.hasNode($.w)&&x.setEdge($,N.edge($))});var F={};function ae($){var te=N.parent($);return te===void 0||x.hasNode(te)?(F[$]=te,te):te in F?F[te]:ae(te)}return this._isCompound&&a.each(x.nodes(),function($){x.setParent($,ae($))}),x},e.prototype.setDefaultEdgeLabel=function(v){return a.isFunction(v)||(v=a.constant(v)),this._defaultEdgeLabelFn=v,this},e.prototype.edgeCount=function(){return this._edgeCount},e.prototype.edges=function(){return a.values(this._edgeObjs)},e.prototype.setPath=function(v,x){var N=this,F=arguments;return a.reduce(v,function(ae,$){return F.length>1?N.setEdge(ae,$,x):N.setEdge(ae,$),$}),this},e.prototype.setEdge=function(){var v,x,N,F,ae=!1,$=arguments[0];typeof $=="object"&&$!==null&&"v"in $?(v=$.v,x=$.w,N=$.name,arguments.length===2&&(F=arguments[1],ae=!0)):(v=$,x=arguments[1],N=arguments[3],arguments.length>2&&(F=arguments[2],ae=!0)),v=""+v,x=""+x,a.isUndefined(N)||(N=""+N);var te=h(this._isDirected,v,x,N);if(a.has(this._edgeLabels,te))return ae&&(this._edgeLabels[te]=F),this;if(!a.isUndefined(N)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(x),this._edgeLabels[te]=ae?F:this._defaultEdgeLabelFn(v,x,N);var fe=m(this._isDirected,v,x,N);return v=fe.v,x=fe.w,Object.freeze(fe),this._edgeObjs[te]=fe,t(this._preds[x],v),t(this._sucs[v],x),this._in[x][te]=fe,this._out[v][te]=fe,this._edgeCount++,this},e.prototype.edge=function(v,x,N){var F=arguments.length===1?d(this._isDirected,arguments[0]):h(this._isDirected,v,x,N);return this._edgeLabels[F]},e.prototype.hasEdge=function(v,x,N){var F=arguments.length===1?d(this._isDirected,arguments[0]):h(this._isDirected,v,x,N);return a.has(this._edgeLabels,F)},e.prototype.removeEdge=function(v,x,N){var F=arguments.length===1?d(this._isDirected,arguments[0]):h(this._isDirected,v,x,N),ae=this._edgeObjs[F];return ae&&(v=ae.v,x=ae.w,delete this._edgeLabels[F],delete this._edgeObjs[F],s(this._preds[x],v),s(this._sucs[v],x),delete this._in[x][F],delete this._out[v][F],this._edgeCount--),this},e.prototype.inEdges=function(v,x){var N=this._in[v];if(N){var F=a.values(N);return x?a.filter(F,function(ae){return ae.v===x}):F}},e.prototype.outEdges=function(v,x){var N=this._out[v];if(N){var F=a.values(N);return x?a.filter(F,function(ae){return ae.w===x}):F}},e.prototype.nodeEdges=function(v,x){var N=this.inEdges(v,x);if(N)return N.concat(this.outEdges(v,x))};function t(v,x){v[x]?v[x]++:v[x]=1}function s(v,x){--v[x]||delete v[x]}function h(v,x,N,F){var ae=""+x,$=""+N;if(!v&&ae>$){var te=ae;ae=$,$=te}return ae+r+$+r+(a.isUndefined(F)?o:F)}function m(v,x,N,F){var ae=""+x,$=""+N;if(!v&&ae>$){var te=ae;ae=$,$=te}var fe={v:ae,w:$};return F&&(fe.name=F),fe}function d(v,x){return h(v,x.v,x.w,x.name)}},9224:function(T,b,u){T.exports={Graph:u(6349),version:u(6544)}},7401:function(T,b,u){var a=u(5329),o=u(6349);T.exports={write:l,read:t};function l(s){var h={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:r(s),edges:e(s)};return a.isUndefined(s.graph())||(h.value=a.clone(s.graph())),h}function r(s){return a.map(s.nodes(),function(h){var m=s.node(h),d=s.parent(h),v={v:h};return a.isUndefined(m)||(v.value=m),a.isUndefined(d)||(v.parent=d),v})}function e(s){return a.map(s.edges(),function(h){var m=s.edge(h),d={v:h.v,w:h.w};return a.isUndefined(h.name)||(d.name=h.name),a.isUndefined(m)||(d.value=m),d})}function t(s){var h=new o(s.options).setGraph(s.value);return a.each(s.nodes,function(m){h.setNode(m.v,m.value),m.parent&&h.setParent(m.v,m.parent)}),a.each(s.edges,function(m){h.setEdge({v:m.v,w:m.w,name:m.name},m.value)}),h}},5329:function(T,b,u){var a;try{a={clone:u(6833),constant:u(3503),each:u(6934),filter:u(4725),has:u(9946),isArray:u(744),isEmpty:u(1627),isFunction:u(9363),isUndefined:u(6513),keys:u(5451),map:u(9924),reduce:u(6473),size:u(617),transform:u(1116),union:u(4065),values:u(1229)}}catch(o){}a||(a=window._),T.exports=a},6544:function(T){T.exports="2.1.8"},4634:function(T,b,u){"use strict";u.r(b),u.d(b,{isAnyArray:function(){return o}});const a=Object.prototype.toString;function o(l){const r=a.call(l);return r.endsWith("Array]")&&!r.includes("Big")}},4609:function(T,b){var u,a;(function(o,l){"use strict";typeof T.exports=="object"?T.exports=o.document?l(o,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return l(r)}:l(o)})(typeof window!="undefined"?window:this,function(o,l){"use strict";var r=[],e=Object.getPrototypeOf,t=r.slice,s=r.flat?function(P){return r.flat.call(P)}:function(P){return r.concat.apply([],P)},h=r.push,m=r.indexOf,d={},v=d.toString,x=d.hasOwnProperty,N=x.toString,F=N.call(Object),ae={},$=function(W){return typeof W=="function"&&typeof W.nodeType!="number"&&typeof W.item!="function"},te=function(W){return W!=null&&W===W.window},fe=o.document,B={type:!0,src:!0,nonce:!0,noModule:!0};function he(P,W,ye){ye=ye||fe;var Se,Be,Fe=ye.createElement("script");if(Fe.text=P,W)for(Se in B)Be=W[Se]||W.getAttribute&&W.getAttribute(Se),Be&&Fe.setAttribute(Se,Be);ye.head.appendChild(Fe).parentNode.removeChild(Fe)}function z(P){return P==null?P+"":typeof P=="object"||typeof P=="function"?d[v.call(P)]||"object":typeof P}var ee="3.7.1",pe=/HTML$/i,S=function(P,W){return new S.fn.init(P,W)};S.fn=S.prototype={jquery:ee,constructor:S,length:0,toArray:function(){return t.call(this)},get:function(P){return P==null?t.call(this):P<0?this[P+this.length]:this[P]},pushStack:function(P){var W=S.merge(this.constructor(),P);return W.prevObject=this,W},each:function(P){return S.each(this,P)},map:function(P){return this.pushStack(S.map(this,function(W,ye){return P.call(W,ye,W)}))},slice:function(){return this.pushStack(t.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(P,W){return(W+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(P,W){return W%2}))},eq:function(P){var W=this.length,ye=+P+(P<0?W:0);return this.pushStack(ye>=0&&ye<W?[this[ye]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:r.sort,splice:r.splice},S.extend=S.fn.extend=function(){var P,W,ye,Se,Be,Fe,qe=arguments[0]||{},Mt=1,Lt=arguments.length,vn=!1;for(typeof qe=="boolean"&&(vn=qe,qe=arguments[Mt]||{},Mt++),typeof qe!="object"&&!$(qe)&&(qe={}),Mt===Lt&&(qe=this,Mt--);Mt<Lt;Mt++)if((P=arguments[Mt])!=null)for(W in P)Se=P[W],!(W==="__proto__"||qe===Se)&&(vn&&Se&&(S.isPlainObject(Se)||(Be=Array.isArray(Se)))?(ye=qe[W],Be&&!Array.isArray(ye)?Fe=[]:!Be&&!S.isPlainObject(ye)?Fe={}:Fe=ye,Be=!1,qe[W]=S.extend(vn,Fe,Se)):Se!==void 0&&(qe[W]=Se));return qe},S.extend({expando:"jQuery"+(ee+Math.random()).replace(/\D/g,""),isReady:!0,error:function(P){throw new Error(P)},noop:function(){},isPlainObject:function(P){var W,ye;return!P||v.call(P)!=="[object Object]"?!1:(W=e(P),W?(ye=x.call(W,"constructor")&&W.constructor,typeof ye=="function"&&N.call(ye)===F):!0)},isEmptyObject:function(P){var W;for(W in P)return!1;return!0},globalEval:function(P,W,ye){he(P,{nonce:W&&W.nonce},ye)},each:function(P,W){var ye,Se=0;if(q(P))for(ye=P.length;Se<ye&&W.call(P[Se],Se,P[Se])!==!1;Se++);else for(Se in P)if(W.call(P[Se],Se,P[Se])===!1)break;return P},text:function(P){var W,ye="",Se=0,Be=P.nodeType;if(!Be)for(;W=P[Se++];)ye+=S.text(W);return Be===1||Be===11?P.textContent:Be===9?P.documentElement.textContent:Be===3||Be===4?P.nodeValue:ye},makeArray:function(P,W){var ye=W||[];return P!=null&&(q(Object(P))?S.merge(ye,typeof P=="string"?[P]:P):h.call(ye,P)),ye},inArray:function(P,W,ye){return W==null?-1:m.call(W,P,ye)},isXMLDoc:function(P){var W=P&&P.namespaceURI,ye=P&&(P.ownerDocument||P).documentElement;return!pe.test(W||ye&&ye.nodeName||"HTML")},merge:function(P,W){for(var ye=+W.length,Se=0,Be=P.length;Se<ye;Se++)P[Be++]=W[Se];return P.length=Be,P},grep:function(P,W,ye){for(var Se,Be=[],Fe=0,qe=P.length,Mt=!ye;Fe<qe;Fe++)Se=!W(P[Fe],Fe),Se!==Mt&&Be.push(P[Fe]);return Be},map:function(P,W,ye){var Se,Be,Fe=0,qe=[];if(q(P))for(Se=P.length;Fe<Se;Fe++)Be=W(P[Fe],Fe,ye),Be!=null&&qe.push(Be);else for(Fe in P)Be=W(P[Fe],Fe,ye),Be!=null&&qe.push(Be);return s(qe)},guid:1,support:ae}),typeof Symbol=="function"&&(S.fn[Symbol.iterator]=r[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(P,W){d["[object "+W+"]"]=W.toLowerCase()});function q(P){var W=!!P&&"length"in P&&P.length,ye=z(P);return $(P)||te(P)?!1:ye==="array"||W===0||typeof W=="number"&&W>0&&W-1 in P}function M(P,W){return P.nodeName&&P.nodeName.toLowerCase()===W.toLowerCase()}var I=r.pop,j=r.sort,ue=r.splice,se="[\\x20\\t\\r\\n\\f]",Ee=new RegExp("^"+se+"+|((?:^|[^\\\\])(?:\\\\.)*)"+se+"+$","g");S.contains=function(P,W){var ye=W&&W.parentNode;return P===ye||!!(ye&&ye.nodeType===1&&(P.contains?P.contains(ye):P.compareDocumentPosition&&P.compareDocumentPosition(ye)&16))};var Ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function xe(P,W){return W?P==="\0"?"\uFFFD":P.slice(0,-1)+"\\"+P.charCodeAt(P.length-1).toString(16)+" ":"\\"+P}S.escapeSelector=function(P){return(P+"").replace(Ce,xe)};var Oe=fe,Le=h;(function(){var P,W,ye,Se,Be,Fe=Le,qe,Mt,Lt,vn,Zn,Qn=S.expando,jn=0,pr=0,vi=Ha(),co=Ha(),di=Ha(),Zo=Ha(),qi=function(Bt,nn){return Bt===nn&&(Be=!0),0},is="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Js="(?:\\\\[\\da-fA-F]{1,6}"+se+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Yo="\\["+se+"*("+Js+")(?:"+se+"*([*^$|!~]?=)"+se+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Js+"))|)"+se+"*\\]",Ss=":("+Js+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Yo+")*)|.*)\\)|)",ko=new RegExp(se+"+","g"),vs=new RegExp("^"+se+"*,"+se+"*"),xa=new RegExp("^"+se+"*([>+~]|"+se+")"+se+"*"),ua=new RegExp(se+"|>"),_s=new RegExp(Ss),Pa=new RegExp("^"+Js+"$"),Us={ID:new RegExp("^#("+Js+")"),CLASS:new RegExp("^\\.("+Js+")"),TAG:new RegExp("^("+Js+"|[*])"),ATTR:new RegExp("^"+Yo),PSEUDO:new RegExp("^"+Ss),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+se+"*(even|odd|(([+-]|)(\\d*)n|)"+se+"*(?:([+-]|)"+se+"*(\\d+)|))"+se+"*\\)|)","i"),bool:new RegExp("^(?:"+is+")$","i"),needsContext:new RegExp("^"+se+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+se+"*((?:-\\d)?\\d*)"+se+"*\\)|)(?=[^-]|$)","i")},ta=/^(?:input|select|textarea|button)$/i,La=/^h\d$/i,qs=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mu=/[+~]/,eo=new RegExp("\\\\[\\da-fA-F]{1,6}"+se+"?|\\\\([^\\r\\n\\f])","g"),ds=function(Bt,nn){var Dn="0x"+Bt.slice(1)-65536;return nn||(Dn<0?String.fromCharCode(Dn+65536):String.fromCharCode(Dn>>10|55296,Dn&1023|56320))},Vs=function(){eu()},oa=Wu(function(Bt){return Bt.disabled===!0&&M(Bt,"fieldset")},{dir:"parentNode",next:"legend"});function Oa(){try{return qe.activeElement}catch(Bt){}}try{Fe.apply(r=t.call(Oe.childNodes),Oe.childNodes),r[Oe.childNodes.length].nodeType}catch(Bt){Fe={apply:function(nn,Dn){Le.apply(nn,t.call(Dn))},call:function(nn){Le.apply(nn,t.call(arguments,1))}}}function ls(Bt,nn,Dn,Dt){var en,un,Jn,Tr,Sr,Wi,Fi,ro=nn&&nn.ownerDocument,_o=nn?nn.nodeType:9;if(Dn=Dn||[],typeof Bt!="string"||!Bt||_o!==1&&_o!==9&&_o!==11)return Dn;if(!Dt&&(eu(nn),nn=nn||qe,Lt)){if(_o!==11&&(Sr=qs.exec(Bt)))if(en=Sr[1]){if(_o===9)if(Jn=nn.getElementById(en)){if(Jn.id===en)return Fe.call(Dn,Jn),Dn}else return Dn;else if(ro&&(Jn=ro.getElementById(en))&&ls.contains(nn,Jn)&&Jn.id===en)return Fe.call(Dn,Jn),Dn}else{if(Sr[2])return Fe.apply(Dn,nn.getElementsByTagName(Bt)),Dn;if((en=Sr[3])&&nn.getElementsByClassName)return Fe.apply(Dn,nn.getElementsByClassName(en)),Dn}if(!Zo[Bt+" "]&&(!vn||!vn.test(Bt))){if(Fi=Bt,ro=nn,_o===1&&(ua.test(Bt)||xa.test(Bt))){for(ro=mu.test(Bt)&&cc(nn.parentNode)||nn,(ro!=nn||!ae.scope)&&((Tr=nn.getAttribute("id"))?Tr=S.escapeSelector(Tr):nn.setAttribute("id",Tr=Qn)),Wi=Aa(Bt),un=Wi.length;un--;)Wi[un]=(Tr?"#"+Tr:":scope")+" "+Vu(Wi[un]);Fi=Wi.join(",")}try{return Fe.apply(Dn,ro.querySelectorAll(Fi)),Dn}catch($i){Zo(Bt,!0)}finally{Tr===Qn&&nn.removeAttribute("id")}}}return Yr(Bt.replace(Ee,"$1"),nn,Dn,Dt)}function Ha(){var Bt=[];function nn(Dn,Dt){return Bt.push(Dn+" ")>W.cacheLength&&delete nn[Bt.shift()],nn[Dn+" "]=Dt}return nn}function sa(Bt){return Bt[Qn]=!0,Bt}function Xa(Bt){var nn=qe.createElement("fieldset");try{return!!Bt(nn)}catch(Dn){return!1}finally{nn.parentNode&&nn.parentNode.removeChild(nn),nn=null}}function ma(Bt){return function(nn){return M(nn,"input")&&nn.type===Bt}}function uc(Bt){return function(nn){return(M(nn,"input")||M(nn,"button"))&&nn.type===Bt}}function qa(Bt){return function(nn){return"form"in nn?nn.parentNode&&nn.disabled===!1?"label"in nn?"label"in nn.parentNode?nn.parentNode.disabled===Bt:nn.disabled===Bt:nn.isDisabled===Bt||nn.isDisabled!==!Bt&&oa(nn)===Bt:nn.disabled===Bt:"label"in nn?nn.disabled===Bt:!1}}function Sa(Bt){return sa(function(nn){return nn=+nn,sa(function(Dn,Dt){for(var en,un=Bt([],Dn.length,nn),Jn=un.length;Jn--;)Dn[en=un[Jn]]&&(Dn[en]=!(Dt[en]=Dn[en]))})})}function cc(Bt){return Bt&&typeof Bt.getElementsByTagName!="undefined"&&Bt}function eu(Bt){var nn,Dn=Bt?Bt.ownerDocument||Bt:Oe;return Dn==qe||Dn.nodeType!==9||!Dn.documentElement||(qe=Dn,Mt=qe.documentElement,Lt=!S.isXMLDoc(qe),Zn=Mt.matches||Mt.webkitMatchesSelector||Mt.msMatchesSelector,Mt.msMatchesSelector&&Oe!=qe&&(nn=qe.defaultView)&&nn.top!==nn&&nn.addEventListener("unload",Vs),ae.getById=Xa(function(Dt){return Mt.appendChild(Dt).id=S.expando,!qe.getElementsByName||!qe.getElementsByName(S.expando).length}),ae.disconnectedMatch=Xa(function(Dt){return Zn.call(Dt,"*")}),ae.scope=Xa(function(){return qe.querySelectorAll(":scope")}),ae.cssHas=Xa(function(){try{return qe.querySelector(":has(*,:jqfake)"),!1}catch(Dt){return!0}}),ae.getById?(W.filter.ID=function(Dt){var en=Dt.replace(eo,ds);return function(un){return un.getAttribute("id")===en}},W.find.ID=function(Dt,en){if(typeof en.getElementById!="undefined"&&Lt){var un=en.getElementById(Dt);return un?[un]:[]}}):(W.filter.ID=function(Dt){var en=Dt.replace(eo,ds);return function(un){var Jn=typeof un.getAttributeNode!="undefined"&&un.getAttributeNode("id");return Jn&&Jn.value===en}},W.find.ID=function(Dt,en){if(typeof en.getElementById!="undefined"&&Lt){var un,Jn,Tr,Sr=en.getElementById(Dt);if(Sr){if(un=Sr.getAttributeNode("id"),un&&un.value===Dt)return[Sr];for(Tr=en.getElementsByName(Dt),Jn=0;Sr=Tr[Jn++];)if(un=Sr.getAttributeNode("id"),un&&un.value===Dt)return[Sr]}return[]}}),W.find.TAG=function(Dt,en){return typeof en.getElementsByTagName!="undefined"?en.getElementsByTagName(Dt):en.querySelectorAll(Dt)},W.find.CLASS=function(Dt,en){if(typeof en.getElementsByClassName!="undefined"&&Lt)return en.getElementsByClassName(Dt)},vn=[],Xa(function(Dt){var en;Mt.appendChild(Dt).innerHTML="<a id='"+Qn+"' href='' disabled='disabled'></a><select id='"+Qn+"-\r\\' disabled='disabled'><option selected=''></option></select>",Dt.querySelectorAll("[selected]").length||vn.push("\\["+se+"*(?:value|"+is+")"),Dt.querySelectorAll("[id~="+Qn+"-]").length||vn.push("~="),Dt.querySelectorAll("a#"+Qn+"+*").length||vn.push(".#.+[+~]"),Dt.querySelectorAll(":checked").length||vn.push(":checked"),en=qe.createElement("input"),en.setAttribute("type","hidden"),Dt.appendChild(en).setAttribute("name","D"),Mt.appendChild(Dt).disabled=!0,Dt.querySelectorAll(":disabled").length!==2&&vn.push(":enabled",":disabled"),en=qe.createElement("input"),en.setAttribute("name",""),Dt.appendChild(en),Dt.querySelectorAll("[name='']").length||vn.push("\\["+se+"*name"+se+"*="+se+`*(?:''|"")`)}),ae.cssHas||vn.push(":has"),vn=vn.length&&new RegExp(vn.join("|")),qi=function(Dt,en){if(Dt===en)return Be=!0,0;var un=!Dt.compareDocumentPosition-!en.compareDocumentPosition;return un||(un=(Dt.ownerDocument||Dt)==(en.ownerDocument||en)?Dt.compareDocumentPosition(en):1,un&1||!ae.sortDetached&&en.compareDocumentPosition(Dt)===un?Dt===qe||Dt.ownerDocument==Oe&&ls.contains(Oe,Dt)?-1:en===qe||en.ownerDocument==Oe&&ls.contains(Oe,en)?1:Se?m.call(Se,Dt)-m.call(Se,en):0:un&4?-1:1)}),qe}ls.matches=function(Bt,nn){return ls(Bt,null,null,nn)},ls.matchesSelector=function(Bt,nn){if(eu(Bt),Lt&&!Zo[nn+" "]&&(!vn||!vn.test(nn)))try{var Dn=Zn.call(Bt,nn);if(Dn||ae.disconnectedMatch||Bt.document&&Bt.document.nodeType!==11)return Dn}catch(Dt){Zo(nn,!0)}return ls(nn,qe,null,[Bt]).length>0},ls.contains=function(Bt,nn){return(Bt.ownerDocument||Bt)!=qe&&eu(Bt),S.contains(Bt,nn)},ls.attr=function(Bt,nn){(Bt.ownerDocument||Bt)!=qe&&eu(Bt);var Dn=W.attrHandle[nn.toLowerCase()],Dt=Dn&&x.call(W.attrHandle,nn.toLowerCase())?Dn(Bt,nn,!Lt):void 0;return Dt!==void 0?Dt:Bt.getAttribute(nn)},ls.error=function(Bt){throw new Error("Syntax error, unrecognized expression: "+Bt)},S.uniqueSort=function(Bt){var nn,Dn=[],Dt=0,en=0;if(Be=!ae.sortStable,Se=!ae.sortStable&&t.call(Bt,0),j.call(Bt,qi),Be){for(;nn=Bt[en++];)nn===Bt[en]&&(Dt=Dn.push(en));for(;Dt--;)ue.call(Bt,Dn[Dt],1)}return Se=null,Bt},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(t.apply(this)))},W=S.expr={cacheLength:50,createPseudo:sa,match:Us,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Bt){return Bt[1]=Bt[1].replace(eo,ds),Bt[3]=(Bt[3]||Bt[4]||Bt[5]||"").replace(eo,ds),Bt[2]==="~="&&(Bt[3]=" "+Bt[3]+" "),Bt.slice(0,4)},CHILD:function(Bt){return Bt[1]=Bt[1].toLowerCase(),Bt[1].slice(0,3)==="nth"?(Bt[3]||ls.error(Bt[0]),Bt[4]=+(Bt[4]?Bt[5]+(Bt[6]||1):2*(Bt[3]==="even"||Bt[3]==="odd")),Bt[5]=+(Bt[7]+Bt[8]||Bt[3]==="odd")):Bt[3]&&ls.error(Bt[0]),Bt},PSEUDO:function(Bt){var nn,Dn=!Bt[6]&&Bt[2];return Us.CHILD.test(Bt[0])?null:(Bt[3]?Bt[2]=Bt[4]||Bt[5]||"":Dn&&_s.test(Dn)&&(nn=Aa(Dn,!0))&&(nn=Dn.indexOf(")",Dn.length-nn)-Dn.length)&&(Bt[0]=Bt[0].slice(0,nn),Bt[2]=Dn.slice(0,nn)),Bt.slice(0,3))}},filter:{TAG:function(Bt){var nn=Bt.replace(eo,ds).toLowerCase();return Bt==="*"?function(){return!0}:function(Dn){return M(Dn,nn)}},CLASS:function(Bt){var nn=vi[Bt+" "];return nn||(nn=new RegExp("(^|"+se+")"+Bt+"("+se+"|$)"))&&vi(Bt,function(Dn){return nn.test(typeof Dn.className=="string"&&Dn.className||typeof Dn.getAttribute!="undefined"&&Dn.getAttribute("class")||"")})},ATTR:function(Bt,nn,Dn){return function(Dt){var en=ls.attr(Dt,Bt);return en==null?nn==="!=":nn?(en+="",nn==="="?en===Dn:nn==="!="?en!==Dn:nn==="^="?Dn&&en.indexOf(Dn)===0:nn==="*="?Dn&&en.indexOf(Dn)>-1:nn==="$="?Dn&&en.slice(-Dn.length)===Dn:nn==="~="?(" "+en.replace(ko," ")+" ").indexOf(Dn)>-1:nn==="|="?en===Dn||en.slice(0,Dn.length+1)===Dn+"-":!1):!0}},CHILD:function(Bt,nn,Dn,Dt,en){var un=Bt.slice(0,3)!=="nth",Jn=Bt.slice(-4)!=="last",Tr=nn==="of-type";return Dt===1&&en===0?function(Sr){return!!Sr.parentNode}:function(Sr,Wi,Fi){var ro,_o,$i,Ds,Ws,ya=un!==Jn?"nextSibling":"previousSibling",au=Sr.parentNode,yu=Tr&&Sr.nodeName.toLowerCase(),Rs=!Fi&&!Tr,uu=!1;if(au){if(un){for(;ya;){for($i=Sr;$i=$i[ya];)if(Tr?M($i,yu):$i.nodeType===1)return!1;Ws=ya=Bt==="only"&&!Ws&&"nextSibling"}return!0}if(Ws=[Jn?au.firstChild:au.lastChild],Jn&&Rs){for(_o=au[Qn]||(au[Qn]={}),ro=_o[Bt]||[],Ds=ro[0]===jn&&ro[1],uu=Ds&&ro[2],$i=Ds&&au.childNodes[Ds];$i=++Ds&&$i&&$i[ya]||(uu=Ds=0)||Ws.pop();)if($i.nodeType===1&&++uu&&$i===Sr){_o[Bt]=[jn,Ds,uu];break}}else if(Rs&&(_o=Sr[Qn]||(Sr[Qn]={}),ro=_o[Bt]||[],Ds=ro[0]===jn&&ro[1],uu=Ds),uu===!1)for(;($i=++Ds&&$i&&$i[ya]||(uu=Ds=0)||Ws.pop())&&!((Tr?M($i,yu):$i.nodeType===1)&&++uu&&(Rs&&(_o=$i[Qn]||($i[Qn]={}),_o[Bt]=[jn,uu]),$i===Sr)););return uu-=en,uu===Dt||uu%Dt===0&&uu/Dt>=0}}},PSEUDO:function(Bt,nn){var Dn,Dt=W.pseudos[Bt]||W.setFilters[Bt.toLowerCase()]||ls.error("unsupported pseudo: "+Bt);return Dt[Qn]?Dt(nn):Dt.length>1?(Dn=[Bt,Bt,"",nn],W.setFilters.hasOwnProperty(Bt.toLowerCase())?sa(function(en,un){for(var Jn,Tr=Dt(en,nn),Sr=Tr.length;Sr--;)Jn=m.call(en,Tr[Sr]),en[Jn]=!(un[Jn]=Tr[Sr])}):function(en){return Dt(en,0,Dn)}):Dt}},pseudos:{not:sa(function(Bt){var nn=[],Dn=[],Dt=Mr(Bt.replace(Ee,"$1"));return Dt[Qn]?sa(function(en,un,Jn,Tr){for(var Sr,Wi=Dt(en,null,Tr,[]),Fi=en.length;Fi--;)(Sr=Wi[Fi])&&(en[Fi]=!(un[Fi]=Sr))}):function(en,un,Jn){return nn[0]=en,Dt(nn,null,Jn,Dn),nn[0]=null,!Dn.pop()}}),has:sa(function(Bt){return function(nn){return ls(Bt,nn).length>0}}),contains:sa(function(Bt){return Bt=Bt.replace(eo,ds),function(nn){return(nn.textContent||S.text(nn)).indexOf(Bt)>-1}}),lang:sa(function(Bt){return Pa.test(Bt||"")||ls.error("unsupported lang: "+Bt),Bt=Bt.replace(eo,ds).toLowerCase(),function(nn){var Dn;do if(Dn=Lt?nn.lang:nn.getAttribute("xml:lang")||nn.getAttribute("lang"))return Dn=Dn.toLowerCase(),Dn===Bt||Dn.indexOf(Bt+"-")===0;while((nn=nn.parentNode)&&nn.nodeType===1);return!1}}),target:function(Bt){var nn=o.location&&o.location.hash;return nn&&nn.slice(1)===Bt.id},root:function(Bt){return Bt===Mt},focus:function(Bt){return Bt===Oa()&&qe.hasFocus()&&!!(Bt.type||Bt.href||~Bt.tabIndex)},enabled:qa(!1),disabled:qa(!0),checked:function(Bt){return M(Bt,"input")&&!!Bt.checked||M(Bt,"option")&&!!Bt.selected},selected:function(Bt){return Bt.parentNode&&Bt.parentNode.selectedIndex,Bt.selected===!0},empty:function(Bt){for(Bt=Bt.firstChild;Bt;Bt=Bt.nextSibling)if(Bt.nodeType<6)return!1;return!0},parent:function(Bt){return!W.pseudos.empty(Bt)},header:function(Bt){return La.test(Bt.nodeName)},input:function(Bt){return ta.test(Bt.nodeName)},button:function(Bt){return M(Bt,"input")&&Bt.type==="button"||M(Bt,"button")},text:function(Bt){var nn;return M(Bt,"input")&&Bt.type==="text"&&((nn=Bt.getAttribute("type"))==null||nn.toLowerCase()==="text")},first:Sa(function(){return[0]}),last:Sa(function(Bt,nn){return[nn-1]}),eq:Sa(function(Bt,nn,Dn){return[Dn<0?Dn+nn:Dn]}),even:Sa(function(Bt,nn){for(var Dn=0;Dn<nn;Dn+=2)Bt.push(Dn);return Bt}),odd:Sa(function(Bt,nn){for(var Dn=1;Dn<nn;Dn+=2)Bt.push(Dn);return Bt}),lt:Sa(function(Bt,nn,Dn){var Dt;for(Dn<0?Dt=Dn+nn:Dn>nn?Dt=nn:Dt=Dn;--Dt>=0;)Bt.push(Dt);return Bt}),gt:Sa(function(Bt,nn,Dn){for(var Dt=Dn<0?Dn+nn:Dn;++Dt<nn;)Bt.push(Dt);return Bt})}},W.pseudos.nth=W.pseudos.eq;for(P in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})W.pseudos[P]=ma(P);for(P in{submit:!0,reset:!0})W.pseudos[P]=uc(P);function lc(){}lc.prototype=W.filters=W.pseudos,W.setFilters=new lc;function Aa(Bt,nn){var Dn,Dt,en,un,Jn,Tr,Sr,Wi=co[Bt+" "];if(Wi)return nn?0:Wi.slice(0);for(Jn=Bt,Tr=[],Sr=W.preFilter;Jn;){(!Dn||(Dt=vs.exec(Jn)))&&(Dt&&(Jn=Jn.slice(Dt[0].length)||Jn),Tr.push(en=[])),Dn=!1,(Dt=xa.exec(Jn))&&(Dn=Dt.shift(),en.push({value:Dn,type:Dt[0].replace(Ee," ")}),Jn=Jn.slice(Dn.length));for(un in W.filter)(Dt=Us[un].exec(Jn))&&(!Sr[un]||(Dt=Sr[un](Dt)))&&(Dn=Dt.shift(),en.push({value:Dn,type:un,matches:Dt}),Jn=Jn.slice(Dn.length));if(!Dn)break}return nn?Jn.length:Jn?ls.error(Bt):co(Bt,Tr).slice(0)}function Vu(Bt){for(var nn=0,Dn=Bt.length,Dt="";nn<Dn;nn++)Dt+=Bt[nn].value;return Dt}function Wu(Bt,nn,Dn){var Dt=nn.dir,en=nn.next,un=en||Dt,Jn=Dn&&un==="parentNode",Tr=pr++;return nn.first?function(Sr,Wi,Fi){for(;Sr=Sr[Dt];)if(Sr.nodeType===1||Jn)return Bt(Sr,Wi,Fi);return!1}:function(Sr,Wi,Fi){var ro,_o,$i=[jn,Tr];if(Fi){for(;Sr=Sr[Dt];)if((Sr.nodeType===1||Jn)&&Bt(Sr,Wi,Fi))return!0}else for(;Sr=Sr[Dt];)if(Sr.nodeType===1||Jn)if(_o=Sr[Qn]||(Sr[Qn]={}),en&&M(Sr,en))Sr=Sr[Dt]||Sr;else{if((ro=_o[un])&&ro[0]===jn&&ro[1]===Tr)return $i[2]=ro[2];if(_o[un]=$i,$i[2]=Bt(Sr,Wi,Fi))return!0}return!1}}function Lu(Bt){return Bt.length>1?function(nn,Dn,Dt){for(var en=Bt.length;en--;)if(!Bt[en](nn,Dn,Dt))return!1;return!0}:Bt[0]}function Ku(Bt,nn,Dn){for(var Dt=0,en=nn.length;Dt<en;Dt++)ls(Bt,nn[Dt],Dn);return Dn}function du(Bt,nn,Dn,Dt,en){for(var un,Jn=[],Tr=0,Sr=Bt.length,Wi=nn!=null;Tr<Sr;Tr++)(un=Bt[Tr])&&(!Dn||Dn(un,Dt,en))&&(Jn.push(un),Wi&&nn.push(Tr));return Jn}function qt(Bt,nn,Dn,Dt,en,un){return Dt&&!Dt[Qn]&&(Dt=qt(Dt)),en&&!en[Qn]&&(en=qt(en,un)),sa(function(Jn,Tr,Sr,Wi){var Fi,ro,_o,$i,Ds=[],Ws=[],ya=Tr.length,au=Jn||Ku(nn||"*",Sr.nodeType?[Sr]:Sr,[]),yu=Bt&&(Jn||!nn)?du(au,Ds,Bt,Sr,Wi):au;if(Dn?($i=en||(Jn?Bt:ya||Dt)?[]:Tr,Dn(yu,$i,Sr,Wi)):$i=yu,Dt)for(Fi=du($i,Ws),Dt(Fi,[],Sr,Wi),ro=Fi.length;ro--;)(_o=Fi[ro])&&($i[Ws[ro]]=!(yu[Ws[ro]]=_o));if(Jn){if(en||Bt){if(en){for(Fi=[],ro=$i.length;ro--;)(_o=$i[ro])&&Fi.push(yu[ro]=_o);en(null,$i=[],Fi,Wi)}for(ro=$i.length;ro--;)(_o=$i[ro])&&(Fi=en?m.call(Jn,_o):Ds[ro])>-1&&(Jn[Fi]=!(Tr[Fi]=_o))}}else $i=du($i===Tr?$i.splice(ya,$i.length):$i),en?en(null,Tr,$i,Wi):Fe.apply(Tr,$i)})}function In(Bt){for(var nn,Dn,Dt,en=Bt.length,un=W.relative[Bt[0].type],Jn=un||W.relative[" "],Tr=un?1:0,Sr=Wu(function(ro){return ro===nn},Jn,!0),Wi=Wu(function(ro){return m.call(nn,ro)>-1},Jn,!0),Fi=[function(ro,_o,$i){var Ds=!un&&($i||_o!=ye)||((nn=_o).nodeType?Sr(ro,_o,$i):Wi(ro,_o,$i));return nn=null,Ds}];Tr<en;Tr++)if(Dn=W.relative[Bt[Tr].type])Fi=[Wu(Lu(Fi),Dn)];else{if(Dn=W.filter[Bt[Tr].type].apply(null,Bt[Tr].matches),Dn[Qn]){for(Dt=++Tr;Dt<en&&!W.relative[Bt[Dt].type];Dt++);return qt(Tr>1&&Lu(Fi),Tr>1&&Vu(Bt.slice(0,Tr-1).concat({value:Bt[Tr-2].type===" "?"*":""})).replace(Ee,"$1"),Dn,Tr<Dt&&In(Bt.slice(Tr,Dt)),Dt<en&&In(Bt=Bt.slice(Dt)),Dt<en&&Vu(Bt))}Fi.push(Dn)}return Lu(Fi)}function br(Bt,nn){var Dn=nn.length>0,Dt=Bt.length>0,en=function(un,Jn,Tr,Sr,Wi){var Fi,ro,_o,$i=0,Ds="0",Ws=un&&[],ya=[],au=ye,yu=un||Dt&&W.find.TAG("*",Wi),Rs=jn+=au==null?1:Math.random()||.1,uu=yu.length;for(Wi&&(ye=Jn==qe||Jn||Wi);Ds!==uu&&(Fi=yu[Ds])!=null;Ds++){if(Dt&&Fi){for(ro=0,!Jn&&Fi.ownerDocument!=qe&&(eu(Fi),Tr=!Lt);_o=Bt[ro++];)if(_o(Fi,Jn||qe,Tr)){Fe.call(Sr,Fi);break}Wi&&(jn=Rs)}Dn&&((Fi=!_o&&Fi)&&$i--,un&&Ws.push(Fi))}if($i+=Ds,Dn&&Ds!==$i){for(ro=0;_o=nn[ro++];)_o(Ws,ya,Jn,Tr);if(un){if($i>0)for(;Ds--;)Ws[Ds]||ya[Ds]||(ya[Ds]=I.call(Sr));ya=du(ya)}Fe.apply(Sr,ya),Wi&&!un&&ya.length>0&&$i+nn.length>1&&S.uniqueSort(Sr)}return Wi&&(jn=Rs,ye=au),Ws};return Dn?sa(en):en}function Mr(Bt,nn){var Dn,Dt=[],en=[],un=di[Bt+" "];if(!un){for(nn||(nn=Aa(Bt)),Dn=nn.length;Dn--;)un=In(nn[Dn]),un[Qn]?Dt.push(un):en.push(un);un=di(Bt,br(en,Dt)),un.selector=Bt}return un}function Yr(Bt,nn,Dn,Dt){var en,un,Jn,Tr,Sr,Wi=typeof Bt=="function"&&Bt,Fi=!Dt&&Aa(Bt=Wi.selector||Bt);if(Dn=Dn||[],Fi.length===1){if(un=Fi[0]=Fi[0].slice(0),un.length>2&&(Jn=un[0]).type==="ID"&&nn.nodeType===9&&Lt&&W.relative[un[1].type]){if(nn=(W.find.ID(Jn.matches[0].replace(eo,ds),nn)||[])[0],nn)Wi&&(nn=nn.parentNode);else return Dn;Bt=Bt.slice(un.shift().value.length)}for(en=Us.needsContext.test(Bt)?0:un.length;en--&&(Jn=un[en],!W.relative[Tr=Jn.type]);)if((Sr=W.find[Tr])&&(Dt=Sr(Jn.matches[0].replace(eo,ds),mu.test(un[0].type)&&cc(nn.parentNode)||nn))){if(un.splice(en,1),Bt=Dt.length&&Vu(un),!Bt)return Fe.apply(Dn,Dt),Dn;break}}return(Wi||Mr(Bt,Fi))(Dt,nn,!Lt,Dn,!nn||mu.test(Bt)&&cc(nn.parentNode)||nn),Dn}ae.sortStable=Qn.split("").sort(qi).join("")===Qn,eu(),ae.sortDetached=Xa(function(Bt){return Bt.compareDocumentPosition(qe.createElement("fieldset"))&1}),S.find=ls,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,ls.compile=Mr,ls.select=Yr,ls.setDocument=eu,ls.tokenize=Aa,ls.escape=S.escapeSelector,ls.getText=S.text,ls.isXML=S.isXMLDoc,ls.selectors=S.expr,ls.support=S.support,ls.uniqueSort=S.uniqueSort})();var Ge=function(P,W,ye){for(var Se=[],Be=ye!==void 0;(P=P[W])&&P.nodeType!==9;)if(P.nodeType===1){if(Be&&S(P).is(ye))break;Se.push(P)}return Se},He=function(P,W){for(var ye=[];P;P=P.nextSibling)P.nodeType===1&&P!==W&&ye.push(P);return ye},Et=S.expr.match.needsContext,Ct=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Gt(P,W,ye){return $(W)?S.grep(P,function(Se,Be){return!!W.call(Se,Be,Se)!==ye}):W.nodeType?S.grep(P,function(Se){return Se===W!==ye}):typeof W!="string"?S.grep(P,function(Se){return m.call(W,Se)>-1!==ye}):S.filter(W,P,ye)}S.filter=function(P,W,ye){var Se=W[0];return ye&&(P=":not("+P+")"),W.length===1&&Se.nodeType===1?S.find.matchesSelector(Se,P)?[Se]:[]:S.find.matches(P,S.grep(W,function(Be){return Be.nodeType===1}))},S.fn.extend({find:function(P){var W,ye,Se=this.length,Be=this;if(typeof P!="string")return this.pushStack(S(P).filter(function(){for(W=0;W<Se;W++)if(S.contains(Be[W],this))return!0}));for(ye=this.pushStack([]),W=0;W<Se;W++)S.find(P,Be[W],ye);return Se>1?S.uniqueSort(ye):ye},filter:function(P){return this.pushStack(Gt(this,P||[],!1))},not:function(P){return this.pushStack(Gt(this,P||[],!0))},is:function(P){return!!Gt(this,typeof P=="string"&&Et.test(P)?S(P):P||[],!1).length}});var At,vt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,cn=S.fn.init=function(P,W,ye){var Se,Be;if(!P)return this;if(ye=ye||At,typeof P=="string")if(P[0]==="<"&&P[P.length-1]===">"&&P.length>=3?Se=[null,P,null]:Se=vt.exec(P),Se&&(Se[1]||!W))if(Se[1]){if(W=W instanceof S?W[0]:W,S.merge(this,S.parseHTML(Se[1],W&&W.nodeType?W.ownerDocument||W:fe,!0)),Ct.test(Se[1])&&S.isPlainObject(W))for(Se in W)$(this[Se])?this[Se](W[Se]):this.attr(Se,W[Se]);return this}else return Be=fe.getElementById(Se[2]),Be&&(this[0]=Be,this.length=1),this;else return!W||W.jquery?(W||ye).find(P):this.constructor(W).find(P);else{if(P.nodeType)return this[0]=P,this.length=1,this;if($(P))return ye.ready!==void 0?ye.ready(P):P(S)}return S.makeArray(P,this)};cn.prototype=S.fn,At=S(fe);var hn=/^(?:parents|prev(?:Until|All))/,Bn={children:!0,contents:!0,next:!0,prev:!0};S.fn.extend({has:function(P){var W=S(P,this),ye=W.length;return this.filter(function(){for(var Se=0;Se<ye;Se++)if(S.contains(this,W[Se]))return!0})},closest:function(P,W){var ye,Se=0,Be=this.length,Fe=[],qe=typeof P!="string"&&S(P);if(!Et.test(P)){for(;Se<Be;Se++)for(ye=this[Se];ye&&ye!==W;ye=ye.parentNode)if(ye.nodeType<11&&(qe?qe.index(ye)>-1:ye.nodeType===1&&S.find.matchesSelector(ye,P))){Fe.push(ye);break}}return this.pushStack(Fe.length>1?S.uniqueSort(Fe):Fe)},index:function(P){return P?typeof P=="string"?m.call(S(P),this[0]):m.call(this,P.jquery?P[0]:P):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(P,W){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(P,W))))},addBack:function(P){return this.add(P==null?this.prevObject:this.prevObject.filter(P))}});function Fn(P,W){for(;(P=P[W])&&P.nodeType!==1;);return P}S.each({parent:function(P){var W=P.parentNode;return W&&W.nodeType!==11?W:null},parents:function(P){return Ge(P,"parentNode")},parentsUntil:function(P,W,ye){return Ge(P,"parentNode",ye)},next:function(P){return Fn(P,"nextSibling")},prev:function(P){return Fn(P,"previousSibling")},nextAll:function(P){return Ge(P,"nextSibling")},prevAll:function(P){return Ge(P,"previousSibling")},nextUntil:function(P,W,ye){return Ge(P,"nextSibling",ye)},prevUntil:function(P,W,ye){return Ge(P,"previousSibling",ye)},siblings:function(P){return He((P.parentNode||{}).firstChild,P)},children:function(P){return He(P.firstChild)},contents:function(P){return P.contentDocument!=null&&e(P.contentDocument)?P.contentDocument:(M(P,"template")&&(P=P.content||P),S.merge([],P.childNodes))}},function(P,W){S.fn[P]=function(ye,Se){var Be=S.map(this,W,ye);return P.slice(-5)!=="Until"&&(Se=ye),Se&&typeof Se=="string"&&(Be=S.filter(Se,Be)),this.length>1&&(Bn[P]||S.uniqueSort(Be),hn.test(P)&&Be.reverse()),this.pushStack(Be)}});var ir=/[^\x20\t\r\n\f]+/g;function Nr(P){var W={};return S.each(P.match(ir)||[],function(ye,Se){W[Se]=!0}),W}S.Callbacks=function(P){P=typeof P=="string"?Nr(P):S.extend({},P);var W,ye,Se,Be,Fe=[],qe=[],Mt=-1,Lt=function(){for(Be=Be||P.once,Se=W=!0;qe.length;Mt=-1)for(ye=qe.shift();++Mt<Fe.length;)Fe[Mt].apply(ye[0],ye[1])===!1&&P.stopOnFalse&&(Mt=Fe.length,ye=!1);P.memory||(ye=!1),W=!1,Be&&(ye?Fe=[]:Fe="")},vn={add:function(){return Fe&&(ye&&!W&&(Mt=Fe.length-1,qe.push(ye)),function Zn(Qn){S.each(Qn,function(jn,pr){$(pr)?(!P.unique||!vn.has(pr))&&Fe.push(pr):pr&&pr.length&&z(pr)!=="string"&&Zn(pr)})}(arguments),ye&&!W&&Lt()),this},remove:function(){return S.each(arguments,function(Zn,Qn){for(var jn;(jn=S.inArray(Qn,Fe,jn))>-1;)Fe.splice(jn,1),jn<=Mt&&Mt--}),this},has:function(Zn){return Zn?S.inArray(Zn,Fe)>-1:Fe.length>0},empty:function(){return Fe&&(Fe=[]),this},disable:function(){return Be=qe=[],Fe=ye="",this},disabled:function(){return!Fe},lock:function(){return Be=qe=[],!ye&&!W&&(Fe=ye=""),this},locked:function(){return!!Be},fireWith:function(Zn,Qn){return Be||(Qn=Qn||[],Qn=[Zn,Qn.slice?Qn.slice():Qn],qe.push(Qn),W||Lt()),this},fire:function(){return vn.fireWith(this,arguments),this},fired:function(){return!!Se}};return vn};function Ei(P){return P}function ci(P){throw P}function Ot(P,W,ye,Se){var Be;try{P&&$(Be=P.promise)?Be.call(P).done(W).fail(ye):P&&$(Be=P.then)?Be.call(P,W,ye):W.apply(void 0,[P].slice(Se))}catch(Fe){ye.apply(void 0,[Fe])}}S.extend({Deferred:function(P){var W=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],ye="pending",Se={state:function(){return ye},always:function(){return Be.done(arguments).fail(arguments),this},catch:function(Fe){return Se.then(null,Fe)},pipe:function(){var Fe=arguments;return S.Deferred(function(qe){S.each(W,function(Mt,Lt){var vn=$(Fe[Lt[4]])&&Fe[Lt[4]];Be[Lt[1]](function(){var Zn=vn&&vn.apply(this,arguments);Zn&&$(Zn.promise)?Zn.promise().progress(qe.notify).done(qe.resolve).fail(qe.reject):qe[Lt[0]+"With"](this,vn?[Zn]:arguments)})}),Fe=null}).promise()},then:function(Fe,qe,Mt){var Lt=0;function vn(Zn,Qn,jn,pr){return function(){var vi=this,co=arguments,di=function(){var qi,is;if(!(Zn<Lt)){if(qi=jn.apply(vi,co),qi===Qn.promise())throw new TypeError("Thenable self-resolution");is=qi&&(typeof qi=="object"||typeof qi=="function")&&qi.then,$(is)?pr?is.call(qi,vn(Lt,Qn,Ei,pr),vn(Lt,Qn,ci,pr)):(Lt++,is.call(qi,vn(Lt,Qn,Ei,pr),vn(Lt,Qn,ci,pr),vn(Lt,Qn,Ei,Qn.notifyWith))):(jn!==Ei&&(vi=void 0,co=[qi]),(pr||Qn.resolveWith)(vi,co))}},Zo=pr?di:function(){try{di()}catch(qi){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(qi,Zo.error),Zn+1>=Lt&&(jn!==ci&&(vi=void 0,co=[qi]),Qn.rejectWith(vi,co))}};Zn?Zo():(S.Deferred.getErrorHook?Zo.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(Zo.error=S.Deferred.getStackHook()),o.setTimeout(Zo))}}return S.Deferred(function(Zn){W[0][3].add(vn(0,Zn,$(Mt)?Mt:Ei,Zn.notifyWith)),W[1][3].add(vn(0,Zn,$(Fe)?Fe:Ei)),W[2][3].add(vn(0,Zn,$(qe)?qe:ci))}).promise()},promise:function(Fe){return Fe!=null?S.extend(Fe,Se):Se}},Be={};return S.each(W,function(Fe,qe){var Mt=qe[2],Lt=qe[5];Se[qe[1]]=Mt.add,Lt&&Mt.add(function(){ye=Lt},W[3-Fe][2].disable,W[3-Fe][3].disable,W[0][2].lock,W[0][3].lock),Mt.add(qe[3].fire),Be[qe[0]]=function(){return Be[qe[0]+"With"](this===Be?void 0:this,arguments),this},Be[qe[0]+"With"]=Mt.fireWith}),Se.promise(Be),P&&P.call(Be,Be),Be},when:function(P){var W=arguments.length,ye=W,Se=Array(ye),Be=t.call(arguments),Fe=S.Deferred(),qe=function(Mt){return function(Lt){Se[Mt]=this,Be[Mt]=arguments.length>1?t.call(arguments):Lt,--W||Fe.resolveWith(Se,Be)}};if(W<=1&&(Ot(P,Fe.done(qe(ye)).resolve,Fe.reject,!W),Fe.state()==="pending"||$(Be[ye]&&Be[ye].then)))return Fe.then();for(;ye--;)Ot(Be[ye],qe(ye),Fe.reject);return Fe.promise()}});var fr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(P,W){o.console&&o.console.warn&&P&&fr.test(P.name)&&o.console.warn("jQuery.Deferred exception: "+P.message,P.stack,W)},S.readyException=function(P){o.setTimeout(function(){throw P})};var Pi=S.Deferred();S.fn.ready=function(P){return Pi.then(P).catch(function(W){S.readyException(W)}),this},S.extend({isReady:!1,readyWait:1,ready:function(P){(P===!0?--S.readyWait:S.isReady)||(S.isReady=!0,!(P!==!0&&--S.readyWait>0)&&Pi.resolveWith(fe,[S]))}}),S.ready.then=Pi.then;function Li(){fe.removeEventListener("DOMContentLoaded",Li),o.removeEventListener("load",Li),S.ready()}fe.readyState==="complete"||fe.readyState!=="loading"&&!fe.documentElement.doScroll?o.setTimeout(S.ready):(fe.addEventListener("DOMContentLoaded",Li),o.addEventListener("load",Li));var zn=function(P,W,ye,Se,Be,Fe,qe){var Mt=0,Lt=P.length,vn=ye==null;if(z(ye)==="object"){Be=!0;for(Mt in ye)zn(P,W,Mt,ye[Mt],!0,Fe,qe)}else if(Se!==void 0&&(Be=!0,$(Se)||(qe=!0),vn&&(qe?(W.call(P,Se),W=null):(vn=W,W=function(Zn,Qn,jn){return vn.call(S(Zn),jn)})),W))for(;Mt<Lt;Mt++)W(P[Mt],ye,qe?Se:Se.call(P[Mt],Mt,W(P[Mt],ye)));return Be?P:vn?W.call(P):Lt?W(P[0],ye):Fe},$e=/^-ms-/,Xt=/-([a-z])/g;function Rt(P,W){return W.toUpperCase()}function _t(P){return P.replace($e,"ms-").replace(Xt,Rt)}var Tt=function(P){return P.nodeType===1||P.nodeType===9||!+P.nodeType};function at(){this.expando=S.expando+at.uid++}at.uid=1,at.prototype={cache:function(P){var W=P[this.expando];return W||(W={},Tt(P)&&(P.nodeType?P[this.expando]=W:Object.defineProperty(P,this.expando,{value:W,configurable:!0}))),W},set:function(P,W,ye){var Se,Be=this.cache(P);if(typeof W=="string")Be[_t(W)]=ye;else for(Se in W)Be[_t(Se)]=W[Se];return Be},get:function(P,W){return W===void 0?this.cache(P):P[this.expando]&&P[this.expando][_t(W)]},access:function(P,W,ye){return W===void 0||W&&typeof W=="string"&&ye===void 0?this.get(P,W):(this.set(P,W,ye),ye!==void 0?ye:W)},remove:function(P,W){var ye,Se=P[this.expando];if(Se!==void 0){if(W!==void 0)for(Array.isArray(W)?W=W.map(_t):(W=_t(W),W=W in Se?[W]:W.match(ir)||[]),ye=W.length;ye--;)delete Se[W[ye]];(W===void 0||S.isEmptyObject(Se))&&(P.nodeType?P[this.expando]=void 0:delete P[this.expando])}},hasData:function(P){var W=P[this.expando];return W!==void 0&&!S.isEmptyObject(W)}};var ce=new at,ut=new at,Ze=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Wt=/[A-Z]/g;function Ut(P){return P==="true"?!0:P==="false"?!1:P==="null"?null:P===+P+""?+P:Ze.test(P)?JSON.parse(P):P}function jt(P,W,ye){var Se;if(ye===void 0&&P.nodeType===1)if(Se="data-"+W.replace(Wt,"-$&").toLowerCase(),ye=P.getAttribute(Se),typeof ye=="string"){try{ye=Ut(ye)}catch(Be){}ut.set(P,W,ye)}else ye=void 0;return ye}S.extend({hasData:function(P){return ut.hasData(P)||ce.hasData(P)},data:function(P,W,ye){return ut.access(P,W,ye)},removeData:function(P,W){ut.remove(P,W)},_data:function(P,W,ye){return ce.access(P,W,ye)},_removeData:function(P,W){ce.remove(P,W)}}),S.fn.extend({data:function(P,W){var ye,Se,Be,Fe=this[0],qe=Fe&&Fe.attributes;if(P===void 0){if(this.length&&(Be=ut.get(Fe),Fe.nodeType===1&&!ce.get(Fe,"hasDataAttrs"))){for(ye=qe.length;ye--;)qe[ye]&&(Se=qe[ye].name,Se.indexOf("data-")===0&&(Se=_t(Se.slice(5)),jt(Fe,Se,Be[Se])));ce.set(Fe,"hasDataAttrs",!0)}return Be}return typeof P=="object"?this.each(function(){ut.set(this,P)}):zn(this,function(Mt){var Lt;if(Fe&&Mt===void 0)return Lt=ut.get(Fe,P),Lt!==void 0||(Lt=jt(Fe,P),Lt!==void 0)?Lt:void 0;this.each(function(){ut.set(this,P,Mt)})},null,W,arguments.length>1,null,!0)},removeData:function(P){return this.each(function(){ut.remove(this,P)})}}),S.extend({queue:function(P,W,ye){var Se;if(P)return W=(W||"fx")+"queue",Se=ce.get(P,W),ye&&(!Se||Array.isArray(ye)?Se=ce.access(P,W,S.makeArray(ye)):Se.push(ye)),Se||[]},dequeue:function(P,W){W=W||"fx";var ye=S.queue(P,W),Se=ye.length,Be=ye.shift(),Fe=S._queueHooks(P,W),qe=function(){S.dequeue(P,W)};Be==="inprogress"&&(Be=ye.shift(),Se--),Be&&(W==="fx"&&ye.unshift("inprogress"),delete Fe.stop,Be.call(P,qe,Fe)),!Se&&Fe&&Fe.empty.fire()},_queueHooks:function(P,W){var ye=W+"queueHooks";return ce.get(P,ye)||ce.access(P,ye,{empty:S.Callbacks("once memory").add(function(){ce.remove(P,[W+"queue",ye])})})}}),S.fn.extend({queue:function(P,W){var ye=2;return typeof P!="string"&&(W=P,P="fx",ye--),arguments.length<ye?S.queue(this[0],P):W===void 0?this:this.each(function(){var Se=S.queue(this,P,W);S._queueHooks(this,P),P==="fx"&&Se[0]!=="inprogress"&&S.dequeue(this,P)})},dequeue:function(P){return this.each(function(){S.dequeue(this,P)})},clearQueue:function(P){return this.queue(P||"fx",[])},promise:function(P,W){var ye,Se=1,Be=S.Deferred(),Fe=this,qe=this.length,Mt=function(){--Se||Be.resolveWith(Fe,[Fe])};for(typeof P!="string"&&(W=P,P=void 0),P=P||"fx";qe--;)ye=ce.get(Fe[qe],P+"queueHooks"),ye&&ye.empty&&(Se++,ye.empty.add(Mt));return Mt(),Be.promise(W)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$t=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),Un=["Top","Right","Bottom","Left"],qn=fe.documentElement,rr=function(P){return S.contains(P.ownerDocument,P)},xn={composed:!0};qn.getRootNode&&(rr=function(P){return S.contains(P.ownerDocument,P)||P.getRootNode(xn)===P.ownerDocument});var Or=function(P,W){return P=W||P,P.style.display==="none"||P.style.display===""&&rr(P)&&S.css(P,"display")==="none"};function Pr(P,W,ye,Se){var Be,Fe,qe=20,Mt=Se?function(){return Se.cur()}:function(){return S.css(P,W,"")},Lt=Mt(),vn=ye&&ye[3]||(S.cssNumber[W]?"":"px"),Zn=P.nodeType&&(S.cssNumber[W]||vn!=="px"&&+Lt)&&$t.exec(S.css(P,W));if(Zn&&Zn[3]!==vn){for(Lt=Lt/2,vn=vn||Zn[3],Zn=+Lt||1;qe--;)S.style(P,W,Zn+vn),(1-Fe)*(1-(Fe=Mt()/Lt||.5))<=0&&(qe=0),Zn=Zn/Fe;Zn=Zn*2,S.style(P,W,Zn+vn),ye=ye||[]}return ye&&(Zn=+Zn||+Lt||0,Be=ye[1]?Zn+(ye[1]+1)*ye[2]:+ye[2],Se&&(Se.unit=vn,Se.start=Zn,Se.end=Be)),Be}var cr={};function ki(P){var W,ye=P.ownerDocument,Se=P.nodeName,Be=cr[Se];return Be||(W=ye.body.appendChild(ye.createElement(Se)),Be=S.css(W,"display"),W.parentNode.removeChild(W),Be==="none"&&(Be="block"),cr[Se]=Be,Be)}function Vr(P,W){for(var ye,Se,Be=[],Fe=0,qe=P.length;Fe<qe;Fe++)Se=P[Fe],Se.style&&(ye=Se.style.display,W?(ye==="none"&&(Be[Fe]=ce.get(Se,"display")||null,Be[Fe]||(Se.style.display="")),Se.style.display===""&&Or(Se)&&(Be[Fe]=ki(Se))):ye!=="none"&&(Be[Fe]="none",ce.set(Se,"display",ye)));for(Fe=0;Fe<qe;Fe++)Be[Fe]!=null&&(P[Fe].style.display=Be[Fe]);return P}S.fn.extend({show:function(){return Vr(this,!0)},hide:function(){return Vr(this)},toggle:function(P){return typeof P=="boolean"?P?this.show():this.hide():this.each(function(){Or(this)?S(this).show():S(this).hide()})}});var kr=/^(?:checkbox|radio)$/i,Ui=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Wr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var P=fe.createDocumentFragment(),W=P.appendChild(fe.createElement("div")),ye=fe.createElement("input");ye.setAttribute("type","radio"),ye.setAttribute("checked","checked"),ye.setAttribute("name","t"),W.appendChild(ye),ae.checkClone=W.cloneNode(!0).cloneNode(!0).lastChild.checked,W.innerHTML="<textarea>x</textarea>",ae.noCloneChecked=!!W.cloneNode(!0).lastChild.defaultValue,W.innerHTML="<option></option>",ae.option=!!W.lastChild})();var no={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};no.tbody=no.tfoot=no.colgroup=no.caption=no.thead,no.th=no.td,ae.option||(no.optgroup=no.option=[1,"<select multiple='multiple'>","</select>"]);function uo(P,W){var ye;return typeof P.getElementsByTagName!="undefined"?ye=P.getElementsByTagName(W||"*"):typeof P.querySelectorAll!="undefined"?ye=P.querySelectorAll(W||"*"):ye=[],W===void 0||W&&M(P,W)?S.merge([P],ye):ye}function wi(P,W){for(var ye=0,Se=P.length;ye<Se;ye++)ce.set(P[ye],"globalEval",!W||ce.get(W[ye],"globalEval"))}var wo=/<|&#?\w+;/;function fs(P,W,ye,Se,Be){for(var Fe,qe,Mt,Lt,vn,Zn,Qn=W.createDocumentFragment(),jn=[],pr=0,vi=P.length;pr<vi;pr++)if(Fe=P[pr],Fe||Fe===0)if(z(Fe)==="object")S.merge(jn,Fe.nodeType?[Fe]:Fe);else if(!wo.test(Fe))jn.push(W.createTextNode(Fe));else{for(qe=qe||Qn.appendChild(W.createElement("div")),Mt=(Ui.exec(Fe)||["",""])[1].toLowerCase(),Lt=no[Mt]||no._default,qe.innerHTML=Lt[1]+S.htmlPrefilter(Fe)+Lt[2],Zn=Lt[0];Zn--;)qe=qe.lastChild;S.merge(jn,qe.childNodes),qe=Qn.firstChild,qe.textContent=""}for(Qn.textContent="",pr=0;Fe=jn[pr++];){if(Se&&S.inArray(Fe,Se)>-1){Be&&Be.push(Fe);continue}if(vn=rr(Fe),qe=uo(Qn.appendChild(Fe),"script"),vn&&wi(qe),ye)for(Zn=0;Fe=qe[Zn++];)Wr.test(Fe.type||"")&&ye.push(Fe)}return Qn}var zo=/^([^.]*)(?:\.(.+)|)/;function hs(){return!0}function ks(){return!1}function rs(P,W,ye,Se,Be,Fe){var qe,Mt;if(typeof W=="object"){typeof ye!="string"&&(Se=Se||ye,ye=void 0);for(Mt in W)rs(P,Mt,ye,Se,W[Mt],Fe);return P}if(Se==null&&Be==null?(Be=ye,Se=ye=void 0):Be==null&&(typeof ye=="string"?(Be=Se,Se=void 0):(Be=Se,Se=ye,ye=void 0)),Be===!1)Be=ks;else if(!Be)return P;return Fe===1&&(qe=Be,Be=function(Lt){return S().off(Lt),qe.apply(this,arguments)},Be.guid=qe.guid||(qe.guid=S.guid++)),P.each(function(){S.event.add(this,W,Be,Se,ye)})}S.event={global:{},add:function(P,W,ye,Se,Be){var Fe,qe,Mt,Lt,vn,Zn,Qn,jn,pr,vi,co,di=ce.get(P);if(Tt(P))for(ye.handler&&(Fe=ye,ye=Fe.handler,Be=Fe.selector),Be&&S.find.matchesSelector(qn,Be),ye.guid||(ye.guid=S.guid++),(Lt=di.events)||(Lt=di.events=Object.create(null)),(qe=di.handle)||(qe=di.handle=function(Zo){return typeof S!="undefined"&&S.event.triggered!==Zo.type?S.event.dispatch.apply(P,arguments):void 0}),W=(W||"").match(ir)||[""],vn=W.length;vn--;)Mt=zo.exec(W[vn])||[],pr=co=Mt[1],vi=(Mt[2]||"").split(".").sort(),pr&&(Qn=S.event.special[pr]||{},pr=(Be?Qn.delegateType:Qn.bindType)||pr,Qn=S.event.special[pr]||{},Zn=S.extend({type:pr,origType:co,data:Se,handler:ye,guid:ye.guid,selector:Be,needsContext:Be&&S.expr.match.needsContext.test(Be),namespace:vi.join(".")},Fe),(jn=Lt[pr])||(jn=Lt[pr]=[],jn.delegateCount=0,(!Qn.setup||Qn.setup.call(P,Se,vi,qe)===!1)&&P.addEventListener&&P.addEventListener(pr,qe)),Qn.add&&(Qn.add.call(P,Zn),Zn.handler.guid||(Zn.handler.guid=ye.guid)),Be?jn.splice(jn.delegateCount++,0,Zn):jn.push(Zn),S.event.global[pr]=!0)},remove:function(P,W,ye,Se,Be){var Fe,qe,Mt,Lt,vn,Zn,Qn,jn,pr,vi,co,di=ce.hasData(P)&&ce.get(P);if(!(!di||!(Lt=di.events))){for(W=(W||"").match(ir)||[""],vn=W.length;vn--;){if(Mt=zo.exec(W[vn])||[],pr=co=Mt[1],vi=(Mt[2]||"").split(".").sort(),!pr){for(pr in Lt)S.event.remove(P,pr+W[vn],ye,Se,!0);continue}for(Qn=S.event.special[pr]||{},pr=(Se?Qn.delegateType:Qn.bindType)||pr,jn=Lt[pr]||[],Mt=Mt[2]&&new RegExp("(^|\\.)"+vi.join("\\.(?:.*\\.|)")+"(\\.|$)"),qe=Fe=jn.length;Fe--;)Zn=jn[Fe],(Be||co===Zn.origType)&&(!ye||ye.guid===Zn.guid)&&(!Mt||Mt.test(Zn.namespace))&&(!Se||Se===Zn.selector||Se==="**"&&Zn.selector)&&(jn.splice(Fe,1),Zn.selector&&jn.delegateCount--,Qn.remove&&Qn.remove.call(P,Zn));qe&&!jn.length&&((!Qn.teardown||Qn.teardown.call(P,vi,di.handle)===!1)&&S.removeEvent(P,pr,di.handle),delete Lt[pr])}S.isEmptyObject(Lt)&&ce.remove(P,"handle events")}},dispatch:function(P){var W,ye,Se,Be,Fe,qe,Mt=new Array(arguments.length),Lt=S.event.fix(P),vn=(ce.get(this,"events")||Object.create(null))[Lt.type]||[],Zn=S.event.special[Lt.type]||{};for(Mt[0]=Lt,W=1;W<arguments.length;W++)Mt[W]=arguments[W];if(Lt.delegateTarget=this,!(Zn.preDispatch&&Zn.preDispatch.call(this,Lt)===!1)){for(qe=S.event.handlers.call(this,Lt,vn),W=0;(Be=qe[W++])&&!Lt.isPropagationStopped();)for(Lt.currentTarget=Be.elem,ye=0;(Fe=Be.handlers[ye++])&&!Lt.isImmediatePropagationStopped();)(!Lt.rnamespace||Fe.namespace===!1||Lt.rnamespace.test(Fe.namespace))&&(Lt.handleObj=Fe,Lt.data=Fe.data,Se=((S.event.special[Fe.origType]||{}).handle||Fe.handler).apply(Be.elem,Mt),Se!==void 0&&(Lt.result=Se)===!1&&(Lt.preventDefault(),Lt.stopPropagation()));return Zn.postDispatch&&Zn.postDispatch.call(this,Lt),Lt.result}},handlers:function(P,W){var ye,Se,Be,Fe,qe,Mt=[],Lt=W.delegateCount,vn=P.target;if(Lt&&vn.nodeType&&!(P.type==="click"&&P.button>=1)){for(;vn!==this;vn=vn.parentNode||this)if(vn.nodeType===1&&!(P.type==="click"&&vn.disabled===!0)){for(Fe=[],qe={},ye=0;ye<Lt;ye++)Se=W[ye],Be=Se.selector+" ",qe[Be]===void 0&&(qe[Be]=Se.needsContext?S(Be,this).index(vn)>-1:S.find(Be,this,null,[vn]).length),qe[Be]&&Fe.push(Se);Fe.length&&Mt.push({elem:vn,handlers:Fe})}}return vn=this,Lt<W.length&&Mt.push({elem:vn,handlers:W.slice(Lt)}),Mt},addProp:function(P,W){Object.defineProperty(S.Event.prototype,P,{enumerable:!0,configurable:!0,get:$(W)?function(){if(this.originalEvent)return W(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[P]},set:function(ye){Object.defineProperty(this,P,{enumerable:!0,configurable:!0,writable:!0,value:ye})}})},fix:function(P){return P[S.expando]?P:new S.Event(P)},special:{load:{noBubble:!0},click:{setup:function(P){var W=this||P;return kr.test(W.type)&&W.click&&M(W,"input")&&Eo(W,"click",!0),!1},trigger:function(P){var W=this||P;return kr.test(W.type)&&W.click&&M(W,"input")&&Eo(W,"click"),!0},_default:function(P){var W=P.target;return kr.test(W.type)&&W.click&&M(W,"input")&&ce.get(W,"click")||M(W,"a")}},beforeunload:{postDispatch:function(P){P.result!==void 0&&P.originalEvent&&(P.originalEvent.returnValue=P.result)}}}};function Eo(P,W,ye){if(!ye){ce.get(P,W)===void 0&&S.event.add(P,W,hs);return}ce.set(P,W,!1),S.event.add(P,W,{namespace:!1,handler:function(Se){var Be,Fe=ce.get(this,W);if(Se.isTrigger&1&&this[W]){if(Fe)(S.event.special[W]||{}).delegateType&&Se.stopPropagation();else if(Fe=t.call(arguments),ce.set(this,W,Fe),this[W](),Be=ce.get(this,W),ce.set(this,W,!1),Fe!==Be)return Se.stopImmediatePropagation(),Se.preventDefault(),Be}else Fe&&(ce.set(this,W,S.event.trigger(Fe[0],Fe.slice(1),this)),Se.stopPropagation(),Se.isImmediatePropagationStopped=hs)}})}S.removeEvent=function(P,W,ye){P.removeEventListener&&P.removeEventListener(W,ye)},S.Event=function(P,W){if(!(this instanceof S.Event))return new S.Event(P,W);P&&P.type?(this.originalEvent=P,this.type=P.type,this.isDefaultPrevented=P.defaultPrevented||P.defaultPrevented===void 0&&P.returnValue===!1?hs:ks,this.target=P.target&&P.target.nodeType===3?P.target.parentNode:P.target,this.currentTarget=P.currentTarget,this.relatedTarget=P.relatedTarget):this.type=P,W&&S.extend(this,W),this.timeStamp=P&&P.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:ks,isPropagationStopped:ks,isImmediatePropagationStopped:ks,isSimulated:!1,preventDefault:function(){var P=this.originalEvent;this.isDefaultPrevented=hs,P&&!this.isSimulated&&P.preventDefault()},stopPropagation:function(){var P=this.originalEvent;this.isPropagationStopped=hs,P&&!this.isSimulated&&P.stopPropagation()},stopImmediatePropagation:function(){var P=this.originalEvent;this.isImmediatePropagationStopped=hs,P&&!this.isSimulated&&P.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(P,W){function ye(Se){if(fe.documentMode){var Be=ce.get(this,"handle"),Fe=S.event.fix(Se);Fe.type=Se.type==="focusin"?"focus":"blur",Fe.isSimulated=!0,Be(Se),Fe.target===Fe.currentTarget&&Be(Fe)}else S.event.simulate(W,Se.target,S.event.fix(Se))}S.event.special[P]={setup:function(){var Se;if(Eo(this,P,!0),fe.documentMode)Se=ce.get(this,W),Se||this.addEventListener(W,ye),ce.set(this,W,(Se||0)+1);else return!1},trigger:function(){return Eo(this,P),!0},teardown:function(){var Se;if(fe.documentMode)Se=ce.get(this,W)-1,Se?ce.set(this,W,Se):(this.removeEventListener(W,ye),ce.remove(this,W));else return!1},_default:function(Se){return ce.get(Se.target,P)},delegateType:W},S.event.special[W]={setup:function(){var Se=this.ownerDocument||this.document||this,Be=fe.documentMode?this:Se,Fe=ce.get(Be,W);Fe||(fe.documentMode?this.addEventListener(W,ye):Se.addEventListener(P,ye,!0)),ce.set(Be,W,(Fe||0)+1)},teardown:function(){var Se=this.ownerDocument||this.document||this,Be=fe.documentMode?this:Se,Fe=ce.get(Be,W)-1;Fe?ce.set(Be,W,Fe):(fe.documentMode?this.removeEventListener(W,ye):Se.removeEventListener(P,ye,!0),ce.remove(Be,W))}}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(P,W){S.event.special[P]={delegateType:W,bindType:W,handle:function(ye){var Se,Be=this,Fe=ye.relatedTarget,qe=ye.handleObj;return(!Fe||Fe!==Be&&!S.contains(Be,Fe))&&(ye.type=qe.origType,Se=qe.handler.apply(this,arguments),ye.type=W),Se}}}),S.fn.extend({on:function(P,W,ye,Se){return rs(this,P,W,ye,Se)},one:function(P,W,ye,Se){return rs(this,P,W,ye,Se,1)},off:function(P,W,ye){var Se,Be;if(P&&P.preventDefault&&P.handleObj)return Se=P.handleObj,S(P.delegateTarget).off(Se.namespace?Se.origType+"."+Se.namespace:Se.origType,Se.selector,Se.handler),this;if(typeof P=="object"){for(Be in P)this.off(Be,W,P[Be]);return this}return(W===!1||typeof W=="function")&&(ye=W,W=void 0),ye===!1&&(ye=ks),this.each(function(){S.event.remove(this,P,ye,W)})}});var Qo=/<script|<style|<link/i,Xs=/checked\s*(?:[^=]|=\s*.checked.)/i,Ys=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ot(P,W){return M(P,"table")&&M(W.nodeType!==11?W:W.firstChild,"tr")&&S(P).children("tbody")[0]||P}function mt(P){return P.type=(P.getAttribute("type")!==null)+"/"+P.type,P}function _e(P){return(P.type||"").slice(0,5)==="true/"?P.type=P.type.slice(5):P.removeAttribute("type"),P}function Z(P,W){var ye,Se,Be,Fe,qe,Mt,Lt;if(W.nodeType===1){if(ce.hasData(P)&&(Fe=ce.get(P),Lt=Fe.events,Lt)){ce.remove(W,"handle events");for(Be in Lt)for(ye=0,Se=Lt[Be].length;ye<Se;ye++)S.event.add(W,Be,Lt[Be][ye])}ut.hasData(P)&&(qe=ut.access(P),Mt=S.extend({},qe),ut.set(W,Mt))}}function Q(P,W){var ye=W.nodeName.toLowerCase();ye==="input"&&kr.test(P.type)?W.checked=P.checked:(ye==="input"||ye==="textarea")&&(W.defaultValue=P.defaultValue)}function le(P,W,ye,Se){W=s(W);var Be,Fe,qe,Mt,Lt,vn,Zn=0,Qn=P.length,jn=Qn-1,pr=W[0],vi=$(pr);if(vi||Qn>1&&typeof pr=="string"&&!ae.checkClone&&Xs.test(pr))return P.each(function(co){var di=P.eq(co);vi&&(W[0]=pr.call(this,co,di.html())),le(di,W,ye,Se)});if(Qn&&(Be=fs(W,P[0].ownerDocument,!1,P,Se),Fe=Be.firstChild,Be.childNodes.length===1&&(Be=Fe),Fe||Se)){for(qe=S.map(uo(Be,"script"),mt),Mt=qe.length;Zn<Qn;Zn++)Lt=Be,Zn!==jn&&(Lt=S.clone(Lt,!0,!0),Mt&&S.merge(qe,uo(Lt,"script"))),ye.call(P[Zn],Lt,Zn);if(Mt)for(vn=qe[qe.length-1].ownerDocument,S.map(qe,_e),Zn=0;Zn<Mt;Zn++)Lt=qe[Zn],Wr.test(Lt.type||"")&&!ce.access(Lt,"globalEval")&&S.contains(vn,Lt)&&(Lt.src&&(Lt.type||"").toLowerCase()!=="module"?S._evalUrl&&!Lt.noModule&&S._evalUrl(Lt.src,{nonce:Lt.nonce||Lt.getAttribute("nonce")},vn):he(Lt.textContent.replace(Ys,""),Lt,vn))}return P}function Xe(P,W,ye){for(var Se,Be=W?S.filter(W,P):P,Fe=0;(Se=Be[Fe])!=null;Fe++)!ye&&Se.nodeType===1&&S.cleanData(uo(Se)),Se.parentNode&&(ye&&rr(Se)&&wi(uo(Se,"script")),Se.parentNode.removeChild(Se));return P}S.extend({htmlPrefilter:function(P){return P},clone:function(P,W,ye){var Se,Be,Fe,qe,Mt=P.cloneNode(!0),Lt=rr(P);if(!ae.noCloneChecked&&(P.nodeType===1||P.nodeType===11)&&!S.isXMLDoc(P))for(qe=uo(Mt),Fe=uo(P),Se=0,Be=Fe.length;Se<Be;Se++)Q(Fe[Se],qe[Se]);if(W)if(ye)for(Fe=Fe||uo(P),qe=qe||uo(Mt),Se=0,Be=Fe.length;Se<Be;Se++)Z(Fe[Se],qe[Se]);else Z(P,Mt);return qe=uo(Mt,"script"),qe.length>0&&wi(qe,!Lt&&uo(P,"script")),Mt},cleanData:function(P){for(var W,ye,Se,Be=S.event.special,Fe=0;(ye=P[Fe])!==void 0;Fe++)if(Tt(ye)){if(W=ye[ce.expando]){if(W.events)for(Se in W.events)Be[Se]?S.event.remove(ye,Se):S.removeEvent(ye,Se,W.handle);ye[ce.expando]=void 0}ye[ut.expando]&&(ye[ut.expando]=void 0)}}}),S.fn.extend({detach:function(P){return Xe(this,P,!0)},remove:function(P){return Xe(this,P)},text:function(P){return zn(this,function(W){return W===void 0?S.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=W)})},null,P,arguments.length)},append:function(){return le(this,arguments,function(P){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var W=ot(this,P);W.appendChild(P)}})},prepend:function(){return le(this,arguments,function(P){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var W=ot(this,P);W.insertBefore(P,W.firstChild)}})},before:function(){return le(this,arguments,function(P){this.parentNode&&this.parentNode.insertBefore(P,this)})},after:function(){return le(this,arguments,function(P){this.parentNode&&this.parentNode.insertBefore(P,this.nextSibling)})},empty:function(){for(var P,W=0;(P=this[W])!=null;W++)P.nodeType===1&&(S.cleanData(uo(P,!1)),P.textContent="");return this},clone:function(P,W){return P=P==null?!1:P,W=W==null?P:W,this.map(function(){return S.clone(this,P,W)})},html:function(P){return zn(this,function(W){var ye=this[0]||{},Se=0,Be=this.length;if(W===void 0&&ye.nodeType===1)return ye.innerHTML;if(typeof W=="string"&&!Qo.test(W)&&!no[(Ui.exec(W)||["",""])[1].toLowerCase()]){W=S.htmlPrefilter(W);try{for(;Se<Be;Se++)ye=this[Se]||{},ye.nodeType===1&&(S.cleanData(uo(ye,!1)),ye.innerHTML=W);ye=0}catch(Fe){}}ye&&this.empty().append(W)},null,P,arguments.length)},replaceWith:function(){var P=[];return le(this,arguments,function(W){var ye=this.parentNode;S.inArray(this,P)<0&&(S.cleanData(uo(this)),ye&&ye.replaceChild(W,this))},P)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(P,W){S.fn[P]=function(ye){for(var Se,Be=[],Fe=S(ye),qe=Fe.length-1,Mt=0;Mt<=qe;Mt++)Se=Mt===qe?this:this.clone(!0),S(Fe[Mt])[W](Se),h.apply(Be,Se.get());return this.pushStack(Be)}});var dt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),ft=/^--/,gt=function(P){var W=P.ownerDocument.defaultView;return(!W||!W.opener)&&(W=o),W.getComputedStyle(P)},ln=function(P,W,ye){var Se,Be,Fe={};for(Be in W)Fe[Be]=P.style[Be],P.style[Be]=W[Be];Se=ye.call(P);for(Be in W)P.style[Be]=Fe[Be];return Se},bn=new RegExp(Un.join("|"),"i");(function(){function P(){if(vn){Lt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",vn.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",qn.appendChild(Lt).appendChild(vn);var Zn=o.getComputedStyle(vn);ye=Zn.top!=="1%",Mt=W(Zn.marginLeft)===12,vn.style.right="60%",Fe=W(Zn.right)===36,Se=W(Zn.width)===36,vn.style.position="absolute",Be=W(vn.offsetWidth/3)===12,qn.removeChild(Lt),vn=null}}function W(Zn){return Math.round(parseFloat(Zn))}var ye,Se,Be,Fe,qe,Mt,Lt=fe.createElement("div"),vn=fe.createElement("div");vn.style&&(vn.style.backgroundClip="content-box",vn.cloneNode(!0).style.backgroundClip="",ae.clearCloneStyle=vn.style.backgroundClip==="content-box",S.extend(ae,{boxSizingReliable:function(){return P(),Se},pixelBoxStyles:function(){return P(),Fe},pixelPosition:function(){return P(),ye},reliableMarginLeft:function(){return P(),Mt},scrollboxSize:function(){return P(),Be},reliableTrDimensions:function(){var Zn,Qn,jn,pr;return qe==null&&(Zn=fe.createElement("table"),Qn=fe.createElement("tr"),jn=fe.createElement("div"),Zn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Qn.style.cssText="box-sizing:content-box;border:1px solid",Qn.style.height="1px",jn.style.height="9px",jn.style.display="block",qn.appendChild(Zn).appendChild(Qn).appendChild(jn),pr=o.getComputedStyle(Qn),qe=parseInt(pr.height,10)+parseInt(pr.borderTopWidth,10)+parseInt(pr.borderBottomWidth,10)===Qn.offsetHeight,qn.removeChild(Zn)),qe}}))})();function En(P,W,ye){var Se,Be,Fe,qe,Mt=ft.test(W),Lt=P.style;return ye=ye||gt(P),ye&&(qe=ye.getPropertyValue(W)||ye[W],Mt&&qe&&(qe=qe.replace(Ee,"$1")||void 0),qe===""&&!rr(P)&&(qe=S.style(P,W)),!ae.pixelBoxStyles()&&dt.test(qe)&&bn.test(W)&&(Se=Lt.width,Be=Lt.minWidth,Fe=Lt.maxWidth,Lt.minWidth=Lt.maxWidth=Lt.width=qe,qe=ye.width,Lt.width=Se,Lt.minWidth=Be,Lt.maxWidth=Fe)),qe!==void 0?qe+"":qe}function Cr(P,W){return{get:function(){if(P()){delete this.get;return}return(this.get=W).apply(this,arguments)}}}var tr=["Webkit","Moz","ms"],ii=fe.createElement("div").style,Zi={};function Mn(P){for(var W=P[0].toUpperCase()+P.slice(1),ye=tr.length;ye--;)if(P=tr[ye]+W,P in ii)return P}function Xn(P){var W=S.cssProps[P]||Zi[P];return W||(P in ii?P:Zi[P]=Mn(P)||P)}var $r=/^(none|table(?!-c[ea]).+)/,Re={position:"absolute",visibility:"hidden",display:"block"},Ne={letterSpacing:"0",fontWeight:"400"};function Te(P,W,ye){var Se=$t.exec(W);return Se?Math.max(0,Se[2]-(ye||0))+(Se[3]||"px"):W}function U(P,W,ye,Se,Be,Fe){var qe=W==="width"?1:0,Mt=0,Lt=0,vn=0;if(ye===(Se?"border":"content"))return 0;for(;qe<4;qe+=2)ye==="margin"&&(vn+=S.css(P,ye+Un[qe],!0,Be)),Se?(ye==="content"&&(Lt-=S.css(P,"padding"+Un[qe],!0,Be)),ye!=="margin"&&(Lt-=S.css(P,"border"+Un[qe]+"Width",!0,Be))):(Lt+=S.css(P,"padding"+Un[qe],!0,Be),ye!=="padding"?Lt+=S.css(P,"border"+Un[qe]+"Width",!0,Be):Mt+=S.css(P,"border"+Un[qe]+"Width",!0,Be));return!Se&&Fe>=0&&(Lt+=Math.max(0,Math.ceil(P["offset"+W[0].toUpperCase()+W.slice(1)]-Fe-Lt-Mt-.5))||0),Lt+vn}function Y(P,W,ye){var Se=gt(P),Be=!ae.boxSizingReliable()||ye,Fe=Be&&S.css(P,"boxSizing",!1,Se)==="border-box",qe=Fe,Mt=En(P,W,Se),Lt="offset"+W[0].toUpperCase()+W.slice(1);if(dt.test(Mt)){if(!ye)return Mt;Mt="auto"}return(!ae.boxSizingReliable()&&Fe||!ae.reliableTrDimensions()&&M(P,"tr")||Mt==="auto"||!parseFloat(Mt)&&S.css(P,"display",!1,Se)==="inline")&&P.getClientRects().length&&(Fe=S.css(P,"boxSizing",!1,Se)==="border-box",qe=Lt in P,qe&&(Mt=P[Lt])),Mt=parseFloat(Mt)||0,Mt+U(P,W,ye||(Fe?"border":"content"),qe,Se,Mt)+"px"}S.extend({cssHooks:{opacity:{get:function(P,W){if(W){var ye=En(P,"opacity");return ye===""?"1":ye}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(P,W,ye,Se){if(!(!P||P.nodeType===3||P.nodeType===8||!P.style)){var Be,Fe,qe,Mt=_t(W),Lt=ft.test(W),vn=P.style;if(Lt||(W=Xn(Mt)),qe=S.cssHooks[W]||S.cssHooks[Mt],ye!==void 0){if(Fe=typeof ye,Fe==="string"&&(Be=$t.exec(ye))&&Be[1]&&(ye=Pr(P,W,Be),Fe="number"),ye==null||ye!==ye)return;Fe==="number"&&!Lt&&(ye+=Be&&Be[3]||(S.cssNumber[Mt]?"":"px")),!ae.clearCloneStyle&&ye===""&&W.indexOf("background")===0&&(vn[W]="inherit"),(!qe||!("set"in qe)||(ye=qe.set(P,ye,Se))!==void 0)&&(Lt?vn.setProperty(W,ye):vn[W]=ye)}else return qe&&"get"in qe&&(Be=qe.get(P,!1,Se))!==void 0?Be:vn[W]}},css:function(P,W,ye,Se){var Be,Fe,qe,Mt=_t(W),Lt=ft.test(W);return Lt||(W=Xn(Mt)),qe=S.cssHooks[W]||S.cssHooks[Mt],qe&&"get"in qe&&(Be=qe.get(P,!0,ye)),Be===void 0&&(Be=En(P,W,Se)),Be==="normal"&&W in Ne&&(Be=Ne[W]),ye===""||ye?(Fe=parseFloat(Be),ye===!0||isFinite(Fe)?Fe||0:Be):Be}}),S.each(["height","width"],function(P,W){S.cssHooks[W]={get:function(ye,Se,Be){if(Se)return $r.test(S.css(ye,"display"))&&(!ye.getClientRects().length||!ye.getBoundingClientRect().width)?ln(ye,Re,function(){return Y(ye,W,Be)}):Y(ye,W,Be)},set:function(ye,Se,Be){var Fe,qe=gt(ye),Mt=!ae.scrollboxSize()&&qe.position==="absolute",Lt=Mt||Be,vn=Lt&&S.css(ye,"boxSizing",!1,qe)==="border-box",Zn=Be?U(ye,W,Be,vn,qe):0;return vn&&Mt&&(Zn-=Math.ceil(ye["offset"+W[0].toUpperCase()+W.slice(1)]-parseFloat(qe[W])-U(ye,W,"border",!1,qe)-.5)),Zn&&(Fe=$t.exec(Se))&&(Fe[3]||"px")!=="px"&&(ye.style[W]=Se,Se=S.css(ye,W)),Te(ye,Se,Zn)}}}),S.cssHooks.marginLeft=Cr(ae.reliableMarginLeft,function(P,W){if(W)return(parseFloat(En(P,"marginLeft"))||P.getBoundingClientRect().left-ln(P,{marginLeft:0},function(){return P.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(P,W){S.cssHooks[P+W]={expand:function(ye){for(var Se=0,Be={},Fe=typeof ye=="string"?ye.split(" "):[ye];Se<4;Se++)Be[P+Un[Se]+W]=Fe[Se]||Fe[Se-2]||Fe[0];return Be}},P!=="margin"&&(S.cssHooks[P+W].set=Te)}),S.fn.extend({css:function(P,W){return zn(this,function(ye,Se,Be){var Fe,qe,Mt={},Lt=0;if(Array.isArray(Se)){for(Fe=gt(ye),qe=Se.length;Lt<qe;Lt++)Mt[Se[Lt]]=S.css(ye,Se[Lt],!1,Fe);return Mt}return Be!==void 0?S.style(ye,Se,Be):S.css(ye,Se)},P,W,arguments.length>1)}});function ge(P,W,ye,Se,Be){return new ge.prototype.init(P,W,ye,Se,Be)}S.Tween=ge,ge.prototype={constructor:ge,init:function(P,W,ye,Se,Be,Fe){this.elem=P,this.prop=ye,this.easing=Be||S.easing._default,this.options=W,this.start=this.now=this.cur(),this.end=Se,this.unit=Fe||(S.cssNumber[ye]?"":"px")},cur:function(){var P=ge.propHooks[this.prop];return P&&P.get?P.get(this):ge.propHooks._default.get(this)},run:function(P){var W,ye=ge.propHooks[this.prop];return this.options.duration?this.pos=W=S.easing[this.easing](P,this.options.duration*P,0,1,this.options.duration):this.pos=W=P,this.now=(this.end-this.start)*W+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),ye&&ye.set?ye.set(this):ge.propHooks._default.set(this),this}},ge.prototype.init.prototype=ge.prototype,ge.propHooks={_default:{get:function(P){var W;return P.elem.nodeType!==1||P.elem[P.prop]!=null&&P.elem.style[P.prop]==null?P.elem[P.prop]:(W=S.css(P.elem,P.prop,""),!W||W==="auto"?0:W)},set:function(P){S.fx.step[P.prop]?S.fx.step[P.prop](P):P.elem.nodeType===1&&(S.cssHooks[P.prop]||P.elem.style[Xn(P.prop)]!=null)?S.style(P.elem,P.prop,P.now+P.unit):P.elem[P.prop]=P.now}}},ge.propHooks.scrollTop=ge.propHooks.scrollLeft={set:function(P){P.elem.nodeType&&P.elem.parentNode&&(P.elem[P.prop]=P.now)}},S.easing={linear:function(P){return P},swing:function(P){return .5-Math.cos(P*Math.PI)/2},_default:"swing"},S.fx=ge.prototype.init,S.fx.step={};var Ye,ct,nt=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function fn(){ct&&(fe.hidden===!1&&o.requestAnimationFrame?o.requestAnimationFrame(fn):o.setTimeout(fn,S.fx.interval),S.fx.tick())}function on(){return o.setTimeout(function(){Ye=void 0}),Ye=Date.now()}function Gn(P,W){var ye,Se=0,Be={height:P};for(W=W?1:0;Se<4;Se+=2-W)ye=Un[Se],Be["margin"+ye]=Be["padding"+ye]=P;return W&&(Be.opacity=Be.width=P),Be}function er(P,W,ye){for(var Se,Be=(xi.tweeners[W]||[]).concat(xi.tweeners["*"]),Fe=0,qe=Be.length;Fe<qe;Fe++)if(Se=Be[Fe].call(ye,W,P))return Se}function Kn(P,W,ye){var Se,Be,Fe,qe,Mt,Lt,vn,Zn,Qn="width"in W||"height"in W,jn=this,pr={},vi=P.style,co=P.nodeType&&Or(P),di=ce.get(P,"fxshow");ye.queue||(qe=S._queueHooks(P,"fx"),qe.unqueued==null&&(qe.unqueued=0,Mt=qe.empty.fire,qe.empty.fire=function(){qe.unqueued||Mt()}),qe.unqueued++,jn.always(function(){jn.always(function(){qe.unqueued--,S.queue(P,"fx").length||qe.empty.fire()})}));for(Se in W)if(Be=W[Se],nt.test(Be)){if(delete W[Se],Fe=Fe||Be==="toggle",Be===(co?"hide":"show"))if(Be==="show"&&di&&di[Se]!==void 0)co=!0;else continue;pr[Se]=di&&di[Se]||S.style(P,Se)}if(Lt=!S.isEmptyObject(W),!(!Lt&&S.isEmptyObject(pr))){Qn&&P.nodeType===1&&(ye.overflow=[vi.overflow,vi.overflowX,vi.overflowY],vn=di&&di.display,vn==null&&(vn=ce.get(P,"display")),Zn=S.css(P,"display"),Zn==="none"&&(vn?Zn=vn:(Vr([P],!0),vn=P.style.display||vn,Zn=S.css(P,"display"),Vr([P]))),(Zn==="inline"||Zn==="inline-block"&&vn!=null)&&S.css(P,"float")==="none"&&(Lt||(jn.done(function(){vi.display=vn}),vn==null&&(Zn=vi.display,vn=Zn==="none"?"":Zn)),vi.display="inline-block")),ye.overflow&&(vi.overflow="hidden",jn.always(function(){vi.overflow=ye.overflow[0],vi.overflowX=ye.overflow[1],vi.overflowY=ye.overflow[2]})),Lt=!1;for(Se in pr)Lt||(di?"hidden"in di&&(co=di.hidden):di=ce.access(P,"fxshow",{display:vn}),Fe&&(di.hidden=!co),co&&Vr([P],!0),jn.done(function(){co||Vr([P]),ce.remove(P,"fxshow");for(Se in pr)S.style(P,Se,pr[Se])})),Lt=er(co?di[Se]:0,Se,jn),Se in di||(di[Se]=Lt.start,co&&(Lt.end=Lt.start,Lt.start=0))}}function qr(P,W){var ye,Se,Be,Fe,qe;for(ye in P)if(Se=_t(ye),Be=W[Se],Fe=P[ye],Array.isArray(Fe)&&(Be=Fe[1],Fe=P[ye]=Fe[0]),ye!==Se&&(P[Se]=Fe,delete P[ye]),qe=S.cssHooks[Se],qe&&"expand"in qe){Fe=qe.expand(Fe),delete P[Se];for(ye in Fe)ye in P||(P[ye]=Fe[ye],W[ye]=Be)}else W[Se]=Be}function xi(P,W,ye){var Se,Be,Fe=0,qe=xi.prefilters.length,Mt=S.Deferred().always(function(){delete Lt.elem}),Lt=function(){if(Be)return!1;for(var Qn=Ye||on(),jn=Math.max(0,vn.startTime+vn.duration-Qn),pr=jn/vn.duration||0,vi=1-pr,co=0,di=vn.tweens.length;co<di;co++)vn.tweens[co].run(vi);return Mt.notifyWith(P,[vn,vi,jn]),vi<1&&di?jn:(di||Mt.notifyWith(P,[vn,1,0]),Mt.resolveWith(P,[vn]),!1)},vn=Mt.promise({elem:P,props:S.extend({},W),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},ye),originalProperties:W,originalOptions:ye,startTime:Ye||on(),duration:ye.duration,tweens:[],createTween:function(Qn,jn){var pr=S.Tween(P,vn.opts,Qn,jn,vn.opts.specialEasing[Qn]||vn.opts.easing);return vn.tweens.push(pr),pr},stop:function(Qn){var jn=0,pr=Qn?vn.tweens.length:0;if(Be)return this;for(Be=!0;jn<pr;jn++)vn.tweens[jn].run(1);return Qn?(Mt.notifyWith(P,[vn,1,0]),Mt.resolveWith(P,[vn,Qn])):Mt.rejectWith(P,[vn,Qn]),this}}),Zn=vn.props;for(qr(Zn,vn.opts.specialEasing);Fe<qe;Fe++)if(Se=xi.prefilters[Fe].call(vn,P,Zn,vn.opts),Se)return $(Se.stop)&&(S._queueHooks(vn.elem,vn.opts.queue).stop=Se.stop.bind(Se)),Se;return S.map(Zn,er,vn),$(vn.opts.start)&&vn.opts.start.call(P,vn),vn.progress(vn.opts.progress).done(vn.opts.done,vn.opts.complete).fail(vn.opts.fail).always(vn.opts.always),S.fx.timer(S.extend(Lt,{elem:P,anim:vn,queue:vn.opts.queue})),vn}S.Animation=S.extend(xi,{tweeners:{"*":[function(P,W){var ye=this.createTween(P,W);return Pr(ye.elem,P,$t.exec(W),ye),ye}]},tweener:function(P,W){$(P)?(W=P,P=["*"]):P=P.match(ir);for(var ye,Se=0,Be=P.length;Se<Be;Se++)ye=P[Se],xi.tweeners[ye]=xi.tweeners[ye]||[],xi.tweeners[ye].unshift(W)},prefilters:[Kn],prefilter:function(P,W){W?xi.prefilters.unshift(P):xi.prefilters.push(P)}}),S.speed=function(P,W,ye){var Se=P&&typeof P=="object"?S.extend({},P):{complete:ye||!ye&&W||$(P)&&P,duration:P,easing:ye&&W||W&&!$(W)&&W};return S.fx.off?Se.duration=0:typeof Se.duration!="number"&&(Se.duration in S.fx.speeds?Se.duration=S.fx.speeds[Se.duration]:Se.duration=S.fx.speeds._default),(Se.queue==null||Se.queue===!0)&&(Se.queue="fx"),Se.old=Se.complete,Se.complete=function(){$(Se.old)&&Se.old.call(this),Se.queue&&S.dequeue(this,Se.queue)},Se},S.fn.extend({fadeTo:function(P,W,ye,Se){return this.filter(Or).css("opacity",0).show().end().animate({opacity:W},P,ye,Se)},animate:function(P,W,ye,Se){var Be=S.isEmptyObject(P),Fe=S.speed(W,ye,Se),qe=function(){var Mt=xi(this,S.extend({},P),Fe);(Be||ce.get(this,"finish"))&&Mt.stop(!0)};return qe.finish=qe,Be||Fe.queue===!1?this.each(qe):this.queue(Fe.queue,qe)},stop:function(P,W,ye){var Se=function(Be){var Fe=Be.stop;delete Be.stop,Fe(ye)};return typeof P!="string"&&(ye=W,W=P,P=void 0),W&&this.queue(P||"fx",[]),this.each(function(){var Be=!0,Fe=P!=null&&P+"queueHooks",qe=S.timers,Mt=ce.get(this);if(Fe)Mt[Fe]&&Mt[Fe].stop&&Se(Mt[Fe]);else for(Fe in Mt)Mt[Fe]&&Mt[Fe].stop&&lt.test(Fe)&&Se(Mt[Fe]);for(Fe=qe.length;Fe--;)qe[Fe].elem===this&&(P==null||qe[Fe].queue===P)&&(qe[Fe].anim.stop(ye),Be=!1,qe.splice(Fe,1));(Be||!ye)&&S.dequeue(this,P)})},finish:function(P){return P!==!1&&(P=P||"fx"),this.each(function(){var W,ye=ce.get(this),Se=ye[P+"queue"],Be=ye[P+"queueHooks"],Fe=S.timers,qe=Se?Se.length:0;for(ye.finish=!0,S.queue(this,P,[]),Be&&Be.stop&&Be.stop.call(this,!0),W=Fe.length;W--;)Fe[W].elem===this&&Fe[W].queue===P&&(Fe[W].anim.stop(!0),Fe.splice(W,1));for(W=0;W<qe;W++)Se[W]&&Se[W].finish&&Se[W].finish.call(this);delete ye.finish})}}),S.each(["toggle","show","hide"],function(P,W){var ye=S.fn[W];S.fn[W]=function(Se,Be,Fe){return Se==null||typeof Se=="boolean"?ye.apply(this,arguments):this.animate(Gn(W,!0),Se,Be,Fe)}}),S.each({slideDown:Gn("show"),slideUp:Gn("hide"),slideToggle:Gn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(P,W){S.fn[P]=function(ye,Se,Be){return this.animate(W,ye,Se,Be)}}),S.timers=[],S.fx.tick=function(){var P,W=0,ye=S.timers;for(Ye=Date.now();W<ye.length;W++)P=ye[W],!P()&&ye[W]===P&&ye.splice(W--,1);ye.length||S.fx.stop(),Ye=void 0},S.fx.timer=function(P){S.timers.push(P),S.fx.start()},S.fx.interval=13,S.fx.start=function(){ct||(ct=!0,fn())},S.fx.stop=function(){ct=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(P,W){return P=S.fx&&S.fx.speeds[P]||P,W=W||"fx",this.queue(W,function(ye,Se){var Be=o.setTimeout(ye,P);Se.stop=function(){o.clearTimeout(Be)}})},function(){var P=fe.createElement("input"),W=fe.createElement("select"),ye=W.appendChild(fe.createElement("option"));P.type="checkbox",ae.checkOn=P.value!=="",ae.optSelected=ye.selected,P=fe.createElement("input"),P.value="t",P.type="radio",ae.radioValue=P.value==="t"}();var Pn,$n=S.expr.attrHandle;S.fn.extend({attr:function(P,W){return zn(this,S.attr,P,W,arguments.length>1)},removeAttr:function(P){return this.each(function(){S.removeAttr(this,P)})}}),S.extend({attr:function(P,W,ye){var Se,Be,Fe=P.nodeType;if(!(Fe===3||Fe===8||Fe===2)){if(typeof P.getAttribute=="undefined")return S.prop(P,W,ye);if((Fe!==1||!S.isXMLDoc(P))&&(Be=S.attrHooks[W.toLowerCase()]||(S.expr.match.bool.test(W)?Pn:void 0)),ye!==void 0){if(ye===null){S.removeAttr(P,W);return}return Be&&"set"in Be&&(Se=Be.set(P,ye,W))!==void 0?Se:(P.setAttribute(W,ye+""),ye)}return Be&&"get"in Be&&(Se=Be.get(P,W))!==null?Se:(Se=S.find.attr(P,W),Se==null?void 0:Se)}},attrHooks:{type:{set:function(P,W){if(!ae.radioValue&&W==="radio"&&M(P,"input")){var ye=P.value;return P.setAttribute("type",W),ye&&(P.value=ye),W}}}},removeAttr:function(P,W){var ye,Se=0,Be=W&&W.match(ir);if(Be&&P.nodeType===1)for(;ye=Be[Se++];)P.removeAttribute(ye)}}),Pn={set:function(P,W,ye){return W===!1?S.removeAttr(P,ye):P.setAttribute(ye,ye),ye}},S.each(S.expr.match.bool.source.match(/\w+/g),function(P,W){var ye=$n[W]||S.find.attr;$n[W]=function(Se,Be,Fe){var qe,Mt,Lt=Be.toLowerCase();return Fe||(Mt=$n[Lt],$n[Lt]=qe,qe=ye(Se,Be,Fe)!=null?Lt:null,$n[Lt]=Mt),qe}});var Rr=/^(?:input|select|textarea|button)$/i,Di=/^(?:a|area)$/i;S.fn.extend({prop:function(P,W){return zn(this,S.prop,P,W,arguments.length>1)},removeProp:function(P){return this.each(function(){delete this[S.propFix[P]||P]})}}),S.extend({prop:function(P,W,ye){var Se,Be,Fe=P.nodeType;if(!(Fe===3||Fe===8||Fe===2))return(Fe!==1||!S.isXMLDoc(P))&&(W=S.propFix[W]||W,Be=S.propHooks[W]),ye!==void 0?Be&&"set"in Be&&(Se=Be.set(P,ye,W))!==void 0?Se:P[W]=ye:Be&&"get"in Be&&(Se=Be.get(P,W))!==null?Se:P[W]},propHooks:{tabIndex:{get:function(P){var W=S.find.attr(P,"tabindex");return W?parseInt(W,10):Rr.test(P.nodeName)||Di.test(P.nodeName)&&P.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ae.optSelected||(S.propHooks.selected={get:function(P){var W=P.parentNode;return W&&W.parentNode&&W.parentNode.selectedIndex,null},set:function(P){var W=P.parentNode;W&&(W.selectedIndex,W.parentNode&&W.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this});function Jr(P){var W=P.match(ir)||[];return W.join(" ")}function $o(P){return P.getAttribute&&P.getAttribute("class")||""}function Vo(P){return Array.isArray(P)?P:typeof P=="string"?P.match(ir)||[]:[]}S.fn.extend({addClass:function(P){var W,ye,Se,Be,Fe,qe;return $(P)?this.each(function(Mt){S(this).addClass(P.call(this,Mt,$o(this)))}):(W=Vo(P),W.length?this.each(function(){if(Se=$o(this),ye=this.nodeType===1&&" "+Jr(Se)+" ",ye){for(Fe=0;Fe<W.length;Fe++)Be=W[Fe],ye.indexOf(" "+Be+" ")<0&&(ye+=Be+" ");qe=Jr(ye),Se!==qe&&this.setAttribute("class",qe)}}):this)},removeClass:function(P){var W,ye,Se,Be,Fe,qe;return $(P)?this.each(function(Mt){S(this).removeClass(P.call(this,Mt,$o(this)))}):arguments.length?(W=Vo(P),W.length?this.each(function(){if(Se=$o(this),ye=this.nodeType===1&&" "+Jr(Se)+" ",ye){for(Fe=0;Fe<W.length;Fe++)for(Be=W[Fe];ye.indexOf(" "+Be+" ")>-1;)ye=ye.replace(" "+Be+" "," ");qe=Jr(ye),Se!==qe&&this.setAttribute("class",qe)}}):this):this.attr("class","")},toggleClass:function(P,W){var ye,Se,Be,Fe,qe=typeof P,Mt=qe==="string"||Array.isArray(P);return $(P)?this.each(function(Lt){S(this).toggleClass(P.call(this,Lt,$o(this),W),W)}):typeof W=="boolean"&&Mt?W?this.addClass(P):this.removeClass(P):(ye=Vo(P),this.each(function(){if(Mt)for(Fe=S(this),Be=0;Be<ye.length;Be++)Se=ye[Be],Fe.hasClass(Se)?Fe.removeClass(Se):Fe.addClass(Se);else(P===void 0||qe==="boolean")&&(Se=$o(this),Se&&ce.set(this,"__className__",Se),this.setAttribute&&this.setAttribute("class",Se||P===!1?"":ce.get(this,"__className__")||""))}))},hasClass:function(P){var W,ye,Se=0;for(W=" "+P+" ";ye=this[Se++];)if(ye.nodeType===1&&(" "+Jr($o(ye))+" ").indexOf(W)>-1)return!0;return!1}});var lo=/\r/g;S.fn.extend({val:function(P){var W,ye,Se,Be=this[0];return arguments.length?(Se=$(P),this.each(function(Fe){var qe;this.nodeType===1&&(Se?qe=P.call(this,Fe,S(this).val()):qe=P,qe==null?qe="":typeof qe=="number"?qe+="":Array.isArray(qe)&&(qe=S.map(qe,function(Mt){return Mt==null?"":Mt+""})),W=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()],(!W||!("set"in W)||W.set(this,qe,"value")===void 0)&&(this.value=qe))})):Be?(W=S.valHooks[Be.type]||S.valHooks[Be.nodeName.toLowerCase()],W&&"get"in W&&(ye=W.get(Be,"value"))!==void 0?ye:(ye=Be.value,typeof ye=="string"?ye.replace(lo,""):ye==null?"":ye)):void 0}}),S.extend({valHooks:{option:{get:function(P){var W=S.find.attr(P,"value");return W!=null?W:Jr(S.text(P))}},select:{get:function(P){var W,ye,Se,Be=P.options,Fe=P.selectedIndex,qe=P.type==="select-one",Mt=qe?null:[],Lt=qe?Fe+1:Be.length;for(Fe<0?Se=Lt:Se=qe?Fe:0;Se<Lt;Se++)if(ye=Be[Se],(ye.selected||Se===Fe)&&!ye.disabled&&(!ye.parentNode.disabled||!M(ye.parentNode,"optgroup"))){if(W=S(ye).val(),qe)return W;Mt.push(W)}return Mt},set:function(P,W){for(var ye,Se,Be=P.options,Fe=S.makeArray(W),qe=Be.length;qe--;)Se=Be[qe],(Se.selected=S.inArray(S.valHooks.option.get(Se),Fe)>-1)&&(ye=!0);return ye||(P.selectedIndex=-1),Fe}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(P,W){if(Array.isArray(W))return P.checked=S.inArray(S(P).val(),W)>-1}},ae.checkOn||(S.valHooks[this].get=function(P){return P.getAttribute("value")===null?"on":P.value})});var Xi=o.location,Ho={guid:Date.now()},cs=/\?/;S.parseXML=function(P){var W,ye;if(!P||typeof P!="string")return null;try{W=new o.DOMParser().parseFromString(P,"text/xml")}catch(Se){}return ye=W&&W.getElementsByTagName("parsererror")[0],(!W||ye)&&S.error("Invalid XML: "+(ye?S.map(ye.childNodes,function(Se){return Se.textContent}).join(`
`):P)),W};var li=/^(?:focusinfocus|focusoutblur)$/,xs=function(P){P.stopPropagation()};S.extend(S.event,{trigger:function(P,W,ye,Se){var Be,Fe,qe,Mt,Lt,vn,Zn,Qn,jn=[ye||fe],pr=x.call(P,"type")?P.type:P,vi=x.call(P,"namespace")?P.namespace.split("."):[];if(Fe=Qn=qe=ye=ye||fe,!(ye.nodeType===3||ye.nodeType===8)&&!li.test(pr+S.event.triggered)&&(pr.indexOf(".")>-1&&(vi=pr.split("."),pr=vi.shift(),vi.sort()),Lt=pr.indexOf(":")<0&&"on"+pr,P=P[S.expando]?P:new S.Event(pr,typeof P=="object"&&P),P.isTrigger=Se?2:3,P.namespace=vi.join("."),P.rnamespace=P.namespace?new RegExp("(^|\\.)"+vi.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,P.result=void 0,P.target||(P.target=ye),W=W==null?[P]:S.makeArray(W,[P]),Zn=S.event.special[pr]||{},!(!Se&&Zn.trigger&&Zn.trigger.apply(ye,W)===!1))){if(!Se&&!Zn.noBubble&&!te(ye)){for(Mt=Zn.delegateType||pr,li.test(Mt+pr)||(Fe=Fe.parentNode);Fe;Fe=Fe.parentNode)jn.push(Fe),qe=Fe;qe===(ye.ownerDocument||fe)&&jn.push(qe.defaultView||qe.parentWindow||o)}for(Be=0;(Fe=jn[Be++])&&!P.isPropagationStopped();)Qn=Fe,P.type=Be>1?Mt:Zn.bindType||pr,vn=(ce.get(Fe,"events")||Object.create(null))[P.type]&&ce.get(Fe,"handle"),vn&&vn.apply(Fe,W),vn=Lt&&Fe[Lt],vn&&vn.apply&&Tt(Fe)&&(P.result=vn.apply(Fe,W),P.result===!1&&P.preventDefault());return P.type=pr,!Se&&!P.isDefaultPrevented()&&(!Zn._default||Zn._default.apply(jn.pop(),W)===!1)&&Tt(ye)&&Lt&&$(ye[pr])&&!te(ye)&&(qe=ye[Lt],qe&&(ye[Lt]=null),S.event.triggered=pr,P.isPropagationStopped()&&Qn.addEventListener(pr,xs),ye[pr](),P.isPropagationStopped()&&Qn.removeEventListener(pr,xs),S.event.triggered=void 0,qe&&(ye[Lt]=qe)),P.result}},simulate:function(P,W,ye){var Se=S.extend(new S.Event,ye,{type:P,isSimulated:!0});S.event.trigger(Se,null,W)}}),S.fn.extend({trigger:function(P,W){return this.each(function(){S.event.trigger(P,W,this)})},triggerHandler:function(P,W){var ye=this[0];if(ye)return S.event.trigger(P,W,ye,!0)}});var Ae=/\[\]$/,Ke=/\r?\n/g,pt=/^(?:submit|button|image|reset|file)$/i,Ht=/^(?:input|select|textarea|keygen)/i;function an(P,W,ye,Se){var Be;if(Array.isArray(W))S.each(W,function(Fe,qe){ye||Ae.test(P)?Se(P,qe):an(P+"["+(typeof qe=="object"&&qe!=null?Fe:"")+"]",qe,ye,Se)});else if(!ye&&z(W)==="object")for(Be in W)an(P+"["+Be+"]",W[Be],ye,Se);else Se(P,W)}S.param=function(P,W){var ye,Se=[],Be=function(Fe,qe){var Mt=$(qe)?qe():qe;Se[Se.length]=encodeURIComponent(Fe)+"="+encodeURIComponent(Mt==null?"":Mt)};if(P==null)return"";if(Array.isArray(P)||P.jquery&&!S.isPlainObject(P))S.each(P,function(){Be(this.name,this.value)});else for(ye in P)an(ye,P[ye],W,Be);return Se.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var P=S.prop(this,"elements");return P?S.makeArray(P):this}).filter(function(){var P=this.type;return this.name&&!S(this).is(":disabled")&&Ht.test(this.nodeName)&&!pt.test(P)&&(this.checked||!kr.test(P))}).map(function(P,W){var ye=S(this).val();return ye==null?null:Array.isArray(ye)?S.map(ye,function(Se){return{name:W.name,value:Se.replace(Ke,`\r
`)}}):{name:W.name,value:ye.replace(Ke,`\r
`)}}).get()}});var Ln=/%20/g,wr=/#.*$/,yr=/([?&])_=[^&]*/,ei=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ii=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,to=/^(?:GET|HEAD)$/,Ji=/^\/\//,Yi={},Uo={},Oi="*/".concat("*"),Co=fe.createElement("a");Co.href=Xi.href;function Fs(P){return function(W,ye){typeof W!="string"&&(ye=W,W="*");var Se,Be=0,Fe=W.toLowerCase().match(ir)||[];if($(ye))for(;Se=Fe[Be++];)Se[0]==="+"?(Se=Se.slice(1)||"*",(P[Se]=P[Se]||[]).unshift(ye)):(P[Se]=P[Se]||[]).push(ye)}}function ss(P,W,ye,Se){var Be={},Fe=P===Uo;function qe(Mt){var Lt;return Be[Mt]=!0,S.each(P[Mt]||[],function(vn,Zn){var Qn=Zn(W,ye,Se);if(typeof Qn=="string"&&!Fe&&!Be[Qn])return W.dataTypes.unshift(Qn),qe(Qn),!1;if(Fe)return!(Lt=Qn)}),Lt}return qe(W.dataTypes[0])||!Be["*"]&&qe("*")}function qo(P,W){var ye,Se,Be=S.ajaxSettings.flatOptions||{};for(ye in W)W[ye]!==void 0&&((Be[ye]?P:Se||(Se={}))[ye]=W[ye]);return Se&&S.extend(!0,P,Se),P}function js(P,W,ye){for(var Se,Be,Fe,qe,Mt=P.contents,Lt=P.dataTypes;Lt[0]==="*";)Lt.shift(),Se===void 0&&(Se=P.mimeType||W.getResponseHeader("Content-Type"));if(Se){for(Be in Mt)if(Mt[Be]&&Mt[Be].test(Se)){Lt.unshift(Be);break}}if(Lt[0]in ye)Fe=Lt[0];else{for(Be in ye){if(!Lt[0]||P.converters[Be+" "+Lt[0]]){Fe=Be;break}qe||(qe=Be)}Fe=Fe||qe}if(Fe)return Fe!==Lt[0]&&Lt.unshift(Fe),ye[Fe]}function Zs(P,W,ye,Se){var Be,Fe,qe,Mt,Lt,vn={},Zn=P.dataTypes.slice();if(Zn[1])for(qe in P.converters)vn[qe.toLowerCase()]=P.converters[qe];for(Fe=Zn.shift();Fe;)if(P.responseFields[Fe]&&(ye[P.responseFields[Fe]]=W),!Lt&&Se&&P.dataFilter&&(W=P.dataFilter(W,P.dataType)),Lt=Fe,Fe=Zn.shift(),Fe){if(Fe==="*")Fe=Lt;else if(Lt!=="*"&&Lt!==Fe){if(qe=vn[Lt+" "+Fe]||vn["* "+Fe],!qe){for(Be in vn)if(Mt=Be.split(" "),Mt[1]===Fe&&(qe=vn[Lt+" "+Mt[0]]||vn["* "+Mt[0]],qe)){qe===!0?qe=vn[Be]:vn[Be]!==!0&&(Fe=Mt[0],Zn.unshift(Mt[1]));break}}if(qe!==!0)if(qe&&P.throws)W=qe(W);else try{W=qe(W)}catch(Qn){return{state:"parsererror",error:qe?Qn:"No conversion from "+Lt+" to "+Fe}}}}return{state:"success",data:W}}S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Xi.href,type:"GET",isLocal:Ii.test(Xi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Oi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(P,W){return W?qo(qo(P,S.ajaxSettings),W):qo(S.ajaxSettings,P)},ajaxPrefilter:Fs(Yi),ajaxTransport:Fs(Uo),ajax:function(P,W){typeof P=="object"&&(W=P,P=void 0),W=W||{};var ye,Se,Be,Fe,qe,Mt,Lt,vn,Zn,Qn,jn=S.ajaxSetup({},W),pr=jn.context||jn,vi=jn.context&&(pr.nodeType||pr.jquery)?S(pr):S.event,co=S.Deferred(),di=S.Callbacks("once memory"),Zo=jn.statusCode||{},qi={},is={},Js="canceled",Yo={readyState:0,getResponseHeader:function(ko){var vs;if(Lt){if(!Fe)for(Fe={};vs=ei.exec(Be);)Fe[vs[1].toLowerCase()+" "]=(Fe[vs[1].toLowerCase()+" "]||[]).concat(vs[2]);vs=Fe[ko.toLowerCase()+" "]}return vs==null?null:vs.join(", ")},getAllResponseHeaders:function(){return Lt?Be:null},setRequestHeader:function(ko,vs){return Lt==null&&(ko=is[ko.toLowerCase()]=is[ko.toLowerCase()]||ko,qi[ko]=vs),this},overrideMimeType:function(ko){return Lt==null&&(jn.mimeType=ko),this},statusCode:function(ko){var vs;if(ko)if(Lt)Yo.always(ko[Yo.status]);else for(vs in ko)Zo[vs]=[Zo[vs],ko[vs]];return this},abort:function(ko){var vs=ko||Js;return ye&&ye.abort(vs),Ss(0,vs),this}};if(co.promise(Yo),jn.url=((P||jn.url||Xi.href)+"").replace(Ji,Xi.protocol+"//"),jn.type=W.method||W.type||jn.method||jn.type,jn.dataTypes=(jn.dataType||"*").toLowerCase().match(ir)||[""],jn.crossDomain==null){Mt=fe.createElement("a");try{Mt.href=jn.url,Mt.href=Mt.href,jn.crossDomain=Co.protocol+"//"+Co.host!=Mt.protocol+"//"+Mt.host}catch(ko){jn.crossDomain=!0}}if(jn.data&&jn.processData&&typeof jn.data!="string"&&(jn.data=S.param(jn.data,jn.traditional)),ss(Yi,jn,W,Yo),Lt)return Yo;vn=S.event&&jn.global,vn&&S.active++===0&&S.event.trigger("ajaxStart"),jn.type=jn.type.toUpperCase(),jn.hasContent=!to.test(jn.type),Se=jn.url.replace(wr,""),jn.hasContent?jn.data&&jn.processData&&(jn.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(jn.data=jn.data.replace(Ln,"+")):(Qn=jn.url.slice(Se.length),jn.data&&(jn.processData||typeof jn.data=="string")&&(Se+=(cs.test(Se)?"&":"?")+jn.data,delete jn.data),jn.cache===!1&&(Se=Se.replace(yr,"$1"),Qn=(cs.test(Se)?"&":"?")+"_="+Ho.guid+++Qn),jn.url=Se+Qn),jn.ifModified&&(S.lastModified[Se]&&Yo.setRequestHeader("If-Modified-Since",S.lastModified[Se]),S.etag[Se]&&Yo.setRequestHeader("If-None-Match",S.etag[Se])),(jn.data&&jn.hasContent&&jn.contentType!==!1||W.contentType)&&Yo.setRequestHeader("Content-Type",jn.contentType),Yo.setRequestHeader("Accept",jn.dataTypes[0]&&jn.accepts[jn.dataTypes[0]]?jn.accepts[jn.dataTypes[0]]+(jn.dataTypes[0]!=="*"?", "+Oi+"; q=0.01":""):jn.accepts["*"]);for(Zn in jn.headers)Yo.setRequestHeader(Zn,jn.headers[Zn]);if(jn.beforeSend&&(jn.beforeSend.call(pr,Yo,jn)===!1||Lt))return Yo.abort();if(Js="abort",di.add(jn.complete),Yo.done(jn.success),Yo.fail(jn.error),ye=ss(Uo,jn,W,Yo),!ye)Ss(-1,"No Transport");else{if(Yo.readyState=1,vn&&vi.trigger("ajaxSend",[Yo,jn]),Lt)return Yo;jn.async&&jn.timeout>0&&(qe=o.setTimeout(function(){Yo.abort("timeout")},jn.timeout));try{Lt=!1,ye.send(qi,Ss)}catch(ko){if(Lt)throw ko;Ss(-1,ko)}}function Ss(ko,vs,xa,ua){var _s,Pa,Us,ta,La,qs=vs;Lt||(Lt=!0,qe&&o.clearTimeout(qe),ye=void 0,Be=ua||"",Yo.readyState=ko>0?4:0,_s=ko>=200&&ko<300||ko===304,xa&&(ta=js(jn,Yo,xa)),!_s&&S.inArray("script",jn.dataTypes)>-1&&S.inArray("json",jn.dataTypes)<0&&(jn.converters["text script"]=function(){}),ta=Zs(jn,ta,Yo,_s),_s?(jn.ifModified&&(La=Yo.getResponseHeader("Last-Modified"),La&&(S.lastModified[Se]=La),La=Yo.getResponseHeader("etag"),La&&(S.etag[Se]=La)),ko===204||jn.type==="HEAD"?qs="nocontent":ko===304?qs="notmodified":(qs=ta.state,Pa=ta.data,Us=ta.error,_s=!Us)):(Us=qs,(ko||!qs)&&(qs="error",ko<0&&(ko=0))),Yo.status=ko,Yo.statusText=(vs||qs)+"",_s?co.resolveWith(pr,[Pa,qs,Yo]):co.rejectWith(pr,[Yo,qs,Us]),Yo.statusCode(Zo),Zo=void 0,vn&&vi.trigger(_s?"ajaxSuccess":"ajaxError",[Yo,jn,_s?Pa:Us]),di.fireWith(pr,[Yo,qs]),vn&&(vi.trigger("ajaxComplete",[Yo,jn]),--S.active||S.event.trigger("ajaxStop")))}return Yo},getJSON:function(P,W,ye){return S.get(P,W,ye,"json")},getScript:function(P,W){return S.get(P,void 0,W,"script")}}),S.each(["get","post"],function(P,W){S[W]=function(ye,Se,Be,Fe){return $(Se)&&(Fe=Fe||Be,Be=Se,Se=void 0),S.ajax(S.extend({url:ye,type:W,dataType:Fe,data:Se,success:Be},S.isPlainObject(ye)&&ye))}}),S.ajaxPrefilter(function(P){var W;for(W in P.headers)W.toLowerCase()==="content-type"&&(P.contentType=P.headers[W]||"")}),S._evalUrl=function(P,W,ye){return S.ajax({url:P,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(Se){S.globalEval(Se,W,ye)}})},S.fn.extend({wrapAll:function(P){var W;return this[0]&&($(P)&&(P=P.call(this[0])),W=S(P,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&W.insertBefore(this[0]),W.map(function(){for(var ye=this;ye.firstElementChild;)ye=ye.firstElementChild;return ye}).append(this)),this},wrapInner:function(P){return $(P)?this.each(function(W){S(this).wrapInner(P.call(this,W))}):this.each(function(){var W=S(this),ye=W.contents();ye.length?ye.wrapAll(P):W.append(P)})},wrap:function(P){var W=$(P);return this.each(function(ye){S(this).wrapAll(W?P.call(this,ye):P)})},unwrap:function(P){return this.parent(P).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(P){return!S.expr.pseudos.visible(P)},S.expr.pseudos.visible=function(P){return!!(P.offsetWidth||P.offsetHeight||P.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new o.XMLHttpRequest}catch(P){}};var Mo={0:200,1223:204},la=S.ajaxSettings.xhr();ae.cors=!!la&&"withCredentials"in la,ae.ajax=la=!!la,S.ajaxTransport(function(P){var W,ye;if(ae.cors||la&&!P.crossDomain)return{send:function(Se,Be){var Fe,qe=P.xhr();if(qe.open(P.type,P.url,P.async,P.username,P.password),P.xhrFields)for(Fe in P.xhrFields)qe[Fe]=P.xhrFields[Fe];P.mimeType&&qe.overrideMimeType&&qe.overrideMimeType(P.mimeType),!P.crossDomain&&!Se["X-Requested-With"]&&(Se["X-Requested-With"]="XMLHttpRequest");for(Fe in Se)qe.setRequestHeader(Fe,Se[Fe]);W=function(Mt){return function(){W&&(W=ye=qe.onload=qe.onerror=qe.onabort=qe.ontimeout=qe.onreadystatechange=null,Mt==="abort"?qe.abort():Mt==="error"?typeof qe.status!="number"?Be(0,"error"):Be(qe.status,qe.statusText):Be(Mo[qe.status]||qe.status,qe.statusText,(qe.responseType||"text")!=="text"||typeof qe.responseText!="string"?{binary:qe.response}:{text:qe.responseText},qe.getAllResponseHeaders()))}},qe.onload=W(),ye=qe.onerror=qe.ontimeout=W("error"),qe.onabort!==void 0?qe.onabort=ye:qe.onreadystatechange=function(){qe.readyState===4&&o.setTimeout(function(){W&&ye()})},W=W("abort");try{qe.send(P.hasContent&&P.data||null)}catch(Mt){if(W)throw Mt}},abort:function(){W&&W()}}}),S.ajaxPrefilter(function(P){P.crossDomain&&(P.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(P){return S.globalEval(P),P}}}),S.ajaxPrefilter("script",function(P){P.cache===void 0&&(P.cache=!1),P.crossDomain&&(P.type="GET")}),S.ajaxTransport("script",function(P){if(P.crossDomain||P.scriptAttrs){var W,ye;return{send:function(Se,Be){W=S("<script>").attr(P.scriptAttrs||{}).prop({charset:P.scriptCharset,src:P.url}).on("load error",ye=function(Fe){W.remove(),ye=null,Fe&&Be(Fe.type==="error"?404:200,Fe.type)}),fe.head.appendChild(W[0])},abort:function(){ye&&ye()}}}});var X=[],ve=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var P=X.pop()||S.expando+"_"+Ho.guid++;return this[P]=!0,P}}),S.ajaxPrefilter("json jsonp",function(P,W,ye){var Se,Be,Fe,qe=P.jsonp!==!1&&(ve.test(P.url)?"url":typeof P.data=="string"&&(P.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ve.test(P.data)&&"data");if(qe||P.dataTypes[0]==="jsonp")return Se=P.jsonpCallback=$(P.jsonpCallback)?P.jsonpCallback():P.jsonpCallback,qe?P[qe]=P[qe].replace(ve,"$1"+Se):P.jsonp!==!1&&(P.url+=(cs.test(P.url)?"&":"?")+P.jsonp+"="+Se),P.converters["script json"]=function(){return Fe||S.error(Se+" was not called"),Fe[0]},P.dataTypes[0]="json",Be=o[Se],o[Se]=function(){Fe=arguments},ye.always(function(){Be===void 0?S(o).removeProp(Se):o[Se]=Be,P[Se]&&(P.jsonpCallback=W.jsonpCallback,X.push(Se)),Fe&&$(Be)&&Be(Fe[0]),Fe=Be=void 0}),"script"}),ae.createHTMLDocument=function(){var P=fe.implementation.createHTMLDocument("").body;return P.innerHTML="<form></form><form></form>",P.childNodes.length===2}(),S.parseHTML=function(P,W,ye){if(typeof P!="string")return[];typeof W=="boolean"&&(ye=W,W=!1);var Se,Be,Fe;return W||(ae.createHTMLDocument?(W=fe.implementation.createHTMLDocument(""),Se=W.createElement("base"),Se.href=fe.location.href,W.head.appendChild(Se)):W=fe),Be=Ct.exec(P),Fe=!ye&&[],Be?[W.createElement(Be[1])]:(Be=fs([P],W,Fe),Fe&&Fe.length&&S(Fe).remove(),S.merge([],Be.childNodes))},S.fn.load=function(P,W,ye){var Se,Be,Fe,qe=this,Mt=P.indexOf(" ");return Mt>-1&&(Se=Jr(P.slice(Mt)),P=P.slice(0,Mt)),$(W)?(ye=W,W=void 0):W&&typeof W=="object"&&(Be="POST"),qe.length>0&&S.ajax({url:P,type:Be||"GET",dataType:"html",data:W}).done(function(Lt){Fe=arguments,qe.html(Se?S("<div>").append(S.parseHTML(Lt)).find(Se):Lt)}).always(ye&&function(Lt,vn){qe.each(function(){ye.apply(this,Fe||[Lt.responseText,vn,Lt])})}),this},S.expr.pseudos.animated=function(P){return S.grep(S.timers,function(W){return P===W.elem}).length},S.offset={setOffset:function(P,W,ye){var Se,Be,Fe,qe,Mt,Lt,vn,Zn=S.css(P,"position"),Qn=S(P),jn={};Zn==="static"&&(P.style.position="relative"),Mt=Qn.offset(),Fe=S.css(P,"top"),Lt=S.css(P,"left"),vn=(Zn==="absolute"||Zn==="fixed")&&(Fe+Lt).indexOf("auto")>-1,vn?(Se=Qn.position(),qe=Se.top,Be=Se.left):(qe=parseFloat(Fe)||0,Be=parseFloat(Lt)||0),$(W)&&(W=W.call(P,ye,S.extend({},Mt))),W.top!=null&&(jn.top=W.top-Mt.top+qe),W.left!=null&&(jn.left=W.left-Mt.left+Be),"using"in W?W.using.call(P,jn):Qn.css(jn)}},S.fn.extend({offset:function(P){if(arguments.length)return P===void 0?this:this.each(function(Be){S.offset.setOffset(this,P,Be)});var W,ye,Se=this[0];if(Se)return Se.getClientRects().length?(W=Se.getBoundingClientRect(),ye=Se.ownerDocument.defaultView,{top:W.top+ye.pageYOffset,left:W.left+ye.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var P,W,ye,Se=this[0],Be={top:0,left:0};if(S.css(Se,"position")==="fixed")W=Se.getBoundingClientRect();else{for(W=this.offset(),ye=Se.ownerDocument,P=Se.offsetParent||ye.documentElement;P&&(P===ye.body||P===ye.documentElement)&&S.css(P,"position")==="static";)P=P.parentNode;P&&P!==Se&&P.nodeType===1&&(Be=S(P).offset(),Be.top+=S.css(P,"borderTopWidth",!0),Be.left+=S.css(P,"borderLeftWidth",!0))}return{top:W.top-Be.top-S.css(Se,"marginTop",!0),left:W.left-Be.left-S.css(Se,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var P=this.offsetParent;P&&S.css(P,"position")==="static";)P=P.offsetParent;return P||qn})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(P,W){var ye=W==="pageYOffset";S.fn[P]=function(Se){return zn(this,function(Be,Fe,qe){var Mt;if(te(Be)?Mt=Be:Be.nodeType===9&&(Mt=Be.defaultView),qe===void 0)return Mt?Mt[W]:Be[Fe];Mt?Mt.scrollTo(ye?Mt.pageXOffset:qe,ye?qe:Mt.pageYOffset):Be[Fe]=qe},P,Se,arguments.length)}}),S.each(["top","left"],function(P,W){S.cssHooks[W]=Cr(ae.pixelPosition,function(ye,Se){if(Se)return Se=En(ye,W),dt.test(Se)?S(ye).position()[W]+"px":Se})}),S.each({Height:"height",Width:"width"},function(P,W){S.each({padding:"inner"+P,content:W,"":"outer"+P},function(ye,Se){S.fn[Se]=function(Be,Fe){var qe=arguments.length&&(ye||typeof Be!="boolean"),Mt=ye||(Be===!0||Fe===!0?"margin":"border");return zn(this,function(Lt,vn,Zn){var Qn;return te(Lt)?Se.indexOf("outer")===0?Lt["inner"+P]:Lt.document.documentElement["client"+P]:Lt.nodeType===9?(Qn=Lt.documentElement,Math.max(Lt.body["scroll"+P],Qn["scroll"+P],Lt.body["offset"+P],Qn["offset"+P],Qn["client"+P])):Zn===void 0?S.css(Lt,vn,Mt):S.style(Lt,vn,Zn,Mt)},W,qe?Be:void 0,qe)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(P,W){S.fn[W]=function(ye){return this.on(W,ye)}}),S.fn.extend({bind:function(P,W,ye){return this.on(P,null,W,ye)},unbind:function(P,W){return this.off(P,null,W)},delegate:function(P,W,ye,Se){return this.on(W,P,ye,Se)},undelegate:function(P,W,ye){return arguments.length===1?this.off(P,"**"):this.off(W,P||"**",ye)},hover:function(P,W){return this.on("mouseenter",P).on("mouseleave",W||P)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(P,W){S.fn[W]=function(ye,Se){return arguments.length>0?this.on(W,null,ye,Se):this.trigger(W)}});var Ie=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(P,W){var ye,Se,Be;if(typeof W=="string"&&(ye=P[W],W=P,P=ye),!!$(P))return Se=t.call(arguments,2),Be=function(){return P.apply(W||this,Se.concat(t.call(arguments)))},Be.guid=P.guid=P.guid||S.guid++,Be},S.holdReady=function(P){P?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=M,S.isFunction=$,S.isWindow=te,S.camelCase=_t,S.type=z,S.now=Date.now,S.isNumeric=function(P){var W=S.type(P);return(W==="number"||W==="string")&&!isNaN(P-parseFloat(P))},S.trim=function(P){return P==null?"":(P+"").replace(Ie,"$1")},u=[],a=function(){return S}.apply(b,u),a!==void 0&&(T.exports=a);var ke=o.jQuery,st=o.$;return S.noConflict=function(P){return o.$===S&&(o.$=st),P&&o.jQuery===S&&(o.jQuery=ke),S},typeof l=="undefined"&&(o.jQuery=o.$=S),S})},5584:function(T,b,u){var a=u(3893),o=u(3152),l=a(o,"DataView");T.exports=l},6414:function(T,b,u){var a=u(4696),o=u(6824),l=u(3476),r=u(3122),e=u(7279);function t(s){var h=-1,m=s==null?0:s.length;for(this.clear();++h<m;){var d=s[h];this.set(d[0],d[1])}}t.prototype.clear=a,t.prototype.delete=o,t.prototype.get=l,t.prototype.has=r,t.prototype.set=e,T.exports=t},9746:function(T,b,u){var a=u(4251),o=u(4968),l=u(8290),r=u(8068),e=u(4238);function t(s){var h=-1,m=s==null?0:s.length;for(this.clear();++h<m;){var d=s[h];this.set(d[0],d[1])}}t.prototype.clear=a,t.prototype.delete=o,t.prototype.get=l,t.prototype.has=r,t.prototype.set=e,T.exports=t},164:function(T,b,u){var a=u(3893),o=u(3152),l=a(o,"Map");T.exports=l},2166:function(T,b,u){var a=u(5365),o=u(3765),l=u(2608),r=u(203),e=u(1298);function t(s){var h=-1,m=s==null?0:s.length;for(this.clear();++h<m;){var d=s[h];this.set(d[0],d[1])}}t.prototype.clear=a,t.prototype.delete=o,t.prototype.get=l,t.prototype.has=r,t.prototype.set=e,T.exports=t},7288:function(T,b,u){var a=u(3893),o=u(3152),l=a(o,"Promise");T.exports=l},3599:function(T,b,u){var a=u(3893),o=u(3152),l=a(o,"Set");T.exports=l},8924:function(T,b,u){var a=u(2166),o=u(4776),l=u(393);function r(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new a;++t<s;)this.add(e[t])}r.prototype.add=r.prototype.push=o,r.prototype.has=l,T.exports=r},1866:function(T,b,u){var a=u(9746),o=u(1119),l=u(4399),r=u(1897),e=u(558),t=u(4841);function s(h){var m=this.__data__=new a(h);this.size=m.size}s.prototype.clear=o,s.prototype.delete=l,s.prototype.get=r,s.prototype.has=e,s.prototype.set=t,T.exports=s},1869:function(T,b,u){var a=u(3152),o=a.Symbol;T.exports=o},7945:function(T,b,u){var a=u(3152),o=a.Uint8Array;T.exports=o},6873:function(T,b,u){var a=u(3893),o=u(3152),l=a(o,"WeakMap");T.exports=l},9628:function(T){function b(u,a,o){switch(o.length){case 0:return u.call(a);case 1:return u.call(a,o[0]);case 2:return u.call(a,o[0],o[1]);case 3:return u.call(a,o[0],o[1],o[2])}return u.apply(a,o)}T.exports=b},4809:function(T){function b(u,a){for(var o=-1,l=u==null?0:u.length;++o<l&&a(u[o],o,u)!==!1;);return u}T.exports=b},6952:function(T){function b(u,a){for(var o=-1,l=u==null?0:u.length,r=0,e=[];++o<l;){var t=u[o];a(t,o,u)&&(e[r++]=t)}return e}T.exports=b},4271:function(T,b,u){var a=u(7424);function o(l,r){var e=l==null?0:l.length;return!!e&&a(l,r,0)>-1}T.exports=o},4874:function(T){function b(u,a,o){for(var l=-1,r=u==null?0:u.length;++l<r;)if(o(a,u[l]))return!0;return!1}T.exports=b},3333:function(T,b,u){var a=u(7943),o=u(3053),l=u(744),r=u(7835),e=u(213),t=u(8397),s=Object.prototype,h=s.hasOwnProperty;function m(d,v){var x=l(d),N=!x&&o(d),F=!x&&!N&&r(d),ae=!x&&!N&&!F&&t(d),$=x||N||F||ae,te=$?a(d.length,String):[],fe=te.length;for(var B in d)(v||h.call(d,B))&&!($&&(B=="length"||F&&(B=="offset"||B=="parent")||ae&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||e(B,fe)))&&te.push(B);return te}T.exports=m},5010:function(T){function b(u,a){for(var o=-1,l=u==null?0:u.length,r=Array(l);++o<l;)r[o]=a(u[o],o,u);return r}T.exports=b},7095:function(T){function b(u,a){for(var o=-1,l=a.length,r=u.length;++o<l;)u[r+o]=a[o];return u}T.exports=b},9861:function(T){function b(u,a,o,l){var r=-1,e=u==null?0:u.length;for(l&&e&&(o=u[++r]);++r<e;)o=a(o,u[r],r,u);return o}T.exports=b},4045:function(T){function b(u,a){for(var o=-1,l=u==null?0:u.length;++o<l;)if(a(u[o],o,u))return!0;return!1}T.exports=b},6539:function(T,b,u){var a=u(2310),o=a("length");T.exports=o},9135:function(T,b,u){var a=u(2813),o=u(3607);function l(r,e,t){(t!==void 0&&!o(r[e],t)||t===void 0&&!(e in r))&&a(r,e,t)}T.exports=l},348:function(T,b,u){var a=u(2813),o=u(3607),l=Object.prototype,r=l.hasOwnProperty;function e(t,s,h){var m=t[s];(!(r.call(t,s)&&o(m,h))||h===void 0&&!(s in t))&&a(t,s,h)}T.exports=e},7971:function(T,b,u){var a=u(3607);function o(l,r){for(var e=l.length;e--;)if(a(l[e][0],r))return e;return-1}T.exports=o},1937:function(T,b,u){var a=u(5378),o=u(5451);function l(r,e){return r&&a(e,o(e),r)}T.exports=l},6680:function(T,b,u){var a=u(5378),o=u(6730);function l(r,e){return r&&a(e,o(e),r)}T.exports=l},2813:function(T,b,u){var a=u(5234);function o(l,r,e){r=="__proto__"&&a?a(l,r,{configurable:!0,enumerable:!0,value:e,writable:!0}):l[r]=e}T.exports=o},9045:function(T,b,u){var a=u(1866),o=u(4809),l=u(348),r=u(1937),e=u(6680),t=u(2315),s=u(7760),h=u(5168),m=u(1678),d=u(2076),v=u(2675),x=u(6139),N=u(9264),F=u(7541),ae=u(4084),$=u(744),te=u(7835),fe=u(1626),B=u(816),he=u(5226),z=u(5451),ee=u(6730),pe=1,S=2,q=4,M="[object Arguments]",I="[object Array]",j="[object Boolean]",ue="[object Date]",se="[object Error]",Ee="[object Function]",Ce="[object GeneratorFunction]",xe="[object Map]",Oe="[object Number]",Le="[object Object]",Ge="[object RegExp]",He="[object Set]",Et="[object String]",Ct="[object Symbol]",Gt="[object WeakMap]",At="[object ArrayBuffer]",vt="[object DataView]",cn="[object Float32Array]",hn="[object Float64Array]",Bn="[object Int8Array]",Fn="[object Int16Array]",ir="[object Int32Array]",Nr="[object Uint8Array]",Ei="[object Uint8ClampedArray]",ci="[object Uint16Array]",Ot="[object Uint32Array]",fr={};fr[M]=fr[I]=fr[At]=fr[vt]=fr[j]=fr[ue]=fr[cn]=fr[hn]=fr[Bn]=fr[Fn]=fr[ir]=fr[xe]=fr[Oe]=fr[Le]=fr[Ge]=fr[He]=fr[Et]=fr[Ct]=fr[Nr]=fr[Ei]=fr[ci]=fr[Ot]=!0,fr[se]=fr[Ee]=fr[Gt]=!1;function Pi(Li,zn,$e,Xt,Rt,_t){var Tt,at=zn&pe,ce=zn&S,ut=zn&q;if($e&&(Tt=Rt?$e(Li,Xt,Rt,_t):$e(Li)),Tt!==void 0)return Tt;if(!B(Li))return Li;var Ze=$(Li);if(Ze){if(Tt=N(Li),!at)return s(Li,Tt)}else{var Wt=x(Li),Ut=Wt==Ee||Wt==Ce;if(te(Li))return t(Li,at);if(Wt==Le||Wt==M||Ut&&!Rt){if(Tt=ce||Ut?{}:ae(Li),!at)return ce?m(Li,e(Tt,Li)):h(Li,r(Tt,Li))}else{if(!fr[Wt])return Rt?Li:{};Tt=F(Li,Wt,at)}}_t||(_t=new a);var jt=_t.get(Li);if(jt)return jt;_t.set(Li,Tt),he(Li)?Li.forEach(function(Un){Tt.add(Pi(Un,zn,$e,Un,Li,_t))}):fe(Li)&&Li.forEach(function(Un,qn){Tt.set(qn,Pi(Un,zn,$e,qn,Li,_t))});var xt=ut?ce?v:d:ce?ee:z,$t=Ze?void 0:xt(Li);return o($t||Li,function(Un,qn){$t&&(qn=Un,Un=Li[qn]),l(Tt,qn,Pi(Un,zn,$e,qn,Li,_t))}),Tt}T.exports=Pi},5024:function(T,b,u){var a=u(816),o=Object.create,l=function(){function r(){}return function(e){if(!a(e))return{};if(o)return o(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();T.exports=l},4107:function(T,b,u){var a=u(1585),o=u(9164),l=o(a);T.exports=l},2659:function(T,b,u){var a=u(5029);function o(l,r,e){for(var t=-1,s=l.length;++t<s;){var h=l[t],m=r(h);if(m!=null&&(d===void 0?m===m&&!a(m):e(m,d)))var d=m,v=h}return v}T.exports=o},2872:function(T,b,u){var a=u(4107);function o(l,r){var e=[];return a(l,function(t,s,h){r(t,s,h)&&e.push(t)}),e}T.exports=o},1533:function(T){function b(u,a,o,l){for(var r=u.length,e=o+(l?1:-1);l?e--:++e<r;)if(a(u[e],e,u))return e;return-1}T.exports=b},9256:function(T,b,u){var a=u(7095),o=u(8133);function l(r,e,t,s,h){var m=-1,d=r.length;for(t||(t=o),h||(h=[]);++m<d;){var v=r[m];e>0&&t(v)?e>1?l(v,e-1,t,s,h):a(h,v):s||(h[h.length]=v)}return h}T.exports=l},4018:function(T,b,u){var a=u(8010),o=a();T.exports=o},1585:function(T,b,u){var a=u(4018),o=u(5451);function l(r,e){return r&&a(r,e,o)}T.exports=l},9147:function(T,b,u){var a=u(1186),o=u(9171);function l(r,e){e=a(e,r);for(var t=0,s=e.length;r!=null&&t<s;)r=r[o(e[t++])];return t&&t==s?r:void 0}T.exports=l},5635:function(T,b,u){var a=u(7095),o=u(744);function l(r,e,t){var s=e(r);return o(r)?s:a(s,t(r))}T.exports=l},6756:function(T,b,u){var a=u(1869),o=u(2533),l=u(4702),r="[object Null]",e="[object Undefined]",t=a?a.toStringTag:void 0;function s(h){return h==null?h===void 0?e:r:t&&t in Object(h)?o(h):l(h)}T.exports=s},302:function(T){function b(u,a){return u>a}T.exports=b},3251:function(T){var b=Object.prototype,u=b.hasOwnProperty;function a(o,l){return o!=null&&u.call(o,l)}T.exports=a},2348:function(T){function b(u,a){return u!=null&&a in Object(u)}T.exports=b},7424:function(T,b,u){var a=u(1533),o=u(8373),l=u(9237);function r(e,t,s){return t===t?l(e,t,s):a(e,o,s)}T.exports=r},4977:function(T,b,u){var a=u(6756),o=u(3913),l="[object Arguments]";function r(e){return o(e)&&a(e)==l}T.exports=r},7295:function(T,b,u){var a=u(4412),o=u(3913);function l(r,e,t,s,h){return r===e?!0:r==null||e==null||!o(r)&&!o(e)?r!==r&&e!==e:a(r,e,t,s,l,h)}T.exports=l},4412:function(T,b,u){var a=u(1866),o=u(401),l=u(7710),r=u(4983),e=u(6139),t=u(744),s=u(7835),h=u(8397),m=1,d="[object Arguments]",v="[object Array]",x="[object Object]",N=Object.prototype,F=N.hasOwnProperty;function ae($,te,fe,B,he,z){var ee=t($),pe=t(te),S=ee?v:e($),q=pe?v:e(te);S=S==d?x:S,q=q==d?x:q;var M=S==x,I=q==x,j=S==q;if(j&&s($)){if(!s(te))return!1;ee=!0,M=!1}if(j&&!M)return z||(z=new a),ee||h($)?o($,te,fe,B,he,z):l($,te,S,fe,B,he,z);if(!(fe&m)){var ue=M&&F.call($,"__wrapped__"),se=I&&F.call(te,"__wrapped__");if(ue||se){var Ee=ue?$.value():$,Ce=se?te.value():te;return z||(z=new a),he(Ee,Ce,fe,B,z)}}return j?(z||(z=new a),r($,te,fe,B,he,z)):!1}T.exports=ae},5005:function(T,b,u){var a=u(6139),o=u(3913),l="[object Map]";function r(e){return o(e)&&a(e)==l}T.exports=r},1524:function(T,b,u){var a=u(1866),o=u(7295),l=1,r=2;function e(t,s,h,m){var d=h.length,v=d,x=!m;if(t==null)return!v;for(t=Object(t);d--;){var N=h[d];if(x&&N[2]?N[1]!==t[N[0]]:!(N[0]in t))return!1}for(;++d<v;){N=h[d];var F=N[0],ae=t[F],$=N[1];if(x&&N[2]){if(ae===void 0&&!(F in t))return!1}else{var te=new a;if(m)var fe=m(ae,$,F,t,s,te);if(!(fe===void 0?o($,ae,l|r,m,te):fe))return!1}}return!0}T.exports=e},8373:function(T){function b(u){return u!==u}T.exports=b},6367:function(T,b,u){var a=u(9363),o=u(9379),l=u(816),r=u(3256),e=/[\\^$.*+?()[\]{}|]/g,t=/^\[object .+?Constructor\]$/,s=Function.prototype,h=Object.prototype,m=s.toString,d=h.hasOwnProperty,v=RegExp("^"+m.call(d).replace(e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function x(N){if(!l(N)||o(N))return!1;var F=a(N)?v:t;return F.test(r(N))}T.exports=x},8652:function(T,b,u){var a=u(6139),o=u(3913),l="[object Set]";function r(e){return o(e)&&a(e)==l}T.exports=r},766:function(T,b,u){var a=u(6756),o=u(1156),l=u(3913),r="[object Arguments]",e="[object Array]",t="[object Boolean]",s="[object Date]",h="[object Error]",m="[object Function]",d="[object Map]",v="[object Number]",x="[object Object]",N="[object RegExp]",F="[object Set]",ae="[object String]",$="[object WeakMap]",te="[object ArrayBuffer]",fe="[object DataView]",B="[object Float32Array]",he="[object Float64Array]",z="[object Int8Array]",ee="[object Int16Array]",pe="[object Int32Array]",S="[object Uint8Array]",q="[object Uint8ClampedArray]",M="[object Uint16Array]",I="[object Uint32Array]",j={};j[B]=j[he]=j[z]=j[ee]=j[pe]=j[S]=j[q]=j[M]=j[I]=!0,j[r]=j[e]=j[te]=j[t]=j[fe]=j[s]=j[h]=j[m]=j[d]=j[v]=j[x]=j[N]=j[F]=j[ae]=j[$]=!1;function ue(se){return l(se)&&o(se.length)&&!!j[a(se)]}T.exports=ue},5979:function(T,b,u){var a=u(7632),o=u(8933),l=u(6962),r=u(744),e=u(5769);function t(s){return typeof s=="function"?s:s==null?l:typeof s=="object"?r(s)?o(s[0],s[1]):a(s):e(s)}T.exports=t},6019:function(T,b,u){var a=u(7975),o=u(3730),l=Object.prototype,r=l.hasOwnProperty;function e(t){if(!a(t))return o(t);var s=[];for(var h in Object(t))r.call(t,h)&&h!="constructor"&&s.push(h);return s}T.exports=e},3988:function(T,b,u){var a=u(816),o=u(7975),l=u(7817),r=Object.prototype,e=r.hasOwnProperty;function t(s){if(!a(s))return l(s);var h=o(s),m=[];for(var d in s)d=="constructor"&&(h||!e.call(s,d))||m.push(d);return m}T.exports=t},3757:function(T){function b(u,a){return u<a}T.exports=b},5487:function(T,b,u){var a=u(4107),o=u(4665);function l(r,e){var t=-1,s=o(r)?Array(r.length):[];return a(r,function(h,m,d){s[++t]=e(h,m,d)}),s}T.exports=l},7632:function(T,b,u){var a=u(1524),o=u(261),l=u(4122);function r(e){var t=o(e);return t.length==1&&t[0][2]?l(t[0][0],t[0][1]):function(s){return s===e||a(s,e,t)}}T.exports=r},8933:function(T,b,u){var a=u(7295),o=u(4231),l=u(7879),r=u(6773),e=u(8411),t=u(4122),s=u(9171),h=1,m=2;function d(v,x){return r(v)&&e(x)?t(s(v),x):function(N){var F=o(N,v);return F===void 0&&F===x?l(N,v):a(x,F,h|m)}}T.exports=d},97:function(T,b,u){var a=u(1866),o=u(9135),l=u(4018),r=u(3585),e=u(816),t=u(6730),s=u(7052);function h(m,d,v,x,N){m!==d&&l(d,function(F,ae){if(N||(N=new a),e(F))r(m,d,ae,v,h,x,N);else{var $=x?x(s(m,ae),F,ae+"",m,d,N):void 0;$===void 0&&($=F),o(m,ae,$)}},t)}T.exports=h},3585:function(T,b,u){var a=u(9135),o=u(2315),l=u(8358),r=u(7760),e=u(4084),t=u(3053),s=u(744),h=u(1590),m=u(7835),d=u(9363),v=u(816),x=u(9308),N=u(8397),F=u(7052),ae=u(480);function $(te,fe,B,he,z,ee,pe){var S=F(te,B),q=F(fe,B),M=pe.get(q);if(M){a(te,B,M);return}var I=ee?ee(S,q,B+"",te,fe,pe):void 0,j=I===void 0;if(j){var ue=s(q),se=!ue&&m(q),Ee=!ue&&!se&&N(q);I=q,ue||se||Ee?s(S)?I=S:h(S)?I=r(S):se?(j=!1,I=o(q,!0)):Ee?(j=!1,I=l(q,!0)):I=[]:x(q)||t(q)?(I=S,t(S)?I=ae(S):(!v(S)||d(S))&&(I=e(q))):j=!1}j&&(pe.set(q,I),z(I,q,he,ee,pe),pe.delete(q)),a(te,B,I)}T.exports=$},8506:function(T,b,u){var a=u(5010),o=u(9147),l=u(5979),r=u(5487),e=u(3065),t=u(8342),s=u(1249),h=u(6962),m=u(744);function d(v,x,N){x.length?x=a(x,function($){return m($)?function(te){return o(te,$.length===1?$[0]:$)}:$}):x=[h];var F=-1;x=a(x,t(l));var ae=r(v,function($,te,fe){var B=a(x,function(he){return he($)});return{criteria:B,index:++F,value:$}});return e(ae,function($,te){return s($,te,N)})}T.exports=d},8832:function(T,b,u){var a=u(867),o=u(7879);function l(r,e){return a(r,e,function(t,s){return o(r,s)})}T.exports=l},867:function(T,b,u){var a=u(9147),o=u(6897),l=u(1186);function r(e,t,s){for(var h=-1,m=t.length,d={};++h<m;){var v=t[h],x=a(e,v);s(x,v)&&o(d,l(v,e),x)}return d}T.exports=r},2310:function(T){function b(u){return function(a){return a==null?void 0:a[u]}}T.exports=b},6916:function(T,b,u){var a=u(9147);function o(l){return function(r){return a(r,l)}}T.exports=o},6121:function(T){var b=Math.ceil,u=Math.max;function a(o,l,r,e){for(var t=-1,s=u(b((l-o)/(r||1)),0),h=Array(s);s--;)h[e?s:++t]=o,o+=r;return h}T.exports=a},739:function(T){function b(u,a,o,l,r){return r(u,function(e,t,s){o=l?(l=!1,e):a(o,e,t,s)}),o}T.exports=b},2918:function(T,b,u){var a=u(6962),o=u(9652),l=u(1152);function r(e,t){return l(o(e,t,a),e+"")}T.exports=r},6897:function(T,b,u){var a=u(348),o=u(1186),l=u(213),r=u(816),e=u(9171);function t(s,h,m,d){if(!r(s))return s;h=o(h,s);for(var v=-1,x=h.length,N=x-1,F=s;F!=null&&++v<x;){var ae=e(h[v]),$=m;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return s;if(v!=N){var te=F[ae];$=d?d(te,ae,F):void 0,$===void 0&&($=r(te)?te:l(h[v+1])?[]:{})}a(F,ae,$),F=F[ae]}return s}T.exports=t},3989:function(T,b,u){var a=u(3503),o=u(5234),l=u(6962),r=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:l;T.exports=r},3065:function(T){function b(u,a){var o=u.length;for(u.sort(a);o--;)u[o]=u[o].value;return u}T.exports=b},7943:function(T){function b(u,a){for(var o=-1,l=Array(u);++o<u;)l[o]=a(o);return l}T.exports=b},230:function(T,b,u){var a=u(1869),o=u(5010),l=u(744),r=u(5029),e=1/0,t=a?a.prototype:void 0,s=t?t.toString:void 0;function h(m){if(typeof m=="string")return m;if(l(m))return o(m,h)+"";if(r(m))return s?s.call(m):"";var d=m+"";return d=="0"&&1/m==-e?"-0":d}T.exports=h},3927:function(T,b,u){var a=u(5333),o=/^\s+/;function l(r){return r&&r.slice(0,a(r)+1).replace(o,"")}T.exports=l},8342:function(T){function b(u){return function(a){return u(a)}}T.exports=b},9098:function(T,b,u){var a=u(8924),o=u(4271),l=u(4874),r=u(1931),e=u(7506),t=u(9679),s=200;function h(m,d,v){var x=-1,N=o,F=m.length,ae=!0,$=[],te=$;if(v)ae=!1,N=l;else if(F>=s){var fe=d?null:e(m);if(fe)return t(fe);ae=!1,N=r,te=new a}else te=d?[]:$;e:for(;++x<F;){var B=m[x],he=d?d(B):B;if(B=v||B!==0?B:0,ae&&he===he){for(var z=te.length;z--;)if(te[z]===he)continue e;d&&te.push(he),$.push(B)}else N(te,he,v)||(te!==$&&te.push(he),$.push(B))}return $}T.exports=h},720:function(T,b,u){var a=u(5010);function o(l,r){return a(r,function(e){return l[e]})}T.exports=o},4484:function(T){function b(u,a,o){for(var l=-1,r=u.length,e=a.length,t={};++l<r;){var s=l<e?a[l]:void 0;o(t,u[l],s)}return t}T.exports=b},1931:function(T){function b(u,a){return u.has(a)}T.exports=b},1756:function(T,b,u){var a=u(6962);function o(l){return typeof l=="function"?l:a}T.exports=o},1186:function(T,b,u){var a=u(744),o=u(6773),l=u(493),r=u(4140);function e(t,s){return a(t)?t:o(t,s)?[t]:l(r(t))}T.exports=e},188:function(T,b,u){var a=u(7945);function o(l){var r=new l.constructor(l.byteLength);return new a(r).set(new a(l)),r}T.exports=o},2315:function(T,b,u){T=u.nmd(T);var a=u(3152),o=b&&!b.nodeType&&b,l=o&&!0&&T&&!T.nodeType&&T,r=l&&l.exports===o,e=r?a.Buffer:void 0,t=e?e.allocUnsafe:void 0;function s(h,m){if(m)return h.slice();var d=h.length,v=t?t(d):new h.constructor(d);return h.copy(v),v}T.exports=s},7984:function(T,b,u){var a=u(188);function o(l,r){var e=r?a(l.buffer):l.buffer;return new l.constructor(e,l.byteOffset,l.byteLength)}T.exports=o},8583:function(T){var b=/\w*$/;function u(a){var o=new a.constructor(a.source,b.exec(a));return o.lastIndex=a.lastIndex,o}T.exports=u},8757:function(T,b,u){var a=u(1869),o=a?a.prototype:void 0,l=o?o.valueOf:void 0;function r(e){return l?Object(l.call(e)):{}}T.exports=r},8358:function(T,b,u){var a=u(188);function o(l,r){var e=r?a(l.buffer):l.buffer;return new l.constructor(e,l.byteOffset,l.length)}T.exports=o},3018:function(T,b,u){var a=u(5029);function o(l,r){if(l!==r){var e=l!==void 0,t=l===null,s=l===l,h=a(l),m=r!==void 0,d=r===null,v=r===r,x=a(r);if(!d&&!x&&!h&&l>r||h&&m&&v&&!d&&!x||t&&m&&v||!e&&v||!s)return 1;if(!t&&!h&&!x&&l<r||x&&e&&s&&!t&&!h||d&&e&&s||!m&&s||!v)return-1}return 0}T.exports=o},1249:function(T,b,u){var a=u(3018);function o(l,r,e){for(var t=-1,s=l.criteria,h=r.criteria,m=s.length,d=e.length;++t<m;){var v=a(s[t],h[t]);if(v){if(t>=d)return v;var x=e[t];return v*(x=="desc"?-1:1)}}return l.index-r.index}T.exports=o},7760:function(T){function b(u,a){var o=-1,l=u.length;for(a||(a=Array(l));++o<l;)a[o]=u[o];return a}T.exports=b},5378:function(T,b,u){var a=u(348),o=u(2813);function l(r,e,t,s){var h=!t;t||(t={});for(var m=-1,d=e.length;++m<d;){var v=e[m],x=s?s(t[v],r[v],v,t,r):void 0;x===void 0&&(x=r[v]),h?o(t,v,x):a(t,v,x)}return t}T.exports=l},5168:function(T,b,u){var a=u(5378),o=u(8966);function l(r,e){return a(r,o(r),e)}T.exports=l},1678:function(T,b,u){var a=u(5378),o=u(6817);function l(r,e){return a(r,o(r),e)}T.exports=l},4218:function(T,b,u){var a=u(3152),o=a["__core-js_shared__"];T.exports=o},3323:function(T,b,u){var a=u(2918),o=u(8138);function l(r){return a(function(e,t){var s=-1,h=t.length,m=h>1?t[h-1]:void 0,d=h>2?t[2]:void 0;for(m=r.length>3&&typeof m=="function"?(h--,m):void 0,d&&o(t[0],t[1],d)&&(m=h<3?void 0:m,h=1),e=Object(e);++s<h;){var v=t[s];v&&r(e,v,s,m)}return e})}T.exports=l},9164:function(T,b,u){var a=u(4665);function o(l,r){return function(e,t){if(e==null)return e;if(!a(e))return l(e,t);for(var s=e.length,h=r?s:-1,m=Object(e);(r?h--:++h<s)&&t(m[h],h,m)!==!1;);return e}}T.exports=o},8010:function(T){function b(u){return function(a,o,l){for(var r=-1,e=Object(a),t=l(a),s=t.length;s--;){var h=t[u?s:++r];if(o(e[h],h,e)===!1)break}return a}}T.exports=b},9554:function(T,b,u){var a=u(5979),o=u(4665),l=u(5451);function r(e){return function(t,s,h){var m=Object(t);if(!o(t)){var d=a(s,3);t=l(t),s=function(x){return d(m[x],x,m)}}var v=e(t,s,h);return v>-1?m[d?t[v]:v]:void 0}}T.exports=r},6106:function(T,b,u){var a=u(6121),o=u(8138),l=u(7341);function r(e){return function(t,s,h){return h&&typeof h!="number"&&o(t,s,h)&&(s=h=void 0),t=l(t),s===void 0?(s=t,t=0):s=l(s),h=h===void 0?t<s?1:-1:l(h),a(t,s,h,e)}}T.exports=r},7506:function(T,b,u){var a=u(3599),o=u(9958),l=u(9679),r=1/0,e=a&&1/l(new a([,-0]))[1]==r?function(t){return new a(t)}:o;T.exports=e},5234:function(T,b,u){var a=u(3893),o=function(){try{var l=a(Object,"defineProperty");return l({},"",{}),l}catch(r){}}();T.exports=o},401:function(T,b,u){var a=u(8924),o=u(4045),l=u(1931),r=1,e=2;function t(s,h,m,d,v,x){var N=m&r,F=s.length,ae=h.length;if(F!=ae&&!(N&&ae>F))return!1;var $=x.get(s),te=x.get(h);if($&&te)return $==h&&te==s;var fe=-1,B=!0,he=m&e?new a:void 0;for(x.set(s,h),x.set(h,s);++fe<F;){var z=s[fe],ee=h[fe];if(d)var pe=N?d(ee,z,fe,h,s,x):d(z,ee,fe,s,h,x);if(pe!==void 0){if(pe)continue;B=!1;break}if(he){if(!o(h,function(S,q){if(!l(he,q)&&(z===S||v(z,S,m,d,x)))return he.push(q)})){B=!1;break}}else if(!(z===ee||v(z,ee,m,d,x))){B=!1;break}}return x.delete(s),x.delete(h),B}T.exports=t},7710:function(T,b,u){var a=u(1869),o=u(7945),l=u(3607),r=u(401),e=u(3383),t=u(9679),s=1,h=2,m="[object Boolean]",d="[object Date]",v="[object Error]",x="[object Map]",N="[object Number]",F="[object RegExp]",ae="[object Set]",$="[object String]",te="[object Symbol]",fe="[object ArrayBuffer]",B="[object DataView]",he=a?a.prototype:void 0,z=he?he.valueOf:void 0;function ee(pe,S,q,M,I,j,ue){switch(q){case B:if(pe.byteLength!=S.byteLength||pe.byteOffset!=S.byteOffset)return!1;pe=pe.buffer,S=S.buffer;case fe:return!(pe.byteLength!=S.byteLength||!j(new o(pe),new o(S)));case m:case d:case N:return l(+pe,+S);case v:return pe.name==S.name&&pe.message==S.message;case F:case $:return pe==S+"";case x:var se=e;case ae:var Ee=M&s;if(se||(se=t),pe.size!=S.size&&!Ee)return!1;var Ce=ue.get(pe);if(Ce)return Ce==S;M|=h,ue.set(pe,S);var xe=r(se(pe),se(S),M,I,j,ue);return ue.delete(pe),xe;case te:if(z)return z.call(pe)==z.call(S)}return!1}T.exports=ee},4983:function(T,b,u){var a=u(2076),o=1,l=Object.prototype,r=l.hasOwnProperty;function e(t,s,h,m,d,v){var x=h&o,N=a(t),F=N.length,ae=a(s),$=ae.length;if(F!=$&&!x)return!1;for(var te=F;te--;){var fe=N[te];if(!(x?fe in s:r.call(s,fe)))return!1}var B=v.get(t),he=v.get(s);if(B&&he)return B==s&&he==t;var z=!0;v.set(t,s),v.set(s,t);for(var ee=x;++te<F;){fe=N[te];var pe=t[fe],S=s[fe];if(m)var q=x?m(S,pe,fe,s,t,v):m(pe,S,fe,t,s,v);if(!(q===void 0?pe===S||d(pe,S,h,m,v):q)){z=!1;break}ee||(ee=fe=="constructor")}if(z&&!ee){var M=t.constructor,I=s.constructor;M!=I&&"constructor"in t&&"constructor"in s&&!(typeof M=="function"&&M instanceof M&&typeof I=="function"&&I instanceof I)&&(z=!1)}return v.delete(t),v.delete(s),z}T.exports=e},522:function(T,b,u){var a=u(151),o=u(9652),l=u(1152);function r(e){return l(o(e,void 0,a),e+"")}T.exports=r},7675:function(T,b,u){var a=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g;T.exports=a},2076:function(T,b,u){var a=u(5635),o=u(8966),l=u(5451);function r(e){return a(e,l,o)}T.exports=r},2675:function(T,b,u){var a=u(5635),o=u(6817),l=u(6730);function r(e){return a(e,l,o)}T.exports=r},9819:function(T,b,u){var a=u(4358);function o(l,r){var e=l.__data__;return a(r)?e[typeof r=="string"?"string":"hash"]:e.map}T.exports=o},261:function(T,b,u){var a=u(8411),o=u(5451);function l(r){for(var e=o(r),t=e.length;t--;){var s=e[t],h=r[s];e[t]=[s,h,a(h)]}return e}T.exports=l},3893:function(T,b,u){var a=u(6367),o=u(9966);function l(r,e){var t=o(r,e);return a(t)?t:void 0}T.exports=l},9217:function(T,b,u){var a=u(1030),o=a(Object.getPrototypeOf,Object);T.exports=o},2533:function(T,b,u){var a=u(1869),o=Object.prototype,l=o.hasOwnProperty,r=o.toString,e=a?a.toStringTag:void 0;function t(s){var h=l.call(s,e),m=s[e];try{s[e]=void 0;var d=!0}catch(x){}var v=r.call(s);return d&&(h?s[e]=m:delete s[e]),v}T.exports=t},8966:function(T,b,u){var a=u(6952),o=u(4134),l=Object.prototype,r=l.propertyIsEnumerable,e=Object.getOwnPropertySymbols,t=e?function(s){return s==null?[]:(s=Object(s),a(e(s),function(h){return r.call(s,h)}))}:o;T.exports=t},6817:function(T,b,u){var a=u(7095),o=u(9217),l=u(8966),r=u(4134),e=Object.getOwnPropertySymbols,t=e?function(s){for(var h=[];s;)a(h,l(s)),s=o(s);return h}:r;T.exports=t},6139:function(T,b,u){var a=u(5584),o=u(164),l=u(7288),r=u(3599),e=u(6873),t=u(6756),s=u(3256),h="[object Map]",m="[object Object]",d="[object Promise]",v="[object Set]",x="[object WeakMap]",N="[object DataView]",F=s(a),ae=s(o),$=s(l),te=s(r),fe=s(e),B=t;(a&&B(new a(new ArrayBuffer(1)))!=N||o&&B(new o)!=h||l&&B(l.resolve())!=d||r&&B(new r)!=v||e&&B(new e)!=x)&&(B=function(he){var z=t(he),ee=z==m?he.constructor:void 0,pe=ee?s(ee):"";if(pe)switch(pe){case F:return N;case ae:return h;case $:return d;case te:return v;case fe:return x}return z}),T.exports=B},9966:function(T){function b(u,a){return u==null?void 0:u[a]}T.exports=b},3100:function(T,b,u){var a=u(1186),o=u(3053),l=u(744),r=u(213),e=u(1156),t=u(9171);function s(h,m,d){m=a(m,h);for(var v=-1,x=m.length,N=!1;++v<x;){var F=t(m[v]);if(!(N=h!=null&&d(h,F)))break;h=h[F]}return N||++v!=x?N:(x=h==null?0:h.length,!!x&&e(x)&&r(F,x)&&(l(h)||o(h)))}T.exports=s},5015:function(T){var b="\\ud800-\\udfff",u="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",l=u+a+o,r="\\ufe0e\\ufe0f",e="\\u200d",t=RegExp("["+e+b+l+r+"]");function s(h){return t.test(h)}T.exports=s},4696:function(T,b,u){var a=u(5294);function o(){this.__data__=a?a(null):{},this.size=0}T.exports=o},6824:function(T){function b(u){var a=this.has(u)&&delete this.__data__[u];return this.size-=a?1:0,a}T.exports=b},3476:function(T,b,u){var a=u(5294),o="__lodash_hash_undefined__",l=Object.prototype,r=l.hasOwnProperty;function e(t){var s=this.__data__;if(a){var h=s[t];return h===o?void 0:h}return r.call(s,t)?s[t]:void 0}T.exports=e},3122:function(T,b,u){var a=u(5294),o=Object.prototype,l=o.hasOwnProperty;function r(e){var t=this.__data__;return a?t[e]!==void 0:l.call(t,e)}T.exports=r},7279:function(T,b,u){var a=u(5294),o="__lodash_hash_undefined__";function l(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=a&&e===void 0?o:e,this}T.exports=l},9264:function(T){var b=Object.prototype,u=b.hasOwnProperty;function a(o){var l=o.length,r=new o.constructor(l);return l&&typeof o[0]=="string"&&u.call(o,"index")&&(r.index=o.index,r.input=o.input),r}T.exports=a},7541:function(T,b,u){var a=u(188),o=u(7984),l=u(8583),r=u(8757),e=u(8358),t="[object Boolean]",s="[object Date]",h="[object Map]",m="[object Number]",d="[object RegExp]",v="[object Set]",x="[object String]",N="[object Symbol]",F="[object ArrayBuffer]",ae="[object DataView]",$="[object Float32Array]",te="[object Float64Array]",fe="[object Int8Array]",B="[object Int16Array]",he="[object Int32Array]",z="[object Uint8Array]",ee="[object Uint8ClampedArray]",pe="[object Uint16Array]",S="[object Uint32Array]";function q(M,I,j){var ue=M.constructor;switch(I){case F:return a(M);case t:case s:return new ue(+M);case ae:return o(M,j);case $:case te:case fe:case B:case he:case z:case ee:case pe:case S:return e(M,j);case h:return new ue;case m:case x:return new ue(M);case d:return l(M);case v:return new ue;case N:return r(M)}}T.exports=q},4084:function(T,b,u){var a=u(5024),o=u(9217),l=u(7975);function r(e){return typeof e.constructor=="function"&&!l(e)?a(o(e)):{}}T.exports=r},8133:function(T,b,u){var a=u(1869),o=u(3053),l=u(744),r=a?a.isConcatSpreadable:void 0;function e(t){return l(t)||o(t)||!!(r&&t&&t[r])}T.exports=e},213:function(T){var b=9007199254740991,u=/^(?:0|[1-9]\d*)$/;function a(o,l){var r=typeof o;return l=l==null?b:l,!!l&&(r=="number"||r!="symbol"&&u.test(o))&&o>-1&&o%1==0&&o<l}T.exports=a},8138:function(T,b,u){var a=u(3607),o=u(4665),l=u(213),r=u(816);function e(t,s,h){if(!r(h))return!1;var m=typeof s;return(m=="number"?o(h)&&l(s,h.length):m=="string"&&s in h)?a(h[s],t):!1}T.exports=e},6773:function(T,b,u){var a=u(744),o=u(5029),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function e(t,s){if(a(t))return!1;var h=typeof t;return h=="number"||h=="symbol"||h=="boolean"||t==null||o(t)?!0:r.test(t)||!l.test(t)||s!=null&&t in Object(s)}T.exports=e},4358:function(T){function b(u){var a=typeof u;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?u!=="__proto__":u===null}T.exports=b},9379:function(T,b,u){var a=u(4218),o=function(){var r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function l(r){return!!o&&o in r}T.exports=l},7975:function(T){var b=Object.prototype;function u(a){var o=a&&a.constructor,l=typeof o=="function"&&o.prototype||b;return a===l}T.exports=u},8411:function(T,b,u){var a=u(816);function o(l){return l===l&&!a(l)}T.exports=o},4251:function(T){function b(){this.__data__=[],this.size=0}T.exports=b},4968:function(T,b,u){var a=u(7971),o=Array.prototype,l=o.splice;function r(e){var t=this.__data__,s=a(t,e);if(s<0)return!1;var h=t.length-1;return s==h?t.pop():l.call(t,s,1),--this.size,!0}T.exports=r},8290:function(T,b,u){var a=u(7971);function o(l){var r=this.__data__,e=a(r,l);return e<0?void 0:r[e][1]}T.exports=o},8068:function(T,b,u){var a=u(7971);function o(l){return a(this.__data__,l)>-1}T.exports=o},4238:function(T,b,u){var a=u(7971);function o(l,r){var e=this.__data__,t=a(e,l);return t<0?(++this.size,e.push([l,r])):e[t][1]=r,this}T.exports=o},5365:function(T,b,u){var a=u(6414),o=u(9746),l=u(164);function r(){this.size=0,this.__data__={hash:new a,map:new(l||o),string:new a}}T.exports=r},3765:function(T,b,u){var a=u(9819);function o(l){var r=a(this,l).delete(l);return this.size-=r?1:0,r}T.exports=o},2608:function(T,b,u){var a=u(9819);function o(l){return a(this,l).get(l)}T.exports=o},203:function(T,b,u){var a=u(9819);function o(l){return a(this,l).has(l)}T.exports=o},1298:function(T,b,u){var a=u(9819);function o(l,r){var e=a(this,l),t=e.size;return e.set(l,r),this.size+=e.size==t?0:1,this}T.exports=o},3383:function(T){function b(u){var a=-1,o=Array(u.size);return u.forEach(function(l,r){o[++a]=[r,l]}),o}T.exports=b},4122:function(T){function b(u,a){return function(o){return o==null?!1:o[u]===a&&(a!==void 0||u in Object(o))}}T.exports=b},6332:function(T,b,u){var a=u(2858),o=500;function l(r){var e=a(r,function(s){return t.size===o&&t.clear(),s}),t=e.cache;return e}T.exports=l},5294:function(T,b,u){var a=u(3893),o=a(Object,"create");T.exports=o},3730:function(T,b,u){var a=u(1030),o=a(Object.keys,Object);T.exports=o},7817:function(T){function b(u){var a=[];if(u!=null)for(var o in Object(u))a.push(o);return a}T.exports=b},2495:function(T,b,u){T=u.nmd(T);var a=u(7675),o=b&&!b.nodeType&&b,l=o&&!0&&T&&!T.nodeType&&T,r=l&&l.exports===o,e=r&&a.process,t=function(){try{var s=l&&l.require&&l.require("util").types;return s||e&&e.binding&&e.binding("util")}catch(h){}}();T.exports=t},4702:function(T){var b=Object.prototype,u=b.toString;function a(o){return u.call(o)}T.exports=a},1030:function(T){function b(u,a){return function(o){return u(a(o))}}T.exports=b},9652:function(T,b,u){var a=u(9628),o=Math.max;function l(r,e,t){return e=o(e===void 0?r.length-1:e,0),function(){for(var s=arguments,h=-1,m=o(s.length-e,0),d=Array(m);++h<m;)d[h]=s[e+h];h=-1;for(var v=Array(e+1);++h<e;)v[h]=s[h];return v[e]=t(d),a(r,this,v)}}T.exports=l},3152:function(T,b,u){var a=u(7675),o=typeof self=="object"&&self&&self.Object===Object&&self,l=a||o||Function("return this")();T.exports=l},7052:function(T){function b(u,a){if(!(a==="constructor"&&typeof u[a]=="function")&&a!="__proto__")return u[a]}T.exports=b},4776:function(T){var b="__lodash_hash_undefined__";function u(a){return this.__data__.set(a,b),this}T.exports=u},393:function(T){function b(u){return this.__data__.has(u)}T.exports=b},9679:function(T){function b(u){var a=-1,o=Array(u.size);return u.forEach(function(l){o[++a]=l}),o}T.exports=b},1152:function(T,b,u){var a=u(3989),o=u(8437),l=o(a);T.exports=l},8437:function(T){var b=800,u=16,a=Date.now;function o(l){var r=0,e=0;return function(){var t=a(),s=u-(t-e);if(e=t,s>0){if(++r>=b)return arguments[0]}else r=0;return l.apply(void 0,arguments)}}T.exports=o},1119:function(T,b,u){var a=u(9746);function o(){this.__data__=new a,this.size=0}T.exports=o},4399:function(T){function b(u){var a=this.__data__,o=a.delete(u);return this.size=a.size,o}T.exports=b},1897:function(T){function b(u){return this.__data__.get(u)}T.exports=b},558:function(T){function b(u){return this.__data__.has(u)}T.exports=b},4841:function(T,b,u){var a=u(9746),o=u(164),l=u(2166),r=200;function e(t,s){var h=this.__data__;if(h instanceof a){var m=h.__data__;if(!o||m.length<r-1)return m.push([t,s]),this.size=++h.size,this;h=this.__data__=new l(m)}return h.set(t,s),this.size=h.size,this}T.exports=e},9237:function(T){function b(u,a,o){for(var l=o-1,r=u.length;++l<r;)if(u[l]===a)return l;return-1}T.exports=b},9405:function(T,b,u){var a=u(6539),o=u(5015),l=u(844);function r(e){return o(e)?l(e):a(e)}T.exports=r},493:function(T,b,u){var a=u(6332),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,r=a(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(o,function(s,h,m,d){t.push(m?d.replace(l,"$1"):h||s)}),t});T.exports=r},9171:function(T,b,u){var a=u(5029),o=1/0;function l(r){if(typeof r=="string"||a(r))return r;var e=r+"";return e=="0"&&1/r==-o?"-0":e}T.exports=l},3256:function(T){var b=Function.prototype,u=b.toString;function a(o){if(o!=null){try{return u.call(o)}catch(l){}try{return o+""}catch(l){}}return""}T.exports=a},5333:function(T){var b=/\s/;function u(a){for(var o=a.length;o--&&b.test(a.charAt(o)););return o}T.exports=u},844:function(T){var b="\\ud800-\\udfff",u="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",o="\\u20d0-\\u20ff",l=u+a+o,r="\\ufe0e\\ufe0f",e="["+b+"]",t="["+l+"]",s="\\ud83c[\\udffb-\\udfff]",h="(?:"+t+"|"+s+")",m="[^"+b+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",N=h+"?",F="["+r+"]?",ae="(?:"+x+"(?:"+[m,d,v].join("|")+")"+F+N+")*",$=F+N+ae,te="(?:"+[m+t+"?",t,d,v,e].join("|")+")",fe=RegExp(s+"(?="+s+")|"+te+$,"g");function B(he){for(var z=fe.lastIndex=0;fe.test(he);)++z;return z}T.exports=B},6833:function(T,b,u){var a=u(9045),o=4;function l(r){return a(r,o)}T.exports=l},250:function(T,b,u){var a=u(9045),o=1,l=4;function r(e){return a(e,o|l)}T.exports=r},3503:function(T){function b(u){return function(){return u}}T.exports=b},8548:function(T,b,u){var a=u(2918),o=u(3607),l=u(8138),r=u(6730),e=Object.prototype,t=e.hasOwnProperty,s=a(function(h,m){h=Object(h);var d=-1,v=m.length,x=v>2?m[2]:void 0;for(x&&l(m[0],m[1],x)&&(v=1);++d<v;)for(var N=m[d],F=r(N),ae=-1,$=F.length;++ae<$;){var te=F[ae],fe=h[te];(fe===void 0||o(fe,e[te])&&!t.call(h,te))&&(h[te]=N[te])}return h});T.exports=s},6934:function(T,b,u){T.exports=u(9204)},3607:function(T){function b(u,a){return u===a||u!==u&&a!==a}T.exports=b},4725:function(T,b,u){var a=u(6952),o=u(2872),l=u(5979),r=u(744);function e(t,s){var h=r(t)?a:o;return h(t,l(s,3))}T.exports=e},9785:function(T,b,u){var a=u(9554),o=u(9991),l=a(o);T.exports=l},9991:function(T,b,u){var a=u(1533),o=u(5979),l=u(2824),r=Math.max;function e(t,s,h){var m=t==null?0:t.length;if(!m)return-1;var d=h==null?0:l(h);return d<0&&(d=r(m+d,0)),a(t,o(s,3),d)}T.exports=e},151:function(T,b,u){var a=u(9256);function o(l){var r=l==null?0:l.length;return r?a(l,1):[]}T.exports=o},9204:function(T,b,u){var a=u(4809),o=u(4107),l=u(1756),r=u(744);function e(t,s){var h=r(t)?a:o;return h(t,l(s))}T.exports=e},3190:function(T,b,u){var a=u(4018),o=u(1756),l=u(6730);function r(e,t){return e==null?e:a(e,o(t),l)}T.exports=r},4231:function(T,b,u){var a=u(9147);function o(l,r,e){var t=l==null?void 0:a(l,r);return t===void 0?e:t}T.exports=o},9946:function(T,b,u){var a=u(3251),o=u(3100);function l(r,e){return r!=null&&o(r,e,a)}T.exports=l},7879:function(T,b,u){var a=u(2348),o=u(3100);function l(r,e){return r!=null&&o(r,e,a)}T.exports=l},6962:function(T){function b(u){return u}T.exports=b},3053:function(T,b,u){var a=u(4977),o=u(3913),l=Object.prototype,r=l.hasOwnProperty,e=l.propertyIsEnumerable,t=a(function(){return arguments}())?a:function(s){return o(s)&&r.call(s,"callee")&&!e.call(s,"callee")};T.exports=t},744:function(T){var b=Array.isArray;T.exports=b},4665:function(T,b,u){var a=u(9363),o=u(1156);function l(r){return r!=null&&o(r.length)&&!a(r)}T.exports=l},1590:function(T,b,u){var a=u(4665),o=u(3913);function l(r){return o(r)&&a(r)}T.exports=l},7835:function(T,b,u){T=u.nmd(T);var a=u(3152),o=u(5950),l=b&&!b.nodeType&&b,r=l&&!0&&T&&!T.nodeType&&T,e=r&&r.exports===l,t=e?a.Buffer:void 0,s=t?t.isBuffer:void 0,h=s||o;T.exports=h},1627:function(T,b,u){var a=u(6019),o=u(6139),l=u(3053),r=u(744),e=u(4665),t=u(7835),s=u(7975),h=u(8397),m="[object Map]",d="[object Set]",v=Object.prototype,x=v.hasOwnProperty;function N(F){if(F==null)return!0;if(e(F)&&(r(F)||typeof F=="string"||typeof F.splice=="function"||t(F)||h(F)||l(F)))return!F.length;var ae=o(F);if(ae==m||ae==d)return!F.size;if(s(F))return!a(F).length;for(var $ in F)if(x.call(F,$))return!1;return!0}T.exports=N},9363:function(T,b,u){var a=u(6756),o=u(816),l="[object AsyncFunction]",r="[object Function]",e="[object GeneratorFunction]",t="[object Proxy]";function s(h){if(!o(h))return!1;var m=a(h);return m==r||m==e||m==l||m==t}T.exports=s},1156:function(T){var b=9007199254740991;function u(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=b}T.exports=u},1626:function(T,b,u){var a=u(5005),o=u(8342),l=u(2495),r=l&&l.isMap,e=r?o(r):a;T.exports=e},816:function(T){function b(u){var a=typeof u;return u!=null&&(a=="object"||a=="function")}T.exports=b},3913:function(T){function b(u){return u!=null&&typeof u=="object"}T.exports=b},9308:function(T,b,u){var a=u(6756),o=u(9217),l=u(3913),r="[object Object]",e=Function.prototype,t=Object.prototype,s=e.toString,h=t.hasOwnProperty,m=s.call(Object);function d(v){if(!l(v)||a(v)!=r)return!1;var x=o(v);if(x===null)return!0;var N=h.call(x,"constructor")&&x.constructor;return typeof N=="function"&&N instanceof N&&s.call(N)==m}T.exports=d},5226:function(T,b,u){var a=u(8652),o=u(8342),l=u(2495),r=l&&l.isSet,e=r?o(r):a;T.exports=e},7941:function(T,b,u){var a=u(6756),o=u(744),l=u(3913),r="[object String]";function e(t){return typeof t=="string"||!o(t)&&l(t)&&a(t)==r}T.exports=e},5029:function(T,b,u){var a=u(6756),o=u(3913),l="[object Symbol]";function r(e){return typeof e=="symbol"||o(e)&&a(e)==l}T.exports=r},8397:function(T,b,u){var a=u(766),o=u(8342),l=u(2495),r=l&&l.isTypedArray,e=r?o(r):a;T.exports=e},6513:function(T){function b(u){return u===void 0}T.exports=b},5451:function(T,b,u){var a=u(3333),o=u(6019),l=u(4665);function r(e){return l(e)?a(e):o(e)}T.exports=r},6730:function(T,b,u){var a=u(3333),o=u(3988),l=u(4665);function r(e){return l(e)?a(e,!0):o(e)}T.exports=r},611:function(T){function b(u){var a=u==null?0:u.length;return a?u[a-1]:void 0}T.exports=b},9392:function(T,b,u){T=u.nmd(T);var a;(function(){var o,l="4.17.21",r=200,e="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",t="Expected a function",s="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",m=500,d="__lodash_placeholder__",v=1,x=2,N=4,F=1,ae=2,$=1,te=2,fe=4,B=8,he=16,z=32,ee=64,pe=128,S=256,q=512,M=30,I="...",j=800,ue=16,se=1,Ee=2,Ce=3,xe=1/0,Oe=9007199254740991,Le=17976931348623157e292,Ge=0/0,He=4294967295,Et=He-1,Ct=He>>>1,Gt=[["ary",pe],["bind",$],["bindKey",te],["curry",B],["curryRight",he],["flip",q],["partial",z],["partialRight",ee],["rearg",S]],At="[object Arguments]",vt="[object Array]",cn="[object AsyncFunction]",hn="[object Boolean]",Bn="[object Date]",Fn="[object DOMException]",ir="[object Error]",Nr="[object Function]",Ei="[object GeneratorFunction]",ci="[object Map]",Ot="[object Number]",fr="[object Null]",Pi="[object Object]",Li="[object Promise]",zn="[object Proxy]",$e="[object RegExp]",Xt="[object Set]",Rt="[object String]",_t="[object Symbol]",Tt="[object Undefined]",at="[object WeakMap]",ce="[object WeakSet]",ut="[object ArrayBuffer]",Ze="[object DataView]",Wt="[object Float32Array]",Ut="[object Float64Array]",jt="[object Int8Array]",xt="[object Int16Array]",$t="[object Int32Array]",Un="[object Uint8Array]",qn="[object Uint8ClampedArray]",rr="[object Uint16Array]",xn="[object Uint32Array]",Or=/\b__p \+= '';/g,Pr=/\b(__p \+=) '' \+/g,cr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ki=/&(?:amp|lt|gt|quot|#39);/g,Vr=/[&<>"']/g,kr=RegExp(ki.source),Ui=RegExp(Vr.source),Wr=/<%-([\s\S]+?)%>/g,no=/<%([\s\S]+?)%>/g,uo=/<%=([\s\S]+?)%>/g,wi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wo=/^\w*$/,fs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zo=/[\\^$.*+?()[\]{}|]/g,hs=RegExp(zo.source),ks=/^\s+/,rs=/\s/,Eo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qo=/\{\n\/\* \[wrapped with (.+)\] \*/,Xs=/,? & /,Ys=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ot=/[()=,{}\[\]\/\s]/,mt=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Z=/\w*$/,Q=/^[-+]0x[0-9a-f]+$/i,le=/^0b[01]+$/i,Xe=/^\[object .+?Constructor\]$/,dt=/^0o[0-7]+$/i,ft=/^(?:0|[1-9]\d*)$/,gt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ln=/($^)/,bn=/['\n\r\u2028\u2029\\]/g,En="\\ud800-\\udfff",Cr="\\u0300-\\u036f",tr="\\ufe20-\\ufe2f",ii="\\u20d0-\\u20ff",Zi=Cr+tr+ii,Mn="\\u2700-\\u27bf",Xn="a-z\\xdf-\\xf6\\xf8-\\xff",$r="\\xac\\xb1\\xd7\\xf7",Re="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ne="\\u2000-\\u206f",Te=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",U="A-Z\\xc0-\\xd6\\xd8-\\xde",Y="\\ufe0e\\ufe0f",ge=$r+Re+Ne+Te,Ye="['\u2019]",ct="["+En+"]",nt="["+ge+"]",lt="["+Zi+"]",fn="\\d+",on="["+Mn+"]",Gn="["+Xn+"]",er="[^"+En+ge+fn+Mn+Xn+U+"]",Kn="\\ud83c[\\udffb-\\udfff]",qr="(?:"+lt+"|"+Kn+")",xi="[^"+En+"]",Pn="(?:\\ud83c[\\udde6-\\uddff]){2}",$n="[\\ud800-\\udbff][\\udc00-\\udfff]",Rr="["+U+"]",Di="\\u200d",Jr="(?:"+Gn+"|"+er+")",$o="(?:"+Rr+"|"+er+")",Vo="(?:"+Ye+"(?:d|ll|m|re|s|t|ve))?",lo="(?:"+Ye+"(?:D|LL|M|RE|S|T|VE))?",Xi=qr+"?",Ho="["+Y+"]?",cs="(?:"+Di+"(?:"+[xi,Pn,$n].join("|")+")"+Ho+Xi+")*",li="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ae=Ho+Xi+cs,Ke="(?:"+[on,Pn,$n].join("|")+")"+Ae,pt="(?:"+[xi+lt+"?",lt,Pn,$n,ct].join("|")+")",Ht=RegExp(Ye,"g"),an=RegExp(lt,"g"),Ln=RegExp(Kn+"(?="+Kn+")|"+pt+Ae,"g"),wr=RegExp([Rr+"?"+Gn+"+"+Vo+"(?="+[nt,Rr,"$"].join("|")+")",$o+"+"+lo+"(?="+[nt,Rr+Jr,"$"].join("|")+")",Rr+"?"+Jr+"+"+Vo,Rr+"+"+lo,xs,li,fn,Ke].join("|"),"g"),yr=RegExp("["+Di+En+Zi+Y+"]"),ei=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ii=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],to=-1,Ji={};Ji[Wt]=Ji[Ut]=Ji[jt]=Ji[xt]=Ji[$t]=Ji[Un]=Ji[qn]=Ji[rr]=Ji[xn]=!0,Ji[At]=Ji[vt]=Ji[ut]=Ji[hn]=Ji[Ze]=Ji[Bn]=Ji[ir]=Ji[Nr]=Ji[ci]=Ji[Ot]=Ji[Pi]=Ji[$e]=Ji[Xt]=Ji[Rt]=Ji[at]=!1;var Yi={};Yi[At]=Yi[vt]=Yi[ut]=Yi[Ze]=Yi[hn]=Yi[Bn]=Yi[Wt]=Yi[Ut]=Yi[jt]=Yi[xt]=Yi[$t]=Yi[ci]=Yi[Ot]=Yi[Pi]=Yi[$e]=Yi[Xt]=Yi[Rt]=Yi[_t]=Yi[Un]=Yi[qn]=Yi[rr]=Yi[xn]=!0,Yi[ir]=Yi[Nr]=Yi[at]=!1;var Uo={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Oi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Co={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Fs={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ss=parseFloat,qo=parseInt,js=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g,Zs=typeof self=="object"&&self&&self.Object===Object&&self,Mo=js||Zs||Function("return this")(),la=b&&!b.nodeType&&b,X=la&&!0&&T&&!T.nodeType&&T,ve=X&&X.exports===la,Ie=ve&&js.process,ke=function(){try{var Dt=X&&X.require&&X.require("util").types;return Dt||Ie&&Ie.binding&&Ie.binding("util")}catch(en){}}(),st=ke&&ke.isArrayBuffer,P=ke&&ke.isDate,W=ke&&ke.isMap,ye=ke&&ke.isRegExp,Se=ke&&ke.isSet,Be=ke&&ke.isTypedArray;function Fe(Dt,en,un){switch(un.length){case 0:return Dt.call(en);case 1:return Dt.call(en,un[0]);case 2:return Dt.call(en,un[0],un[1]);case 3:return Dt.call(en,un[0],un[1],un[2])}return Dt.apply(en,un)}function qe(Dt,en,un,Jn){for(var Tr=-1,Sr=Dt==null?0:Dt.length;++Tr<Sr;){var Wi=Dt[Tr];en(Jn,Wi,un(Wi),Dt)}return Jn}function Mt(Dt,en){for(var un=-1,Jn=Dt==null?0:Dt.length;++un<Jn&&en(Dt[un],un,Dt)!==!1;);return Dt}function Lt(Dt,en){for(var un=Dt==null?0:Dt.length;un--&&en(Dt[un],un,Dt)!==!1;);return Dt}function vn(Dt,en){for(var un=-1,Jn=Dt==null?0:Dt.length;++un<Jn;)if(!en(Dt[un],un,Dt))return!1;return!0}function Zn(Dt,en){for(var un=-1,Jn=Dt==null?0:Dt.length,Tr=0,Sr=[];++un<Jn;){var Wi=Dt[un];en(Wi,un,Dt)&&(Sr[Tr++]=Wi)}return Sr}function Qn(Dt,en){var un=Dt==null?0:Dt.length;return!!un&&ko(Dt,en,0)>-1}function jn(Dt,en,un){for(var Jn=-1,Tr=Dt==null?0:Dt.length;++Jn<Tr;)if(un(en,Dt[Jn]))return!0;return!1}function pr(Dt,en){for(var un=-1,Jn=Dt==null?0:Dt.length,Tr=Array(Jn);++un<Jn;)Tr[un]=en(Dt[un],un,Dt);return Tr}function vi(Dt,en){for(var un=-1,Jn=en.length,Tr=Dt.length;++un<Jn;)Dt[Tr+un]=en[un];return Dt}function co(Dt,en,un,Jn){var Tr=-1,Sr=Dt==null?0:Dt.length;for(Jn&&Sr&&(un=Dt[++Tr]);++Tr<Sr;)un=en(un,Dt[Tr],Tr,Dt);return un}function di(Dt,en,un,Jn){var Tr=Dt==null?0:Dt.length;for(Jn&&Tr&&(un=Dt[--Tr]);Tr--;)un=en(un,Dt[Tr],Tr,Dt);return un}function Zo(Dt,en){for(var un=-1,Jn=Dt==null?0:Dt.length;++un<Jn;)if(en(Dt[un],un,Dt))return!0;return!1}var qi=_s("length");function is(Dt){return Dt.split("")}function Js(Dt){return Dt.match(Ys)||[]}function Yo(Dt,en,un){var Jn;return un(Dt,function(Tr,Sr,Wi){if(en(Tr,Sr,Wi))return Jn=Sr,!1}),Jn}function Ss(Dt,en,un,Jn){for(var Tr=Dt.length,Sr=un+(Jn?1:-1);Jn?Sr--:++Sr<Tr;)if(en(Dt[Sr],Sr,Dt))return Sr;return-1}function ko(Dt,en,un){return en===en?Lu(Dt,en,un):Ss(Dt,xa,un)}function vs(Dt,en,un,Jn){for(var Tr=un-1,Sr=Dt.length;++Tr<Sr;)if(Jn(Dt[Tr],en))return Tr;return-1}function xa(Dt){return Dt!==Dt}function ua(Dt,en){var un=Dt==null?0:Dt.length;return un?La(Dt,en)/un:Ge}function _s(Dt){return function(en){return en==null?o:en[Dt]}}function Pa(Dt){return function(en){return Dt==null?o:Dt[en]}}function Us(Dt,en,un,Jn,Tr){return Tr(Dt,function(Sr,Wi,Fi){un=Jn?(Jn=!1,Sr):en(un,Sr,Wi,Fi)}),un}function ta(Dt,en){var un=Dt.length;for(Dt.sort(en);un--;)Dt[un]=Dt[un].value;return Dt}function La(Dt,en){for(var un,Jn=-1,Tr=Dt.length;++Jn<Tr;){var Sr=en(Dt[Jn]);Sr!==o&&(un=un===o?Sr:un+Sr)}return un}function qs(Dt,en){for(var un=-1,Jn=Array(Dt);++un<Dt;)Jn[un]=en(un);return Jn}function mu(Dt,en){return pr(en,function(un){return[un,Dt[un]]})}function eo(Dt){return Dt&&Dt.slice(0,In(Dt)+1).replace(ks,"")}function ds(Dt){return function(en){return Dt(en)}}function Vs(Dt,en){return pr(en,function(un){return Dt[un]})}function oa(Dt,en){return Dt.has(en)}function Oa(Dt,en){for(var un=-1,Jn=Dt.length;++un<Jn&&ko(en,Dt[un],0)>-1;);return un}function ls(Dt,en){for(var un=Dt.length;un--&&ko(en,Dt[un],0)>-1;);return un}function Ha(Dt,en){for(var un=Dt.length,Jn=0;un--;)Dt[un]===en&&++Jn;return Jn}var sa=Pa(Uo),Xa=Pa(Oi);function ma(Dt){return"\\"+Fs[Dt]}function uc(Dt,en){return Dt==null?o:Dt[en]}function qa(Dt){return yr.test(Dt)}function Sa(Dt){return ei.test(Dt)}function cc(Dt){for(var en,un=[];!(en=Dt.next()).done;)un.push(en.value);return un}function eu(Dt){var en=-1,un=Array(Dt.size);return Dt.forEach(function(Jn,Tr){un[++en]=[Tr,Jn]}),un}function lc(Dt,en){return function(un){return Dt(en(un))}}function Aa(Dt,en){for(var un=-1,Jn=Dt.length,Tr=0,Sr=[];++un<Jn;){var Wi=Dt[un];(Wi===en||Wi===d)&&(Dt[un]=d,Sr[Tr++]=un)}return Sr}function Vu(Dt){var en=-1,un=Array(Dt.size);return Dt.forEach(function(Jn){un[++en]=Jn}),un}function Wu(Dt){var en=-1,un=Array(Dt.size);return Dt.forEach(function(Jn){un[++en]=[Jn,Jn]}),un}function Lu(Dt,en,un){for(var Jn=un-1,Tr=Dt.length;++Jn<Tr;)if(Dt[Jn]===en)return Jn;return-1}function Ku(Dt,en,un){for(var Jn=un+1;Jn--;)if(Dt[Jn]===en)return Jn;return Jn}function du(Dt){return qa(Dt)?Mr(Dt):qi(Dt)}function qt(Dt){return qa(Dt)?Yr(Dt):is(Dt)}function In(Dt){for(var en=Dt.length;en--&&rs.test(Dt.charAt(en)););return en}var br=Pa(Co);function Mr(Dt){for(var en=Ln.lastIndex=0;Ln.test(Dt);)++en;return en}function Yr(Dt){return Dt.match(Ln)||[]}function Bt(Dt){return Dt.match(wr)||[]}var nn=function Dt(en){en=en==null?Mo:Dn.defaults(Mo.Object(),en,Dn.pick(Mo,Ii));var un=en.Array,Jn=en.Date,Tr=en.Error,Sr=en.Function,Wi=en.Math,Fi=en.Object,ro=en.RegExp,_o=en.String,$i=en.TypeError,Ds=un.prototype,Ws=Sr.prototype,ya=Fi.prototype,au=en["__core-js_shared__"],yu=Ws.toString,Rs=ya.hasOwnProperty,uu=0,Bc=function(){var C=/[^.]+$/.exec(au&&au.keys&&au.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),Ua=ya.toString,ef=yu.call(Fi),nh=Mo._,kc=ro("^"+yu.call(Rs).replace(zo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jc=ve?en.Buffer:o,Ju=en.Symbol,Rl=en.Uint8Array,tf=Jc?Jc.allocUnsafe:o,fc=lc(Fi.getPrototypeOf,Fi),Gc=Fi.create,os=ya.propertyIsEnumerable,Qu=Ds.splice,rh=Ju?Ju.isConcatSpreadable:o,Fc=Ju?Ju.iterator:o,Qc=Ju?Ju.toStringTag:o,Mf=function(){try{var C=vr(Fi,"defineProperty");return C({},"",{}),C}catch(R){}}(),Pf=en.clearTimeout!==Mo.clearTimeout&&en.clearTimeout,Ph=Jn&&Jn.now!==Mo.Date.now&&Jn.now,xc=en.setTimeout!==Mo.setTimeout&&en.setTimeout,Tu=Wi.ceil,nf=Wi.floor,rf=Fi.getOwnPropertySymbols,qc=Jc?Jc.isBuffer:o,ih=en.isFinite,Sc=Ds.join,Ah=lc(Fi.keys,Fi),Ba=Wi.max,bu=Wi.min,Af=Jn.now,qu=en.parseInt,fl=Wi.random,_f=Ds.reverse,ec=vr(en,"DataView"),Cc=vr(en,"Map"),hc=vr(en,"Promise"),Oc=vr(en,"Set"),Ll=vr(en,"WeakMap"),el=vr(Fi,"create"),of=Ll&&new Ll,$u={},sf=Gu(ec),nd=Gu(Cc),Tc=Gu(hc),rd=Gu(Oc),oh=Gu(Ll),tl=Ju?Ju.prototype:o,dc=tl?tl.valueOf:o,Df=tl?tl.toString:o;function It(C){if(su(C)&&!Ns(C)&&!(C instanceof Go)){if(C instanceof wu)return C;if(Rs.call(C,"__wrapped__"))return xr(C)}return new wu(C)}var Hu=function(){function C(){}return function(R){if(!ja(R))return{};if(Gc)return Gc(R);C.prototype=R;var be=new C;return C.prototype=o,be}}();function af(){}function wu(C,R){this.__wrapped__=C,this.__actions__=[],this.__chain__=!!R,this.__index__=0,this.__values__=o}It.templateSettings={escape:Wr,evaluate:no,interpolate:uo,variable:"",imports:{_:It}},It.prototype=af.prototype,It.prototype.constructor=It,wu.prototype=Hu(af.prototype),wu.prototype.constructor=wu;function Go(C){this.__wrapped__=C,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=He,this.__views__=[]}function nl(){var C=new Go(this.__wrapped__);return C.__actions__=Ma(this.__actions__),C.__dir__=this.__dir__,C.__filtered__=this.__filtered__,C.__iteratees__=Ma(this.__iteratees__),C.__takeCount__=this.__takeCount__,C.__views__=Ma(this.__views__),C}function ba(){if(this.__filtered__){var C=new Go(this);C.__dir__=-1,C.__filtered__=!0}else C=this.clone(),C.__dir__*=-1;return C}function _h(){var C=this.__wrapped__.value(),R=this.__dir__,be=Ns(C),Ve=R<0,St=be?C.length:0,Zt=mi(0,St,this.__views__),Sn=Zt.start,kn=Zt.end,ur=kn-Sn,ni=Ve?kn:Sn-1,ui=this.__iteratees__,Ni=ui.length,go=0,Io=bu(ur,this.__takeCount__);if(!be||!Ve&&St==ur&&Io==ur)return pf(C,this.__actions__);var Jo=[];e:for(;ur--&&go<Io;){ni+=R;for(var ys=-1,Wo=C[ni];++ys<Ni;){var Es=ui[ys],Is=Es.iteratee,zu=Es.type,Iu=Is(Wo);if(zu==Ee)Wo=Iu;else if(!Iu){if(zu==se)continue e;break e}}Jo[go++]=Wo}return Jo}Go.prototype=Hu(af.prototype),Go.prototype.constructor=Go;function gc(C){var R=-1,be=C==null?0:C.length;for(this.clear();++R<be;){var Ve=C[R];this.set(Ve[0],Ve[1])}}function hl(){this.__data__=el?el(null):{},this.size=0}function ho(C){var R=this.has(C)&&delete this.__data__[C];return this.size-=R?1:0,R}function So(C){var R=this.__data__;if(el){var be=R[C];return be===h?o:be}return Rs.call(R,C)?R[C]:o}function No(C){var R=this.__data__;return el?R[C]!==o:Rs.call(R,C)}function Bo(C,R){var be=this.__data__;return this.size+=this.has(C)?0:1,be[C]=el&&R===o?h:R,this}gc.prototype.clear=hl,gc.prototype.delete=ho,gc.prototype.get=So,gc.prototype.has=No,gc.prototype.set=Bo;function jc(C){var R=-1,be=C==null?0:C.length;for(this.clear();++R<be;){var Ve=C[R];this.set(Ve[0],Ve[1])}}function Dh(){this.__data__=[],this.size=0}function oo(C){var R=this.__data__,be=vl(R,C);if(be<0)return!1;var Ve=R.length-1;return be==Ve?R.pop():Qu.call(R,be,1),--this.size,!0}function Os(C){var R=this.__data__,be=vl(R,C);return be<0?o:R[be][1]}function Nh(C){return vl(this.__data__,C)>-1}function id(C,R){var be=this.__data__,Ve=vl(be,C);return Ve<0?(++this.size,be.push([C,R])):be[Ve][1]=R,this}jc.prototype.clear=Dh,jc.prototype.delete=oo,jc.prototype.get=Os,jc.prototype.has=Nh,jc.prototype.set=id;function tu(C){var R=-1,be=C==null?0:C.length;for(this.clear();++R<be;){var Ve=C[R];this.set(Ve[0],Ve[1])}}function _u(){this.size=0,this.__data__={hash:new gc,map:new(Cc||jc),string:new gc}}function dl(C){var R=Ci(this,C).delete(C);return this.size-=R?1:0,R}function uf(C){return Ci(this,C).get(C)}function Si(C){return Ci(this,C).has(C)}function Kr(C,R){var be=Ci(this,C),Ve=be.size;return be.set(C,R),this.size+=be.size==Ve?0:1,this}tu.prototype.clear=_u,tu.prototype.delete=dl,tu.prototype.get=uf,tu.prototype.has=Si,tu.prototype.set=Kr;function rl(C){var R=-1,be=C==null?0:C.length;for(this.__data__=new tu;++R<be;)this.add(C[R])}function od(C){return this.__data__.set(C,h),this}function sd(C){return this.__data__.has(C)}rl.prototype.add=rl.prototype.push=od,rl.prototype.has=sd;function aa(C){var R=this.__data__=new jc(C);this.size=R.size}function fa(){this.__data__=new jc,this.size=0}function zs(C){var R=this.__data__,be=R.delete(C);return this.size=R.size,be}function Mc(C){return this.__data__.get(C)}function gl(C){return this.__data__.has(C)}function Mu(C,R){var be=this.__data__;if(be instanceof jc){var Ve=be.__data__;if(!Cc||Ve.length<r-1)return Ve.push([C,R]),this.size=++be.size,this;be=this.__data__=new tu(Ve)}return be.set(C,R),this.size=be.size,this}aa.prototype.clear=fa,aa.prototype.delete=zs,aa.prototype.get=Mc,aa.prototype.has=gl,aa.prototype.set=Mu;function Nf(C,R){var be=Ns(C),Ve=!be&&Jf(C),St=!be&&!Ve&&Ic(C),Zt=!be&&!Ve&&!St&&bh(C),Sn=be||Ve||St||Zt,kn=Sn?qs(C.length,_o):[],ur=kn.length;for(var ni in C)(R||Rs.call(C,ni))&&!(Sn&&(ni=="length"||St&&(ni=="offset"||ni=="parent")||Zt&&(ni=="buffer"||ni=="byteLength"||ni=="byteOffset")||Gr(ni,ur)))&&kn.push(ni);return kn}function Ta(C){var R=C.length;return R?C[jl(0,R-1)]:o}function If(C,R){return ns(Ma(C),_r(R,0,C.length))}function Pc(C){return ns(Ma(C))}function pl(C,R,be){(be!==o&&!al(C[R],be)||be===o&&!(R in C))&&tc(C,R,be)}function Xu(C,R,be){var Ve=C[R];(!(Rs.call(C,R)&&al(Ve,be))||be===o&&!(R in C))&&tc(C,R,be)}function vl(C,R){for(var be=C.length;be--;)if(al(C[be][0],R))return be;return-1}function ha(C,R,be,Ve){return vc(C,function(St,Zt,Sn){R(Ve,St,be(St),Sn)}),Ve}function Eu(C,R){return C&&yc(R,Fu(R),C)}function cf(C,R){return C&&yc(R,Rc(R),C)}function tc(C,R,be){R=="__proto__"&&Mf?Mf(C,R,{configurable:!0,enumerable:!0,value:be,writable:!0}):C[R]=be}function pc(C,R){for(var be=-1,Ve=R.length,St=un(Ve),Zt=C==null;++be<Ve;)St[be]=Zt?o:Pp(C,R[be]);return St}function _r(C,R,be){return C===C&&(be!==o&&(C=C<=be?C:be),R!==o&&(C=C>=R?C:R)),C}function Ts(C,R,be,Ve,St,Zt){var Sn,kn=R&v,ur=R&x,ni=R&N;if(be&&(Sn=St?be(C,Ve,St,Zt):be(C)),Sn!==o)return Sn;if(!ja(C))return C;var ui=Ns(C);if(ui){if(Sn=Ri(C),!kn)return Ma(C,Sn)}else{var Ni=_i(C),go=Ni==Nr||Ni==Ei;if(Ic(C))return Vn(C,kn);if(Ni==Pi||Ni==At||go&&!St){if(Sn=ur||go?{}:Oo(C),!kn)return ur?ch(C,cf(Sn,C)):Wf(C,Eu(Sn,C))}else{if(!Yi[Ni])return St?C:{};Sn=Po(C,Ni,kn)}}Zt||(Zt=new aa);var Io=Zt.get(C);if(Io)return Io;Zt.set(C,Sn),tg(C)?C.forEach(function(Wo){Sn.add(Ts(Wo,R,be,Wo,C,Zt))}):Ed(C)&&C.forEach(function(Wo,Es){Sn.set(Es,Ts(Wo,R,be,Es,C,Zt))});var Jo=ni?ur?Ai:fi:ur?Rc:Fu,ys=ui?o:Jo(C);return Mt(ys||C,function(Wo,Es){ys&&(Es=Wo,Wo=C[Es]),Xu(Sn,Es,Ts(Wo,R,be,Es,C,Zt))}),Sn}function Ya(C){var R=Fu(C);return function(be){return nc(be,C,R)}}function nc(C,R,be){var Ve=be.length;if(C==null)return!Ve;for(C=Fi(C);Ve--;){var St=be[Ve],Zt=R[St],Sn=C[St];if(Sn===o&&!(St in C)||!Zt(Sn))return!1}return!0}function Rf(C,R,be){if(typeof C!="function")throw new $i(t);return ts(function(){C.apply(o,be)},R)}function Bu(C,R,be,Ve){var St=-1,Zt=Qn,Sn=!0,kn=C.length,ur=[],ni=R.length;if(!kn)return ur;be&&(R=pr(R,ds(be))),Ve?(Zt=jn,Sn=!1):R.length>=r&&(Zt=oa,Sn=!1,R=new rl(R));e:for(;++St<kn;){var ui=C[St],Ni=be==null?ui:be(ui);if(ui=Ve||ui!==0?ui:0,Sn&&Ni===Ni){for(var go=ni;go--;)if(R[go]===Ni)continue e;ur.push(ui)}else Zt(R,Ni,Ve)||ur.push(ui)}return ur}var vc=Wc(mc),Yu=Wc(il,!0);function Bl(C,R){var be=!0;return vc(C,function(Ve,St,Zt){return be=!!R(Ve,St,Zt),be}),be}function ka(C,R,be){for(var Ve=-1,St=C.length;++Ve<St;){var Zt=C[Ve],Sn=R(Zt);if(Sn!=null&&(kn===o?Sn===Sn&&!bc(Sn):be(Sn,kn)))var kn=Sn,ur=Zt}return ur}function lf(C,R,be,Ve){var St=C.length;for(be=Ls(be),be<0&&(be=-be>St?0:St+be),Ve=Ve===o||Ve>St?St:Ls(Ve),Ve<0&&(Ve+=St),Ve=be>Ve?0:wh(Ve);be<Ve;)C[be++]=R;return C}function kl(C,R){var be=[];return vc(C,function(Ve,St,Zt){R(Ve,St,Zt)&&be.push(Ve)}),be}function Ga(C,R,be,Ve,St){var Zt=-1,Sn=C.length;for(be||(be=pi),St||(St=[]);++Zt<Sn;){var kn=C[Zt];R>0&&be(kn)?R>1?Ga(kn,R-1,be,Ve,St):vi(St,kn):Ve||(St[St.length]=kn)}return St}var Gl=Fa(),Lf=Fa(!0);function mc(C,R){return C&&Gl(C,R,Fu)}function il(C,R){return C&&Lf(C,R,Fu)}function Fl(C,R){return Zn(R,function(be){return Cl(C[be])})}function Ac(C,R){R=_c(R,C);for(var be=0,Ve=R.length;C!=null&&be<Ve;)C=C[ra(R[be++])];return be&&be==Ve?C:o}function Bf(C,R,be){var Ve=R(C);return Ns(C)?Ve:vi(Ve,be(C))}function na(C){return C==null?C===o?Tt:fr:Qc&&Qc in Fi(C)?gi(C):ru(C)}function ol(C,R){return C>R}function sh(C,R){return C!=null&&Rs.call(C,R)}function zc(C,R){return C!=null&&R in Fi(C)}function H(C,R,be){return C>=bu(R,be)&&C<Ba(R,be)}function n(C,R,be){for(var Ve=be?jn:Qn,St=C[0].length,Zt=C.length,Sn=Zt,kn=un(Zt),ur=1/0,ni=[];Sn--;){var ui=C[Sn];Sn&&R&&(ui=pr(ui,ds(R))),ur=bu(ui.length,ur),kn[Sn]=!be&&(R||St>=120&&ui.length>=120)?new rl(Sn&&ui):o}ui=C[0];var Ni=-1,go=kn[0];e:for(;++Ni<St&&ni.length<ur;){var Io=ui[Ni],Jo=R?R(Io):Io;if(Io=be||Io!==0?Io:0,!(go?oa(go,Jo):Ve(ni,Jo,be))){for(Sn=Zt;--Sn;){var ys=kn[Sn];if(!(ys?oa(ys,Jo):Ve(C[Sn],Jo,be)))continue e}go&&go.push(Jo),ni.push(Io)}}return ni}function f(C,R,be,Ve){return mc(C,function(St,Zt,Sn){R(Ve,be(St),Zt,Sn)}),Ve}function p(C,R,be){R=_c(R,C),C=Ja(C,R);var Ve=C==null?C:C[ra(fo(R))];return Ve==null?o:Fe(Ve,C,be)}function w(C){return su(C)&&na(C)==At}function k(C){return su(C)&&na(C)==ut}function ne(C){return su(C)&&na(C)==Bn}function me(C,R,be,Ve,St){return C===R?!0:C==null||R==null||!su(C)&&!su(R)?C!==C&&R!==R:De(C,R,be,Ve,me,St)}function De(C,R,be,Ve,St,Zt){var Sn=Ns(C),kn=Ns(R),ur=Sn?vt:_i(C),ni=kn?vt:_i(R);ur=ur==At?Pi:ur,ni=ni==At?Pi:ni;var ui=ur==Pi,Ni=ni==Pi,go=ur==ni;if(go&&Ic(C)){if(!Ic(R))return!1;Sn=!0,ui=!1}if(go&&!ui)return Zt||(Zt=new aa),Sn||bh(C)?jr(C,R,be,Ve,St,Zt):gr(C,R,ur,be,Ve,St,Zt);if(!(be&F)){var Io=ui&&Rs.call(C,"__wrapped__"),Jo=Ni&&Rs.call(R,"__wrapped__");if(Io||Jo){var ys=Io?C.value():C,Wo=Jo?R.value():R;return Zt||(Zt=new aa),St(ys,Wo,be,Ve,Zt)}}return go?(Zt||(Zt=new aa),Ar(C,R,be,Ve,St,Zt)):!1}function ze(C){return su(C)&&_i(C)==ci}function it(C,R,be,Ve){var St=be.length,Zt=St,Sn=!Ve;if(C==null)return!Zt;for(C=Fi(C);St--;){var kn=be[St];if(Sn&&kn[2]?kn[1]!==C[kn[0]]:!(kn[0]in C))return!1}for(;++St<Zt;){kn=be[St];var ur=kn[0],ni=C[ur],ui=kn[1];if(Sn&&kn[2]){if(ni===o&&!(ur in C))return!1}else{var Ni=new aa;if(Ve)var go=Ve(ni,ui,ur,C,R,Ni);if(!(go===o?me(ui,ni,F|ae,Ve,Ni):go))return!1}}return!0}function Pt(C){if(!ja(C)||es(C))return!1;var R=Cl(C)?kc:Xe;return R.test(Gu(C))}function ht(C){return su(C)&&na(C)==$e}function Ft(C){return su(C)&&_i(C)==Xt}function tn(C){return su(C)&&jh(C.length)&&!!Ji[na(C)]}function On(C){return typeof C=="function"?C:C==null?ju:typeof C=="object"?Ns(C)?yn(C[0],C[1]):ri(C):Yp(C)}function Rn(C){if(!gs(C))return Ah(C);var R=[];for(var be in Fi(C))Rs.call(C,be)&&be!="constructor"&&R.push(be);return R}function nr(C){if(!ja(C))return wa(C);var R=gs(C),be=[];for(var Ve in C)Ve=="constructor"&&(R||!Rs.call(C,Ve))||be.push(Ve);return be}function or(C,R){return C<R}function Dr(C,R){var be=-1,Ve=Nc(C)?un(C.length):[];return vc(C,function(St,Zt,Sn){Ve[++be]=R(St,Zt,Sn)}),Ve}function ri(C){var R=Wn(C);return R.length==1&&R[0][2]?cu(R[0][0],R[0][1]):function(be){return be===C||it(be,C,R)}}function yn(C,R){return ms(C)&&Ca(R)?cu(ra(C),R):function(be){var Ve=Pp(be,C);return Ve===o&&Ve===R?Ap(be,C):me(R,Ve,F|ae)}}function ao(C,R,be,Ve,St){C!==R&&Gl(R,function(Zt,Sn){if(St||(St=new aa),ja(Zt))Ks(C,R,Sn,be,ao,Ve,St);else{var kn=Ve?Ve(xu(C,Sn),Zt,Sn+"",C,R,St):o;kn===o&&(kn=Zt),pl(C,Sn,kn)}},Rc)}function Ks(C,R,be,Ve,St,Zt,Sn){var kn=xu(C,be),ur=xu(R,be),ni=Sn.get(ur);if(ni){pl(C,be,ni);return}var ui=Zt?Zt(kn,ur,be+"",C,R,Sn):o,Ni=ui===o;if(Ni){var go=Ns(ur),Io=!go&&Ic(ur),Jo=!go&&!Io&&bh(ur);ui=ur,go||Io||Jo?Ns(kn)?ui=kn:Cu(kn)?ui=Ma(kn):Io?(Ni=!1,ui=Vn(ur,!0)):Jo?(Ni=!1,ui=vf(ur,!0)):ui=[]:yh(ur)||Jf(ur)?(ui=kn,Jf(kn)?ui=Op(kn):(!ja(kn)||Cl(kn))&&(ui=Oo(ur))):Ni=!1}Ni&&(Sn.set(ur,ui),St(ui,ur,Ve,Zt,Sn),Sn.delete(ur)),pl(C,be,ui)}function Qs(C,R){var be=C.length;if(be)return R+=R<0?be:0,Gr(R,be)?C[R]:o}function Za(C,R,be){R.length?R=pr(R,function(Zt){return Ns(Zt)?function(Sn){return Ac(Sn,Zt.length===1?Zt[0]:Zt)}:Zt}):R=[ju];var Ve=-1;R=pr(R,ds(hr()));var St=Dr(C,function(Zt,Sn,kn){var ur=pr(R,function(ni){return ni(Zt)});return{criteria:ur,index:++Ve,value:Zt}});return ta(St,function(Zt,Sn){return Dc(Zt,Sn,be)})}function _a(C,R){return da(C,R,function(be,Ve){return Ap(C,Ve)})}function da(C,R,be){for(var Ve=-1,St=R.length,Zt={};++Ve<St;){var Sn=R[Ve],kn=Ac(C,Sn);be(kn,Sn)&&Pu(Zt,_c(Sn,C),kn)}return Zt}function Ka(C){return function(R){return Ac(R,C)}}function sl(C,R,be,Ve){var St=Ve?vs:ko,Zt=-1,Sn=R.length,kn=C;for(C===R&&(R=Ma(R)),be&&(kn=pr(C,ds(be)));++Zt<Sn;)for(var ur=0,ni=R[Zt],ui=be?be(ni):ni;(ur=St(kn,ui,ur,Ve))>-1;)kn!==C&&Qu.call(kn,ur,1),Qu.call(C,ur,1);return C}function ff(C,R){for(var be=C?R.length:0,Ve=be-1;be--;){var St=R[be];if(be==Ve||St!==Zt){var Zt=St;Gr(St)?Qu.call(C,St,1):Vl(C,St)}}return C}function jl(C,R){return C+nf(fl()*(R-C+1))}function ml(C,R,be,Ve){for(var St=-1,Zt=Ba(Tu((R-C)/(be||1)),0),Sn=un(Zt);Zt--;)Sn[Ve?Zt:++St]=C,C+=be;return Sn}function ah(C,R){var be="";if(!C||R<1||R>Oe)return be;do R%2&&(be+=C),R=nf(R/2),R&&(C+=C);while(R);return be}function Ms(C,R){return lu(iu(C,R,ju),C+"")}function hf(C){return Ta(qf(C))}function Uc(C,R){var be=qf(C);return ns(be,_r(R,0,be.length))}function Pu(C,R,be,Ve){if(!ja(C))return C;R=_c(R,C);for(var St=-1,Zt=R.length,Sn=Zt-1,kn=C;kn!=null&&++St<Zt;){var ur=ra(R[St]),ni=be;if(ur==="__proto__"||ur==="constructor"||ur==="prototype")return C;if(St!=Sn){var ui=kn[ur];ni=Ve?Ve(ui,ur,kn):o,ni===o&&(ni=ja(ui)?ui:Gr(R[St+1])?[]:{})}Xu(kn,ur,ni),kn=kn[ur]}return C}var zl=of?function(C,R){return of.set(C,R),C}:ju,df=Mf?function(C,R){return Mf(C,"toString",{configurable:!0,enumerable:!1,value:lg(R),writable:!0})}:ju;function Ul(C){return ns(qf(C))}function Du(C,R,be){var Ve=-1,St=C.length;R<0&&(R=-R>St?0:St+R),be=be>St?St:be,be<0&&(be+=St),St=R>be?0:be-R>>>0,R>>>=0;for(var Zt=un(St);++Ve<St;)Zt[Ve]=C[Ve+R];return Zt}function gf(C,R){var be;return vc(C,function(Ve,St,Zt){return be=R(Ve,St,Zt),!be}),!!be}function yl(C,R,be){var Ve=0,St=C==null?Ve:C.length;if(typeof R=="number"&&R===R&&St<=Ct){for(;Ve<St;){var Zt=Ve+St>>>1,Sn=C[Zt];Sn!==null&&!bc(Sn)&&(be?Sn<=R:Sn<R)?Ve=Zt+1:St=Zt}return St}return kf(C,R,ju,be)}function kf(C,R,be,Ve){var St=0,Zt=C==null?0:C.length;if(Zt===0)return 0;R=be(R);for(var Sn=R!==R,kn=R===null,ur=bc(R),ni=R===o;St<Zt;){var ui=nf((St+Zt)/2),Ni=be(C[ui]),go=Ni!==o,Io=Ni===null,Jo=Ni===Ni,ys=bc(Ni);if(Sn)var Wo=Ve||Jo;else ni?Wo=Jo&&(Ve||go):kn?Wo=Jo&&go&&(Ve||!Io):ur?Wo=Jo&&go&&!Io&&(Ve||!ys):Io||ys?Wo=!1:Wo=Ve?Ni<=R:Ni<R;Wo?St=ui+1:Zt=ui}return bu(Zt,Et)}function Gf(C,R){for(var be=-1,Ve=C.length,St=0,Zt=[];++be<Ve;){var Sn=C[be],kn=R?R(Sn):Sn;if(!be||!al(kn,ur)){var ur=kn;Zt[St++]=Sn===0?0:Sn}}return Zt}function Ff(C){return typeof C=="number"?C:bc(C)?Ge:+C}function Nu(C){if(typeof C=="string")return C;if(Ns(C))return pr(C,Nu)+"";if(bc(C))return Df?Df.call(C):"";var R=C+"";return R=="0"&&1/C==-xe?"-0":R}function $s(C,R,be){var Ve=-1,St=Qn,Zt=C.length,Sn=!0,kn=[],ur=kn;if(be)Sn=!1,St=jn;else if(Zt>=r){var ni=R?null:hd(C);if(ni)return Vu(ni);Sn=!1,St=oa,ur=new rl}else ur=R?[]:kn;e:for(;++Ve<Zt;){var ui=C[Ve],Ni=R?R(ui):ui;if(ui=be||ui!==0?ui:0,Sn&&Ni===Ni){for(var go=ur.length;go--;)if(ur[go]===Ni)continue e;R&&ur.push(Ni),kn.push(ui)}else St(ur,Ni,be)||(ur!==kn&&ur.push(Ni),kn.push(ui))}return kn}function Vl(C,R){return R=_c(R,C),C=Ja(C,R),C==null||delete C[ra(fo(R))]}function bl(C,R,be,Ve){return Pu(C,R,be(Ac(C,R)),Ve)}function wl(C,R,be,Ve){for(var St=C.length,Zt=Ve?St:-1;(Ve?Zt--:++Zt<St)&&R(C[Zt],Zt,C););return be?Du(C,Ve?0:Zt,Ve?Zt+1:St):Du(C,Ve?Zt+1:0,Ve?St:Zt)}function pf(C,R){var be=C;return be instanceof Go&&(be=be.value()),co(R,function(Ve,St){return St.func.apply(St.thisArg,vi([Ve],St.args))},be)}function uh(C,R,be){var Ve=C.length;if(Ve<2)return Ve?$s(C[0]):[];for(var St=-1,Zt=un(Ve);++St<Ve;)for(var Sn=C[St],kn=-1;++kn<Ve;)kn!=St&&(Zt[St]=Bu(Zt[St]||Sn,C[kn],R,be));return $s(Ga(Zt,1),R,be)}function Wl(C,R,be){for(var Ve=-1,St=C.length,Zt=R.length,Sn={};++Ve<St;){var kn=Ve<Zt?R[Ve]:o;be(Sn,C[Ve],kn)}return Sn}function Vc(C){return Cu(C)?C:[]}function jf(C){return typeof C=="function"?C:ju}function _c(C,R){return Ns(C)?C:ms(C,R)?[C]:bs(Ea(C))}var ad=Ms;function El(C,R,be){var Ve=C.length;return be=be===o?Ve:be,!R&&be>=Ve?C:Du(C,R,be)}var ud=Pf||function(C){return Mo.clearTimeout(C)};function Vn(C,R){if(R)return C.slice();var be=C.length,Ve=tf?tf(be):new C.constructor(be);return C.copy(Ve),Ve}function zf(C){var R=new C.constructor(C.byteLength);return new Rl(R).set(new Rl(C)),R}function Uf(C,R){var be=R?zf(C.buffer):C.buffer;return new C.constructor(be,C.byteOffset,C.byteLength)}function Ih(C){var R=new C.constructor(C.source,Z.exec(C));return R.lastIndex=C.lastIndex,R}function cd(C){return dc?Fi(dc.call(C)):{}}function vf(C,R){var be=R?zf(C.buffer):C.buffer;return new C.constructor(be,C.byteOffset,C.length)}function Rh(C,R){if(C!==R){var be=C!==o,Ve=C===null,St=C===C,Zt=bc(C),Sn=R!==o,kn=R===null,ur=R===R,ni=bc(R);if(!kn&&!ni&&!Zt&&C>R||Zt&&Sn&&ur&&!kn&&!ni||Ve&&Sn&&ur||!be&&ur||!St)return 1;if(!Ve&&!Zt&&!ni&&C<R||ni&&be&&St&&!Ve&&!Zt||kn&&be&&St||!Sn&&St||!ur)return-1}return 0}function Dc(C,R,be){for(var Ve=-1,St=C.criteria,Zt=R.criteria,Sn=St.length,kn=be.length;++Ve<Sn;){var ur=Rh(St[Ve],Zt[Ve]);if(ur){if(Ve>=kn)return ur;var ni=be[Ve];return ur*(ni=="desc"?-1:1)}}return C.index-R.index}function Vf(C,R,be,Ve){for(var St=-1,Zt=C.length,Sn=be.length,kn=-1,ur=R.length,ni=Ba(Zt-Sn,0),ui=un(ur+ni),Ni=!Ve;++kn<ur;)ui[kn]=R[kn];for(;++St<Sn;)(Ni||St<Zt)&&(ui[be[St]]=C[St]);for(;ni--;)ui[kn++]=C[St++];return ui}function $l(C,R,be,Ve){for(var St=-1,Zt=C.length,Sn=-1,kn=be.length,ur=-1,ni=R.length,ui=Ba(Zt-kn,0),Ni=un(ui+ni),go=!Ve;++St<ui;)Ni[St]=C[St];for(var Io=St;++ur<ni;)Ni[Io+ur]=R[ur];for(;++Sn<kn;)(go||St<Zt)&&(Ni[Io+be[Sn]]=C[St++]);return Ni}function Ma(C,R){var be=-1,Ve=C.length;for(R||(R=un(Ve));++be<Ve;)R[be]=C[be];return R}function yc(C,R,be,Ve){var St=!be;be||(be={});for(var Zt=-1,Sn=R.length;++Zt<Sn;){var kn=R[Zt],ur=Ve?Ve(be[kn],C[kn],kn,be,C):o;ur===o&&(ur=C[kn]),St?tc(be,kn,ur):Xu(be,kn,ur)}return be}function Wf(C,R){return yc(C,Bi(C),R)}function ch(C,R){return yc(C,Xr(C),R)}function $f(C,R){return function(be,Ve){var St=Ns(be)?qe:ha,Zt=R?R():{};return St(be,C,hr(Ve,2),Zt)}}function gu(C){return Ms(function(R,be){var Ve=-1,St=be.length,Zt=St>1?be[St-1]:o,Sn=St>2?be[2]:o;for(Zt=C.length>3&&typeof Zt=="function"?(St--,Zt):o,Sn&&To(be[0],be[1],Sn)&&(Zt=St<3?o:Zt,St=1),R=Fi(R);++Ve<St;){var kn=be[Ve];kn&&C(R,kn,Ve,Zt)}return R})}function Wc(C,R){return function(be,Ve){if(be==null)return be;if(!Nc(be))return C(be,Ve);for(var St=be.length,Zt=R?St:-1,Sn=Fi(be);(R?Zt--:++Zt<St)&&Ve(Sn[Zt],Zt,Sn)!==!1;);return be}}function Fa(C){return function(R,be,Ve){for(var St=-1,Zt=Fi(R),Sn=Ve(R),kn=Sn.length;kn--;){var ur=Sn[C?kn:++St];if(be(Zt[ur],ur,Zt)===!1)break}return R}}function ku(C,R,be){var Ve=R&$,St=xl(C);function Zt(){var Sn=this&&this!==Mo&&this instanceof Zt?St:C;return Sn.apply(Ve?be:this,arguments)}return Zt}function mf(C){return function(R){R=Ea(R);var be=qa(R)?qt(R):o,Ve=be?be[0]:R.charAt(0),St=be?El(be,1).join(""):R.slice(1);return Ve[C]()+St}}function $c(C){return function(R){return co(Hp(Eh(R).replace(Ht,"")),C,"")}}function xl(C){return function(){var R=arguments;switch(R.length){case 0:return new C;case 1:return new C(R[0]);case 2:return new C(R[0],R[1]);case 3:return new C(R[0],R[1],R[2]);case 4:return new C(R[0],R[1],R[2],R[3]);case 5:return new C(R[0],R[1],R[2],R[3],R[4]);case 6:return new C(R[0],R[1],R[2],R[3],R[4],R[5]);case 7:return new C(R[0],R[1],R[2],R[3],R[4],R[5],R[6])}var be=Hu(C.prototype),Ve=C.apply(be,R);return ja(Ve)?Ve:be}}function ld(C,R,be){var Ve=xl(C);function St(){for(var Zt=arguments.length,Sn=un(Zt),kn=Zt,ur=Ti(St);kn--;)Sn[kn]=arguments[kn];var ni=Zt<3&&Sn[0]!==ur&&Sn[Zt-1]!==ur?[]:Aa(Sn,ur);if(Zt-=ni.length,Zt<be)return fd(C,R,Hl,St.placeholder,o,Sn,ni,o,o,be-Zt);var ui=this&&this!==Mo&&this instanceof St?Ve:C;return Fe(ui,this,Sn)}return St}function Sl(C){return function(R,be,Ve){var St=Fi(R);if(!Nc(R)){var Zt=hr(be,3);R=Fu(R),be=function(kn){return Zt(St[kn],kn,St)}}var Sn=C(R,be,Ve);return Sn>-1?St[Zt?R[Sn]:Sn]:o}}function lh(C){return Qr(function(R){var be=R.length,Ve=be,St=wu.prototype.thru;for(C&&R.reverse();Ve--;){var Zt=R[Ve];if(typeof Zt!="function")throw new $i(t);if(St&&!Sn&&bi(Zt)=="wrapper")var Sn=new wu([],!0)}for(Ve=Sn?Ve:be;++Ve<be;){Zt=R[Ve];var kn=bi(Zt),ur=kn=="wrapper"?hi(Zt):o;ur&&as(ur[0])&&ur[1]==(pe|B|z|S)&&!ur[4].length&&ur[9]==1?Sn=Sn[bi(ur[0])].apply(Sn,ur[3]):Sn=Zt.length==1&&as(Zt)?Sn[kn]():Sn.thru(Zt)}return function(){var ni=arguments,ui=ni[0];if(Sn&&ni.length==1&&Ns(ui))return Sn.plant(ui).value();for(var Ni=0,go=be?R[Ni].apply(this,ni):ui;++Ni<be;)go=R[Ni].call(this,go);return go}})}function Hl(C,R,be,Ve,St,Zt,Sn,kn,ur,ni){var ui=R&pe,Ni=R&$,go=R&te,Io=R&(B|he),Jo=R&q,ys=go?o:xl(C);function Wo(){for(var Es=arguments.length,Is=un(Es),zu=Es;zu--;)Is[zu]=arguments[zu];if(Io)var Iu=Ti(Wo),fu=Ha(Is,Iu);if(Ve&&(Is=Vf(Is,Ve,St,Io)),Zt&&(Is=$l(Is,Zt,Sn,Io)),Es-=fu,Io&&Es<ni){var Ia=Aa(Is,Iu);return fd(C,R,Hl,Wo.placeholder,be,Is,Ia,kn,ur,ni-Es)}var Ra=Ni?be:this,Ru=go?Ra[C]:C;return Es=Is.length,kn?Is=pu(Is,kn):Jo&&Es>1&&Is.reverse(),ui&&ur<Es&&(Is.length=ur),this&&this!==Mo&&this instanceof Wo&&(Ru=ys||xl(Ru)),Ru.apply(Ra,Is)}return Wo}function fh(C,R){return function(be,Ve){return f(be,C,R(Ve),{})}}function hh(C,R){return function(be,Ve){var St;if(be===o&&Ve===o)return R;if(be!==o&&(St=be),Ve!==o){if(St===o)return Ve;typeof be=="string"||typeof Ve=="string"?(be=Nu(be),Ve=Nu(Ve)):(be=Ff(be),Ve=Ff(Ve)),St=C(be,Ve)}return St}}function dh(C){return Qr(function(R){return R=pr(R,ds(hr())),Ms(function(be){var Ve=this;return C(R,function(St){return Fe(St,Ve,be)})})})}function Hf(C,R){R=R===o?" ":Nu(R);var be=R.length;if(be<2)return be?ah(R,C):R;var Ve=ah(R,Tu(C/du(R)));return qa(R)?El(qt(Ve),0,C).join(""):Ve.slice(0,C)}function Xf(C,R,be,Ve){var St=R&$,Zt=xl(C);function Sn(){for(var kn=-1,ur=arguments.length,ni=-1,ui=Ve.length,Ni=un(ui+ur),go=this&&this!==Mo&&this instanceof Sn?Zt:C;++ni<ui;)Ni[ni]=Ve[ni];for(;ur--;)Ni[ni++]=arguments[++kn];return Fe(go,St?be:this,Ni)}return Sn}function gh(C){return function(R,be,Ve){return Ve&&typeof Ve!="number"&&To(R,be,Ve)&&(be=Ve=o),R=Ol(R),be===o?(be=R,R=0):be=Ol(be),Ve=Ve===o?R<be?1:-1:Ol(Ve),ml(R,be,Ve,C)}}function Xl(C){return function(R,be){return typeof R=="string"&&typeof be=="string"||(R=Yc(R),be=Yc(be)),C(R,be)}}function fd(C,R,be,Ve,St,Zt,Sn,kn,ur,ni){var ui=R&B,Ni=ui?Sn:o,go=ui?o:Sn,Io=ui?Zt:o,Jo=ui?o:Zt;R|=ui?z:ee,R&=~(ui?ee:z),R&fe||(R&=~($|te));var ys=[C,R,St,Io,Ni,Jo,go,kn,ur,ni],Wo=be.apply(o,ys);return as(C)&&ou(Wo,ys),Wo.placeholder=Ve,Hs(Wo,C,R)}function Lh(C){var R=Wi[C];return function(be,Ve){if(be=Yc(be),Ve=Ve==null?0:bu(Ls(Ve),292),Ve&&ih(be)){var St=(Ea(be)+"e").split("e"),Zt=R(St[0]+"e"+(+St[1]+Ve));return St=(Ea(Zt)+"e").split("e"),+(St[0]+"e"+(+St[1]-Ve))}return R(be)}}var hd=Oc&&1/Vu(new Oc([,-0]))[1]==xe?function(C){return new Oc(C)}:Na;function dd(C){return function(R){var be=_i(R);return be==ci?eu(R):be==Xt?Wu(R):mu(R,C(R))}}function et(C,R,be,Ve,St,Zt,Sn,kn){var ur=R&te;if(!ur&&typeof C!="function")throw new $i(t);var ni=Ve?Ve.length:0;if(ni||(R&=~(z|ee),Ve=St=o),Sn=Sn===o?Sn:Ba(Ls(Sn),0),kn=kn===o?kn:Ls(kn),ni-=St?St.length:0,R&ee){var ui=Ve,Ni=St;Ve=St=o}var go=ur?o:hi(C),Io=[C,R,be,Ve,St,ui,Ni,Zt,Sn,kn];if(go&&nu(Io,go),C=Io[0],R=Io[1],be=Io[2],Ve=Io[3],St=Io[4],kn=Io[9]=Io[9]===o?ur?0:C.length:Ba(Io[9]-ni,0),!kn&&R&(B|he)&&(R&=~(B|he)),!R||R==$)var Jo=ku(C,R,be);else R==B||R==he?Jo=ld(C,R,kn):(R==z||R==($|z))&&!St.length?Jo=Xf(C,R,be,Ve):Jo=Hl.apply(o,Io);var ys=go?zl:ou;return Hs(ys(Jo,Io),C,R)}function Vt(C,R,be,Ve){return C===o||al(C,ya[be])&&!Rs.call(Ve,be)?R:C}function mn(C,R,be,Ve,St,Zt){return ja(C)&&ja(R)&&(Zt.set(R,C),ao(C,R,o,mn,Zt),Zt.delete(R)),C}function dr(C){return yh(C)?o:C}function jr(C,R,be,Ve,St,Zt){var Sn=be&F,kn=C.length,ur=R.length;if(kn!=ur&&!(Sn&&ur>kn))return!1;var ni=Zt.get(C),ui=Zt.get(R);if(ni&&ui)return ni==R&&ui==C;var Ni=-1,go=!0,Io=be&ae?new rl:o;for(Zt.set(C,R),Zt.set(R,C);++Ni<kn;){var Jo=C[Ni],ys=R[Ni];if(Ve)var Wo=Sn?Ve(ys,Jo,Ni,R,C,Zt):Ve(Jo,ys,Ni,C,R,Zt);if(Wo!==o){if(Wo)continue;go=!1;break}if(Io){if(!Zo(R,function(Es,Is){if(!oa(Io,Is)&&(Jo===Es||St(Jo,Es,be,Ve,Zt)))return Io.push(Is)})){go=!1;break}}else if(!(Jo===ys||St(Jo,ys,be,Ve,Zt))){go=!1;break}}return Zt.delete(C),Zt.delete(R),go}function gr(C,R,be,Ve,St,Zt,Sn){switch(be){case Ze:if(C.byteLength!=R.byteLength||C.byteOffset!=R.byteOffset)return!1;C=C.buffer,R=R.buffer;case ut:return!(C.byteLength!=R.byteLength||!Zt(new Rl(C),new Rl(R)));case hn:case Bn:case Ot:return al(+C,+R);case ir:return C.name==R.name&&C.message==R.message;case $e:case Rt:return C==R+"";case ci:var kn=eu;case Xt:var ur=Ve&F;if(kn||(kn=Vu),C.size!=R.size&&!ur)return!1;var ni=Sn.get(C);if(ni)return ni==R;Ve|=ae,Sn.set(C,R);var ui=jr(kn(C),kn(R),Ve,St,Zt,Sn);return Sn.delete(C),ui;case _t:if(dc)return dc.call(C)==dc.call(R)}return!1}function Ar(C,R,be,Ve,St,Zt){var Sn=be&F,kn=fi(C),ur=kn.length,ni=fi(R),ui=ni.length;if(ur!=ui&&!Sn)return!1;for(var Ni=ur;Ni--;){var go=kn[Ni];if(!(Sn?go in R:Rs.call(R,go)))return!1}var Io=Zt.get(C),Jo=Zt.get(R);if(Io&&Jo)return Io==R&&Jo==C;var ys=!0;Zt.set(C,R),Zt.set(R,C);for(var Wo=Sn;++Ni<ur;){go=kn[Ni];var Es=C[go],Is=R[go];if(Ve)var zu=Sn?Ve(Is,Es,go,R,C,Zt):Ve(Es,Is,go,C,R,Zt);if(!(zu===o?Es===Is||St(Es,Is,be,Ve,Zt):zu)){ys=!1;break}Wo||(Wo=go=="constructor")}if(ys&&!Wo){var Iu=C.constructor,fu=R.constructor;Iu!=fu&&"constructor"in C&&"constructor"in R&&!(typeof Iu=="function"&&Iu instanceof Iu&&typeof fu=="function"&&fu instanceof fu)&&(ys=!1)}return Zt.delete(C),Zt.delete(R),ys}function Qr(C){return lu(iu(C,o,Tn),C+"")}function fi(C){return Bf(C,Fu,Bi)}function Ai(C){return Bf(C,Rc,Xr)}var hi=of?function(C){return of.get(C)}:Na;function bi(C){for(var R=C.name+"",be=$u[R],Ve=Rs.call($u,R)?be.length:0;Ve--;){var St=be[Ve],Zt=St.func;if(Zt==null||Zt==C)return St.name}return R}function Ti(C){var R=Rs.call(It,"placeholder")?It:C;return R.placeholder}function hr(){var C=It.iteratee||fg;return C=C===fg?On:C,arguments.length?C(arguments[0],arguments[1]):C}function Ci(C,R){var be=C.__data__;return xo(R)?be[typeof R=="string"?"string":"hash"]:be.map}function Wn(C){for(var R=Fu(C),be=R.length;be--;){var Ve=R[be],St=C[Ve];R[be]=[Ve,St,Ca(St)]}return R}function vr(C,R){var be=uc(C,R);return Pt(be)?be:o}function gi(C){var R=Rs.call(C,Qc),be=C[Qc];try{C[Qc]=o;var Ve=!0}catch(Zt){}var St=Ua.call(C);return Ve&&(R?C[Qc]=be:delete C[Qc]),St}var Bi=rf?function(C){return C==null?[]:(C=Fi(C),Zn(rf(C),function(R){return os.call(C,R)}))}:Wh,Xr=rf?function(C){for(var R=[];C;)vi(R,Bi(C)),C=fc(C);return R}:Wh,_i=na;(ec&&_i(new ec(new ArrayBuffer(1)))!=Ze||Cc&&_i(new Cc)!=ci||hc&&_i(hc.resolve())!=Li||Oc&&_i(new Oc)!=Xt||Ll&&_i(new Ll)!=at)&&(_i=function(C){var R=na(C),be=R==Pi?C.constructor:o,Ve=be?Gu(be):"";if(Ve)switch(Ve){case sf:return Ze;case nd:return ci;case Tc:return Li;case rd:return Xt;case oh:return at}return R});function mi(C,R,be){for(var Ve=-1,St=be.length;++Ve<St;){var Zt=be[Ve],Sn=Zt.size;switch(Zt.type){case"drop":C+=Sn;break;case"dropRight":R-=Sn;break;case"take":R=bu(R,C+Sn);break;case"takeRight":C=Ba(C,R-Sn);break}}return{start:C,end:R}}function zi(C){var R=C.match(Qo);return R?R[1].split(Xs):[]}function Zr(C,R,be){R=_c(R,C);for(var Ve=-1,St=R.length,Zt=!1;++Ve<St;){var Sn=ra(R[Ve]);if(!(Zt=C!=null&&be(C,Sn)))break;C=C[Sn]}return Zt||++Ve!=St?Zt:(St=C==null?0:C.length,!!St&&jh(St)&&Gr(Sn,St)&&(Ns(C)||Jf(C)))}function Ri(C){var R=C.length,be=new C.constructor(R);return R&&typeof C[0]=="string"&&Rs.call(C,"index")&&(be.index=C.index,be.input=C.input),be}function Oo(C){return typeof C.constructor=="function"&&!gs(C)?Hu(fc(C)):{}}function Po(C,R,be){var Ve=C.constructor;switch(R){case ut:return zf(C);case hn:case Bn:return new Ve(+C);case Ze:return Uf(C,be);case Wt:case Ut:case jt:case xt:case $t:case Un:case qn:case rr:case xn:return vf(C,be);case ci:return new Ve;case Ot:case Rt:return new Ve(C);case $e:return Ih(C);case Xt:return new Ve;case _t:return cd(C)}}function ji(C,R){var be=R.length;if(!be)return C;var Ve=be-1;return R[Ve]=(be>1?"& ":"")+R[Ve],R=R.join(be>2?", ":" "),C.replace(Eo,`{
/* [wrapped with `+R+`] */
`)}function pi(C){return Ns(C)||Jf(C)||!!(rh&&C&&C[rh])}function Gr(C,R){var be=typeof C;return R=R==null?Oe:R,!!R&&(be=="number"||be!="symbol"&&ft.test(C))&&C>-1&&C%1==0&&C<R}function To(C,R,be){if(!ja(be))return!1;var Ve=typeof R;return(Ve=="number"?Nc(be)&&Gr(R,be.length):Ve=="string"&&R in be)?al(be[R],C):!1}function ms(C,R){if(Ns(C))return!1;var be=typeof C;return be=="number"||be=="symbol"||be=="boolean"||C==null||bc(C)?!0:wo.test(C)||!wi.test(C)||R!=null&&C in Fi(R)}function xo(C){var R=typeof C;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?C!=="__proto__":C===null}function as(C){var R=bi(C),be=It[R];if(typeof be!="function"||!(R in Go.prototype))return!1;if(C===be)return!0;var Ve=hi(be);return!!Ve&&C===Ve[0]}function es(C){return!!Bc&&Bc in C}var ps=au?Cl:Pd;function gs(C){var R=C&&C.constructor,be=typeof R=="function"&&R.prototype||ya;return C===be}function Ca(C){return C===C&&!ja(C)}function cu(C,R){return function(be){return be==null?!1:be[C]===R&&(R!==o||C in Fi(be))}}function Ps(C){var R=Yd(C,function(Ve){return be.size===m&&be.clear(),Ve}),be=R.cache;return R}function nu(C,R){var be=C[1],Ve=R[1],St=be|Ve,Zt=St<($|te|pe),Sn=Ve==pe&&be==B||Ve==pe&&be==S&&C[7].length<=R[8]||Ve==(pe|S)&&R[7].length<=R[8]&&be==B;if(!(Zt||Sn))return C;Ve&$&&(C[2]=R[2],St|=be&$?0:fe);var kn=R[3];if(kn){var ur=C[3];C[3]=ur?Vf(ur,kn,R[4]):kn,C[4]=ur?Aa(C[3],d):R[4]}return kn=R[5],kn&&(ur=C[5],C[5]=ur?$l(ur,kn,R[6]):kn,C[6]=ur?Aa(C[5],d):R[6]),kn=R[7],kn&&(C[7]=kn),Ve&pe&&(C[8]=C[8]==null?R[8]:bu(C[8],R[8])),C[9]==null&&(C[9]=R[9]),C[0]=R[0],C[1]=St,C}function wa(C){var R=[];if(C!=null)for(var be in Fi(C))R.push(be);return R}function ru(C){return Ua.call(C)}function iu(C,R,be){return R=Ba(R===o?C.length-1:R,0),function(){for(var Ve=arguments,St=-1,Zt=Ba(Ve.length-R,0),Sn=un(Zt);++St<Zt;)Sn[St]=Ve[R+St];St=-1;for(var kn=un(R+1);++St<R;)kn[St]=Ve[St];return kn[R]=be(Sn),Fe(C,this,kn)}}function Ja(C,R){return R.length<2?C:Ac(C,Du(R,0,-1))}function pu(C,R){for(var be=C.length,Ve=bu(R.length,be),St=Ma(C);Ve--;){var Zt=R[Ve];C[Ve]=Gr(Zt,be)?St[Zt]:o}return C}function xu(C,R){if(!(R==="constructor"&&typeof C[R]=="function")&&R!="__proto__")return C[R]}var ou=Ao(zl),ts=xc||function(C,R){return Mo.setTimeout(C,R)},lu=Ao(df);function Hs(C,R,be){var Ve=R+"";return lu(C,ji(Ve,rn(zi(Ve),be)))}function Ao(C){var R=0,be=0;return function(){var Ve=Af(),St=ue-(Ve-be);if(be=Ve,St>0){if(++R>=j)return arguments[0]}else R=0;return C.apply(o,arguments)}}function ns(C,R){var be=-1,Ve=C.length,St=Ve-1;for(R=R===o?Ve:R;++be<R;){var Zt=jl(be,St),Sn=C[Zt];C[Zt]=C[be],C[be]=Sn}return C.length=R,C}var bs=Ps(function(C){var R=[];return C.charCodeAt(0)===46&&R.push(""),C.replace(fs,function(be,Ve,St,Zt){R.push(St?Zt.replace(mt,"$1"):Ve||be)}),R});function ra(C){if(typeof C=="string"||bc(C))return C;var R=C+"";return R=="0"&&1/C==-xe?"-0":R}function Gu(C){if(C!=null){try{return yu.call(C)}catch(R){}try{return C+""}catch(R){}}return""}function rn(C,R){return Mt(Gt,function(be){var Ve="_."+be[0];R&be[1]&&!Qn(C,Ve)&&C.push(Ve)}),C.sort()}function xr(C){if(C instanceof Go)return C.clone();var R=new wu(C.__wrapped__,C.__chain__);return R.__actions__=Ma(C.__actions__),R.__index__=C.__index__,R.__values__=C.__values__,R}function sr(C,R,be){(be?To(C,R,be):R===o)?R=1:R=Ba(Ls(R),0);var Ve=C==null?0:C.length;if(!Ve||R<1)return[];for(var St=0,Zt=0,Sn=un(Tu(Ve/R));St<Ve;)Sn[Zt++]=Du(C,St,St+=R);return Sn}function Qi(C){for(var R=-1,be=C==null?0:C.length,Ve=0,St=[];++R<be;){var Zt=C[R];Zt&&(St[Ve++]=Zt)}return St}function ws(){var C=arguments.length;if(!C)return[];for(var R=un(C-1),be=arguments[0],Ve=C;Ve--;)R[Ve-1]=arguments[Ve];return vi(Ns(be)?Ma(be):[be],Ga(R,1))}var ga=Ms(function(C,R){return Cu(C)?Bu(C,Ga(R,1,Cu,!0)):[]}),kt=Ms(function(C,R){var be=fo(R);return Cu(be)&&(be=o),Cu(C)?Bu(C,Ga(R,1,Cu,!0),hr(be,2)):[]}),Kt=Ms(function(C,R){var be=fo(R);return Cu(be)&&(be=o),Cu(C)?Bu(C,Ga(R,1,Cu,!0),o,be):[]});function pn(C,R,be){var Ve=C==null?0:C.length;return Ve?(R=be||R===o?1:Ls(R),Du(C,R<0?0:R,Ve)):[]}function lr(C,R,be){var Ve=C==null?0:C.length;return Ve?(R=be||R===o?1:Ls(R),R=Ve-R,Du(C,0,R<0?0:R)):[]}function ar(C,R){return C&&C.length?wl(C,hr(R,3),!0,!0):[]}function Cn(C,R){return C&&C.length?wl(C,hr(R,3),!0):[]}function _n(C,R,be,Ve){var St=C==null?0:C.length;return St?(be&&typeof be!="number"&&To(C,R,be)&&(be=0,Ve=St),lf(C,R,be,Ve)):[]}function Nn(C,R,be){var Ve=C==null?0:C.length;if(!Ve)return-1;var St=be==null?0:Ls(be);return St<0&&(St=Ba(Ve+St,0)),Ss(C,hr(R,3),St)}function sn(C,R,be){var Ve=C==null?0:C.length;if(!Ve)return-1;var St=Ve-1;return be!==o&&(St=Ls(be),St=be<0?Ba(Ve+St,0):bu(St,Ve-1)),Ss(C,hr(R,3),St,!0)}function Tn(C){var R=C==null?0:C.length;return R?Ga(C,1):[]}function Yt(C){var R=C==null?0:C.length;return R?Ga(C,xe):[]}function An(C,R){var be=C==null?0:C.length;return be?(R=R===o?1:Ls(R),Ga(C,R)):[]}function Er(C){for(var R=-1,be=C==null?0:C.length,Ve={};++R<be;){var St=C[R];Ve[St[0]]=St[1]}return Ve}function Ir(C){return C&&C.length?C[0]:o}function ti(C,R,be){var Ve=C==null?0:C.length;if(!Ve)return-1;var St=be==null?0:Ls(be);return St<0&&(St=Ba(Ve+St,0)),ko(C,R,St)}function Hr(C){var R=C==null?0:C.length;return R?Du(C,0,-1):[]}var ai=Ms(function(C){var R=pr(C,Vc);return R.length&&R[0]===C[0]?n(R):[]}),yo=Ms(function(C){var R=fo(C),be=pr(C,Vc);return R===fo(be)?R=o:be.pop(),be.length&&be[0]===C[0]?n(be,hr(R,2)):[]}),us=Ms(function(C){var R=fo(C),be=pr(C,Vc);return R=typeof R=="function"?R:o,R&&be.pop(),be.length&&be[0]===C[0]?n(be,o,R):[]});function io(C,R){return C==null?"":Sc.call(C,R)}function fo(C){var R=C==null?0:C.length;return R?C[R-1]:o}function Ko(C,R,be){var Ve=C==null?0:C.length;if(!Ve)return-1;var St=Ve;return be!==o&&(St=Ls(be),St=St<0?Ba(Ve+St,0):bu(St,Ve-1)),R===R?Ku(C,R,St):Ss(C,xa,St,!0)}function Gs(C,R){return C&&C.length?Qs(C,Ls(R)):o}var Va=Ms(rc);function rc(C,R){return C&&C.length&&R&&R.length?sl(C,R):C}function ph(C,R,be){return C&&C.length&&R&&R.length?sl(C,R,hr(be,2)):C}function ic(C,R,be){return C&&C.length&&R&&R.length?sl(C,R,o,be):C}var oc=Qr(function(C,R){var be=C==null?0:C.length,Ve=pc(C,R);return ff(C,pr(R,function(St){return Gr(St,be)?+St:St}).sort(Rh)),Ve});function Hc(C,R){var be=[];if(!(C&&C.length))return be;var Ve=-1,St=[],Zt=C.length;for(R=hr(R,3);++Ve<Zt;){var Sn=C[Ve];R(Sn,Ve,C)&&(be.push(Sn),St.push(Ve))}return ff(C,St),be}function Yf(C){return C==null?C:_f.call(C)}function Ig(C,R,be){var Ve=C==null?0:C.length;return Ve?(be&&typeof be!="number"&&To(C,R,be)?(R=0,be=Ve):(R=R==null?0:Ls(R),be=be===o?Ve:Ls(be)),Du(C,R,be)):[]}function Gd(C,R){return yl(C,R)}function Rg(C,R,be){return kf(C,R,hr(be,2))}function Lg(C,R){var be=C==null?0:C.length;if(be){var Ve=yl(C,R);if(Ve<be&&al(C[Ve],R))return Ve}return-1}function Bg(C,R){return yl(C,R,!0)}function kg(C,R,be){return kf(C,R,hr(be,2),!0)}function Gg(C,R){var be=C==null?0:C.length;if(be){var Ve=yl(C,R,!0)-1;if(al(C[Ve],R))return Ve}return-1}function Fg(C){return C&&C.length?Gf(C):[]}function jg(C,R){return C&&C.length?Gf(C,hr(R,2)):[]}function gd(C){var R=C==null?0:C.length;return R?Du(C,1,R):[]}function Bv(C,R,be){return C&&C.length?(R=be||R===o?1:Ls(R),Du(C,0,R<0?0:R)):[]}function zg(C,R,be){var Ve=C==null?0:C.length;return Ve?(R=be||R===o?1:Ls(R),R=Ve-R,Du(C,R<0?0:R,Ve)):[]}function vh(C,R){return C&&C.length?wl(C,hr(R,3),!1,!0):[]}function Ug(C,R){return C&&C.length?wl(C,hr(R,3)):[]}var Vg=Ms(function(C){return $s(Ga(C,1,Cu,!0))}),Wg=Ms(function(C){var R=fo(C);return Cu(R)&&(R=o),$s(Ga(C,1,Cu,!0),hr(R,2))}),$g=Ms(function(C){var R=fo(C);return R=typeof R=="function"?R:o,$s(Ga(C,1,Cu,!0),o,R)});function Hg(C){return C&&C.length?$s(C):[]}function Da(C,R){return C&&C.length?$s(C,hr(R,2)):[]}function Yl(C,R){return R=typeof R=="function"?R:o,C&&C.length?$s(C,o,R):[]}function Bh(C){if(!(C&&C.length))return[];var R=0;return C=Zn(C,function(be){if(Cu(be))return R=Ba(be.length,R),!0}),qs(R,function(be){return pr(C,_s(be))})}function Fd(C,R){if(!(C&&C.length))return[];var be=Bh(C);return R==null?be:pr(be,function(Ve){return Fe(R,o,Ve)})}var Xg=Ms(function(C,R){return Cu(C)?Bu(C,R):[]}),Yg=Ms(function(C){return uh(Zn(C,Cu))}),Zg=Ms(function(C){var R=fo(C);return Cu(R)&&(R=o),uh(Zn(C,Cu),hr(R,2))}),Kg=Ms(function(C){var R=fo(C);return R=typeof R=="function"?R:o,uh(Zn(C,Cu),o,R)}),jd=Ms(Bh);function kv(C,R){return Wl(C||[],R||[],Xu)}function zd(C,R){return Wl(C||[],R||[],Pu)}var Ud=Ms(function(C){var R=C.length,be=R>1?C[R-1]:o;return be=typeof be=="function"?(C.pop(),be):o,Fd(C,be)});function pd(C){var R=It(C);return R.__chain__=!0,R}function Jg(C,R){return R(C),C}function mh(C,R){return R(C)}var Qg=Qr(function(C){var R=C.length,be=R?C[0]:0,Ve=this.__wrapped__,St=function(Zt){return pc(Zt,C)};return R>1||this.__actions__.length||!(Ve instanceof Go)||!Gr(be)?this.thru(St):(Ve=Ve.slice(be,+be+(R?1:0)),Ve.__actions__.push({func:mh,args:[St],thisArg:o}),new wu(Ve,this.__chain__).thru(function(Zt){return R&&!Zt.length&&Zt.push(o),Zt}))});function qg(){return pd(this)}function vd(){return new wu(this.value(),this.__chain__)}function ep(){this.__values__===o&&(this.__values__=ng(this.value()));var C=this.__index__>=this.__values__.length,R=C?o:this.__values__[this.__index__++];return{done:C,value:R}}function tp(){return this}function Vd(C){for(var R,be=this;be instanceof af;){var Ve=xr(be);Ve.__index__=0,Ve.__values__=o,R?St.__wrapped__=Ve:R=Ve;var St=Ve;be=be.__wrapped__}return St.__wrapped__=C,R}function np(){var C=this.__wrapped__;if(C instanceof Go){var R=C;return this.__actions__.length&&(R=new Go(this)),R=R.reverse(),R.__actions__.push({func:mh,args:[Yf],thisArg:o}),new wu(R,this.__chain__)}return this.thru(Yf)}function rp(){return pf(this.__wrapped__,this.__actions__)}var Gv=$f(function(C,R,be){Rs.call(C,be)?++C[be]:tc(C,be,1)});function Fv(C,R,be){var Ve=Ns(C)?vn:Bl;return be&&To(C,R,be)&&(R=o),Ve(C,hr(R,3))}function jv(C,R){var be=Ns(C)?Zn:kl;return be(C,hr(R,3))}var kh=Sl(Nn),ip=Sl(sn);function op(C,R){return Ga(Gh(C,R),1)}function sp(C,R){return Ga(Gh(C,R),xe)}function md(C,R,be){return be=be===o?1:Ls(be),Ga(Gh(C,R),be)}function yd(C,R){var be=Ns(C)?Mt:vc;return be(C,hr(R,3))}function Wd(C,R){var be=Ns(C)?Lt:Yu;return be(C,hr(R,3))}var ap=$f(function(C,R,be){Rs.call(C,be)?C[be].push(R):tc(C,be,[R])});function Zf(C,R,be,Ve){C=Nc(C)?C:qf(C),be=be&&!Ve?Ls(be):0;var St=C.length;return be<0&&(be=Ba(St+be,0)),zh(C)?be<=St&&C.indexOf(R,be)>-1:!!St&&ko(C,R,be)>-1}var up=Ms(function(C,R,be){var Ve=-1,St=typeof R=="function",Zt=Nc(C)?un(C.length):[];return vc(C,function(Sn){Zt[++Ve]=St?Fe(R,Sn,be):p(Sn,R,be)}),Zt}),Kf=$f(function(C,R,be){tc(C,be,R)});function Gh(C,R){var be=Ns(C)?pr:Dr;return be(C,hr(R,3))}function cp(C,R,be,Ve){return C==null?[]:(Ns(R)||(R=R==null?[]:[R]),be=Ve?o:be,Ns(be)||(be=be==null?[]:[be]),Za(C,R,be))}var lp=$f(function(C,R,be){C[be?0:1].push(R)},function(){return[[],[]]});function zv(C,R,be){var Ve=Ns(C)?co:Us,St=arguments.length<3;return Ve(C,hr(R,4),be,St,vc)}function Uv(C,R,be){var Ve=Ns(C)?di:Us,St=arguments.length<3;return Ve(C,hr(R,4),be,St,Yu)}function Vv(C,R){var be=Ns(C)?Zn:kl;return be(C,Zd(hr(R,3)))}function Wv(C){var R=Ns(C)?Ta:hf;return R(C)}function fp(C,R,be){(be?To(C,R,be):R===o)?R=1:R=Ls(R);var Ve=Ns(C)?If:Uc;return Ve(C,R)}function hp(C){var R=Ns(C)?Pc:Ul;return R(C)}function dp(C){if(C==null)return 0;if(Nc(C))return zh(C)?du(C):C.length;var R=_i(C);return R==ci||R==Xt?C.size:Rn(C).length}function $d(C,R,be){var Ve=Ns(C)?Zo:gf;return be&&To(C,R,be)&&(R=o),Ve(C,hr(R,3))}var gp=Ms(function(C,R){if(C==null)return[];var be=R.length;return be>1&&To(C,R[0],R[1])?R=[]:be>2&&To(R[0],R[1],R[2])&&(R=[R[0]]),Za(C,Ga(R,1),[])}),Zl=Ph||function(){return Mo.Date.now()};function pp(C,R){if(typeof R!="function")throw new $i(t);return C=Ls(C),function(){if(--C<1)return R.apply(this,arguments)}}function Hd(C,R,be){return R=be?o:R,R=C&&R==null?C.length:R,et(C,pe,o,o,o,o,R)}function Xd(C,R){var be;if(typeof R!="function")throw new $i(t);return C=Ls(C),function(){return--C>0&&(be=R.apply(this,arguments)),C<=1&&(R=o),be}}var bd=Ms(function(C,R,be){var Ve=$;if(be.length){var St=Aa(be,Ti(bd));Ve|=z}return et(C,Ve,R,be,St)}),vp=Ms(function(C,R,be){var Ve=$|te;if(be.length){var St=Aa(be,Ti(vp));Ve|=z}return et(R,Ve,C,be,St)});function Su(C,R,be){R=be?o:R;var Ve=et(C,B,o,o,o,o,o,R);return Ve.placeholder=Su.placeholder,Ve}function $v(C,R,be){R=be?o:R;var Ve=et(C,he,o,o,o,o,o,R);return Ve.placeholder=$v.placeholder,Ve}function Kl(C,R,be){var Ve,St,Zt,Sn,kn,ur,ni=0,ui=!1,Ni=!1,go=!0;if(typeof C!="function")throw new $i(t);R=Yc(R)||0,ja(be)&&(ui=!!be.leading,Ni="maxWait"in be,Zt=Ni?Ba(Yc(be.maxWait)||0,R):Zt,go="trailing"in be?!!be.trailing:go);function Io(Ia){var Ra=Ve,Ru=St;return Ve=St=o,ni=Ia,Sn=C.apply(Ru,Ra),Sn}function Jo(Ia){return ni=Ia,kn=ts(Es,R),ui?Io(Ia):Sn}function ys(Ia){var Ra=Ia-ur,Ru=Ia-ni,ul=R-Ra;return Ni?bu(ul,Zt-Ru):ul}function Wo(Ia){var Ra=Ia-ur,Ru=Ia-ni;return ur===o||Ra>=R||Ra<0||Ni&&Ru>=Zt}function Es(){var Ia=Zl();if(Wo(Ia))return Is(Ia);kn=ts(Es,ys(Ia))}function Is(Ia){return kn=o,go&&Ve?Io(Ia):(Ve=St=o,Sn)}function zu(){kn!==o&&ud(kn),ni=0,Ve=ur=St=kn=o}function Iu(){return kn===o?Sn:Is(Zl())}function fu(){var Ia=Zl(),Ra=Wo(Ia);if(Ve=arguments,St=this,ur=Ia,Ra){if(kn===o)return Jo(ur);if(Ni)return ud(kn),kn=ts(Es,R),Io(ur)}return kn===o&&(kn=ts(Es,R)),Sn}return fu.cancel=zu,fu.flush=Iu,fu}var sy=Ms(function(C,R){return Rf(C,1,R)}),ay=Ms(function(C,R,be){return Rf(C,Yc(R)||0,be)});function Xc(C){return et(C,q)}function Yd(C,R){if(typeof C!="function"||R!=null&&typeof R!="function")throw new $i(t);var be=function(){var Ve=arguments,St=R?R.apply(this,Ve):Ve[0],Zt=be.cache;if(Zt.has(St))return Zt.get(St);var Sn=C.apply(this,Ve);return be.cache=Zt.set(St,Sn)||Zt,Sn};return be.cache=new(Yd.Cache||tu),be}Yd.Cache=tu;function Zd(C){if(typeof C!="function")throw new $i(t);return function(){var R=arguments;switch(R.length){case 0:return!C.call(this);case 1:return!C.call(this,R[0]);case 2:return!C.call(this,R[0],R[1]);case 3:return!C.call(this,R[0],R[1],R[2])}return!C.apply(this,R)}}function uy(C){return Xd(2,C)}var cy=ad(function(C,R){R=R.length==1&&Ns(R[0])?pr(R[0],ds(hr())):pr(Ga(R,1),ds(hr()));var be=R.length;return Ms(function(Ve){for(var St=-1,Zt=bu(Ve.length,be);++St<Zt;)Ve[St]=R[St].call(this,Ve[St]);return Fe(C,this,Ve)})}),Kd=Ms(function(C,R){var be=Aa(R,Ti(Kd));return et(C,z,o,R,be)}),mp=Ms(function(C,R){var be=Aa(R,Ti(mp));return et(C,ee,o,R,be)}),Hv=Qr(function(C,R){return et(C,S,o,o,o,R)});function wd(C,R){if(typeof C!="function")throw new $i(t);return R=R===o?R:Ls(R),Ms(C,R)}function ly(C,R){if(typeof C!="function")throw new $i(t);return R=R==null?0:Ba(Ls(R),0),Ms(function(be){var Ve=be[R],St=El(be,0,R);return Ve&&vi(St,Ve),Fe(C,this,St)})}function yp(C,R,be){var Ve=!0,St=!0;if(typeof C!="function")throw new $i(t);return ja(be)&&(Ve="leading"in be?!!be.leading:Ve,St="trailing"in be?!!be.trailing:St),Kl(C,R,{leading:Ve,maxWait:R,trailing:St})}function fy(C){return Hd(C,1)}function Xv(C,R){return Kd(jf(R),C)}function Jd(){if(!arguments.length)return[];var C=arguments[0];return Ns(C)?C:[C]}function hy(C){return Ts(C,N)}function dy(C,R){return R=typeof R=="function"?R:o,Ts(C,N,R)}function Qd(C){return Ts(C,v|N)}function Fh(C,R){return R=typeof R=="function"?R:o,Ts(C,v|N,R)}function gy(C,R){return R==null||nc(C,R,Fu(R))}function al(C,R){return C===R||C!==C&&R!==R}var Yv=Xl(ol),Zv=Xl(function(C,R){return C>=R}),Jf=w(function(){return arguments}())?w:function(C){return su(C)&&Rs.call(C,"callee")&&!os.call(C,"callee")},Ns=un.isArray,py=st?ds(st):k;function Nc(C){return C!=null&&jh(C.length)&&!Cl(C)}function Cu(C){return su(C)&&Nc(C)}function vy(C){return C===!0||C===!1||su(C)&&na(C)==hn}var Ic=qc||Pd,my=P?ds(P):ne;function yy(C){return su(C)&&C.nodeType===1&&!yh(C)}function by(C){if(C==null)return!0;if(Nc(C)&&(Ns(C)||typeof C=="string"||typeof C.splice=="function"||Ic(C)||bh(C)||Jf(C)))return!C.length;var R=_i(C);if(R==ci||R==Xt)return!C.size;if(gs(C))return!Rn(C).length;for(var be in C)if(Rs.call(C,be))return!1;return!0}function wy(C,R){return me(C,R)}function Ey(C,R,be){be=typeof be=="function"?be:o;var Ve=be?be(C,R):o;return Ve===o?me(C,R,o,be):!!Ve}function qd(C){if(!su(C))return!1;var R=na(C);return R==ir||R==Fn||typeof C.message=="string"&&typeof C.name=="string"&&!yh(C)}function Kv(C){return typeof C=="number"&&ih(C)}function Cl(C){if(!ja(C))return!1;var R=na(C);return R==Nr||R==Ei||R==cn||R==zn}function bp(C){return typeof C=="number"&&C==Ls(C)}function jh(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=Oe}function ja(C){var R=typeof C;return C!=null&&(R=="object"||R=="function")}function su(C){return C!=null&&typeof C=="object"}var Ed=W?ds(W):ze;function wp(C,R){return C===R||it(C,R,Wn(R))}function Ep(C,R,be){return be=typeof be=="function"?be:o,it(C,R,Wn(R),be)}function Jv(C){return eg(C)&&C!=+C}function Qv(C){if(ps(C))throw new Tr(e);return Pt(C)}function qv(C){return C===null}function xp(C){return C==null}function eg(C){return typeof C=="number"||su(C)&&na(C)==Ot}function yh(C){if(!su(C)||na(C)!=Pi)return!1;var R=fc(C);if(R===null)return!0;var be=Rs.call(R,"constructor")&&R.constructor;return typeof be=="function"&&be instanceof be&&yu.call(be)==ef}var xd=ye?ds(ye):ht;function em(C){return bp(C)&&C>=-Oe&&C<=Oe}var tg=Se?ds(Se):Ft;function zh(C){return typeof C=="string"||!Ns(C)&&su(C)&&na(C)==Rt}function bc(C){return typeof C=="symbol"||su(C)&&na(C)==_t}var bh=Be?ds(Be):tn;function tm(C){return C===o}function nm(C){return su(C)&&_i(C)==at}function Sp(C){return su(C)&&na(C)==ce}var rm=Xl(or),Cp=Xl(function(C,R){return C<=R});function ng(C){if(!C)return[];if(Nc(C))return zh(C)?qt(C):Ma(C);if(Fc&&C[Fc])return cc(C[Fc]());var R=_i(C),be=R==ci?eu:R==Xt?Vu:qf;return be(C)}function Ol(C){if(!C)return C===0?C:0;if(C=Yc(C),C===xe||C===-xe){var R=C<0?-1:1;return R*Le}return C===C?C:0}function Ls(C){var R=Ol(C),be=R%1;return R===R?be?R-be:R:0}function wh(C){return C?_r(Ls(C),0,He):0}function Yc(C){if(typeof C=="number")return C;if(bc(C))return Ge;if(ja(C)){var R=typeof C.valueOf=="function"?C.valueOf():C;C=ja(R)?R+"":R}if(typeof C!="string")return C===0?C:+C;C=eo(C);var be=le.test(C);return be||dt.test(C)?qo(C.slice(2),be?2:8):Q.test(C)?Ge:+C}function Op(C){return yc(C,Rc(C))}function im(C){return C?_r(Ls(C),-Oe,Oe):C===0?C:0}function Ea(C){return C==null?"":Nu(C)}var om=gu(function(C,R){if(gs(R)||Nc(R)){yc(R,Fu(R),C);return}for(var be in R)Rs.call(R,be)&&Xu(C,be,R[be])}),Tp=gu(function(C,R){yc(R,Rc(R),C)}),Sd=gu(function(C,R,be,Ve){yc(R,Rc(R),C,Ve)}),Tl=gu(function(C,R,be,Ve){yc(R,Fu(R),C,Ve)}),Mp=Qr(pc);function xy(C,R){var be=Hu(C);return R==null?be:Eu(be,R)}var Sy=Ms(function(C,R){C=Fi(C);var be=-1,Ve=R.length,St=Ve>2?R[2]:o;for(St&&To(R[0],R[1],St)&&(Ve=1);++be<Ve;)for(var Zt=R[be],Sn=Rc(Zt),kn=-1,ur=Sn.length;++kn<ur;){var ni=Sn[kn],ui=C[ni];(ui===o||al(ui,ya[ni])&&!Rs.call(C,ni))&&(C[ni]=Zt[ni])}return C}),sm=Ms(function(C){return C.push(o,mn),Fe(am,o,C)});function rg(C,R){return Yo(C,hr(R,3),mc)}function wc(C,R){return Yo(C,hr(R,3),il)}function Cy(C,R){return C==null?C:Gl(C,hr(R,3),Rc)}function Oy(C,R){return C==null?C:Lf(C,hr(R,3),Rc)}function Ty(C,R){return C&&mc(C,hr(R,3))}function My(C,R){return C&&il(C,hr(R,3))}function Py(C){return C==null?[]:Fl(C,Fu(C))}function Ay(C){return C==null?[]:Fl(C,Rc(C))}function Pp(C,R,be){var Ve=C==null?o:Ac(C,R);return Ve===o?be:Ve}function _y(C,R){return C!=null&&Zr(C,R,sh)}function Ap(C,R){return C!=null&&Zr(C,R,zc)}var Dy=fh(function(C,R,be){R!=null&&typeof R.toString!="function"&&(R=Ua.call(R)),C[R]=be},lg(ju)),Ny=fh(function(C,R,be){R!=null&&typeof R.toString!="function"&&(R=Ua.call(R)),Rs.call(C,R)?C[R].push(be):C[R]=[be]},hr),Iy=Ms(p);function Fu(C){return Nc(C)?Nf(C):Rn(C)}function Rc(C){return Nc(C)?Nf(C,!0):nr(C)}function _p(C,R){var be={};return R=hr(R,3),mc(C,function(Ve,St,Zt){tc(be,R(Ve,St,Zt),Ve)}),be}function Ry(C,R){var be={};return R=hr(R,3),mc(C,function(Ve,St,Zt){tc(be,St,R(Ve,St,Zt))}),be}var Ly=gu(function(C,R,be){ao(C,R,be)}),am=gu(function(C,R,be,Ve){ao(C,R,be,Ve)}),By=Qr(function(C,R){var be={};if(C==null)return be;var Ve=!1;R=pr(R,function(Zt){return Zt=_c(Zt,C),Ve||(Ve=Zt.length>1),Zt}),yc(C,Ai(C),be),Ve&&(be=Ts(be,v|x|N,dr));for(var St=R.length;St--;)Vl(be,R[St]);return be});function ky(C,R){return yf(C,Zd(hr(R)))}var Gy=Qr(function(C,R){return C==null?{}:_a(C,R)});function yf(C,R){if(C==null)return{};var be=pr(Ai(C),function(Ve){return[Ve]});return R=hr(R),da(C,be,function(Ve,St){return R(Ve,St[0])})}function Dp(C,R,be){R=_c(R,C);var Ve=-1,St=R.length;for(St||(St=1,C=o);++Ve<St;){var Zt=C==null?o:C[ra(R[Ve])];Zt===o&&(Ve=St,Zt=be),C=Cl(Zt)?Zt.call(C):Zt}return C}function bf(C,R,be){return C==null?C:Pu(C,R,be)}function Uh(C,R,be,Ve){return Ve=typeof Ve=="function"?Ve:o,C==null?C:Pu(C,R,be,Ve)}var Np=dd(Fu),Cd=dd(Rc);function Ml(C,R,be){var Ve=Ns(C),St=Ve||Ic(C)||bh(C);if(R=hr(R,4),be==null){var Zt=C&&C.constructor;St?be=Ve?new Zt:[]:ja(C)?be=Cl(Zt)?Hu(fc(C)):{}:be={}}return(St?Mt:mc)(C,function(Sn,kn,ur){return R(be,Sn,kn,ur)}),be}function Qf(C,R){return C==null?!0:Vl(C,R)}function Ip(C,R,be){return C==null?C:bl(C,R,jf(be))}function Rp(C,R,be,Ve){return Ve=typeof Ve=="function"?Ve:o,C==null?C:bl(C,R,jf(be),Ve)}function qf(C){return C==null?[]:Vs(C,Fu(C))}function ig(C){return C==null?[]:Vs(C,Rc(C))}function Od(C,R,be){return be===o&&(be=R,R=o),be!==o&&(be=Yc(be),be=be===be?be:0),R!==o&&(R=Yc(R),R=R===R?R:0),_r(Yc(C),R,be)}function Lp(C,R,be){return R=Ol(R),be===o?(be=R,R=0):be=Ol(be),C=Yc(C),H(C,R,be)}function Bp(C,R,be){if(be&&typeof be!="boolean"&&To(C,R,be)&&(R=be=o),be===o&&(typeof R=="boolean"?(be=R,R=o):typeof C=="boolean"&&(be=C,C=o)),C===o&&R===o?(C=0,R=1):(C=Ol(C),R===o?(R=C,C=0):R=Ol(R)),C>R){var Ve=C;C=R,R=Ve}if(be||C%1||R%1){var St=fl();return bu(C+St*(R-C+ss("1e-"+((St+"").length-1))),R)}return jl(C,R)}var kp=$c(function(C,R,be){return R=R.toLowerCase(),C+(be?pa(R):R)});function pa(C){return cg(Ea(C).toLowerCase())}function Eh(C){return C=Ea(C),C&&C.replace(gt,sa).replace(an,"")}function eh(C,R,be){C=Ea(C),R=Nu(R);var Ve=C.length;be=be===o?Ve:_r(Ls(be),0,Ve);var St=be;return be-=R.length,be>=0&&C.slice(be,St)==R}function Pl(C){return C=Ea(C),C&&Ui.test(C)?C.replace(Vr,Xa):C}function Jl(C){return C=Ea(C),C&&hs.test(C)?C.replace(zo,"\\$&"):C}var og=$c(function(C,R,be){return C+(be?"-":"")+R.toLowerCase()}),Gp=$c(function(C,R,be){return C+(be?" ":"")+R.toLowerCase()}),sg=mf("toLowerCase");function Fp(C,R,be){C=Ea(C),R=Ls(R);var Ve=R?du(C):0;if(!R||Ve>=R)return C;var St=(R-Ve)/2;return Hf(nf(St),be)+C+Hf(Tu(St),be)}function Td(C,R,be){C=Ea(C),R=Ls(R);var Ve=R?du(C):0;return R&&Ve<R?C+Hf(R-Ve,be):C}function ag(C,R,be){C=Ea(C),R=Ls(R);var Ve=R?du(C):0;return R&&Ve<R?Hf(R-Ve,be)+C:C}function Vh(C,R,be){return be||R==null?R=0:R&&(R=+R),qu(Ea(C).replace(ks,""),R||0)}function jp(C,R,be){return(be?To(C,R,be):R===o)?R=1:R=Ls(R),ah(Ea(C),R)}function wf(){var C=arguments,R=Ea(C[0]);return C.length<3?R:R.replace(C[1],C[2])}var Md=$c(function(C,R,be){return C+(be?"_":"")+R.toLowerCase()});function ug(C,R,be){return be&&typeof be!="number"&&To(C,R,be)&&(R=be=o),be=be===o?He:be>>>0,be?(C=Ea(C),C&&(typeof R=="string"||R!=null&&!xd(R))&&(R=Nu(R),!R&&qa(C))?El(qt(C),0,be):C.split(R,be)):[]}var xh=$c(function(C,R,be){return C+(be?" ":"")+cg(R)});function um(C,R,be){return C=Ea(C),be=be==null?0:_r(Ls(be),0,C.length),R=Nu(R),C.slice(be,be+R.length)==R}function zp(C,R,be){var Ve=It.templateSettings;be&&To(C,R,be)&&(R=o),C=Ea(C),R=Sd({},R,Ve,Vt);var St=Sd({},R.imports,Ve.imports,Vt),Zt=Fu(St),Sn=Vs(St,Zt),kn,ur,ni=0,ui=R.interpolate||ln,Ni="__p += '",go=ro((R.escape||ln).source+"|"+ui.source+"|"+(ui===uo?_e:ln).source+"|"+(R.evaluate||ln).source+"|$","g"),Io="//# sourceURL="+(Rs.call(R,"sourceURL")?(R.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++to+"]")+`
`;C.replace(go,function(Wo,Es,Is,zu,Iu,fu){return Is||(Is=zu),Ni+=C.slice(ni,fu).replace(bn,ma),Es&&(kn=!0,Ni+=`' +
__e(`+Es+`) +
'`),Iu&&(ur=!0,Ni+=`';
`+Iu+`;
__p += '`),Is&&(Ni+=`' +
((__t = (`+Is+`)) == null ? '' : __t) +
'`),ni=fu+Wo.length,Wo}),Ni+=`';
`;var Jo=Rs.call(R,"variable")&&R.variable;if(!Jo)Ni=`with (obj) {
`+Ni+`
}
`;else if(ot.test(Jo))throw new Tr(s);Ni=(ur?Ni.replace(Or,""):Ni).replace(Pr,"$1").replace(cr,"$1;"),Ni="function("+(Jo||"obj")+`) {
`+(Jo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(kn?", __e = _.escape":"")+(ur?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ni+`return __p
}`;var ys=Xp(function(){return Sr(Zt,Io+"return "+Ni).apply(o,Sn)});if(ys.source=Ni,qd(ys))throw ys;return ys}function cm(C){return Ea(C).toLowerCase()}function Up(C){return Ea(C).toUpperCase()}function Vp(C,R,be){if(C=Ea(C),C&&(be||R===o))return eo(C);if(!C||!(R=Nu(R)))return C;var Ve=qt(C),St=qt(R),Zt=Oa(Ve,St),Sn=ls(Ve,St)+1;return El(Ve,Zt,Sn).join("")}function Wp(C,R,be){if(C=Ea(C),C&&(be||R===o))return C.slice(0,In(C)+1);if(!C||!(R=Nu(R)))return C;var Ve=qt(C),St=ls(Ve,qt(R))+1;return El(Ve,0,St).join("")}function $p(C,R,be){if(C=Ea(C),C&&(be||R===o))return C.replace(ks,"");if(!C||!(R=Nu(R)))return C;var Ve=qt(C),St=Oa(Ve,qt(R));return El(Ve,St).join("")}function lm(C,R){var be=M,Ve=I;if(ja(R)){var St="separator"in R?R.separator:St;be="length"in R?Ls(R.length):be,Ve="omission"in R?Nu(R.omission):Ve}C=Ea(C);var Zt=C.length;if(qa(C)){var Sn=qt(C);Zt=Sn.length}if(be>=Zt)return C;var kn=be-du(Ve);if(kn<1)return Ve;var ur=Sn?El(Sn,0,kn).join(""):C.slice(0,kn);if(St===o)return ur+Ve;if(Sn&&(kn+=ur.length-kn),xd(St)){if(C.slice(kn).search(St)){var ni,ui=ur;for(St.global||(St=ro(St.source,Ea(Z.exec(St))+"g")),St.lastIndex=0;ni=St.exec(ui);)var Ni=ni.index;ur=ur.slice(0,Ni===o?kn:Ni)}}else if(C.indexOf(Nu(St),kn)!=kn){var go=ur.lastIndexOf(St);go>-1&&(ur=ur.slice(0,go))}return ur+Ve}function fm(C){return C=Ea(C),C&&kr.test(C)?C.replace(ki,br):C}var hm=$c(function(C,R,be){return C+(be?" ":"")+R.toUpperCase()}),cg=mf("toUpperCase");function Hp(C,R,be){return C=Ea(C),R=be?o:R,R===o?Sa(C)?Bt(C):Js(C):C.match(R)||[]}var Xp=Ms(function(C,R){try{return Fe(C,o,R)}catch(be){return qd(be)?be:new Tr(be)}}),dm=Qr(function(C,R){return Mt(R,function(be){be=ra(be),tc(C,be,bd(C[be],C))}),C});function gm(C){var R=C==null?0:C.length,be=hr();return C=R?pr(C,function(Ve){if(typeof Ve[1]!="function")throw new $i(t);return[be(Ve[0]),Ve[1]]}):[],Ms(function(Ve){for(var St=-1;++St<R;){var Zt=C[St];if(Fe(Zt[0],this,Ve))return Fe(Zt[1],this,Ve)}})}function pm(C){return Ya(Ts(C,v))}function lg(C){return function(){return C}}function vm(C,R){return C==null||C!==C?R:C}var mm=lh(),ym=lh(!0);function ju(C){return C}function fg(C){return On(typeof C=="function"?C:Ts(C,v))}function bm(C){return ri(Ts(C,v))}function wm(C,R){return yn(C,Ts(R,v))}var Em=Ms(function(C,R){return function(be){return p(be,C,R)}}),xm=Ms(function(C,R){return function(be){return p(C,be,R)}});function hg(C,R,be){var Ve=Fu(R),St=Fl(R,Ve);be==null&&!(ja(R)&&(St.length||!Ve.length))&&(be=R,R=C,C=this,St=Fl(R,Fu(R)));var Zt=!(ja(be)&&"chain"in be)||!!be.chain,Sn=Cl(C);return Mt(St,function(kn){var ur=R[kn];C[kn]=ur,Sn&&(C.prototype[kn]=function(){var ni=this.__chain__;if(Zt||ni){var ui=C(this.__wrapped__),Ni=ui.__actions__=Ma(this.__actions__);return Ni.push({func:ur,args:arguments,thisArg:C}),ui.__chain__=ni,ui}return ur.apply(C,vi([this.value()],arguments))})}),C}function Sm(){return Mo._===this&&(Mo._=nh),this}function Na(){}function Fy(C){return C=Ls(C),Ms(function(R){return Qs(R,C)})}var Cm=dh(pr),Om=dh(vn),Tm=dh(Zo);function Yp(C){return ms(C)?_s(ra(C)):Ka(C)}function Zp(C){return function(R){return C==null?o:Ac(C,R)}}var Kp=gh(),Jp=gh(!0);function Wh(){return[]}function Pd(){return!1}function Qp(){return{}}function Ad(){return""}function qp(){return!0}function ev(C,R){if(C=Ls(C),C<1||C>Oe)return[];var be=He,Ve=bu(C,He);R=hr(R),C-=He;for(var St=qs(Ve,R);++be<C;)R(be);return St}function tv(C){return Ns(C)?pr(C,ra):bc(C)?[C]:Ma(bs(Ea(C)))}function _d(C){var R=++uu;return Ea(C)+R}var Dd=hh(function(C,R){return C+R},0),nv=Lh("ceil"),dg=hh(function(C,R){return C/R},1),gg=Lh("floor");function pg(C){return C&&C.length?ka(C,ju,ol):o}function vg(C,R){return C&&C.length?ka(C,hr(R,2),ol):o}function mg(C){return ua(C,ju)}function yg(C,R){return ua(C,hr(R,2))}function rv(C){return C&&C.length?ka(C,ju,or):o}function iv(C,R){return C&&C.length?ka(C,hr(R,2),or):o}var ov=hh(function(C,R){return C*R},1),sv=Lh("round"),av=hh(function(C,R){return C-R},0);function uv(C){return C&&C.length?La(C,ju):0}function cv(C,R){return C&&C.length?La(C,hr(R,2)):0}return It.after=pp,It.ary=Hd,It.assign=om,It.assignIn=Tp,It.assignInWith=Sd,It.assignWith=Tl,It.at=Mp,It.before=Xd,It.bind=bd,It.bindAll=dm,It.bindKey=vp,It.castArray=Jd,It.chain=pd,It.chunk=sr,It.compact=Qi,It.concat=ws,It.cond=gm,It.conforms=pm,It.constant=lg,It.countBy=Gv,It.create=xy,It.curry=Su,It.curryRight=$v,It.debounce=Kl,It.defaults=Sy,It.defaultsDeep=sm,It.defer=sy,It.delay=ay,It.difference=ga,It.differenceBy=kt,It.differenceWith=Kt,It.drop=pn,It.dropRight=lr,It.dropRightWhile=ar,It.dropWhile=Cn,It.fill=_n,It.filter=jv,It.flatMap=op,It.flatMapDeep=sp,It.flatMapDepth=md,It.flatten=Tn,It.flattenDeep=Yt,It.flattenDepth=An,It.flip=Xc,It.flow=mm,It.flowRight=ym,It.fromPairs=Er,It.functions=Py,It.functionsIn=Ay,It.groupBy=ap,It.initial=Hr,It.intersection=ai,It.intersectionBy=yo,It.intersectionWith=us,It.invert=Dy,It.invertBy=Ny,It.invokeMap=up,It.iteratee=fg,It.keyBy=Kf,It.keys=Fu,It.keysIn=Rc,It.map=Gh,It.mapKeys=_p,It.mapValues=Ry,It.matches=bm,It.matchesProperty=wm,It.memoize=Yd,It.merge=Ly,It.mergeWith=am,It.method=Em,It.methodOf=xm,It.mixin=hg,It.negate=Zd,It.nthArg=Fy,It.omit=By,It.omitBy=ky,It.once=uy,It.orderBy=cp,It.over=Cm,It.overArgs=cy,It.overEvery=Om,It.overSome=Tm,It.partial=Kd,It.partialRight=mp,It.partition=lp,It.pick=Gy,It.pickBy=yf,It.property=Yp,It.propertyOf=Zp,It.pull=Va,It.pullAll=rc,It.pullAllBy=ph,It.pullAllWith=ic,It.pullAt=oc,It.range=Kp,It.rangeRight=Jp,It.rearg=Hv,It.reject=Vv,It.remove=Hc,It.rest=wd,It.reverse=Yf,It.sampleSize=fp,It.set=bf,It.setWith=Uh,It.shuffle=hp,It.slice=Ig,It.sortBy=gp,It.sortedUniq=Fg,It.sortedUniqBy=jg,It.split=ug,It.spread=ly,It.tail=gd,It.take=Bv,It.takeRight=zg,It.takeRightWhile=vh,It.takeWhile=Ug,It.tap=Jg,It.throttle=yp,It.thru=mh,It.toArray=ng,It.toPairs=Np,It.toPairsIn=Cd,It.toPath=tv,It.toPlainObject=Op,It.transform=Ml,It.unary=fy,It.union=Vg,It.unionBy=Wg,It.unionWith=$g,It.uniq=Hg,It.uniqBy=Da,It.uniqWith=Yl,It.unset=Qf,It.unzip=Bh,It.unzipWith=Fd,It.update=Ip,It.updateWith=Rp,It.values=qf,It.valuesIn=ig,It.without=Xg,It.words=Hp,It.wrap=Xv,It.xor=Yg,It.xorBy=Zg,It.xorWith=Kg,It.zip=jd,It.zipObject=kv,It.zipObjectDeep=zd,It.zipWith=Ud,It.entries=Np,It.entriesIn=Cd,It.extend=Tp,It.extendWith=Sd,hg(It,It),It.add=Dd,It.attempt=Xp,It.camelCase=kp,It.capitalize=pa,It.ceil=nv,It.clamp=Od,It.clone=hy,It.cloneDeep=Qd,It.cloneDeepWith=Fh,It.cloneWith=dy,It.conformsTo=gy,It.deburr=Eh,It.defaultTo=vm,It.divide=dg,It.endsWith=eh,It.eq=al,It.escape=Pl,It.escapeRegExp=Jl,It.every=Fv,It.find=kh,It.findIndex=Nn,It.findKey=rg,It.findLast=ip,It.findLastIndex=sn,It.findLastKey=wc,It.floor=gg,It.forEach=yd,It.forEachRight=Wd,It.forIn=Cy,It.forInRight=Oy,It.forOwn=Ty,It.forOwnRight=My,It.get=Pp,It.gt=Yv,It.gte=Zv,It.has=_y,It.hasIn=Ap,It.head=Ir,It.identity=ju,It.includes=Zf,It.indexOf=ti,It.inRange=Lp,It.invoke=Iy,It.isArguments=Jf,It.isArray=Ns,It.isArrayBuffer=py,It.isArrayLike=Nc,It.isArrayLikeObject=Cu,It.isBoolean=vy,It.isBuffer=Ic,It.isDate=my,It.isElement=yy,It.isEmpty=by,It.isEqual=wy,It.isEqualWith=Ey,It.isError=qd,It.isFinite=Kv,It.isFunction=Cl,It.isInteger=bp,It.isLength=jh,It.isMap=Ed,It.isMatch=wp,It.isMatchWith=Ep,It.isNaN=Jv,It.isNative=Qv,It.isNil=xp,It.isNull=qv,It.isNumber=eg,It.isObject=ja,It.isObjectLike=su,It.isPlainObject=yh,It.isRegExp=xd,It.isSafeInteger=em,It.isSet=tg,It.isString=zh,It.isSymbol=bc,It.isTypedArray=bh,It.isUndefined=tm,It.isWeakMap=nm,It.isWeakSet=Sp,It.join=io,It.kebabCase=og,It.last=fo,It.lastIndexOf=Ko,It.lowerCase=Gp,It.lowerFirst=sg,It.lt=rm,It.lte=Cp,It.max=pg,It.maxBy=vg,It.mean=mg,It.meanBy=yg,It.min=rv,It.minBy=iv,It.stubArray=Wh,It.stubFalse=Pd,It.stubObject=Qp,It.stubString=Ad,It.stubTrue=qp,It.multiply=ov,It.nth=Gs,It.noConflict=Sm,It.noop=Na,It.now=Zl,It.pad=Fp,It.padEnd=Td,It.padStart=ag,It.parseInt=Vh,It.random=Bp,It.reduce=zv,It.reduceRight=Uv,It.repeat=jp,It.replace=wf,It.result=Dp,It.round=sv,It.runInContext=Dt,It.sample=Wv,It.size=dp,It.snakeCase=Md,It.some=$d,It.sortedIndex=Gd,It.sortedIndexBy=Rg,It.sortedIndexOf=Lg,It.sortedLastIndex=Bg,It.sortedLastIndexBy=kg,It.sortedLastIndexOf=Gg,It.startCase=xh,It.startsWith=um,It.subtract=av,It.sum=uv,It.sumBy=cv,It.template=zp,It.times=ev,It.toFinite=Ol,It.toInteger=Ls,It.toLength=wh,It.toLower=cm,It.toNumber=Yc,It.toSafeInteger=im,It.toString=Ea,It.toUpper=Up,It.trim=Vp,It.trimEnd=Wp,It.trimStart=$p,It.truncate=lm,It.unescape=fm,It.uniqueId=_d,It.upperCase=hm,It.upperFirst=cg,It.each=yd,It.eachRight=Wd,It.first=Ir,hg(It,function(){var C={};return mc(It,function(R,be){Rs.call(It.prototype,be)||(C[be]=R)}),C}(),{chain:!1}),It.VERSION=l,Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(C){It[C].placeholder=It}),Mt(["drop","take"],function(C,R){Go.prototype[C]=function(be){be=be===o?1:Ba(Ls(be),0);var Ve=this.__filtered__&&!R?new Go(this):this.clone();return Ve.__filtered__?Ve.__takeCount__=bu(be,Ve.__takeCount__):Ve.__views__.push({size:bu(be,He),type:C+(Ve.__dir__<0?"Right":"")}),Ve},Go.prototype[C+"Right"]=function(be){return this.reverse()[C](be).reverse()}}),Mt(["filter","map","takeWhile"],function(C,R){var be=R+1,Ve=be==se||be==Ce;Go.prototype[C]=function(St){var Zt=this.clone();return Zt.__iteratees__.push({iteratee:hr(St,3),type:be}),Zt.__filtered__=Zt.__filtered__||Ve,Zt}}),Mt(["head","last"],function(C,R){var be="take"+(R?"Right":"");Go.prototype[C]=function(){return this[be](1).value()[0]}}),Mt(["initial","tail"],function(C,R){var be="drop"+(R?"":"Right");Go.prototype[C]=function(){return this.__filtered__?new Go(this):this[be](1)}}),Go.prototype.compact=function(){return this.filter(ju)},Go.prototype.find=function(C){return this.filter(C).head()},Go.prototype.findLast=function(C){return this.reverse().find(C)},Go.prototype.invokeMap=Ms(function(C,R){return typeof C=="function"?new Go(this):this.map(function(be){return p(be,C,R)})}),Go.prototype.reject=function(C){return this.filter(Zd(hr(C)))},Go.prototype.slice=function(C,R){C=Ls(C);var be=this;return be.__filtered__&&(C>0||R<0)?new Go(be):(C<0?be=be.takeRight(-C):C&&(be=be.drop(C)),R!==o&&(R=Ls(R),be=R<0?be.dropRight(-R):be.take(R-C)),be)},Go.prototype.takeRightWhile=function(C){return this.reverse().takeWhile(C).reverse()},Go.prototype.toArray=function(){return this.take(He)},mc(Go.prototype,function(C,R){var be=/^(?:filter|find|map|reject)|While$/.test(R),Ve=/^(?:head|last)$/.test(R),St=It[Ve?"take"+(R=="last"?"Right":""):R],Zt=Ve||/^find/.test(R);St&&(It.prototype[R]=function(){var Sn=this.__wrapped__,kn=Ve?[1]:arguments,ur=Sn instanceof Go,ni=kn[0],ui=ur||Ns(Sn),Ni=function(Es){var Is=St.apply(It,vi([Es],kn));return Ve&&go?Is[0]:Is};ui&&be&&typeof ni=="function"&&ni.length!=1&&(ur=ui=!1);var go=this.__chain__,Io=!!this.__actions__.length,Jo=Zt&&!go,ys=ur&&!Io;if(!Zt&&ui){Sn=ys?Sn:new Go(this);var Wo=C.apply(Sn,kn);return Wo.__actions__.push({func:mh,args:[Ni],thisArg:o}),new wu(Wo,go)}return Jo&&ys?C.apply(this,kn):(Wo=this.thru(Ni),Jo?Ve?Wo.value()[0]:Wo.value():Wo)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(C){var R=Ds[C],be=/^(?:push|sort|unshift)$/.test(C)?"tap":"thru",Ve=/^(?:pop|shift)$/.test(C);It.prototype[C]=function(){var St=arguments;if(Ve&&!this.__chain__){var Zt=this.value();return R.apply(Ns(Zt)?Zt:[],St)}return this[be](function(Sn){return R.apply(Ns(Sn)?Sn:[],St)})}}),mc(Go.prototype,function(C,R){var be=It[R];if(be){var Ve=be.name+"";Rs.call($u,Ve)||($u[Ve]=[]),$u[Ve].push({name:R,func:be})}}),$u[Hl(o,te).name]=[{name:"wrapper",func:o}],Go.prototype.clone=nl,Go.prototype.reverse=ba,Go.prototype.value=_h,It.prototype.at=Qg,It.prototype.chain=qg,It.prototype.commit=vd,It.prototype.next=ep,It.prototype.plant=Vd,It.prototype.reverse=np,It.prototype.toJSON=It.prototype.valueOf=It.prototype.value=rp,It.prototype.first=It.prototype.head,Fc&&(It.prototype[Fc]=tp),It},Dn=nn();Mo._=Dn,a=function(){return Dn}.call(b,u,b,T),a!==o&&(T.exports=a)}).call(this)},9924:function(T,b,u){var a=u(5010),o=u(5979),l=u(5487),r=u(744);function e(t,s){var h=r(t)?a:l;return h(t,o(s,3))}T.exports=e},642:function(T,b,u){var a=u(2813),o=u(1585),l=u(5979);function r(e,t){var s={};return t=l(t,3),o(e,function(h,m,d){a(s,m,t(h,m,d))}),s}T.exports=r},5987:function(T,b,u){var a=u(2659),o=u(302),l=u(6962);function r(e){return e&&e.length?a(e,l,o):void 0}T.exports=r},2858:function(T,b,u){var a=u(2166),o="Expected a function";function l(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(o);var t=function(){var s=arguments,h=e?e.apply(this,s):s[0],m=t.cache;if(m.has(h))return m.get(h);var d=r.apply(this,s);return t.cache=m.set(h,d)||m,d};return t.cache=new(l.Cache||a),t}l.Cache=a,T.exports=l},8440:function(T,b,u){var a=u(97),o=u(3323),l=o(function(r,e,t){a(r,e,t)});T.exports=l},3376:function(T,b,u){var a=u(2659),o=u(3757),l=u(6962);function r(e){return e&&e.length?a(e,l,o):void 0}T.exports=r},3296:function(T,b,u){var a=u(2659),o=u(5979),l=u(3757);function r(e,t){return e&&e.length?a(e,o(t,2),l):void 0}T.exports=r},9958:function(T){function b(){}T.exports=b},5795:function(T,b,u){var a=u(3152),o=function(){return a.Date.now()};T.exports=o},9409:function(T,b,u){var a=u(8832),o=u(522),l=o(function(r,e){return r==null?{}:a(r,e)});T.exports=l},5769:function(T,b,u){var a=u(2310),o=u(6916),l=u(6773),r=u(9171);function e(t){return l(t)?a(r(t)):o(t)}T.exports=e},859:function(T,b,u){var a=u(6106),o=a();T.exports=o},6473:function(T,b,u){var a=u(9861),o=u(4107),l=u(5979),r=u(739),e=u(744);function t(s,h,m){var d=e(s)?a:r,v=arguments.length<3;return d(s,l(h,4),m,v,o)}T.exports=t},617:function(T,b,u){var a=u(6019),o=u(6139),l=u(4665),r=u(7941),e=u(9405),t="[object Map]",s="[object Set]";function h(m){if(m==null)return 0;if(l(m))return r(m)?e(m):m.length;var d=o(m);return d==t||d==s?m.size:a(m).length}T.exports=h},351:function(T,b,u){var a=u(9256),o=u(8506),l=u(2918),r=u(8138),e=l(function(t,s){if(t==null)return[];var h=s.length;return h>1&&r(t,s[0],s[1])?s=[]:h>2&&r(s[0],s[1],s[2])&&(s=[s[0]]),o(t,a(s,1),[])});T.exports=e},4134:function(T){function b(){return[]}T.exports=b},5950:function(T){function b(){return!1}T.exports=b},7341:function(T,b,u){var a=u(168),o=1/0,l=17976931348623157e292;function r(e){if(!e)return e===0?e:0;if(e=a(e),e===o||e===-o){var t=e<0?-1:1;return t*l}return e===e?e:0}T.exports=r},2824:function(T,b,u){var a=u(7341);function o(l){var r=a(l),e=r%1;return r===r?e?r-e:r:0}T.exports=o},168:function(T,b,u){var a=u(3927),o=u(816),l=u(5029),r=0/0,e=/^[-+]0x[0-9a-f]+$/i,t=/^0b[01]+$/i,s=/^0o[0-7]+$/i,h=parseInt;function m(d){if(typeof d=="number")return d;if(l(d))return r;if(o(d)){var v=typeof d.valueOf=="function"?d.valueOf():d;d=o(v)?v+"":v}if(typeof d!="string")return d===0?d:+d;d=a(d);var x=t.test(d);return x||s.test(d)?h(d.slice(2),x?2:8):e.test(d)?r:+d}T.exports=m},480:function(T,b,u){var a=u(5378),o=u(6730);function l(r){return a(r,o(r))}T.exports=l},4140:function(T,b,u){var a=u(230);function o(l){return l==null?"":a(l)}T.exports=o},1116:function(T,b,u){var a=u(4809),o=u(5024),l=u(1585),r=u(5979),e=u(9217),t=u(744),s=u(7835),h=u(9363),m=u(816),d=u(8397);function v(x,N,F){var ae=t(x),$=ae||s(x)||d(x);if(N=r(N,4),F==null){var te=x&&x.constructor;$?F=ae?new te:[]:m(x)?F=h(te)?o(e(x)):{}:F={}}return($?a:l)(x,function(fe,B,he){return N(F,fe,B,he)}),F}T.exports=v},4065:function(T,b,u){var a=u(9256),o=u(2918),l=u(9098),r=u(1590),e=o(function(t){return l(a(t,1,r,!0))});T.exports=e},5708:function(T,b,u){var a=u(4140),o=0;function l(r){var e=++o;return a(r)+e}T.exports=l},1229:function(T,b,u){var a=u(720),o=u(5451);function l(r){return r==null?[]:a(r,o(r))}T.exports=l},5441:function(T,b,u){var a=u(348),o=u(4484);function l(r,e){return o(r||[],e||[],a)}T.exports=l},9370:function(T,b,u){"use strict";u.r(b)},3706:function(T,b,u){"use strict";u.r(b)},6828:function(T,b,u){"use strict";u.r(b)},8031:function(T,b,u){"use strict";u.r(b)},9253:function(T,b,u){"use strict";u.r(b)},9868:function(T,b,u){"use strict";u.r(b)},5053:function(T,b,u){"use strict";u.r(b),u.d(b,{default:function(){return r}});var a=u(4634);function o(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,a.isAnyArray)(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var s=t.fromIndex,h=s===void 0?0:s,m=t.toIndex,d=m===void 0?e.length:m;if(h<0||h>=e.length||!Number.isInteger(h))throw new Error("fromIndex must be a positive integer smaller than length");if(d<=h||d>e.length||!Number.isInteger(d))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var v=e[h],x=h+1;x<d;x++)e[x]>v&&(v=e[x]);return v}function l(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,a.isAnyArray)(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var s=t.fromIndex,h=s===void 0?0:s,m=t.toIndex,d=m===void 0?e.length:m;if(h<0||h>=e.length||!Number.isInteger(h))throw new Error("fromIndex must be a positive integer smaller than length");if(d<=h||d>e.length||!Number.isInteger(d))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var v=e[h],x=h+1;x<d;x++)e[x]<v&&(v=e[x]);return v}function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,a.isAnyArray)(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var s;if(t.output!==void 0){if(!(0,a.isAnyArray)(t.output))throw new TypeError("output option must be an array if specified");s=t.output}else s=new Array(e.length);var h=l(e),m=o(e);if(h===m)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var d=t.min,v=d===void 0?t.autoMinMax?h:0:d,x=t.max,N=x===void 0?t.autoMinMax?m:1:x;if(v>=N)throw new RangeError("min option must be smaller than max option");for(var F=(N-v)/(m-h),ae=0;ae<e.length;ae++)s[ae]=(e[ae]-h)*F+v;return s}}},V={};function J(T){var b=V[T];if(b!==void 0)return b.exports;var u=V[T]={id:T,loaded:!1,exports:{}};return O[T].call(u.exports,u,u.exports,J),u.loaded=!0,u.exports}(function(){J.d=function(T,b){for(var u in b)J.o(b,u)&&!J.o(T,u)&&Object.defineProperty(T,u,{enumerable:!0,get:b[u]})}})(),function(){J.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(T){if(typeof window=="object")return window}}()}(),function(){J.o=function(T,b){return Object.prototype.hasOwnProperty.call(T,b)}}(),function(){J.r=function(T){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(T,"__esModule",{value:!0})}}(),function(){J.nmd=function(T){return T.paths=[],T.children||(T.children=[]),T}}();var ie=J(262);return ie}()})},89550:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=J[0]+ie[0],V[1]=J[1]+ie[1],V}},62189:function(bt){bt.exports=O;function O(V,J){return V[0]=Math.ceil(J[0]),V[1]=Math.ceil(J[1]),V}},76057:function(bt){bt.exports=O;function O(V){var J=new Float32Array(2);return J[0]=V[0],J[1]=V[1],J}},3492:function(bt){bt.exports=O;function O(V,J){return V[0]=J[0],V[1]=J[1],V}},61589:function(bt){bt.exports=O;function O(){var V=new Float32Array(2);return V[0]=0,V[1]=0,V}},77741:function(bt){bt.exports=O;function O(V,J,ie){var T=J[0]*ie[1]-J[1]*ie[0];return V[0]=V[1]=0,V[2]=T,V}},80278:function(bt,O,V){bt.exports=V(27953)},27953:function(bt){bt.exports=O;function O(V,J){var ie=J[0]-V[0],T=J[1]-V[1];return Math.sqrt(ie*ie+T*T)}},49973:function(bt,O,V){bt.exports=V(6773)},6773:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=J[0]/ie[0],V[1]=J[1]/ie[1],V}},56601:function(bt){bt.exports=O;function O(V,J){return V[0]*J[0]+V[1]*J[1]}},89936:function(bt){bt.exports=1e-6},51232:function(bt,O,V){bt.exports=ie;var J=V(89936);function ie(T,b){var u=T[0],a=T[1],o=b[0],l=b[1];return Math.abs(u-o)<=J*Math.max(1,Math.abs(u),Math.abs(o))&&Math.abs(a-l)<=J*Math.max(1,Math.abs(a),Math.abs(l))}},39546:function(bt){bt.exports=O;function O(V,J){return V[0]===J[0]&&V[1]===J[1]}},67744:function(bt){bt.exports=O;function O(V,J){return V[0]=Math.floor(J[0]),V[1]=Math.floor(J[1]),V}},49002:function(bt,O,V){bt.exports=ie;var J=V(61589)();function ie(T,b,u,a,o,l){var r,e;for(b||(b=2),u||(u=0),a?e=Math.min(a*b+u,T.length):e=T.length,r=u;r<e;r+=b)J[0]=T[r],J[1]=T[r+1],o(J,J,l),T[r]=J[0],T[r+1]=J[1];return T}},27388:function(bt){bt.exports=O;function O(V,J){var ie=new Float32Array(2);return ie[0]=V,ie[1]=J,ie}},32644:function(bt,O,V){bt.exports={EPSILON:V(89936),create:V(61589),clone:V(76057),fromValues:V(27388),copy:V(3492),set:V(68854),equals:V(51232),exactEquals:V(39546),add:V(89550),subtract:V(43650),sub:V(45222),multiply:V(79920),mul:V(23113),divide:V(6773),div:V(49973),inverse:V(83793),min:V(20676),max:V(97899),rotate:V(48677),floor:V(67744),ceil:V(62189),round:V(57074),scale:V(47838),scaleAndAdd:V(21066),distance:V(27953),dist:V(80278),squaredDistance:V(14290),sqrDist:V(79569),length:V(37781),len:V(8123),squaredLength:V(26791),sqrLen:V(1791),negate:V(90549),normalize:V(36820),dot:V(56601),cross:V(77741),lerp:V(20577),random:V(85773),transformMat2:V(904),transformMat2d:V(60736),transformMat3:V(60221),transformMat4:V(37674),forEach:V(49002),limit:V(82418)}},83793:function(bt){bt.exports=O;function O(V,J){return V[0]=1/J[0],V[1]=1/J[1],V}},8123:function(bt,O,V){bt.exports=V(37781)},37781:function(bt){bt.exports=O;function O(V){var J=V[0],ie=V[1];return Math.sqrt(J*J+ie*ie)}},20577:function(bt){bt.exports=O;function O(V,J,ie,T){var b=J[0],u=J[1];return V[0]=b+T*(ie[0]-b),V[1]=u+T*(ie[1]-u),V}},82418:function(bt){bt.exports=O;function O(V,J,ie){var T=J[0]*J[0]+J[1]*J[1];if(T>ie*ie){var b=Math.sqrt(T);V[0]=J[0]/b*ie,V[1]=J[1]/b*ie}else V[0]=J[0],V[1]=J[1];return V}},97899:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=Math.max(J[0],ie[0]),V[1]=Math.max(J[1],ie[1]),V}},20676:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=Math.min(J[0],ie[0]),V[1]=Math.min(J[1],ie[1]),V}},23113:function(bt,O,V){bt.exports=V(79920)},79920:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=J[0]*ie[0],V[1]=J[1]*ie[1],V}},90549:function(bt){bt.exports=O;function O(V,J){return V[0]=-J[0],V[1]=-J[1],V}},36820:function(bt){bt.exports=O;function O(V,J){var ie=J[0],T=J[1],b=ie*ie+T*T;return b>0&&(b=1/Math.sqrt(b),V[0]=J[0]*b,V[1]=J[1]*b),V}},85773:function(bt){bt.exports=O;function O(V,J){J=J||1;var ie=Math.random()*2*Math.PI;return V[0]=Math.cos(ie)*J,V[1]=Math.sin(ie)*J,V}},48677:function(bt){bt.exports=O;function O(V,J,ie){var T=Math.cos(ie),b=Math.sin(ie),u=J[0],a=J[1];return V[0]=u*T-a*b,V[1]=u*b+a*T,V}},57074:function(bt){bt.exports=O;function O(V,J){return V[0]=Math.round(J[0]),V[1]=Math.round(J[1]),V}},47838:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=J[0]*ie,V[1]=J[1]*ie,V}},21066:function(bt){bt.exports=O;function O(V,J,ie,T){return V[0]=J[0]+ie[0]*T,V[1]=J[1]+ie[1]*T,V}},68854:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=J,V[1]=ie,V}},79569:function(bt,O,V){bt.exports=V(14290)},1791:function(bt,O,V){bt.exports=V(26791)},14290:function(bt){bt.exports=O;function O(V,J){var ie=J[0]-V[0],T=J[1]-V[1];return ie*ie+T*T}},26791:function(bt){bt.exports=O;function O(V){var J=V[0],ie=V[1];return J*J+ie*ie}},45222:function(bt,O,V){bt.exports=V(43650)},43650:function(bt){bt.exports=O;function O(V,J,ie){return V[0]=J[0]-ie[0],V[1]=J[1]-ie[1],V}},904:function(bt){bt.exports=O;function O(V,J,ie){var T=J[0],b=J[1];return V[0]=ie[0]*T+ie[2]*b,V[1]=ie[1]*T+ie[3]*b,V}},60736:function(bt){bt.exports=O;function O(V,J,ie){var T=J[0],b=J[1];return V[0]=ie[0]*T+ie[2]*b+ie[4],V[1]=ie[1]*T+ie[3]*b+ie[5],V}},60221:function(bt){bt.exports=O;function O(V,J,ie){var T=J[0],b=J[1];return V[0]=ie[0]*T+ie[3]*b+ie[6],V[1]=ie[1]*T+ie[4]*b+ie[7],V}},37674:function(bt){bt.exports=O;function O(V,J,ie){var T=J[0],b=J[1];return V[0]=ie[0]*T+ie[4]*b+ie[12],V[1]=ie[1]*T+ie[5]*b+ie[13],V}},7375:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0});var V=Symbol.for("INJECTION");function J(a,o,l,r){function e(){return r&&!Reflect.hasMetadata(V,this,o)&&Reflect.defineMetadata(V,l(),this,o),Reflect.hasMetadata(V,this,o)?Reflect.getMetadata(V,this,o):l()}function t(s){Reflect.defineMetadata(V,s,this,o)}Object.defineProperty(a,o,{configurable:!0,enumerable:!0,get:e,set:t})}function ie(a,o){return function(l){return function(r,e){var t=function(){return a.get(l)};J(r,e,t,o)}}}O.makePropertyInjectDecorator=ie;function T(a,o){return function(l,r){return function(e,t){var s=function(){return a.getNamed(l,r)};J(e,t,s,o)}}}O.makePropertyInjectNamedDecorator=T;function b(a,o){return function(l,r,e){return function(t,s){var h=function(){return a.getTagged(l,r,e)};J(t,s,h,o)}}}O.makePropertyInjectTaggedDecorator=b;function u(a,o){return function(l){return function(r,e){var t=function(){return a.getAll(l)};J(r,e,t,o)}}}O.makePropertyMultiInjectDecorator=u},84879:function(bt,O,V){"use strict";var J;J={value:!0};var ie=V(7375);function T(b,u){u===void 0&&(u=!0);var a=ie.makePropertyInjectDecorator(b,u),o=ie.makePropertyInjectNamedDecorator(b,u),l=ie.makePropertyInjectTaggedDecorator(b,u),r=ie.makePropertyMultiInjectDecorator(b,u);return{lazyInject:a,lazyInjectNamed:o,lazyInjectTagged:l,lazyMultiInject:r}}O.Z=T},99934:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.tagProperty=O.tagParameter=O.decorate=void 0;var J=V(16674),ie=V(6867);function T(r,e,t,s){var h=ie.TAGGED;u(h,r,e,s,t)}O.tagParameter=T;function b(r,e,t){var s=ie.TAGGED_PROP;u(s,r.constructor,e,t)}O.tagProperty=b;function u(r,e,t,s,h){var m={},d=typeof h=="number",v=h!==void 0&&d?h.toString():t;if(d&&t!==void 0)throw new Error(J.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(r,e)&&(m=Reflect.getMetadata(r,e));var x=m[v];if(!Array.isArray(x))x=[];else for(var N=0,F=x;N<F.length;N++){var ae=F[N];if(ae.key===s.key)throw new Error(J.DUPLICATED_METADATA+" "+ae.key.toString())}x.push(s),m[v]=x,Reflect.defineMetadata(r,m,e)}function a(r,e){Reflect.decorate(r,e)}function o(r,e){return function(t,s){e(t,s,r)}}function l(r,e,t){typeof t=="number"?a([o(t,r)],e):typeof t=="string"?Reflect.decorate([r],e,t):a([r],e)}O.decorate=l},5744:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.inject=O.LazyServiceIdentifer=void 0;var J=V(16674),ie=V(6867),T=V(47738),b=V(99934),u=function(){function o(l){this._cb=l}return o.prototype.unwrap=function(){return this._cb()},o}();O.LazyServiceIdentifer=u;function a(o){return function(l,r,e){if(o===void 0)throw new Error(J.UNDEFINED_INJECT_ANNOTATION(l.name));var t=new T.Metadata(ie.INJECT_TAG,o);typeof e=="number"?b.tagParameter(l,r,e,t):b.tagProperty(l,r,t)}}O.inject=a},64315:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.injectable=void 0;var J=V(16674),ie=V(6867);function T(){return function(b){if(Reflect.hasOwnMetadata(ie.PARAM_TYPES,b))throw new Error(J.DUPLICATED_INJECTABLE_DECORATOR);var u=Reflect.getMetadata(ie.DESIGN_PARAM_TYPES,b)||[];return Reflect.defineMetadata(ie.PARAM_TYPES,u,b),b}}O.injectable=T},71693:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.multiInject=void 0;var J=V(6867),ie=V(47738),T=V(99934);function b(u){return function(a,o,l){var r=new ie.Metadata(J.MULTI_INJECT_TAG,u);typeof l=="number"?T.tagParameter(a,o,l,r):T.tagProperty(a,o,r)}}O.multiInject=b},38085:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.named=void 0;var J=V(6867),ie=V(47738),T=V(99934);function b(u){return function(a,o,l){var r=new ie.Metadata(J.NAMED_TAG,u);typeof l=="number"?T.tagParameter(a,o,l,r):T.tagProperty(a,o,r)}}O.named=b},6515:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.optional=void 0;var J=V(6867),ie=V(47738),T=V(99934);function b(){return function(u,a,o){var l=new ie.Metadata(J.OPTIONAL_TAG,!0);typeof o=="number"?T.tagParameter(u,a,o,l):T.tagProperty(u,a,l)}}O.optional=b},7014:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.postConstruct=void 0;var J=V(16674),ie=V(6867),T=V(47738);function b(){return function(u,a,o){var l=new T.Metadata(ie.POST_CONSTRUCT,a);if(Reflect.hasOwnMetadata(ie.POST_CONSTRUCT,u.constructor))throw new Error(J.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(ie.POST_CONSTRUCT,l,u.constructor)}}O.postConstruct=b},32052:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.tagged=void 0;var J=V(47738),ie=V(99934);function T(b,u){return function(a,o,l){var r=new J.Metadata(b,u);typeof l=="number"?ie.tagParameter(a,o,l,r):ie.tagProperty(a,o,r)}}O.tagged=T},55638:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.targetName=void 0;var J=V(6867),ie=V(47738),T=V(99934);function b(u){return function(a,o,l){var r=new ie.Metadata(J.NAME_TAG,u);T.tagParameter(a,o,l,r)}}O.targetName=b},86757:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.unmanaged=void 0;var J=V(6867),ie=V(47738),T=V(99934);function b(){return function(u,a,o){var l=new ie.Metadata(J.UNMANAGED_TAG,!0);T.tagParameter(u,a,o,l)}}O.unmanaged=b},44290:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Binding=void 0;var J=V(28421),ie=V(37791),T=function(){function b(u,a){this.id=ie.id(),this.activated=!1,this.serviceIdentifier=u,this.scope=a,this.type=J.BindingTypeEnum.Invalid,this.constraint=function(o){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return b.prototype.clone=function(){var u=new b(this.serviceIdentifier,this.scope);return u.activated=u.scope===J.BindingScopeEnum.Singleton?this.activated:!1,u.implementationType=this.implementationType,u.dynamicValue=this.dynamicValue,u.scope=this.scope,u.type=this.type,u.factory=this.factory,u.provider=this.provider,u.constraint=this.constraint,u.onActivation=this.onActivation,u.cache=this.cache,u},b}();O.Binding=T},23184:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BindingCount=void 0;var V={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};O.BindingCount=V},16674:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.STACK_OVERFLOW=O.CIRCULAR_DEPENDENCY_IN_FACTORY=O.POST_CONSTRUCT_ERROR=O.MULTIPLE_POST_CONSTRUCT_METHODS=O.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=O.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=O.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=O.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=O.ARGUMENTS_LENGTH_MISMATCH=O.INVALID_DECORATOR_OPERATION=O.INVALID_TO_SELF_VALUE=O.INVALID_FUNCTION_BINDING=O.INVALID_MIDDLEWARE_RETURN=O.NO_MORE_SNAPSHOTS_AVAILABLE=O.INVALID_BINDING_TYPE=O.NOT_IMPLEMENTED=O.CIRCULAR_DEPENDENCY=O.UNDEFINED_INJECT_ANNOTATION=O.MISSING_INJECT_ANNOTATION=O.MISSING_INJECTABLE_ANNOTATION=O.NOT_REGISTERED=O.CANNOT_UNBIND=O.AMBIGUOUS_MATCH=O.KEY_NOT_FOUND=O.NULL_ARGUMENT=O.DUPLICATED_METADATA=O.DUPLICATED_INJECTABLE_DECORATOR=void 0,O.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",O.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",O.NULL_ARGUMENT="NULL argument",O.KEY_NOT_FOUND="Key Not Found",O.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",O.CANNOT_UNBIND="Could not unbind serviceIdentifier:",O.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",O.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",O.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var V=function(b){return"@inject called with undefined this could mean that the class "+b+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};O.UNDEFINED_INJECT_ANNOTATION=V,O.CIRCULAR_DEPENDENCY="Circular dependency found:",O.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",O.INVALID_BINDING_TYPE="Invalid binding type:",O.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",O.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",O.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",O.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",O.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var J=function(){for(var b=[],u=0;u<arguments.length;u++)b[u]=arguments[u];return"The number of constructor arguments in the derived class "+(b[0]+" must be >= than the number of constructor arguments of its base class.")};O.ARGUMENTS_LENGTH_MISMATCH=J,O.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",O.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",O.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",O.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",O.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var ie=function(){for(var b=[],u=0;u<arguments.length;u++)b[u]=arguments[u];return"@postConstruct error in class "+b[0]+": "+b[1]};O.POST_CONSTRUCT_ERROR=ie;var T=function(){for(var b=[],u=0;u<arguments.length;u++)b[u]=arguments[u];return"It looks like there is a circular dependency "+("in one of the '"+b[0]+"' bindings. Please investigate bindings with")+("service identifier '"+b[1]+"'.")};O.CIRCULAR_DEPENDENCY_IN_FACTORY=T,O.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.TargetTypeEnum=O.BindingTypeEnum=O.BindingScopeEnum=void 0;var V={Request:"Request",Singleton:"Singleton",Transient:"Transient"};O.BindingScopeEnum=V;var J={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};O.BindingTypeEnum=J;var ie={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};O.TargetTypeEnum=ie},6867:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.NON_CUSTOM_TAG_KEYS=O.POST_CONSTRUCT=O.DESIGN_PARAM_TYPES=O.PARAM_TYPES=O.TAGGED_PROP=O.TAGGED=O.MULTI_INJECT_TAG=O.INJECT_TAG=O.OPTIONAL_TAG=O.UNMANAGED_TAG=O.NAME_TAG=O.NAMED_TAG=void 0,O.NAMED_TAG="named",O.NAME_TAG="name",O.UNMANAGED_TAG="unmanaged",O.OPTIONAL_TAG="optional",O.INJECT_TAG="inject",O.MULTI_INJECT_TAG="multi_inject",O.TAGGED="inversify:tagged",O.TAGGED_PROP="inversify:tagged_props",O.PARAM_TYPES="inversify:paramtypes",O.DESIGN_PARAM_TYPES="design:paramtypes",O.POST_CONSTRUCT="post_construct";function V(){return[O.INJECT_TAG,O.MULTI_INJECT_TAG,O.NAME_TAG,O.UNMANAGED_TAG,O.NAMED_TAG,O.OPTIONAL_TAG]}O.NON_CUSTOM_TAG_KEYS=V()},51389:function(bt,O,V){"use strict";var J=this&&this.__awaiter||function(x,N,F,ae){function $(te){return te instanceof F?te:new F(function(fe){fe(te)})}return new(F||(F=Promise))(function(te,fe){function B(ee){try{z(ae.next(ee))}catch(pe){fe(pe)}}function he(ee){try{z(ae.throw(ee))}catch(pe){fe(pe)}}function z(ee){ee.done?te(ee.value):$(ee.value).then(B,he)}z((ae=ae.apply(x,N||[])).next())})},ie=this&&this.__generator||function(x,N){var F={label:0,sent:function(){if(te[0]&1)throw te[1];return te[1]},trys:[],ops:[]},ae,$,te,fe;return fe={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(fe[Symbol.iterator]=function(){return this}),fe;function B(z){return function(ee){return he([z,ee])}}function he(z){if(ae)throw new TypeError("Generator is already executing.");for(;F;)try{if(ae=1,$&&(te=z[0]&2?$.return:z[0]?$.throw||((te=$.return)&&te.call($),0):$.next)&&!(te=te.call($,z[1])).done)return te;switch($=0,te&&(z=[z[0]&2,te.value]),z[0]){case 0:case 1:te=z;break;case 4:return F.label++,{value:z[1],done:!1};case 5:F.label++,$=z[1],z=[0];continue;case 7:z=F.ops.pop(),F.trys.pop();continue;default:if(te=F.trys,!(te=te.length>0&&te[te.length-1])&&(z[0]===6||z[0]===2)){F=0;continue}if(z[0]===3&&(!te||z[1]>te[0]&&z[1]<te[3])){F.label=z[1];break}if(z[0]===6&&F.label<te[1]){F.label=te[1],te=z;break}if(te&&F.label<te[2]){F.label=te[2],F.ops.push(z);break}te[2]&&F.ops.pop(),F.trys.pop();continue}z=N.call(x,F)}catch(ee){z=[6,ee],$=0}finally{ae=te=0}if(z[0]&5)throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}},T=this&&this.__spreadArray||function(x,N){for(var F=0,ae=N.length,$=x.length;F<ae;F++,$++)x[$]=N[F];return x};Object.defineProperty(O,"__esModule",{value:!0}),O.Container=void 0;var b=V(44290),u=V(16674),a=V(28421),o=V(6867),l=V(51377),r=V(86311),e=V(7478),t=V(50302),s=V(37791),h=V(55800),m=V(85700),d=V(80175),v=function(){function x(N){this._appliedMiddleware=[];var F=N||{};if(typeof F!="object")throw new Error(""+u.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(F.defaultScope===void 0)F.defaultScope=a.BindingScopeEnum.Transient;else if(F.defaultScope!==a.BindingScopeEnum.Singleton&&F.defaultScope!==a.BindingScopeEnum.Transient&&F.defaultScope!==a.BindingScopeEnum.Request)throw new Error(""+u.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(F.autoBindInjectable===void 0)F.autoBindInjectable=!1;else if(typeof F.autoBindInjectable!="boolean")throw new Error(""+u.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(F.skipBaseClassChecks===void 0)F.skipBaseClassChecks=!1;else if(typeof F.skipBaseClassChecks!="boolean")throw new Error(""+u.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:F.autoBindInjectable,defaultScope:F.defaultScope,skipBaseClassChecks:F.skipBaseClassChecks},this.id=s.id(),this._bindingDictionary=new d.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return x.merge=function(N,F){for(var ae=[],$=2;$<arguments.length;$++)ae[$-2]=arguments[$];var te=new x,fe=T([N,F],ae).map(function(z){return r.getBindingDictionary(z)}),B=r.getBindingDictionary(te);function he(z,ee){z.traverse(function(pe,S){S.forEach(function(q){ee.add(q.serviceIdentifier,q.clone())})})}return fe.forEach(function(z){he(z,B)}),te},x.prototype.load=function(){for(var N=[],F=0;F<arguments.length;F++)N[F]=arguments[F];for(var ae=this._getContainerModuleHelpersFactory(),$=0,te=N;$<te.length;$++){var fe=te[$],B=ae(fe.id);fe.registry(B.bindFunction,B.unbindFunction,B.isboundFunction,B.rebindFunction)}},x.prototype.loadAsync=function(){for(var N=[],F=0;F<arguments.length;F++)N[F]=arguments[F];return J(this,void 0,void 0,function(){var ae,$,te,fe,B;return ie(this,function(he){switch(he.label){case 0:ae=this._getContainerModuleHelpersFactory(),$=0,te=N,he.label=1;case 1:return $<te.length?(fe=te[$],B=ae(fe.id),[4,fe.registry(B.bindFunction,B.unbindFunction,B.isboundFunction,B.rebindFunction)]):[3,4];case 2:he.sent(),he.label=3;case 3:return $++,[3,1];case 4:return[2]}})})},x.prototype.unload=function(){for(var N=this,F=[],ae=0;ae<arguments.length;ae++)F[ae]=arguments[ae];var $=function(te){return function(fe){return fe.moduleId===te}};F.forEach(function(te){var fe=$(te.id);N._bindingDictionary.removeByCondition(fe)})},x.prototype.bind=function(N){var F=this.options.defaultScope||a.BindingScopeEnum.Transient,ae=new b.Binding(N,F);return this._bindingDictionary.add(N,ae),new t.BindingToSyntax(ae)},x.prototype.rebind=function(N){return this.unbind(N),this.bind(N)},x.prototype.unbind=function(N){try{this._bindingDictionary.remove(N)}catch(F){throw new Error(u.CANNOT_UNBIND+" "+h.getServiceIdentifierAsString(N))}},x.prototype.unbindAll=function(){this._bindingDictionary=new d.Lookup},x.prototype.isBound=function(N){var F=this._bindingDictionary.hasKey(N);return!F&&this.parent&&(F=this.parent.isBound(N)),F},x.prototype.isBoundNamed=function(N,F){return this.isBoundTagged(N,o.NAMED_TAG,F)},x.prototype.isBoundTagged=function(N,F,ae){var $=!1;if(this._bindingDictionary.hasKey(N)){var te=this._bindingDictionary.get(N),fe=r.createMockRequest(this,N,F,ae);$=te.some(function(B){return B.constraint(fe)})}return!$&&this.parent&&($=this.parent.isBoundTagged(N,F,ae)),$},x.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},x.prototype.restore=function(){var N=this._snapshots.pop();if(N===void 0)throw new Error(u.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=N.bindings,this._middleware=N.middleware},x.prototype.createChild=function(N){var F=new x(N||this.options);return F.parent=this,F},x.prototype.applyMiddleware=function(){for(var N=[],F=0;F<arguments.length;F++)N[F]=arguments[F];this._appliedMiddleware=this._appliedMiddleware.concat(N);var ae=this._middleware?this._middleware:this._planAndResolve();this._middleware=N.reduce(function($,te){return te($)},ae)},x.prototype.applyCustomMetadataReader=function(N){this._metadataReader=N},x.prototype.get=function(N){return this._get(!1,!1,a.TargetTypeEnum.Variable,N)},x.prototype.getTagged=function(N,F,ae){return this._get(!1,!1,a.TargetTypeEnum.Variable,N,F,ae)},x.prototype.getNamed=function(N,F){return this.getTagged(N,o.NAMED_TAG,F)},x.prototype.getAll=function(N){return this._get(!0,!0,a.TargetTypeEnum.Variable,N)},x.prototype.getAllTagged=function(N,F,ae){return this._get(!1,!0,a.TargetTypeEnum.Variable,N,F,ae)},x.prototype.getAllNamed=function(N,F){return this.getAllTagged(N,o.NAMED_TAG,F)},x.prototype.resolve=function(N){var F=this.createChild();return F.bind(N).toSelf(),this._appliedMiddleware.forEach(function(ae){F.applyMiddleware(ae)}),F.get(N)},x.prototype._getContainerModuleHelpersFactory=function(){var N=this,F=function(B,he){B._binding.moduleId=he},ae=function(B){return function(he){var z=N.bind.bind(N),ee=z(he);return F(ee,B),ee}},$=function(B){return function(he){var z=N.unbind.bind(N);z(he)}},te=function(B){return function(he){var z=N.isBound.bind(N);return z(he)}},fe=function(B){return function(he){var z=N.rebind.bind(N),ee=z(he);return F(ee,B),ee}};return function(B){return{bindFunction:ae(B),isboundFunction:te(B),rebindFunction:fe(B),unbindFunction:$(B)}}},x.prototype._get=function(N,F,ae,$,te,fe){var B=null,he={avoidConstraints:N,contextInterceptor:function(z){return z},isMultiInject:F,key:te,serviceIdentifier:$,targetType:ae,value:fe};if(this._middleware){if(B=this._middleware(he),B==null)throw new Error(u.INVALID_MIDDLEWARE_RETURN)}else B=this._planAndResolve()(he);return B},x.prototype._planAndResolve=function(){var N=this;return function(F){var ae=r.plan(N._metadataReader,N,F.isMultiInject,F.targetType,F.serviceIdentifier,F.key,F.value,F.avoidConstraints);ae=F.contextInterceptor(ae);var $=e.resolve(ae);return $}},x}();O.Container=v},33244:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.AsyncContainerModule=O.ContainerModule=void 0;var J=V(37791),ie=function(){function b(u){this.id=J.id(),this.registry=u}return b}();O.ContainerModule=ie;var T=function(){function b(u){this.id=J.id(),this.registry=u}return b}();O.AsyncContainerModule=T},85700:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.ContainerSnapshot=void 0;var V=function(){function J(){}return J.of=function(ie,T){var b=new J;return b.bindings=ie,b.middleware=T,b},J}();O.ContainerSnapshot=V},80175:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Lookup=void 0;var J=V(16674),ie=function(){function T(){this._map=new Map}return T.prototype.getMap=function(){return this._map},T.prototype.add=function(b,u){if(b==null)throw new Error(J.NULL_ARGUMENT);if(u==null)throw new Error(J.NULL_ARGUMENT);var a=this._map.get(b);a!==void 0?(a.push(u),this._map.set(b,a)):this._map.set(b,[u])},T.prototype.get=function(b){if(b==null)throw new Error(J.NULL_ARGUMENT);var u=this._map.get(b);if(u!==void 0)return u;throw new Error(J.KEY_NOT_FOUND)},T.prototype.remove=function(b){if(b==null)throw new Error(J.NULL_ARGUMENT);if(!this._map.delete(b))throw new Error(J.KEY_NOT_FOUND)},T.prototype.removeByCondition=function(b){var u=this;this._map.forEach(function(a,o){var l=a.filter(function(r){return!b(r)});l.length>0?u._map.set(o,l):u._map.delete(o)})},T.prototype.hasKey=function(b){if(b==null)throw new Error(J.NULL_ARGUMENT);return this._map.has(b)},T.prototype.clone=function(){var b=new T;return this._map.forEach(function(u,a){u.forEach(function(o){return b.add(a,o.clone())})}),b},T.prototype.traverse=function(b){this._map.forEach(function(u,a){b(a,u)})},T}();O.Lookup=ie},86700:function(bt,O,V){"use strict";var J;J={value:!0},J=J=J=J=J=J=J=J=J=J=J=J=J=J=J=O.f3=O.t6=J=O.b2=J=J=J=J=J=O.W2=J=void 0;var ie=V(6867);J=ie;var T=V(51389);Object.defineProperty(O,"W2",{enumerable:!0,get:function(){return T.Container}});var b=V(28421);J={enumerable:!0,get:function(){return b.BindingScopeEnum}},J={enumerable:!0,get:function(){return b.BindingTypeEnum}},J={enumerable:!0,get:function(){return b.TargetTypeEnum}};var u=V(33244);J={enumerable:!0,get:function(){return u.AsyncContainerModule}},J={enumerable:!0,get:function(){return u.ContainerModule}};var a=V(64315);Object.defineProperty(O,"b2",{enumerable:!0,get:function(){return a.injectable}});var o=V(32052);J={enumerable:!0,get:function(){return o.tagged}};var l=V(38085);Object.defineProperty(O,"t6",{enumerable:!0,get:function(){return l.named}});var r=V(5744);Object.defineProperty(O,"f3",{enumerable:!0,get:function(){return r.inject}}),J={enumerable:!0,get:function(){return r.LazyServiceIdentifer}};var e=V(6515);J={enumerable:!0,get:function(){return e.optional}};var t=V(86757);J={enumerable:!0,get:function(){return t.unmanaged}};var s=V(71693);J={enumerable:!0,get:function(){return s.multiInject}};var h=V(55638);J={enumerable:!0,get:function(){return h.targetName}};var m=V(7014);J={enumerable:!0,get:function(){return m.postConstruct}};var d=V(51377);J={enumerable:!0,get:function(){return d.MetadataReader}};var v=V(37791);J={enumerable:!0,get:function(){return v.id}};var x=V(99934);J={enumerable:!0,get:function(){return x.decorate}};var N=V(80758);J={enumerable:!0,get:function(){return N.traverseAncerstors}},J={enumerable:!0,get:function(){return N.taggedConstraint}},J={enumerable:!0,get:function(){return N.namedConstraint}},J={enumerable:!0,get:function(){return N.typeConstraint}};var F=V(55800);J={enumerable:!0,get:function(){return F.getServiceIdentifierAsString}};var ae=V(70600);J={enumerable:!0,get:function(){return ae.multiBindToService}}},95228:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Context=void 0;var J=V(37791),ie=function(){function T(b){this.id=J.id(),this.container=b}return T.prototype.addPlan=function(b){this.plan=b},T.prototype.setCurrentRequest=function(b){this.currentRequest=b},T}();O.Context=ie},47738:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Metadata=void 0;var J=V(6867),ie=function(){function T(b,u){this.key=b,this.value=u}return T.prototype.toString=function(){return this.key===J.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},T}();O.Metadata=ie},51377:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.MetadataReader=void 0;var J=V(6867),ie=function(){function T(){}return T.prototype.getConstructorMetadata=function(b){var u=Reflect.getMetadata(J.PARAM_TYPES,b),a=Reflect.getMetadata(J.TAGGED,b);return{compilerGeneratedMetadata:u,userGeneratedMetadata:a||{}}},T.prototype.getPropertiesMetadata=function(b){var u=Reflect.getMetadata(J.TAGGED_PROP,b)||[];return u},T}();O.MetadataReader=ie},55314:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Plan=void 0;var V=function(){function J(ie,T){this.parentContext=ie,this.rootRequest=T}return J}();O.Plan=V},86311:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.getBindingDictionary=O.createMockRequest=O.plan=void 0;var J=V(23184),ie=V(16674),T=V(28421),b=V(6867),u=V(54623),a=V(55800),o=V(95228),l=V(47738),r=V(55314),e=V(6e3),t=V(6748),s=V(18924);function h($){return $._bindingDictionary}O.getBindingDictionary=h;function m($,te,fe,B,he,z){var ee=$?b.MULTI_INJECT_TAG:b.INJECT_TAG,pe=new l.Metadata(ee,fe),S=new s.Target(te,B,fe,pe);if(he!==void 0){var q=new l.Metadata(he,z);S.metadata.push(q)}return S}function d($,te,fe,B,he){var z=N(fe.container,he.serviceIdentifier),ee=[];return z.length===J.BindingCount.NoBindingsAvailable&&fe.container.options.autoBindInjectable&&typeof he.serviceIdentifier=="function"&&$.getConstructorMetadata(he.serviceIdentifier).compilerGeneratedMetadata&&(fe.container.bind(he.serviceIdentifier).toSelf(),z=N(fe.container,he.serviceIdentifier)),te?ee=z:ee=z.filter(function(pe){var S=new t.Request(pe.serviceIdentifier,fe,B,pe,he);return pe.constraint(S)}),v(he.serviceIdentifier,ee,he,fe.container),ee}function v($,te,fe,B){switch(te.length){case J.BindingCount.NoBindingsAvailable:if(fe.isOptional())return te;var he=a.getServiceIdentifierAsString($),z=ie.NOT_REGISTERED;throw z+=a.listMetadataForTarget(he,fe),z+=a.listRegisteredBindingsForServiceIdentifier(B,he,N),new Error(z);case J.BindingCount.OnlyOneBindingAvailable:if(!fe.isArray())return te;case J.BindingCount.MultipleBindingsAvailable:default:if(fe.isArray())return te;var he=a.getServiceIdentifierAsString($),z=ie.AMBIGUOUS_MATCH+" "+he;throw z+=a.listRegisteredBindingsForServiceIdentifier(B,he,N),new Error(z)}}function x($,te,fe,B,he,z){var ee,pe;if(he===null){ee=d($,te,B,null,z),pe=new t.Request(fe,B,null,ee,z);var S=new r.Plan(B,pe);B.addPlan(S)}else ee=d($,te,B,he,z),pe=he.addChildRequest(z.serviceIdentifier,ee,z);ee.forEach(function(q){var M=null;if(z.isArray())M=pe.addChildRequest(q.serviceIdentifier,q,z);else{if(q.cache)return;M=pe}if(q.type===T.BindingTypeEnum.Instance&&q.implementationType!==null){var I=e.getDependencies($,q.implementationType);if(!B.container.options.skipBaseClassChecks){var j=e.getBaseClassDependencyCount($,q.implementationType);if(I.length<j){var ue=ie.ARGUMENTS_LENGTH_MISMATCH(e.getFunctionName(q.implementationType));throw new Error(ue)}}I.forEach(function(se){x($,!1,se.serviceIdentifier,B,M,se)})}})}function N($,te){var fe=[],B=h($);return B.hasKey(te)?fe=B.get(te):$.parent!==null&&(fe=N($.parent,te)),fe}function F($,te,fe,B,he,z,ee,pe){pe===void 0&&(pe=!1);var S=new o.Context(te),q=m(fe,B,he,"",z,ee);try{return x($,pe,he,S,null,q),S}catch(M){throw u.isStackOverflowExeption(M)&&S.plan&&a.circularDependencyToException(S.plan.rootRequest),M}}O.plan=F;function ae($,te,fe,B){var he=new s.Target(T.TargetTypeEnum.Variable,"",te,new l.Metadata(fe,B)),z=new o.Context($),ee=new t.Request(te,z,null,[],he);return ee}O.createMockRequest=ae},88460:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.QueryableString=void 0;var V=function(){function J(ie){this.str=ie}return J.prototype.startsWith=function(ie){return this.str.indexOf(ie)===0},J.prototype.endsWith=function(ie){var T="",b=ie.split("").reverse().join("");return T=this.str.split("").reverse().join(""),this.startsWith.call({str:T},b)},J.prototype.contains=function(ie){return this.str.indexOf(ie)!==-1},J.prototype.equals=function(ie){return this.str===ie},J.prototype.value=function(){return this.str},J}();O.QueryableString=V},6e3:function(bt,O,V){"use strict";var J=this&&this.__spreadArray||function(d,v){for(var x=0,N=v.length,F=d.length;x<N;x++,F++)d[F]=v[x];return d};Object.defineProperty(O,"__esModule",{value:!0}),O.getFunctionName=O.getBaseClassDependencyCount=O.getDependencies=void 0;var ie=V(5744),T=V(16674),b=V(28421),u=V(6867),a=V(55800);Object.defineProperty(O,"getFunctionName",{enumerable:!0,get:function(){return a.getFunctionName}});var o=V(18924);function l(d,v){var x=a.getFunctionName(v),N=r(d,x,v,!1);return N}O.getDependencies=l;function r(d,v,x,N){var F=d.getConstructorMetadata(x),ae=F.compilerGeneratedMetadata;if(ae===void 0){var $=T.MISSING_INJECTABLE_ANNOTATION+" "+v+".";throw new Error($)}var te=F.userGeneratedMetadata,fe=Object.keys(te),B=x.length===0&&fe.length>0,he=fe.length>x.length,z=B||he?fe.length:x.length,ee=t(N,v,ae,te,z),pe=s(d,x),S=J(J([],ee),pe);return S}function e(d,v,x,N,F){var ae=F[d.toString()]||[],$=m(ae),te=$.unmanaged!==!0,fe=N[d],B=$.inject||$.multiInject;if(fe=B||fe,fe instanceof ie.LazyServiceIdentifer&&(fe=fe.unwrap()),te){var he=fe===Object,z=fe===Function,ee=fe===void 0,pe=he||z||ee;if(!v&&pe){var S=T.MISSING_INJECT_ANNOTATION+" argument "+d+" in class "+x+".";throw new Error(S)}var q=new o.Target(b.TargetTypeEnum.ConstructorArgument,$.targetName,fe);return q.metadata=ae,q}return null}function t(d,v,x,N,F){for(var ae=[],$=0;$<F;$++){var te=$,fe=e(te,d,v,x,N);fe!==null&&ae.push(fe)}return ae}function s(d,v){for(var x=d.getPropertiesMetadata(v),N=[],F=Object.keys(x),ae=0,$=F;ae<$.length;ae++){var te=$[ae],fe=x[te],B=m(x[te]),he=B.targetName||te,z=B.inject||B.multiInject,ee=new o.Target(b.TargetTypeEnum.ClassProperty,he,z);ee.metadata=fe,N.push(ee)}var pe=Object.getPrototypeOf(v.prototype).constructor;if(pe!==Object){var S=s(d,pe);N=J(J([],N),S)}return N}function h(d,v){var x=Object.getPrototypeOf(v.prototype).constructor;if(x!==Object){var N=a.getFunctionName(x),F=r(d,N,x,!0),ae=F.map(function(fe){return fe.metadata.filter(function(B){return B.key===u.UNMANAGED_TAG})}),$=[].concat.apply([],ae).length,te=F.length-$;return te>0?te:h(d,x)}else return 0}O.getBaseClassDependencyCount=h;function m(d){var v={};return d.forEach(function(x){v[x.key.toString()]=x.value}),{inject:v[u.INJECT_TAG],multiInject:v[u.MULTI_INJECT_TAG],targetName:v[u.NAME_TAG],unmanaged:v[u.UNMANAGED_TAG]}}},6748:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Request=void 0;var J=V(37791),ie=function(){function T(b,u,a,o,l){this.id=J.id(),this.serviceIdentifier=b,this.parentContext=u,this.parentRequest=a,this.target=l,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=a===null?new Map:null}return T.prototype.addChildRequest=function(b,u,a){var o=new T(b,this.parentContext,this,u,a);return this.childRequests.push(o),o},T}();O.Request=ie},18924:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.Target=void 0;var J=V(6867),ie=V(37791),T=V(47738),b=V(88460),u=function(){function a(o,l,r,e){this.id=ie.id(),this.type=o,this.serviceIdentifier=r,this.name=new b.QueryableString(l||""),this.metadata=new Array;var t=null;typeof e=="string"?t=new T.Metadata(J.NAMED_TAG,e):e instanceof T.Metadata&&(t=e),t!==null&&this.metadata.push(t)}return a.prototype.hasTag=function(o){for(var l=0,r=this.metadata;l<r.length;l++){var e=r[l];if(e.key===o)return!0}return!1},a.prototype.isArray=function(){return this.hasTag(J.MULTI_INJECT_TAG)},a.prototype.matchesArray=function(o){return this.matchesTag(J.MULTI_INJECT_TAG)(o)},a.prototype.isNamed=function(){return this.hasTag(J.NAMED_TAG)},a.prototype.isTagged=function(){return this.metadata.some(function(o){return J.NON_CUSTOM_TAG_KEYS.every(function(l){return o.key!==l})})},a.prototype.isOptional=function(){return this.matchesTag(J.OPTIONAL_TAG)(!0)},a.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(o){return o.key===J.NAMED_TAG})[0]:null},a.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(o){return J.NON_CUSTOM_TAG_KEYS.every(function(l){return o.key!==l})}):null},a.prototype.matchesNamedTag=function(o){return this.matchesTag(J.NAMED_TAG)(o)},a.prototype.matchesTag=function(o){var l=this;return function(r){for(var e=0,t=l.metadata;e<t.length;e++){var s=t[e];if(s.key===o&&s.value===r)return!0}return!1}},a}();O.Target=u},52279:function(bt,O,V){"use strict";var J=this&&this.__spreadArray||function(r,e){for(var t=0,s=e.length,h=r.length;t<s;t++,h++)r[h]=e[t];return r};Object.defineProperty(O,"__esModule",{value:!0}),O.resolveInstance=void 0;var ie=V(16674),T=V(28421),b=V(6867);function u(r,e,t){var s=e.filter(function(m){return m.target!==null&&m.target.type===T.TargetTypeEnum.ClassProperty}),h=s.map(t);return s.forEach(function(m,d){var v="";v=m.target.name.value();var x=h[d];r[v]=x}),r}function a(r,e){return new(r.bind.apply(r,J([void 0],e)))}function o(r,e){if(Reflect.hasMetadata(b.POST_CONSTRUCT,r)){var t=Reflect.getMetadata(b.POST_CONSTRUCT,r);try{e[t.value]()}catch(s){throw new Error(ie.POST_CONSTRUCT_ERROR(r.name,s.message))}}}function l(r,e,t){var s=null;if(e.length>0){var h=e.filter(function(d){return d.target!==null&&d.target.type===T.TargetTypeEnum.ConstructorArgument}),m=h.map(t);s=a(r,m),s=u(s,e,t)}else s=new r;return o(r,s),s}O.resolveInstance=l},7478:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.resolve=void 0;var J=V(16674),ie=V(28421),T=V(54623),b=V(55800),u=V(52279),a=function(r,e,t){try{return t()}catch(s){throw T.isStackOverflowExeption(s)?new Error(J.CIRCULAR_DEPENDENCY_IN_FACTORY(r,e.toString())):s}},o=function(r){return function(e){e.parentContext.setCurrentRequest(e);var t=e.bindings,s=e.childRequests,h=e.target&&e.target.isArray(),m=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(h&&m)return s.map(function(ae){var $=o(r);return $(ae)});var d=null;if(e.target.isOptional()&&t.length===0)return;var v=t[0],x=v.scope===ie.BindingScopeEnum.Singleton,N=v.scope===ie.BindingScopeEnum.Request;if(x&&v.activated)return v.cache;if(N&&r!==null&&r.has(v.id))return r.get(v.id);if(v.type===ie.BindingTypeEnum.ConstantValue)d=v.cache,v.activated=!0;else if(v.type===ie.BindingTypeEnum.Function)d=v.cache,v.activated=!0;else if(v.type===ie.BindingTypeEnum.Constructor)d=v.implementationType;else if(v.type===ie.BindingTypeEnum.DynamicValue&&v.dynamicValue!==null)d=a("toDynamicValue",v.serviceIdentifier,function(){return v.dynamicValue(e.parentContext)});else if(v.type===ie.BindingTypeEnum.Factory&&v.factory!==null)d=a("toFactory",v.serviceIdentifier,function(){return v.factory(e.parentContext)});else if(v.type===ie.BindingTypeEnum.Provider&&v.provider!==null)d=a("toProvider",v.serviceIdentifier,function(){return v.provider(e.parentContext)});else if(v.type===ie.BindingTypeEnum.Instance&&v.implementationType!==null)d=u.resolveInstance(v.implementationType,s,o(r));else{var F=b.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(J.INVALID_BINDING_TYPE+" "+F)}return typeof v.onActivation=="function"&&(d=v.onActivation(e.parentContext,d)),x&&(v.cache=d,v.activated=!0),N&&r!==null&&!r.has(v.id)&&r.set(v.id,d),d}};function l(r){var e=o(r.plan.rootRequest.requestScope);return e(r.plan.rootRequest)}O.resolve=l},83366:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BindingInSyntax=void 0;var J=V(28421),ie=V(71325),T=function(){function b(u){this._binding=u}return b.prototype.inRequestScope=function(){return this._binding.scope=J.BindingScopeEnum.Request,new ie.BindingWhenOnSyntax(this._binding)},b.prototype.inSingletonScope=function(){return this._binding.scope=J.BindingScopeEnum.Singleton,new ie.BindingWhenOnSyntax(this._binding)},b.prototype.inTransientScope=function(){return this._binding.scope=J.BindingScopeEnum.Transient,new ie.BindingWhenOnSyntax(this._binding)},b}();O.BindingInSyntax=T},99812:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BindingInWhenOnSyntax=void 0;var J=V(83366),ie=V(51811),T=V(98370),b=function(){function u(a){this._binding=a,this._bindingWhenSyntax=new T.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new ie.BindingOnSyntax(this._binding),this._bindingInSyntax=new J.BindingInSyntax(a)}return u.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},u.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},u.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},u.prototype.when=function(a){return this._bindingWhenSyntax.when(a)},u.prototype.whenTargetNamed=function(a){return this._bindingWhenSyntax.whenTargetNamed(a)},u.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},u.prototype.whenTargetTagged=function(a,o){return this._bindingWhenSyntax.whenTargetTagged(a,o)},u.prototype.whenInjectedInto=function(a){return this._bindingWhenSyntax.whenInjectedInto(a)},u.prototype.whenParentNamed=function(a){return this._bindingWhenSyntax.whenParentNamed(a)},u.prototype.whenParentTagged=function(a,o){return this._bindingWhenSyntax.whenParentTagged(a,o)},u.prototype.whenAnyAncestorIs=function(a){return this._bindingWhenSyntax.whenAnyAncestorIs(a)},u.prototype.whenNoAncestorIs=function(a){return this._bindingWhenSyntax.whenNoAncestorIs(a)},u.prototype.whenAnyAncestorNamed=function(a){return this._bindingWhenSyntax.whenAnyAncestorNamed(a)},u.prototype.whenAnyAncestorTagged=function(a,o){return this._bindingWhenSyntax.whenAnyAncestorTagged(a,o)},u.prototype.whenNoAncestorNamed=function(a){return this._bindingWhenSyntax.whenNoAncestorNamed(a)},u.prototype.whenNoAncestorTagged=function(a,o){return this._bindingWhenSyntax.whenNoAncestorTagged(a,o)},u.prototype.whenAnyAncestorMatches=function(a){return this._bindingWhenSyntax.whenAnyAncestorMatches(a)},u.prototype.whenNoAncestorMatches=function(a){return this._bindingWhenSyntax.whenNoAncestorMatches(a)},u.prototype.onActivation=function(a){return this._bindingOnSyntax.onActivation(a)},u}();O.BindingInWhenOnSyntax=b},51811:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BindingOnSyntax=void 0;var J=V(98370),ie=function(){function T(b){this._binding=b}return T.prototype.onActivation=function(b){return this._binding.onActivation=b,new J.BindingWhenSyntax(this._binding)},T}();O.BindingOnSyntax=ie},50302:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BindingToSyntax=void 0;var J=V(16674),ie=V(28421),T=V(99812),b=V(71325),u=function(){function a(o){this._binding=o}return a.prototype.to=function(o){return this._binding.type=ie.BindingTypeEnum.Instance,this._binding.implementationType=o,new T.BindingInWhenOnSyntax(this._binding)},a.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+J.INVALID_TO_SELF_VALUE);var o=this._binding.serviceIdentifier;return this.to(o)},a.prototype.toConstantValue=function(o){return this._binding.type=ie.BindingTypeEnum.ConstantValue,this._binding.cache=o,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=ie.BindingScopeEnum.Singleton,new b.BindingWhenOnSyntax(this._binding)},a.prototype.toDynamicValue=function(o){return this._binding.type=ie.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=o,this._binding.implementationType=null,new T.BindingInWhenOnSyntax(this._binding)},a.prototype.toConstructor=function(o){return this._binding.type=ie.BindingTypeEnum.Constructor,this._binding.implementationType=o,this._binding.scope=ie.BindingScopeEnum.Singleton,new b.BindingWhenOnSyntax(this._binding)},a.prototype.toFactory=function(o){return this._binding.type=ie.BindingTypeEnum.Factory,this._binding.factory=o,this._binding.scope=ie.BindingScopeEnum.Singleton,new b.BindingWhenOnSyntax(this._binding)},a.prototype.toFunction=function(o){if(typeof o!="function")throw new Error(J.INVALID_FUNCTION_BINDING);var l=this.toConstantValue(o);return this._binding.type=ie.BindingTypeEnum.Function,this._binding.scope=ie.BindingScopeEnum.Singleton,l},a.prototype.toAutoFactory=function(o){return this._binding.type=ie.BindingTypeEnum.Factory,this._binding.factory=function(l){var r=function(){return l.container.get(o)};return r},this._binding.scope=ie.BindingScopeEnum.Singleton,new b.BindingWhenOnSyntax(this._binding)},a.prototype.toProvider=function(o){return this._binding.type=ie.BindingTypeEnum.Provider,this._binding.provider=o,this._binding.scope=ie.BindingScopeEnum.Singleton,new b.BindingWhenOnSyntax(this._binding)},a.prototype.toService=function(o){this.toDynamicValue(function(l){return l.container.get(o)})},a}();O.BindingToSyntax=u},71325:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BindingWhenOnSyntax=void 0;var J=V(51811),ie=V(98370),T=function(){function b(u){this._binding=u,this._bindingWhenSyntax=new ie.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new J.BindingOnSyntax(this._binding)}return b.prototype.when=function(u){return this._bindingWhenSyntax.when(u)},b.prototype.whenTargetNamed=function(u){return this._bindingWhenSyntax.whenTargetNamed(u)},b.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},b.prototype.whenTargetTagged=function(u,a){return this._bindingWhenSyntax.whenTargetTagged(u,a)},b.prototype.whenInjectedInto=function(u){return this._bindingWhenSyntax.whenInjectedInto(u)},b.prototype.whenParentNamed=function(u){return this._bindingWhenSyntax.whenParentNamed(u)},b.prototype.whenParentTagged=function(u,a){return this._bindingWhenSyntax.whenParentTagged(u,a)},b.prototype.whenAnyAncestorIs=function(u){return this._bindingWhenSyntax.whenAnyAncestorIs(u)},b.prototype.whenNoAncestorIs=function(u){return this._bindingWhenSyntax.whenNoAncestorIs(u)},b.prototype.whenAnyAncestorNamed=function(u){return this._bindingWhenSyntax.whenAnyAncestorNamed(u)},b.prototype.whenAnyAncestorTagged=function(u,a){return this._bindingWhenSyntax.whenAnyAncestorTagged(u,a)},b.prototype.whenNoAncestorNamed=function(u){return this._bindingWhenSyntax.whenNoAncestorNamed(u)},b.prototype.whenNoAncestorTagged=function(u,a){return this._bindingWhenSyntax.whenNoAncestorTagged(u,a)},b.prototype.whenAnyAncestorMatches=function(u){return this._bindingWhenSyntax.whenAnyAncestorMatches(u)},b.prototype.whenNoAncestorMatches=function(u){return this._bindingWhenSyntax.whenNoAncestorMatches(u)},b.prototype.onActivation=function(u){return this._bindingOnSyntax.onActivation(u)},b}();O.BindingWhenOnSyntax=T},98370:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.BindingWhenSyntax=void 0;var J=V(51811),ie=V(80758),T=function(){function b(u){this._binding=u}return b.prototype.when=function(u){return this._binding.constraint=u,new J.BindingOnSyntax(this._binding)},b.prototype.whenTargetNamed=function(u){return this._binding.constraint=ie.namedConstraint(u),new J.BindingOnSyntax(this._binding)},b.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(u){var a=u.target!==null&&!u.target.isNamed()&&!u.target.isTagged();return a},new J.BindingOnSyntax(this._binding)},b.prototype.whenTargetTagged=function(u,a){return this._binding.constraint=ie.taggedConstraint(u)(a),new J.BindingOnSyntax(this._binding)},b.prototype.whenInjectedInto=function(u){return this._binding.constraint=function(a){return ie.typeConstraint(u)(a.parentRequest)},new J.BindingOnSyntax(this._binding)},b.prototype.whenParentNamed=function(u){return this._binding.constraint=function(a){return ie.namedConstraint(u)(a.parentRequest)},new J.BindingOnSyntax(this._binding)},b.prototype.whenParentTagged=function(u,a){return this._binding.constraint=function(o){return ie.taggedConstraint(u)(a)(o.parentRequest)},new J.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorIs=function(u){return this._binding.constraint=function(a){return ie.traverseAncerstors(a,ie.typeConstraint(u))},new J.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorIs=function(u){return this._binding.constraint=function(a){return!ie.traverseAncerstors(a,ie.typeConstraint(u))},new J.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorNamed=function(u){return this._binding.constraint=function(a){return ie.traverseAncerstors(a,ie.namedConstraint(u))},new J.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorNamed=function(u){return this._binding.constraint=function(a){return!ie.traverseAncerstors(a,ie.namedConstraint(u))},new J.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorTagged=function(u,a){return this._binding.constraint=function(o){return ie.traverseAncerstors(o,ie.taggedConstraint(u)(a))},new J.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorTagged=function(u,a){return this._binding.constraint=function(o){return!ie.traverseAncerstors(o,ie.taggedConstraint(u)(a))},new J.BindingOnSyntax(this._binding)},b.prototype.whenAnyAncestorMatches=function(u){return this._binding.constraint=function(a){return ie.traverseAncerstors(a,u)},new J.BindingOnSyntax(this._binding)},b.prototype.whenNoAncestorMatches=function(u){return this._binding.constraint=function(a){return!ie.traverseAncerstors(a,u)},new J.BindingOnSyntax(this._binding)},b}();O.BindingWhenSyntax=T},80758:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.typeConstraint=O.namedConstraint=O.taggedConstraint=O.traverseAncerstors=void 0;var J=V(6867),ie=V(47738),T=function(o,l){var r=o.parentRequest;return r!==null?l(r)?!0:T(r,l):!1};O.traverseAncerstors=T;var b=function(o){return function(l){var r=function(e){return e!==null&&e.target!==null&&e.target.matchesTag(o)(l)};return r.metaData=new ie.Metadata(o,l),r}};O.taggedConstraint=b;var u=b(J.NAMED_TAG);O.namedConstraint=u;var a=function(o){return function(l){var r=null;if(l!==null)if(r=l.bindings[0],typeof o=="string"){var e=r.serviceIdentifier;return e===o}else{var t=l.bindings[0].implementationType;return o===t}return!1}};O.typeConstraint=a},70600:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.multiBindToService=void 0;var V=function(J){return function(ie){return function(){for(var T=[],b=0;b<arguments.length;b++)T[b]=arguments[b];return T.forEach(function(u){return J.bind(u).toService(ie)})}}};O.multiBindToService=V},54623:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.isStackOverflowExeption=void 0;var J=V(16674);function ie(T){return T instanceof RangeError||T.message===J.STACK_OVERFLOW}O.isStackOverflowExeption=ie},37791:function(bt,O){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.id=void 0;var V=0;function J(){return V++}O.id=J},55800:function(bt,O,V){"use strict";Object.defineProperty(O,"__esModule",{value:!0}),O.circularDependencyToException=O.listMetadataForTarget=O.listRegisteredBindingsForServiceIdentifier=O.getServiceIdentifierAsString=O.getFunctionName=void 0;var J=V(16674);function ie(r){if(typeof r=="function"){var e=r;return e.name}else{if(typeof r=="symbol")return r.toString();var e=r;return e}}O.getServiceIdentifierAsString=ie;function T(r,e,t){var s="",h=t(r,e);return h.length!==0&&(s=`
Registered bindings:`,h.forEach(function(m){var d="Object";m.implementationType!==null&&(d=l(m.implementationType)),s=s+`
 `+d,m.constraint.metaData&&(s=s+" - "+m.constraint.metaData)})),s}O.listRegisteredBindingsForServiceIdentifier=T;function b(r,e){return r.parentRequest===null?!1:r.parentRequest.serviceIdentifier===e?!0:b(r.parentRequest,e)}function u(r){function e(s,h){h===void 0&&(h=[]);var m=ie(s.serviceIdentifier);return h.push(m),s.parentRequest!==null?e(s.parentRequest,h):h}var t=e(r);return t.reverse().join(" --> ")}function a(r){r.childRequests.forEach(function(e){if(b(e,e.serviceIdentifier)){var t=u(e);throw new Error(J.CIRCULAR_DEPENDENCY+" "+t)}else a(e)})}O.circularDependencyToException=a;function o(r,e){if(e.isTagged()||e.isNamed()){var t="",s=e.getNamedTag(),h=e.getCustomTags();return s!==null&&(t+=s.toString()+`
`),h!==null&&h.forEach(function(m){t+=m.toString()+`
`})," "+r+`
 `+r+" - "+t}else return" "+r}O.listMetadataForTarget=o;function l(r){if(r.name)return r.name;var e=r.toString(),t=e.match(/^function\s*([^\s(]+)/);return t?t[1]:"Anonymous function: "+e}O.getFunctionName=l},44091:function(bt,O,V){"use strict";V.r(O),V.d(O,{isAnyArray:function(){return ie}});const J=Object.prototype.toString;function ie(T){const b=J.call(T);return b.endsWith("Array]")&&!b.includes("Big")}},19755:function(bt,O){var V,J;(function(ie,T){"use strict";typeof bt.exports=="object"?bt.exports=ie.document?T(ie,!0):function(b){if(!b.document)throw new Error("jQuery requires a window with a document");return T(b)}:T(ie)})(typeof window!="undefined"?window:this,function(ie,T){"use strict";var b=[],u=Object.getPrototypeOf,a=b.slice,o=b.flat?function(X){return b.flat.call(X)}:function(X){return b.concat.apply([],X)},l=b.push,r=b.indexOf,e={},t=e.toString,s=e.hasOwnProperty,h=s.toString,m=h.call(Object),d={},v=function(ve){return typeof ve=="function"&&typeof ve.nodeType!="number"&&typeof ve.item!="function"},x=function(ve){return ve!=null&&ve===ve.window},N=ie.document,F={type:!0,src:!0,nonce:!0,noModule:!0};function ae(X,ve,Ie){Ie=Ie||N;var ke,st,P=Ie.createElement("script");if(P.text=X,ve)for(ke in F)st=ve[ke]||ve.getAttribute&&ve.getAttribute(ke),st&&P.setAttribute(ke,st);Ie.head.appendChild(P).parentNode.removeChild(P)}function $(X){return X==null?X+"":typeof X=="object"||typeof X=="function"?e[t.call(X)]||"object":typeof X}var te="3.7.1",fe=/HTML$/i,B=function(X,ve){return new B.fn.init(X,ve)};B.fn=B.prototype={jquery:te,constructor:B,length:0,toArray:function(){return a.call(this)},get:function(X){return X==null?a.call(this):X<0?this[X+this.length]:this[X]},pushStack:function(X){var ve=B.merge(this.constructor(),X);return ve.prevObject=this,ve},each:function(X){return B.each(this,X)},map:function(X){return this.pushStack(B.map(this,function(ve,Ie){return X.call(ve,Ie,ve)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(B.grep(this,function(X,ve){return(ve+1)%2}))},odd:function(){return this.pushStack(B.grep(this,function(X,ve){return ve%2}))},eq:function(X){var ve=this.length,Ie=+X+(X<0?ve:0);return this.pushStack(Ie>=0&&Ie<ve?[this[Ie]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:b.sort,splice:b.splice},B.extend=B.fn.extend=function(){var X,ve,Ie,ke,st,P,W=arguments[0]||{},ye=1,Se=arguments.length,Be=!1;for(typeof W=="boolean"&&(Be=W,W=arguments[ye]||{},ye++),typeof W!="object"&&!v(W)&&(W={}),ye===Se&&(W=this,ye--);ye<Se;ye++)if((X=arguments[ye])!=null)for(ve in X)ke=X[ve],!(ve==="__proto__"||W===ke)&&(Be&&ke&&(B.isPlainObject(ke)||(st=Array.isArray(ke)))?(Ie=W[ve],st&&!Array.isArray(Ie)?P=[]:!st&&!B.isPlainObject(Ie)?P={}:P=Ie,st=!1,W[ve]=B.extend(Be,P,ke)):ke!==void 0&&(W[ve]=ke));return W},B.extend({expando:"jQuery"+(te+Math.random()).replace(/\D/g,""),isReady:!0,error:function(X){throw new Error(X)},noop:function(){},isPlainObject:function(X){var ve,Ie;return!X||t.call(X)!=="[object Object]"?!1:(ve=u(X),ve?(Ie=s.call(ve,"constructor")&&ve.constructor,typeof Ie=="function"&&h.call(Ie)===m):!0)},isEmptyObject:function(X){var ve;for(ve in X)return!1;return!0},globalEval:function(X,ve,Ie){ae(X,{nonce:ve&&ve.nonce},Ie)},each:function(X,ve){var Ie,ke=0;if(he(X))for(Ie=X.length;ke<Ie&&ve.call(X[ke],ke,X[ke])!==!1;ke++);else for(ke in X)if(ve.call(X[ke],ke,X[ke])===!1)break;return X},text:function(X){var ve,Ie="",ke=0,st=X.nodeType;if(!st)for(;ve=X[ke++];)Ie+=B.text(ve);return st===1||st===11?X.textContent:st===9?X.documentElement.textContent:st===3||st===4?X.nodeValue:Ie},makeArray:function(X,ve){var Ie=ve||[];return X!=null&&(he(Object(X))?B.merge(Ie,typeof X=="string"?[X]:X):l.call(Ie,X)),Ie},inArray:function(X,ve,Ie){return ve==null?-1:r.call(ve,X,Ie)},isXMLDoc:function(X){var ve=X&&X.namespaceURI,Ie=X&&(X.ownerDocument||X).documentElement;return!fe.test(ve||Ie&&Ie.nodeName||"HTML")},merge:function(X,ve){for(var Ie=+ve.length,ke=0,st=X.length;ke<Ie;ke++)X[st++]=ve[ke];return X.length=st,X},grep:function(X,ve,Ie){for(var ke,st=[],P=0,W=X.length,ye=!Ie;P<W;P++)ke=!ve(X[P],P),ke!==ye&&st.push(X[P]);return st},map:function(X,ve,Ie){var ke,st,P=0,W=[];if(he(X))for(ke=X.length;P<ke;P++)st=ve(X[P],P,Ie),st!=null&&W.push(st);else for(P in X)st=ve(X[P],P,Ie),st!=null&&W.push(st);return o(W)},guid:1,support:d}),typeof Symbol=="function"&&(B.fn[Symbol.iterator]=b[Symbol.iterator]),B.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(X,ve){e["[object "+ve+"]"]=ve.toLowerCase()});function he(X){var ve=!!X&&"length"in X&&X.length,Ie=$(X);return v(X)||x(X)?!1:Ie==="array"||ve===0||typeof ve=="number"&&ve>0&&ve-1 in X}function z(X,ve){return X.nodeName&&X.nodeName.toLowerCase()===ve.toLowerCase()}var ee=b.pop,pe=b.sort,S=b.splice,q="[\\x20\\t\\r\\n\\f]",M=new RegExp("^"+q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+q+"+$","g");B.contains=function(X,ve){var Ie=ve&&ve.parentNode;return X===Ie||!!(Ie&&Ie.nodeType===1&&(X.contains?X.contains(Ie):X.compareDocumentPosition&&X.compareDocumentPosition(Ie)&16))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function j(X,ve){return ve?X==="\0"?"\uFFFD":X.slice(0,-1)+"\\"+X.charCodeAt(X.length-1).toString(16)+" ":"\\"+X}B.escapeSelector=function(X){return(X+"").replace(I,j)};var ue=N,se=l;(function(){var X,ve,Ie,ke,st,P=se,W,ye,Se,Be,Fe,qe=B.expando,Mt=0,Lt=0,vn=ds(),Zn=ds(),Qn=ds(),jn=ds(),pr=function(qt,In){return qt===In&&(st=!0),0},vi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",co="(?:\\\\[\\da-fA-F]{1,6}"+q+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",di="\\["+q+"*("+co+")(?:"+q+"*([*^$|!~]?=)"+q+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+co+"))|)"+q+"*\\]",Zo=":("+co+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+di+")*)|.*)\\)|)",qi=new RegExp(q+"+","g"),is=new RegExp("^"+q+"*,"+q+"*"),Js=new RegExp("^"+q+"*([>+~]|"+q+")"+q+"*"),Yo=new RegExp(q+"|>"),Ss=new RegExp(Zo),ko=new RegExp("^"+co+"$"),vs={ID:new RegExp("^#("+co+")"),CLASS:new RegExp("^\\.("+co+")"),TAG:new RegExp("^("+co+"|[*])"),ATTR:new RegExp("^"+di),PSEUDO:new RegExp("^"+Zo),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+q+"*(even|odd|(([+-]|)(\\d*)n|)"+q+"*(?:([+-]|)"+q+"*(\\d+)|))"+q+"*\\)|)","i"),bool:new RegExp("^(?:"+vi+")$","i"),needsContext:new RegExp("^"+q+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+q+"*((?:-\\d)?\\d*)"+q+"*\\)|)(?=[^-]|$)","i")},xa=/^(?:input|select|textarea|button)$/i,ua=/^h\d$/i,_s=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Pa=/[+~]/,Us=new RegExp("\\\\[\\da-fA-F]{1,6}"+q+"?|\\\\([^\\r\\n\\f])","g"),ta=function(qt,In){var br="0x"+qt.slice(1)-65536;return In||(br<0?String.fromCharCode(br+65536):String.fromCharCode(br>>10|55296,br&1023|56320))},La=function(){ma()},qs=cc(function(qt){return qt.disabled===!0&&z(qt,"fieldset")},{dir:"parentNode",next:"legend"});function mu(){try{return W.activeElement}catch(qt){}}try{P.apply(b=a.call(ue.childNodes),ue.childNodes),b[ue.childNodes.length].nodeType}catch(qt){P={apply:function(In,br){se.apply(In,a.call(br))},call:function(In){se.apply(In,a.call(arguments,1))}}}function eo(qt,In,br,Mr){var Yr,Bt,nn,Dn,Dt,en,un,Jn=In&&In.ownerDocument,Tr=In?In.nodeType:9;if(br=br||[],typeof qt!="string"||!qt||Tr!==1&&Tr!==9&&Tr!==11)return br;if(!Mr&&(ma(In),In=In||W,Se)){if(Tr!==11&&(Dt=_s.exec(qt)))if(Yr=Dt[1]){if(Tr===9)if(nn=In.getElementById(Yr)){if(nn.id===Yr)return P.call(br,nn),br}else return br;else if(Jn&&(nn=Jn.getElementById(Yr))&&eo.contains(In,nn)&&nn.id===Yr)return P.call(br,nn),br}else{if(Dt[2])return P.apply(br,In.getElementsByTagName(qt)),br;if((Yr=Dt[3])&&In.getElementsByClassName)return P.apply(br,In.getElementsByClassName(Yr)),br}if(!jn[qt+" "]&&(!Be||!Be.test(qt))){if(un=qt,Jn=In,Tr===1&&(Yo.test(qt)||Js.test(qt))){for(Jn=Pa.test(qt)&&Xa(In.parentNode)||In,(Jn!=In||!d.scope)&&((Dn=In.getAttribute("id"))?Dn=B.escapeSelector(Dn):In.setAttribute("id",Dn=qe)),en=qa(qt),Bt=en.length;Bt--;)en[Bt]=(Dn?"#"+Dn:":scope")+" "+Sa(en[Bt]);un=en.join(",")}try{return P.apply(br,Jn.querySelectorAll(un)),br}catch(Sr){jn(qt,!0)}finally{Dn===qe&&In.removeAttribute("id")}}}return du(qt.replace(M,"$1"),In,br,Mr)}function ds(){var qt=[];function In(br,Mr){return qt.push(br+" ")>ve.cacheLength&&delete In[qt.shift()],In[br+" "]=Mr}return In}function Vs(qt){return qt[qe]=!0,qt}function oa(qt){var In=W.createElement("fieldset");try{return!!qt(In)}catch(br){return!1}finally{In.parentNode&&In.parentNode.removeChild(In),In=null}}function Oa(qt){return function(In){return z(In,"input")&&In.type===qt}}function ls(qt){return function(In){return(z(In,"input")||z(In,"button"))&&In.type===qt}}function Ha(qt){return function(In){return"form"in In?In.parentNode&&In.disabled===!1?"label"in In?"label"in In.parentNode?In.parentNode.disabled===qt:In.disabled===qt:In.isDisabled===qt||In.isDisabled!==!qt&&qs(In)===qt:In.disabled===qt:"label"in In?In.disabled===qt:!1}}function sa(qt){return Vs(function(In){return In=+In,Vs(function(br,Mr){for(var Yr,Bt=qt([],br.length,In),nn=Bt.length;nn--;)br[Yr=Bt[nn]]&&(br[Yr]=!(Mr[Yr]=br[Yr]))})})}function Xa(qt){return qt&&typeof qt.getElementsByTagName!="undefined"&&qt}function ma(qt){var In,br=qt?qt.ownerDocument||qt:ue;return br==W||br.nodeType!==9||!br.documentElement||(W=br,ye=W.documentElement,Se=!B.isXMLDoc(W),Fe=ye.matches||ye.webkitMatchesSelector||ye.msMatchesSelector,ye.msMatchesSelector&&ue!=W&&(In=W.defaultView)&&In.top!==In&&In.addEventListener("unload",La),d.getById=oa(function(Mr){return ye.appendChild(Mr).id=B.expando,!W.getElementsByName||!W.getElementsByName(B.expando).length}),d.disconnectedMatch=oa(function(Mr){return Fe.call(Mr,"*")}),d.scope=oa(function(){return W.querySelectorAll(":scope")}),d.cssHas=oa(function(){try{return W.querySelector(":has(*,:jqfake)"),!1}catch(Mr){return!0}}),d.getById?(ve.filter.ID=function(Mr){var Yr=Mr.replace(Us,ta);return function(Bt){return Bt.getAttribute("id")===Yr}},ve.find.ID=function(Mr,Yr){if(typeof Yr.getElementById!="undefined"&&Se){var Bt=Yr.getElementById(Mr);return Bt?[Bt]:[]}}):(ve.filter.ID=function(Mr){var Yr=Mr.replace(Us,ta);return function(Bt){var nn=typeof Bt.getAttributeNode!="undefined"&&Bt.getAttributeNode("id");return nn&&nn.value===Yr}},ve.find.ID=function(Mr,Yr){if(typeof Yr.getElementById!="undefined"&&Se){var Bt,nn,Dn,Dt=Yr.getElementById(Mr);if(Dt){if(Bt=Dt.getAttributeNode("id"),Bt&&Bt.value===Mr)return[Dt];for(Dn=Yr.getElementsByName(Mr),nn=0;Dt=Dn[nn++];)if(Bt=Dt.getAttributeNode("id"),Bt&&Bt.value===Mr)return[Dt]}return[]}}),ve.find.TAG=function(Mr,Yr){return typeof Yr.getElementsByTagName!="undefined"?Yr.getElementsByTagName(Mr):Yr.querySelectorAll(Mr)},ve.find.CLASS=function(Mr,Yr){if(typeof Yr.getElementsByClassName!="undefined"&&Se)return Yr.getElementsByClassName(Mr)},Be=[],oa(function(Mr){var Yr;ye.appendChild(Mr).innerHTML="<a id='"+qe+"' href='' disabled='disabled'></a><select id='"+qe+"-\r\\' disabled='disabled'><option selected=''></option></select>",Mr.querySelectorAll("[selected]").length||Be.push("\\["+q+"*(?:value|"+vi+")"),Mr.querySelectorAll("[id~="+qe+"-]").length||Be.push("~="),Mr.querySelectorAll("a#"+qe+"+*").length||Be.push(".#.+[+~]"),Mr.querySelectorAll(":checked").length||Be.push(":checked"),Yr=W.createElement("input"),Yr.setAttribute("type","hidden"),Mr.appendChild(Yr).setAttribute("name","D"),ye.appendChild(Mr).disabled=!0,Mr.querySelectorAll(":disabled").length!==2&&Be.push(":enabled",":disabled"),Yr=W.createElement("input"),Yr.setAttribute("name",""),Mr.appendChild(Yr),Mr.querySelectorAll("[name='']").length||Be.push("\\["+q+"*name"+q+"*="+q+`*(?:''|"")`)}),d.cssHas||Be.push(":has"),Be=Be.length&&new RegExp(Be.join("|")),pr=function(Mr,Yr){if(Mr===Yr)return st=!0,0;var Bt=!Mr.compareDocumentPosition-!Yr.compareDocumentPosition;return Bt||(Bt=(Mr.ownerDocument||Mr)==(Yr.ownerDocument||Yr)?Mr.compareDocumentPosition(Yr):1,Bt&1||!d.sortDetached&&Yr.compareDocumentPosition(Mr)===Bt?Mr===W||Mr.ownerDocument==ue&&eo.contains(ue,Mr)?-1:Yr===W||Yr.ownerDocument==ue&&eo.contains(ue,Yr)?1:ke?r.call(ke,Mr)-r.call(ke,Yr):0:Bt&4?-1:1)}),W}eo.matches=function(qt,In){return eo(qt,null,null,In)},eo.matchesSelector=function(qt,In){if(ma(qt),Se&&!jn[In+" "]&&(!Be||!Be.test(In)))try{var br=Fe.call(qt,In);if(br||d.disconnectedMatch||qt.document&&qt.document.nodeType!==11)return br}catch(Mr){jn(In,!0)}return eo(In,W,null,[qt]).length>0},eo.contains=function(qt,In){return(qt.ownerDocument||qt)!=W&&ma(qt),B.contains(qt,In)},eo.attr=function(qt,In){(qt.ownerDocument||qt)!=W&&ma(qt);var br=ve.attrHandle[In.toLowerCase()],Mr=br&&s.call(ve.attrHandle,In.toLowerCase())?br(qt,In,!Se):void 0;return Mr!==void 0?Mr:qt.getAttribute(In)},eo.error=function(qt){throw new Error("Syntax error, unrecognized expression: "+qt)},B.uniqueSort=function(qt){var In,br=[],Mr=0,Yr=0;if(st=!d.sortStable,ke=!d.sortStable&&a.call(qt,0),pe.call(qt,pr),st){for(;In=qt[Yr++];)In===qt[Yr]&&(Mr=br.push(Yr));for(;Mr--;)S.call(qt,br[Mr],1)}return ke=null,qt},B.fn.uniqueSort=function(){return this.pushStack(B.uniqueSort(a.apply(this)))},ve=B.expr={cacheLength:50,createPseudo:Vs,match:vs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(qt){return qt[1]=qt[1].replace(Us,ta),qt[3]=(qt[3]||qt[4]||qt[5]||"").replace(Us,ta),qt[2]==="~="&&(qt[3]=" "+qt[3]+" "),qt.slice(0,4)},CHILD:function(qt){return qt[1]=qt[1].toLowerCase(),qt[1].slice(0,3)==="nth"?(qt[3]||eo.error(qt[0]),qt[4]=+(qt[4]?qt[5]+(qt[6]||1):2*(qt[3]==="even"||qt[3]==="odd")),qt[5]=+(qt[7]+qt[8]||qt[3]==="odd")):qt[3]&&eo.error(qt[0]),qt},PSEUDO:function(qt){var In,br=!qt[6]&&qt[2];return vs.CHILD.test(qt[0])?null:(qt[3]?qt[2]=qt[4]||qt[5]||"":br&&Ss.test(br)&&(In=qa(br,!0))&&(In=br.indexOf(")",br.length-In)-br.length)&&(qt[0]=qt[0].slice(0,In),qt[2]=br.slice(0,In)),qt.slice(0,3))}},filter:{TAG:function(qt){var In=qt.replace(Us,ta).toLowerCase();return qt==="*"?function(){return!0}:function(br){return z(br,In)}},CLASS:function(qt){var In=vn[qt+" "];return In||(In=new RegExp("(^|"+q+")"+qt+"("+q+"|$)"))&&vn(qt,function(br){return In.test(typeof br.className=="string"&&br.className||typeof br.getAttribute!="undefined"&&br.getAttribute("class")||"")})},ATTR:function(qt,In,br){return function(Mr){var Yr=eo.attr(Mr,qt);return Yr==null?In==="!=":In?(Yr+="",In==="="?Yr===br:In==="!="?Yr!==br:In==="^="?br&&Yr.indexOf(br)===0:In==="*="?br&&Yr.indexOf(br)>-1:In==="$="?br&&Yr.slice(-br.length)===br:In==="~="?(" "+Yr.replace(qi," ")+" ").indexOf(br)>-1:In==="|="?Yr===br||Yr.slice(0,br.length+1)===br+"-":!1):!0}},CHILD:function(qt,In,br,Mr,Yr){var Bt=qt.slice(0,3)!=="nth",nn=qt.slice(-4)!=="last",Dn=In==="of-type";return Mr===1&&Yr===0?function(Dt){return!!Dt.parentNode}:function(Dt,en,un){var Jn,Tr,Sr,Wi,Fi,ro=Bt!==nn?"nextSibling":"previousSibling",_o=Dt.parentNode,$i=Dn&&Dt.nodeName.toLowerCase(),Ds=!un&&!Dn,Ws=!1;if(_o){if(Bt){for(;ro;){for(Sr=Dt;Sr=Sr[ro];)if(Dn?z(Sr,$i):Sr.nodeType===1)return!1;Fi=ro=qt==="only"&&!Fi&&"nextSibling"}return!0}if(Fi=[nn?_o.firstChild:_o.lastChild],nn&&Ds){for(Tr=_o[qe]||(_o[qe]={}),Jn=Tr[qt]||[],Wi=Jn[0]===Mt&&Jn[1],Ws=Wi&&Jn[2],Sr=Wi&&_o.childNodes[Wi];Sr=++Wi&&Sr&&Sr[ro]||(Ws=Wi=0)||Fi.pop();)if(Sr.nodeType===1&&++Ws&&Sr===Dt){Tr[qt]=[Mt,Wi,Ws];break}}else if(Ds&&(Tr=Dt[qe]||(Dt[qe]={}),Jn=Tr[qt]||[],Wi=Jn[0]===Mt&&Jn[1],Ws=Wi),Ws===!1)for(;(Sr=++Wi&&Sr&&Sr[ro]||(Ws=Wi=0)||Fi.pop())&&!((Dn?z(Sr,$i):Sr.nodeType===1)&&++Ws&&(Ds&&(Tr=Sr[qe]||(Sr[qe]={}),Tr[qt]=[Mt,Ws]),Sr===Dt)););return Ws-=Yr,Ws===Mr||Ws%Mr===0&&Ws/Mr>=0}}},PSEUDO:function(qt,In){var br,Mr=ve.pseudos[qt]||ve.setFilters[qt.toLowerCase()]||eo.error("unsupported pseudo: "+qt);return Mr[qe]?Mr(In):Mr.length>1?(br=[qt,qt,"",In],ve.setFilters.hasOwnProperty(qt.toLowerCase())?Vs(function(Yr,Bt){for(var nn,Dn=Mr(Yr,In),Dt=Dn.length;Dt--;)nn=r.call(Yr,Dn[Dt]),Yr[nn]=!(Bt[nn]=Dn[Dt])}):function(Yr){return Mr(Yr,0,br)}):Mr}},pseudos:{not:Vs(function(qt){var In=[],br=[],Mr=Ku(qt.replace(M,"$1"));return Mr[qe]?Vs(function(Yr,Bt,nn,Dn){for(var Dt,en=Mr(Yr,null,Dn,[]),un=Yr.length;un--;)(Dt=en[un])&&(Yr[un]=!(Bt[un]=Dt))}):function(Yr,Bt,nn){return In[0]=Yr,Mr(In,null,nn,br),In[0]=null,!br.pop()}}),has:Vs(function(qt){return function(In){return eo(qt,In).length>0}}),contains:Vs(function(qt){return qt=qt.replace(Us,ta),function(In){return(In.textContent||B.text(In)).indexOf(qt)>-1}}),lang:Vs(function(qt){return ko.test(qt||"")||eo.error("unsupported lang: "+qt),qt=qt.replace(Us,ta).toLowerCase(),function(In){var br;do if(br=Se?In.lang:In.getAttribute("xml:lang")||In.getAttribute("lang"))return br=br.toLowerCase(),br===qt||br.indexOf(qt+"-")===0;while((In=In.parentNode)&&In.nodeType===1);return!1}}),target:function(qt){var In=ie.location&&ie.location.hash;return In&&In.slice(1)===qt.id},root:function(qt){return qt===ye},focus:function(qt){return qt===mu()&&W.hasFocus()&&!!(qt.type||qt.href||~qt.tabIndex)},enabled:Ha(!1),disabled:Ha(!0),checked:function(qt){return z(qt,"input")&&!!qt.checked||z(qt,"option")&&!!qt.selected},selected:function(qt){return qt.parentNode&&qt.parentNode.selectedIndex,qt.selected===!0},empty:function(qt){for(qt=qt.firstChild;qt;qt=qt.nextSibling)if(qt.nodeType<6)return!1;return!0},parent:function(qt){return!ve.pseudos.empty(qt)},header:function(qt){return ua.test(qt.nodeName)},input:function(qt){return xa.test(qt.nodeName)},button:function(qt){return z(qt,"input")&&qt.type==="button"||z(qt,"button")},text:function(qt){var In;return z(qt,"input")&&qt.type==="text"&&((In=qt.getAttribute("type"))==null||In.toLowerCase()==="text")},first:sa(function(){return[0]}),last:sa(function(qt,In){return[In-1]}),eq:sa(function(qt,In,br){return[br<0?br+In:br]}),even:sa(function(qt,In){for(var br=0;br<In;br+=2)qt.push(br);return qt}),odd:sa(function(qt,In){for(var br=1;br<In;br+=2)qt.push(br);return qt}),lt:sa(function(qt,In,br){var Mr;for(br<0?Mr=br+In:br>In?Mr=In:Mr=br;--Mr>=0;)qt.push(Mr);return qt}),gt:sa(function(qt,In,br){for(var Mr=br<0?br+In:br;++Mr<In;)qt.push(Mr);return qt})}},ve.pseudos.nth=ve.pseudos.eq;for(X in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})ve.pseudos[X]=Oa(X);for(X in{submit:!0,reset:!0})ve.pseudos[X]=ls(X);function uc(){}uc.prototype=ve.filters=ve.pseudos,ve.setFilters=new uc;function qa(qt,In){var br,Mr,Yr,Bt,nn,Dn,Dt,en=Zn[qt+" "];if(en)return In?0:en.slice(0);for(nn=qt,Dn=[],Dt=ve.preFilter;nn;){(!br||(Mr=is.exec(nn)))&&(Mr&&(nn=nn.slice(Mr[0].length)||nn),Dn.push(Yr=[])),br=!1,(Mr=Js.exec(nn))&&(br=Mr.shift(),Yr.push({value:br,type:Mr[0].replace(M," ")}),nn=nn.slice(br.length));for(Bt in ve.filter)(Mr=vs[Bt].exec(nn))&&(!Dt[Bt]||(Mr=Dt[Bt](Mr)))&&(br=Mr.shift(),Yr.push({value:br,type:Bt,matches:Mr}),nn=nn.slice(br.length));if(!br)break}return In?nn.length:nn?eo.error(qt):Zn(qt,Dn).slice(0)}function Sa(qt){for(var In=0,br=qt.length,Mr="";In<br;In++)Mr+=qt[In].value;return Mr}function cc(qt,In,br){var Mr=In.dir,Yr=In.next,Bt=Yr||Mr,nn=br&&Bt==="parentNode",Dn=Lt++;return In.first?function(Dt,en,un){for(;Dt=Dt[Mr];)if(Dt.nodeType===1||nn)return qt(Dt,en,un);return!1}:function(Dt,en,un){var Jn,Tr,Sr=[Mt,Dn];if(un){for(;Dt=Dt[Mr];)if((Dt.nodeType===1||nn)&&qt(Dt,en,un))return!0}else for(;Dt=Dt[Mr];)if(Dt.nodeType===1||nn)if(Tr=Dt[qe]||(Dt[qe]={}),Yr&&z(Dt,Yr))Dt=Dt[Mr]||Dt;else{if((Jn=Tr[Bt])&&Jn[0]===Mt&&Jn[1]===Dn)return Sr[2]=Jn[2];if(Tr[Bt]=Sr,Sr[2]=qt(Dt,en,un))return!0}return!1}}function eu(qt){return qt.length>1?function(In,br,Mr){for(var Yr=qt.length;Yr--;)if(!qt[Yr](In,br,Mr))return!1;return!0}:qt[0]}function lc(qt,In,br){for(var Mr=0,Yr=In.length;Mr<Yr;Mr++)eo(qt,In[Mr],br);return br}function Aa(qt,In,br,Mr,Yr){for(var Bt,nn=[],Dn=0,Dt=qt.length,en=In!=null;Dn<Dt;Dn++)(Bt=qt[Dn])&&(!br||br(Bt,Mr,Yr))&&(nn.push(Bt),en&&In.push(Dn));return nn}function Vu(qt,In,br,Mr,Yr,Bt){return Mr&&!Mr[qe]&&(Mr=Vu(Mr)),Yr&&!Yr[qe]&&(Yr=Vu(Yr,Bt)),Vs(function(nn,Dn,Dt,en){var un,Jn,Tr,Sr,Wi=[],Fi=[],ro=Dn.length,_o=nn||lc(In||"*",Dt.nodeType?[Dt]:Dt,[]),$i=qt&&(nn||!In)?Aa(_o,Wi,qt,Dt,en):_o;if(br?(Sr=Yr||(nn?qt:ro||Mr)?[]:Dn,br($i,Sr,Dt,en)):Sr=$i,Mr)for(un=Aa(Sr,Fi),Mr(un,[],Dt,en),Jn=un.length;Jn--;)(Tr=un[Jn])&&(Sr[Fi[Jn]]=!($i[Fi[Jn]]=Tr));if(nn){if(Yr||qt){if(Yr){for(un=[],Jn=Sr.length;Jn--;)(Tr=Sr[Jn])&&un.push($i[Jn]=Tr);Yr(null,Sr=[],un,en)}for(Jn=Sr.length;Jn--;)(Tr=Sr[Jn])&&(un=Yr?r.call(nn,Tr):Wi[Jn])>-1&&(nn[un]=!(Dn[un]=Tr))}}else Sr=Aa(Sr===Dn?Sr.splice(ro,Sr.length):Sr),Yr?Yr(null,Dn,Sr,en):P.apply(Dn,Sr)})}function Wu(qt){for(var In,br,Mr,Yr=qt.length,Bt=ve.relative[qt[0].type],nn=Bt||ve.relative[" "],Dn=Bt?1:0,Dt=cc(function(Jn){return Jn===In},nn,!0),en=cc(function(Jn){return r.call(In,Jn)>-1},nn,!0),un=[function(Jn,Tr,Sr){var Wi=!Bt&&(Sr||Tr!=Ie)||((In=Tr).nodeType?Dt(Jn,Tr,Sr):en(Jn,Tr,Sr));return In=null,Wi}];Dn<Yr;Dn++)if(br=ve.relative[qt[Dn].type])un=[cc(eu(un),br)];else{if(br=ve.filter[qt[Dn].type].apply(null,qt[Dn].matches),br[qe]){for(Mr=++Dn;Mr<Yr&&!ve.relative[qt[Mr].type];Mr++);return Vu(Dn>1&&eu(un),Dn>1&&Sa(qt.slice(0,Dn-1).concat({value:qt[Dn-2].type===" "?"*":""})).replace(M,"$1"),br,Dn<Mr&&Wu(qt.slice(Dn,Mr)),Mr<Yr&&Wu(qt=qt.slice(Mr)),Mr<Yr&&Sa(qt))}un.push(br)}return eu(un)}function Lu(qt,In){var br=In.length>0,Mr=qt.length>0,Yr=function(Bt,nn,Dn,Dt,en){var un,Jn,Tr,Sr=0,Wi="0",Fi=Bt&&[],ro=[],_o=Ie,$i=Bt||Mr&&ve.find.TAG("*",en),Ds=Mt+=_o==null?1:Math.random()||.1,Ws=$i.length;for(en&&(Ie=nn==W||nn||en);Wi!==Ws&&(un=$i[Wi])!=null;Wi++){if(Mr&&un){for(Jn=0,!nn&&un.ownerDocument!=W&&(ma(un),Dn=!Se);Tr=qt[Jn++];)if(Tr(un,nn||W,Dn)){P.call(Dt,un);break}en&&(Mt=Ds)}br&&((un=!Tr&&un)&&Sr--,Bt&&Fi.push(un))}if(Sr+=Wi,br&&Wi!==Sr){for(Jn=0;Tr=In[Jn++];)Tr(Fi,ro,nn,Dn);if(Bt){if(Sr>0)for(;Wi--;)Fi[Wi]||ro[Wi]||(ro[Wi]=ee.call(Dt));ro=Aa(ro)}P.apply(Dt,ro),en&&!Bt&&ro.length>0&&Sr+In.length>1&&B.uniqueSort(Dt)}return en&&(Mt=Ds,Ie=_o),Fi};return br?Vs(Yr):Yr}function Ku(qt,In){var br,Mr=[],Yr=[],Bt=Qn[qt+" "];if(!Bt){for(In||(In=qa(qt)),br=In.length;br--;)Bt=Wu(In[br]),Bt[qe]?Mr.push(Bt):Yr.push(Bt);Bt=Qn(qt,Lu(Yr,Mr)),Bt.selector=qt}return Bt}function du(qt,In,br,Mr){var Yr,Bt,nn,Dn,Dt,en=typeof qt=="function"&&qt,un=!Mr&&qa(qt=en.selector||qt);if(br=br||[],un.length===1){if(Bt=un[0]=un[0].slice(0),Bt.length>2&&(nn=Bt[0]).type==="ID"&&In.nodeType===9&&Se&&ve.relative[Bt[1].type]){if(In=(ve.find.ID(nn.matches[0].replace(Us,ta),In)||[])[0],In)en&&(In=In.parentNode);else return br;qt=qt.slice(Bt.shift().value.length)}for(Yr=vs.needsContext.test(qt)?0:Bt.length;Yr--&&(nn=Bt[Yr],!ve.relative[Dn=nn.type]);)if((Dt=ve.find[Dn])&&(Mr=Dt(nn.matches[0].replace(Us,ta),Pa.test(Bt[0].type)&&Xa(In.parentNode)||In))){if(Bt.splice(Yr,1),qt=Mr.length&&Sa(Bt),!qt)return P.apply(br,Mr),br;break}}return(en||Ku(qt,un))(Mr,In,!Se,br,!In||Pa.test(qt)&&Xa(In.parentNode)||In),br}d.sortStable=qe.split("").sort(pr).join("")===qe,ma(),d.sortDetached=oa(function(qt){return qt.compareDocumentPosition(W.createElement("fieldset"))&1}),B.find=eo,B.expr[":"]=B.expr.pseudos,B.unique=B.uniqueSort,eo.compile=Ku,eo.select=du,eo.setDocument=ma,eo.tokenize=qa,eo.escape=B.escapeSelector,eo.getText=B.text,eo.isXML=B.isXMLDoc,eo.selectors=B.expr,eo.support=B.support,eo.uniqueSort=B.uniqueSort})();var Ee=function(X,ve,Ie){for(var ke=[],st=Ie!==void 0;(X=X[ve])&&X.nodeType!==9;)if(X.nodeType===1){if(st&&B(X).is(Ie))break;ke.push(X)}return ke},Ce=function(X,ve){for(var Ie=[];X;X=X.nextSibling)X.nodeType===1&&X!==ve&&Ie.push(X);return Ie},xe=B.expr.match.needsContext,Oe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Le(X,ve,Ie){return v(ve)?B.grep(X,function(ke,st){return!!ve.call(ke,st,ke)!==Ie}):ve.nodeType?B.grep(X,function(ke){return ke===ve!==Ie}):typeof ve!="string"?B.grep(X,function(ke){return r.call(ve,ke)>-1!==Ie}):B.filter(ve,X,Ie)}B.filter=function(X,ve,Ie){var ke=ve[0];return Ie&&(X=":not("+X+")"),ve.length===1&&ke.nodeType===1?B.find.matchesSelector(ke,X)?[ke]:[]:B.find.matches(X,B.grep(ve,function(st){return st.nodeType===1}))},B.fn.extend({find:function(X){var ve,Ie,ke=this.length,st=this;if(typeof X!="string")return this.pushStack(B(X).filter(function(){for(ve=0;ve<ke;ve++)if(B.contains(st[ve],this))return!0}));for(Ie=this.pushStack([]),ve=0;ve<ke;ve++)B.find(X,st[ve],Ie);return ke>1?B.uniqueSort(Ie):Ie},filter:function(X){return this.pushStack(Le(this,X||[],!1))},not:function(X){return this.pushStack(Le(this,X||[],!0))},is:function(X){return!!Le(this,typeof X=="string"&&xe.test(X)?B(X):X||[],!1).length}});var Ge,He=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Et=B.fn.init=function(X,ve,Ie){var ke,st;if(!X)return this;if(Ie=Ie||Ge,typeof X=="string")if(X[0]==="<"&&X[X.length-1]===">"&&X.length>=3?ke=[null,X,null]:ke=He.exec(X),ke&&(ke[1]||!ve))if(ke[1]){if(ve=ve instanceof B?ve[0]:ve,B.merge(this,B.parseHTML(ke[1],ve&&ve.nodeType?ve.ownerDocument||ve:N,!0)),Oe.test(ke[1])&&B.isPlainObject(ve))for(ke in ve)v(this[ke])?this[ke](ve[ke]):this.attr(ke,ve[ke]);return this}else return st=N.getElementById(ke[2]),st&&(this[0]=st,this.length=1),this;else return!ve||ve.jquery?(ve||Ie).find(X):this.constructor(ve).find(X);else{if(X.nodeType)return this[0]=X,this.length=1,this;if(v(X))return Ie.ready!==void 0?Ie.ready(X):X(B)}return B.makeArray(X,this)};Et.prototype=B.fn,Ge=B(N);var Ct=/^(?:parents|prev(?:Until|All))/,Gt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({has:function(X){var ve=B(X,this),Ie=ve.length;return this.filter(function(){for(var ke=0;ke<Ie;ke++)if(B.contains(this,ve[ke]))return!0})},closest:function(X,ve){var Ie,ke=0,st=this.length,P=[],W=typeof X!="string"&&B(X);if(!xe.test(X)){for(;ke<st;ke++)for(Ie=this[ke];Ie&&Ie!==ve;Ie=Ie.parentNode)if(Ie.nodeType<11&&(W?W.index(Ie)>-1:Ie.nodeType===1&&B.find.matchesSelector(Ie,X))){P.push(Ie);break}}return this.pushStack(P.length>1?B.uniqueSort(P):P)},index:function(X){return X?typeof X=="string"?r.call(B(X),this[0]):r.call(this,X.jquery?X[0]:X):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(X,ve){return this.pushStack(B.uniqueSort(B.merge(this.get(),B(X,ve))))},addBack:function(X){return this.add(X==null?this.prevObject:this.prevObject.filter(X))}});function At(X,ve){for(;(X=X[ve])&&X.nodeType!==1;);return X}B.each({parent:function(X){var ve=X.parentNode;return ve&&ve.nodeType!==11?ve:null},parents:function(X){return Ee(X,"parentNode")},parentsUntil:function(X,ve,Ie){return Ee(X,"parentNode",Ie)},next:function(X){return At(X,"nextSibling")},prev:function(X){return At(X,"previousSibling")},nextAll:function(X){return Ee(X,"nextSibling")},prevAll:function(X){return Ee(X,"previousSibling")},nextUntil:function(X,ve,Ie){return Ee(X,"nextSibling",Ie)},prevUntil:function(X,ve,Ie){return Ee(X,"previousSibling",Ie)},siblings:function(X){return Ce((X.parentNode||{}).firstChild,X)},children:function(X){return Ce(X.firstChild)},contents:function(X){return X.contentDocument!=null&&u(X.contentDocument)?X.contentDocument:(z(X,"template")&&(X=X.content||X),B.merge([],X.childNodes))}},function(X,ve){B.fn[X]=function(Ie,ke){var st=B.map(this,ve,Ie);return X.slice(-5)!=="Until"&&(ke=Ie),ke&&typeof ke=="string"&&(st=B.filter(ke,st)),this.length>1&&(Gt[X]||B.uniqueSort(st),Ct.test(X)&&st.reverse()),this.pushStack(st)}});var vt=/[^\x20\t\r\n\f]+/g;function cn(X){var ve={};return B.each(X.match(vt)||[],function(Ie,ke){ve[ke]=!0}),ve}B.Callbacks=function(X){X=typeof X=="string"?cn(X):B.extend({},X);var ve,Ie,ke,st,P=[],W=[],ye=-1,Se=function(){for(st=st||X.once,ke=ve=!0;W.length;ye=-1)for(Ie=W.shift();++ye<P.length;)P[ye].apply(Ie[0],Ie[1])===!1&&X.stopOnFalse&&(ye=P.length,Ie=!1);X.memory||(Ie=!1),ve=!1,st&&(Ie?P=[]:P="")},Be={add:function(){return P&&(Ie&&!ve&&(ye=P.length-1,W.push(Ie)),function Fe(qe){B.each(qe,function(Mt,Lt){v(Lt)?(!X.unique||!Be.has(Lt))&&P.push(Lt):Lt&&Lt.length&&$(Lt)!=="string"&&Fe(Lt)})}(arguments),Ie&&!ve&&Se()),this},remove:function(){return B.each(arguments,function(Fe,qe){for(var Mt;(Mt=B.inArray(qe,P,Mt))>-1;)P.splice(Mt,1),Mt<=ye&&ye--}),this},has:function(Fe){return Fe?B.inArray(Fe,P)>-1:P.length>0},empty:function(){return P&&(P=[]),this},disable:function(){return st=W=[],P=Ie="",this},disabled:function(){return!P},lock:function(){return st=W=[],!Ie&&!ve&&(P=Ie=""),this},locked:function(){return!!st},fireWith:function(Fe,qe){return st||(qe=qe||[],qe=[Fe,qe.slice?qe.slice():qe],W.push(qe),ve||Se()),this},fire:function(){return Be.fireWith(this,arguments),this},fired:function(){return!!ke}};return Be};function hn(X){return X}function Bn(X){throw X}function Fn(X,ve,Ie,ke){var st;try{X&&v(st=X.promise)?st.call(X).done(ve).fail(Ie):X&&v(st=X.then)?st.call(X,ve,Ie):ve.apply(void 0,[X].slice(ke))}catch(P){Ie.apply(void 0,[P])}}B.extend({Deferred:function(X){var ve=[["notify","progress",B.Callbacks("memory"),B.Callbacks("memory"),2],["resolve","done",B.Callbacks("once memory"),B.Callbacks("once memory"),0,"resolved"],["reject","fail",B.Callbacks("once memory"),B.Callbacks("once memory"),1,"rejected"]],Ie="pending",ke={state:function(){return Ie},always:function(){return st.done(arguments).fail(arguments),this},catch:function(P){return ke.then(null,P)},pipe:function(){var P=arguments;return B.Deferred(function(W){B.each(ve,function(ye,Se){var Be=v(P[Se[4]])&&P[Se[4]];st[Se[1]](function(){var Fe=Be&&Be.apply(this,arguments);Fe&&v(Fe.promise)?Fe.promise().progress(W.notify).done(W.resolve).fail(W.reject):W[Se[0]+"With"](this,Be?[Fe]:arguments)})}),P=null}).promise()},then:function(P,W,ye){var Se=0;function Be(Fe,qe,Mt,Lt){return function(){var vn=this,Zn=arguments,Qn=function(){var pr,vi;if(!(Fe<Se)){if(pr=Mt.apply(vn,Zn),pr===qe.promise())throw new TypeError("Thenable self-resolution");vi=pr&&(typeof pr=="object"||typeof pr=="function")&&pr.then,v(vi)?Lt?vi.call(pr,Be(Se,qe,hn,Lt),Be(Se,qe,Bn,Lt)):(Se++,vi.call(pr,Be(Se,qe,hn,Lt),Be(Se,qe,Bn,Lt),Be(Se,qe,hn,qe.notifyWith))):(Mt!==hn&&(vn=void 0,Zn=[pr]),(Lt||qe.resolveWith)(vn,Zn))}},jn=Lt?Qn:function(){try{Qn()}catch(pr){B.Deferred.exceptionHook&&B.Deferred.exceptionHook(pr,jn.error),Fe+1>=Se&&(Mt!==Bn&&(vn=void 0,Zn=[pr]),qe.rejectWith(vn,Zn))}};Fe?jn():(B.Deferred.getErrorHook?jn.error=B.Deferred.getErrorHook():B.Deferred.getStackHook&&(jn.error=B.Deferred.getStackHook()),ie.setTimeout(jn))}}return B.Deferred(function(Fe){ve[0][3].add(Be(0,Fe,v(ye)?ye:hn,Fe.notifyWith)),ve[1][3].add(Be(0,Fe,v(P)?P:hn)),ve[2][3].add(Be(0,Fe,v(W)?W:Bn))}).promise()},promise:function(P){return P!=null?B.extend(P,ke):ke}},st={};return B.each(ve,function(P,W){var ye=W[2],Se=W[5];ke[W[1]]=ye.add,Se&&ye.add(function(){Ie=Se},ve[3-P][2].disable,ve[3-P][3].disable,ve[0][2].lock,ve[0][3].lock),ye.add(W[3].fire),st[W[0]]=function(){return st[W[0]+"With"](this===st?void 0:this,arguments),this},st[W[0]+"With"]=ye.fireWith}),ke.promise(st),X&&X.call(st,st),st},when:function(X){var ve=arguments.length,Ie=ve,ke=Array(Ie),st=a.call(arguments),P=B.Deferred(),W=function(ye){return function(Se){ke[ye]=this,st[ye]=arguments.length>1?a.call(arguments):Se,--ve||P.resolveWith(ke,st)}};if(ve<=1&&(Fn(X,P.done(W(Ie)).resolve,P.reject,!ve),P.state()==="pending"||v(st[Ie]&&st[Ie].then)))return P.then();for(;Ie--;)Fn(st[Ie],W(Ie),P.reject);return P.promise()}});var ir=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;B.Deferred.exceptionHook=function(X,ve){ie.console&&ie.console.warn&&X&&ir.test(X.name)&&ie.console.warn("jQuery.Deferred exception: "+X.message,X.stack,ve)},B.readyException=function(X){ie.setTimeout(function(){throw X})};var Nr=B.Deferred();B.fn.ready=function(X){return Nr.then(X).catch(function(ve){B.readyException(ve)}),this},B.extend({isReady:!1,readyWait:1,ready:function(X){(X===!0?--B.readyWait:B.isReady)||(B.isReady=!0,!(X!==!0&&--B.readyWait>0)&&Nr.resolveWith(N,[B]))}}),B.ready.then=Nr.then;function Ei(){N.removeEventListener("DOMContentLoaded",Ei),ie.removeEventListener("load",Ei),B.ready()}N.readyState==="complete"||N.readyState!=="loading"&&!N.documentElement.doScroll?ie.setTimeout(B.ready):(N.addEventListener("DOMContentLoaded",Ei),ie.addEventListener("load",Ei));var ci=function(X,ve,Ie,ke,st,P,W){var ye=0,Se=X.length,Be=Ie==null;if($(Ie)==="object"){st=!0;for(ye in Ie)ci(X,ve,ye,Ie[ye],!0,P,W)}else if(ke!==void 0&&(st=!0,v(ke)||(W=!0),Be&&(W?(ve.call(X,ke),ve=null):(Be=ve,ve=function(Fe,qe,Mt){return Be.call(B(Fe),Mt)})),ve))for(;ye<Se;ye++)ve(X[ye],Ie,W?ke:ke.call(X[ye],ye,ve(X[ye],Ie)));return st?X:Be?ve.call(X):Se?ve(X[0],Ie):P},Ot=/^-ms-/,fr=/-([a-z])/g;function Pi(X,ve){return ve.toUpperCase()}function Li(X){return X.replace(Ot,"ms-").replace(fr,Pi)}var zn=function(X){return X.nodeType===1||X.nodeType===9||!+X.nodeType};function $e(){this.expando=B.expando+$e.uid++}$e.uid=1,$e.prototype={cache:function(X){var ve=X[this.expando];return ve||(ve={},zn(X)&&(X.nodeType?X[this.expando]=ve:Object.defineProperty(X,this.expando,{value:ve,configurable:!0}))),ve},set:function(X,ve,Ie){var ke,st=this.cache(X);if(typeof ve=="string")st[Li(ve)]=Ie;else for(ke in ve)st[Li(ke)]=ve[ke];return st},get:function(X,ve){return ve===void 0?this.cache(X):X[this.expando]&&X[this.expando][Li(ve)]},access:function(X,ve,Ie){return ve===void 0||ve&&typeof ve=="string"&&Ie===void 0?this.get(X,ve):(this.set(X,ve,Ie),Ie!==void 0?Ie:ve)},remove:function(X,ve){var Ie,ke=X[this.expando];if(ke!==void 0){if(ve!==void 0)for(Array.isArray(ve)?ve=ve.map(Li):(ve=Li(ve),ve=ve in ke?[ve]:ve.match(vt)||[]),Ie=ve.length;Ie--;)delete ke[ve[Ie]];(ve===void 0||B.isEmptyObject(ke))&&(X.nodeType?X[this.expando]=void 0:delete X[this.expando])}},hasData:function(X){var ve=X[this.expando];return ve!==void 0&&!B.isEmptyObject(ve)}};var Xt=new $e,Rt=new $e,_t=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Tt=/[A-Z]/g;function at(X){return X==="true"?!0:X==="false"?!1:X==="null"?null:X===+X+""?+X:_t.test(X)?JSON.parse(X):X}function ce(X,ve,Ie){var ke;if(Ie===void 0&&X.nodeType===1)if(ke="data-"+ve.replace(Tt,"-$&").toLowerCase(),Ie=X.getAttribute(ke),typeof Ie=="string"){try{Ie=at(Ie)}catch(st){}Rt.set(X,ve,Ie)}else Ie=void 0;return Ie}B.extend({hasData:function(X){return Rt.hasData(X)||Xt.hasData(X)},data:function(X,ve,Ie){return Rt.access(X,ve,Ie)},removeData:function(X,ve){Rt.remove(X,ve)},_data:function(X,ve,Ie){return Xt.access(X,ve,Ie)},_removeData:function(X,ve){Xt.remove(X,ve)}}),B.fn.extend({data:function(X,ve){var Ie,ke,st,P=this[0],W=P&&P.attributes;if(X===void 0){if(this.length&&(st=Rt.get(P),P.nodeType===1&&!Xt.get(P,"hasDataAttrs"))){for(Ie=W.length;Ie--;)W[Ie]&&(ke=W[Ie].name,ke.indexOf("data-")===0&&(ke=Li(ke.slice(5)),ce(P,ke,st[ke])));Xt.set(P,"hasDataAttrs",!0)}return st}return typeof X=="object"?this.each(function(){Rt.set(this,X)}):ci(this,function(ye){var Se;if(P&&ye===void 0)return Se=Rt.get(P,X),Se!==void 0||(Se=ce(P,X),Se!==void 0)?Se:void 0;this.each(function(){Rt.set(this,X,ye)})},null,ve,arguments.length>1,null,!0)},removeData:function(X){return this.each(function(){Rt.remove(this,X)})}}),B.extend({queue:function(X,ve,Ie){var ke;if(X)return ve=(ve||"fx")+"queue",ke=Xt.get(X,ve),Ie&&(!ke||Array.isArray(Ie)?ke=Xt.access(X,ve,B.makeArray(Ie)):ke.push(Ie)),ke||[]},dequeue:function(X,ve){ve=ve||"fx";var Ie=B.queue(X,ve),ke=Ie.length,st=Ie.shift(),P=B._queueHooks(X,ve),W=function(){B.dequeue(X,ve)};st==="inprogress"&&(st=Ie.shift(),ke--),st&&(ve==="fx"&&Ie.unshift("inprogress"),delete P.stop,st.call(X,W,P)),!ke&&P&&P.empty.fire()},_queueHooks:function(X,ve){var Ie=ve+"queueHooks";return Xt.get(X,Ie)||Xt.access(X,Ie,{empty:B.Callbacks("once memory").add(function(){Xt.remove(X,[ve+"queue",Ie])})})}}),B.fn.extend({queue:function(X,ve){var Ie=2;return typeof X!="string"&&(ve=X,X="fx",Ie--),arguments.length<Ie?B.queue(this[0],X):ve===void 0?this:this.each(function(){var ke=B.queue(this,X,ve);B._queueHooks(this,X),X==="fx"&&ke[0]!=="inprogress"&&B.dequeue(this,X)})},dequeue:function(X){return this.each(function(){B.dequeue(this,X)})},clearQueue:function(X){return this.queue(X||"fx",[])},promise:function(X,ve){var Ie,ke=1,st=B.Deferred(),P=this,W=this.length,ye=function(){--ke||st.resolveWith(P,[P])};for(typeof X!="string"&&(ve=X,X=void 0),X=X||"fx";W--;)Ie=Xt.get(P[W],X+"queueHooks"),Ie&&Ie.empty&&(ke++,Ie.empty.add(ye));return ye(),st.promise(ve)}});var ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ze=new RegExp("^(?:([+-])=|)("+ut+")([a-z%]*)$","i"),Wt=["Top","Right","Bottom","Left"],Ut=N.documentElement,jt=function(X){return B.contains(X.ownerDocument,X)},xt={composed:!0};Ut.getRootNode&&(jt=function(X){return B.contains(X.ownerDocument,X)||X.getRootNode(xt)===X.ownerDocument});var $t=function(X,ve){return X=ve||X,X.style.display==="none"||X.style.display===""&&jt(X)&&B.css(X,"display")==="none"};function Un(X,ve,Ie,ke){var st,P,W=20,ye=ke?function(){return ke.cur()}:function(){return B.css(X,ve,"")},Se=ye(),Be=Ie&&Ie[3]||(B.cssNumber[ve]?"":"px"),Fe=X.nodeType&&(B.cssNumber[ve]||Be!=="px"&&+Se)&&Ze.exec(B.css(X,ve));if(Fe&&Fe[3]!==Be){for(Se=Se/2,Be=Be||Fe[3],Fe=+Se||1;W--;)B.style(X,ve,Fe+Be),(1-P)*(1-(P=ye()/Se||.5))<=0&&(W=0),Fe=Fe/P;Fe=Fe*2,B.style(X,ve,Fe+Be),Ie=Ie||[]}return Ie&&(Fe=+Fe||+Se||0,st=Ie[1]?Fe+(Ie[1]+1)*Ie[2]:+Ie[2],ke&&(ke.unit=Be,ke.start=Fe,ke.end=st)),st}var qn={};function rr(X){var ve,Ie=X.ownerDocument,ke=X.nodeName,st=qn[ke];return st||(ve=Ie.body.appendChild(Ie.createElement(ke)),st=B.css(ve,"display"),ve.parentNode.removeChild(ve),st==="none"&&(st="block"),qn[ke]=st,st)}function xn(X,ve){for(var Ie,ke,st=[],P=0,W=X.length;P<W;P++)ke=X[P],ke.style&&(Ie=ke.style.display,ve?(Ie==="none"&&(st[P]=Xt.get(ke,"display")||null,st[P]||(ke.style.display="")),ke.style.display===""&&$t(ke)&&(st[P]=rr(ke))):Ie!=="none"&&(st[P]="none",Xt.set(ke,"display",Ie)));for(P=0;P<W;P++)st[P]!=null&&(X[P].style.display=st[P]);return X}B.fn.extend({show:function(){return xn(this,!0)},hide:function(){return xn(this)},toggle:function(X){return typeof X=="boolean"?X?this.show():this.hide():this.each(function(){$t(this)?B(this).show():B(this).hide()})}});var Or=/^(?:checkbox|radio)$/i,Pr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,cr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var X=N.createDocumentFragment(),ve=X.appendChild(N.createElement("div")),Ie=N.createElement("input");Ie.setAttribute("type","radio"),Ie.setAttribute("checked","checked"),Ie.setAttribute("name","t"),ve.appendChild(Ie),d.checkClone=ve.cloneNode(!0).cloneNode(!0).lastChild.checked,ve.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!ve.cloneNode(!0).lastChild.defaultValue,ve.innerHTML="<option></option>",d.option=!!ve.lastChild})();var ki={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ki.tbody=ki.tfoot=ki.colgroup=ki.caption=ki.thead,ki.th=ki.td,d.option||(ki.optgroup=ki.option=[1,"<select multiple='multiple'>","</select>"]);function Vr(X,ve){var Ie;return typeof X.getElementsByTagName!="undefined"?Ie=X.getElementsByTagName(ve||"*"):typeof X.querySelectorAll!="undefined"?Ie=X.querySelectorAll(ve||"*"):Ie=[],ve===void 0||ve&&z(X,ve)?B.merge([X],Ie):Ie}function kr(X,ve){for(var Ie=0,ke=X.length;Ie<ke;Ie++)Xt.set(X[Ie],"globalEval",!ve||Xt.get(ve[Ie],"globalEval"))}var Ui=/<|&#?\w+;/;function Wr(X,ve,Ie,ke,st){for(var P,W,ye,Se,Be,Fe,qe=ve.createDocumentFragment(),Mt=[],Lt=0,vn=X.length;Lt<vn;Lt++)if(P=X[Lt],P||P===0)if($(P)==="object")B.merge(Mt,P.nodeType?[P]:P);else if(!Ui.test(P))Mt.push(ve.createTextNode(P));else{for(W=W||qe.appendChild(ve.createElement("div")),ye=(Pr.exec(P)||["",""])[1].toLowerCase(),Se=ki[ye]||ki._default,W.innerHTML=Se[1]+B.htmlPrefilter(P)+Se[2],Fe=Se[0];Fe--;)W=W.lastChild;B.merge(Mt,W.childNodes),W=qe.firstChild,W.textContent=""}for(qe.textContent="",Lt=0;P=Mt[Lt++];){if(ke&&B.inArray(P,ke)>-1){st&&st.push(P);continue}if(Be=jt(P),W=Vr(qe.appendChild(P),"script"),Be&&kr(W),Ie)for(Fe=0;P=W[Fe++];)cr.test(P.type||"")&&Ie.push(P)}return qe}var no=/^([^.]*)(?:\.(.+)|)/;function uo(){return!0}function wi(){return!1}function wo(X,ve,Ie,ke,st,P){var W,ye;if(typeof ve=="object"){typeof Ie!="string"&&(ke=ke||Ie,Ie=void 0);for(ye in ve)wo(X,ye,Ie,ke,ve[ye],P);return X}if(ke==null&&st==null?(st=Ie,ke=Ie=void 0):st==null&&(typeof Ie=="string"?(st=ke,ke=void 0):(st=ke,ke=Ie,Ie=void 0)),st===!1)st=wi;else if(!st)return X;return P===1&&(W=st,st=function(Se){return B().off(Se),W.apply(this,arguments)},st.guid=W.guid||(W.guid=B.guid++)),X.each(function(){B.event.add(this,ve,st,ke,Ie)})}B.event={global:{},add:function(X,ve,Ie,ke,st){var P,W,ye,Se,Be,Fe,qe,Mt,Lt,vn,Zn,Qn=Xt.get(X);if(zn(X))for(Ie.handler&&(P=Ie,Ie=P.handler,st=P.selector),st&&B.find.matchesSelector(Ut,st),Ie.guid||(Ie.guid=B.guid++),(Se=Qn.events)||(Se=Qn.events=Object.create(null)),(W=Qn.handle)||(W=Qn.handle=function(jn){return typeof B!="undefined"&&B.event.triggered!==jn.type?B.event.dispatch.apply(X,arguments):void 0}),ve=(ve||"").match(vt)||[""],Be=ve.length;Be--;)ye=no.exec(ve[Be])||[],Lt=Zn=ye[1],vn=(ye[2]||"").split(".").sort(),Lt&&(qe=B.event.special[Lt]||{},Lt=(st?qe.delegateType:qe.bindType)||Lt,qe=B.event.special[Lt]||{},Fe=B.extend({type:Lt,origType:Zn,data:ke,handler:Ie,guid:Ie.guid,selector:st,needsContext:st&&B.expr.match.needsContext.test(st),namespace:vn.join(".")},P),(Mt=Se[Lt])||(Mt=Se[Lt]=[],Mt.delegateCount=0,(!qe.setup||qe.setup.call(X,ke,vn,W)===!1)&&X.addEventListener&&X.addEventListener(Lt,W)),qe.add&&(qe.add.call(X,Fe),Fe.handler.guid||(Fe.handler.guid=Ie.guid)),st?Mt.splice(Mt.delegateCount++,0,Fe):Mt.push(Fe),B.event.global[Lt]=!0)},remove:function(X,ve,Ie,ke,st){var P,W,ye,Se,Be,Fe,qe,Mt,Lt,vn,Zn,Qn=Xt.hasData(X)&&Xt.get(X);if(!(!Qn||!(Se=Qn.events))){for(ve=(ve||"").match(vt)||[""],Be=ve.length;Be--;){if(ye=no.exec(ve[Be])||[],Lt=Zn=ye[1],vn=(ye[2]||"").split(".").sort(),!Lt){for(Lt in Se)B.event.remove(X,Lt+ve[Be],Ie,ke,!0);continue}for(qe=B.event.special[Lt]||{},Lt=(ke?qe.delegateType:qe.bindType)||Lt,Mt=Se[Lt]||[],ye=ye[2]&&new RegExp("(^|\\.)"+vn.join("\\.(?:.*\\.|)")+"(\\.|$)"),W=P=Mt.length;P--;)Fe=Mt[P],(st||Zn===Fe.origType)&&(!Ie||Ie.guid===Fe.guid)&&(!ye||ye.test(Fe.namespace))&&(!ke||ke===Fe.selector||ke==="**"&&Fe.selector)&&(Mt.splice(P,1),Fe.selector&&Mt.delegateCount--,qe.remove&&qe.remove.call(X,Fe));W&&!Mt.length&&((!qe.teardown||qe.teardown.call(X,vn,Qn.handle)===!1)&&B.removeEvent(X,Lt,Qn.handle),delete Se[Lt])}B.isEmptyObject(Se)&&Xt.remove(X,"handle events")}},dispatch:function(X){var ve,Ie,ke,st,P,W,ye=new Array(arguments.length),Se=B.event.fix(X),Be=(Xt.get(this,"events")||Object.create(null))[Se.type]||[],Fe=B.event.special[Se.type]||{};for(ye[0]=Se,ve=1;ve<arguments.length;ve++)ye[ve]=arguments[ve];if(Se.delegateTarget=this,!(Fe.preDispatch&&Fe.preDispatch.call(this,Se)===!1)){for(W=B.event.handlers.call(this,Se,Be),ve=0;(st=W[ve++])&&!Se.isPropagationStopped();)for(Se.currentTarget=st.elem,Ie=0;(P=st.handlers[Ie++])&&!Se.isImmediatePropagationStopped();)(!Se.rnamespace||P.namespace===!1||Se.rnamespace.test(P.namespace))&&(Se.handleObj=P,Se.data=P.data,ke=((B.event.special[P.origType]||{}).handle||P.handler).apply(st.elem,ye),ke!==void 0&&(Se.result=ke)===!1&&(Se.preventDefault(),Se.stopPropagation()));return Fe.postDispatch&&Fe.postDispatch.call(this,Se),Se.result}},handlers:function(X,ve){var Ie,ke,st,P,W,ye=[],Se=ve.delegateCount,Be=X.target;if(Se&&Be.nodeType&&!(X.type==="click"&&X.button>=1)){for(;Be!==this;Be=Be.parentNode||this)if(Be.nodeType===1&&!(X.type==="click"&&Be.disabled===!0)){for(P=[],W={},Ie=0;Ie<Se;Ie++)ke=ve[Ie],st=ke.selector+" ",W[st]===void 0&&(W[st]=ke.needsContext?B(st,this).index(Be)>-1:B.find(st,this,null,[Be]).length),W[st]&&P.push(ke);P.length&&ye.push({elem:Be,handlers:P})}}return Be=this,Se<ve.length&&ye.push({elem:Be,handlers:ve.slice(Se)}),ye},addProp:function(X,ve){Object.defineProperty(B.Event.prototype,X,{enumerable:!0,configurable:!0,get:v(ve)?function(){if(this.originalEvent)return ve(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[X]},set:function(Ie){Object.defineProperty(this,X,{enumerable:!0,configurable:!0,writable:!0,value:Ie})}})},fix:function(X){return X[B.expando]?X:new B.Event(X)},special:{load:{noBubble:!0},click:{setup:function(X){var ve=this||X;return Or.test(ve.type)&&ve.click&&z(ve,"input")&&fs(ve,"click",!0),!1},trigger:function(X){var ve=this||X;return Or.test(ve.type)&&ve.click&&z(ve,"input")&&fs(ve,"click"),!0},_default:function(X){var ve=X.target;return Or.test(ve.type)&&ve.click&&z(ve,"input")&&Xt.get(ve,"click")||z(ve,"a")}},beforeunload:{postDispatch:function(X){X.result!==void 0&&X.originalEvent&&(X.originalEvent.returnValue=X.result)}}}};function fs(X,ve,Ie){if(!Ie){Xt.get(X,ve)===void 0&&B.event.add(X,ve,uo);return}Xt.set(X,ve,!1),B.event.add(X,ve,{namespace:!1,handler:function(ke){var st,P=Xt.get(this,ve);if(ke.isTrigger&1&&this[ve]){if(P)(B.event.special[ve]||{}).delegateType&&ke.stopPropagation();else if(P=a.call(arguments),Xt.set(this,ve,P),this[ve](),st=Xt.get(this,ve),Xt.set(this,ve,!1),P!==st)return ke.stopImmediatePropagation(),ke.preventDefault(),st}else P&&(Xt.set(this,ve,B.event.trigger(P[0],P.slice(1),this)),ke.stopPropagation(),ke.isImmediatePropagationStopped=uo)}})}B.removeEvent=function(X,ve,Ie){X.removeEventListener&&X.removeEventListener(ve,Ie)},B.Event=function(X,ve){if(!(this instanceof B.Event))return new B.Event(X,ve);X&&X.type?(this.originalEvent=X,this.type=X.type,this.isDefaultPrevented=X.defaultPrevented||X.defaultPrevented===void 0&&X.returnValue===!1?uo:wi,this.target=X.target&&X.target.nodeType===3?X.target.parentNode:X.target,this.currentTarget=X.currentTarget,this.relatedTarget=X.relatedTarget):this.type=X,ve&&B.extend(this,ve),this.timeStamp=X&&X.timeStamp||Date.now(),this[B.expando]=!0},B.Event.prototype={constructor:B.Event,isDefaultPrevented:wi,isPropagationStopped:wi,isImmediatePropagationStopped:wi,isSimulated:!1,preventDefault:function(){var X=this.originalEvent;this.isDefaultPrevented=uo,X&&!this.isSimulated&&X.preventDefault()},stopPropagation:function(){var X=this.originalEvent;this.isPropagationStopped=uo,X&&!this.isSimulated&&X.stopPropagation()},stopImmediatePropagation:function(){var X=this.originalEvent;this.isImmediatePropagationStopped=uo,X&&!this.isSimulated&&X.stopImmediatePropagation(),this.stopPropagation()}},B.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},B.event.addProp),B.each({focus:"focusin",blur:"focusout"},function(X,ve){function Ie(ke){if(N.documentMode){var st=Xt.get(this,"handle"),P=B.event.fix(ke);P.type=ke.type==="focusin"?"focus":"blur",P.isSimulated=!0,st(ke),P.target===P.currentTarget&&st(P)}else B.event.simulate(ve,ke.target,B.event.fix(ke))}B.event.special[X]={setup:function(){var ke;if(fs(this,X,!0),N.documentMode)ke=Xt.get(this,ve),ke||this.addEventListener(ve,Ie),Xt.set(this,ve,(ke||0)+1);else return!1},trigger:function(){return fs(this,X),!0},teardown:function(){var ke;if(N.documentMode)ke=Xt.get(this,ve)-1,ke?Xt.set(this,ve,ke):(this.removeEventListener(ve,Ie),Xt.remove(this,ve));else return!1},_default:function(ke){return Xt.get(ke.target,X)},delegateType:ve},B.event.special[ve]={setup:function(){var ke=this.ownerDocument||this.document||this,st=N.documentMode?this:ke,P=Xt.get(st,ve);P||(N.documentMode?this.addEventListener(ve,Ie):ke.addEventListener(X,Ie,!0)),Xt.set(st,ve,(P||0)+1)},teardown:function(){var ke=this.ownerDocument||this.document||this,st=N.documentMode?this:ke,P=Xt.get(st,ve)-1;P?Xt.set(st,ve,P):(N.documentMode?this.removeEventListener(ve,Ie):ke.removeEventListener(X,Ie,!0),Xt.remove(st,ve))}}}),B.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(X,ve){B.event.special[X]={delegateType:ve,bindType:ve,handle:function(Ie){var ke,st=this,P=Ie.relatedTarget,W=Ie.handleObj;return(!P||P!==st&&!B.contains(st,P))&&(Ie.type=W.origType,ke=W.handler.apply(this,arguments),Ie.type=ve),ke}}}),B.fn.extend({on:function(X,ve,Ie,ke){return wo(this,X,ve,Ie,ke)},one:function(X,ve,Ie,ke){return wo(this,X,ve,Ie,ke,1)},off:function(X,ve,Ie){var ke,st;if(X&&X.preventDefault&&X.handleObj)return ke=X.handleObj,B(X.delegateTarget).off(ke.namespace?ke.origType+"."+ke.namespace:ke.origType,ke.selector,ke.handler),this;if(typeof X=="object"){for(st in X)this.off(st,ve,X[st]);return this}return(ve===!1||typeof ve=="function")&&(Ie=ve,ve=void 0),Ie===!1&&(Ie=wi),this.each(function(){B.event.remove(this,X,Ie,ve)})}});var zo=/<script|<style|<link/i,hs=/checked\s*(?:[^=]|=\s*.checked.)/i,ks=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function rs(X,ve){return z(X,"table")&&z(ve.nodeType!==11?ve:ve.firstChild,"tr")&&B(X).children("tbody")[0]||X}function Eo(X){return X.type=(X.getAttribute("type")!==null)+"/"+X.type,X}function Qo(X){return(X.type||"").slice(0,5)==="true/"?X.type=X.type.slice(5):X.removeAttribute("type"),X}function Xs(X,ve){var Ie,ke,st,P,W,ye,Se;if(ve.nodeType===1){if(Xt.hasData(X)&&(P=Xt.get(X),Se=P.events,Se)){Xt.remove(ve,"handle events");for(st in Se)for(Ie=0,ke=Se[st].length;Ie<ke;Ie++)B.event.add(ve,st,Se[st][Ie])}Rt.hasData(X)&&(W=Rt.access(X),ye=B.extend({},W),Rt.set(ve,ye))}}function Ys(X,ve){var Ie=ve.nodeName.toLowerCase();Ie==="input"&&Or.test(X.type)?ve.checked=X.checked:(Ie==="input"||Ie==="textarea")&&(ve.defaultValue=X.defaultValue)}function ot(X,ve,Ie,ke){ve=o(ve);var st,P,W,ye,Se,Be,Fe=0,qe=X.length,Mt=qe-1,Lt=ve[0],vn=v(Lt);if(vn||qe>1&&typeof Lt=="string"&&!d.checkClone&&hs.test(Lt))return X.each(function(Zn){var Qn=X.eq(Zn);vn&&(ve[0]=Lt.call(this,Zn,Qn.html())),ot(Qn,ve,Ie,ke)});if(qe&&(st=Wr(ve,X[0].ownerDocument,!1,X,ke),P=st.firstChild,st.childNodes.length===1&&(st=P),P||ke)){for(W=B.map(Vr(st,"script"),Eo),ye=W.length;Fe<qe;Fe++)Se=st,Fe!==Mt&&(Se=B.clone(Se,!0,!0),ye&&B.merge(W,Vr(Se,"script"))),Ie.call(X[Fe],Se,Fe);if(ye)for(Be=W[W.length-1].ownerDocument,B.map(W,Qo),Fe=0;Fe<ye;Fe++)Se=W[Fe],cr.test(Se.type||"")&&!Xt.access(Se,"globalEval")&&B.contains(Be,Se)&&(Se.src&&(Se.type||"").toLowerCase()!=="module"?B._evalUrl&&!Se.noModule&&B._evalUrl(Se.src,{nonce:Se.nonce||Se.getAttribute("nonce")},Be):ae(Se.textContent.replace(ks,""),Se,Be))}return X}function mt(X,ve,Ie){for(var ke,st=ve?B.filter(ve,X):X,P=0;(ke=st[P])!=null;P++)!Ie&&ke.nodeType===1&&B.cleanData(Vr(ke)),ke.parentNode&&(Ie&&jt(ke)&&kr(Vr(ke,"script")),ke.parentNode.removeChild(ke));return X}B.extend({htmlPrefilter:function(X){return X},clone:function(X,ve,Ie){var ke,st,P,W,ye=X.cloneNode(!0),Se=jt(X);if(!d.noCloneChecked&&(X.nodeType===1||X.nodeType===11)&&!B.isXMLDoc(X))for(W=Vr(ye),P=Vr(X),ke=0,st=P.length;ke<st;ke++)Ys(P[ke],W[ke]);if(ve)if(Ie)for(P=P||Vr(X),W=W||Vr(ye),ke=0,st=P.length;ke<st;ke++)Xs(P[ke],W[ke]);else Xs(X,ye);return W=Vr(ye,"script"),W.length>0&&kr(W,!Se&&Vr(X,"script")),ye},cleanData:function(X){for(var ve,Ie,ke,st=B.event.special,P=0;(Ie=X[P])!==void 0;P++)if(zn(Ie)){if(ve=Ie[Xt.expando]){if(ve.events)for(ke in ve.events)st[ke]?B.event.remove(Ie,ke):B.removeEvent(Ie,ke,ve.handle);Ie[Xt.expando]=void 0}Ie[Rt.expando]&&(Ie[Rt.expando]=void 0)}}}),B.fn.extend({detach:function(X){return mt(this,X,!0)},remove:function(X){return mt(this,X)},text:function(X){return ci(this,function(ve){return ve===void 0?B.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=ve)})},null,X,arguments.length)},append:function(){return ot(this,arguments,function(X){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var ve=rs(this,X);ve.appendChild(X)}})},prepend:function(){return ot(this,arguments,function(X){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var ve=rs(this,X);ve.insertBefore(X,ve.firstChild)}})},before:function(){return ot(this,arguments,function(X){this.parentNode&&this.parentNode.insertBefore(X,this)})},after:function(){return ot(this,arguments,function(X){this.parentNode&&this.parentNode.insertBefore(X,this.nextSibling)})},empty:function(){for(var X,ve=0;(X=this[ve])!=null;ve++)X.nodeType===1&&(B.cleanData(Vr(X,!1)),X.textContent="");return this},clone:function(X,ve){return X=X==null?!1:X,ve=ve==null?X:ve,this.map(function(){return B.clone(this,X,ve)})},html:function(X){return ci(this,function(ve){var Ie=this[0]||{},ke=0,st=this.length;if(ve===void 0&&Ie.nodeType===1)return Ie.innerHTML;if(typeof ve=="string"&&!zo.test(ve)&&!ki[(Pr.exec(ve)||["",""])[1].toLowerCase()]){ve=B.htmlPrefilter(ve);try{for(;ke<st;ke++)Ie=this[ke]||{},Ie.nodeType===1&&(B.cleanData(Vr(Ie,!1)),Ie.innerHTML=ve);Ie=0}catch(P){}}Ie&&this.empty().append(ve)},null,X,arguments.length)},replaceWith:function(){var X=[];return ot(this,arguments,function(ve){var Ie=this.parentNode;B.inArray(this,X)<0&&(B.cleanData(Vr(this)),Ie&&Ie.replaceChild(ve,this))},X)}}),B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(X,ve){B.fn[X]=function(Ie){for(var ke,st=[],P=B(Ie),W=P.length-1,ye=0;ye<=W;ye++)ke=ye===W?this:this.clone(!0),B(P[ye])[ve](ke),l.apply(st,ke.get());return this.pushStack(st)}});var _e=new RegExp("^("+ut+")(?!px)[a-z%]+$","i"),Z=/^--/,Q=function(X){var ve=X.ownerDocument.defaultView;return(!ve||!ve.opener)&&(ve=ie),ve.getComputedStyle(X)},le=function(X,ve,Ie){var ke,st,P={};for(st in ve)P[st]=X.style[st],X.style[st]=ve[st];ke=Ie.call(X);for(st in ve)X.style[st]=P[st];return ke},Xe=new RegExp(Wt.join("|"),"i");(function(){function X(){if(Be){Se.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Be.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ut.appendChild(Se).appendChild(Be);var Fe=ie.getComputedStyle(Be);Ie=Fe.top!=="1%",ye=ve(Fe.marginLeft)===12,Be.style.right="60%",P=ve(Fe.right)===36,ke=ve(Fe.width)===36,Be.style.position="absolute",st=ve(Be.offsetWidth/3)===12,Ut.removeChild(Se),Be=null}}function ve(Fe){return Math.round(parseFloat(Fe))}var Ie,ke,st,P,W,ye,Se=N.createElement("div"),Be=N.createElement("div");Be.style&&(Be.style.backgroundClip="content-box",Be.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle=Be.style.backgroundClip==="content-box",B.extend(d,{boxSizingReliable:function(){return X(),ke},pixelBoxStyles:function(){return X(),P},pixelPosition:function(){return X(),Ie},reliableMarginLeft:function(){return X(),ye},scrollboxSize:function(){return X(),st},reliableTrDimensions:function(){var Fe,qe,Mt,Lt;return W==null&&(Fe=N.createElement("table"),qe=N.createElement("tr"),Mt=N.createElement("div"),Fe.style.cssText="position:absolute;left:-11111px;border-collapse:separate",qe.style.cssText="box-sizing:content-box;border:1px solid",qe.style.height="1px",Mt.style.height="9px",Mt.style.display="block",Ut.appendChild(Fe).appendChild(qe).appendChild(Mt),Lt=ie.getComputedStyle(qe),W=parseInt(Lt.height,10)+parseInt(Lt.borderTopWidth,10)+parseInt(Lt.borderBottomWidth,10)===qe.offsetHeight,Ut.removeChild(Fe)),W}}))})();function dt(X,ve,Ie){var ke,st,P,W,ye=Z.test(ve),Se=X.style;return Ie=Ie||Q(X),Ie&&(W=Ie.getPropertyValue(ve)||Ie[ve],ye&&W&&(W=W.replace(M,"$1")||void 0),W===""&&!jt(X)&&(W=B.style(X,ve)),!d.pixelBoxStyles()&&_e.test(W)&&Xe.test(ve)&&(ke=Se.width,st=Se.minWidth,P=Se.maxWidth,Se.minWidth=Se.maxWidth=Se.width=W,W=Ie.width,Se.width=ke,Se.minWidth=st,Se.maxWidth=P)),W!==void 0?W+"":W}function ft(X,ve){return{get:function(){if(X()){delete this.get;return}return(this.get=ve).apply(this,arguments)}}}var gt=["Webkit","Moz","ms"],ln=N.createElement("div").style,bn={};function En(X){for(var ve=X[0].toUpperCase()+X.slice(1),Ie=gt.length;Ie--;)if(X=gt[Ie]+ve,X in ln)return X}function Cr(X){var ve=B.cssProps[X]||bn[X];return ve||(X in ln?X:bn[X]=En(X)||X)}var tr=/^(none|table(?!-c[ea]).+)/,ii={position:"absolute",visibility:"hidden",display:"block"},Zi={letterSpacing:"0",fontWeight:"400"};function Mn(X,ve,Ie){var ke=Ze.exec(ve);return ke?Math.max(0,ke[2]-(Ie||0))+(ke[3]||"px"):ve}function Xn(X,ve,Ie,ke,st,P){var W=ve==="width"?1:0,ye=0,Se=0,Be=0;if(Ie===(ke?"border":"content"))return 0;for(;W<4;W+=2)Ie==="margin"&&(Be+=B.css(X,Ie+Wt[W],!0,st)),ke?(Ie==="content"&&(Se-=B.css(X,"padding"+Wt[W],!0,st)),Ie!=="margin"&&(Se-=B.css(X,"border"+Wt[W]+"Width",!0,st))):(Se+=B.css(X,"padding"+Wt[W],!0,st),Ie!=="padding"?Se+=B.css(X,"border"+Wt[W]+"Width",!0,st):ye+=B.css(X,"border"+Wt[W]+"Width",!0,st));return!ke&&P>=0&&(Se+=Math.max(0,Math.ceil(X["offset"+ve[0].toUpperCase()+ve.slice(1)]-P-Se-ye-.5))||0),Se+Be}function $r(X,ve,Ie){var ke=Q(X),st=!d.boxSizingReliable()||Ie,P=st&&B.css(X,"boxSizing",!1,ke)==="border-box",W=P,ye=dt(X,ve,ke),Se="offset"+ve[0].toUpperCase()+ve.slice(1);if(_e.test(ye)){if(!Ie)return ye;ye="auto"}return(!d.boxSizingReliable()&&P||!d.reliableTrDimensions()&&z(X,"tr")||ye==="auto"||!parseFloat(ye)&&B.css(X,"display",!1,ke)==="inline")&&X.getClientRects().length&&(P=B.css(X,"boxSizing",!1,ke)==="border-box",W=Se in X,W&&(ye=X[Se])),ye=parseFloat(ye)||0,ye+Xn(X,ve,Ie||(P?"border":"content"),W,ke,ye)+"px"}B.extend({cssHooks:{opacity:{get:function(X,ve){if(ve){var Ie=dt(X,"opacity");return Ie===""?"1":Ie}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(X,ve,Ie,ke){if(!(!X||X.nodeType===3||X.nodeType===8||!X.style)){var st,P,W,ye=Li(ve),Se=Z.test(ve),Be=X.style;if(Se||(ve=Cr(ye)),W=B.cssHooks[ve]||B.cssHooks[ye],Ie!==void 0){if(P=typeof Ie,P==="string"&&(st=Ze.exec(Ie))&&st[1]&&(Ie=Un(X,ve,st),P="number"),Ie==null||Ie!==Ie)return;P==="number"&&!Se&&(Ie+=st&&st[3]||(B.cssNumber[ye]?"":"px")),!d.clearCloneStyle&&Ie===""&&ve.indexOf("background")===0&&(Be[ve]="inherit"),(!W||!("set"in W)||(Ie=W.set(X,Ie,ke))!==void 0)&&(Se?Be.setProperty(ve,Ie):Be[ve]=Ie)}else return W&&"get"in W&&(st=W.get(X,!1,ke))!==void 0?st:Be[ve]}},css:function(X,ve,Ie,ke){var st,P,W,ye=Li(ve),Se=Z.test(ve);return Se||(ve=Cr(ye)),W=B.cssHooks[ve]||B.cssHooks[ye],W&&"get"in W&&(st=W.get(X,!0,Ie)),st===void 0&&(st=dt(X,ve,ke)),st==="normal"&&ve in Zi&&(st=Zi[ve]),Ie===""||Ie?(P=parseFloat(st),Ie===!0||isFinite(P)?P||0:st):st}}),B.each(["height","width"],function(X,ve){B.cssHooks[ve]={get:function(Ie,ke,st){if(ke)return tr.test(B.css(Ie,"display"))&&(!Ie.getClientRects().length||!Ie.getBoundingClientRect().width)?le(Ie,ii,function(){return $r(Ie,ve,st)}):$r(Ie,ve,st)},set:function(Ie,ke,st){var P,W=Q(Ie),ye=!d.scrollboxSize()&&W.position==="absolute",Se=ye||st,Be=Se&&B.css(Ie,"boxSizing",!1,W)==="border-box",Fe=st?Xn(Ie,ve,st,Be,W):0;return Be&&ye&&(Fe-=Math.ceil(Ie["offset"+ve[0].toUpperCase()+ve.slice(1)]-parseFloat(W[ve])-Xn(Ie,ve,"border",!1,W)-.5)),Fe&&(P=Ze.exec(ke))&&(P[3]||"px")!=="px"&&(Ie.style[ve]=ke,ke=B.css(Ie,ve)),Mn(Ie,ke,Fe)}}}),B.cssHooks.marginLeft=ft(d.reliableMarginLeft,function(X,ve){if(ve)return(parseFloat(dt(X,"marginLeft"))||X.getBoundingClientRect().left-le(X,{marginLeft:0},function(){return X.getBoundingClientRect().left}))+"px"}),B.each({margin:"",padding:"",border:"Width"},function(X,ve){B.cssHooks[X+ve]={expand:function(Ie){for(var ke=0,st={},P=typeof Ie=="string"?Ie.split(" "):[Ie];ke<4;ke++)st[X+Wt[ke]+ve]=P[ke]||P[ke-2]||P[0];return st}},X!=="margin"&&(B.cssHooks[X+ve].set=Mn)}),B.fn.extend({css:function(X,ve){return ci(this,function(Ie,ke,st){var P,W,ye={},Se=0;if(Array.isArray(ke)){for(P=Q(Ie),W=ke.length;Se<W;Se++)ye[ke[Se]]=B.css(Ie,ke[Se],!1,P);return ye}return st!==void 0?B.style(Ie,ke,st):B.css(Ie,ke)},X,ve,arguments.length>1)}});function Re(X,ve,Ie,ke,st){return new Re.prototype.init(X,ve,Ie,ke,st)}B.Tween=Re,Re.prototype={constructor:Re,init:function(X,ve,Ie,ke,st,P){this.elem=X,this.prop=Ie,this.easing=st||B.easing._default,this.options=ve,this.start=this.now=this.cur(),this.end=ke,this.unit=P||(B.cssNumber[Ie]?"":"px")},cur:function(){var X=Re.propHooks[this.prop];return X&&X.get?X.get(this):Re.propHooks._default.get(this)},run:function(X){var ve,Ie=Re.propHooks[this.prop];return this.options.duration?this.pos=ve=B.easing[this.easing](X,this.options.duration*X,0,1,this.options.duration):this.pos=ve=X,this.now=(this.end-this.start)*ve+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Ie&&Ie.set?Ie.set(this):Re.propHooks._default.set(this),this}},Re.prototype.init.prototype=Re.prototype,Re.propHooks={_default:{get:function(X){var ve;return X.elem.nodeType!==1||X.elem[X.prop]!=null&&X.elem.style[X.prop]==null?X.elem[X.prop]:(ve=B.css(X.elem,X.prop,""),!ve||ve==="auto"?0:ve)},set:function(X){B.fx.step[X.prop]?B.fx.step[X.prop](X):X.elem.nodeType===1&&(B.cssHooks[X.prop]||X.elem.style[Cr(X.prop)]!=null)?B.style(X.elem,X.prop,X.now+X.unit):X.elem[X.prop]=X.now}}},Re.propHooks.scrollTop=Re.propHooks.scrollLeft={set:function(X){X.elem.nodeType&&X.elem.parentNode&&(X.elem[X.prop]=X.now)}},B.easing={linear:function(X){return X},swing:function(X){return .5-Math.cos(X*Math.PI)/2},_default:"swing"},B.fx=Re.prototype.init,B.fx.step={};var Ne,Te,U=/^(?:toggle|show|hide)$/,Y=/queueHooks$/;function ge(){Te&&(N.hidden===!1&&ie.requestAnimationFrame?ie.requestAnimationFrame(ge):ie.setTimeout(ge,B.fx.interval),B.fx.tick())}function Ye(){return ie.setTimeout(function(){Ne=void 0}),Ne=Date.now()}function ct(X,ve){var Ie,ke=0,st={height:X};for(ve=ve?1:0;ke<4;ke+=2-ve)Ie=Wt[ke],st["margin"+Ie]=st["padding"+Ie]=X;return ve&&(st.opacity=st.width=X),st}function nt(X,ve,Ie){for(var ke,st=(on.tweeners[ve]||[]).concat(on.tweeners["*"]),P=0,W=st.length;P<W;P++)if(ke=st[P].call(Ie,ve,X))return ke}function lt(X,ve,Ie){var ke,st,P,W,ye,Se,Be,Fe,qe="width"in ve||"height"in ve,Mt=this,Lt={},vn=X.style,Zn=X.nodeType&&$t(X),Qn=Xt.get(X,"fxshow");Ie.queue||(W=B._queueHooks(X,"fx"),W.unqueued==null&&(W.unqueued=0,ye=W.empty.fire,W.empty.fire=function(){W.unqueued||ye()}),W.unqueued++,Mt.always(function(){Mt.always(function(){W.unqueued--,B.queue(X,"fx").length||W.empty.fire()})}));for(ke in ve)if(st=ve[ke],U.test(st)){if(delete ve[ke],P=P||st==="toggle",st===(Zn?"hide":"show"))if(st==="show"&&Qn&&Qn[ke]!==void 0)Zn=!0;else continue;Lt[ke]=Qn&&Qn[ke]||B.style(X,ke)}if(Se=!B.isEmptyObject(ve),!(!Se&&B.isEmptyObject(Lt))){qe&&X.nodeType===1&&(Ie.overflow=[vn.overflow,vn.overflowX,vn.overflowY],Be=Qn&&Qn.display,Be==null&&(Be=Xt.get(X,"display")),Fe=B.css(X,"display"),Fe==="none"&&(Be?Fe=Be:(xn([X],!0),Be=X.style.display||Be,Fe=B.css(X,"display"),xn([X]))),(Fe==="inline"||Fe==="inline-block"&&Be!=null)&&B.css(X,"float")==="none"&&(Se||(Mt.done(function(){vn.display=Be}),Be==null&&(Fe=vn.display,Be=Fe==="none"?"":Fe)),vn.display="inline-block")),Ie.overflow&&(vn.overflow="hidden",Mt.always(function(){vn.overflow=Ie.overflow[0],vn.overflowX=Ie.overflow[1],vn.overflowY=Ie.overflow[2]})),Se=!1;for(ke in Lt)Se||(Qn?"hidden"in Qn&&(Zn=Qn.hidden):Qn=Xt.access(X,"fxshow",{display:Be}),P&&(Qn.hidden=!Zn),Zn&&xn([X],!0),Mt.done(function(){Zn||xn([X]),Xt.remove(X,"fxshow");for(ke in Lt)B.style(X,ke,Lt[ke])})),Se=nt(Zn?Qn[ke]:0,ke,Mt),ke in Qn||(Qn[ke]=Se.start,Zn&&(Se.end=Se.start,Se.start=0))}}function fn(X,ve){var Ie,ke,st,P,W;for(Ie in X)if(ke=Li(Ie),st=ve[ke],P=X[Ie],Array.isArray(P)&&(st=P[1],P=X[Ie]=P[0]),Ie!==ke&&(X[ke]=P,delete X[Ie]),W=B.cssHooks[ke],W&&"expand"in W){P=W.expand(P),delete X[ke];for(Ie in P)Ie in X||(X[Ie]=P[Ie],ve[Ie]=st)}else ve[ke]=st}function on(X,ve,Ie){var ke,st,P=0,W=on.prefilters.length,ye=B.Deferred().always(function(){delete Se.elem}),Se=function(){if(st)return!1;for(var qe=Ne||Ye(),Mt=Math.max(0,Be.startTime+Be.duration-qe),Lt=Mt/Be.duration||0,vn=1-Lt,Zn=0,Qn=Be.tweens.length;Zn<Qn;Zn++)Be.tweens[Zn].run(vn);return ye.notifyWith(X,[Be,vn,Mt]),vn<1&&Qn?Mt:(Qn||ye.notifyWith(X,[Be,1,0]),ye.resolveWith(X,[Be]),!1)},Be=ye.promise({elem:X,props:B.extend({},ve),opts:B.extend(!0,{specialEasing:{},easing:B.easing._default},Ie),originalProperties:ve,originalOptions:Ie,startTime:Ne||Ye(),duration:Ie.duration,tweens:[],createTween:function(qe,Mt){var Lt=B.Tween(X,Be.opts,qe,Mt,Be.opts.specialEasing[qe]||Be.opts.easing);return Be.tweens.push(Lt),Lt},stop:function(qe){var Mt=0,Lt=qe?Be.tweens.length:0;if(st)return this;for(st=!0;Mt<Lt;Mt++)Be.tweens[Mt].run(1);return qe?(ye.notifyWith(X,[Be,1,0]),ye.resolveWith(X,[Be,qe])):ye.rejectWith(X,[Be,qe]),this}}),Fe=Be.props;for(fn(Fe,Be.opts.specialEasing);P<W;P++)if(ke=on.prefilters[P].call(Be,X,Fe,Be.opts),ke)return v(ke.stop)&&(B._queueHooks(Be.elem,Be.opts.queue).stop=ke.stop.bind(ke)),ke;return B.map(Fe,nt,Be),v(Be.opts.start)&&Be.opts.start.call(X,Be),Be.progress(Be.opts.progress).done(Be.opts.done,Be.opts.complete).fail(Be.opts.fail).always(Be.opts.always),B.fx.timer(B.extend(Se,{elem:X,anim:Be,queue:Be.opts.queue})),Be}B.Animation=B.extend(on,{tweeners:{"*":[function(X,ve){var Ie=this.createTween(X,ve);return Un(Ie.elem,X,Ze.exec(ve),Ie),Ie}]},tweener:function(X,ve){v(X)?(ve=X,X=["*"]):X=X.match(vt);for(var Ie,ke=0,st=X.length;ke<st;ke++)Ie=X[ke],on.tweeners[Ie]=on.tweeners[Ie]||[],on.tweeners[Ie].unshift(ve)},prefilters:[lt],prefilter:function(X,ve){ve?on.prefilters.unshift(X):on.prefilters.push(X)}}),B.speed=function(X,ve,Ie){var ke=X&&typeof X=="object"?B.extend({},X):{complete:Ie||!Ie&&ve||v(X)&&X,duration:X,easing:Ie&&ve||ve&&!v(ve)&&ve};return B.fx.off?ke.duration=0:typeof ke.duration!="number"&&(ke.duration in B.fx.speeds?ke.duration=B.fx.speeds[ke.duration]:ke.duration=B.fx.speeds._default),(ke.queue==null||ke.queue===!0)&&(ke.queue="fx"),ke.old=ke.complete,ke.complete=function(){v(ke.old)&&ke.old.call(this),ke.queue&&B.dequeue(this,ke.queue)},ke},B.fn.extend({fadeTo:function(X,ve,Ie,ke){return this.filter($t).css("opacity",0).show().end().animate({opacity:ve},X,Ie,ke)},animate:function(X,ve,Ie,ke){var st=B.isEmptyObject(X),P=B.speed(ve,Ie,ke),W=function(){var ye=on(this,B.extend({},X),P);(st||Xt.get(this,"finish"))&&ye.stop(!0)};return W.finish=W,st||P.queue===!1?this.each(W):this.queue(P.queue,W)},stop:function(X,ve,Ie){var ke=function(st){var P=st.stop;delete st.stop,P(Ie)};return typeof X!="string"&&(Ie=ve,ve=X,X=void 0),ve&&this.queue(X||"fx",[]),this.each(function(){var st=!0,P=X!=null&&X+"queueHooks",W=B.timers,ye=Xt.get(this);if(P)ye[P]&&ye[P].stop&&ke(ye[P]);else for(P in ye)ye[P]&&ye[P].stop&&Y.test(P)&&ke(ye[P]);for(P=W.length;P--;)W[P].elem===this&&(X==null||W[P].queue===X)&&(W[P].anim.stop(Ie),st=!1,W.splice(P,1));(st||!Ie)&&B.dequeue(this,X)})},finish:function(X){return X!==!1&&(X=X||"fx"),this.each(function(){var ve,Ie=Xt.get(this),ke=Ie[X+"queue"],st=Ie[X+"queueHooks"],P=B.timers,W=ke?ke.length:0;for(Ie.finish=!0,B.queue(this,X,[]),st&&st.stop&&st.stop.call(this,!0),ve=P.length;ve--;)P[ve].elem===this&&P[ve].queue===X&&(P[ve].anim.stop(!0),P.splice(ve,1));for(ve=0;ve<W;ve++)ke[ve]&&ke[ve].finish&&ke[ve].finish.call(this);delete Ie.finish})}}),B.each(["toggle","show","hide"],function(X,ve){var Ie=B.fn[ve];B.fn[ve]=function(ke,st,P){return ke==null||typeof ke=="boolean"?Ie.apply(this,arguments):this.animate(ct(ve,!0),ke,st,P)}}),B.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(X,ve){B.fn[X]=function(Ie,ke,st){return this.animate(ve,Ie,ke,st)}}),B.timers=[],B.fx.tick=function(){var X,ve=0,Ie=B.timers;for(Ne=Date.now();ve<Ie.length;ve++)X=Ie[ve],!X()&&Ie[ve]===X&&Ie.splice(ve--,1);Ie.length||B.fx.stop(),Ne=void 0},B.fx.timer=function(X){B.timers.push(X),B.fx.start()},B.fx.interval=13,B.fx.start=function(){Te||(Te=!0,ge())},B.fx.stop=function(){Te=null},B.fx.speeds={slow:600,fast:200,_default:400},B.fn.delay=function(X,ve){return X=B.fx&&B.fx.speeds[X]||X,ve=ve||"fx",this.queue(ve,function(Ie,ke){var st=ie.setTimeout(Ie,X);ke.stop=function(){ie.clearTimeout(st)}})},function(){var X=N.createElement("input"),ve=N.createElement("select"),Ie=ve.appendChild(N.createElement("option"));X.type="checkbox",d.checkOn=X.value!=="",d.optSelected=Ie.selected,X=N.createElement("input"),X.value="t",X.type="radio",d.radioValue=X.value==="t"}();var Gn,er=B.expr.attrHandle;B.fn.extend({attr:function(X,ve){return ci(this,B.attr,X,ve,arguments.length>1)},removeAttr:function(X){return this.each(function(){B.removeAttr(this,X)})}}),B.extend({attr:function(X,ve,Ie){var ke,st,P=X.nodeType;if(!(P===3||P===8||P===2)){if(typeof X.getAttribute=="undefined")return B.prop(X,ve,Ie);if((P!==1||!B.isXMLDoc(X))&&(st=B.attrHooks[ve.toLowerCase()]||(B.expr.match.bool.test(ve)?Gn:void 0)),Ie!==void 0){if(Ie===null){B.removeAttr(X,ve);return}return st&&"set"in st&&(ke=st.set(X,Ie,ve))!==void 0?ke:(X.setAttribute(ve,Ie+""),Ie)}return st&&"get"in st&&(ke=st.get(X,ve))!==null?ke:(ke=B.find.attr(X,ve),ke==null?void 0:ke)}},attrHooks:{type:{set:function(X,ve){if(!d.radioValue&&ve==="radio"&&z(X,"input")){var Ie=X.value;return X.setAttribute("type",ve),Ie&&(X.value=Ie),ve}}}},removeAttr:function(X,ve){var Ie,ke=0,st=ve&&ve.match(vt);if(st&&X.nodeType===1)for(;Ie=st[ke++];)X.removeAttribute(Ie)}}),Gn={set:function(X,ve,Ie){return ve===!1?B.removeAttr(X,Ie):X.setAttribute(Ie,Ie),Ie}},B.each(B.expr.match.bool.source.match(/\w+/g),function(X,ve){var Ie=er[ve]||B.find.attr;er[ve]=function(ke,st,P){var W,ye,Se=st.toLowerCase();return P||(ye=er[Se],er[Se]=W,W=Ie(ke,st,P)!=null?Se:null,er[Se]=ye),W}});var Kn=/^(?:input|select|textarea|button)$/i,qr=/^(?:a|area)$/i;B.fn.extend({prop:function(X,ve){return ci(this,B.prop,X,ve,arguments.length>1)},removeProp:function(X){return this.each(function(){delete this[B.propFix[X]||X]})}}),B.extend({prop:function(X,ve,Ie){var ke,st,P=X.nodeType;if(!(P===3||P===8||P===2))return(P!==1||!B.isXMLDoc(X))&&(ve=B.propFix[ve]||ve,st=B.propHooks[ve]),Ie!==void 0?st&&"set"in st&&(ke=st.set(X,Ie,ve))!==void 0?ke:X[ve]=Ie:st&&"get"in st&&(ke=st.get(X,ve))!==null?ke:X[ve]},propHooks:{tabIndex:{get:function(X){var ve=B.find.attr(X,"tabindex");return ve?parseInt(ve,10):Kn.test(X.nodeName)||qr.test(X.nodeName)&&X.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(B.propHooks.selected={get:function(X){var ve=X.parentNode;return ve&&ve.parentNode&&ve.parentNode.selectedIndex,null},set:function(X){var ve=X.parentNode;ve&&(ve.selectedIndex,ve.parentNode&&ve.parentNode.selectedIndex)}}),B.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){B.propFix[this.toLowerCase()]=this});function xi(X){var ve=X.match(vt)||[];return ve.join(" ")}function Pn(X){return X.getAttribute&&X.getAttribute("class")||""}function $n(X){return Array.isArray(X)?X:typeof X=="string"?X.match(vt)||[]:[]}B.fn.extend({addClass:function(X){var ve,Ie,ke,st,P,W;return v(X)?this.each(function(ye){B(this).addClass(X.call(this,ye,Pn(this)))}):(ve=$n(X),ve.length?this.each(function(){if(ke=Pn(this),Ie=this.nodeType===1&&" "+xi(ke)+" ",Ie){for(P=0;P<ve.length;P++)st=ve[P],Ie.indexOf(" "+st+" ")<0&&(Ie+=st+" ");W=xi(Ie),ke!==W&&this.setAttribute("class",W)}}):this)},removeClass:function(X){var ve,Ie,ke,st,P,W;return v(X)?this.each(function(ye){B(this).removeClass(X.call(this,ye,Pn(this)))}):arguments.length?(ve=$n(X),ve.length?this.each(function(){if(ke=Pn(this),Ie=this.nodeType===1&&" "+xi(ke)+" ",Ie){for(P=0;P<ve.length;P++)for(st=ve[P];Ie.indexOf(" "+st+" ")>-1;)Ie=Ie.replace(" "+st+" "," ");W=xi(Ie),ke!==W&&this.setAttribute("class",W)}}):this):this.attr("class","")},toggleClass:function(X,ve){var Ie,ke,st,P,W=typeof X,ye=W==="string"||Array.isArray(X);return v(X)?this.each(function(Se){B(this).toggleClass(X.call(this,Se,Pn(this),ve),ve)}):typeof ve=="boolean"&&ye?ve?this.addClass(X):this.removeClass(X):(Ie=$n(X),this.each(function(){if(ye)for(P=B(this),st=0;st<Ie.length;st++)ke=Ie[st],P.hasClass(ke)?P.removeClass(ke):P.addClass(ke);else(X===void 0||W==="boolean")&&(ke=Pn(this),ke&&Xt.set(this,"__className__",ke),this.setAttribute&&this.setAttribute("class",ke||X===!1?"":Xt.get(this,"__className__")||""))}))},hasClass:function(X){var ve,Ie,ke=0;for(ve=" "+X+" ";Ie=this[ke++];)if(Ie.nodeType===1&&(" "+xi(Pn(Ie))+" ").indexOf(ve)>-1)return!0;return!1}});var Rr=/\r/g;B.fn.extend({val:function(X){var ve,Ie,ke,st=this[0];return arguments.length?(ke=v(X),this.each(function(P){var W;this.nodeType===1&&(ke?W=X.call(this,P,B(this).val()):W=X,W==null?W="":typeof W=="number"?W+="":Array.isArray(W)&&(W=B.map(W,function(ye){return ye==null?"":ye+""})),ve=B.valHooks[this.type]||B.valHooks[this.nodeName.toLowerCase()],(!ve||!("set"in ve)||ve.set(this,W,"value")===void 0)&&(this.value=W))})):st?(ve=B.valHooks[st.type]||B.valHooks[st.nodeName.toLowerCase()],ve&&"get"in ve&&(Ie=ve.get(st,"value"))!==void 0?Ie:(Ie=st.value,typeof Ie=="string"?Ie.replace(Rr,""):Ie==null?"":Ie)):void 0}}),B.extend({valHooks:{option:{get:function(X){var ve=B.find.attr(X,"value");return ve!=null?ve:xi(B.text(X))}},select:{get:function(X){var ve,Ie,ke,st=X.options,P=X.selectedIndex,W=X.type==="select-one",ye=W?null:[],Se=W?P+1:st.length;for(P<0?ke=Se:ke=W?P:0;ke<Se;ke++)if(Ie=st[ke],(Ie.selected||ke===P)&&!Ie.disabled&&(!Ie.parentNode.disabled||!z(Ie.parentNode,"optgroup"))){if(ve=B(Ie).val(),W)return ve;ye.push(ve)}return ye},set:function(X,ve){for(var Ie,ke,st=X.options,P=B.makeArray(ve),W=st.length;W--;)ke=st[W],(ke.selected=B.inArray(B.valHooks.option.get(ke),P)>-1)&&(Ie=!0);return Ie||(X.selectedIndex=-1),P}}}}),B.each(["radio","checkbox"],function(){B.valHooks[this]={set:function(X,ve){if(Array.isArray(ve))return X.checked=B.inArray(B(X).val(),ve)>-1}},d.checkOn||(B.valHooks[this].get=function(X){return X.getAttribute("value")===null?"on":X.value})});var Di=ie.location,Jr={guid:Date.now()},$o=/\?/;B.parseXML=function(X){var ve,Ie;if(!X||typeof X!="string")return null;try{ve=new ie.DOMParser().parseFromString(X,"text/xml")}catch(ke){}return Ie=ve&&ve.getElementsByTagName("parsererror")[0],(!ve||Ie)&&B.error("Invalid XML: "+(Ie?B.map(Ie.childNodes,function(ke){return ke.textContent}).join(`
`):X)),ve};var Vo=/^(?:focusinfocus|focusoutblur)$/,lo=function(X){X.stopPropagation()};B.extend(B.event,{trigger:function(X,ve,Ie,ke){var st,P,W,ye,Se,Be,Fe,qe,Mt=[Ie||N],Lt=s.call(X,"type")?X.type:X,vn=s.call(X,"namespace")?X.namespace.split("."):[];if(P=qe=W=Ie=Ie||N,!(Ie.nodeType===3||Ie.nodeType===8)&&!Vo.test(Lt+B.event.triggered)&&(Lt.indexOf(".")>-1&&(vn=Lt.split("."),Lt=vn.shift(),vn.sort()),Se=Lt.indexOf(":")<0&&"on"+Lt,X=X[B.expando]?X:new B.Event(Lt,typeof X=="object"&&X),X.isTrigger=ke?2:3,X.namespace=vn.join("."),X.rnamespace=X.namespace?new RegExp("(^|\\.)"+vn.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,X.result=void 0,X.target||(X.target=Ie),ve=ve==null?[X]:B.makeArray(ve,[X]),Fe=B.event.special[Lt]||{},!(!ke&&Fe.trigger&&Fe.trigger.apply(Ie,ve)===!1))){if(!ke&&!Fe.noBubble&&!x(Ie)){for(ye=Fe.delegateType||Lt,Vo.test(ye+Lt)||(P=P.parentNode);P;P=P.parentNode)Mt.push(P),W=P;W===(Ie.ownerDocument||N)&&Mt.push(W.defaultView||W.parentWindow||ie)}for(st=0;(P=Mt[st++])&&!X.isPropagationStopped();)qe=P,X.type=st>1?ye:Fe.bindType||Lt,Be=(Xt.get(P,"events")||Object.create(null))[X.type]&&Xt.get(P,"handle"),Be&&Be.apply(P,ve),Be=Se&&P[Se],Be&&Be.apply&&zn(P)&&(X.result=Be.apply(P,ve),X.result===!1&&X.preventDefault());return X.type=Lt,!ke&&!X.isDefaultPrevented()&&(!Fe._default||Fe._default.apply(Mt.pop(),ve)===!1)&&zn(Ie)&&Se&&v(Ie[Lt])&&!x(Ie)&&(W=Ie[Se],W&&(Ie[Se]=null),B.event.triggered=Lt,X.isPropagationStopped()&&qe.addEventListener(Lt,lo),Ie[Lt](),X.isPropagationStopped()&&qe.removeEventListener(Lt,lo),B.event.triggered=void 0,W&&(Ie[Se]=W)),X.result}},simulate:function(X,ve,Ie){var ke=B.extend(new B.Event,Ie,{type:X,isSimulated:!0});B.event.trigger(ke,null,ve)}}),B.fn.extend({trigger:function(X,ve){return this.each(function(){B.event.trigger(X,ve,this)})},triggerHandler:function(X,ve){var Ie=this[0];if(Ie)return B.event.trigger(X,ve,Ie,!0)}});var Xi=/\[\]$/,Ho=/\r?\n/g,cs=/^(?:submit|button|image|reset|file)$/i,li=/^(?:input|select|textarea|keygen)/i;function xs(X,ve,Ie,ke){var st;if(Array.isArray(ve))B.each(ve,function(P,W){Ie||Xi.test(X)?ke(X,W):xs(X+"["+(typeof W=="object"&&W!=null?P:"")+"]",W,Ie,ke)});else if(!Ie&&$(ve)==="object")for(st in ve)xs(X+"["+st+"]",ve[st],Ie,ke);else ke(X,ve)}B.param=function(X,ve){var Ie,ke=[],st=function(P,W){var ye=v(W)?W():W;ke[ke.length]=encodeURIComponent(P)+"="+encodeURIComponent(ye==null?"":ye)};if(X==null)return"";if(Array.isArray(X)||X.jquery&&!B.isPlainObject(X))B.each(X,function(){st(this.name,this.value)});else for(Ie in X)xs(Ie,X[Ie],ve,st);return ke.join("&")},B.fn.extend({serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var X=B.prop(this,"elements");return X?B.makeArray(X):this}).filter(function(){var X=this.type;return this.name&&!B(this).is(":disabled")&&li.test(this.nodeName)&&!cs.test(X)&&(this.checked||!Or.test(X))}).map(function(X,ve){var Ie=B(this).val();return Ie==null?null:Array.isArray(Ie)?B.map(Ie,function(ke){return{name:ve.name,value:ke.replace(Ho,`\r
`)}}):{name:ve.name,value:Ie.replace(Ho,`\r
`)}}).get()}});var Ae=/%20/g,Ke=/#.*$/,pt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/mg,an=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ln=/^(?:GET|HEAD)$/,wr=/^\/\//,yr={},ei={},Ii="*/".concat("*"),to=N.createElement("a");to.href=Di.href;function Ji(X){return function(ve,Ie){typeof ve!="string"&&(Ie=ve,ve="*");var ke,st=0,P=ve.toLowerCase().match(vt)||[];if(v(Ie))for(;ke=P[st++];)ke[0]==="+"?(ke=ke.slice(1)||"*",(X[ke]=X[ke]||[]).unshift(Ie)):(X[ke]=X[ke]||[]).push(Ie)}}function Yi(X,ve,Ie,ke){var st={},P=X===ei;function W(ye){var Se;return st[ye]=!0,B.each(X[ye]||[],function(Be,Fe){var qe=Fe(ve,Ie,ke);if(typeof qe=="string"&&!P&&!st[qe])return ve.dataTypes.unshift(qe),W(qe),!1;if(P)return!(Se=qe)}),Se}return W(ve.dataTypes[0])||!st["*"]&&W("*")}function Uo(X,ve){var Ie,ke,st=B.ajaxSettings.flatOptions||{};for(Ie in ve)ve[Ie]!==void 0&&((st[Ie]?X:ke||(ke={}))[Ie]=ve[Ie]);return ke&&B.extend(!0,X,ke),X}function Oi(X,ve,Ie){for(var ke,st,P,W,ye=X.contents,Se=X.dataTypes;Se[0]==="*";)Se.shift(),ke===void 0&&(ke=X.mimeType||ve.getResponseHeader("Content-Type"));if(ke){for(st in ye)if(ye[st]&&ye[st].test(ke)){Se.unshift(st);break}}if(Se[0]in Ie)P=Se[0];else{for(st in Ie){if(!Se[0]||X.converters[st+" "+Se[0]]){P=st;break}W||(W=st)}P=P||W}if(P)return P!==Se[0]&&Se.unshift(P),Ie[P]}function Co(X,ve,Ie,ke){var st,P,W,ye,Se,Be={},Fe=X.dataTypes.slice();if(Fe[1])for(W in X.converters)Be[W.toLowerCase()]=X.converters[W];for(P=Fe.shift();P;)if(X.responseFields[P]&&(Ie[X.responseFields[P]]=ve),!Se&&ke&&X.dataFilter&&(ve=X.dataFilter(ve,X.dataType)),Se=P,P=Fe.shift(),P){if(P==="*")P=Se;else if(Se!=="*"&&Se!==P){if(W=Be[Se+" "+P]||Be["* "+P],!W){for(st in Be)if(ye=st.split(" "),ye[1]===P&&(W=Be[Se+" "+ye[0]]||Be["* "+ye[0]],W)){W===!0?W=Be[st]:Be[st]!==!0&&(P=ye[0],Fe.unshift(ye[1]));break}}if(W!==!0)if(W&&X.throws)ve=W(ve);else try{ve=W(ve)}catch(qe){return{state:"parsererror",error:W?qe:"No conversion from "+Se+" to "+P}}}}return{state:"success",data:ve}}B.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Di.href,type:"GET",isLocal:an.test(Di.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ii,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":B.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(X,ve){return ve?Uo(Uo(X,B.ajaxSettings),ve):Uo(B.ajaxSettings,X)},ajaxPrefilter:Ji(yr),ajaxTransport:Ji(ei),ajax:function(X,ve){typeof X=="object"&&(ve=X,X=void 0),ve=ve||{};var Ie,ke,st,P,W,ye,Se,Be,Fe,qe,Mt=B.ajaxSetup({},ve),Lt=Mt.context||Mt,vn=Mt.context&&(Lt.nodeType||Lt.jquery)?B(Lt):B.event,Zn=B.Deferred(),Qn=B.Callbacks("once memory"),jn=Mt.statusCode||{},pr={},vi={},co="canceled",di={readyState:0,getResponseHeader:function(qi){var is;if(Se){if(!P)for(P={};is=Ht.exec(st);)P[is[1].toLowerCase()+" "]=(P[is[1].toLowerCase()+" "]||[]).concat(is[2]);is=P[qi.toLowerCase()+" "]}return is==null?null:is.join(", ")},getAllResponseHeaders:function(){return Se?st:null},setRequestHeader:function(qi,is){return Se==null&&(qi=vi[qi.toLowerCase()]=vi[qi.toLowerCase()]||qi,pr[qi]=is),this},overrideMimeType:function(qi){return Se==null&&(Mt.mimeType=qi),this},statusCode:function(qi){var is;if(qi)if(Se)di.always(qi[di.status]);else for(is in qi)jn[is]=[jn[is],qi[is]];return this},abort:function(qi){var is=qi||co;return Ie&&Ie.abort(is),Zo(0,is),this}};if(Zn.promise(di),Mt.url=((X||Mt.url||Di.href)+"").replace(wr,Di.protocol+"//"),Mt.type=ve.method||ve.type||Mt.method||Mt.type,Mt.dataTypes=(Mt.dataType||"*").toLowerCase().match(vt)||[""],Mt.crossDomain==null){ye=N.createElement("a");try{ye.href=Mt.url,ye.href=ye.href,Mt.crossDomain=to.protocol+"//"+to.host!=ye.protocol+"//"+ye.host}catch(qi){Mt.crossDomain=!0}}if(Mt.data&&Mt.processData&&typeof Mt.data!="string"&&(Mt.data=B.param(Mt.data,Mt.traditional)),Yi(yr,Mt,ve,di),Se)return di;Be=B.event&&Mt.global,Be&&B.active++===0&&B.event.trigger("ajaxStart"),Mt.type=Mt.type.toUpperCase(),Mt.hasContent=!Ln.test(Mt.type),ke=Mt.url.replace(Ke,""),Mt.hasContent?Mt.data&&Mt.processData&&(Mt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Mt.data=Mt.data.replace(Ae,"+")):(qe=Mt.url.slice(ke.length),Mt.data&&(Mt.processData||typeof Mt.data=="string")&&(ke+=($o.test(ke)?"&":"?")+Mt.data,delete Mt.data),Mt.cache===!1&&(ke=ke.replace(pt,"$1"),qe=($o.test(ke)?"&":"?")+"_="+Jr.guid+++qe),Mt.url=ke+qe),Mt.ifModified&&(B.lastModified[ke]&&di.setRequestHeader("If-Modified-Since",B.lastModified[ke]),B.etag[ke]&&di.setRequestHeader("If-None-Match",B.etag[ke])),(Mt.data&&Mt.hasContent&&Mt.contentType!==!1||ve.contentType)&&di.setRequestHeader("Content-Type",Mt.contentType),di.setRequestHeader("Accept",Mt.dataTypes[0]&&Mt.accepts[Mt.dataTypes[0]]?Mt.accepts[Mt.dataTypes[0]]+(Mt.dataTypes[0]!=="*"?", "+Ii+"; q=0.01":""):Mt.accepts["*"]);for(Fe in Mt.headers)di.setRequestHeader(Fe,Mt.headers[Fe]);if(Mt.beforeSend&&(Mt.beforeSend.call(Lt,di,Mt)===!1||Se))return di.abort();if(co="abort",Qn.add(Mt.complete),di.done(Mt.success),di.fail(Mt.error),Ie=Yi(ei,Mt,ve,di),!Ie)Zo(-1,"No Transport");else{if(di.readyState=1,Be&&vn.trigger("ajaxSend",[di,Mt]),Se)return di;Mt.async&&Mt.timeout>0&&(W=ie.setTimeout(function(){di.abort("timeout")},Mt.timeout));try{Se=!1,Ie.send(pr,Zo)}catch(qi){if(Se)throw qi;Zo(-1,qi)}}function Zo(qi,is,Js,Yo){var Ss,ko,vs,xa,ua,_s=is;Se||(Se=!0,W&&ie.clearTimeout(W),Ie=void 0,st=Yo||"",di.readyState=qi>0?4:0,Ss=qi>=200&&qi<300||qi===304,Js&&(xa=Oi(Mt,di,Js)),!Ss&&B.inArray("script",Mt.dataTypes)>-1&&B.inArray("json",Mt.dataTypes)<0&&(Mt.converters["text script"]=function(){}),xa=Co(Mt,xa,di,Ss),Ss?(Mt.ifModified&&(ua=di.getResponseHeader("Last-Modified"),ua&&(B.lastModified[ke]=ua),ua=di.getResponseHeader("etag"),ua&&(B.etag[ke]=ua)),qi===204||Mt.type==="HEAD"?_s="nocontent":qi===304?_s="notmodified":(_s=xa.state,ko=xa.data,vs=xa.error,Ss=!vs)):(vs=_s,(qi||!_s)&&(_s="error",qi<0&&(qi=0))),di.status=qi,di.statusText=(is||_s)+"",Ss?Zn.resolveWith(Lt,[ko,_s,di]):Zn.rejectWith(Lt,[di,_s,vs]),di.statusCode(jn),jn=void 0,Be&&vn.trigger(Ss?"ajaxSuccess":"ajaxError",[di,Mt,Ss?ko:vs]),Qn.fireWith(Lt,[di,_s]),Be&&(vn.trigger("ajaxComplete",[di,Mt]),--B.active||B.event.trigger("ajaxStop")))}return di},getJSON:function(X,ve,Ie){return B.get(X,ve,Ie,"json")},getScript:function(X,ve){return B.get(X,void 0,ve,"script")}}),B.each(["get","post"],function(X,ve){B[ve]=function(Ie,ke,st,P){return v(ke)&&(P=P||st,st=ke,ke=void 0),B.ajax(B.extend({url:Ie,type:ve,dataType:P,data:ke,success:st},B.isPlainObject(Ie)&&Ie))}}),B.ajaxPrefilter(function(X){var ve;for(ve in X.headers)ve.toLowerCase()==="content-type"&&(X.contentType=X.headers[ve]||"")}),B._evalUrl=function(X,ve,Ie){return B.ajax({url:X,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ke){B.globalEval(ke,ve,Ie)}})},B.fn.extend({wrapAll:function(X){var ve;return this[0]&&(v(X)&&(X=X.call(this[0])),ve=B(X,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&ve.insertBefore(this[0]),ve.map(function(){for(var Ie=this;Ie.firstElementChild;)Ie=Ie.firstElementChild;return Ie}).append(this)),this},wrapInner:function(X){return v(X)?this.each(function(ve){B(this).wrapInner(X.call(this,ve))}):this.each(function(){var ve=B(this),Ie=ve.contents();Ie.length?Ie.wrapAll(X):ve.append(X)})},wrap:function(X){var ve=v(X);return this.each(function(Ie){B(this).wrapAll(ve?X.call(this,Ie):X)})},unwrap:function(X){return this.parent(X).not("body").each(function(){B(this).replaceWith(this.childNodes)}),this}}),B.expr.pseudos.hidden=function(X){return!B.expr.pseudos.visible(X)},B.expr.pseudos.visible=function(X){return!!(X.offsetWidth||X.offsetHeight||X.getClientRects().length)},B.ajaxSettings.xhr=function(){try{return new ie.XMLHttpRequest}catch(X){}};var Fs={0:200,1223:204},ss=B.ajaxSettings.xhr();d.cors=!!ss&&"withCredentials"in ss,d.ajax=ss=!!ss,B.ajaxTransport(function(X){var ve,Ie;if(d.cors||ss&&!X.crossDomain)return{send:function(ke,st){var P,W=X.xhr();if(W.open(X.type,X.url,X.async,X.username,X.password),X.xhrFields)for(P in X.xhrFields)W[P]=X.xhrFields[P];X.mimeType&&W.overrideMimeType&&W.overrideMimeType(X.mimeType),!X.crossDomain&&!ke["X-Requested-With"]&&(ke["X-Requested-With"]="XMLHttpRequest");for(P in ke)W.setRequestHeader(P,ke[P]);ve=function(ye){return function(){ve&&(ve=Ie=W.onload=W.onerror=W.onabort=W.ontimeout=W.onreadystatechange=null,ye==="abort"?W.abort():ye==="error"?typeof W.status!="number"?st(0,"error"):st(W.status,W.statusText):st(Fs[W.status]||W.status,W.statusText,(W.responseType||"text")!=="text"||typeof W.responseText!="string"?{binary:W.response}:{text:W.responseText},W.getAllResponseHeaders()))}},W.onload=ve(),Ie=W.onerror=W.ontimeout=ve("error"),W.onabort!==void 0?W.onabort=Ie:W.onreadystatechange=function(){W.readyState===4&&ie.setTimeout(function(){ve&&Ie()})},ve=ve("abort");try{W.send(X.hasContent&&X.data||null)}catch(ye){if(ve)throw ye}},abort:function(){ve&&ve()}}}),B.ajaxPrefilter(function(X){X.crossDomain&&(X.contents.script=!1)}),B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(X){return B.globalEval(X),X}}}),B.ajaxPrefilter("script",function(X){X.cache===void 0&&(X.cache=!1),X.crossDomain&&(X.type="GET")}),B.ajaxTransport("script",function(X){if(X.crossDomain||X.scriptAttrs){var ve,Ie;return{send:function(ke,st){ve=B("<script>").attr(X.scriptAttrs||{}).prop({charset:X.scriptCharset,src:X.url}).on("load error",Ie=function(P){ve.remove(),Ie=null,P&&st(P.type==="error"?404:200,P.type)}),N.head.appendChild(ve[0])},abort:function(){Ie&&Ie()}}}});var qo=[],js=/(=)\?(?=&|$)|\?\?/;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var X=qo.pop()||B.expando+"_"+Jr.guid++;return this[X]=!0,X}}),B.ajaxPrefilter("json jsonp",function(X,ve,Ie){var ke,st,P,W=X.jsonp!==!1&&(js.test(X.url)?"url":typeof X.data=="string"&&(X.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&js.test(X.data)&&"data");if(W||X.dataTypes[0]==="jsonp")return ke=X.jsonpCallback=v(X.jsonpCallback)?X.jsonpCallback():X.jsonpCallback,W?X[W]=X[W].replace(js,"$1"+ke):X.jsonp!==!1&&(X.url+=($o.test(X.url)?"&":"?")+X.jsonp+"="+ke),X.converters["script json"]=function(){return P||B.error(ke+" was not called"),P[0]},X.dataTypes[0]="json",st=ie[ke],ie[ke]=function(){P=arguments},Ie.always(function(){st===void 0?B(ie).removeProp(ke):ie[ke]=st,X[ke]&&(X.jsonpCallback=ve.jsonpCallback,qo.push(ke)),P&&v(st)&&st(P[0]),P=st=void 0}),"script"}),d.createHTMLDocument=function(){var X=N.implementation.createHTMLDocument("").body;return X.innerHTML="<form></form><form></form>",X.childNodes.length===2}(),B.parseHTML=function(X,ve,Ie){if(typeof X!="string")return[];typeof ve=="boolean"&&(Ie=ve,ve=!1);var ke,st,P;return ve||(d.createHTMLDocument?(ve=N.implementation.createHTMLDocument(""),ke=ve.createElement("base"),ke.href=N.location.href,ve.head.appendChild(ke)):ve=N),st=Oe.exec(X),P=!Ie&&[],st?[ve.createElement(st[1])]:(st=Wr([X],ve,P),P&&P.length&&B(P).remove(),B.merge([],st.childNodes))},B.fn.load=function(X,ve,Ie){var ke,st,P,W=this,ye=X.indexOf(" ");return ye>-1&&(ke=xi(X.slice(ye)),X=X.slice(0,ye)),v(ve)?(Ie=ve,ve=void 0):ve&&typeof ve=="object"&&(st="POST"),W.length>0&&B.ajax({url:X,type:st||"GET",dataType:"html",data:ve}).done(function(Se){P=arguments,W.html(ke?B("<div>").append(B.parseHTML(Se)).find(ke):Se)}).always(Ie&&function(Se,Be){W.each(function(){Ie.apply(this,P||[Se.responseText,Be,Se])})}),this},B.expr.pseudos.animated=function(X){return B.grep(B.timers,function(ve){return X===ve.elem}).length},B.offset={setOffset:function(X,ve,Ie){var ke,st,P,W,ye,Se,Be,Fe=B.css(X,"position"),qe=B(X),Mt={};Fe==="static"&&(X.style.position="relative"),ye=qe.offset(),P=B.css(X,"top"),Se=B.css(X,"left"),Be=(Fe==="absolute"||Fe==="fixed")&&(P+Se).indexOf("auto")>-1,Be?(ke=qe.position(),W=ke.top,st=ke.left):(W=parseFloat(P)||0,st=parseFloat(Se)||0),v(ve)&&(ve=ve.call(X,Ie,B.extend({},ye))),ve.top!=null&&(Mt.top=ve.top-ye.top+W),ve.left!=null&&(Mt.left=ve.left-ye.left+st),"using"in ve?ve.using.call(X,Mt):qe.css(Mt)}},B.fn.extend({offset:function(X){if(arguments.length)return X===void 0?this:this.each(function(st){B.offset.setOffset(this,X,st)});var ve,Ie,ke=this[0];if(ke)return ke.getClientRects().length?(ve=ke.getBoundingClientRect(),Ie=ke.ownerDocument.defaultView,{top:ve.top+Ie.pageYOffset,left:ve.left+Ie.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var X,ve,Ie,ke=this[0],st={top:0,left:0};if(B.css(ke,"position")==="fixed")ve=ke.getBoundingClientRect();else{for(ve=this.offset(),Ie=ke.ownerDocument,X=ke.offsetParent||Ie.documentElement;X&&(X===Ie.body||X===Ie.documentElement)&&B.css(X,"position")==="static";)X=X.parentNode;X&&X!==ke&&X.nodeType===1&&(st=B(X).offset(),st.top+=B.css(X,"borderTopWidth",!0),st.left+=B.css(X,"borderLeftWidth",!0))}return{top:ve.top-st.top-B.css(ke,"marginTop",!0),left:ve.left-st.left-B.css(ke,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var X=this.offsetParent;X&&B.css(X,"position")==="static";)X=X.offsetParent;return X||Ut})}}),B.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(X,ve){var Ie=ve==="pageYOffset";B.fn[X]=function(ke){return ci(this,function(st,P,W){var ye;if(x(st)?ye=st:st.nodeType===9&&(ye=st.defaultView),W===void 0)return ye?ye[ve]:st[P];ye?ye.scrollTo(Ie?ye.pageXOffset:W,Ie?W:ye.pageYOffset):st[P]=W},X,ke,arguments.length)}}),B.each(["top","left"],function(X,ve){B.cssHooks[ve]=ft(d.pixelPosition,function(Ie,ke){if(ke)return ke=dt(Ie,ve),_e.test(ke)?B(Ie).position()[ve]+"px":ke})}),B.each({Height:"height",Width:"width"},function(X,ve){B.each({padding:"inner"+X,content:ve,"":"outer"+X},function(Ie,ke){B.fn[ke]=function(st,P){var W=arguments.length&&(Ie||typeof st!="boolean"),ye=Ie||(st===!0||P===!0?"margin":"border");return ci(this,function(Se,Be,Fe){var qe;return x(Se)?ke.indexOf("outer")===0?Se["inner"+X]:Se.document.documentElement["client"+X]:Se.nodeType===9?(qe=Se.documentElement,Math.max(Se.body["scroll"+X],qe["scroll"+X],Se.body["offset"+X],qe["offset"+X],qe["client"+X])):Fe===void 0?B.css(Se,Be,ye):B.style(Se,Be,Fe,ye)},ve,W?st:void 0,W)}})}),B.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(X,ve){B.fn[ve]=function(Ie){return this.on(ve,Ie)}}),B.fn.extend({bind:function(X,ve,Ie){return this.on(X,null,ve,Ie)},unbind:function(X,ve){return this.off(X,null,ve)},delegate:function(X,ve,Ie,ke){return this.on(ve,X,Ie,ke)},undelegate:function(X,ve,Ie){return arguments.length===1?this.off(X,"**"):this.off(ve,X||"**",Ie)},hover:function(X,ve){return this.on("mouseenter",X).on("mouseleave",ve||X)}}),B.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(X,ve){B.fn[ve]=function(Ie,ke){return arguments.length>0?this.on(ve,null,Ie,ke):this.trigger(ve)}});var Zs=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;B.proxy=function(X,ve){var Ie,ke,st;if(typeof ve=="string"&&(Ie=X[ve],ve=X,X=Ie),!!v(X))return ke=a.call(arguments,2),st=function(){return X.apply(ve||this,ke.concat(a.call(arguments)))},st.guid=X.guid=X.guid||B.guid++,st},B.holdReady=function(X){X?B.readyWait++:B.ready(!0)},B.isArray=Array.isArray,B.parseJSON=JSON.parse,B.nodeName=z,B.isFunction=v,B.isWindow=x,B.camelCase=Li,B.type=$,B.now=Date.now,B.isNumeric=function(X){var ve=B.type(X);return(ve==="number"||ve==="string")&&!isNaN(X-parseFloat(X))},B.trim=function(X){return X==null?"":(X+"").replace(Zs,"$1")},V=[],J=function(){return B}.apply(O,V),J!==void 0&&(bt.exports=J);var Mo=ie.jQuery,la=ie.$;return B.noConflict=function(X){return ie.$===B&&(ie.$=la),X&&ie.jQuery===B&&(ie.jQuery=Mo),B},typeof T=="undefined"&&(ie.jQuery=ie.$=B),B})},75823:function(bt,O,V){"use strict";V.r(O),V.d(O,{default:function(){return b}});var J=V(44091);function ie(u){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,J.isAnyArray)(u))throw new TypeError("input must be an array");if(u.length===0)throw new TypeError("input must not be empty");var o=a.fromIndex,l=o===void 0?0:o,r=a.toIndex,e=r===void 0?u.length:r;if(l<0||l>=u.length||!Number.isInteger(l))throw new Error("fromIndex must be a positive integer smaller than length");if(e<=l||e>u.length||!Number.isInteger(e))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var t=u[l],s=l+1;s<e;s++)u[s]>t&&(t=u[s]);return t}function T(u){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,J.isAnyArray)(u))throw new TypeError("input must be an array");if(u.length===0)throw new TypeError("input must not be empty");var o=a.fromIndex,l=o===void 0?0:o,r=a.toIndex,e=r===void 0?u.length:r;if(l<0||l>=u.length||!Number.isInteger(l))throw new Error("fromIndex must be a positive integer smaller than length");if(e<=l||e>u.length||!Number.isInteger(e))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var t=u[l],s=l+1;s<e;s++)u[s]<t&&(t=u[s]);return t}function b(u){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if((0,J.isAnyArray)(u)){if(u.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var o;if(a.output!==void 0){if(!(0,J.isAnyArray)(a.output))throw new TypeError("output option must be an array if specified");o=a.output}else o=new Array(u.length);var l=T(u),r=ie(u);if(l===r)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var e=a.min,t=e===void 0?a.autoMinMax?l:0:e,s=a.max,h=s===void 0?a.autoMinMax?r:1:s;if(t>=h)throw new RangeError("min option must be smaller than max option");for(var m=(h-t)/(r-l),d=0;d<u.length;d++)o[d]=(u[d]-l)*m+t;return o}},40582:function(bt,O,V){var J=V(89550),ie=V(68854),T=V(36820),b=V(43650),u=V(56601),a=[0,0];bt.exports.x7=function(l,r,e,t,s){return J(l,e,t),T(l,l),ie(r,-l[1],l[0]),ie(a,-e[1],e[0]),s/u(r,a)},bt.exports.mJ=function(l,r){return ie(l,-r[1],r[0]),l},bt.exports.o7=function(l,r,e){return b(l,r,e),T(l,l),l}},42687:function(bt,O,V){"use strict";V.d(O,{Z:function(){return zn}});var J=V(67294),ie=V(73935),T=V(96486),b=V.n(T),u=V(1186),a=V(19755),o=V.n(a);function l($e,Xt){var Rt=$e==null?null:typeof Symbol!="undefined"&&$e[Symbol.iterator]||$e["@@iterator"];if(Rt!=null){var _t,Tt,at,ce,ut=[],Ze=!0,Wt=!1;try{if(at=(Rt=Rt.call($e)).next,Xt===0){if(Object(Rt)!==Rt)return;Ze=!1}else for(;!(Ze=(_t=at.call(Rt)).done)&&(ut.push(_t.value),ut.length!==Xt);Ze=!0);}catch(Ut){Wt=!0,Tt=Ut}finally{try{if(!Ze&&Rt.return!=null&&(ce=Rt.return(),Object(ce)!==ce))return}finally{if(Wt)throw Tt}}return ut}}function r($e){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Xt){return typeof Xt}:function(Xt){return Xt&&typeof Symbol=="function"&&Xt.constructor===Symbol&&Xt!==Symbol.prototype?"symbol":typeof Xt},r($e)}function e($e,Xt){if(!($e instanceof Xt))throw new TypeError("Cannot call a class as a function")}function t($e,Xt){for(var Rt=0;Rt<Xt.length;Rt++){var _t=Xt[Rt];_t.enumerable=_t.enumerable||!1,_t.configurable=!0,"value"in _t&&(_t.writable=!0),Object.defineProperty($e,q(_t.key),_t)}}function s($e,Xt,Rt){return Xt&&t($e.prototype,Xt),Rt&&t($e,Rt),Object.defineProperty($e,"prototype",{writable:!1}),$e}function h($e,Xt,Rt){return Xt=q(Xt),Xt in $e?Object.defineProperty($e,Xt,{value:Rt,enumerable:!0,configurable:!0,writable:!0}):$e[Xt]=Rt,$e}function m($e,Xt){if(typeof Xt!="function"&&Xt!==null)throw new TypeError("Super expression must either be null or a function");$e.prototype=Object.create(Xt&&Xt.prototype,{constructor:{value:$e,writable:!0,configurable:!0}}),Object.defineProperty($e,"prototype",{writable:!1}),Xt&&v($e,Xt)}function d($e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Rt){return Rt.__proto__||Object.getPrototypeOf(Rt)},d($e)}function v($e,Xt){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_t,Tt){return _t.__proto__=Tt,_t},v($e,Xt)}function x(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($e){return!1}}function N($e){if($e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e}function F($e,Xt){if(Xt&&(typeof Xt=="object"||typeof Xt=="function"))return Xt;if(Xt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N($e)}function ae($e){var Xt=x();return function(){var _t=d($e),Tt;if(Xt){var at=d(this).constructor;Tt=Reflect.construct(_t,arguments,at)}else Tt=_t.apply(this,arguments);return F(this,Tt)}}function $($e,Xt){for(;!Object.prototype.hasOwnProperty.call($e,Xt)&&($e=d($e),$e!==null););return $e}function te(){return typeof Reflect!="undefined"&&Reflect.get?te=Reflect.get.bind():te=function(Xt,Rt,_t){var Tt=$(Xt,Rt);if(Tt){var at=Object.getOwnPropertyDescriptor(Tt,Rt);return at.get?at.get.call(arguments.length<3?Xt:_t):at.value}},te.apply(this,arguments)}function fe($e,Xt){return B($e)||l($e,Xt)||he($e,Xt)||ee()}function B($e){if(Array.isArray($e))return $e}function he($e,Xt){if($e){if(typeof $e=="string")return z($e,Xt);var Rt=Object.prototype.toString.call($e).slice(8,-1);if(Rt==="Object"&&$e.constructor&&(Rt=$e.constructor.name),Rt==="Map"||Rt==="Set")return Array.from($e);if(Rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rt))return z($e,Xt)}}function z($e,Xt){(Xt==null||Xt>$e.length)&&(Xt=$e.length);for(var Rt=0,_t=new Array(Xt);Rt<Xt;Rt++)_t[Rt]=$e[Rt];return _t}function ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe($e,Xt){var Rt=typeof Symbol!="undefined"&&$e[Symbol.iterator]||$e["@@iterator"];if(!Rt){if(Array.isArray($e)||(Rt=he($e))||Xt&&$e&&typeof $e.length=="number"){Rt&&($e=Rt);var _t=0,Tt=function(){};return{s:Tt,n:function(){return _t>=$e.length?{done:!0}:{done:!1,value:$e[_t++]}},e:function(Ze){throw Ze},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at=!0,ce=!1,ut;return{s:function(){Rt=Rt.call($e)},n:function(){var Ze=Rt.next();return at=Ze.done,Ze},e:function(Ze){ce=!0,ut=Ze},f:function(){try{!at&&Rt.return!=null&&Rt.return()}finally{if(ce)throw ut}}}}function S($e,Xt){if(typeof $e!="object"||$e===null)return $e;var Rt=$e[Symbol.toPrimitive];if(Rt!==void 0){var _t=Rt.call($e,Xt||"default");if(typeof _t!="object")return _t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Xt==="string"?String:Number)($e)}function q($e){var Xt=S($e,"string");return typeof Xt=="symbol"?Xt:String(Xt)}var M=function($e){m(Rt,$e);var Xt=ae(Rt);function Rt(_t){var Tt;return e(this,Rt),Tt=Xt.call(this,_t),h(N(Tt),"_precollide",function(at,ce,ut){var Ze={},Wt=[],Ut={},jt=pe(at),xt;try{for(jt.s();!(xt=jt.n()).done;){var $t=xt.value;Ze[$t.left]||(Ze[$t.left]=[]),Ze[$t.left].push($t)}}catch(xn){jt.e(xn)}finally{jt.f()}Wt=Object.keys(Ze).sort(function(xn,Or){return parseInt(xn)-parseInt(Or)}),Wt.forEach(function(xn){var Or=Ze[xn],Pr=Or.sort(function(cr,ki){return cr.top-ki.top}).map(function(cr){return[cr.left,cr.top]});Or=Or.sort(function(cr,ki){return cr.order-ki.order}),Ze[xn].forEach(function(cr,ki){cr.left=Pr[ki][0],cr.top=Pr[ki][1]})});var Un={};Wt.forEach(function(xn){var Or=Ze[xn];Un[xn]=0;for(var Pr=0;Pr<Or.length;Pr++)Un[xn]=Math.max(Un[xn],Or[Pr].left+Or[Pr].width+ut);if(Or.length!==1){Or=Or.sort(function(kr,Ui){return kr.top-Ui.top});for(var cr=0;cr<Or.length-1;cr++){var ki=Or[cr],Vr=Or[cr+1];ki.top+ki.height>=Vr.top&&(Vr.top=ki.top+ki.height+ce),ki.top+ki.height+ce<Vr.top&&(Vr.top=ki.top+ki.height+ce)}}});for(var qn=function(){var Or=Wt[rr],Pr=Wt[rr+1],cr=(0,T.get)(Ze,[Pr,0,"left"],Pr);if(cr-Un[Or]<ut){Ze[Pr].forEach(function(Vr){Vr.left=Un[Or]+ut});var ki=Un[Or]+ut-cr;Un[Pr]+=ki}},rr=0;rr<Wt.length-1;rr++)qn();return Wt.forEach(function(xn){var Or=Ze[xn];Or.forEach(function(Pr){Ut[Pr.id]=Pr})}),Ut}),Tt._renderPromise=Promise.resolve(),Tt._focusItem=null,Tt._enableHoverChain=_t.data.enableHoverChain,Tt.attachEvent(),Tt}return s(Rt,[{key:"attachEvent",value:function(){var Tt=this;this._enableHoverChain&&(this.on("custom.field.hover",function(at){Tt.focusChain(at.node.id,at.fieldId,"hover-chain")}),this.on("custom.field.unHover",function(at){Tt.unfocusChain(at.node.id,at.fieldId,"hover-chain")})),this.on("custom.edge.redraw",function(at){var ce=at.node,ut=at.points,Ze=[];ut?ut.forEach(function(Wt){Ze=Ze.concat(Tt.getNeighborEdgesByEndpoint(ce.id,Wt.id))}):Ze=Tt.getNeighborEdges(ce.id),Ze.forEach(function(Wt){return Wt.redraw()})})}},{key:"focus",value:function(Tt){this.unfocus();var at=this._focusItem=this.getNode(Tt);at&&at.focus()}},{key:"unfocus",value:function(){this._focusItem&&(this._focusItem.unfocus(),this._focusItem=null)}},{key:"focusChain",value:function(Tt,at,ce){var ut=this._findChain(Tt,at);ut.edges.forEach(function(Ze){Ze.focusChain(ce)}),ut.fileds.forEach(function(Ze){o()(Ze).addClass(ce)})}},{key:"unfocusChain",value:function(Tt,at,ce){var ut=this._findChain(Tt,at);ut.edges.forEach(function(Ze){Ze.unfocusChain(ce)}),ut.fileds.forEach(function(Ze){o()(Ze).removeClass(ce)})}},{key:"_findChain",value:function(Tt,at){for(var ce=this,ut=[],Ze=[],Wt=[{nodeId:Tt,fieldId:at,type:"both"}],Ut=function(){var $t=Wt.pop(),Un=ce.getNode($t.nodeId);if(Un.options.isCollapse)return"continue";var qn=(0,T.find)(Un.fieldsList,function(Pr){return Pr.id===$t.fieldId});Ze.push(qn.dom);var rr=ce.getNeighborEdges(Un.id),xn=[],Or=[];($t.type==="both"||$t.type==="source")&&(xn=rr.filter(function(Pr){return Pr.options.sourceNode===Un.id&&Pr.options.source==="".concat($t.fieldId,"-right")})),($t.type==="both"||$t.type==="target")&&(Or=rr.filter(function(Pr){return Pr.options.targetNode===Un.id&&Pr.options.target==="".concat($t.fieldId,"-left")})),ut=ut.concat(xn).concat(Or),xn.forEach(function(Pr){Wt.push({nodeId:Pr.options.targetNode,fieldId:Pr.options.target.replace("-left",""),type:"source"})}),Or.forEach(function(Pr){Wt.push({nodeId:Pr.options.sourceNode,fieldId:Pr.options.source.replace("-right",""),type:"target"})})};Wt.length>0;)var jt=Ut();return{edges:ut,fileds:Ze}}},{key:"_fixCenterNode",value:function(Tt,at){var ce=this.getNode(at);if(ce){var ut=(0,T.find)(Tt,function(Ut){return Ut.id===at}),Ze=ut.left-ce.left,Wt=ut.top-ce.top;Tt.forEach(function(Ut){Ut.left-=Ze,Ut.top-=Wt})}}},{key:"relayout",value:function(Tt,at){var ce=this.nodes,ut=this.edges,Ze=ce.map(function(xt,$t){return(0,T.assign)({left:xt.left,top:xt.top,order:$t},xt.options)}),Wt=[];at?Wt=Tt.edges||[]:Wt=ut.map(function(xt){return{source:xt.sourceNode.id,target:xt.targetNode.id}});var Ut=50,jt=70;u.Layout.dagreLayout({rankdir:"LR",nodesep:Ut,ranksep:jt,data:{nodes:Ze,edges:Wt}}),this._precollide(Ze,Ut,jt),Tt&&Tt.centerNodeId&&this._fixCenterNode(Ze,Tt.centerNodeId),!at&&ut.length>30&&o()(this.svg).css("visibility","hidden"),this.nodes.forEach(function(xt,$t){var Un=Ze[$t].left,qn=Ze[$t].top;(xt.top!==qn||xt.left!==Un)&&(xt.options.top=qn,xt.options.left=Un,xt.moveTo(Un,qn))}),!at&&ut.length>30&&o()(this.svg).css("visibility","visible")}},{key:"addNodes",value:function(Tt,at){var ce=this,ut=te(d(Rt.prototype),"addNodes",this).call(this,Tt,at);return ut.forEach(function(Ze){Ze._canvas=ce}),ut}}]),Rt}(u.Canvas),I=function(Xt){return J.isValidElement(Xt)},j=function($e){var Xt=$e.content,Rt=$e.container[0],_t=$e.width;_t||(_t="150px"),typeof $e.width=="number"&&(_t=$e.width+"px");var Tt='<div style="width: '+_t+'"></div>';if(Xt)I(Xt)?Tt=ie.render(Xt,Rt):Tt=o()(Xt);else{Tt=o()('<div class="no-data" style="width: '+_t+'"></div>');var at=o()('<i class="no-data-icon table-build-icon table-build-icon-kongshuju"></i>');Tt.append(at)}return Tt},ue=function($e){m(Rt,$e);var Xt=ae(Rt);function Rt(_t){var Tt;return e(this,Rt),Tt=Xt.call(this,_t),Tt.TITLE_HEIGHT=34,Tt.ROW_HEIGHT=26,Tt.COLUMN_WIDTH=60,Tt.fieldsList=[],Tt.titlesList=[],Tt._renderPromise=Promise.resolve(),Tt._isRendering=!1,Tt}return s(Rt,[{key:"mounted",value:function(){this._createNodeEndpoint(!0),this.width=this.options.width=o()(this.dom).width(),this.height=this.options.height=o()(this.dom).height()}},{key:"draw",value:function(Tt){var at=Tt.dom;at||(at=o()("<div></div>").attr("class","node table-node").attr("id",Tt.name));var ce=o()(at),ut=(0,T.get)(this,"options.classname");return ut&&ce.addClass(ut),Tt.top!==void 0&&ce.css("top",Tt.top),Tt.left!==void 0&&ce.css("left",Tt.left),this._createTableName(ce),this._createFields(ce),ce[0]}},{key:"collapse",value:function(Tt){var at=this;if(Tt!==this.options.isCollapse){if(this.options.isCollapse=Tt,!Tt)this._createFields(),this._createNodeEndpoint();else{this.fieldsList.forEach(function(ut){o()(ut.dom).off()});var ce=this.endpoints.filter(function(ut){return!ut.options._isNodeSelf}).map(function(ut){return ut.id});ce.forEach(function(ut){at.removeEndpoint(ut)}),o()(this.dom).find(".field").remove(),this.fieldsList=[]}this.width=this.options.width=o()(this.dom).width(),this.height=this.options.height=o()(this.dom).height()}}},{key:"focus",value:function(){o()(this.dom).addClass("focus"),this.options.minimapActive=!0}},{key:"unfocus",value:function(){o()(this.dom).removeClass("focus"),this.options.minimapActive=!1}},{key:"redrawTitle",value:function(){o()(this.dom).find(".operator").remove(),this._createTableName(o()(this.dom),!0)}},{key:"_addEventListener",value:function(){var Tt=this;o()(this.dom).on("mousedown",function(at){var ce=0;at.button===ce&&(["SELECT","INPUT","RADIO","CHECKBOX","TEXTAREA"].includes(at.target.nodeName)||at.preventDefault(),Tt.draggable?(Tt._isMoving=!0,Tt.emit("InnerEvents",{type:"node:dragBegin",data:Tt})):Tt.emit("InnerEvents",{type:"node:mouseDown",data:Tt}))}),o()(this.dom).on("click",function(at){Tt.emit("system.node.click",{node:Tt}),Tt.emit("events",{type:"node:click",node:Tt})}),this.setDraggable(this.draggable)}},{key:"_createTableName",value:function(){var Tt=this,at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o()(this.dom),ce=arguments.length>1?arguments[1]:void 0,ut=(0,T.get)(this,"options.name"),Ze=(0,T.get)(this,"options._titleRender"),Wt=(0,T.get)(this,"options._operator"),Ut=ce?o()(this.dom).find(".title-con"):o()('<div class="title-con"></div>'),jt=ce?o()(this.dom).find(".title"):o()('<div class="title"></div>');if(this._isRendering)return!1;Ze?(this._isRendering=!0,(this._canvas?this._canvas._renderPromise:Promise.resolve()).then(function(){Tt._renderPromise=new Promise(function(qn,rr){(0,ie.render)(Ze(ut,Tt),jt[0],function(){if(Tt.height===0||Tt.width===0)Tt.width=Tt.options.width=o()(Tt.dom).width(),Tt.height=Tt.options.height=o()(Tt.dom).height(),Tt.endpoints.forEach(function(Or){return Or.updatePos()}),Tt.emit("custom.edge.redraw",{node:Tt});else{var xn=[];Tt.endpoints.forEach(function(Or){Or.options._isNodeSelf&&(Or.updatePos(),xn.push(Or))}),Tt.emit("custom.edge.redraw",{node:Tt,points:xn})}qn(),Tt._isRendering=!1})})})):ut&&jt.css({height:this.TITLE_HEIGHT+"px","line-height":this.TITLE_HEIGHT+"px"}),ce||Ut.append(jt);var xt=null;if(Wt&&(xt=o()('<div class="operator"></div>'),Wt.forEach(function(qn){var rr=o()('<div class="operator-item"></div>');(0,ie.render)(qn.icon,rr[0]),qn.onClick&&rr.on("click",qn.onClick.bind(Tt,Tt.options,Tt)),xt.append(rr)}),Ut.append(xt)),!ce){var $t=o()('<div class="point left-point"></div>'),Un=o()('<div class="point right-point"></div>');Ut.append($t).append(Un),this.titlesList=this.titlesList.concat([{id:"".concat(this.id,"-left"),dom:$t[0],type:"target"},{id:"".concat(this.id,"-right"),dom:Un[0],type:"source"}]),o()(at).append(Ut)}}},{key:"_createFields",value:function(){var Tt=this,at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o()(this.dom),ce=(0,T.get)(this,"options.fields"),ut=(0,T.get)(this,"options._columns"),Ze=(0,T.get)(this,"options.isCollapse"),Wt=ut[0].key,Ut=[];if(ce&&ce.length){if(Ze)return;ce.forEach(function($t,Un){var qn=o()('<div class="field"></div>');qn.css({height:Tt.ROW_HEIGHT+"px","line-height":Tt.ROW_HEIGHT+"px"}),ut.forEach(function(Or){if(Or.render){var Pr=o()('<span class="field-item"></span>');Pr.css("width",(Or.width||Tt.COLUMN_WIDTH)+"px"),(0,ie.render)(Or.render($t[Or.key],$t,Un),Pr[0]),qn.append(Pr)}else{var cr=o()('<span class="field-item">'.concat($t[Or.key],"</span>"));cr.css("width",(Or.width||Tt.COLUMN_WIDTH)+"px"),qn.append(cr)}Or.primaryKey&&(Wt=Or.key)});var rr=o()('<div class="point left-point hidden"></div>'),xn=o()('<div class="point right-point hidden"></div>');qn.append(rr).append(xn),Tt.options._enableHoverChain&&(o()(qn).on("mouseover",function(Or){Tt.emit("custom.field.hover",{node:Tt,fieldId:$t[Wt]})}),o()(qn).on("mouseout",function(Or){Tt.emit("custom.field.unHover",{node:Tt,fieldId:$t[Wt]})})),at.append(qn),Ut.push({id:$t[Wt],dom:qn})}),this.fieldsList=this.fieldsList.concat(Ut)}else{var jt=(0,T.get)(this.options,"_emptyContent");if(jt){var xt=j({content:jt,width:this.options._emptyWidth});at.append(xt),this.height=o()(at).outerHeight()}}return Ut}},{key:"_createNodeEndpoint",value:function(Tt){var at=this;Tt&&this.titlesList.forEach(function(ce){at.addEndpoint({id:ce.id,orientation:ce.type==="target"?[-1,0]:[1,0],dom:ce.dom,originId:at.id,type:ce.type,_isNodeSelf:!0})}),this.fieldsList.forEach(function(ce){at.addEndpoint({id:"".concat(ce.id,"-left"),orientation:[-1,0],dom:o()(ce.dom).find(".left-point")[0],originId:at.id,type:"target"}),at.addEndpoint({id:"".concat(ce.id,"-right"),orientation:[1,0],dom:o()(ce.dom).find(".right-point")[0],originId:at.id,type:"source"}),at.options.isCollapse&&o()(ce.dom).css({visibility:"visible",display:"none"})})}}]),Rt}(u.Node),se="Left",Ee="Right",Ce="Top",xe="Bottom",Oe=20,Le=.1,Ge=.01,He=15,Et=function(Xt,Rt){this.x=Xt,this.y=Rt};function Ct($e,Xt,Rt,_t,Tt){Xt.x=Xt.x||0,Xt.y=Xt.y||0,_t.x=_t.x||0,_t.y=_t.y||0;var at=Xt.x-_t.x,ce=Xt.y-_t.y,ut,Ze,Wt;if($e.push(new Et(Xt.x,Xt.y)),at*at<Ge&&ce*ce<Ge){$e.push(new Et(_t.x,_t.y));return}Rt===se?at>0&&ce*ce<Le&&Tt===Ee?(ut=_t,Ze=Tt):(at<0?ut=new Et(Xt.x-Oe,Xt.y):ce>0&&Tt===xe||ce<0&&Tt===Ce?ut=new Et(_t.x,Xt.y):Rt===Tt?(Wt=Math.min(Xt.x,_t.x)-Oe,ut=new Et(Wt,Xt.y)):ut=new Et(Xt.x-at/2,Xt.y),ce>0?Ze=Ce:Ze=xe):Rt===Ee?at<0&&ce*ce<Le&&Tt===se?(ut=_t,Ze=Tt):(at>0?ut=new Et(Xt.x+Oe,Xt.y):ce>0&&Tt===xe||ce<0&&Tt===Ce?ut=new Et(_t.x,Xt.y):Rt===Tt?(Wt=Math.max(Xt.x,_t.x)+Oe,ut=new Et(Wt,Xt.y)):ut=new Et(Xt.x-at/2,Xt.y),ce>0?Ze=Ce:Ze=xe):Rt===xe?at*at<Le&&ce<0&&Tt===Ce?(ut=_t,Ze=Tt):(ce>0?ut=new Et(Xt.x,Xt.y+Oe):at>0&&Tt===Ee||at<0&&Tt===se?ut=new Et(Xt.x,_t.y):Rt===Tt?(Wt=Math.max(Xt.y,_t.y)+Oe,ut=new Et(Xt.x,Wt)):ut=new Et(Xt.x,Xt.y-ce/2),at>0?Ze=se:Ze=Ee):Rt===Ce&&(at*at<Le&&ce>0&&Tt===xe?(ut=_t,Ze=Tt):(ce<0?ut=new Et(Xt.x,Xt.y-Oe):at>0&&Tt===Ee||at<0&&Tt===se?ut=new Et(Xt.x,_t.y):Rt===Tt?(Wt=Math.min(Xt.y,_t.y)-Oe,ut=new Et(Xt.x,Wt)):ut=new Et(Xt.x,Xt.y-ce/2),at>0?Ze=se:Ze=Ee)),Ct($e,ut,Ze,_t,Tt)}var Gt=function(Xt){return Xt.reduce(function(Rt,_t){return Rt.push(["L",_t.x,_t.y].join(" ")),Rt},[["M",Xt[0].x,Xt[0].y].join(" ")]).join(" ")};function At($e,Xt,Rt,_t,Tt){var at=function(jt){if(Tt){for(var xt=function(rr){var xn=b().some(Tt,function(Or){return Or===jt[rr]});if(xn)return{v:jt[rr]}},$t=0;$t<jt.length;$t++){var Un=xt($t);if(r(Un)==="object")return Un.v}return jt[0]}else return jt[0]},ce=Rt-$e,ut=_t-Xt,Ze=null,Wt=Math.abs(ut/ce);switch(ce===0||ut===0?(ce===0&&(Ze=ut>=0?at(["Top","Left","Right","Bottom"]):Ze,Ze=ut<0?at(["Bottom","Left","Right","Top"]):Ze),ut===0&&(Ze=ce>=0?at(["Right","Top","Bottom","Left"]):Ze,Ze=ce<0?at(["Left","Top","Bottom","Right"]):Ze)):ce>0&&ut>0?Wt>1?Ze=at(["Top","Left","Right","Bottom"]):Ze=at(["Left","Top","Bottom","Right"]):ce<0&&ut>0?Wt>1?Ze=at(["Top","Right","Left","Bottom"]):Ze=at(["Right","Top","Bottom","Left"]):ce<0&&ut<0?Wt>1?Ze=at(["Bottom","Right","Left","Top"]):Ze=at(["Right","Bottom","Top","Left"]):Wt>1?Ze=at(["Bottom","Left","Right","Top"]):Ze=at(["Left","Bottom","Top","Right"]),Ze){case"Left":return[-1,0];case"Right":return[1,0];case"Top":return[0,-1];case"Bottom":return[0,1]}}var vt=function(Xt,Rt,_t){var Tt=new Et;return["x","y"].forEach(function(at){Xt[at]>Rt[at]?Tt[at]=Rt[at]+_t:Xt[at]<Rt[at]?Tt[at]=Rt[at]-_t:Tt[at]=Xt[at]}),Tt},cn=function(Xt,Rt,_t,Tt){var at=vt(Xt,Rt,Tt),ce=vt(_t,Rt,Tt),ut=0,Ze=new Et((Xt.x+_t.x)/2,(Xt.y+_t.y)/2);return Rt.y<Ze.y?ut=1:ut=0,[Xt,at,ce,ut]};function hn($e,Xt){$e.orientation||($e.orientation=At(Xt.pos[0],Xt.pos[1],$e.pos[0],$e.pos[1])),Xt.orientation||(Xt.orientation=At($e.pos[0],$e.pos[1],Xt.pos[0],Xt.pos[1]));var Rt=[],_t={x:$e.pos[0],y:$e.pos[1]},Tt={x:Xt.pos[0],y:Xt.pos[1]},at={"-10":se,10:Ee,"0-1":Ce,"01":xe};if(Ct(Rt,_t,at[$e.orientation.join("")],Tt,at[Xt.orientation.join("")]),Rt.length<2)return"";if(Rt.length===2)return"M ".concat(Rt[0].x," ").concat(Rt[0].y," L ").concat(Rt[1].x," ").concat(Rt[1].y);var ce=He;if(Rt.pop(),Rt.length!==4)return Gt(Rt);var ut=Rt,Ze=fe(ut,4),Wt=Ze[0],Ut=Ze[1],jt=Ze[2],xt=Ze[3];if(Math.abs(Wt.y-xt.y)<2*He&&(ce=Math.abs(Wt.y-xt.y)/2),b().first(Rt).x===b().last(Rt).x||b().first(Rt).y===b().last(Rt).y)return["M",b().first(Rt).x,b().first(Rt).y,"L",b().last(Rt).x,b().last(Rt).y].join(" ");b().first(Rt).x>b().last(Rt).x&&(Rt=Rt.reverse());var $t=cn(Wt,Ut,jt,ce),Un=cn(Ut,jt,xt,ce);return["M",$t[0].x,$t[0].y,"L",$t[1].x,$t[1].y,"A",ce,ce,90,0,$t[3],$t[2].x,$t[2].y,"L",Un[1].x,Un[1].y,"M",Un[1].x,Un[1].y,"A",ce,ce,90,0,Un[3],Un[2].x,Un[2].y,"L",xt.x,xt.y].join(" ")}var Bn=function($e){m(Rt,$e);var Xt=ae(Rt);function Rt(_t){return e(this,Rt),Xt.call(this,_t)}return s(Rt,[{key:"mounted",value:function(){this.sourceNode.options.isCollapse||o()(this.sourceEndpoint.dom).removeClass("hidden"),this.targetNode.options.isCollapse||o()(this.targetEndpoint.dom).removeClass("hidden")}},{key:"calcPath",value:function(Tt,at){return hn(Tt,at)}},{key:"focusChain",value:function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"hover-chain";o()(this.dom).addClass(Tt),o()(this.arrowDom).addClass(Tt),o()(this.labelDom).addClass(Tt),this.setZIndex(1e3)}},{key:"unfocusChain",value:function(){var Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"hover-chain";o()(this.dom).removeClass(Tt),o()(this.arrowDom).removeClass(Tt),o()(this.labelDom).removeClass(Tt),this.setZIndex(0)}},{key:"destroy",value:function(Tt){te(d(Rt.prototype),"destroy",this).call(this,Tt),this.sourceNode.options.isCollapse||o()(this.sourceEndpoint.dom).addClass("hidden"),this.targetNode.options.isCollapse||o()(this.targetEndpoint.dom).addClass("hidden")}}]),Rt}(u.Edge),Fn=function(Xt){var Rt=Xt.tables,_t=Xt.relations,Tt=Xt.columns,at=Xt.emptyContent,ce=Xt.operator,ut=Xt._titleRender,Ze=Xt._enableHoverChain,Wt=Xt._emptyContent,Ut=Xt._emptyWidth,jt={nodes:Rt.map(function(xt){var $t;return(0,T.assign)(($t={Class:ue,_columns:Tt,_emptyContent:at,_operator:ce,_titleRender:ut,_enableHoverChain:Ze},h($t,"_emptyContent",Wt),h($t,"_emptyWidth",Ut),$t),xt)}),edges:_t.map(function(xt){return{id:xt.id||"".concat(xt.srcTableId,"-").concat(xt.tgtTableId,"-").concat(xt.srcTableColName,"-").concat(xt.tgtTableColName),type:"endpoint",sourceNode:xt.srcTableId,targetNode:xt.tgtTableId,source:xt.srcTableColName!==void 0&&xt.srcTableColName!==null?xt.srcTableColName:xt.srcTableId+"-right",target:xt.tgtTableColName!==void 0&&xt.tgtTableColName!==null?xt.tgtTableColName:xt.tgtTableId+"-left",_isNodeEdge:(xt.srcTableColName===void 0||xt.srcTableColName===null)&&(xt.tgtTableColName===void 0||xt.tgtTableColName===null),Class:Bn}})};return jt},ir=function(Xt,Rt){Rt.forEach(function(ce){ce._isNodeEdge||(ce.source+="-right",ce.target+="-left")}),Xt.forEach(function(ce){if(ce.isCollapse){var ut=Rt.filter(function(Wt){return ce.id===Wt.sourceNode});ut.forEach(function(Wt){Wt.source="".concat(ce.id,"-right"),Wt.sourceCollaps=!0});var Ze=Rt.filter(function(Wt){return ce.id===Wt.targetNode});Ze.forEach(function(Wt){Wt.target="".concat(ce.id,"-left"),Wt.targetCollaps=!0})}});var _t={},Tt=[];Rt.forEach(function(ce){var ut=_t["".concat(ce.sourceNode,"-").concat(ce.source,"-").concat(ce.targetNode,"-").concat(ce.target)];ut?(0,T.assign)(ut,ce):_t["".concat(ce.sourceNode,"-").concat(ce.source,"-").concat(ce.targetNode,"-").concat(ce.target)]=ce});for(var at in _t)Tt.push(_t[at]);return{nodes:Xt,edges:Tt}},Nr=function(Xt,Rt){var _t=function(xt,$t){return xt.id===$t.id},Tt=(0,T.differenceWith)(Xt.nodes,Rt.nodes,_t),at=(0,T.differenceWith)(Rt.nodes,Xt.nodes,_t),ce=function(xt,$t){return xt.sourceNode===$t.sourceNode&&xt.targetNode===$t.targetNode&&xt.source===$t.source&&xt.target===$t.target},ut=(0,T.differenceWith)(Xt.edges,Rt.edges,ce),Ze=(0,T.differenceWith)(Rt.edges,Xt.edges,ce),Wt=function(xt,$t){return xt.id===$t.id&&xt.isCollapse===$t.isCollapse},Ut=(0,T.differenceWith)(Xt.nodes,Rt.nodes,Wt);return Ut=(0,T.differenceWith)(Ut,Tt,_t),{addNodes:Tt,rmNodes:at,addEdges:ut,rmEdges:Ze,collapseNodes:Ut}},Ei=function(Xt,Rt){Rt.forEach(function(_t){var Tt=(0,T.find)(Xt,function(at){return at.id===_t.id});(0,T.assign)(_t.options,Tt)})},ci=function(Xt,Rt){var _t=function(ut,Ze){return ut.key===Ze.key},Tt=(0,T.differenceWith)(Xt,Rt,_t),at=(0,T.differenceWith)(Rt,Xt,_t);return Tt.length!==0||at.length!==0};const Ot=[{key:"zoom-in",icon:"table-build-icon table-build-icon-zoom-in",title:"\u653E\u5927",onClick:$e=>{$e.zoom($e._zoomData+.1)}},{key:"zoom-out",icon:"table-build-icon table-build-icon-zoom-out",title:"\u7F29\u5C0F",onClick:$e=>{$e.zoom($e._zoomData-.1)}},{key:"fit",icon:"table-build-icon table-build-icon-quanping2",title:"\u5C45\u4E2D",onClick:$e=>{$e.focusCenterWithAnimate(void 0,()=>{console.log("complete!!!")})}}],fr=$e=>{const{title:Xt,children:Rt}=$e;return Xt?(0,J.createElement)("span",{className:"react-lineage-dag-tooltip"},(0,J.createElement)("span",{className:"react-lineage-dag-title"},Xt),Rt):Rt},Pi=$e=>{let{canvas:Xt,actionMenu:Rt=[],visible:_t}=$e;if(!_t)return null;Array.isArray(Rt)||(Rt=[]);let Tt=(0,T.cloneDeep)(Ot);const at=[];for(let ut of Rt){const Ze=(0,T.find)(Tt,Wt=>Wt.key===ut.key);if(!Ze){at.push(ut);continue}(0,T.merge)(Ze,ut),at.push(Ze),Tt=Tt.filter(Wt=>Wt.key!==Ze.key)}Tt.forEach(ut=>{at.unshift(ut)});const ce=ut=>typeof ut=="string"?(0,J.createElement)("i",{className:ut}):(0,J.isValidElement)(ut)?ut:null;return(0,J.createElement)("div",{className:"lineage-dag-canvas-action"},at.map(ut=>ut.disable?null:(0,J.createElement)("div",{key:ut.key,title:ut.title,onClick:()=>ut.onClick(Xt)},(0,J.createElement)(fr,{title:ut.title},ce(ut.icon)))))};class Li extends J.Component{constructor(Xt){super(Xt),this.canvas=null,this.canvasData=null,this.originEdges=[],this._isFirstFocus=!1}componentDidMount(){let Xt=(0,ie.findDOMNode)(this),Rt=(0,T.get)(this.props,"config.enableHoverChain",!0),_t=(0,T.get)(this.props,"config.titleRender"),Tt={root:Xt,disLinkable:!1,linkable:!1,draggable:!1,zoomable:!0,moveable:!0,theme:{edge:{type:"endpoint",arrow:!0,isExpandWidth:!0,arrowPosition:1,arrowOffset:-5},endpoint:{limitNum:void 0,expandArea:{left:0,right:0,top:0,botton:0}}},data:{enableHoverChain:Rt}};this.canvas=new M(Tt);let at=Fn({tables:this.props.tables,relations:this.props.relations,columns:this.props.columns,operator:this.props.operator,_titleRender:_t,_enableHoverChain:Rt,_emptyContent:this.props.emptyContent,_emptyWidth:this.props.emptyWidth});this.originEdges=at.edges,at=ir(at.nodes,(0,T.cloneDeep)(at.edges)),this.canvasData={nodes:at.nodes,edges:at.edges},setTimeout(()=>{let ce=at.edges;at.edges=[],this.canvas.draw(at,()=>{this.canvas.relayout({edges:ce.map(Wt=>({source:Wt.sourceNode,target:Wt.targetNode}))},!0),this.canvas.addEdges(ce,!0);let ut=(0,T.get)(this,"props.config.minimap",{});const Ze=(0,T.assign)({},ut.config,{events:["system.node.click","system.canvas.click"]});ut&&ut.enable&&this.canvas.setMinimap(!0,Ze),(0,T.get)(this,"props.config.gridMode")&&this.canvas.setGridMode(!0,(0,T.assign)({},(0,T.get)(this,"props.config.gridMode",{}))),at.nodes.length!==0&&(this.canvas.focusCenterWithAnimate(),this._isFirstFocus=!0),this.forceUpdate(),this.props.onLoaded&&this.props.onLoaded(this.canvas)}),this.canvas.on("system.node.click",ut=>{let Ze=ut.node;this.canvas.focus(Ze.id)}),this.canvas.on("system.canvas.click",()=>{this.canvas.unfocus()})},(0,T.get)(this.props,"config.delayDraw",0))}shouldComponentUpdate(Xt,Rt){let _t=(0,T.get)(Xt,"config.enableHoverChain",!0),Tt=(0,T.get)(this.props,"config.titleRender"),at=Fn({tables:Xt.tables,relations:Xt.relations,columns:this.props.columns,operator:this.props.operator,_titleRender:Tt,_enableHoverChain:_t,_emptyContent:this.props.emptyContent,_emptyWidth:this.props.emptyWidth});this.originEdges=at.edges,at=ir(at.nodes,(0,T.cloneDeep)(at.edges));let ce=Nr(at,this.canvasData),ut=!1;if(ce.rmEdges.length>0&&(this.canvas.removeEdges(ce.rmEdges.map(Wt=>Wt.id)),ut=!0),ce.rmNodes.length>0&&(this.canvas.removeNodes(ce.rmNodes.map(Wt=>Wt.id)),ut=!0),ce.addNodes.length>0&&(this.canvas.addNodes(ce.addNodes),ut=!0),ce.collapseNodes.length>0&&(ce.collapseNodes.forEach(Wt=>{this.canvas.getNode(Wt.id).collapse(Wt.isCollapse)}),ut=!0),ce.addEdges.length>0&&(this.canvas.addEdges(ce.addEdges),ut=!0),ut){this.canvas.relayout({centerNodeId:Xt.centerId});let Wt=this.canvas.nodes.map(Ut=>Ut._renderPromise);this.canvas._renderPromise=Promise.all(Wt).then(()=>new Promise((Ut,jt)=>{Xt.centerId?(this.canvas.focusNodeWithAnimate(Xt.centerId,"node",{},()=>{setTimeout(()=>{Ut()},50)}),this.canvas.focus(Xt.centerId)):(this._isFirstFocus||(this.canvas.focusCenterWithAnimate(),this._isFirstFocus=!0),Ut())}))}return this.canvasData=at,Ei(at.nodes,this.canvas.nodes),ci(Xt.actionMenu,this.props.actionMenu)}render(){const{canvas:Xt}=this,{actionMenu:Rt=[]}=this.props,_t=(0,T.get)(this,"props.config.showActionIcon",!0);return(0,J.createElement)("div",{className:this._genClassName()},(0,J.createElement)(Pi,{canvas:Xt,actionMenu:Rt,visible:_t}))}_genClassName(){let Xt="";return this.props.className?Xt=this.props.className+" butterfly-lineage-dag":Xt="butterfly-lineage-dag",Xt}}var zn=Li},52995:function(bt,O,V){"use strict";V.d(O,{mg:function(){return S},yd:function(){return pe}});var J=V(1186),ie=V(73935),T=V(19755),b=V.n(T),u=V(96486),a=V.n(u),o=V(67294);const l=j=>o.isValidElement(j);var r=j=>{const ue=j.content,se=j.container[0];let Ee=j.width;Ee||(Ee="150px"),typeof j.width=="number"&&(Ee=j.width+"px");let Ce='<div style="width: '+Ee+'"></div>';if(ue)l(ue)?Ce=ie.render(ue,se):Ce=b()(ue);else{Ce=b()('<div class="no-data" style="width: '+Ee+'"></div>');const xe=b()('<i class="no-data-icon table-build-icon table-build-icon-kongshuju"></i>');Ce.append(xe)}return Ce};class e extends J.Node{constructor(ue){super(ue),this.TITLE_HEIGHT=34,this.ROW_HEIGHT=26,this.COLUMN_WIDTH=60,this.fieldsList=[],this.titlesList=[],this._renderPromise=Promise.resolve(),this._isRendering=!1}mounted(){this._createNodeEndpoint(!0),this.width=this.options.width=b()(this.dom).width(),this.height=this.options.height=b()(this.dom).height()}draw(ue){let se=ue.dom;se||(se=b()("<div></div>").attr("class","node table-node").attr("id",ue.name));const Ee=b()(se);let Ce=u.get(this,"options.classname");return Ce&&Ee.addClass(Ce),ue.top!==void 0&&Ee.css("top",ue.top),ue.left!==void 0&&Ee.css("left",ue.left),this._createTableName(Ee),this._createFields(Ee),Ee[0]}collapse(ue){ue!==this.options.isCollapse&&(this.options.isCollapse=ue,ue?(this.fieldsList.forEach(Ee=>{b()(Ee.dom).off()}),this.endpoints.filter(Ee=>!Ee.options._isNodeSelf).map(Ee=>Ee.id).forEach(Ee=>{this.removeEndpoint(Ee)}),b()(this.dom).find(".field").remove(),this.fieldsList=[]):(this._createFields(),this._createNodeEndpoint()),this.width=this.options.width=b()(this.dom).width(),this.height=this.options.height=b()(this.dom).height())}focus(){b()(this.dom).addClass("focus"),this.options.minimapActive=!0}unfocus(){b()(this.dom).removeClass("focus"),this.options.minimapActive=!1}redrawTitle(){b()(this.dom).find(".operator").remove(),this._createTableName(b()(this.dom),!0)}_addEventListener(){b()(this.dom).on("mousedown",ue=>{ue.button===0&&(["SELECT","INPUT","RADIO","CHECKBOX","TEXTAREA"].includes(ue.target.nodeName)||ue.preventDefault(),this.draggable?(this._isMoving=!0,this.emit("InnerEvents",{type:"node:dragBegin",data:this})):this.emit("InnerEvents",{type:"node:mouseDown",data:this}))}),b()(this.dom).on("click",ue=>{this.emit("system.node.click",{node:this}),this.emit("events",{type:"node:click",node:this})}),this.setDraggable(this.draggable)}_createTableName(ue=b()(this.dom),se){let Ee=u.get(this,"options.name"),Ce=u.get(this,"options._titleRender"),xe=u.get(this,"options._operator"),Oe=se?b()(this.dom).find(".title-con"):b()('<div class="title-con"></div>'),Le=se?b()(this.dom).find(".title"):b()('<div class="title"></div>');if(this._isRendering)return!1;Ce?(this._isRendering=!0,(this._canvas?this._canvas._renderPromise:Promise.resolve()).then(()=>{this._renderPromise=new Promise((He,Et)=>{ie.render(Ce(Ee,this),Le[0],()=>{if(this.height===0||this.width===0)this.width=this.options.width=b()(this.dom).width(),this.height=this.options.height=b()(this.dom).height(),this.endpoints.forEach(Ct=>Ct.updatePos()),this.emit("custom.edge.redraw",{node:this});else{let Ct=[];this.endpoints.forEach(Gt=>{Gt.options._isNodeSelf&&(Gt.updatePos(),Ct.push(Gt))}),this.emit("custom.edge.redraw",{node:this,points:Ct})}He(),this._isRendering=!1})})})):Ee&&Le.css({height:this.TITLE_HEIGHT+"px","line-height":this.TITLE_HEIGHT+"px"}),se||Oe.append(Le);let Ge=null;if(xe&&(Ge=b()('<div class="operator"></div>'),xe.forEach(He=>{let Et=b()('<div class="operator-item"></div>');ie.render(He.icon,Et[0]),He.onClick&&Et.on("click",He.onClick.bind(this,this.options,this)),Ge.append(Et)}),Oe.append(Ge)),!se){let He=b()('<div class="point left-point"></div>'),Et=b()('<div class="point right-point"></div>');Oe.append(He).append(Et),this.titlesList=this.titlesList.concat([{id:`${this.id}-left`,dom:He[0],type:"target"},{id:`${this.id}-right`,dom:Et[0],type:"source"}]),b()(ue).append(Oe)}}_createFields(ue=b()(this.dom)){let se=u.get(this,"options.fields"),Ee=u.get(this,"options._columns"),Ce=u.get(this,"options.isCollapse"),xe=Ee[0].key,Oe=[];if(se&&se.length){if(Ce)return;se.forEach((Le,Ge)=>{let He=b()('<div class="field"></div>');He.css({height:this.ROW_HEIGHT+"px","line-height":this.ROW_HEIGHT+"px"}),Ee.forEach(Gt=>{if(Gt.render){let At=b()('<span class="field-item"></span>');At.css("width",(Gt.width||this.COLUMN_WIDTH)+"px"),ie.render(Gt.render(Le[Gt.key],Le,Ge),At[0]),He.append(At)}else{let At=b()(`<span class="field-item">${Le[Gt.key]}</span>`);At.css("width",(Gt.width||this.COLUMN_WIDTH)+"px"),He.append(At)}Gt.primaryKey&&(xe=Gt.key)});let Et=b()('<div class="point left-point hidden"></div>'),Ct=b()('<div class="point right-point hidden"></div>');He.append(Et).append(Ct),this.options._enableHoverChain&&(b()(He).on("mouseover",Gt=>{this.emit("custom.field.hover",{node:this,fieldId:Le[xe]})}),b()(He).on("mouseout",Gt=>{this.emit("custom.field.unHover",{node:this,fieldId:Le[xe]})})),ue.append(He),Oe.push({id:Le[xe],dom:He})}),this.fieldsList=this.fieldsList.concat(Oe)}else{const Le=u.get(this.options,"_emptyContent");if(Le){const Ge=r({content:Le,width:this.options._emptyWidth});ue.append(Ge),this.height=b()(ue).outerHeight()}}return Oe}_createNodeEndpoint(ue){ue&&this.titlesList.forEach(se=>{this.addEndpoint({id:se.id,orientation:se.type==="target"?[-1,0]:[1,0],dom:se.dom,originId:this.id,type:se.type,_isNodeSelf:!0})}),this.fieldsList.forEach(se=>{this.addEndpoint({id:`${se.id}-left`,orientation:[-1,0],dom:b()(se.dom).find(".left-point")[0],originId:this.id,type:"target"}),this.addEndpoint({id:`${se.id}-right`,orientation:[1,0],dom:b()(se.dom).find(".right-point")[0],originId:this.id,type:"source"}),this.options.isCollapse&&b()(se.dom).css({visibility:"visible",display:"none"})})}}const t="Left",s="Right",h="Top",m="Bottom",d=20,v=.1,x=.01,N=15,F=function(j,ue){this.x=j,this.y=ue};function ae(j,ue,se,Ee,Ce){ue.x=ue.x||0,ue.y=ue.y||0,Ee.x=Ee.x||0,Ee.y=Ee.y||0;const xe=ue.x-Ee.x,Oe=ue.y-Ee.y;let Le,Ge,He;if(j.push(new F(ue.x,ue.y)),xe*xe<x&&Oe*Oe<x){j.push(new F(Ee.x,Ee.y));return}se===t?xe>0&&Oe*Oe<v&&Ce===s?(Le=Ee,Ge=Ce):(xe<0?Le=new F(ue.x-d,ue.y):Oe>0&&Ce===m||Oe<0&&Ce===h?Le=new F(Ee.x,ue.y):se===Ce?(He=Math.min(ue.x,Ee.x)-d,Le=new F(He,ue.y)):Le=new F(ue.x-xe/2,ue.y),Oe>0?Ge=h:Ge=m):se===s?xe<0&&Oe*Oe<v&&Ce===t?(Le=Ee,Ge=Ce):(xe>0?Le=new F(ue.x+d,ue.y):Oe>0&&Ce===m||Oe<0&&Ce===h?Le=new F(Ee.x,ue.y):se===Ce?(He=Math.max(ue.x,Ee.x)+d,Le=new F(He,ue.y)):Le=new F(ue.x-xe/2,ue.y),Oe>0?Ge=h:Ge=m):se===m?xe*xe<v&&Oe<0&&Ce===h?(Le=Ee,Ge=Ce):(Oe>0?Le=new F(ue.x,ue.y+d):xe>0&&Ce===s||xe<0&&Ce===t?Le=new F(ue.x,Ee.y):se===Ce?(He=Math.max(ue.y,Ee.y)+d,Le=new F(ue.x,He)):Le=new F(ue.x,ue.y-Oe/2),xe>0?Ge=t:Ge=s):se===h&&(xe*xe<v&&Oe>0&&Ce===m?(Le=Ee,Ge=Ce):(Oe<0?Le=new F(ue.x,ue.y-d):xe>0&&Ce===s||xe<0&&Ce===t?Le=new F(ue.x,Ee.y):se===Ce?(He=Math.min(ue.y,Ee.y)-d,Le=new F(ue.x,He)):Le=new F(ue.x,ue.y-Oe/2),xe>0?Ge=t:Ge=s)),ae(j,Le,Ge,Ee,Ce)}const $=j=>j.reduce((ue,se)=>(ue.push(["L",se.x,se.y].join(" ")),ue),[["M",j[0].x,j[0].y].join(" ")]).join(" ");function te(j,ue,se,Ee,Ce){let xe=Et=>{if(Ce){for(let Ct=0;Ct<Et.length;Ct++)if(a().some(Ce,At=>At===Et[Ct]))return Et[Ct];return Et[0]}else return Et[0]},Oe=se-j,Le=Ee-ue,Ge=null,He=Math.abs(Le/Oe);switch(Oe===0||Le===0?(Oe===0&&(Ge=Le>=0?xe(["Top","Left","Right","Bottom"]):Ge,Ge=Le<0?xe(["Bottom","Left","Right","Top"]):Ge),Le===0&&(Ge=Oe>=0?xe(["Right","Top","Bottom","Left"]):Ge,Ge=Oe<0?xe(["Left","Top","Bottom","Right"]):Ge)):Oe>0&&Le>0?He>1?Ge=xe(["Top","Left","Right","Bottom"]):Ge=xe(["Left","Top","Bottom","Right"]):Oe<0&&Le>0?He>1?Ge=xe(["Top","Right","Left","Bottom"]):Ge=xe(["Right","Top","Bottom","Left"]):Oe<0&&Le<0?He>1?Ge=xe(["Bottom","Right","Left","Top"]):Ge=xe(["Right","Bottom","Top","Left"]):He>1?Ge=xe(["Bottom","Left","Right","Top"]):Ge=xe(["Left","Bottom","Top","Right"]),Ge){case"Left":return[-1,0];case"Right":return[1,0];case"Top":return[0,-1];case"Bottom":return[0,1]}}const fe=(j,ue,se)=>{let Ee=new F;return["x","y"].forEach(Ce=>{j[Ce]>ue[Ce]?Ee[Ce]=ue[Ce]+se:j[Ce]<ue[Ce]?Ee[Ce]=ue[Ce]-se:Ee[Ce]=j[Ce]}),Ee},B=(j,ue,se,Ee)=>{let Ce=fe(j,ue,Ee),xe=fe(se,ue,Ee),Oe=0,Le=new F((j.x+se.x)/2,(j.y+se.y)/2);return ue.y<Le.y?Oe=1:Oe=0,[j,Ce,xe,Oe]};function he(j,ue){j.orientation||(j.orientation=te(ue.pos[0],ue.pos[1],j.pos[0],j.pos[1])),ue.orientation||(ue.orientation=te(j.pos[0],j.pos[1],ue.pos[0],ue.pos[1]));let se=[];const Ee={x:j.pos[0],y:j.pos[1]},Ce={x:ue.pos[0],y:ue.pos[1]},xe={"-10":t,10:s,"0-1":h,"01":m};if(ae(se,Ee,xe[j.orientation.join("")],Ce,xe[ue.orientation.join("")]),se.length<2)return"";if(se.length===2)return`M ${se[0].x} ${se[0].y} L ${se[1].x} ${se[1].y}`;let Oe=N;if(se.pop(),se.length!==4)return $(se);const[Le,Ge,He,Et]=se;if(Math.abs(Le.y-Et.y)<2*N&&(Oe=Math.abs(Le.y-Et.y)/2),a().first(se).x===a().last(se).x||a().first(se).y===a().last(se).y)return["M",a().first(se).x,a().first(se).y,"L",a().last(se).x,a().last(se).y].join(" ");a().first(se).x>a().last(se).x&&(se=se.reverse());const Ct=B(Le,Ge,He,Oe),Gt=B(Ge,He,Et,Oe);return["M",Ct[0].x,Ct[0].y,"L",Ct[1].x,Ct[1].y,"A",Oe,Oe,90,0,Ct[3],Ct[2].x,Ct[2].y,"L",Gt[1].x,Gt[1].y,"M",Gt[1].x,Gt[1].y,"A",Oe,Oe,90,0,Gt[3],Gt[2].x,Gt[2].y,"L",Et.x,Et.y].join(" ")}var z=he;class ee extends J.Edge{constructor(ue){super(ue)}mounted(){this.sourceNode.options.isCollapse||b()(this.sourceEndpoint.dom).removeClass("hidden"),this.targetNode.options.isCollapse||b()(this.targetEndpoint.dom).removeClass("hidden")}calcPath(ue,se){return z(ue,se)}focusChain(ue="hover-chain"){b()(this.dom).addClass(ue),b()(this.arrowDom).addClass(ue),b()(this.labelDom).addClass(ue),this.setZIndex(1e3)}unfocusChain(ue="hover-chain"){b()(this.dom).removeClass(ue),b()(this.arrowDom).removeClass(ue),b()(this.labelDom).removeClass(ue),this.setZIndex(0)}destroy(ue){super.destroy(ue),this.sourceNode.options.isCollapse||b()(this.sourceEndpoint.dom).addClass("hidden"),this.targetNode.options.isCollapse||b()(this.targetEndpoint.dom).addClass("hidden")}}let pe=j=>{let{tables:ue,relations:se,columns:Ee,emptyContent:Ce,operator:xe,_titleRender:Oe,_enableHoverChain:Le,_emptyContent:Ge,_emptyWidth:He}=j;return{nodes:ue.map(Ct=>u.assign({Class:e,_columns:Ee,_emptyContent:Ce,_operator:xe,_titleRender:Oe,_enableHoverChain:Le,_emptyContent:Ge,_emptyWidth:He},Ct)),edges:se.map(Ct=>({id:Ct.id||`${Ct.srcTableId}-${Ct.tgtTableId}-${Ct.srcTableColName}-${Ct.tgtTableColName}`,type:"endpoint",sourceNode:Ct.srcTableId,targetNode:Ct.tgtTableId,source:Ct.srcTableColName!==void 0&&Ct.srcTableColName!==null?Ct.srcTableColName:Ct.srcTableId+"-right",target:Ct.tgtTableColName!==void 0&&Ct.tgtTableColName!==null?Ct.tgtTableColName:Ct.tgtTableId+"-left",_isNodeEdge:(Ct.srcTableColName===void 0||Ct.srcTableColName===null)&&(Ct.tgtTableColName===void 0||Ct.tgtTableColName===null),Class:ee}))}},S=(j,ue)=>{ue.forEach(Ce=>{Ce._isNodeEdge||(Ce.source+="-right",Ce.target+="-left")}),j.forEach(Ce=>{Ce.isCollapse&&(ue.filter(Le=>Ce.id===Le.sourceNode).forEach(Le=>{Le.source=`${Ce.id}-right`,Le.sourceCollaps=!0}),ue.filter(Le=>Ce.id===Le.targetNode).forEach(Le=>{Le.target=`${Ce.id}-left`,Le.targetCollaps=!0}))});let se={},Ee=[];ue.forEach(Ce=>{let xe=se[`${Ce.sourceNode}-${Ce.source}-${Ce.targetNode}-${Ce.target}`];xe?u.assign(xe,Ce):se[`${Ce.sourceNode}-${Ce.source}-${Ce.targetNode}-${Ce.target}`]=Ce});for(let Ce in se)Ee.push(se[Ce]);return{nodes:j,edges:Ee}},q=(j,ue)=>{const se=(Et,Ct)=>Et.id===Ct.id;let Ee=_.differenceWith(j.nodes,ue.nodes,se),Ce=_.differenceWith(ue.nodes,j.nodes,se);const xe=(Et,Ct)=>Et.sourceNode===Ct.sourceNode&&Et.targetNode===Ct.targetNode&&Et.source===Ct.source&&Et.target===Ct.target;let Oe=_.differenceWith(j.edges,ue.edges,xe),Le=_.differenceWith(ue.edges,j.edges,xe);const Ge=(Et,Ct)=>Et.id===Ct.id&&Et.isCollapse===Ct.isCollapse;let He=_.differenceWith(j.nodes,ue.nodes,Ge);return He=_.differenceWith(He,Ee,se),{addNodes:Ee,rmNodes:Ce,addEdges:Oe,rmEdges:Le,collapseNodes:He}},M=(j,ue)=>{ue.forEach(se=>{let Ee=_.find(j,Ce=>Ce.id===se.id);_.assign(se.options,Ee)})},I=(j,ue)=>{const se=(xe,Oe)=>xe.key===Oe.key;let Ee=_.differenceWith(j,ue,se),Ce=_.differenceWith(ue,j,se);return Ee.length!==0||Ce.length!==0}},28525:function(bt,O,V){"use strict";V.d(O,{Z:function(){return l}});var J=V(1186),ie=V.n(J),T=V(73935),b=V(19755),u=V.n(b),a=V(96486),o=V.n(a);class l extends J.Canvas{constructor(t){super(t);g1(this,"_precollide",(t,s,h)=>{const m={};let d=[];const v={};for(let N of t)m[N.left]||(m[N.left]=[]),m[N.left].push(N);d=Object.keys(m).sort((N,F)=>parseInt(N)-parseInt(F)),d.forEach(N=>{let F=m[N];const ae=F.sort(($,te)=>$.top-te.top).map($=>[$.left,$.top]);F=F.sort(($,te)=>$.order-te.order),m[N].forEach(($,te)=>{$.left=ae[te][0],$.top=ae[te][1]})});let x={};d.forEach(N=>{let F=m[N];x[N]=0;for(let ae=0;ae<F.length;ae++)x[N]=Math.max(x[N],F[ae].left+F[ae].width+h);if(F.length!==1){F=F.sort((ae,$)=>ae.top-$.top);for(let ae=0;ae<F.length-1;ae++){const $=F[ae],te=F[ae+1];$.top+$.height>=te.top&&(te.top=$.top+$.height+s),$.top+$.height+s<te.top&&(te.top=$.top+$.height+s)}}});for(let N=0;N<d.length-1;N++){let F=d[N],ae=d[N+1],$=a.get(m,[ae,0,"left"],ae);if($-x[F]<h){m[ae].forEach(function(fe){fe.left=x[F]+h});let te=x[F]+h-$;x[ae]+=te}}return d.forEach(N=>{m[N].forEach(ae=>{v[ae.id]=ae})}),v});this._renderPromise=Promise.resolve(),this._focusItem=null,this._enableHoverChain=t.data.enableHoverChain,this.attachEvent()}attachEvent(){this._enableHoverChain&&(this.on("custom.field.hover",t=>{this.focusChain(t.node.id,t.fieldId,"hover-chain")}),this.on("custom.field.unHover",t=>{this.unfocusChain(t.node.id,t.fieldId,"hover-chain")})),this.on("custom.edge.redraw",t=>{let s=t.node,h=t.points,m=[];h?h.forEach(d=>{m=m.concat(this.getNeighborEdgesByEndpoint(s.id,d.id))}):m=this.getNeighborEdges(s.id),m.forEach(d=>d.redraw())})}focus(t){this.unfocus();let s=this._focusItem=this.getNode(t);s&&s.focus()}unfocus(){this._focusItem&&(this._focusItem.unfocus(),this._focusItem=null)}focusChain(t,s,h){let m=this._findChain(t,s);m.edges.forEach(d=>{d.focusChain(h)}),m.fileds.forEach(d=>{u()(d).addClass(h)})}unfocusChain(t,s,h){let m=this._findChain(t,s);m.edges.forEach(d=>{d.unfocusChain(h)}),m.fileds.forEach(d=>{u()(d).removeClass(h)})}_findChain(t,s){let h=[],m=[],d=[{nodeId:t,fieldId:s,type:"both"}];for(;d.length>0;){let v=d.pop(),x=this.getNode(v.nodeId);if(x.options.isCollapse)continue;let N=a.find(x.fieldsList,te=>te.id===v.fieldId);m.push(N.dom);let F=this.getNeighborEdges(x.id),ae=[],$=[];(v.type==="both"||v.type==="source")&&(ae=F.filter(te=>te.options.sourceNode===x.id&&te.options.source===`${v.fieldId}-right`)),(v.type==="both"||v.type==="target")&&($=F.filter(te=>te.options.targetNode===x.id&&te.options.target===`${v.fieldId}-left`)),h=h.concat(ae).concat($),ae.forEach(te=>{d.push({nodeId:te.options.targetNode,fieldId:te.options.target.replace("-left",""),type:"source"})}),$.forEach(te=>{d.push({nodeId:te.options.sourceNode,fieldId:te.options.source.replace("-right",""),type:"target"})})}return{edges:h,fileds:m}}_fixCenterNode(t,s){let h=this.getNode(s);if(!h)return;let m=a.find(t,x=>x.id===s),d=m.left-h.left,v=m.top-h.top;t.forEach(x=>{x.left-=d,x.top-=v})}relayout(t,s){let h=this.nodes,m=this.edges,d=h.map((F,ae)=>a.assign({left:F.left,top:F.top,order:ae},F.options)),v=[];s?v=t.edges||[]:v=m.map(F=>({source:F.sourceNode.id,target:F.targetNode.id}));const x=50,N=70;J.Layout.dagreLayout({rankdir:"LR",nodesep:x,ranksep:N,data:{nodes:d,edges:v}}),this._precollide(d,x,N),t&&t.centerNodeId&&this._fixCenterNode(d,t.centerNodeId),!s&&m.length>30&&u()(this.svg).css("visibility","hidden"),this.nodes.forEach((F,ae)=>{let $=d[ae].left,te=d[ae].top;(F.top!==te||F.left!==$)&&(F.options.top=te,F.options.left=$,F.moveTo($,te))}),!s&&m.length>30&&u()(this.svg).css("visibility","visible")}addNodes(t,s){let h=super.addNodes(t,s);return h.forEach(m=>{m._canvas=this}),h}}},28660:function(bt,O,V){var J=V(34155);var ie;(function(T){(function(b){var u=typeof V.g=="object"?V.g:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),a=o(T);typeof u.Reflect=="undefined"?u.Reflect=T:a=o(u.Reflect,a),b(a);function o(l,r){return function(e,t){typeof l[e]!="function"&&Object.defineProperty(l,e,{configurable:!0,writable:!0,value:t}),r&&r(e,t)}}})(function(b){var u=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",o=a&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",l=a&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",r=typeof Object.create=="function",e={__proto__:[]}instanceof Array,t=!r&&!e,s={create:r?function(){return Xt(Object.create(null))}:e?function(){return Xt({__proto__:null})}:function(){return Xt({})},has:t?function(Rt,_t){return u.call(Rt,_t)}:function(Rt,_t){return _t in Rt},get:t?function(Rt,_t){return u.call(Rt,_t)?Rt[_t]:void 0}:function(Rt,_t){return Rt[_t]}},h=Object.getPrototypeOf(Function),m=typeof J=="object"&&J["env"]&&J["env"].REFLECT_METADATA_USE_MAP_POLYFILL==="true",d=!m&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Li(),v=!m&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:zn(),x=!m&&typeof WeakMap=="function"?WeakMap:$e(),N=new x;function F(Rt,_t,Tt,at){if(Le(Tt)){if(!hn(Rt))throw new TypeError;if(!Fn(_t))throw new TypeError;return S(Rt,_t)}else{if(!hn(Rt))throw new TypeError;if(!Et(_t))throw new TypeError;if(!Et(at)&&!Le(at)&&!Ge(at))throw new TypeError;return Ge(at)&&(at=void 0),Tt=cn(Tt),q(Rt,_t,Tt,at)}}b("decorate",F);function ae(Rt,_t){function Tt(at,ce){if(!Et(at))throw new TypeError;if(!Le(ce)&&!ir(ce))throw new TypeError;Ee(Rt,_t,at,ce)}return Tt}b("metadata",ae);function $(Rt,_t,Tt,at){if(!Et(Tt))throw new TypeError;return Le(at)||(at=cn(at)),Ee(Rt,_t,Tt,at)}b("defineMetadata",$);function te(Rt,_t,Tt){if(!Et(_t))throw new TypeError;return Le(Tt)||(Tt=cn(Tt)),I(Rt,_t,Tt)}b("hasMetadata",te);function fe(Rt,_t,Tt){if(!Et(_t))throw new TypeError;return Le(Tt)||(Tt=cn(Tt)),j(Rt,_t,Tt)}b("hasOwnMetadata",fe);function B(Rt,_t,Tt){if(!Et(_t))throw new TypeError;return Le(Tt)||(Tt=cn(Tt)),ue(Rt,_t,Tt)}b("getMetadata",B);function he(Rt,_t,Tt){if(!Et(_t))throw new TypeError;return Le(Tt)||(Tt=cn(Tt)),se(Rt,_t,Tt)}b("getOwnMetadata",he);function z(Rt,_t){if(!Et(Rt))throw new TypeError;return Le(_t)||(_t=cn(_t)),Ce(Rt,_t)}b("getMetadataKeys",z);function ee(Rt,_t){if(!Et(Rt))throw new TypeError;return Le(_t)||(_t=cn(_t)),xe(Rt,_t)}b("getOwnMetadataKeys",ee);function pe(Rt,_t,Tt){if(!Et(_t))throw new TypeError;Le(Tt)||(Tt=cn(Tt));var at=M(_t,Tt,!1);if(Le(at)||!at.delete(Rt))return!1;if(at.size>0)return!0;var ce=N.get(_t);return ce.delete(Tt),ce.size>0||N.delete(_t),!0}b("deleteMetadata",pe);function S(Rt,_t){for(var Tt=Rt.length-1;Tt>=0;--Tt){var at=Rt[Tt],ce=at(_t);if(!Le(ce)&&!Ge(ce)){if(!Fn(ce))throw new TypeError;_t=ce}}return _t}function q(Rt,_t,Tt,at){for(var ce=Rt.length-1;ce>=0;--ce){var ut=Rt[ce],Ze=ut(_t,Tt,at);if(!Le(Ze)&&!Ge(Ze)){if(!Et(Ze))throw new TypeError;at=Ze}}return at}function M(Rt,_t,Tt){var at=N.get(Rt);if(Le(at)){if(!Tt)return;at=new d,N.set(Rt,at)}var ce=at.get(_t);if(Le(ce)){if(!Tt)return;ce=new d,at.set(_t,ce)}return ce}function I(Rt,_t,Tt){var at=j(Rt,_t,Tt);if(at)return!0;var ce=Pi(_t);return Ge(ce)?!1:I(Rt,ce,Tt)}function j(Rt,_t,Tt){var at=M(_t,Tt,!1);return Le(at)?!1:At(at.has(Rt))}function ue(Rt,_t,Tt){var at=j(Rt,_t,Tt);if(at)return se(Rt,_t,Tt);var ce=Pi(_t);if(!Ge(ce))return ue(Rt,ce,Tt)}function se(Rt,_t,Tt){var at=M(_t,Tt,!1);if(!Le(at))return at.get(Rt)}function Ee(Rt,_t,Tt,at){var ce=M(Tt,at,!0);ce.set(Rt,_t)}function Ce(Rt,_t){var Tt=xe(Rt,_t),at=Pi(Rt);if(at===null)return Tt;var ce=Ce(at,_t);if(ce.length<=0)return Tt;if(Tt.length<=0)return ce;for(var ut=new v,Ze=[],Wt=0,Ut=Tt;Wt<Ut.length;Wt++){var jt=Ut[Wt],xt=ut.has(jt);xt||(ut.add(jt),Ze.push(jt))}for(var $t=0,Un=ce;$t<Un.length;$t++){var jt=Un[$t],xt=ut.has(jt);xt||(ut.add(jt),Ze.push(jt))}return Ze}function xe(Rt,_t){var Tt=[],at=M(Rt,_t,!1);if(Le(at))return Tt;for(var ce=at.keys(),ut=Ei(ce),Ze=0;;){var Wt=Ot(ut);if(!Wt)return Tt.length=Ze,Tt;var Ut=ci(Wt);try{Tt[Ze]=Ut}catch(jt){try{fr(ut)}finally{throw jt}}Ze++}}function Oe(Rt){if(Rt===null)return 1;switch(typeof Rt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Rt===null?1:6;default:return 6}}function Le(Rt){return Rt===void 0}function Ge(Rt){return Rt===null}function He(Rt){return typeof Rt=="symbol"}function Et(Rt){return typeof Rt=="object"?Rt!==null:typeof Rt=="function"}function Ct(Rt,_t){switch(Oe(Rt)){case 0:return Rt;case 1:return Rt;case 2:return Rt;case 3:return Rt;case 4:return Rt;case 5:return Rt}var Tt=_t===3?"string":_t===5?"number":"default",at=Nr(Rt,o);if(at!==void 0){var ce=at.call(Rt,Tt);if(Et(ce))throw new TypeError;return ce}return Gt(Rt,Tt==="default"?"number":Tt)}function Gt(Rt,_t){if(_t==="string"){var Tt=Rt.toString;if(Bn(Tt)){var at=Tt.call(Rt);if(!Et(at))return at}var ce=Rt.valueOf;if(Bn(ce)){var at=ce.call(Rt);if(!Et(at))return at}}else{var ce=Rt.valueOf;if(Bn(ce)){var at=ce.call(Rt);if(!Et(at))return at}var ut=Rt.toString;if(Bn(ut)){var at=ut.call(Rt);if(!Et(at))return at}}throw new TypeError}function At(Rt){return!!Rt}function vt(Rt){return""+Rt}function cn(Rt){var _t=Ct(Rt,3);return He(_t)?_t:vt(_t)}function hn(Rt){return Array.isArray?Array.isArray(Rt):Rt instanceof Object?Rt instanceof Array:Object.prototype.toString.call(Rt)==="[object Array]"}function Bn(Rt){return typeof Rt=="function"}function Fn(Rt){return typeof Rt=="function"}function ir(Rt){switch(Oe(Rt)){case 3:return!0;case 4:return!0;default:return!1}}function Nr(Rt,_t){var Tt=Rt[_t];if(Tt!=null){if(!Bn(Tt))throw new TypeError;return Tt}}function Ei(Rt){var _t=Nr(Rt,l);if(!Bn(_t))throw new TypeError;var Tt=_t.call(Rt);if(!Et(Tt))throw new TypeError;return Tt}function ci(Rt){return Rt.value}function Ot(Rt){var _t=Rt.next();return _t.done?!1:_t}function fr(Rt){var _t=Rt.return;_t&&_t.call(Rt)}function Pi(Rt){var _t=Object.getPrototypeOf(Rt);if(typeof Rt!="function"||Rt===h||_t!==h)return _t;var Tt=Rt.prototype,at=Tt&&Object.getPrototypeOf(Tt);if(at==null||at===Object.prototype)return _t;var ce=at.constructor;return typeof ce!="function"||ce===Rt?_t:ce}function Li(){var Rt={},_t=[],Tt=function(){function Ze(Wt,Ut,jt){this._index=0,this._keys=Wt,this._values=Ut,this._selector=jt}return Ze.prototype["@@iterator"]=function(){return this},Ze.prototype[l]=function(){return this},Ze.prototype.next=function(){var Wt=this._index;if(Wt>=0&&Wt<this._keys.length){var Ut=this._selector(this._keys[Wt],this._values[Wt]);return Wt+1>=this._keys.length?(this._index=-1,this._keys=_t,this._values=_t):this._index++,{value:Ut,done:!1}}return{value:void 0,done:!0}},Ze.prototype.throw=function(Wt){throw this._index>=0&&(this._index=-1,this._keys=_t,this._values=_t),Wt},Ze.prototype.return=function(Wt){return this._index>=0&&(this._index=-1,this._keys=_t,this._values=_t),{value:Wt,done:!0}},Ze}();return function(){function Ze(){this._keys=[],this._values=[],this._cacheKey=Rt,this._cacheIndex=-2}return Object.defineProperty(Ze.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ze.prototype.has=function(Wt){return this._find(Wt,!1)>=0},Ze.prototype.get=function(Wt){var Ut=this._find(Wt,!1);return Ut>=0?this._values[Ut]:void 0},Ze.prototype.set=function(Wt,Ut){var jt=this._find(Wt,!0);return this._values[jt]=Ut,this},Ze.prototype.delete=function(Wt){var Ut=this._find(Wt,!1);if(Ut>=0){for(var jt=this._keys.length,xt=Ut+1;xt<jt;xt++)this._keys[xt-1]=this._keys[xt],this._values[xt-1]=this._values[xt];return this._keys.length--,this._values.length--,Wt===this._cacheKey&&(this._cacheKey=Rt,this._cacheIndex=-2),!0}return!1},Ze.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Rt,this._cacheIndex=-2},Ze.prototype.keys=function(){return new Tt(this._keys,this._values,at)},Ze.prototype.values=function(){return new Tt(this._keys,this._values,ce)},Ze.prototype.entries=function(){return new Tt(this._keys,this._values,ut)},Ze.prototype["@@iterator"]=function(){return this.entries()},Ze.prototype[l]=function(){return this.entries()},Ze.prototype._find=function(Wt,Ut){return this._cacheKey!==Wt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Wt)),this._cacheIndex<0&&Ut&&(this._cacheIndex=this._keys.length,this._keys.push(Wt),this._values.push(void 0)),this._cacheIndex},Ze}();function at(Ze,Wt){return Ze}function ce(Ze,Wt){return Wt}function ut(Ze,Wt){return[Ze,Wt]}}function zn(){return function(){function Rt(){this._map=new d}return Object.defineProperty(Rt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Rt.prototype.has=function(_t){return this._map.has(_t)},Rt.prototype.add=function(_t){return this._map.set(_t,_t),this},Rt.prototype.delete=function(_t){return this._map.delete(_t)},Rt.prototype.clear=function(){this._map.clear()},Rt.prototype.keys=function(){return this._map.keys()},Rt.prototype.values=function(){return this._map.values()},Rt.prototype.entries=function(){return this._map.entries()},Rt.prototype["@@iterator"]=function(){return this.keys()},Rt.prototype[l]=function(){return this.keys()},Rt}()}function $e(){var Rt=16,_t=s.create(),Tt=at();return function(){function Ut(){this._key=at()}return Ut.prototype.has=function(jt){var xt=ce(jt,!1);return xt!==void 0?s.has(xt,this._key):!1},Ut.prototype.get=function(jt){var xt=ce(jt,!1);return xt!==void 0?s.get(xt,this._key):void 0},Ut.prototype.set=function(jt,xt){var $t=ce(jt,!0);return $t[this._key]=xt,this},Ut.prototype.delete=function(jt){var xt=ce(jt,!1);return xt!==void 0?delete xt[this._key]:!1},Ut.prototype.clear=function(){this._key=at()},Ut}();function at(){var Ut;do Ut="@@WeakMap@@"+Wt();while(s.has(_t,Ut));return _t[Ut]=!0,Ut}function ce(Ut,jt){if(!u.call(Ut,Tt)){if(!jt)return;Object.defineProperty(Ut,Tt,{value:s.create()})}return Ut[Tt]}function ut(Ut,jt){for(var xt=0;xt<jt;++xt)Ut[xt]=Math.random()*255|0;return Ut}function Ze(Ut){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ut)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ut)):ut(new Uint8Array(Ut),Ut):ut(new Array(Ut),Ut)}function Wt(){var Ut=Ze(Rt);Ut[6]=Ut[6]&79|64,Ut[8]=Ut[8]&191|128;for(var jt="",xt=0;xt<Rt;++xt){var $t=Ut[xt];(xt===4||xt===6||xt===8)&&(jt+="-"),$t<16&&(jt+="0"),jt+=$t.toString(16).toLowerCase()}return jt}}function Xt(Rt){return Rt.__=void 0,delete Rt.__,Rt}})})(ie||(ie={}))},81550:function(bt){(function(O,V){bt.exports=V()})(this,function(){"use strict";var O=function(et){return et instanceof Uint8Array||et instanceof Uint16Array||et instanceof Uint32Array||et instanceof Int8Array||et instanceof Int16Array||et instanceof Int32Array||et instanceof Float32Array||et instanceof Float64Array||et instanceof Uint8ClampedArray},V=function(et,Vt){for(var mn=Object.keys(Vt),dr=0;dr<mn.length;++dr)et[mn[dr]]=Vt[mn[dr]];return et},J=`
`;function ie(et){return typeof atob!="undefined"?atob(et):"base64:"+et}function T(et){var Vt=new Error("(regl) "+et);throw console.error(Vt),Vt}function b(et,Vt){et||T(Vt)}function u(et){return et?": "+et:""}function a(et,Vt,mn){et in Vt||T("unknown parameter ("+et+")"+u(mn)+". possible values: "+Object.keys(Vt).join())}function o(et,Vt){O(et)||T("invalid parameter type"+u(Vt)+". must be a typed array")}function l(et,Vt){switch(Vt){case"number":return typeof et=="number";case"object":return typeof et=="object";case"string":return typeof et=="string";case"boolean":return typeof et=="boolean";case"function":return typeof et=="function";case"undefined":return typeof et=="undefined";case"symbol":return typeof et=="symbol"}}function r(et,Vt,mn){l(et,Vt)||T("invalid parameter type"+u(mn)+". expected "+Vt+", got "+typeof et)}function e(et,Vt){et>=0&&(et|0)===et||T("invalid parameter type, ("+et+")"+u(Vt)+". must be a nonnegative integer")}function t(et,Vt,mn){Vt.indexOf(et)<0&&T("invalid value"+u(mn)+". must be one of: "+Vt)}var s=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function h(et){Object.keys(et).forEach(function(Vt){s.indexOf(Vt)<0&&T('invalid regl constructor argument "'+Vt+'". must be one of '+s)})}function m(et,Vt){for(et=et+"";et.length<Vt;)et=" "+et;return et}function d(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(et,Vt){this.number=et,this.line=Vt,this.errors=[]}function x(et,Vt,mn){this.file=et,this.line=Vt,this.message=mn}function N(){var et=new Error,Vt=(et.stack||et).toString(),mn=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Vt);if(mn)return mn[1];var dr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Vt);return dr?dr[1]:"unknown"}function F(){var et=new Error,Vt=(et.stack||et).toString(),mn=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Vt);if(mn)return mn[1];var dr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Vt);return dr?dr[1]:"unknown"}function ae(et,Vt){var mn=et.split(`
`),dr=1,jr=0,gr={unknown:new d,0:new d};gr.unknown.name=gr[0].name=Vt||N(),gr.unknown.lines.push(new v(0,""));for(var Ar=0;Ar<mn.length;++Ar){var Qr=mn[Ar],fi=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Qr);if(fi)switch(fi[1]){case"line":var Ai=/(\d+)(\s+\d+)?/.exec(fi[2]);Ai&&(dr=Ai[1]|0,Ai[2]&&(jr=Ai[2]|0,jr in gr||(gr[jr]=new d)));break;case"define":var hi=/SHADER_NAME(_B64)?\s+(.*)$/.exec(fi[2]);hi&&(gr[jr].name=hi[1]?ie(hi[2]):hi[2]);break}gr[jr].lines.push(new v(dr++,Qr))}return Object.keys(gr).forEach(function(bi){var Ti=gr[bi];Ti.lines.forEach(function(hr){Ti.index[hr.number]=hr})}),gr}function $(et){var Vt=[];return et.split(`
`).forEach(function(mn){if(!(mn.length<5)){var dr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(mn);dr?Vt.push(new x(dr[1]|0,dr[2]|0,dr[3].trim())):mn.length>0&&Vt.push(new x("unknown",0,mn))}}),Vt}function te(et,Vt){Vt.forEach(function(mn){var dr=et[mn.file];if(dr){var jr=dr.index[mn.line];if(jr){jr.errors.push(mn),dr.hasErrors=!0;return}}et.unknown.hasErrors=!0,et.unknown.lines[0].errors.push(mn)})}function fe(et,Vt,mn,dr,jr){if(!et.getShaderParameter(Vt,et.COMPILE_STATUS)){var gr=et.getShaderInfoLog(Vt),Ar=dr===et.FRAGMENT_SHADER?"fragment":"vertex";q(mn,"string",Ar+" shader source must be a string",jr);var Qr=ae(mn,jr),fi=$(gr);te(Qr,fi),Object.keys(Qr).forEach(function(Ai){var hi=Qr[Ai];if(!hi.hasErrors)return;var bi=[""],Ti=[""];function hr(Ci,Wn){bi.push(Ci),Ti.push(Wn||"")}hr("file number "+Ai+": "+hi.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),hi.lines.forEach(function(Ci){if(Ci.errors.length>0){hr(m(Ci.number,4)+"|  ","background-color:yellow; font-weight:bold"),hr(Ci.line+J,"color:red; background-color:yellow; font-weight:bold");var Wn=0;Ci.errors.forEach(function(vr){var gi=vr.message,Bi=/^\s*'(.*)'\s*:\s*(.*)$/.exec(gi);if(Bi){var Xr=Bi[1];switch(gi=Bi[2],Xr){case"assign":Xr="=";break}Wn=Math.max(Ci.line.indexOf(Xr,Wn),0)}else Wn=0;hr(m("| ",6)),hr(m("^^^",Wn+3)+J,"font-weight:bold"),hr(m("| ",6)),hr(gi+J,"font-weight:bold")}),hr(m("| ",6)+J)}else hr(m(Ci.number,4)+"|  "),hr(Ci.line+J,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ti[0]=bi.join("%c"),console.log.apply(console,Ti)):console.log(bi.join(""))}),b.raise("Error compiling "+Ar+" shader, "+Qr[0].name)}}function B(et,Vt,mn,dr,jr){if(!et.getProgramParameter(Vt,et.LINK_STATUS)){var gr=et.getProgramInfoLog(Vt),Ar=ae(mn,jr),Qr=ae(dr,jr),fi='Error linking program with vertex shader, "'+Qr[0].name+'", and fragment shader "'+Ar[0].name+'"';typeof document!="undefined"?console.log("%c"+fi+J+"%c"+gr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(fi+J+gr),b.raise(fi)}}function he(et){et._commandRef=N()}function z(et,Vt,mn,dr){he(et);function jr(fi){return fi?dr.id(fi):0}et._fragId=jr(et.static.frag),et._vertId=jr(et.static.vert);function gr(fi,Ai){Object.keys(Ai).forEach(function(hi){fi[dr.id(hi)]=!0})}var Ar=et._uniformSet={};gr(Ar,Vt.static),gr(Ar,Vt.dynamic);var Qr=et._attributeSet={};gr(Qr,mn.static),gr(Qr,mn.dynamic),et._hasCount="count"in et.static||"count"in et.dynamic||"elements"in et.static||"elements"in et.dynamic}function ee(et,Vt){var mn=F();T(et+" in command "+(Vt||N())+(mn==="unknown"?"":" called from "+mn))}function pe(et,Vt,mn){et||ee(Vt,mn||N())}function S(et,Vt,mn,dr){et in Vt||ee("unknown parameter ("+et+")"+u(mn)+". possible values: "+Object.keys(Vt).join(),dr||N())}function q(et,Vt,mn,dr){l(et,Vt)||ee("invalid parameter type"+u(mn)+". expected "+Vt+", got "+typeof et,dr||N())}function M(et){et()}function I(et,Vt,mn){et.texture?t(et.texture._texture.internalformat,Vt,"unsupported texture format for attachment"):t(et.renderbuffer._renderbuffer.format,mn,"unsupported renderbuffer format for attachment")}var j=33071,ue=9728,se=9984,Ee=9985,Ce=9986,xe=9987,Oe=5120,Le=5121,Ge=5122,He=5123,Et=5124,Ct=5125,Gt=5126,At=32819,vt=32820,cn=33635,hn=34042,Bn=36193,Fn={};Fn[Oe]=Fn[Le]=1,Fn[Ge]=Fn[He]=Fn[Bn]=Fn[cn]=Fn[At]=Fn[vt]=2,Fn[Et]=Fn[Ct]=Fn[Gt]=Fn[hn]=4;function ir(et,Vt){return et===vt||et===At||et===cn?2:et===hn?4:Fn[et]*Vt}function Nr(et){return!(et&et-1)&&!!et}function Ei(et,Vt,mn){var dr,jr=Vt.width,gr=Vt.height,Ar=Vt.channels;b(jr>0&&jr<=mn.maxTextureSize&&gr>0&&gr<=mn.maxTextureSize,"invalid texture shape"),(et.wrapS!==j||et.wrapT!==j)&&b(Nr(jr)&&Nr(gr),"incompatible wrap mode for texture, both width and height must be power of 2"),Vt.mipmask===1?jr!==1&&gr!==1&&b(et.minFilter!==se&&et.minFilter!==Ce&&et.minFilter!==Ee&&et.minFilter!==xe,"min filter requires mipmap"):(b(Nr(jr)&&Nr(gr),"texture must be a square power of 2 to support mipmapping"),b(Vt.mipmask===(jr<<1)-1,"missing or incomplete mipmap data")),Vt.type===Gt&&(mn.extensions.indexOf("oes_texture_float_linear")<0&&b(et.minFilter===ue&&et.magFilter===ue,"filter not supported, must enable oes_texture_float_linear"),b(!et.genMipmaps,"mipmap generation not supported with float textures"));var Qr=Vt.images;for(dr=0;dr<16;++dr)if(Qr[dr]){var fi=jr>>dr,Ai=gr>>dr;b(Vt.mipmask&1<<dr,"missing mipmap data");var hi=Qr[dr];if(b(hi.width===fi&&hi.height===Ai,"invalid shape for mip images"),b(hi.format===Vt.format&&hi.internalformat===Vt.internalformat&&hi.type===Vt.type,"incompatible type for mip image"),!hi.compressed)if(hi.data){var bi=Math.ceil(ir(hi.type,Ar)*fi/hi.unpackAlignment)*hi.unpackAlignment;b(hi.data.byteLength===bi*Ai,"invalid data for image, buffer size is inconsistent with image format")}else hi.element||hi.copy}else et.genMipmaps||b((Vt.mipmask&1<<dr)===0,"extra mipmap data");Vt.compressed&&b(!et.genMipmaps,"mipmap generation for compressed images not supported")}function ci(et,Vt,mn,dr){var jr=et.width,gr=et.height,Ar=et.channels;b(jr>0&&jr<=dr.maxTextureSize&&gr>0&&gr<=dr.maxTextureSize,"invalid texture shape"),b(jr===gr,"cube map must be square"),b(Vt.wrapS===j&&Vt.wrapT===j,"wrap mode not supported by cube map");for(var Qr=0;Qr<mn.length;++Qr){var fi=mn[Qr];b(fi.width===jr&&fi.height===gr,"inconsistent cube map face shape"),Vt.genMipmaps&&(b(!fi.compressed,"can not generate mipmap for compressed textures"),b(fi.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Ai=fi.images,hi=0;hi<16;++hi){var bi=Ai[hi];if(bi){var Ti=jr>>hi,hr=gr>>hi;b(fi.mipmask&1<<hi,"missing mipmap data"),b(bi.width===Ti&&bi.height===hr,"invalid shape for mip images"),b(bi.format===et.format&&bi.internalformat===et.internalformat&&bi.type===et.type,"incompatible type for mip image"),bi.compressed||(bi.data?b(bi.data.byteLength===Ti*hr*Math.max(ir(bi.type,Ar),bi.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):bi.element||bi.copy)}}}}var Ot=V(b,{optional:M,raise:T,commandRaise:ee,command:pe,parameter:a,commandParameter:S,constructor:h,type:r,commandType:q,isTypedArray:o,nni:e,oneOf:t,shaderError:fe,linkError:B,callSite:F,saveCommandRef:he,saveDrawInfo:z,framebufferFormat:I,guessCommand:N,texture2D:Ei,textureCube:ci}),fr=0,Pi=0;function Li(et,Vt){this.id=fr++,this.type=et,this.data=Vt}function zn(et){return et.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function $e(et){if(et.length===0)return[];var Vt=et.charAt(0),mn=et.charAt(et.length-1);if(et.length>1&&Vt===mn&&(Vt==='"'||Vt==="'"))return['"'+zn(et.substr(1,et.length-2))+'"'];var dr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(et);if(dr)return $e(et.substr(0,dr.index)).concat($e(dr[1])).concat($e(et.substr(dr.index+dr[0].length)));var jr=et.split(".");if(jr.length===1)return['"'+zn(et)+'"'];for(var gr=[],Ar=0;Ar<jr.length;++Ar)gr=gr.concat($e(jr[Ar]));return gr}function Xt(et){return"["+$e(et).join("][")+"]"}function Rt(et,Vt){return new Li(et,Xt(Vt+""))}function _t(et){return typeof et=="function"&&!et._reglType||et instanceof Li}function Tt(et,Vt){return typeof et=="function"?new Li(Pi,et):et}var at={DynamicVariable:Li,define:Rt,isDynamic:_t,unbox:Tt,accessor:Xt},ce={next:typeof requestAnimationFrame=="function"?function(et){return requestAnimationFrame(et)}:function(et){return setTimeout(et,16)},cancel:typeof cancelAnimationFrame=="function"?function(et){return cancelAnimationFrame(et)}:clearTimeout},ut=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ze(){var et={"":0},Vt=[""];return{id:function(mn){var dr=et[mn];return dr||(dr=et[mn]=Vt.length,Vt.push(mn),dr)},str:function(mn){return Vt[mn]}}}function Wt(et,Vt,mn){var dr=document.createElement("canvas");V(dr.style,{border:0,margin:0,padding:0,top:0,left:0}),et.appendChild(dr),et===document.body&&(dr.style.position="absolute",V(et.style,{margin:0,padding:0}));function jr(){var Qr=window.innerWidth,fi=window.innerHeight;if(et!==document.body){var Ai=et.getBoundingClientRect();Qr=Ai.right-Ai.left,fi=Ai.bottom-Ai.top}dr.width=mn*Qr,dr.height=mn*fi,V(dr.style,{width:Qr+"px",height:fi+"px"})}var gr;et!==document.body&&typeof ResizeObserver=="function"?(gr=new ResizeObserver(function(){setTimeout(jr)}),gr.observe(et)):window.addEventListener("resize",jr,!1);function Ar(){gr?gr.disconnect():window.removeEventListener("resize",jr),et.removeChild(dr)}return jr(),{canvas:dr,onDestroy:Ar}}function Ut(et,Vt){function mn(dr){try{return et.getContext(dr,Vt)}catch(jr){return null}}return mn("webgl")||mn("experimental-webgl")||mn("webgl-experimental")}function jt(et){return typeof et.nodeName=="string"&&typeof et.appendChild=="function"&&typeof et.getBoundingClientRect=="function"}function xt(et){return typeof et.drawArrays=="function"||typeof et.drawElements=="function"}function $t(et){return typeof et=="string"?et.split():(Ot(Array.isArray(et),"invalid extension array"),et)}function Un(et){return typeof et=="string"?(Ot(typeof document!="undefined","not supported outside of DOM"),document.querySelector(et)):et}function qn(et){var Vt=et||{},mn,dr,jr,gr,Ar={},Qr=[],fi=[],Ai=typeof window=="undefined"?1:window.devicePixelRatio,hi=!1,bi=function(Ci){Ci&&Ot.raise(Ci)},Ti=function(){};if(typeof Vt=="string"?(Ot(typeof document!="undefined","selector queries only supported in DOM enviroments"),mn=document.querySelector(Vt),Ot(mn,"invalid query string for element")):typeof Vt=="object"?jt(Vt)?mn=Vt:xt(Vt)?(gr=Vt,jr=gr.canvas):(Ot.constructor(Vt),"gl"in Vt?gr=Vt.gl:"canvas"in Vt?jr=Un(Vt.canvas):"container"in Vt&&(dr=Un(Vt.container)),"attributes"in Vt&&(Ar=Vt.attributes,Ot.type(Ar,"object","invalid context attributes")),"extensions"in Vt&&(Qr=$t(Vt.extensions)),"optionalExtensions"in Vt&&(fi=$t(Vt.optionalExtensions)),"onDone"in Vt&&(Ot.type(Vt.onDone,"function","invalid or missing onDone callback"),bi=Vt.onDone),"profile"in Vt&&(hi=!!Vt.profile),"pixelRatio"in Vt&&(Ai=+Vt.pixelRatio,Ot(Ai>0,"invalid pixel ratio"))):Ot.raise("invalid arguments to regl"),mn&&(mn.nodeName.toLowerCase()==="canvas"?jr=mn:dr=mn),!gr){if(!jr){Ot(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var hr=Wt(dr||document.body,bi,Ai);if(!hr)return null;jr=hr.canvas,Ti=hr.onDestroy}Ar.premultipliedAlpha===void 0&&(Ar.premultipliedAlpha=!0),gr=Ut(jr,Ar)}return gr?{gl:gr,canvas:jr,container:dr,extensions:Qr,optionalExtensions:fi,pixelRatio:Ai,profile:hi,onDone:bi,onDestroy:Ti}:(Ti(),bi("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function rr(et,Vt){var mn={};function dr(Ar){Ot.type(Ar,"string","extension name must be string");var Qr=Ar.toLowerCase(),fi;try{fi=mn[Qr]=et.getExtension(Qr)}catch(Ai){}return!!fi}for(var jr=0;jr<Vt.extensions.length;++jr){var gr=Vt.extensions[jr];if(!dr(gr))return Vt.onDestroy(),Vt.onDone('"'+gr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Vt.optionalExtensions.forEach(dr),{extensions:mn,restore:function(){Object.keys(mn).forEach(function(Ar){if(mn[Ar]&&!dr(Ar))throw new Error("(regl): error restoring extension "+Ar)})}}}function xn(et,Vt){for(var mn=Array(et),dr=0;dr<et;++dr)mn[dr]=Vt(dr);return mn}var Or=5120,Pr=5121,cr=5122,ki=5123,Vr=5124,kr=5125,Ui=5126;function Wr(et){for(var Vt=16;Vt<=1<<28;Vt*=16)if(et<=Vt)return Vt;return 0}function no(et){var Vt,mn;return Vt=(et>65535)<<4,et>>>=Vt,mn=(et>255)<<3,et>>>=mn,Vt|=mn,mn=(et>15)<<2,et>>>=mn,Vt|=mn,mn=(et>3)<<1,et>>>=mn,Vt|=mn,Vt|et>>1}function uo(){var et=xn(8,function(){return[]});function Vt(gr){var Ar=Wr(gr),Qr=et[no(Ar)>>2];return Qr.length>0?Qr.pop():new ArrayBuffer(Ar)}function mn(gr){et[no(gr.byteLength)>>2].push(gr)}function dr(gr,Ar){var Qr=null;switch(gr){case Or:Qr=new Int8Array(Vt(Ar),0,Ar);break;case Pr:Qr=new Uint8Array(Vt(Ar),0,Ar);break;case cr:Qr=new Int16Array(Vt(2*Ar),0,Ar);break;case ki:Qr=new Uint16Array(Vt(2*Ar),0,Ar);break;case Vr:Qr=new Int32Array(Vt(4*Ar),0,Ar);break;case kr:Qr=new Uint32Array(Vt(4*Ar),0,Ar);break;case Ui:Qr=new Float32Array(Vt(4*Ar),0,Ar);break;default:return null}return Qr.length!==Ar?Qr.subarray(0,Ar):Qr}function jr(gr){mn(gr.buffer)}return{alloc:Vt,free:mn,allocType:dr,freeType:jr}}var wi=uo();wi.zero=uo();var wo=3408,fs=3410,zo=3411,hs=3412,ks=3413,rs=3414,Eo=3415,Qo=33901,Xs=33902,Ys=3379,ot=3386,mt=34921,_e=36347,Z=36348,Q=35661,le=35660,Xe=34930,dt=36349,ft=34076,gt=34024,ln=7936,bn=7937,En=7938,Cr=35724,tr=34047,ii=36063,Zi=34852,Mn=3553,Xn=34067,$r=34069,Re=33984,Ne=6408,Te=5126,U=5121,Y=36160,ge=36053,Ye=36064,ct=16384,nt=function(et,Vt){var mn=1;Vt.ext_texture_filter_anisotropic&&(mn=et.getParameter(tr));var dr=1,jr=1;Vt.webgl_draw_buffers&&(dr=et.getParameter(Zi),jr=et.getParameter(ii));var gr=!!Vt.oes_texture_float;if(gr){var Ar=et.createTexture();et.bindTexture(Mn,Ar),et.texImage2D(Mn,0,Ne,1,1,0,Ne,Te,null);var Qr=et.createFramebuffer();if(et.bindFramebuffer(Y,Qr),et.framebufferTexture2D(Y,Ye,Mn,Ar,0),et.bindTexture(Mn,null),et.checkFramebufferStatus(Y)!==ge)gr=!1;else{et.viewport(0,0,1,1),et.clearColor(1,0,0,1),et.clear(ct);var fi=wi.allocType(Te,4);et.readPixels(0,0,1,1,Ne,Te,fi),et.getError()?gr=!1:(et.deleteFramebuffer(Qr),et.deleteTexture(Ar),gr=fi[0]===1),wi.freeType(fi)}}var Ai=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),hi=!0;if(!Ai){var bi=et.createTexture(),Ti=wi.allocType(U,36);et.activeTexture(Re),et.bindTexture(Xn,bi),et.texImage2D($r,0,Ne,3,3,0,Ne,U,Ti),wi.freeType(Ti),et.bindTexture(Xn,null),et.deleteTexture(bi),hi=!et.getError()}return{colorBits:[et.getParameter(fs),et.getParameter(zo),et.getParameter(hs),et.getParameter(ks)],depthBits:et.getParameter(rs),stencilBits:et.getParameter(Eo),subpixelBits:et.getParameter(wo),extensions:Object.keys(Vt).filter(function(hr){return!!Vt[hr]}),maxAnisotropic:mn,maxDrawbuffers:dr,maxColorAttachments:jr,pointSizeDims:et.getParameter(Qo),lineWidthDims:et.getParameter(Xs),maxViewportDims:et.getParameter(ot),maxCombinedTextureUnits:et.getParameter(Q),maxCubeMapSize:et.getParameter(ft),maxRenderbufferSize:et.getParameter(gt),maxTextureUnits:et.getParameter(Xe),maxTextureSize:et.getParameter(Ys),maxAttributes:et.getParameter(mt),maxVertexUniforms:et.getParameter(_e),maxVertexTextureUnits:et.getParameter(le),maxVaryingVectors:et.getParameter(Z),maxFragmentUniforms:et.getParameter(dt),glsl:et.getParameter(Cr),renderer:et.getParameter(bn),vendor:et.getParameter(ln),version:et.getParameter(En),readFloat:gr,npotTextureCube:hi}};function lt(et){return!!et&&typeof et=="object"&&Array.isArray(et.shape)&&Array.isArray(et.stride)&&typeof et.offset=="number"&&et.shape.length===et.stride.length&&(Array.isArray(et.data)||O(et.data))}var fn=function(et){return Object.keys(et).map(function(Vt){return et[Vt]})},on={shape:Pn,flatten:xi};function Gn(et,Vt,mn){for(var dr=0;dr<Vt;++dr)mn[dr]=et[dr]}function er(et,Vt,mn,dr){for(var jr=0,gr=0;gr<Vt;++gr)for(var Ar=et[gr],Qr=0;Qr<mn;++Qr)dr[jr++]=Ar[Qr]}function Kn(et,Vt,mn,dr,jr,gr){for(var Ar=gr,Qr=0;Qr<Vt;++Qr)for(var fi=et[Qr],Ai=0;Ai<mn;++Ai)for(var hi=fi[Ai],bi=0;bi<dr;++bi)jr[Ar++]=hi[bi]}function qr(et,Vt,mn,dr,jr){for(var gr=1,Ar=mn+1;Ar<Vt.length;++Ar)gr*=Vt[Ar];var Qr=Vt[mn];if(Vt.length-mn===4){var fi=Vt[mn+1],Ai=Vt[mn+2],hi=Vt[mn+3];for(Ar=0;Ar<Qr;++Ar)Kn(et[Ar],fi,Ai,hi,dr,jr),jr+=gr}else for(Ar=0;Ar<Qr;++Ar)qr(et[Ar],Vt,mn+1,dr,jr),jr+=gr}function xi(et,Vt,mn,dr){var jr=1;if(Vt.length)for(var gr=0;gr<Vt.length;++gr)jr*=Vt[gr];else jr=0;var Ar=dr||wi.allocType(mn,jr);switch(Vt.length){case 0:break;case 1:Gn(et,Vt[0],Ar);break;case 2:er(et,Vt[0],Vt[1],Ar);break;case 3:Kn(et,Vt[0],Vt[1],Vt[2],Ar,0);break;default:qr(et,Vt,0,Ar,0)}return Ar}function Pn(et){for(var Vt=[],mn=et;mn.length;mn=mn[0])Vt.push(mn.length);return Vt}var $n={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Rr=5120,Di=5122,Jr=5124,$o=5121,Vo=5123,lo=5125,Xi=5126,Ho=5126,cs={int8:Rr,int16:Di,int32:Jr,uint8:$o,uint16:Vo,uint32:lo,float:Xi,float32:Ho},li=35048,xs=35040,Ae={dynamic:li,stream:xs,static:35044},Ke=on.flatten,pt=on.shape,Ht=35044,an=35040,Ln=5121,wr=5126,yr=[];yr[5120]=1,yr[5122]=2,yr[5124]=4,yr[5121]=1,yr[5123]=2,yr[5125]=4,yr[5126]=4;function ei(et){return $n[Object.prototype.toString.call(et)]|0}function Ii(et,Vt){for(var mn=0;mn<Vt.length;++mn)et[mn]=Vt[mn]}function to(et,Vt,mn,dr,jr,gr,Ar){for(var Qr=0,fi=0;fi<mn;++fi)for(var Ai=0;Ai<dr;++Ai)et[Qr++]=Vt[jr*fi+gr*Ai+Ar]}function Ji(et,Vt,mn,dr){var jr=0,gr={};function Ar(Wn){this.id=jr++,this.buffer=et.createBuffer(),this.type=Wn,this.usage=Ht,this.byteLength=0,this.dimension=1,this.dtype=Ln,this.persistentData=null,mn.profile&&(this.stats={size:0})}Ar.prototype.bind=function(){et.bindBuffer(this.type,this.buffer)},Ar.prototype.destroy=function(){Ti(this)};var Qr=[];function fi(Wn,vr){var gi=Qr.pop();return gi||(gi=new Ar(Wn)),gi.bind(),bi(gi,vr,an,0,1,!1),gi}function Ai(Wn){Qr.push(Wn)}function hi(Wn,vr,gi){Wn.byteLength=vr.byteLength,et.bufferData(Wn.type,vr,gi)}function bi(Wn,vr,gi,Bi,Xr,_i){var mi;if(Wn.usage=gi,Array.isArray(vr)){if(Wn.dtype=Bi||wr,vr.length>0){var zi;if(Array.isArray(vr[0])){mi=pt(vr);for(var Zr=1,Ri=1;Ri<mi.length;++Ri)Zr*=mi[Ri];Wn.dimension=Zr,zi=Ke(vr,mi,Wn.dtype),hi(Wn,zi,gi),_i?Wn.persistentData=zi:wi.freeType(zi)}else if(typeof vr[0]=="number"){Wn.dimension=Xr;var Oo=wi.allocType(Wn.dtype,vr.length);Ii(Oo,vr),hi(Wn,Oo,gi),_i?Wn.persistentData=Oo:wi.freeType(Oo)}else O(vr[0])?(Wn.dimension=vr[0].length,Wn.dtype=Bi||ei(vr[0])||wr,zi=Ke(vr,[vr.length,vr[0].length],Wn.dtype),hi(Wn,zi,gi),_i?Wn.persistentData=zi:wi.freeType(zi)):Ot.raise("invalid buffer data")}}else if(O(vr))Wn.dtype=Bi||ei(vr),Wn.dimension=Xr,hi(Wn,vr,gi),_i&&(Wn.persistentData=new Uint8Array(new Uint8Array(vr.buffer)));else if(lt(vr)){mi=vr.shape;var Po=vr.stride,ji=vr.offset,pi=0,Gr=0,To=0,ms=0;mi.length===1?(pi=mi[0],Gr=1,To=Po[0],ms=0):mi.length===2?(pi=mi[0],Gr=mi[1],To=Po[0],ms=Po[1]):Ot.raise("invalid shape"),Wn.dtype=Bi||ei(vr.data)||wr,Wn.dimension=Gr;var xo=wi.allocType(Wn.dtype,pi*Gr);to(xo,vr.data,pi,Gr,To,ms,ji),hi(Wn,xo,gi),_i?Wn.persistentData=xo:wi.freeType(xo)}else vr instanceof ArrayBuffer?(Wn.dtype=Ln,Wn.dimension=Xr,hi(Wn,vr,gi),_i&&(Wn.persistentData=new Uint8Array(new Uint8Array(vr)))):Ot.raise("invalid buffer data")}function Ti(Wn){Vt.bufferCount--,dr(Wn);var vr=Wn.buffer;Ot(vr,"buffer must not be deleted already"),et.deleteBuffer(vr),Wn.buffer=null,delete gr[Wn.id]}function hr(Wn,vr,gi,Bi){Vt.bufferCount++;var Xr=new Ar(vr);gr[Xr.id]=Xr;function _i(Zr){var Ri=Ht,Oo=null,Po=0,ji=0,pi=1;return Array.isArray(Zr)||O(Zr)||lt(Zr)||Zr instanceof ArrayBuffer?Oo=Zr:typeof Zr=="number"?Po=Zr|0:Zr&&(Ot.type(Zr,"object","buffer arguments must be an object, a number or an array"),"data"in Zr&&(Ot(Oo===null||Array.isArray(Oo)||O(Oo)||lt(Oo),"invalid data for buffer"),Oo=Zr.data),"usage"in Zr&&(Ot.parameter(Zr.usage,Ae,"invalid buffer usage"),Ri=Ae[Zr.usage]),"type"in Zr&&(Ot.parameter(Zr.type,cs,"invalid buffer type"),ji=cs[Zr.type]),"dimension"in Zr&&(Ot.type(Zr.dimension,"number","invalid dimension"),pi=Zr.dimension|0),"length"in Zr&&(Ot.nni(Po,"buffer length must be a nonnegative integer"),Po=Zr.length|0)),Xr.bind(),Oo?bi(Xr,Oo,Ri,ji,pi,Bi):(Po&&et.bufferData(Xr.type,Po,Ri),Xr.dtype=ji||Ln,Xr.usage=Ri,Xr.dimension=pi,Xr.byteLength=Po),mn.profile&&(Xr.stats.size=Xr.byteLength*yr[Xr.dtype]),_i}function mi(Zr,Ri){Ot(Ri+Zr.byteLength<=Xr.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Zr.byteLength+" starting from offset "+Ri+" to a buffer of size "+Xr.byteLength),et.bufferSubData(Xr.type,Ri,Zr)}function zi(Zr,Ri){var Oo=(Ri||0)|0,Po;if(Xr.bind(),O(Zr)||Zr instanceof ArrayBuffer)mi(Zr,Oo);else if(Array.isArray(Zr)){if(Zr.length>0)if(typeof Zr[0]=="number"){var ji=wi.allocType(Xr.dtype,Zr.length);Ii(ji,Zr),mi(ji,Oo),wi.freeType(ji)}else if(Array.isArray(Zr[0])||O(Zr[0])){Po=pt(Zr);var pi=Ke(Zr,Po,Xr.dtype);mi(pi,Oo),wi.freeType(pi)}else Ot.raise("invalid buffer data")}else if(lt(Zr)){Po=Zr.shape;var Gr=Zr.stride,To=0,ms=0,xo=0,as=0;Po.length===1?(To=Po[0],ms=1,xo=Gr[0],as=0):Po.length===2?(To=Po[0],ms=Po[1],xo=Gr[0],as=Gr[1]):Ot.raise("invalid shape");var es=Array.isArray(Zr.data)?Xr.dtype:ei(Zr.data),ps=wi.allocType(es,To*ms);to(ps,Zr.data,To,ms,xo,as,Zr.offset),mi(ps,Oo),wi.freeType(ps)}else Ot.raise("invalid data for buffer subdata");return _i}return gi||_i(Wn),_i._reglType="buffer",_i._buffer=Xr,_i.subdata=zi,mn.profile&&(_i.stats=Xr.stats),_i.destroy=function(){Ti(Xr)},_i}function Ci(){fn(gr).forEach(function(Wn){Wn.buffer=et.createBuffer(),et.bindBuffer(Wn.type,Wn.buffer),et.bufferData(Wn.type,Wn.persistentData||Wn.byteLength,Wn.usage)})}return mn.profile&&(Vt.getTotalBufferSize=function(){var Wn=0;return Object.keys(gr).forEach(function(vr){Wn+=gr[vr].stats.size}),Wn}),{create:hr,createStream:fi,destroyStream:Ai,clear:function(){fn(gr).forEach(Ti),Qr.forEach(Ti)},getBuffer:function(Wn){return Wn&&Wn._buffer instanceof Ar?Wn._buffer:null},restore:Ci,_initBuffer:bi}}var Yi=0,Uo=0,Oi=1,Co=1,Fs=4,ss=4,qo={points:Yi,point:Uo,lines:Oi,line:Co,triangles:Fs,triangle:ss,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},js=0,Zs=1,Mo=4,la=5120,X=5121,ve=5122,Ie=5123,ke=5124,st=5125,P=34963,W=35040,ye=35044;function Se(et,Vt,mn,dr){var jr={},gr=0,Ar={uint8:X,uint16:Ie};Vt.oes_element_index_uint&&(Ar.uint32=st);function Qr(Ci){this.id=gr++,jr[this.id]=this,this.buffer=Ci,this.primType=Mo,this.vertCount=0,this.type=0}Qr.prototype.bind=function(){this.buffer.bind()};var fi=[];function Ai(Ci){var Wn=fi.pop();return Wn||(Wn=new Qr(mn.create(null,P,!0,!1)._buffer)),bi(Wn,Ci,W,-1,-1,0,0),Wn}function hi(Ci){fi.push(Ci)}function bi(Ci,Wn,vr,gi,Bi,Xr,_i){Ci.buffer.bind();var mi;if(Wn){var zi=_i;!_i&&(!O(Wn)||lt(Wn)&&!O(Wn.data))&&(zi=Vt.oes_element_index_uint?st:Ie),mn._initBuffer(Ci.buffer,Wn,vr,zi,3)}else et.bufferData(P,Xr,vr),Ci.buffer.dtype=mi||X,Ci.buffer.usage=vr,Ci.buffer.dimension=3,Ci.buffer.byteLength=Xr;if(mi=_i,!_i){switch(Ci.buffer.dtype){case X:case la:mi=X;break;case Ie:case ve:mi=Ie;break;case st:case ke:mi=st;break;default:Ot.raise("unsupported type for element array")}Ci.buffer.dtype=mi}Ci.type=mi,Ot(mi!==st||!!Vt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Zr=Bi;Zr<0&&(Zr=Ci.buffer.byteLength,mi===Ie?Zr>>=1:mi===st&&(Zr>>=2)),Ci.vertCount=Zr;var Ri=gi;if(gi<0){Ri=Mo;var Oo=Ci.buffer.dimension;Oo===1&&(Ri=js),Oo===2&&(Ri=Zs),Oo===3&&(Ri=Mo)}Ci.primType=Ri}function Ti(Ci){dr.elementsCount--,Ot(Ci.buffer!==null,"must not double destroy elements"),delete jr[Ci.id],Ci.buffer.destroy(),Ci.buffer=null}function hr(Ci,Wn){var vr=mn.create(null,P,!0),gi=new Qr(vr._buffer);dr.elementsCount++;function Bi(Xr){if(!Xr)vr(),gi.primType=Mo,gi.vertCount=0,gi.type=X;else if(typeof Xr=="number")vr(Xr),gi.primType=Mo,gi.vertCount=Xr|0,gi.type=X;else{var _i=null,mi=ye,zi=-1,Zr=-1,Ri=0,Oo=0;Array.isArray(Xr)||O(Xr)||lt(Xr)?_i=Xr:(Ot.type(Xr,"object","invalid arguments for elements"),"data"in Xr&&(_i=Xr.data,Ot(Array.isArray(_i)||O(_i)||lt(_i),"invalid data for element buffer")),"usage"in Xr&&(Ot.parameter(Xr.usage,Ae,"invalid element buffer usage"),mi=Ae[Xr.usage]),"primitive"in Xr&&(Ot.parameter(Xr.primitive,qo,"invalid element buffer primitive"),zi=qo[Xr.primitive]),"count"in Xr&&(Ot(typeof Xr.count=="number"&&Xr.count>=0,"invalid vertex count for elements"),Zr=Xr.count|0),"type"in Xr&&(Ot.parameter(Xr.type,Ar,"invalid buffer type"),Oo=Ar[Xr.type]),"length"in Xr?Ri=Xr.length|0:(Ri=Zr,Oo===Ie||Oo===ve?Ri*=2:(Oo===st||Oo===ke)&&(Ri*=4))),bi(gi,_i,mi,zi,Zr,Ri,Oo)}return Bi}return Bi(Ci),Bi._reglType="elements",Bi._elements=gi,Bi.subdata=function(Xr,_i){return vr.subdata(Xr,_i),Bi},Bi.destroy=function(){Ti(gi)},Bi}return{create:hr,createStream:Ai,destroyStream:hi,getElements:function(Ci){return typeof Ci=="function"&&Ci._elements instanceof Qr?Ci._elements:null},clear:function(){fn(jr).forEach(Ti)}}}var Be=new Float32Array(1),Fe=new Uint32Array(Be.buffer),qe=5123;function Mt(et){for(var Vt=wi.allocType(qe,et.length),mn=0;mn<et.length;++mn)if(isNaN(et[mn]))Vt[mn]=65535;else if(et[mn]===1/0)Vt[mn]=31744;else if(et[mn]===-1/0)Vt[mn]=64512;else{Be[0]=et[mn];var dr=Fe[0],jr=dr>>>31<<15,gr=(dr<<1>>>24)-127,Ar=dr>>13&1024-1;if(gr<-24)Vt[mn]=jr;else if(gr<-14){var Qr=-14-gr;Vt[mn]=jr+(Ar+1024>>Qr)}else gr>15?Vt[mn]=jr+31744:Vt[mn]=jr+(gr+15<<10)+Ar}return Vt}function Lt(et){return Array.isArray(et)||O(et)}var vn=function(et){return!(et&et-1)&&!!et},Zn=34467,Qn=3553,jn=34067,pr=34069,vi=6408,co=6406,di=6407,Zo=6409,qi=6410,is=32854,Js=32855,Yo=36194,Ss=32819,ko=32820,vs=33635,xa=34042,ua=6402,_s=34041,Pa=35904,Us=35906,ta=36193,La=33776,qs=33777,mu=33778,eo=33779,ds=35986,Vs=35987,oa=34798,Oa=35840,ls=35841,Ha=35842,sa=35843,Xa=36196,ma=5121,uc=5123,qa=5125,Sa=5126,cc=10242,eu=10243,lc=10497,Aa=33071,Vu=33648,Wu=10240,Lu=10241,Ku=9728,du=9729,qt=9984,In=9985,br=9986,Mr=9987,Yr=33170,Bt=4352,nn=4353,Dn=4354,Dt=34046,en=3317,un=37440,Jn=37441,Tr=37443,Sr=37444,Wi=33984,Fi=[qt,br,In,Mr],ro=[0,Zo,qi,di,vi],_o={};_o[Zo]=_o[co]=_o[ua]=1,_o[_s]=_o[qi]=2,_o[di]=_o[Pa]=3,_o[vi]=_o[Us]=4;function $i(et){return"[object "+et+"]"}var Ds=$i("HTMLCanvasElement"),Ws=$i("OffscreenCanvas"),ya=$i("CanvasRenderingContext2D"),au=$i("ImageBitmap"),yu=$i("HTMLImageElement"),Rs=$i("HTMLVideoElement"),uu=Object.keys($n).concat([Ds,Ws,ya,au,yu,Rs]),Bc=[];Bc[ma]=1,Bc[Sa]=4,Bc[ta]=2,Bc[uc]=2,Bc[qa]=4;var Ua=[];Ua[is]=2,Ua[Js]=2,Ua[Yo]=2,Ua[_s]=4,Ua[La]=.5,Ua[qs]=.5,Ua[mu]=1,Ua[eo]=1,Ua[ds]=.5,Ua[Vs]=1,Ua[oa]=1,Ua[Oa]=.5,Ua[ls]=.25,Ua[Ha]=.5,Ua[sa]=.25,Ua[Xa]=.5;function ef(et){return Array.isArray(et)&&(et.length===0||typeof et[0]=="number")}function nh(et){if(!Array.isArray(et))return!1;var Vt=et.length;return!(Vt===0||!Lt(et[0]))}function kc(et){return Object.prototype.toString.call(et)}function Jc(et){return kc(et)===Ds}function Ju(et){return kc(et)===Ws}function Rl(et){return kc(et)===ya}function tf(et){return kc(et)===au}function fc(et){return kc(et)===yu}function Gc(et){return kc(et)===Rs}function os(et){if(!et)return!1;var Vt=kc(et);return uu.indexOf(Vt)>=0?!0:ef(et)||nh(et)||lt(et)}function Qu(et){return $n[Object.prototype.toString.call(et)]|0}function rh(et,Vt){var mn=Vt.length;switch(et.type){case ma:case uc:case qa:case Sa:var dr=wi.allocType(et.type,mn);dr.set(Vt),et.data=dr;break;case ta:et.data=Mt(Vt);break;default:Ot.raise("unsupported texture type, must specify a typed array")}}function Fc(et,Vt){return wi.allocType(et.type===ta?Sa:et.type,Vt)}function Qc(et,Vt){et.type===ta?(et.data=Mt(Vt),wi.freeType(Vt)):et.data=Vt}function Mf(et,Vt,mn,dr,jr,gr){for(var Ar=et.width,Qr=et.height,fi=et.channels,Ai=Ar*Qr*fi,hi=Fc(et,Ai),bi=0,Ti=0;Ti<Qr;++Ti)for(var hr=0;hr<Ar;++hr)for(var Ci=0;Ci<fi;++Ci)hi[bi++]=Vt[mn*hr+dr*Ti+jr*Ci+gr];Qc(et,hi)}function Pf(et,Vt,mn,dr,jr,gr){var Ar;if(typeof Ua[et]!="undefined"?Ar=Ua[et]:Ar=_o[et]*Bc[Vt],gr&&(Ar*=6),jr){for(var Qr=0,fi=mn;fi>=1;)Qr+=Ar*fi*fi,fi/=2;return Qr}else return Ar*mn*dr}function Ph(et,Vt,mn,dr,jr,gr,Ar){var Qr={"don't care":Bt,"dont care":Bt,nice:Dn,fast:nn},fi={repeat:lc,clamp:Aa,mirror:Vu},Ai={nearest:Ku,linear:du},hi=V({mipmap:Mr,"nearest mipmap nearest":qt,"linear mipmap nearest":In,"nearest mipmap linear":br,"linear mipmap linear":Mr},Ai),bi={none:0,browser:Sr},Ti={uint8:ma,rgba4:Ss,rgb565:vs,"rgb5 a1":ko},hr={alpha:co,luminance:Zo,"luminance alpha":qi,rgb:di,rgba:vi,rgba4:is,"rgb5 a1":Js,rgb565:Yo},Ci={};Vt.ext_srgb&&(hr.srgb=Pa,hr.srgba=Us),Vt.oes_texture_float&&(Ti.float32=Ti.float=Sa),Vt.oes_texture_half_float&&(Ti.float16=Ti["half float"]=ta),Vt.webgl_depth_texture&&(V(hr,{depth:ua,"depth stencil":_s}),V(Ti,{uint16:uc,uint32:qa,"depth stencil":xa})),Vt.webgl_compressed_texture_s3tc&&V(Ci,{"rgb s3tc dxt1":La,"rgba s3tc dxt1":qs,"rgba s3tc dxt3":mu,"rgba s3tc dxt5":eo}),Vt.webgl_compressed_texture_atc&&V(Ci,{"rgb atc":ds,"rgba atc explicit alpha":Vs,"rgba atc interpolated alpha":oa}),Vt.webgl_compressed_texture_pvrtc&&V(Ci,{"rgb pvrtc 4bppv1":Oa,"rgb pvrtc 2bppv1":ls,"rgba pvrtc 4bppv1":Ha,"rgba pvrtc 2bppv1":sa}),Vt.webgl_compressed_texture_etc1&&(Ci["rgb etc1"]=Xa);var Wn=Array.prototype.slice.call(et.getParameter(Zn));Object.keys(Ci).forEach(function(rn){var xr=Ci[rn];Wn.indexOf(xr)>=0&&(hr[rn]=xr)});var vr=Object.keys(hr);mn.textureFormats=vr;var gi=[];Object.keys(hr).forEach(function(rn){var xr=hr[rn];gi[xr]=rn});var Bi=[];Object.keys(Ti).forEach(function(rn){var xr=Ti[rn];Bi[xr]=rn});var Xr=[];Object.keys(Ai).forEach(function(rn){var xr=Ai[rn];Xr[xr]=rn});var _i=[];Object.keys(hi).forEach(function(rn){var xr=hi[rn];_i[xr]=rn});var mi=[];Object.keys(fi).forEach(function(rn){var xr=fi[rn];mi[xr]=rn});var zi=vr.reduce(function(rn,xr){var sr=hr[xr];return sr===Zo||sr===co||sr===Zo||sr===qi||sr===ua||sr===_s||Vt.ext_srgb&&(sr===Pa||sr===Us)?rn[sr]=sr:sr===Js||xr.indexOf("rgba")>=0?rn[sr]=vi:rn[sr]=di,rn},{});function Zr(){this.internalformat=vi,this.format=vi,this.type=ma,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Sr,this.width=0,this.height=0,this.channels=0}function Ri(rn,xr){rn.internalformat=xr.internalformat,rn.format=xr.format,rn.type=xr.type,rn.compressed=xr.compressed,rn.premultiplyAlpha=xr.premultiplyAlpha,rn.flipY=xr.flipY,rn.unpackAlignment=xr.unpackAlignment,rn.colorSpace=xr.colorSpace,rn.width=xr.width,rn.height=xr.height,rn.channels=xr.channels}function Oo(rn,xr){if(!(typeof xr!="object"||!xr)){if("premultiplyAlpha"in xr&&(Ot.type(xr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),rn.premultiplyAlpha=xr.premultiplyAlpha),"flipY"in xr&&(Ot.type(xr.flipY,"boolean","invalid texture flip"),rn.flipY=xr.flipY),"alignment"in xr&&(Ot.oneOf(xr.alignment,[1,2,4,8],"invalid texture unpack alignment"),rn.unpackAlignment=xr.alignment),"colorSpace"in xr&&(Ot.parameter(xr.colorSpace,bi,"invalid colorSpace"),rn.colorSpace=bi[xr.colorSpace]),"type"in xr){var sr=xr.type;Ot(Vt.oes_texture_float||!(sr==="float"||sr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ot(Vt.oes_texture_half_float||!(sr==="half float"||sr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ot(Vt.webgl_depth_texture||!(sr==="uint16"||sr==="uint32"||sr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ot.parameter(sr,Ti,"invalid texture type"),rn.type=Ti[sr]}var Qi=rn.width,ws=rn.height,ga=rn.channels,kt=!1;"shape"in xr?(Ot(Array.isArray(xr.shape)&&xr.shape.length>=2,"shape must be an array"),Qi=xr.shape[0],ws=xr.shape[1],xr.shape.length===3&&(ga=xr.shape[2],Ot(ga>0&&ga<=4,"invalid number of channels"),kt=!0),Ot(Qi>=0&&Qi<=mn.maxTextureSize,"invalid width"),Ot(ws>=0&&ws<=mn.maxTextureSize,"invalid height")):("radius"in xr&&(Qi=ws=xr.radius,Ot(Qi>=0&&Qi<=mn.maxTextureSize,"invalid radius")),"width"in xr&&(Qi=xr.width,Ot(Qi>=0&&Qi<=mn.maxTextureSize,"invalid width")),"height"in xr&&(ws=xr.height,Ot(ws>=0&&ws<=mn.maxTextureSize,"invalid height")),"channels"in xr&&(ga=xr.channels,Ot(ga>0&&ga<=4,"invalid number of channels"),kt=!0)),rn.width=Qi|0,rn.height=ws|0,rn.channels=ga|0;var Kt=!1;if("format"in xr){var pn=xr.format;Ot(Vt.webgl_depth_texture||!(pn==="depth"||pn==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ot.parameter(pn,hr,"invalid texture format");var lr=rn.internalformat=hr[pn];rn.format=zi[lr],pn in Ti&&("type"in xr||(rn.type=Ti[pn])),pn in Ci&&(rn.compressed=!0),Kt=!0}!kt&&Kt?rn.channels=_o[rn.format]:kt&&!Kt?rn.channels!==ro[rn.format]&&(rn.format=rn.internalformat=ro[rn.channels]):Kt&&kt&&Ot(rn.channels===_o[rn.format],"number of channels inconsistent with specified format")}}function Po(rn){et.pixelStorei(un,rn.flipY),et.pixelStorei(Jn,rn.premultiplyAlpha),et.pixelStorei(Tr,rn.colorSpace),et.pixelStorei(en,rn.unpackAlignment)}function ji(){Zr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function pi(rn,xr){var sr=null;if(os(xr)?sr=xr:xr&&(Ot.type(xr,"object","invalid pixel data type"),Oo(rn,xr),"x"in xr&&(rn.xOffset=xr.x|0),"y"in xr&&(rn.yOffset=xr.y|0),os(xr.data)&&(sr=xr.data)),Ot(!rn.compressed||sr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),xr.copy){Ot(!sr,"can not specify copy and data field for the same texture");var Qi=jr.viewportWidth,ws=jr.viewportHeight;rn.width=rn.width||Qi-rn.xOffset,rn.height=rn.height||ws-rn.yOffset,rn.needsCopy=!0,Ot(rn.xOffset>=0&&rn.xOffset<Qi&&rn.yOffset>=0&&rn.yOffset<ws&&rn.width>0&&rn.width<=Qi&&rn.height>0&&rn.height<=ws,"copy texture read out of bounds")}else if(!sr)rn.width=rn.width||1,rn.height=rn.height||1,rn.channels=rn.channels||4;else if(O(sr))rn.channels=rn.channels||4,rn.data=sr,!("type"in xr)&&rn.type===ma&&(rn.type=Qu(sr));else if(ef(sr))rn.channels=rn.channels||4,rh(rn,sr),rn.alignment=1,rn.needsFree=!0;else if(lt(sr)){var ga=sr.data;!Array.isArray(ga)&&rn.type===ma&&(rn.type=Qu(ga));var kt=sr.shape,Kt=sr.stride,pn,lr,ar,Cn,_n,Nn;kt.length===3?(ar=kt[2],Nn=Kt[2]):(Ot(kt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ar=1,Nn=1),pn=kt[0],lr=kt[1],Cn=Kt[0],_n=Kt[1],rn.alignment=1,rn.width=pn,rn.height=lr,rn.channels=ar,rn.format=rn.internalformat=ro[ar],rn.needsFree=!0,Mf(rn,ga,Cn,_n,Nn,sr.offset)}else if(Jc(sr)||Ju(sr)||Rl(sr))Jc(sr)||Ju(sr)?rn.element=sr:rn.element=sr.canvas,rn.width=rn.element.width,rn.height=rn.element.height,rn.channels=4;else if(tf(sr))rn.element=sr,rn.width=sr.width,rn.height=sr.height,rn.channels=4;else if(fc(sr))rn.element=sr,rn.width=sr.naturalWidth,rn.height=sr.naturalHeight,rn.channels=4;else if(Gc(sr))rn.element=sr,rn.width=sr.videoWidth,rn.height=sr.videoHeight,rn.channels=4;else if(nh(sr)){var sn=rn.width||sr[0].length,Tn=rn.height||sr.length,Yt=rn.channels;Lt(sr[0][0])?Yt=Yt||sr[0][0].length:Yt=Yt||1;for(var An=on.shape(sr),Er=1,Ir=0;Ir<An.length;++Ir)Er*=An[Ir];var ti=Fc(rn,Er);on.flatten(sr,An,"",ti),Qc(rn,ti),rn.alignment=1,rn.width=sn,rn.height=Tn,rn.channels=Yt,rn.format=rn.internalformat=ro[Yt],rn.needsFree=!0}rn.type===Sa?Ot(mn.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):rn.type===ta&&Ot(mn.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Gr(rn,xr,sr){var Qi=rn.element,ws=rn.data,ga=rn.internalformat,kt=rn.format,Kt=rn.type,pn=rn.width,lr=rn.height;Po(rn),Qi?et.texImage2D(xr,sr,kt,kt,Kt,Qi):rn.compressed?et.compressedTexImage2D(xr,sr,ga,pn,lr,0,ws):rn.needsCopy?(dr(),et.copyTexImage2D(xr,sr,kt,rn.xOffset,rn.yOffset,pn,lr,0)):et.texImage2D(xr,sr,kt,pn,lr,0,kt,Kt,ws||null)}function To(rn,xr,sr,Qi,ws){var ga=rn.element,kt=rn.data,Kt=rn.internalformat,pn=rn.format,lr=rn.type,ar=rn.width,Cn=rn.height;Po(rn),ga?et.texSubImage2D(xr,ws,sr,Qi,pn,lr,ga):rn.compressed?et.compressedTexSubImage2D(xr,ws,sr,Qi,Kt,ar,Cn,kt):rn.needsCopy?(dr(),et.copyTexSubImage2D(xr,ws,sr,Qi,rn.xOffset,rn.yOffset,ar,Cn)):et.texSubImage2D(xr,ws,sr,Qi,ar,Cn,pn,lr,kt)}var ms=[];function xo(){return ms.pop()||new ji}function as(rn){rn.needsFree&&wi.freeType(rn.data),ji.call(rn),ms.push(rn)}function es(){Zr.call(this),this.genMipmaps=!1,this.mipmapHint=Bt,this.mipmask=0,this.images=Array(16)}function ps(rn,xr,sr){var Qi=rn.images[0]=xo();rn.mipmask=1,Qi.width=rn.width=xr,Qi.height=rn.height=sr,Qi.channels=rn.channels=4}function gs(rn,xr){var sr=null;if(os(xr))sr=rn.images[0]=xo(),Ri(sr,rn),pi(sr,xr),rn.mipmask=1;else if(Oo(rn,xr),Array.isArray(xr.mipmap))for(var Qi=xr.mipmap,ws=0;ws<Qi.length;++ws)sr=rn.images[ws]=xo(),Ri(sr,rn),sr.width>>=ws,sr.height>>=ws,pi(sr,Qi[ws]),rn.mipmask|=1<<ws;else sr=rn.images[0]=xo(),Ri(sr,rn),pi(sr,xr),rn.mipmask=1;Ri(rn,rn.images[0]),rn.compressed&&(rn.internalformat===La||rn.internalformat===qs||rn.internalformat===mu||rn.internalformat===eo)&&Ot(rn.width%4===0&&rn.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Ca(rn,xr){for(var sr=rn.images,Qi=0;Qi<sr.length;++Qi){if(!sr[Qi])return;Gr(sr[Qi],xr,Qi)}}var cu=[];function Ps(){var rn=cu.pop()||new es;Zr.call(rn),rn.mipmask=0;for(var xr=0;xr<16;++xr)rn.images[xr]=null;return rn}function nu(rn){for(var xr=rn.images,sr=0;sr<xr.length;++sr)xr[sr]&&as(xr[sr]),xr[sr]=null;cu.push(rn)}function wa(){this.minFilter=Ku,this.magFilter=Ku,this.wrapS=Aa,this.wrapT=Aa,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Bt}function ru(rn,xr){if("min"in xr){var sr=xr.min;Ot.parameter(sr,hi),rn.minFilter=hi[sr],Fi.indexOf(rn.minFilter)>=0&&!("faces"in xr)&&(rn.genMipmaps=!0)}if("mag"in xr){var Qi=xr.mag;Ot.parameter(Qi,Ai),rn.magFilter=Ai[Qi]}var ws=rn.wrapS,ga=rn.wrapT;if("wrap"in xr){var kt=xr.wrap;typeof kt=="string"?(Ot.parameter(kt,fi),ws=ga=fi[kt]):Array.isArray(kt)&&(Ot.parameter(kt[0],fi),Ot.parameter(kt[1],fi),ws=fi[kt[0]],ga=fi[kt[1]])}else{if("wrapS"in xr){var Kt=xr.wrapS;Ot.parameter(Kt,fi),ws=fi[Kt]}if("wrapT"in xr){var pn=xr.wrapT;Ot.parameter(pn,fi),ga=fi[pn]}}if(rn.wrapS=ws,rn.wrapT=ga,"anisotropic"in xr){var lr=xr.anisotropic;Ot(typeof lr=="number"&&lr>=1&&lr<=mn.maxAnisotropic,"aniso samples must be between 1 and "),rn.anisotropic=xr.anisotropic}if("mipmap"in xr){var ar=!1;switch(typeof xr.mipmap){case"string":Ot.parameter(xr.mipmap,Qr,"invalid mipmap hint"),rn.mipmapHint=Qr[xr.mipmap],rn.genMipmaps=!0,ar=!0;break;case"boolean":ar=rn.genMipmaps=xr.mipmap;break;case"object":Ot(Array.isArray(xr.mipmap),"invalid mipmap type"),rn.genMipmaps=!1,ar=!0;break;default:Ot.raise("invalid mipmap type")}ar&&!("min"in xr)&&(rn.minFilter=qt)}}function iu(rn,xr){et.texParameteri(xr,Lu,rn.minFilter),et.texParameteri(xr,Wu,rn.magFilter),et.texParameteri(xr,cc,rn.wrapS),et.texParameteri(xr,eu,rn.wrapT),Vt.ext_texture_filter_anisotropic&&et.texParameteri(xr,Dt,rn.anisotropic),rn.genMipmaps&&(et.hint(Yr,rn.mipmapHint),et.generateMipmap(xr))}var Ja=0,pu={},xu=mn.maxTextureUnits,ou=Array(xu).map(function(){return null});function ts(rn){Zr.call(this),this.mipmask=0,this.internalformat=vi,this.id=Ja++,this.refCount=1,this.target=rn,this.texture=et.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new wa,Ar.profile&&(this.stats={size:0})}function lu(rn){et.activeTexture(Wi),et.bindTexture(rn.target,rn.texture)}function Hs(){var rn=ou[0];rn?et.bindTexture(rn.target,rn.texture):et.bindTexture(Qn,null)}function Ao(rn){var xr=rn.texture;Ot(xr,"must not double destroy texture");var sr=rn.unit,Qi=rn.target;sr>=0&&(et.activeTexture(Wi+sr),et.bindTexture(Qi,null),ou[sr]=null),et.deleteTexture(xr),rn.texture=null,rn.params=null,rn.pixels=null,rn.refCount=0,delete pu[rn.id],gr.textureCount--}V(ts.prototype,{bind:function(){var rn=this;rn.bindCount+=1;var xr=rn.unit;if(xr<0){for(var sr=0;sr<xu;++sr){var Qi=ou[sr];if(Qi){if(Qi.bindCount>0)continue;Qi.unit=-1}ou[sr]=rn,xr=sr;break}xr>=xu&&Ot.raise("insufficient number of texture units"),Ar.profile&&gr.maxTextureUnits<xr+1&&(gr.maxTextureUnits=xr+1),rn.unit=xr,et.activeTexture(Wi+xr),et.bindTexture(rn.target,rn.texture)}return xr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ao(this)}});function ns(rn,xr){var sr=new ts(Qn);pu[sr.id]=sr,gr.textureCount++;function Qi(kt,Kt){var pn=sr.texInfo;wa.call(pn);var lr=Ps();return typeof kt=="number"?typeof Kt=="number"?ps(lr,kt|0,Kt|0):ps(lr,kt|0,kt|0):kt?(Ot.type(kt,"object","invalid arguments to regl.texture"),ru(pn,kt),gs(lr,kt)):ps(lr,1,1),pn.genMipmaps&&(lr.mipmask=(lr.width<<1)-1),sr.mipmask=lr.mipmask,Ri(sr,lr),Ot.texture2D(pn,lr,mn),sr.internalformat=lr.internalformat,Qi.width=lr.width,Qi.height=lr.height,lu(sr),Ca(lr,Qn),iu(pn,Qn),Hs(),nu(lr),Ar.profile&&(sr.stats.size=Pf(sr.internalformat,sr.type,lr.width,lr.height,pn.genMipmaps,!1)),Qi.format=gi[sr.internalformat],Qi.type=Bi[sr.type],Qi.mag=Xr[pn.magFilter],Qi.min=_i[pn.minFilter],Qi.wrapS=mi[pn.wrapS],Qi.wrapT=mi[pn.wrapT],Qi}function ws(kt,Kt,pn,lr){Ot(!!kt,"must specify image data");var ar=Kt|0,Cn=pn|0,_n=lr|0,Nn=xo();return Ri(Nn,sr),Nn.width=0,Nn.height=0,pi(Nn,kt),Nn.width=Nn.width||(sr.width>>_n)-ar,Nn.height=Nn.height||(sr.height>>_n)-Cn,Ot(sr.type===Nn.type&&sr.format===Nn.format&&sr.internalformat===Nn.internalformat,"incompatible format for texture.subimage"),Ot(ar>=0&&Cn>=0&&ar+Nn.width<=sr.width&&Cn+Nn.height<=sr.height,"texture.subimage write out of bounds"),Ot(sr.mipmask&1<<_n,"missing mipmap data"),Ot(Nn.data||Nn.element||Nn.needsCopy,"missing image data"),lu(sr),To(Nn,Qn,ar,Cn,_n),Hs(),as(Nn),Qi}function ga(kt,Kt){var pn=kt|0,lr=Kt|0||pn;if(pn===sr.width&&lr===sr.height)return Qi;Qi.width=sr.width=pn,Qi.height=sr.height=lr,lu(sr);for(var ar=0;sr.mipmask>>ar;++ar){var Cn=pn>>ar,_n=lr>>ar;if(!Cn||!_n)break;et.texImage2D(Qn,ar,sr.format,Cn,_n,0,sr.format,sr.type,null)}return Hs(),Ar.profile&&(sr.stats.size=Pf(sr.internalformat,sr.type,pn,lr,!1,!1)),Qi}return Qi(rn,xr),Qi.subimage=ws,Qi.resize=ga,Qi._reglType="texture2d",Qi._texture=sr,Ar.profile&&(Qi.stats=sr.stats),Qi.destroy=function(){sr.decRef()},Qi}function bs(rn,xr,sr,Qi,ws,ga){var kt=new ts(jn);pu[kt.id]=kt,gr.cubeCount++;var Kt=new Array(6);function pn(Cn,_n,Nn,sn,Tn,Yt){var An,Er=kt.texInfo;for(wa.call(Er),An=0;An<6;++An)Kt[An]=Ps();if(typeof Cn=="number"||!Cn){var Ir=Cn|0||1;for(An=0;An<6;++An)ps(Kt[An],Ir,Ir)}else if(typeof Cn=="object")if(_n)gs(Kt[0],Cn),gs(Kt[1],_n),gs(Kt[2],Nn),gs(Kt[3],sn),gs(Kt[4],Tn),gs(Kt[5],Yt);else if(ru(Er,Cn),Oo(kt,Cn),"faces"in Cn){var ti=Cn.faces;for(Ot(Array.isArray(ti)&&ti.length===6,"cube faces must be a length 6 array"),An=0;An<6;++An)Ot(typeof ti[An]=="object"&&!!ti[An],"invalid input for cube map face"),Ri(Kt[An],kt),gs(Kt[An],ti[An])}else for(An=0;An<6;++An)gs(Kt[An],Cn);else Ot.raise("invalid arguments to cube map");for(Ri(kt,Kt[0]),mn.npotTextureCube||Ot(vn(kt.width)&&vn(kt.height),"your browser does not support non power or two texture dimensions"),Er.genMipmaps?kt.mipmask=(Kt[0].width<<1)-1:kt.mipmask=Kt[0].mipmask,Ot.textureCube(kt,Er,Kt,mn),kt.internalformat=Kt[0].internalformat,pn.width=Kt[0].width,pn.height=Kt[0].height,lu(kt),An=0;An<6;++An)Ca(Kt[An],pr+An);for(iu(Er,jn),Hs(),Ar.profile&&(kt.stats.size=Pf(kt.internalformat,kt.type,pn.width,pn.height,Er.genMipmaps,!0)),pn.format=gi[kt.internalformat],pn.type=Bi[kt.type],pn.mag=Xr[Er.magFilter],pn.min=_i[Er.minFilter],pn.wrapS=mi[Er.wrapS],pn.wrapT=mi[Er.wrapT],An=0;An<6;++An)nu(Kt[An]);return pn}function lr(Cn,_n,Nn,sn,Tn){Ot(!!_n,"must specify image data"),Ot(typeof Cn=="number"&&Cn===(Cn|0)&&Cn>=0&&Cn<6,"invalid face");var Yt=Nn|0,An=sn|0,Er=Tn|0,Ir=xo();return Ri(Ir,kt),Ir.width=0,Ir.height=0,pi(Ir,_n),Ir.width=Ir.width||(kt.width>>Er)-Yt,Ir.height=Ir.height||(kt.height>>Er)-An,Ot(kt.type===Ir.type&&kt.format===Ir.format&&kt.internalformat===Ir.internalformat,"incompatible format for texture.subimage"),Ot(Yt>=0&&An>=0&&Yt+Ir.width<=kt.width&&An+Ir.height<=kt.height,"texture.subimage write out of bounds"),Ot(kt.mipmask&1<<Er,"missing mipmap data"),Ot(Ir.data||Ir.element||Ir.needsCopy,"missing image data"),lu(kt),To(Ir,pr+Cn,Yt,An,Er),Hs(),as(Ir),pn}function ar(Cn){var _n=Cn|0;if(_n!==kt.width){pn.width=kt.width=_n,pn.height=kt.height=_n,lu(kt);for(var Nn=0;Nn<6;++Nn)for(var sn=0;kt.mipmask>>sn;++sn)et.texImage2D(pr+Nn,sn,kt.format,_n>>sn,_n>>sn,0,kt.format,kt.type,null);return Hs(),Ar.profile&&(kt.stats.size=Pf(kt.internalformat,kt.type,pn.width,pn.height,!1,!0)),pn}}return pn(rn,xr,sr,Qi,ws,ga),pn.subimage=lr,pn.resize=ar,pn._reglType="textureCube",pn._texture=kt,Ar.profile&&(pn.stats=kt.stats),pn.destroy=function(){kt.decRef()},pn}function ra(){for(var rn=0;rn<xu;++rn)et.activeTexture(Wi+rn),et.bindTexture(Qn,null),ou[rn]=null;fn(pu).forEach(Ao),gr.cubeCount=0,gr.textureCount=0}Ar.profile&&(gr.getTotalTextureSize=function(){var rn=0;return Object.keys(pu).forEach(function(xr){rn+=pu[xr].stats.size}),rn});function Gu(){for(var rn=0;rn<xu;++rn){var xr=ou[rn];xr&&(xr.bindCount=0,xr.unit=-1,ou[rn]=null)}fn(pu).forEach(function(sr){sr.texture=et.createTexture(),et.bindTexture(sr.target,sr.texture);for(var Qi=0;Qi<32;++Qi)if(sr.mipmask&1<<Qi)if(sr.target===Qn)et.texImage2D(Qn,Qi,sr.internalformat,sr.width>>Qi,sr.height>>Qi,0,sr.internalformat,sr.type,null);else for(var ws=0;ws<6;++ws)et.texImage2D(pr+ws,Qi,sr.internalformat,sr.width>>Qi,sr.height>>Qi,0,sr.internalformat,sr.type,null);iu(sr.texInfo,sr.target)})}return{create2D:ns,createCube:bs,clear:ra,getTexture:function(rn){return null},restore:Gu}}var xc=36161,Tu=32854,nf=32855,rf=36194,qc=33189,ih=36168,Sc=34041,Ah=35907,Ba=34836,bu=34842,Af=34843,qu=[];qu[Tu]=2,qu[nf]=2,qu[rf]=2,qu[qc]=2,qu[ih]=1,qu[Sc]=4,qu[Ah]=4,qu[Ba]=16,qu[bu]=8,qu[Af]=6;function fl(et,Vt,mn){return qu[et]*Vt*mn}var _f=function(et,Vt,mn,dr,jr){var gr={rgba4:Tu,rgb565:rf,"rgb5 a1":nf,depth:qc,stencil:ih,"depth stencil":Sc};Vt.ext_srgb&&(gr.srgba=Ah),Vt.ext_color_buffer_half_float&&(gr.rgba16f=bu,gr.rgb16f=Af),Vt.webgl_color_buffer_float&&(gr.rgba32f=Ba);var Ar=[];Object.keys(gr).forEach(function(hr){var Ci=gr[hr];Ar[Ci]=hr});var Qr=0,fi={};function Ai(hr){this.id=Qr++,this.refCount=1,this.renderbuffer=hr,this.format=Tu,this.width=0,this.height=0,jr.profile&&(this.stats={size:0})}Ai.prototype.decRef=function(){--this.refCount<=0&&hi(this)};function hi(hr){var Ci=hr.renderbuffer;Ot(Ci,"must not double destroy renderbuffer"),et.bindRenderbuffer(xc,null),et.deleteRenderbuffer(Ci),hr.renderbuffer=null,hr.refCount=0,delete fi[hr.id],dr.renderbufferCount--}function bi(hr,Ci){var Wn=new Ai(et.createRenderbuffer());fi[Wn.id]=Wn,dr.renderbufferCount++;function vr(Bi,Xr){var _i=0,mi=0,zi=Tu;if(typeof Bi=="object"&&Bi){var Zr=Bi;if("shape"in Zr){var Ri=Zr.shape;Ot(Array.isArray(Ri)&&Ri.length>=2,"invalid renderbuffer shape"),_i=Ri[0]|0,mi=Ri[1]|0}else"radius"in Zr&&(_i=mi=Zr.radius|0),"width"in Zr&&(_i=Zr.width|0),"height"in Zr&&(mi=Zr.height|0);"format"in Zr&&(Ot.parameter(Zr.format,gr,"invalid renderbuffer format"),zi=gr[Zr.format])}else typeof Bi=="number"?(_i=Bi|0,typeof Xr=="number"?mi=Xr|0:mi=_i):Bi?Ot.raise("invalid arguments to renderbuffer constructor"):_i=mi=1;if(Ot(_i>0&&mi>0&&_i<=mn.maxRenderbufferSize&&mi<=mn.maxRenderbufferSize,"invalid renderbuffer size"),!(_i===Wn.width&&mi===Wn.height&&zi===Wn.format))return vr.width=Wn.width=_i,vr.height=Wn.height=mi,Wn.format=zi,et.bindRenderbuffer(xc,Wn.renderbuffer),et.renderbufferStorage(xc,zi,_i,mi),Ot(et.getError()===0,"invalid render buffer format"),jr.profile&&(Wn.stats.size=fl(Wn.format,Wn.width,Wn.height)),vr.format=Ar[Wn.format],vr}function gi(Bi,Xr){var _i=Bi|0,mi=Xr|0||_i;return _i===Wn.width&&mi===Wn.height||(Ot(_i>0&&mi>0&&_i<=mn.maxRenderbufferSize&&mi<=mn.maxRenderbufferSize,"invalid renderbuffer size"),vr.width=Wn.width=_i,vr.height=Wn.height=mi,et.bindRenderbuffer(xc,Wn.renderbuffer),et.renderbufferStorage(xc,Wn.format,_i,mi),Ot(et.getError()===0,"invalid render buffer format"),jr.profile&&(Wn.stats.size=fl(Wn.format,Wn.width,Wn.height))),vr}return vr(hr,Ci),vr.resize=gi,vr._reglType="renderbuffer",vr._renderbuffer=Wn,jr.profile&&(vr.stats=Wn.stats),vr.destroy=function(){Wn.decRef()},vr}jr.profile&&(dr.getTotalRenderbufferSize=function(){var hr=0;return Object.keys(fi).forEach(function(Ci){hr+=fi[Ci].stats.size}),hr});function Ti(){fn(fi).forEach(function(hr){hr.renderbuffer=et.createRenderbuffer(),et.bindRenderbuffer(xc,hr.renderbuffer),et.renderbufferStorage(xc,hr.format,hr.width,hr.height)}),et.bindRenderbuffer(xc,null)}return{create:bi,clear:function(){fn(fi).forEach(hi)},restore:Ti}},ec=36160,Cc=36161,hc=3553,Oc=34069,Ll=36064,el=36096,of=36128,$u=33306,sf=36053,nd=36054,Tc=36055,rd=36057,oh=36061,tl=36193,dc=5121,Df=5126,It=6407,Hu=6408,af=6402,wu=[It,Hu],Go=[];Go[Hu]=4,Go[It]=3;var nl=[];nl[dc]=1,nl[Df]=4,nl[tl]=2;var ba=32854,_h=32855,gc=36194,hl=33189,ho=36168,So=34041,No=35907,Bo=34836,jc=34842,Dh=34843,oo=[ba,_h,gc,No,jc,Dh,Bo],Os={};Os[sf]="complete",Os[nd]="incomplete attachment",Os[rd]="incomplete dimensions",Os[Tc]="incomplete, missing attachment",Os[oh]="unsupported";function Nh(et,Vt,mn,dr,jr,gr){var Ar={cur:null,next:null,dirty:!1,setFBO:null},Qr=["rgba"],fi=["rgba4","rgb565","rgb5 a1"];Vt.ext_srgb&&fi.push("srgba"),Vt.ext_color_buffer_half_float&&fi.push("rgba16f","rgb16f"),Vt.webgl_color_buffer_float&&fi.push("rgba32f");var Ai=["uint8"];Vt.oes_texture_half_float&&Ai.push("half float","float16"),Vt.oes_texture_float&&Ai.push("float","float32");function hi(ji,pi,Gr){this.target=ji,this.texture=pi,this.renderbuffer=Gr;var To=0,ms=0;pi?(To=pi.width,ms=pi.height):Gr&&(To=Gr.width,ms=Gr.height),this.width=To,this.height=ms}function bi(ji){ji&&(ji.texture&&ji.texture._texture.decRef(),ji.renderbuffer&&ji.renderbuffer._renderbuffer.decRef())}function Ti(ji,pi,Gr){if(ji)if(ji.texture){var To=ji.texture._texture,ms=Math.max(1,To.width),xo=Math.max(1,To.height);Ot(ms===pi&&xo===Gr,"inconsistent width/height for supplied texture"),To.refCount+=1}else{var as=ji.renderbuffer._renderbuffer;Ot(as.width===pi&&as.height===Gr,"inconsistent width/height for renderbuffer"),as.refCount+=1}}function hr(ji,pi){pi&&(pi.texture?et.framebufferTexture2D(ec,ji,pi.target,pi.texture._texture.texture,0):et.framebufferRenderbuffer(ec,ji,Cc,pi.renderbuffer._renderbuffer.renderbuffer))}function Ci(ji){var pi=hc,Gr=null,To=null,ms=ji;typeof ji=="object"&&(ms=ji.data,"target"in ji&&(pi=ji.target|0)),Ot.type(ms,"function","invalid attachment data");var xo=ms._reglType;return xo==="texture2d"?(Gr=ms,Ot(pi===hc)):xo==="textureCube"?(Gr=ms,Ot(pi>=Oc&&pi<Oc+6,"invalid cube map target")):xo==="renderbuffer"?(To=ms,pi=Cc):Ot.raise("invalid regl object for attachment"),new hi(pi,Gr,To)}function Wn(ji,pi,Gr,To,ms){if(Gr){var xo=dr.create2D({width:ji,height:pi,format:To,type:ms});return xo._texture.refCount=0,new hi(hc,xo,null)}else{var as=jr.create({width:ji,height:pi,format:To});return as._renderbuffer.refCount=0,new hi(Cc,null,as)}}function vr(ji){return ji&&(ji.texture||ji.renderbuffer)}function gi(ji,pi,Gr){ji&&(ji.texture?ji.texture.resize(pi,Gr):ji.renderbuffer&&ji.renderbuffer.resize(pi,Gr),ji.width=pi,ji.height=Gr)}var Bi=0,Xr={};function _i(){this.id=Bi++,Xr[this.id]=this,this.framebuffer=et.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function mi(ji){ji.colorAttachments.forEach(bi),bi(ji.depthAttachment),bi(ji.stencilAttachment),bi(ji.depthStencilAttachment)}function zi(ji){var pi=ji.framebuffer;Ot(pi,"must not double destroy framebuffer"),et.deleteFramebuffer(pi),ji.framebuffer=null,gr.framebufferCount--,delete Xr[ji.id]}function Zr(ji){var pi;et.bindFramebuffer(ec,ji.framebuffer);var Gr=ji.colorAttachments;for(pi=0;pi<Gr.length;++pi)hr(Ll+pi,Gr[pi]);for(pi=Gr.length;pi<mn.maxColorAttachments;++pi)et.framebufferTexture2D(ec,Ll+pi,hc,null,0);et.framebufferTexture2D(ec,$u,hc,null,0),et.framebufferTexture2D(ec,el,hc,null,0),et.framebufferTexture2D(ec,of,hc,null,0),hr(el,ji.depthAttachment),hr(of,ji.stencilAttachment),hr($u,ji.depthStencilAttachment);var To=et.checkFramebufferStatus(ec);!et.isContextLost()&&To!==sf&&Ot.raise("framebuffer configuration not supported, status = "+Os[To]),et.bindFramebuffer(ec,Ar.next?Ar.next.framebuffer:null),Ar.cur=Ar.next,et.getError()}function Ri(ji,pi){var Gr=new _i;gr.framebufferCount++;function To(xo,as){var es;Ot(Ar.next!==Gr,"can not update framebuffer which is currently in use");var ps=0,gs=0,Ca=!0,cu=!0,Ps=null,nu=!0,wa="rgba",ru="uint8",iu=1,Ja=null,pu=null,xu=null,ou=!1;if(typeof xo=="number")ps=xo|0,gs=as|0||ps;else if(!xo)ps=gs=1;else{Ot.type(xo,"object","invalid arguments for framebuffer");var ts=xo;if("shape"in ts){var lu=ts.shape;Ot(Array.isArray(lu)&&lu.length>=2,"invalid shape for framebuffer"),ps=lu[0],gs=lu[1]}else"radius"in ts&&(ps=gs=ts.radius),"width"in ts&&(ps=ts.width),"height"in ts&&(gs=ts.height);("color"in ts||"colors"in ts)&&(Ps=ts.color||ts.colors,Array.isArray(Ps)&&Ot(Ps.length===1||Vt.webgl_draw_buffers,"multiple render targets not supported")),Ps||("colorCount"in ts&&(iu=ts.colorCount|0,Ot(iu>0,"invalid color buffer count")),"colorTexture"in ts&&(nu=!!ts.colorTexture,wa="rgba4"),"colorType"in ts&&(ru=ts.colorType,nu?(Ot(Vt.oes_texture_float||!(ru==="float"||ru==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ot(Vt.oes_texture_half_float||!(ru==="half float"||ru==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ru==="half float"||ru==="float16"?(Ot(Vt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),wa="rgba16f"):(ru==="float"||ru==="float32")&&(Ot(Vt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),wa="rgba32f"),Ot.oneOf(ru,Ai,"invalid color type")),"colorFormat"in ts&&(wa=ts.colorFormat,Qr.indexOf(wa)>=0?nu=!0:fi.indexOf(wa)>=0?nu=!1:nu?Ot.oneOf(ts.colorFormat,Qr,"invalid color format for texture"):Ot.oneOf(ts.colorFormat,fi,"invalid color format for renderbuffer"))),("depthTexture"in ts||"depthStencilTexture"in ts)&&(ou=!!(ts.depthTexture||ts.depthStencilTexture),Ot(!ou||Vt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in ts&&(typeof ts.depth=="boolean"?Ca=ts.depth:(Ja=ts.depth,cu=!1)),"stencil"in ts&&(typeof ts.stencil=="boolean"?cu=ts.stencil:(pu=ts.stencil,Ca=!1)),"depthStencil"in ts&&(typeof ts.depthStencil=="boolean"?Ca=cu=ts.depthStencil:(xu=ts.depthStencil,Ca=!1,cu=!1))}var Hs=null,Ao=null,ns=null,bs=null;if(Array.isArray(Ps))Hs=Ps.map(Ci);else if(Ps)Hs=[Ci(Ps)];else for(Hs=new Array(iu),es=0;es<iu;++es)Hs[es]=Wn(ps,gs,nu,wa,ru);Ot(Vt.webgl_draw_buffers||Hs.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ot(Hs.length<=mn.maxColorAttachments,"too many color attachments, not supported"),ps=ps||Hs[0].width,gs=gs||Hs[0].height,Ja?Ao=Ci(Ja):Ca&&!cu&&(Ao=Wn(ps,gs,ou,"depth","uint32")),pu?ns=Ci(pu):cu&&!Ca&&(ns=Wn(ps,gs,!1,"stencil","uint8")),xu?bs=Ci(xu):!Ja&&!pu&&cu&&Ca&&(bs=Wn(ps,gs,ou,"depth stencil","depth stencil")),Ot(!!Ja+!!pu+!!xu<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ra=null;for(es=0;es<Hs.length;++es)if(Ti(Hs[es],ps,gs),Ot(!Hs[es]||Hs[es].texture&&wu.indexOf(Hs[es].texture._texture.format)>=0||Hs[es].renderbuffer&&oo.indexOf(Hs[es].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+es+" is invalid"),Hs[es]&&Hs[es].texture){var Gu=Go[Hs[es].texture._texture.format]*nl[Hs[es].texture._texture.type];ra===null?ra=Gu:Ot(ra===Gu,"all color attachments much have the same number of bits per pixel.")}return Ti(Ao,ps,gs),Ot(!Ao||Ao.texture&&Ao.texture._texture.format===af||Ao.renderbuffer&&Ao.renderbuffer._renderbuffer.format===hl,"invalid depth attachment for framebuffer object"),Ti(ns,ps,gs),Ot(!ns||ns.renderbuffer&&ns.renderbuffer._renderbuffer.format===ho,"invalid stencil attachment for framebuffer object"),Ti(bs,ps,gs),Ot(!bs||bs.texture&&bs.texture._texture.format===So||bs.renderbuffer&&bs.renderbuffer._renderbuffer.format===So,"invalid depth-stencil attachment for framebuffer object"),mi(Gr),Gr.width=ps,Gr.height=gs,Gr.colorAttachments=Hs,Gr.depthAttachment=Ao,Gr.stencilAttachment=ns,Gr.depthStencilAttachment=bs,To.color=Hs.map(vr),To.depth=vr(Ao),To.stencil=vr(ns),To.depthStencil=vr(bs),To.width=Gr.width,To.height=Gr.height,Zr(Gr),To}function ms(xo,as){Ot(Ar.next!==Gr,"can not resize a framebuffer which is currently in use");var es=Math.max(xo|0,1),ps=Math.max(as|0||es,1);if(es===Gr.width&&ps===Gr.height)return To;for(var gs=Gr.colorAttachments,Ca=0;Ca<gs.length;++Ca)gi(gs[Ca],es,ps);return gi(Gr.depthAttachment,es,ps),gi(Gr.stencilAttachment,es,ps),gi(Gr.depthStencilAttachment,es,ps),Gr.width=To.width=es,Gr.height=To.height=ps,Zr(Gr),To}return To(ji,pi),V(To,{resize:ms,_reglType:"framebuffer",_framebuffer:Gr,destroy:function(){zi(Gr),mi(Gr)},use:function(xo){Ar.setFBO({framebuffer:To},xo)}})}function Oo(ji){var pi=Array(6);function Gr(ms){var xo;Ot(pi.indexOf(Ar.next)<0,"can not update framebuffer which is currently in use");var as={color:null},es=0,ps=null,gs="rgba",Ca="uint8",cu=1;if(typeof ms=="number")es=ms|0;else if(!ms)es=1;else{Ot.type(ms,"object","invalid arguments for framebuffer");var Ps=ms;if("shape"in Ps){var nu=Ps.shape;Ot(Array.isArray(nu)&&nu.length>=2,"invalid shape for framebuffer"),Ot(nu[0]===nu[1],"cube framebuffer must be square"),es=nu[0]}else"radius"in Ps&&(es=Ps.radius|0),"width"in Ps?(es=Ps.width|0,"height"in Ps&&Ot(Ps.height===es,"must be square")):"height"in Ps&&(es=Ps.height|0);("color"in Ps||"colors"in Ps)&&(ps=Ps.color||Ps.colors,Array.isArray(ps)&&Ot(ps.length===1||Vt.webgl_draw_buffers,"multiple render targets not supported")),ps||("colorCount"in Ps&&(cu=Ps.colorCount|0,Ot(cu>0,"invalid color buffer count")),"colorType"in Ps&&(Ot.oneOf(Ps.colorType,Ai,"invalid color type"),Ca=Ps.colorType),"colorFormat"in Ps&&(gs=Ps.colorFormat,Ot.oneOf(Ps.colorFormat,Qr,"invalid color format for texture"))),"depth"in Ps&&(as.depth=Ps.depth),"stencil"in Ps&&(as.stencil=Ps.stencil),"depthStencil"in Ps&&(as.depthStencil=Ps.depthStencil)}var wa;if(ps)if(Array.isArray(ps))for(wa=[],xo=0;xo<ps.length;++xo)wa[xo]=ps[xo];else wa=[ps];else{wa=Array(cu);var ru={radius:es,format:gs,type:Ca};for(xo=0;xo<cu;++xo)wa[xo]=dr.createCube(ru)}for(as.color=Array(wa.length),xo=0;xo<wa.length;++xo){var iu=wa[xo];Ot(typeof iu=="function"&&iu._reglType==="textureCube","invalid cube map"),es=es||iu.width,Ot(iu.width===es&&iu.height===es,"invalid cube map shape"),as.color[xo]={target:Oc,data:wa[xo]}}for(xo=0;xo<6;++xo){for(var Ja=0;Ja<wa.length;++Ja)as.color[Ja].target=Oc+xo;xo>0&&(as.depth=pi[0].depth,as.stencil=pi[0].stencil,as.depthStencil=pi[0].depthStencil),pi[xo]?pi[xo](as):pi[xo]=Ri(as)}return V(Gr,{width:es,height:es,color:wa})}function To(ms){var xo,as=ms|0;if(Ot(as>0&&as<=mn.maxCubeMapSize,"invalid radius for cube fbo"),as===Gr.width)return Gr;var es=Gr.color;for(xo=0;xo<es.length;++xo)es[xo].resize(as);for(xo=0;xo<6;++xo)pi[xo].resize(as);return Gr.width=Gr.height=as,Gr}return Gr(ji),V(Gr,{faces:pi,resize:To,_reglType:"framebufferCube",destroy:function(){pi.forEach(function(ms){ms.destroy()})}})}function Po(){Ar.cur=null,Ar.next=null,Ar.dirty=!0,fn(Xr).forEach(function(ji){ji.framebuffer=et.createFramebuffer(),Zr(ji)})}return V(Ar,{getFramebuffer:function(ji){if(typeof ji=="function"&&ji._reglType==="framebuffer"){var pi=ji._framebuffer;if(pi instanceof _i)return pi}return null},create:Ri,createCube:Oo,clear:function(){fn(Xr).forEach(zi)},restore:Po})}var id=5126,tu=34962;function _u(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=id,this.offset=0,this.stride=0,this.divisor=0}function dl(et,Vt,mn,dr,jr){for(var gr=mn.maxAttributes,Ar=new Array(gr),Qr=0;Qr<gr;++Qr)Ar[Qr]=new _u;var fi=0,Ai={},hi={Record:_u,scope:{},state:Ar,currentVAO:null,targetVAO:null,restore:Ti()?Xr:function(){},createVAO:_i,getVAO:Ci,destroyBuffer:bi,setVAO:Ti()?Wn:vr,clear:Ti()?gi:function(){}};function bi(mi){for(var zi=0;zi<Ar.length;++zi){var Zr=Ar[zi];Zr.buffer===mi&&(et.disableVertexAttribArray(zi),Zr.buffer=null)}}function Ti(){return Vt.oes_vertex_array_object}function hr(){return Vt.angle_instanced_arrays}function Ci(mi){return typeof mi=="function"&&mi._vao?mi._vao:null}function Wn(mi){if(mi!==hi.currentVAO){var zi=Ti();mi?zi.bindVertexArrayOES(mi.vao):zi.bindVertexArrayOES(null),hi.currentVAO=mi}}function vr(mi){if(mi!==hi.currentVAO){if(mi)mi.bindAttrs();else for(var zi=hr(),Zr=0;Zr<Ar.length;++Zr){var Ri=Ar[Zr];Ri.buffer?(et.enableVertexAttribArray(Zr),et.vertexAttribPointer(Zr,Ri.size,Ri.type,Ri.normalized,Ri.stride,Ri.offfset),zi&&zi.vertexAttribDivisorANGLE(Zr,Ri.divisor)):(et.disableVertexAttribArray(Zr),et.vertexAttrib4f(Zr,Ri.x,Ri.y,Ri.z,Ri.w))}hi.currentVAO=mi}}function gi(){fn(Ai).forEach(function(mi){mi.destroy()})}function Bi(){this.id=++fi,this.attributes=[];var mi=Ti();mi?this.vao=mi.createVertexArrayOES():this.vao=null,Ai[this.id]=this,this.buffers=[]}Bi.prototype.bindAttrs=function(){for(var mi=hr(),zi=this.attributes,Zr=0;Zr<zi.length;++Zr){var Ri=zi[Zr];Ri.buffer?(et.enableVertexAttribArray(Zr),et.bindBuffer(tu,Ri.buffer.buffer),et.vertexAttribPointer(Zr,Ri.size,Ri.type,Ri.normalized,Ri.stride,Ri.offset),mi&&mi.vertexAttribDivisorANGLE(Zr,Ri.divisor)):(et.disableVertexAttribArray(Zr),et.vertexAttrib4f(Zr,Ri.x,Ri.y,Ri.z,Ri.w))}for(var Oo=zi.length;Oo<gr;++Oo)et.disableVertexAttribArray(Oo)},Bi.prototype.refresh=function(){var mi=Ti();mi&&(mi.bindVertexArrayOES(this.vao),this.bindAttrs(),hi.currentVAO=this)},Bi.prototype.destroy=function(){if(this.vao){var mi=Ti();this===hi.currentVAO&&(hi.currentVAO=null,mi.bindVertexArrayOES(null)),mi.deleteVertexArrayOES(this.vao),this.vao=null}Ai[this.id]&&(delete Ai[this.id],dr.vaoCount-=1)};function Xr(){var mi=Ti();mi&&fn(Ai).forEach(function(zi){zi.refresh()})}function _i(mi){var zi=new Bi;dr.vaoCount+=1;function Zr(Ri){Ot(Array.isArray(Ri),"arguments to vertex array constructor must be an array"),Ot(Ri.length<gr,"too many attributes"),Ot(Ri.length>0,"must specify at least one attribute");for(var Oo=0;Oo<zi.buffers.length;++Oo)zi.buffers[Oo].destroy();zi.buffers.length=0;var Po=zi.attributes;Po.length=Ri.length;for(var ji=0;ji<Ri.length;++ji){var pi=Ri[ji],Gr=Po[ji]=new _u;if(Array.isArray(pi)||O(pi)||lt(pi)){var To=jr.create(pi,tu,!1,!0);Gr.buffer=jr.getBuffer(To),Gr.size=Gr.buffer.dimension|0,Gr.normalized=!1,Gr.type=Gr.buffer.dtype,Gr.offset=0,Gr.stride=0,Gr.divisor=0,Gr.state=1,zi.buffers.push(To)}else jr.getBuffer(pi)?(Gr.buffer=jr.getBuffer(pi),Gr.size=Gr.buffer.dimension|0,Gr.normalized=!1,Gr.type=Gr.buffer.dtype,Gr.offset=0,Gr.stride=0,Gr.divisor=0,Gr.state=1):jr.getBuffer(pi.buffer)?(Gr.buffer=jr.getBuffer(pi.buffer),Gr.size=(+pi.size||Gr.buffer.dimension)|0,Gr.normalized=!!pi.normalized||!1,"type"in pi?(Ot.parameter(pi.type,cs,"invalid buffer type"),Gr.type=cs[pi.type]):Gr.type=Gr.buffer.dtype,Gr.offset=(pi.offset||0)|0,Gr.stride=(pi.stride||0)|0,Gr.divisor=(pi.divisor||0)|0,Gr.state=1,Ot(Gr.size>=1&&Gr.size<=4,"size must be between 1 and 4"),Ot(Gr.offset>=0,"invalid offset"),Ot(Gr.stride>=0&&Gr.stride<=255,"stride must be between 0 and 255"),Ot(Gr.divisor>=0,"divisor must be positive"),Ot(!Gr.divisor||!!Vt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in pi?(Ot(ji>0,"first attribute must not be a constant"),Gr.x=+pi.x||0,Gr.y=+pi.y||0,Gr.z=+pi.z||0,Gr.w=+pi.w||0,Gr.state=2):Ot(!1,"invalid attribute spec for location "+ji)}return zi.refresh(),Zr}return Zr.destroy=function(){zi.destroy()},Zr._vao=zi,Zr._reglType="vao",Zr(mi)}return hi}var uf=35632,Si=35633,Kr=35718,rl=35721;function od(et,Vt,mn,dr){var jr={},gr={};function Ar(Wn,vr,gi,Bi){this.name=Wn,this.id=vr,this.location=gi,this.info=Bi}function Qr(Wn,vr){for(var gi=0;gi<Wn.length;++gi)if(Wn[gi].id===vr.id){Wn[gi].location=vr.location;return}Wn.push(vr)}function fi(Wn,vr,gi){var Bi=Wn===uf?jr:gr,Xr=Bi[vr];if(!Xr){var _i=Vt.str(vr);Xr=et.createShader(Wn),et.shaderSource(Xr,_i),et.compileShader(Xr),Ot.shaderError(et,Xr,_i,Wn,gi),Bi[vr]=Xr}return Xr}var Ai={},hi=[],bi=0;function Ti(Wn,vr){this.id=bi++,this.fragId=Wn,this.vertId=vr,this.program=null,this.uniforms=[],this.attributes=[],dr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function hr(Wn,vr,gi){var Bi,Xr,_i=fi(uf,Wn.fragId),mi=fi(Si,Wn.vertId),zi=Wn.program=et.createProgram();if(et.attachShader(zi,_i),et.attachShader(zi,mi),gi)for(Bi=0;Bi<gi.length;++Bi){var Zr=gi[Bi];et.bindAttribLocation(zi,Zr[0],Zr[1])}et.linkProgram(zi),Ot.linkError(et,zi,Vt.str(Wn.fragId),Vt.str(Wn.vertId),vr);var Ri=et.getProgramParameter(zi,Kr);dr.profile&&(Wn.stats.uniformsCount=Ri);var Oo=Wn.uniforms;for(Bi=0;Bi<Ri;++Bi)if(Xr=et.getActiveUniform(zi,Bi),Xr)if(Xr.size>1)for(var Po=0;Po<Xr.size;++Po){var ji=Xr.name.replace("[0]","["+Po+"]");Qr(Oo,new Ar(ji,Vt.id(ji),et.getUniformLocation(zi,ji),Xr))}else Qr(Oo,new Ar(Xr.name,Vt.id(Xr.name),et.getUniformLocation(zi,Xr.name),Xr));var pi=et.getProgramParameter(zi,rl);dr.profile&&(Wn.stats.attributesCount=pi);var Gr=Wn.attributes;for(Bi=0;Bi<pi;++Bi)Xr=et.getActiveAttrib(zi,Bi),Xr&&Qr(Gr,new Ar(Xr.name,Vt.id(Xr.name),et.getAttribLocation(zi,Xr.name),Xr))}dr.profile&&(mn.getMaxUniformsCount=function(){var Wn=0;return hi.forEach(function(vr){vr.stats.uniformsCount>Wn&&(Wn=vr.stats.uniformsCount)}),Wn},mn.getMaxAttributesCount=function(){var Wn=0;return hi.forEach(function(vr){vr.stats.attributesCount>Wn&&(Wn=vr.stats.attributesCount)}),Wn});function Ci(){jr={},gr={};for(var Wn=0;Wn<hi.length;++Wn)hr(hi[Wn],null,hi[Wn].attributes.map(function(vr){return[vr.location,vr.name]}))}return{clear:function(){var Wn=et.deleteShader.bind(et);fn(jr).forEach(Wn),jr={},fn(gr).forEach(Wn),gr={},hi.forEach(function(vr){et.deleteProgram(vr.program)}),hi.length=0,Ai={},mn.shaderCount=0},program:function(Wn,vr,gi,Bi){Ot.command(Wn>=0,"missing vertex shader",gi),Ot.command(vr>=0,"missing fragment shader",gi);var Xr=Ai[vr];Xr||(Xr=Ai[vr]={});var _i=Xr[Wn];if(_i&&!Bi)return _i;var mi=new Ti(vr,Wn);return mn.shaderCount++,hr(mi,gi,Bi),_i||(Xr[Wn]=mi),hi.push(mi),mi},restore:Ci,shader:fi,frag:-1,vert:-1}}var sd=6408,aa=5121,fa=3333,zs=5126;function Mc(et,Vt,mn,dr,jr,gr,Ar){function Qr(hi){var bi;Vt.next===null?(Ot(jr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),bi=aa):(Ot(Vt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),bi=Vt.next.colorAttachments[0].texture._texture.type,gr.oes_texture_float?(Ot(bi===aa||bi===zs,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),bi===zs&&Ot(Ar.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ot(bi===aa,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ti=0,hr=0,Ci=dr.framebufferWidth,Wn=dr.framebufferHeight,vr=null;O(hi)?vr=hi:hi&&(Ot.type(hi,"object","invalid arguments to regl.read()"),Ti=hi.x|0,hr=hi.y|0,Ot(Ti>=0&&Ti<dr.framebufferWidth,"invalid x offset for regl.read"),Ot(hr>=0&&hr<dr.framebufferHeight,"invalid y offset for regl.read"),Ci=(hi.width||dr.framebufferWidth-Ti)|0,Wn=(hi.height||dr.framebufferHeight-hr)|0,vr=hi.data||null),vr&&(bi===aa?Ot(vr instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):bi===zs&&Ot(vr instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ot(Ci>0&&Ci+Ti<=dr.framebufferWidth,"invalid width for read pixels"),Ot(Wn>0&&Wn+hr<=dr.framebufferHeight,"invalid height for read pixels"),mn();var gi=Ci*Wn*4;return vr||(bi===aa?vr=new Uint8Array(gi):bi===zs&&(vr=vr||new Float32Array(gi))),Ot.isTypedArray(vr,"data buffer for regl.read() must be a typedarray"),Ot(vr.byteLength>=gi,"data buffer for regl.read() too small"),et.pixelStorei(fa,4),et.readPixels(Ti,hr,Ci,Wn,sd,bi,vr),vr}function fi(hi){var bi;return Vt.setFBO({framebuffer:hi.framebuffer},function(){bi=Qr(hi)}),bi}function Ai(hi){return!hi||!("framebuffer"in hi)?Qr(hi):fi(hi)}return Ai}function gl(et){return Array.prototype.slice.call(et)}function Mu(et){return gl(et).join("")}function Nf(){var et=0,Vt=[],mn=[];function dr(bi){for(var Ti=0;Ti<mn.length;++Ti)if(mn[Ti]===bi)return Vt[Ti];var hr="g"+et++;return Vt.push(hr),mn.push(bi),hr}function jr(){var bi=[];function Ti(){bi.push.apply(bi,gl(arguments))}var hr=[];function Ci(){var Wn="v"+et++;return hr.push(Wn),arguments.length>0&&(bi.push(Wn,"="),bi.push.apply(bi,gl(arguments)),bi.push(";")),Wn}return V(Ti,{def:Ci,toString:function(){return Mu([hr.length>0?"var "+hr.join(",")+";":"",Mu(bi)])}})}function gr(){var bi=jr(),Ti=jr(),hr=bi.toString,Ci=Ti.toString;function Wn(vr,gi){Ti(vr,gi,"=",bi.def(vr,gi),";")}return V(function(){bi.apply(bi,gl(arguments))},{def:bi.def,entry:bi,exit:Ti,save:Wn,set:function(vr,gi,Bi){Wn(vr,gi),bi(vr,gi,"=",Bi,";")},toString:function(){return hr()+Ci()}})}function Ar(){var bi=Mu(arguments),Ti=gr(),hr=gr(),Ci=Ti.toString,Wn=hr.toString;return V(Ti,{then:function(){return Ti.apply(Ti,gl(arguments)),this},else:function(){return hr.apply(hr,gl(arguments)),this},toString:function(){var vr=Wn();return vr&&(vr="else{"+vr+"}"),Mu(["if(",bi,"){",Ci(),"}",vr])}})}var Qr=jr(),fi={};function Ai(bi,Ti){var hr=[];function Ci(){var Xr="a"+hr.length;return hr.push(Xr),Xr}Ti=Ti||0;for(var Wn=0;Wn<Ti;++Wn)Ci();var vr=gr(),gi=vr.toString,Bi=fi[bi]=V(vr,{arg:Ci,toString:function(){return Mu(["function(",hr.join(),"){",gi(),"}"])}});return Bi}function hi(){var bi=['"use strict";',Qr,"return {"];Object.keys(fi).forEach(function(Ci){bi.push('"',Ci,'":',fi[Ci].toString(),",")}),bi.push("}");var Ti=Mu(bi).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),hr=Function.apply(null,Vt.concat(Ti));return hr.apply(null,mn)}return{global:Qr,link:dr,block:jr,proc:Ai,scope:gr,cond:Ar,compile:hi}}var Ta="xyzw".split(""),If=5121,Pc=1,pl=2,Xu=0,vl=1,ha=2,Eu=3,cf=4,tc="dither",pc="blend.enable",_r="blend.color",Ts="blend.equation",Ya="blend.func",nc="depth.enable",Rf="depth.func",Bu="depth.range",vc="depth.mask",Yu="colorMask",Bl="cull.enable",ka="cull.face",lf="frontFace",kl="lineWidth",Ga="polygonOffset.enable",Gl="polygonOffset.offset",Lf="sample.alpha",mc="sample.enable",il="sample.coverage",Fl="stencil.enable",Ac="stencil.mask",Bf="stencil.func",na="stencil.opFront",ol="stencil.opBack",sh="scissor.enable",zc="scissor.box",H="viewport",n="profile",f="framebuffer",p="vert",w="frag",k="elements",ne="primitive",me="count",De="offset",ze="instances",it="vao",Pt="Width",ht="Height",Ft=f+Pt,tn=f+ht,On=H+Pt,Rn=H+ht,nr="drawingBuffer",or=nr+Pt,Dr=nr+ht,ri=[Ya,Ts,Bf,na,ol,il,H,zc,Gl],yn=34962,ao=34963,Ks=35632,Qs=35633,Za=3553,_a=34067,da=2884,Ka=3042,sl=3024,ff=2960,jl=2929,ml=3089,ah=32823,Ms=32926,hf=32928,Uc=5126,Pu=35664,zl=35665,df=35666,Ul=5124,Du=35667,gf=35668,yl=35669,kf=35670,Gf=35671,Ff=35672,Nu=35673,$s=35674,Vl=35675,bl=35676,wl=35678,pf=35680,uh=4,Wl=1028,Vc=1029,jf=2304,_c=2305,ad=32775,El=32776,ud=519,Vn=7680,zf=0,Uf=1,Ih=32774,cd=513,vf=36160,Rh=36064,Dc={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Vf=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$l={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ma={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},yc={frag:Ks,vert:Qs},Wf={cw:jf,ccw:_c};function ch(et){return Array.isArray(et)||O(et)||lt(et)}function $f(et){return et.sort(function(Vt,mn){return Vt===H?-1:mn===H?1:Vt<mn?-1:1})}function gu(et,Vt,mn,dr){this.thisDep=et,this.contextDep=Vt,this.propDep=mn,this.append=dr}function Wc(et){return et&&!(et.thisDep||et.contextDep||et.propDep)}function Fa(et){return new gu(!1,!1,!1,et)}function ku(et,Vt){var mn=et.type;if(mn===Xu){var dr=et.data.length;return new gu(!0,dr>=1,dr>=2,Vt)}else if(mn===cf){var jr=et.data;return new gu(jr.thisDep,jr.contextDep,jr.propDep,Vt)}else return new gu(mn===Eu,mn===ha,mn===vl,Vt)}var mf=new gu(!1,!1,!1,function(){});function $c(et,Vt,mn,dr,jr,gr,Ar,Qr,fi,Ai,hi,bi,Ti,hr,Ci){var Wn=Ai.Record,vr={add:32774,subtract:32778,"reverse subtract":32779};mn.ext_blend_minmax&&(vr.min=ad,vr.max=El);var gi=mn.angle_instanced_arrays,Bi=mn.webgl_draw_buffers,Xr={dirty:!0,profile:Ci.profile},_i={},mi=[],zi={},Zr={};function Ri(kt){return kt.replace(".","_")}function Oo(kt,Kt,pn){var lr=Ri(kt);mi.push(kt),_i[lr]=Xr[lr]=!!pn,zi[lr]=Kt}function Po(kt,Kt,pn){var lr=Ri(kt);mi.push(kt),Array.isArray(pn)?(Xr[lr]=pn.slice(),_i[lr]=pn.slice()):Xr[lr]=_i[lr]=pn,Zr[lr]=Kt}Oo(tc,sl),Oo(pc,Ka),Po(_r,"blendColor",[0,0,0,0]),Po(Ts,"blendEquationSeparate",[Ih,Ih]),Po(Ya,"blendFuncSeparate",[Uf,zf,Uf,zf]),Oo(nc,jl,!0),Po(Rf,"depthFunc",cd),Po(Bu,"depthRange",[0,1]),Po(vc,"depthMask",!0),Po(Yu,Yu,[!0,!0,!0,!0]),Oo(Bl,da),Po(ka,"cullFace",Vc),Po(lf,lf,_c),Po(kl,kl,1),Oo(Ga,ah),Po(Gl,"polygonOffset",[0,0]),Oo(Lf,Ms),Oo(mc,hf),Po(il,"sampleCoverage",[1,!1]),Oo(Fl,ff),Po(Ac,"stencilMask",-1),Po(Bf,"stencilFunc",[ud,0,-1]),Po(na,"stencilOpSeparate",[Wl,Vn,Vn,Vn]),Po(ol,"stencilOpSeparate",[Vc,Vn,Vn,Vn]),Oo(sh,ml),Po(zc,"scissor",[0,0,et.drawingBufferWidth,et.drawingBufferHeight]),Po(H,H,[0,0,et.drawingBufferWidth,et.drawingBufferHeight]);var ji={gl:et,context:Ti,strings:Vt,next:_i,current:Xr,draw:bi,elements:gr,buffer:jr,shader:hi,attributes:Ai.state,vao:Ai,uniforms:fi,framebuffer:Qr,extensions:mn,timer:hr,isBufferArgs:ch},pi={primTypes:qo,compareFuncs:$l,blendFuncs:Dc,blendEquations:vr,stencilOps:Ma,glTypes:cs,orientationType:Wf};Ot.optional(function(){ji.isArrayLike=Lt}),Bi&&(pi.backBuffer=[Vc],pi.drawBuffer=xn(dr.maxDrawbuffers,function(kt){return kt===0?[0]:xn(kt,function(Kt){return Rh+Kt})}));var Gr=0;function To(){var kt=Nf(),Kt=kt.link,pn=kt.global;kt.id=Gr++,kt.batchId="0";var lr=Kt(ji),ar=kt.shared={props:"a0"};Object.keys(ji).forEach(function(Tn){ar[Tn]=pn.def(lr,".",Tn)}),Ot.optional(function(){kt.CHECK=Kt(Ot),kt.commandStr=Ot.guessCommand(),kt.command=Kt(kt.commandStr),kt.assert=function(Tn,Yt,An){Tn("if(!(",Yt,"))",this.CHECK,".commandRaise(",Kt(An),",",this.command,");")},pi.invalidBlendCombinations=Vf});var Cn=kt.next={},_n=kt.current={};Object.keys(Zr).forEach(function(Tn){Array.isArray(Xr[Tn])&&(Cn[Tn]=pn.def(ar.next,".",Tn),_n[Tn]=pn.def(ar.current,".",Tn))});var Nn=kt.constants={};Object.keys(pi).forEach(function(Tn){Nn[Tn]=pn.def(JSON.stringify(pi[Tn]))}),kt.invoke=function(Tn,Yt){switch(Yt.type){case Xu:var An=["this",ar.context,ar.props,kt.batchId];return Tn.def(Kt(Yt.data),".call(",An.slice(0,Math.max(Yt.data.length+1,4)),")");case vl:return Tn.def(ar.props,Yt.data);case ha:return Tn.def(ar.context,Yt.data);case Eu:return Tn.def("this",Yt.data);case cf:return Yt.data.append(kt,Tn),Yt.data.ref}},kt.attribCache={};var sn={};return kt.scopeAttrib=function(Tn){var Yt=Vt.id(Tn);if(Yt in sn)return sn[Yt];var An=Ai.scope[Yt];An||(An=Ai.scope[Yt]=new Wn);var Er=sn[Yt]=Kt(An);return Er},kt}function ms(kt){var Kt=kt.static,pn=kt.dynamic,lr;if(n in Kt){var ar=!!Kt[n];lr=Fa(function(_n,Nn){return ar}),lr.enable=ar}else if(n in pn){var Cn=pn[n];lr=ku(Cn,function(_n,Nn){return _n.invoke(Nn,Cn)})}return lr}function xo(kt,Kt){var pn=kt.static,lr=kt.dynamic;if(f in pn){var ar=pn[f];return ar?(ar=Qr.getFramebuffer(ar),Ot.command(ar,"invalid framebuffer object"),Fa(function(_n,Nn){var sn=_n.link(ar),Tn=_n.shared;Nn.set(Tn.framebuffer,".next",sn);var Yt=Tn.context;return Nn.set(Yt,"."+Ft,sn+".width"),Nn.set(Yt,"."+tn,sn+".height"),sn})):Fa(function(_n,Nn){var sn=_n.shared;Nn.set(sn.framebuffer,".next","null");var Tn=sn.context;return Nn.set(Tn,"."+Ft,Tn+"."+or),Nn.set(Tn,"."+tn,Tn+"."+Dr),"null"})}else if(f in lr){var Cn=lr[f];return ku(Cn,function(_n,Nn){var sn=_n.invoke(Nn,Cn),Tn=_n.shared,Yt=Tn.framebuffer,An=Nn.def(Yt,".getFramebuffer(",sn,")");Ot.optional(function(){_n.assert(Nn,"!"+sn+"||"+An,"invalid framebuffer object")}),Nn.set(Yt,".next",An);var Er=Tn.context;return Nn.set(Er,"."+Ft,An+"?"+An+".width:"+Er+"."+or),Nn.set(Er,"."+tn,An+"?"+An+".height:"+Er+"."+Dr),An})}else return null}function as(kt,Kt,pn){var lr=kt.static,ar=kt.dynamic;function Cn(sn){if(sn in lr){var Tn=lr[sn];Ot.commandType(Tn,"object","invalid "+sn,pn.commandStr);var Yt=!0,An=Tn.x|0,Er=Tn.y|0,Ir,ti;return"width"in Tn?(Ir=Tn.width|0,Ot.command(Ir>=0,"invalid "+sn,pn.commandStr)):Yt=!1,"height"in Tn?(ti=Tn.height|0,Ot.command(ti>=0,"invalid "+sn,pn.commandStr)):Yt=!1,new gu(!Yt&&Kt&&Kt.thisDep,!Yt&&Kt&&Kt.contextDep,!Yt&&Kt&&Kt.propDep,function(yo,us){var io=yo.shared.context,fo=Ir;"width"in Tn||(fo=us.def(io,".",Ft,"-",An));var Ko=ti;return"height"in Tn||(Ko=us.def(io,".",tn,"-",Er)),[An,Er,fo,Ko]})}else if(sn in ar){var Hr=ar[sn],ai=ku(Hr,function(yo,us){var io=yo.invoke(us,Hr);Ot.optional(function(){yo.assert(us,io+"&&typeof "+io+'==="object"',"invalid "+sn)});var fo=yo.shared.context,Ko=us.def(io,".x|0"),Gs=us.def(io,".y|0"),Va=us.def('"width" in ',io,"?",io,".width|0:","(",fo,".",Ft,"-",Ko,")"),rc=us.def('"height" in ',io,"?",io,".height|0:","(",fo,".",tn,"-",Gs,")");return Ot.optional(function(){yo.assert(us,Va+">=0&&"+rc+">=0","invalid "+sn)}),[Ko,Gs,Va,rc]});return Kt&&(ai.thisDep=ai.thisDep||Kt.thisDep,ai.contextDep=ai.contextDep||Kt.contextDep,ai.propDep=ai.propDep||Kt.propDep),ai}else return Kt?new gu(Kt.thisDep,Kt.contextDep,Kt.propDep,function(yo,us){var io=yo.shared.context;return[0,0,us.def(io,".",Ft),us.def(io,".",tn)]}):null}var _n=Cn(H);if(_n){var Nn=_n;_n=new gu(_n.thisDep,_n.contextDep,_n.propDep,function(sn,Tn){var Yt=Nn.append(sn,Tn),An=sn.shared.context;return Tn.set(An,"."+On,Yt[2]),Tn.set(An,"."+Rn,Yt[3]),Yt})}return{viewport:_n,scissor_box:Cn(zc)}}function es(kt,Kt){var pn=kt.static,lr=typeof pn[w]=="string"&&typeof pn[p]=="string";if(lr){if(Object.keys(Kt.dynamic).length>0)return null;var ar=Kt.static,Cn=Object.keys(ar);if(Cn.length>0&&typeof ar[Cn[0]]=="number"){for(var _n=[],Nn=0;Nn<Cn.length;++Nn)Ot(typeof ar[Cn[Nn]]=="number","must specify all vertex attribute locations when using vaos"),_n.push([ar[Cn[Nn]]|0,Cn[Nn]]);return _n}}return null}function ps(kt,Kt,pn){var lr=kt.static,ar=kt.dynamic;function Cn(Yt){if(Yt in lr){var An=Vt.id(lr[Yt]);Ot.optional(function(){hi.shader(yc[Yt],An,Ot.guessCommand())});var Er=Fa(function(){return An});return Er.id=An,Er}else if(Yt in ar){var Ir=ar[Yt];return ku(Ir,function(ti,Hr){var ai=ti.invoke(Hr,Ir),yo=Hr.def(ti.shared.strings,".id(",ai,")");return Ot.optional(function(){Hr(ti.shared.shader,".shader(",yc[Yt],",",yo,",",ti.command,");")}),yo})}return null}var _n=Cn(w),Nn=Cn(p),sn=null,Tn;return Wc(_n)&&Wc(Nn)?(sn=hi.program(Nn.id,_n.id,null,pn),Tn=Fa(function(Yt,An){return Yt.link(sn)})):Tn=new gu(_n&&_n.thisDep||Nn&&Nn.thisDep,_n&&_n.contextDep||Nn&&Nn.contextDep,_n&&_n.propDep||Nn&&Nn.propDep,function(Yt,An){var Er=Yt.shared.shader,Ir;_n?Ir=_n.append(Yt,An):Ir=An.def(Er,".",w);var ti;Nn?ti=Nn.append(Yt,An):ti=An.def(Er,".",p);var Hr=Er+".program("+ti+","+Ir;return Ot.optional(function(){Hr+=","+Yt.command}),An.def(Hr+")")}),{frag:_n,vert:Nn,progVar:Tn,program:sn}}function gs(kt,Kt){var pn=kt.static,lr=kt.dynamic;function ar(){if(k in pn){var Yt=pn[k];ch(Yt)?Yt=gr.getElements(gr.create(Yt,!0)):Yt&&(Yt=gr.getElements(Yt),Ot.command(Yt,"invalid elements",Kt.commandStr));var An=Fa(function(Ir,ti){if(Yt){var Hr=Ir.link(Yt);return Ir.ELEMENTS=Hr,Hr}return Ir.ELEMENTS=null,null});return An.value=Yt,An}else if(k in lr){var Er=lr[k];return ku(Er,function(Ir,ti){var Hr=Ir.shared,ai=Hr.isBufferArgs,yo=Hr.elements,us=Ir.invoke(ti,Er),io=ti.def("null"),fo=ti.def(ai,"(",us,")"),Ko=Ir.cond(fo).then(io,"=",yo,".createStream(",us,");").else(io,"=",yo,".getElements(",us,");");return Ot.optional(function(){Ir.assert(Ko.else,"!"+us+"||"+io,"invalid elements")}),ti.entry(Ko),ti.exit(Ir.cond(fo).then(yo,".destroyStream(",io,");")),Ir.ELEMENTS=io,io})}return null}var Cn=ar();function _n(){if(ne in pn){var Yt=pn[ne];return Ot.commandParameter(Yt,qo,"invalid primitve",Kt.commandStr),Fa(function(Er,Ir){return qo[Yt]})}else if(ne in lr){var An=lr[ne];return ku(An,function(Er,Ir){var ti=Er.constants.primTypes,Hr=Er.invoke(Ir,An);return Ot.optional(function(){Er.assert(Ir,Hr+" in "+ti,"invalid primitive, must be one of "+Object.keys(qo))}),Ir.def(ti,"[",Hr,"]")})}else if(Cn)return Wc(Cn)?Cn.value?Fa(function(Er,Ir){return Ir.def(Er.ELEMENTS,".primType")}):Fa(function(){return uh}):new gu(Cn.thisDep,Cn.contextDep,Cn.propDep,function(Er,Ir){var ti=Er.ELEMENTS;return Ir.def(ti,"?",ti,".primType:",uh)});return null}function Nn(Yt,An){if(Yt in pn){var Er=pn[Yt]|0;return Ot.command(!An||Er>=0,"invalid "+Yt,Kt.commandStr),Fa(function(ti,Hr){return An&&(ti.OFFSET=Er),Er})}else if(Yt in lr){var Ir=lr[Yt];return ku(Ir,function(ti,Hr){var ai=ti.invoke(Hr,Ir);return An&&(ti.OFFSET=ai,Ot.optional(function(){ti.assert(Hr,ai+">=0","invalid "+Yt)})),ai})}else if(An&&Cn)return Fa(function(ti,Hr){return ti.OFFSET="0",0});return null}var sn=Nn(De,!0);function Tn(){if(me in pn){var Yt=pn[me]|0;return Ot.command(typeof Yt=="number"&&Yt>=0,"invalid vertex count",Kt.commandStr),Fa(function(){return Yt})}else if(me in lr){var An=lr[me];return ku(An,function(ti,Hr){var ai=ti.invoke(Hr,An);return Ot.optional(function(){ti.assert(Hr,"typeof "+ai+'==="number"&&'+ai+">=0&&"+ai+"===("+ai+"|0)","invalid vertex count")}),ai})}else if(Cn)if(Wc(Cn)){if(Cn)return sn?new gu(sn.thisDep,sn.contextDep,sn.propDep,function(ti,Hr){var ai=Hr.def(ti.ELEMENTS,".vertCount-",ti.OFFSET);return Ot.optional(function(){ti.assert(Hr,ai+">=0","invalid vertex offset/element buffer too small")}),ai}):Fa(function(ti,Hr){return Hr.def(ti.ELEMENTS,".vertCount")});var Er=Fa(function(){return-1});return Ot.optional(function(){Er.MISSING=!0}),Er}else{var Ir=new gu(Cn.thisDep||sn.thisDep,Cn.contextDep||sn.contextDep,Cn.propDep||sn.propDep,function(ti,Hr){var ai=ti.ELEMENTS;return ti.OFFSET?Hr.def(ai,"?",ai,".vertCount-",ti.OFFSET,":-1"):Hr.def(ai,"?",ai,".vertCount:-1")});return Ot.optional(function(){Ir.DYNAMIC=!0}),Ir}return null}return{elements:Cn,primitive:_n(),count:Tn(),instances:Nn(ze,!1),offset:sn}}function Ca(kt,Kt){var pn=kt.static,lr=kt.dynamic,ar={};return mi.forEach(function(Cn){var _n=Ri(Cn);function Nn(sn,Tn){if(Cn in pn){var Yt=sn(pn[Cn]);ar[_n]=Fa(function(){return Yt})}else if(Cn in lr){var An=lr[Cn];ar[_n]=ku(An,function(Er,Ir){return Tn(Er,Ir,Er.invoke(Ir,An))})}}switch(Cn){case Bl:case pc:case tc:case Fl:case nc:case sh:case Ga:case Lf:case mc:case vc:return Nn(function(sn){return Ot.commandType(sn,"boolean",Cn,Kt.commandStr),sn},function(sn,Tn,Yt){return Ot.optional(function(){sn.assert(Tn,"typeof "+Yt+'==="boolean"',"invalid flag "+Cn,sn.commandStr)}),Yt});case Rf:return Nn(function(sn){return Ot.commandParameter(sn,$l,"invalid "+Cn,Kt.commandStr),$l[sn]},function(sn,Tn,Yt){var An=sn.constants.compareFuncs;return Ot.optional(function(){sn.assert(Tn,Yt+" in "+An,"invalid "+Cn+", must be one of "+Object.keys($l))}),Tn.def(An,"[",Yt,"]")});case Bu:return Nn(function(sn){return Ot.command(Lt(sn)&&sn.length===2&&typeof sn[0]=="number"&&typeof sn[1]=="number"&&sn[0]<=sn[1],"depth range is 2d array",Kt.commandStr),sn},function(sn,Tn,Yt){Ot.optional(function(){sn.assert(Tn,sn.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===2&&typeof "+Yt+'[0]==="number"&&typeof '+Yt+'[1]==="number"&&'+Yt+"[0]<="+Yt+"[1]","depth range must be a 2d array")});var An=Tn.def("+",Yt,"[0]"),Er=Tn.def("+",Yt,"[1]");return[An,Er]});case Ya:return Nn(function(sn){Ot.commandType(sn,"object","blend.func",Kt.commandStr);var Tn="srcRGB"in sn?sn.srcRGB:sn.src,Yt="srcAlpha"in sn?sn.srcAlpha:sn.src,An="dstRGB"in sn?sn.dstRGB:sn.dst,Er="dstAlpha"in sn?sn.dstAlpha:sn.dst;return Ot.commandParameter(Tn,Dc,_n+".srcRGB",Kt.commandStr),Ot.commandParameter(Yt,Dc,_n+".srcAlpha",Kt.commandStr),Ot.commandParameter(An,Dc,_n+".dstRGB",Kt.commandStr),Ot.commandParameter(Er,Dc,_n+".dstAlpha",Kt.commandStr),Ot.command(Vf.indexOf(Tn+", "+An)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Tn+", "+An+")",Kt.commandStr),[Dc[Tn],Dc[An],Dc[Yt],Dc[Er]]},function(sn,Tn,Yt){var An=sn.constants.blendFuncs;Ot.optional(function(){sn.assert(Tn,Yt+"&&typeof "+Yt+'==="object"',"invalid blend func, must be an object")});function Er(io,fo){var Ko=Tn.def('"',io,fo,'" in ',Yt,"?",Yt,".",io,fo,":",Yt,".",io);return Ot.optional(function(){sn.assert(Tn,Ko+" in "+An,"invalid "+Cn+"."+io+fo+", must be one of "+Object.keys(Dc))}),Ko}var Ir=Er("src","RGB"),ti=Er("dst","RGB");Ot.optional(function(){var io=sn.constants.invalidBlendCombinations;sn.assert(Tn,io+".indexOf("+Ir+'+", "+'+ti+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=Tn.def(An,"[",Ir,"]"),ai=Tn.def(An,"[",Er("src","Alpha"),"]"),yo=Tn.def(An,"[",ti,"]"),us=Tn.def(An,"[",Er("dst","Alpha"),"]");return[Hr,yo,ai,us]});case Ts:return Nn(function(sn){if(typeof sn=="string")return Ot.commandParameter(sn,vr,"invalid "+Cn,Kt.commandStr),[vr[sn],vr[sn]];if(typeof sn=="object")return Ot.commandParameter(sn.rgb,vr,Cn+".rgb",Kt.commandStr),Ot.commandParameter(sn.alpha,vr,Cn+".alpha",Kt.commandStr),[vr[sn.rgb],vr[sn.alpha]];Ot.commandRaise("invalid blend.equation",Kt.commandStr)},function(sn,Tn,Yt){var An=sn.constants.blendEquations,Er=Tn.def(),Ir=Tn.def(),ti=sn.cond("typeof ",Yt,'==="string"');return Ot.optional(function(){function Hr(ai,yo,us){sn.assert(ai,us+" in "+An,"invalid "+yo+", must be one of "+Object.keys(vr))}Hr(ti.then,Cn,Yt),sn.assert(ti.else,Yt+"&&typeof "+Yt+'==="object"',"invalid "+Cn),Hr(ti.else,Cn+".rgb",Yt+".rgb"),Hr(ti.else,Cn+".alpha",Yt+".alpha")}),ti.then(Er,"=",Ir,"=",An,"[",Yt,"];"),ti.else(Er,"=",An,"[",Yt,".rgb];",Ir,"=",An,"[",Yt,".alpha];"),Tn(ti),[Er,Ir]});case _r:return Nn(function(sn){return Ot.command(Lt(sn)&&sn.length===4,"blend.color must be a 4d array",Kt.commandStr),xn(4,function(Tn){return+sn[Tn]})},function(sn,Tn,Yt){return Ot.optional(function(){sn.assert(Tn,sn.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===4","blend.color must be a 4d array")}),xn(4,function(An){return Tn.def("+",Yt,"[",An,"]")})});case Ac:return Nn(function(sn){return Ot.commandType(sn,"number",_n,Kt.commandStr),sn|0},function(sn,Tn,Yt){return Ot.optional(function(){sn.assert(Tn,"typeof "+Yt+'==="number"',"invalid stencil.mask")}),Tn.def(Yt,"|0")});case Bf:return Nn(function(sn){Ot.commandType(sn,"object",_n,Kt.commandStr);var Tn=sn.cmp||"keep",Yt=sn.ref||0,An="mask"in sn?sn.mask:-1;return Ot.commandParameter(Tn,$l,Cn+".cmp",Kt.commandStr),Ot.commandType(Yt,"number",Cn+".ref",Kt.commandStr),Ot.commandType(An,"number",Cn+".mask",Kt.commandStr),[$l[Tn],Yt,An]},function(sn,Tn,Yt){var An=sn.constants.compareFuncs;Ot.optional(function(){function Hr(){sn.assert(Tn,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Hr(Yt+"&&typeof ",Yt,'==="object"'),Hr('!("cmp" in ',Yt,")||(",Yt,".cmp in ",An,")")});var Er=Tn.def('"cmp" in ',Yt,"?",An,"[",Yt,".cmp]",":",Vn),Ir=Tn.def(Yt,".ref|0"),ti=Tn.def('"mask" in ',Yt,"?",Yt,".mask|0:-1");return[Er,Ir,ti]});case na:case ol:return Nn(function(sn){Ot.commandType(sn,"object",_n,Kt.commandStr);var Tn=sn.fail||"keep",Yt=sn.zfail||"keep",An=sn.zpass||"keep";return Ot.commandParameter(Tn,Ma,Cn+".fail",Kt.commandStr),Ot.commandParameter(Yt,Ma,Cn+".zfail",Kt.commandStr),Ot.commandParameter(An,Ma,Cn+".zpass",Kt.commandStr),[Cn===ol?Vc:Wl,Ma[Tn],Ma[Yt],Ma[An]]},function(sn,Tn,Yt){var An=sn.constants.stencilOps;Ot.optional(function(){sn.assert(Tn,Yt+"&&typeof "+Yt+'==="object"',"invalid "+Cn)});function Er(Ir){return Ot.optional(function(){sn.assert(Tn,'!("'+Ir+'" in '+Yt+")||("+Yt+"."+Ir+" in "+An+")","invalid "+Cn+"."+Ir+", must be one of "+Object.keys(Ma))}),Tn.def('"',Ir,'" in ',Yt,"?",An,"[",Yt,".",Ir,"]:",Vn)}return[Cn===ol?Vc:Wl,Er("fail"),Er("zfail"),Er("zpass")]});case Gl:return Nn(function(sn){Ot.commandType(sn,"object",_n,Kt.commandStr);var Tn=sn.factor|0,Yt=sn.units|0;return Ot.commandType(Tn,"number",_n+".factor",Kt.commandStr),Ot.commandType(Yt,"number",_n+".units",Kt.commandStr),[Tn,Yt]},function(sn,Tn,Yt){Ot.optional(function(){sn.assert(Tn,Yt+"&&typeof "+Yt+'==="object"',"invalid "+Cn)});var An=Tn.def(Yt,".factor|0"),Er=Tn.def(Yt,".units|0");return[An,Er]});case ka:return Nn(function(sn){var Tn=0;return sn==="front"?Tn=Wl:sn==="back"&&(Tn=Vc),Ot.command(!!Tn,_n,Kt.commandStr),Tn},function(sn,Tn,Yt){return Ot.optional(function(){sn.assert(Tn,Yt+'==="front"||'+Yt+'==="back"',"invalid cull.face")}),Tn.def(Yt,'==="front"?',Wl,":",Vc)});case kl:return Nn(function(sn){return Ot.command(typeof sn=="number"&&sn>=dr.lineWidthDims[0]&&sn<=dr.lineWidthDims[1],"invalid line width, must be a positive number between "+dr.lineWidthDims[0]+" and "+dr.lineWidthDims[1],Kt.commandStr),sn},function(sn,Tn,Yt){return Ot.optional(function(){sn.assert(Tn,"typeof "+Yt+'==="number"&&'+Yt+">="+dr.lineWidthDims[0]+"&&"+Yt+"<="+dr.lineWidthDims[1],"invalid line width")}),Yt});case lf:return Nn(function(sn){return Ot.commandParameter(sn,Wf,_n,Kt.commandStr),Wf[sn]},function(sn,Tn,Yt){return Ot.optional(function(){sn.assert(Tn,Yt+'==="cw"||'+Yt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Tn.def(Yt+'==="cw"?'+jf+":"+_c)});case Yu:return Nn(function(sn){return Ot.command(Lt(sn)&&sn.length===4,"color.mask must be length 4 array",Kt.commandStr),sn.map(function(Tn){return!!Tn})},function(sn,Tn,Yt){return Ot.optional(function(){sn.assert(Tn,sn.shared.isArrayLike+"("+Yt+")&&"+Yt+".length===4","invalid color.mask")}),xn(4,function(An){return"!!"+Yt+"["+An+"]"})});case il:return Nn(function(sn){Ot.command(typeof sn=="object"&&sn,_n,Kt.commandStr);var Tn="value"in sn?sn.value:1,Yt=!!sn.invert;return Ot.command(typeof Tn=="number"&&Tn>=0&&Tn<=1,"sample.coverage.value must be a number between 0 and 1",Kt.commandStr),[Tn,Yt]},function(sn,Tn,Yt){Ot.optional(function(){sn.assert(Tn,Yt+"&&typeof "+Yt+'==="object"',"invalid sample.coverage")});var An=Tn.def('"value" in ',Yt,"?+",Yt,".value:1"),Er=Tn.def("!!",Yt,".invert");return[An,Er]})}}),ar}function cu(kt,Kt){var pn=kt.static,lr=kt.dynamic,ar={};return Object.keys(pn).forEach(function(Cn){var _n=pn[Cn],Nn;if(typeof _n=="number"||typeof _n=="boolean")Nn=Fa(function(){return _n});else if(typeof _n=="function"){var sn=_n._reglType;sn==="texture2d"||sn==="textureCube"?Nn=Fa(function(Tn){return Tn.link(_n)}):sn==="framebuffer"||sn==="framebufferCube"?(Ot.command(_n.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Cn+'"',Kt.commandStr),Nn=Fa(function(Tn){return Tn.link(_n.color[0])})):Ot.commandRaise('invalid data for uniform "'+Cn+'"',Kt.commandStr)}else Lt(_n)?Nn=Fa(function(Tn){var Yt=Tn.global.def("[",xn(_n.length,function(An){return Ot.command(typeof _n[An]=="number"||typeof _n[An]=="boolean","invalid uniform "+Cn,Tn.commandStr),_n[An]}),"]");return Yt}):Ot.commandRaise('invalid or missing data for uniform "'+Cn+'"',Kt.commandStr);Nn.value=_n,ar[Cn]=Nn}),Object.keys(lr).forEach(function(Cn){var _n=lr[Cn];ar[Cn]=ku(_n,function(Nn,sn){return Nn.invoke(sn,_n)})}),ar}function Ps(kt,Kt){var pn=kt.static,lr=kt.dynamic,ar={};return Object.keys(pn).forEach(function(Cn){var _n=pn[Cn],Nn=Vt.id(Cn),sn=new Wn;if(ch(_n))sn.state=Pc,sn.buffer=jr.getBuffer(jr.create(_n,yn,!1,!0)),sn.type=0;else{var Tn=jr.getBuffer(_n);if(Tn)sn.state=Pc,sn.buffer=Tn,sn.type=0;else if(Ot.command(typeof _n=="object"&&_n,"invalid data for attribute "+Cn,Kt.commandStr),"constant"in _n){var Yt=_n.constant;sn.buffer="null",sn.state=pl,typeof Yt=="number"?sn.x=Yt:(Ot.command(Lt(Yt)&&Yt.length>0&&Yt.length<=4,"invalid constant for attribute "+Cn,Kt.commandStr),Ta.forEach(function(yo,us){us<Yt.length&&(sn[yo]=Yt[us])}))}else{ch(_n.buffer)?Tn=jr.getBuffer(jr.create(_n.buffer,yn,!1,!0)):Tn=jr.getBuffer(_n.buffer),Ot.command(!!Tn,'missing buffer for attribute "'+Cn+'"',Kt.commandStr);var An=_n.offset|0;Ot.command(An>=0,'invalid offset for attribute "'+Cn+'"',Kt.commandStr);var Er=_n.stride|0;Ot.command(Er>=0&&Er<256,'invalid stride for attribute "'+Cn+'", must be integer betweeen [0, 255]',Kt.commandStr);var Ir=_n.size|0;Ot.command(!("size"in _n)||Ir>0&&Ir<=4,'invalid size for attribute "'+Cn+'", must be 1,2,3,4',Kt.commandStr);var ti=!!_n.normalized,Hr=0;"type"in _n&&(Ot.commandParameter(_n.type,cs,"invalid type for attribute "+Cn,Kt.commandStr),Hr=cs[_n.type]);var ai=_n.divisor|0;"divisor"in _n&&(Ot.command(ai===0||gi,'cannot specify divisor for attribute "'+Cn+'", instancing not supported',Kt.commandStr),Ot.command(ai>=0,'invalid divisor for attribute "'+Cn+'"',Kt.commandStr)),Ot.optional(function(){var yo=Kt.commandStr,us=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(_n).forEach(function(io){Ot.command(us.indexOf(io)>=0,'unknown parameter "'+io+'" for attribute pointer "'+Cn+'" (valid parameters are '+us+")",yo)})}),sn.buffer=Tn,sn.state=Pc,sn.size=Ir,sn.normalized=ti,sn.type=Hr||Tn.dtype,sn.offset=An,sn.stride=Er,sn.divisor=ai}}ar[Cn]=Fa(function(yo,us){var io=yo.attribCache;if(Nn in io)return io[Nn];var fo={isStream:!1};return Object.keys(sn).forEach(function(Ko){fo[Ko]=sn[Ko]}),sn.buffer&&(fo.buffer=yo.link(sn.buffer),fo.type=fo.type||fo.buffer+".dtype"),io[Nn]=fo,fo})}),Object.keys(lr).forEach(function(Cn){var _n=lr[Cn];function Nn(sn,Tn){var Yt=sn.invoke(Tn,_n),An=sn.shared,Er=sn.constants,Ir=An.isBufferArgs,ti=An.buffer;Ot.optional(function(){sn.assert(Tn,Yt+"&&(typeof "+Yt+'==="object"||typeof '+Yt+'==="function")&&('+Ir+"("+Yt+")||"+ti+".getBuffer("+Yt+")||"+ti+".getBuffer("+Yt+".buffer)||"+Ir+"("+Yt+'.buffer)||("constant" in '+Yt+"&&(typeof "+Yt+'.constant==="number"||'+An.isArrayLike+"("+Yt+".constant))))",'invalid dynamic attribute "'+Cn+'"')});var Hr={isStream:Tn.def(!1)},ai=new Wn;ai.state=Pc,Object.keys(ai).forEach(function(fo){Hr[fo]=Tn.def(""+ai[fo])});var yo=Hr.buffer,us=Hr.type;Tn("if(",Ir,"(",Yt,")){",Hr.isStream,"=true;",yo,"=",ti,".createStream(",yn,",",Yt,");",us,"=",yo,".dtype;","}else{",yo,"=",ti,".getBuffer(",Yt,");","if(",yo,"){",us,"=",yo,".dtype;",'}else if("constant" in ',Yt,"){",Hr.state,"=",pl,";","if(typeof "+Yt+'.constant === "number"){',Hr[Ta[0]],"=",Yt,".constant;",Ta.slice(1).map(function(fo){return Hr[fo]}).join("="),"=0;","}else{",Ta.map(function(fo,Ko){return Hr[fo]+"="+Yt+".constant.length>"+Ko+"?"+Yt+".constant["+Ko+"]:0;"}).join(""),"}}else{","if(",Ir,"(",Yt,".buffer)){",yo,"=",ti,".createStream(",yn,",",Yt,".buffer);","}else{",yo,"=",ti,".getBuffer(",Yt,".buffer);","}",us,'="type" in ',Yt,"?",Er.glTypes,"[",Yt,".type]:",yo,".dtype;",Hr.normalized,"=!!",Yt,".normalized;");function io(fo){Tn(Hr[fo],"=",Yt,".",fo,"|0;")}return io("size"),io("offset"),io("stride"),io("divisor"),Tn("}}"),Tn.exit("if(",Hr.isStream,"){",ti,".destroyStream(",yo,");","}"),Hr}ar[Cn]=ku(_n,Nn)}),ar}function nu(kt,Kt){var pn=kt.static,lr=kt.dynamic;if(it in pn){var ar=pn[it];return ar!==null&&Ai.getVAO(ar)===null&&(ar=Ai.createVAO(ar)),Fa(function(_n){return _n.link(Ai.getVAO(ar))})}else if(it in lr){var Cn=lr[it];return ku(Cn,function(_n,Nn){var sn=_n.invoke(Nn,Cn);return Nn.def(_n.shared.vao+".getVAO("+sn+")")})}return null}function wa(kt){var Kt=kt.static,pn=kt.dynamic,lr={};return Object.keys(Kt).forEach(function(ar){var Cn=Kt[ar];lr[ar]=Fa(function(_n,Nn){return typeof Cn=="number"||typeof Cn=="boolean"?""+Cn:_n.link(Cn)})}),Object.keys(pn).forEach(function(ar){var Cn=pn[ar];lr[ar]=ku(Cn,function(_n,Nn){return _n.invoke(Nn,Cn)})}),lr}function ru(kt,Kt,pn,lr,ar){var Cn=kt.static,_n=kt.dynamic;Ot.optional(function(){var io=[f,p,w,k,ne,De,me,ze,n,it].concat(mi);function fo(Ko){Object.keys(Ko).forEach(function(Gs){Ot.command(io.indexOf(Gs)>=0,'unknown parameter "'+Gs+'"',ar.commandStr)})}fo(Cn),fo(_n)});var Nn=es(kt,Kt),sn=xo(kt,ar),Tn=as(kt,sn,ar),Yt=gs(kt,ar),An=Ca(kt,ar),Er=ps(kt,ar,Nn);function Ir(io){var fo=Tn[io];fo&&(An[io]=fo)}Ir(H),Ir(Ri(zc));var ti=Object.keys(An).length>0,Hr={framebuffer:sn,draw:Yt,shader:Er,state:An,dirty:ti,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Hr.profile=ms(kt,ar),Hr.uniforms=cu(pn,ar),Hr.drawVAO=Hr.scopeVAO=nu(kt,ar),!Hr.drawVAO&&Er.program&&!Nn&&mn.angle_instanced_arrays){var ai=!0,yo=Er.program.attributes.map(function(io){var fo=Kt.static[io];return ai=ai&&!!fo,fo});if(ai&&yo.length>0){var us=Ai.getVAO(Ai.createVAO(yo));Hr.drawVAO=new gu(null,null,null,function(io,fo){return io.link(us)}),Hr.useVAO=!0}}return Nn?Hr.useVAO=!0:Hr.attributes=Ps(Kt,ar),Hr.context=wa(lr,ar),Hr}function iu(kt,Kt,pn){var lr=kt.shared,ar=lr.context,Cn=kt.scope();Object.keys(pn).forEach(function(_n){Kt.save(ar,"."+_n);var Nn=pn[_n];Cn(ar,".",_n,"=",Nn.append(kt,Kt),";")}),Kt(Cn)}function Ja(kt,Kt,pn,lr){var ar=kt.shared,Cn=ar.gl,_n=ar.framebuffer,Nn;Bi&&(Nn=Kt.def(ar.extensions,".webgl_draw_buffers"));var sn=kt.constants,Tn=sn.drawBuffer,Yt=sn.backBuffer,An;pn?An=pn.append(kt,Kt):An=Kt.def(_n,".next"),lr||Kt("if(",An,"!==",_n,".cur){"),Kt("if(",An,"){",Cn,".bindFramebuffer(",vf,",",An,".framebuffer);"),Bi&&Kt(Nn,".drawBuffersWEBGL(",Tn,"[",An,".colorAttachments.length]);"),Kt("}else{",Cn,".bindFramebuffer(",vf,",null);"),Bi&&Kt(Nn,".drawBuffersWEBGL(",Yt,");"),Kt("}",_n,".cur=",An,";"),lr||Kt("}")}function pu(kt,Kt,pn){var lr=kt.shared,ar=lr.gl,Cn=kt.current,_n=kt.next,Nn=lr.current,sn=lr.next,Tn=kt.cond(Nn,".dirty");mi.forEach(function(Yt){var An=Ri(Yt);if(!(An in pn.state)){var Er,Ir;if(An in _n){Er=_n[An],Ir=Cn[An];var ti=xn(Xr[An].length,function(ai){return Tn.def(Er,"[",ai,"]")});Tn(kt.cond(ti.map(function(ai,yo){return ai+"!=="+Ir+"["+yo+"]"}).join("||")).then(ar,".",Zr[An],"(",ti,");",ti.map(function(ai,yo){return Ir+"["+yo+"]="+ai}).join(";"),";"))}else{Er=Tn.def(sn,".",An);var Hr=kt.cond(Er,"!==",Nn,".",An);Tn(Hr),An in zi?Hr(kt.cond(Er).then(ar,".enable(",zi[An],");").else(ar,".disable(",zi[An],");"),Nn,".",An,"=",Er,";"):Hr(ar,".",Zr[An],"(",Er,");",Nn,".",An,"=",Er,";")}}}),Object.keys(pn.state).length===0&&Tn(Nn,".dirty=false;"),Kt(Tn)}function xu(kt,Kt,pn,lr){var ar=kt.shared,Cn=kt.current,_n=ar.current,Nn=ar.gl;$f(Object.keys(pn)).forEach(function(sn){var Tn=pn[sn];if(!(lr&&!lr(Tn))){var Yt=Tn.append(kt,Kt);if(zi[sn]){var An=zi[sn];Wc(Tn)?Yt?Kt(Nn,".enable(",An,");"):Kt(Nn,".disable(",An,");"):Kt(kt.cond(Yt).then(Nn,".enable(",An,");").else(Nn,".disable(",An,");")),Kt(_n,".",sn,"=",Yt,";")}else if(Lt(Yt)){var Er=Cn[sn];Kt(Nn,".",Zr[sn],"(",Yt,");",Yt.map(function(Ir,ti){return Er+"["+ti+"]="+Ir}).join(";"),";")}else Kt(Nn,".",Zr[sn],"(",Yt,");",_n,".",sn,"=",Yt,";")}})}function ou(kt,Kt){gi&&(kt.instancing=Kt.def(kt.shared.extensions,".angle_instanced_arrays"))}function ts(kt,Kt,pn,lr,ar){var Cn=kt.shared,_n=kt.stats,Nn=Cn.current,sn=Cn.timer,Tn=pn.profile;function Yt(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var An,Er;function Ir(io){An=Kt.def(),io(An,"=",Yt(),";"),typeof ar=="string"?io(_n,".count+=",ar,";"):io(_n,".count++;"),hr&&(lr?(Er=Kt.def(),io(Er,"=",sn,".getNumPendingQueries();")):io(sn,".beginQuery(",_n,");"))}function ti(io){io(_n,".cpuTime+=",Yt(),"-",An,";"),hr&&(lr?io(sn,".pushScopeStats(",Er,",",sn,".getNumPendingQueries(),",_n,");"):io(sn,".endQuery();"))}function Hr(io){var fo=Kt.def(Nn,".profile");Kt(Nn,".profile=",io,";"),Kt.exit(Nn,".profile=",fo,";")}var ai;if(Tn){if(Wc(Tn)){Tn.enable?(Ir(Kt),ti(Kt.exit),Hr("true")):Hr("false");return}ai=Tn.append(kt,Kt),Hr(ai)}else ai=Kt.def(Nn,".profile");var yo=kt.block();Ir(yo),Kt("if(",ai,"){",yo,"}");var us=kt.block();ti(us),Kt.exit("if(",ai,"){",us,"}")}function lu(kt,Kt,pn,lr,ar){var Cn=kt.shared;function _n(sn){switch(sn){case Pu:case Du:case Gf:return 2;case zl:case gf:case Ff:return 3;case df:case yl:case Nu:return 4;default:return 1}}function Nn(sn,Tn,Yt){var An=Cn.gl,Er=Kt.def(sn,".location"),Ir=Kt.def(Cn.attributes,"[",Er,"]"),ti=Yt.state,Hr=Yt.buffer,ai=[Yt.x,Yt.y,Yt.z,Yt.w],yo=["buffer","normalized","offset","stride"];function us(){Kt("if(!",Ir,".buffer){",An,".enableVertexAttribArray(",Er,");}");var fo=Yt.type,Ko;if(Yt.size?Ko=Kt.def(Yt.size,"||",Tn):Ko=Tn,Kt("if(",Ir,".type!==",fo,"||",Ir,".size!==",Ko,"||",yo.map(function(Va){return Ir+"."+Va+"!=="+Yt[Va]}).join("||"),"){",An,".bindBuffer(",yn,",",Hr,".buffer);",An,".vertexAttribPointer(",[Er,Ko,fo,Yt.normalized,Yt.stride,Yt.offset],");",Ir,".type=",fo,";",Ir,".size=",Ko,";",yo.map(function(Va){return Ir+"."+Va+"="+Yt[Va]+";"}).join(""),"}"),gi){var Gs=Yt.divisor;Kt("if(",Ir,".divisor!==",Gs,"){",kt.instancing,".vertexAttribDivisorANGLE(",[Er,Gs],");",Ir,".divisor=",Gs,";}")}}function io(){Kt("if(",Ir,".buffer){",An,".disableVertexAttribArray(",Er,");",Ir,".buffer=null;","}if(",Ta.map(function(fo,Ko){return Ir+"."+fo+"!=="+ai[Ko]}).join("||"),"){",An,".vertexAttrib4f(",Er,",",ai,");",Ta.map(function(fo,Ko){return Ir+"."+fo+"="+ai[Ko]+";"}).join(""),"}")}ti===Pc?us():ti===pl?io():(Kt("if(",ti,"===",Pc,"){"),us(),Kt("}else{"),io(),Kt("}"))}lr.forEach(function(sn){var Tn=sn.name,Yt=pn.attributes[Tn],An;if(Yt){if(!ar(Yt))return;An=Yt.append(kt,Kt)}else{if(!ar(mf))return;var Er=kt.scopeAttrib(Tn);Ot.optional(function(){kt.assert(Kt,Er+".state","missing attribute "+Tn)}),An={},Object.keys(new Wn).forEach(function(Ir){An[Ir]=Kt.def(Er,".",Ir)})}Nn(kt.link(sn),_n(sn.info.type),An)})}function Hs(kt,Kt,pn,lr,ar){for(var Cn=kt.shared,_n=Cn.gl,Nn,sn=0;sn<lr.length;++sn){var Tn=lr[sn],Yt=Tn.name,An=Tn.info.type,Er=pn.uniforms[Yt],Ir=kt.link(Tn),ti=Ir+".location",Hr;if(Er){if(!ar(Er))continue;if(Wc(Er)){var ai=Er.value;if(Ot.command(ai!==null&&typeof ai!="undefined",'missing uniform "'+Yt+'"',kt.commandStr),An===wl||An===pf){Ot.command(typeof ai=="function"&&(An===wl&&(ai._reglType==="texture2d"||ai._reglType==="framebuffer")||An===pf&&(ai._reglType==="textureCube"||ai._reglType==="framebufferCube")),"invalid texture for uniform "+Yt,kt.commandStr);var yo=kt.link(ai._texture||ai.color[0]._texture);Kt(_n,".uniform1i(",ti,",",yo+".bind());"),Kt.exit(yo,".unbind();")}else if(An===$s||An===Vl||An===bl){Ot.optional(function(){Ot.command(Lt(ai),"invalid matrix for uniform "+Yt,kt.commandStr),Ot.command(An===$s&&ai.length===4||An===Vl&&ai.length===9||An===bl&&ai.length===16,"invalid length for matrix uniform "+Yt,kt.commandStr)});var us=kt.global.def("new Float32Array(["+Array.prototype.slice.call(ai)+"])"),io=2;An===Vl?io=3:An===bl&&(io=4),Kt(_n,".uniformMatrix",io,"fv(",ti,",false,",us,");")}else{switch(An){case Uc:Ot.commandType(ai,"number","uniform "+Yt,kt.commandStr),Nn="1f";break;case Pu:Ot.command(Lt(ai)&&ai.length===2,"uniform "+Yt,kt.commandStr),Nn="2f";break;case zl:Ot.command(Lt(ai)&&ai.length===3,"uniform "+Yt,kt.commandStr),Nn="3f";break;case df:Ot.command(Lt(ai)&&ai.length===4,"uniform "+Yt,kt.commandStr),Nn="4f";break;case kf:Ot.commandType(ai,"boolean","uniform "+Yt,kt.commandStr),Nn="1i";break;case Ul:Ot.commandType(ai,"number","uniform "+Yt,kt.commandStr),Nn="1i";break;case Gf:Ot.command(Lt(ai)&&ai.length===2,"uniform "+Yt,kt.commandStr),Nn="2i";break;case Du:Ot.command(Lt(ai)&&ai.length===2,"uniform "+Yt,kt.commandStr),Nn="2i";break;case Ff:Ot.command(Lt(ai)&&ai.length===3,"uniform "+Yt,kt.commandStr),Nn="3i";break;case gf:Ot.command(Lt(ai)&&ai.length===3,"uniform "+Yt,kt.commandStr),Nn="3i";break;case Nu:Ot.command(Lt(ai)&&ai.length===4,"uniform "+Yt,kt.commandStr),Nn="4i";break;case yl:Ot.command(Lt(ai)&&ai.length===4,"uniform "+Yt,kt.commandStr),Nn="4i";break}Kt(_n,".uniform",Nn,"(",ti,",",Lt(ai)?Array.prototype.slice.call(ai):ai,");")}continue}else Hr=Er.append(kt,Kt)}else{if(!ar(mf))continue;Hr=Kt.def(Cn.uniforms,"[",Vt.id(Yt),"]")}An===wl?Kt("if(",Hr,"&&",Hr,'._reglType==="framebuffer"){',Hr,"=",Hr,".color[0];","}"):An===pf&&Kt("if(",Hr,"&&",Hr,'._reglType==="framebufferCube"){',Hr,"=",Hr,".color[0];","}"),Ot.optional(function(){function rc(Hc,Yf){kt.assert(Kt,Hc,'bad data or missing for uniform "'+Yt+'".  '+Yf)}function ph(Hc){rc("typeof "+Hr+'==="'+Hc+'"',"invalid type, expected "+Hc)}function ic(Hc,Yf){rc(Cn.isArrayLike+"("+Hr+")&&"+Hr+".length==="+Hc,"invalid vector, should have length "+Hc,kt.commandStr)}function oc(Hc){rc("typeof "+Hr+'==="function"&&'+Hr+'._reglType==="texture'+(Hc===Za?"2d":"Cube")+'"',"invalid texture type",kt.commandStr)}switch(An){case Ul:ph("number");break;case Du:ic(2,"number");break;case gf:ic(3,"number");break;case yl:ic(4,"number");break;case Uc:ph("number");break;case Pu:ic(2,"number");break;case zl:ic(3,"number");break;case df:ic(4,"number");break;case kf:ph("boolean");break;case Gf:ic(2,"boolean");break;case Ff:ic(3,"boolean");break;case Nu:ic(4,"boolean");break;case $s:ic(4,"number");break;case Vl:ic(9,"number");break;case bl:ic(16,"number");break;case wl:oc(Za);break;case pf:oc(_a);break}});var fo=1;switch(An){case wl:case pf:var Ko=Kt.def(Hr,"._texture");Kt(_n,".uniform1i(",ti,",",Ko,".bind());"),Kt.exit(Ko,".unbind();");continue;case Ul:case kf:Nn="1i";break;case Du:case Gf:Nn="2i",fo=2;break;case gf:case Ff:Nn="3i",fo=3;break;case yl:case Nu:Nn="4i",fo=4;break;case Uc:Nn="1f";break;case Pu:Nn="2f",fo=2;break;case zl:Nn="3f",fo=3;break;case df:Nn="4f",fo=4;break;case $s:Nn="Matrix2fv";break;case Vl:Nn="Matrix3fv";break;case bl:Nn="Matrix4fv";break}if(Kt(_n,".uniform",Nn,"(",ti,","),Nn.charAt(0)==="M"){var Gs=Math.pow(An-$s+2,2),Va=kt.global.def("new Float32Array(",Gs,")");Kt("false,(Array.isArray(",Hr,")||",Hr," instanceof Float32Array)?",Hr,":(",xn(Gs,function(rc){return Va+"["+rc+"]="+Hr+"["+rc+"]"}),",",Va,")")}else fo>1?Kt(xn(fo,function(rc){return Hr+"["+rc+"]"})):Kt(Hr);Kt(");")}}function Ao(kt,Kt,pn,lr){var ar=kt.shared,Cn=ar.gl,_n=ar.draw,Nn=lr.draw;function sn(){var Ko=Nn.elements,Gs,Va=Kt;return Ko?((Ko.contextDep&&lr.contextDynamic||Ko.propDep)&&(Va=pn),Gs=Ko.append(kt,Va)):Gs=Va.def(_n,".",k),Gs&&Va("if("+Gs+")"+Cn+".bindBuffer("+ao+","+Gs+".buffer.buffer);"),Gs}function Tn(){var Ko=Nn.count,Gs,Va=Kt;return Ko?((Ko.contextDep&&lr.contextDynamic||Ko.propDep)&&(Va=pn),Gs=Ko.append(kt,Va),Ot.optional(function(){Ko.MISSING&&kt.assert(Kt,"false","missing vertex count"),Ko.DYNAMIC&&kt.assert(Va,Gs+">=0","missing vertex count")})):(Gs=Va.def(_n,".",me),Ot.optional(function(){kt.assert(Va,Gs+">=0","missing vertex count")})),Gs}var Yt=sn();function An(Ko){var Gs=Nn[Ko];return Gs?Gs.contextDep&&lr.contextDynamic||Gs.propDep?Gs.append(kt,pn):Gs.append(kt,Kt):Kt.def(_n,".",Ko)}var Er=An(ne),Ir=An(De),ti=Tn();if(typeof ti=="number"){if(ti===0)return}else pn("if(",ti,"){"),pn.exit("}");var Hr,ai;gi&&(Hr=An(ze),ai=kt.instancing);var yo=Yt+".type",us=Nn.elements&&Wc(Nn.elements);function io(){function Ko(){pn(ai,".drawElementsInstancedANGLE(",[Er,ti,yo,Ir+"<<(("+yo+"-"+If+")>>1)",Hr],");")}function Gs(){pn(ai,".drawArraysInstancedANGLE(",[Er,Ir,ti,Hr],");")}Yt?us?Ko():(pn("if(",Yt,"){"),Ko(),pn("}else{"),Gs(),pn("}")):Gs()}function fo(){function Ko(){pn(Cn+".drawElements("+[Er,ti,yo,Ir+"<<(("+yo+"-"+If+")>>1)"]+");")}function Gs(){pn(Cn+".drawArrays("+[Er,Ir,ti]+");")}Yt?us?Ko():(pn("if(",Yt,"){"),Ko(),pn("}else{"),Gs(),pn("}")):Gs()}gi&&(typeof Hr!="number"||Hr>=0)?typeof Hr=="string"?(pn("if(",Hr,">0){"),io(),pn("}else if(",Hr,"<0){"),fo(),pn("}")):io():fo()}function ns(kt,Kt,pn,lr,ar){var Cn=To(),_n=Cn.proc("body",ar);return Ot.optional(function(){Cn.commandStr=Kt.commandStr,Cn.command=Cn.link(Kt.commandStr)}),gi&&(Cn.instancing=_n.def(Cn.shared.extensions,".angle_instanced_arrays")),kt(Cn,_n,pn,lr),Cn.compile().body}function bs(kt,Kt,pn,lr){ou(kt,Kt),pn.useVAO?pn.drawVAO?Kt(kt.shared.vao,".setVAO(",pn.drawVAO.append(kt,Kt),");"):Kt(kt.shared.vao,".setVAO(",kt.shared.vao,".targetVAO);"):(Kt(kt.shared.vao,".setVAO(null);"),lu(kt,Kt,pn,lr.attributes,function(){return!0})),Hs(kt,Kt,pn,lr.uniforms,function(){return!0}),Ao(kt,Kt,Kt,pn)}function ra(kt,Kt){var pn=kt.proc("draw",1);ou(kt,pn),iu(kt,pn,Kt.context),Ja(kt,pn,Kt.framebuffer),pu(kt,pn,Kt),xu(kt,pn,Kt.state),ts(kt,pn,Kt,!1,!0);var lr=Kt.shader.progVar.append(kt,pn);if(pn(kt.shared.gl,".useProgram(",lr,".program);"),Kt.shader.program)bs(kt,pn,Kt,Kt.shader.program);else{pn(kt.shared.vao,".setVAO(null);");var ar=kt.global.def("{}"),Cn=pn.def(lr,".id"),_n=pn.def(ar,"[",Cn,"]");pn(kt.cond(_n).then(_n,".call(this,a0);").else(_n,"=",ar,"[",Cn,"]=",kt.link(function(Nn){return ns(bs,kt,Kt,Nn,1)}),"(",lr,");",_n,".call(this,a0);"))}Object.keys(Kt.state).length>0&&pn(kt.shared.current,".dirty=true;")}function Gu(kt,Kt,pn,lr){kt.batchId="a1",ou(kt,Kt);function ar(){return!0}lu(kt,Kt,pn,lr.attributes,ar),Hs(kt,Kt,pn,lr.uniforms,ar),Ao(kt,Kt,Kt,pn)}function rn(kt,Kt,pn,lr){ou(kt,Kt);var ar=pn.contextDep,Cn=Kt.def(),_n="a0",Nn="a1",sn=Kt.def();kt.shared.props=sn,kt.batchId=Cn;var Tn=kt.scope(),Yt=kt.scope();Kt(Tn.entry,"for(",Cn,"=0;",Cn,"<",Nn,";++",Cn,"){",sn,"=",_n,"[",Cn,"];",Yt,"}",Tn.exit);function An(yo){return yo.contextDep&&ar||yo.propDep}function Er(yo){return!An(yo)}if(pn.needsContext&&iu(kt,Yt,pn.context),pn.needsFramebuffer&&Ja(kt,Yt,pn.framebuffer),xu(kt,Yt,pn.state,An),pn.profile&&An(pn.profile)&&ts(kt,Yt,pn,!1,!0),lr)pn.useVAO?pn.drawVAO?An(pn.drawVAO)?Yt(kt.shared.vao,".setVAO(",pn.drawVAO.append(kt,Yt),");"):Tn(kt.shared.vao,".setVAO(",pn.drawVAO.append(kt,Tn),");"):Tn(kt.shared.vao,".setVAO(",kt.shared.vao,".targetVAO);"):(Tn(kt.shared.vao,".setVAO(null);"),lu(kt,Tn,pn,lr.attributes,Er),lu(kt,Yt,pn,lr.attributes,An)),Hs(kt,Tn,pn,lr.uniforms,Er),Hs(kt,Yt,pn,lr.uniforms,An),Ao(kt,Tn,Yt,pn);else{var Ir=kt.global.def("{}"),ti=pn.shader.progVar.append(kt,Yt),Hr=Yt.def(ti,".id"),ai=Yt.def(Ir,"[",Hr,"]");Yt(kt.shared.gl,".useProgram(",ti,".program);","if(!",ai,"){",ai,"=",Ir,"[",Hr,"]=",kt.link(function(yo){return ns(Gu,kt,pn,yo,2)}),"(",ti,");}",ai,".call(this,a0[",Cn,"],",Cn,");")}}function xr(kt,Kt){var pn=kt.proc("batch",2);kt.batchId="0",ou(kt,pn);var lr=!1,ar=!0;Object.keys(Kt.context).forEach(function(Ir){lr=lr||Kt.context[Ir].propDep}),lr||(iu(kt,pn,Kt.context),ar=!1);var Cn=Kt.framebuffer,_n=!1;Cn?(Cn.propDep?lr=_n=!0:Cn.contextDep&&lr&&(_n=!0),_n||Ja(kt,pn,Cn)):Ja(kt,pn,null),Kt.state.viewport&&Kt.state.viewport.propDep&&(lr=!0);function Nn(Ir){return Ir.contextDep&&lr||Ir.propDep}pu(kt,pn,Kt),xu(kt,pn,Kt.state,function(Ir){return!Nn(Ir)}),(!Kt.profile||!Nn(Kt.profile))&&ts(kt,pn,Kt,!1,"a1"),Kt.contextDep=lr,Kt.needsContext=ar,Kt.needsFramebuffer=_n;var sn=Kt.shader.progVar;if(sn.contextDep&&lr||sn.propDep)rn(kt,pn,Kt,null);else{var Tn=sn.append(kt,pn);if(pn(kt.shared.gl,".useProgram(",Tn,".program);"),Kt.shader.program)rn(kt,pn,Kt,Kt.shader.program);else{pn(kt.shared.vao,".setVAO(null);");var Yt=kt.global.def("{}"),An=pn.def(Tn,".id"),Er=pn.def(Yt,"[",An,"]");pn(kt.cond(Er).then(Er,".call(this,a0,a1);").else(Er,"=",Yt,"[",An,"]=",kt.link(function(Ir){return ns(rn,kt,Kt,Ir,2)}),"(",Tn,");",Er,".call(this,a0,a1);"))}}Object.keys(Kt.state).length>0&&pn(kt.shared.current,".dirty=true;")}function sr(kt,Kt){var pn=kt.proc("scope",3);kt.batchId="a2";var lr=kt.shared,ar=lr.current;iu(kt,pn,Kt.context),Kt.framebuffer&&Kt.framebuffer.append(kt,pn),$f(Object.keys(Kt.state)).forEach(function(_n){var Nn=Kt.state[_n],sn=Nn.append(kt,pn);Lt(sn)?sn.forEach(function(Tn,Yt){pn.set(kt.next[_n],"["+Yt+"]",Tn)}):pn.set(lr.next,"."+_n,sn)}),ts(kt,pn,Kt,!0,!0),[k,De,me,ze,ne].forEach(function(_n){var Nn=Kt.draw[_n];Nn&&pn.set(lr.draw,"."+_n,""+Nn.append(kt,pn))}),Object.keys(Kt.uniforms).forEach(function(_n){pn.set(lr.uniforms,"["+Vt.id(_n)+"]",Kt.uniforms[_n].append(kt,pn))}),Object.keys(Kt.attributes).forEach(function(_n){var Nn=Kt.attributes[_n].append(kt,pn),sn=kt.scopeAttrib(_n);Object.keys(new Wn).forEach(function(Tn){pn.set(sn,"."+Tn,Nn[Tn])})}),Kt.scopeVAO&&pn.set(lr.vao,".targetVAO",Kt.scopeVAO.append(kt,pn));function Cn(_n){var Nn=Kt.shader[_n];Nn&&pn.set(lr.shader,"."+_n,Nn.append(kt,pn))}Cn(p),Cn(w),Object.keys(Kt.state).length>0&&(pn(ar,".dirty=true;"),pn.exit(ar,".dirty=true;")),pn("a1(",kt.shared.context,",a0,",kt.batchId,");")}function Qi(kt){if(!(typeof kt!="object"||Lt(kt))){for(var Kt=Object.keys(kt),pn=0;pn<Kt.length;++pn)if(at.isDynamic(kt[Kt[pn]]))return!0;return!1}}function ws(kt,Kt,pn){var lr=Kt.static[pn];if(!lr||!Qi(lr))return;var ar=kt.global,Cn=Object.keys(lr),_n=!1,Nn=!1,sn=!1,Tn=kt.global.def("{}");Cn.forEach(function(An){var Er=lr[An];if(at.isDynamic(Er)){typeof Er=="function"&&(Er=lr[An]=at.unbox(Er));var Ir=ku(Er,null);_n=_n||Ir.thisDep,sn=sn||Ir.propDep,Nn=Nn||Ir.contextDep}else{switch(ar(Tn,".",An,"="),typeof Er){case"number":ar(Er);break;case"string":ar('"',Er,'"');break;case"object":Array.isArray(Er)&&ar("[",Er.join(),"]");break;default:ar(kt.link(Er));break}ar(";")}});function Yt(An,Er){Cn.forEach(function(Ir){var ti=lr[Ir];if(at.isDynamic(ti)){var Hr=An.invoke(Er,ti);Er(Tn,".",Ir,"=",Hr,";")}})}Kt.dynamic[pn]=new at.DynamicVariable(cf,{thisDep:_n,contextDep:Nn,propDep:sn,ref:Tn,append:Yt}),delete Kt.static[pn]}function ga(kt,Kt,pn,lr,ar){var Cn=To();Cn.stats=Cn.link(ar),Object.keys(Kt.static).forEach(function(Nn){ws(Cn,Kt,Nn)}),ri.forEach(function(Nn){ws(Cn,kt,Nn)});var _n=ru(kt,Kt,pn,lr,Cn);return ra(Cn,_n),sr(Cn,_n),xr(Cn,_n),Cn.compile()}return{next:_i,current:Xr,procs:function(){var kt=To(),Kt=kt.proc("poll"),pn=kt.proc("refresh"),lr=kt.block();Kt(lr),pn(lr);var ar=kt.shared,Cn=ar.gl,_n=ar.next,Nn=ar.current;lr(Nn,".dirty=false;"),Ja(kt,Kt),Ja(kt,pn,null,!0);var sn;gi&&(sn=kt.link(gi)),mn.oes_vertex_array_object&&pn(kt.link(mn.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Tn=0;Tn<dr.maxAttributes;++Tn){var Yt=pn.def(ar.attributes,"[",Tn,"]"),An=kt.cond(Yt,".buffer");An.then(Cn,".enableVertexAttribArray(",Tn,");",Cn,".bindBuffer(",yn,",",Yt,".buffer.buffer);",Cn,".vertexAttribPointer(",Tn,",",Yt,".size,",Yt,".type,",Yt,".normalized,",Yt,".stride,",Yt,".offset);").else(Cn,".disableVertexAttribArray(",Tn,");",Cn,".vertexAttrib4f(",Tn,",",Yt,".x,",Yt,".y,",Yt,".z,",Yt,".w);",Yt,".buffer=null;"),pn(An),gi&&pn(sn,".vertexAttribDivisorANGLE(",Tn,",",Yt,".divisor);")}return pn(kt.shared.vao,".currentVAO=null;",kt.shared.vao,".setVAO(",kt.shared.vao,".targetVAO);"),Object.keys(zi).forEach(function(Er){var Ir=zi[Er],ti=lr.def(_n,".",Er),Hr=kt.block();Hr("if(",ti,"){",Cn,".enable(",Ir,")}else{",Cn,".disable(",Ir,")}",Nn,".",Er,"=",ti,";"),pn(Hr),Kt("if(",ti,"!==",Nn,".",Er,"){",Hr,"}")}),Object.keys(Zr).forEach(function(Er){var Ir=Zr[Er],ti=Xr[Er],Hr,ai,yo=kt.block();if(yo(Cn,".",Ir,"("),Lt(ti)){var us=ti.length;Hr=kt.global.def(_n,".",Er),ai=kt.global.def(Nn,".",Er),yo(xn(us,function(io){return Hr+"["+io+"]"}),");",xn(us,function(io){return ai+"["+io+"]="+Hr+"["+io+"];"}).join("")),Kt("if(",xn(us,function(io){return Hr+"["+io+"]!=="+ai+"["+io+"]"}).join("||"),"){",yo,"}")}else Hr=lr.def(_n,".",Er),ai=lr.def(Nn,".",Er),yo(Hr,");",Nn,".",Er,"=",Hr,";"),Kt("if(",Hr,"!==",ai,"){",yo,"}");pn(yo)}),kt.compile()}(),compile:ga}}function xl(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ld=34918,Sl=34919,lh=35007,Hl=function(et,Vt){if(!Vt.ext_disjoint_timer_query)return null;var mn=[];function dr(){return mn.pop()||Vt.ext_disjoint_timer_query.createQueryEXT()}function jr(gi){mn.push(gi)}var gr=[];function Ar(gi){var Bi=dr();Vt.ext_disjoint_timer_query.beginQueryEXT(lh,Bi),gr.push(Bi),hr(gr.length-1,gr.length,gi)}function Qr(){Vt.ext_disjoint_timer_query.endQueryEXT(lh)}function fi(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Ai=[];function hi(){return Ai.pop()||new fi}function bi(gi){Ai.push(gi)}var Ti=[];function hr(gi,Bi,Xr){var _i=hi();_i.startQueryIndex=gi,_i.endQueryIndex=Bi,_i.sum=0,_i.stats=Xr,Ti.push(_i)}var Ci=[],Wn=[];function vr(){var gi,Bi,Xr=gr.length;if(Xr!==0){Wn.length=Math.max(Wn.length,Xr+1),Ci.length=Math.max(Ci.length,Xr+1),Ci[0]=0,Wn[0]=0;var _i=0;for(gi=0,Bi=0;Bi<gr.length;++Bi){var mi=gr[Bi];Vt.ext_disjoint_timer_query.getQueryObjectEXT(mi,Sl)?(_i+=Vt.ext_disjoint_timer_query.getQueryObjectEXT(mi,ld),jr(mi)):gr[gi++]=mi,Ci[Bi+1]=_i,Wn[Bi+1]=gi}for(gr.length=gi,gi=0,Bi=0;Bi<Ti.length;++Bi){var zi=Ti[Bi],Zr=zi.startQueryIndex,Ri=zi.endQueryIndex;zi.sum+=Ci[Ri]-Ci[Zr];var Oo=Wn[Zr],Po=Wn[Ri];Po===Oo?(zi.stats.gpuTime+=zi.sum/1e6,bi(zi)):(zi.startQueryIndex=Oo,zi.endQueryIndex=Po,Ti[gi++]=zi)}Ti.length=gi}}return{beginQuery:Ar,endQuery:Qr,pushScopeStats:hr,update:vr,getNumPendingQueries:function(){return gr.length},clear:function(){mn.push.apply(mn,gr);for(var gi=0;gi<mn.length;gi++)Vt.ext_disjoint_timer_query.deleteQueryEXT(mn[gi]);gr.length=0,mn.length=0},restore:function(){gr.length=0,mn.length=0}}},fh=16384,hh=256,dh=1024,Hf=34962,Xf="webglcontextlost",gh="webglcontextrestored",Xl=1,fd=2,Lh=3;function hd(et,Vt){for(var mn=0;mn<et.length;++mn)if(et[mn]===Vt)return mn;return-1}function dd(et){var Vt=qn(et);if(!Vt)return null;var mn=Vt.gl,dr=mn.getContextAttributes(),jr=mn.isContextLost(),gr=rr(mn,Vt);if(!gr)return null;var Ar=Ze(),Qr=xl(),fi=gr.extensions,Ai=Hl(mn,fi),hi=ut(),bi=mn.drawingBufferWidth,Ti=mn.drawingBufferHeight,hr={tick:0,time:0,viewportWidth:bi,viewportHeight:Ti,framebufferWidth:bi,framebufferHeight:Ti,drawingBufferWidth:bi,drawingBufferHeight:Ti,pixelRatio:Vt.pixelRatio},Ci={},Wn={elements:null,primitive:4,count:-1,offset:0,instances:-1},vr=nt(mn,fi),gi=Ji(mn,Qr,Vt,Xr),Bi=dl(mn,fi,vr,Qr,gi);function Xr(Ao){return Bi.destroyBuffer(Ao)}var _i=Se(mn,fi,gi,Qr),mi=od(mn,Ar,Qr,Vt),zi=Ph(mn,fi,vr,function(){Oo.procs.poll()},hr,Qr,Vt),Zr=_f(mn,fi,vr,Qr,Vt),Ri=Nh(mn,fi,vr,zi,Zr,Qr),Oo=$c(mn,Ar,fi,vr,gi,_i,zi,Ri,Ci,Bi,mi,Wn,hr,Ai,Vt),Po=Mc(mn,Ri,Oo.procs.poll,hr,dr,fi,vr),ji=Oo.next,pi=mn.canvas,Gr=[],To=[],ms=[],xo=[Vt.onDestroy],as=null;function es(){if(Gr.length===0){Ai&&Ai.update(),as=null;return}as=ce.next(es),xu();for(var Ao=Gr.length-1;Ao>=0;--Ao){var ns=Gr[Ao];ns&&ns(hr,null,0)}mn.flush(),Ai&&Ai.update()}function ps(){!as&&Gr.length>0&&(as=ce.next(es))}function gs(){as&&(ce.cancel(es),as=null)}function Ca(Ao){Ao.preventDefault(),jr=!0,gs(),To.forEach(function(ns){ns()})}function cu(Ao){mn.getError(),jr=!1,gr.restore(),mi.restore(),gi.restore(),zi.restore(),Zr.restore(),Ri.restore(),Bi.restore(),Ai&&Ai.restore(),Oo.procs.refresh(),ps(),ms.forEach(function(ns){ns()})}pi&&(pi.addEventListener(Xf,Ca,!1),pi.addEventListener(gh,cu,!1));function Ps(){Gr.length=0,gs(),pi&&(pi.removeEventListener(Xf,Ca),pi.removeEventListener(gh,cu)),mi.clear(),Ri.clear(),Zr.clear(),zi.clear(),_i.clear(),gi.clear(),Bi.clear(),Ai&&Ai.clear(),xo.forEach(function(Ao){Ao()})}function nu(Ao){Ot(!!Ao,"invalid args to regl({...})"),Ot.type(Ao,"object","invalid args to regl({...})");function ns(ar){var Cn=V({},ar);delete Cn.uniforms,delete Cn.attributes,delete Cn.context,delete Cn.vao,"stencil"in Cn&&Cn.stencil.op&&(Cn.stencil.opBack=Cn.stencil.opFront=Cn.stencil.op,delete Cn.stencil.op);function _n(Nn){if(Nn in Cn){var sn=Cn[Nn];delete Cn[Nn],Object.keys(sn).forEach(function(Tn){Cn[Nn+"."+Tn]=sn[Tn]})}}return _n("blend"),_n("depth"),_n("cull"),_n("stencil"),_n("polygonOffset"),_n("scissor"),_n("sample"),"vao"in ar&&(Cn.vao=ar.vao),Cn}function bs(ar){var Cn={},_n={};return Object.keys(ar).forEach(function(Nn){var sn=ar[Nn];at.isDynamic(sn)?_n[Nn]=at.unbox(sn,Nn):Cn[Nn]=sn}),{dynamic:_n,static:Cn}}var ra=bs(Ao.context||{}),Gu=bs(Ao.uniforms||{}),rn=bs(Ao.attributes||{}),xr=bs(ns(Ao)),sr={gpuTime:0,cpuTime:0,count:0},Qi=Oo.compile(xr,rn,Gu,ra,sr),ws=Qi.draw,ga=Qi.batch,kt=Qi.scope,Kt=[];function pn(ar){for(;Kt.length<ar;)Kt.push(null);return Kt}function lr(ar,Cn){var _n;if(jr&&Ot.raise("context lost"),typeof ar=="function")return kt.call(this,null,ar,0);if(typeof Cn=="function")if(typeof ar=="number")for(_n=0;_n<ar;++_n)kt.call(this,null,Cn,_n);else if(Array.isArray(ar))for(_n=0;_n<ar.length;++_n)kt.call(this,ar[_n],Cn,_n);else return kt.call(this,ar,Cn,0);else if(typeof ar=="number"){if(ar>0)return ga.call(this,pn(ar|0),ar|0)}else if(Array.isArray(ar)){if(ar.length)return ga.call(this,ar,ar.length)}else return ws.call(this,ar)}return V(lr,{stats:sr})}var wa=Ri.setFBO=nu({framebuffer:at.define.call(null,Xl,"framebuffer")});function ru(Ao,ns){var bs=0;Oo.procs.poll();var ra=ns.color;ra&&(mn.clearColor(+ra[0]||0,+ra[1]||0,+ra[2]||0,+ra[3]||0),bs|=fh),"depth"in ns&&(mn.clearDepth(+ns.depth),bs|=hh),"stencil"in ns&&(mn.clearStencil(ns.stencil|0),bs|=dh),Ot(!!bs,"called regl.clear with no buffer specified"),mn.clear(bs)}function iu(Ao){if(Ot(typeof Ao=="object"&&Ao,"regl.clear() takes an object as input"),"framebuffer"in Ao)if(Ao.framebuffer&&Ao.framebuffer_reglType==="framebufferCube")for(var ns=0;ns<6;++ns)wa(V({framebuffer:Ao.framebuffer.faces[ns]},Ao),ru);else wa(Ao,ru);else ru(null,Ao)}function Ja(Ao){Ot.type(Ao,"function","regl.frame() callback must be a function"),Gr.push(Ao);function ns(){var bs=hd(Gr,Ao);Ot(bs>=0,"cannot cancel a frame twice");function ra(){var Gu=hd(Gr,ra);Gr[Gu]=Gr[Gr.length-1],Gr.length-=1,Gr.length<=0&&gs()}Gr[bs]=ra}return ps(),{cancel:ns}}function pu(){var Ao=ji.viewport,ns=ji.scissor_box;Ao[0]=Ao[1]=ns[0]=ns[1]=0,hr.viewportWidth=hr.framebufferWidth=hr.drawingBufferWidth=Ao[2]=ns[2]=mn.drawingBufferWidth,hr.viewportHeight=hr.framebufferHeight=hr.drawingBufferHeight=Ao[3]=ns[3]=mn.drawingBufferHeight}function xu(){hr.tick+=1,hr.time=ts(),pu(),Oo.procs.poll()}function ou(){pu(),Oo.procs.refresh(),Ai&&Ai.update()}function ts(){return(ut()-hi)/1e3}ou();function lu(Ao,ns){Ot.type(ns,"function","listener callback must be a function");var bs;switch(Ao){case"frame":return Ja(ns);case"lost":bs=To;break;case"restore":bs=ms;break;case"destroy":bs=xo;break;default:Ot.raise("invalid event, must be one of frame,lost,restore,destroy")}return bs.push(ns),{cancel:function(){for(var ra=0;ra<bs.length;++ra)if(bs[ra]===ns){bs[ra]=bs[bs.length-1],bs.pop();return}}}}var Hs=V(nu,{clear:iu,prop:at.define.bind(null,Xl),context:at.define.bind(null,fd),this:at.define.bind(null,Lh),draw:nu({}),buffer:function(Ao){return gi.create(Ao,Hf,!1,!1)},elements:function(Ao){return _i.create(Ao,!1)},texture:zi.create2D,cube:zi.createCube,renderbuffer:Zr.create,framebuffer:Ri.create,framebufferCube:Ri.createCube,vao:Bi.createVAO,attributes:dr,frame:Ja,on:lu,limits:vr,hasExtension:function(Ao){return vr.extensions.indexOf(Ao.toLowerCase())>=0},read:Po,destroy:Ps,_gl:mn,_refresh:ou,poll:function(){xu(),Ai&&Ai.update()},now:ts,stats:Qr});return Vt.onDone(null,Hs),Hs}return dd})},97235:function(bt){function O(V,J){if(J.has(V))throw new TypeError("Cannot initialize the same private elements twice on an object")}bt.exports=O,bt.exports.__esModule=!0,bt.exports.default=bt.exports},28771:function(bt){function O(V,J){return J.get?J.get.call(V):J.value}bt.exports=O,bt.exports.__esModule=!0,bt.exports.default=bt.exports},40008:function(bt){function O(V,J,ie){if(J.set)J.set.call(V,ie);else{if(!J.writable)throw new TypeError("attempted to set read only private field");J.value=ie}}bt.exports=O,bt.exports.__esModule=!0,bt.exports.default=bt.exports},56194:function(bt){function O(V,J,ie){if(!J.has(V))throw new TypeError("attempted to "+ie+" private field on non-instance");return J.get(V)}bt.exports=O,bt.exports.__esModule=!0,bt.exports.default=bt.exports},98637:function(bt,O,V){var J=V(28771),ie=V(56194);function T(b,u){var a=ie(b,u,"get");return J(b,a)}bt.exports=T,bt.exports.__esModule=!0,bt.exports.default=bt.exports},29777:function(bt,O,V){var J=V(97235);function ie(T,b,u){J(T,b),b.set(T,u)}bt.exports=ie,bt.exports.__esModule=!0,bt.exports.default=bt.exports},25457:function(bt,O,V){var J=V(40008),ie=V(56194);function T(b,u,a){var o=ie(b,u,"set");return J(b,o,a),a}bt.exports=T,bt.exports.__esModule=!0,bt.exports.default=bt.exports},74978:function(bt){function O(V,J,ie){if(!J.has(V))throw new TypeError("attempted to get private field on non-instance");return ie}bt.exports=O,bt.exports.__esModule=!0,bt.exports.default=bt.exports},80363:function(bt,O,V){var J=V(97235);function ie(T,b){J(T,b),b.add(T)}bt.exports=ie,bt.exports.__esModule=!0,bt.exports.default=bt.exports}}]);
}());