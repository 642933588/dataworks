"use strict";(self.webpackChunkdinky_web=self.webpackChunkdinky_web||[]).push([[7764],{68166:function(S,I,e){var o=e(96012),t=e(85893),d=function(p){var s=p.children,h=(0,o.q_)({opacity:1,from:{opacity:0},config:{duration:100}});return(0,t.jsx)(o.q.h1,{style:h,children:s})};I.Z=d},28712:function(S,I,e){e.d(I,{m:function(){return s}});var o=e(41913),t=e(65987),d=e(14726),n=e(67294),p=e(85893),s=function(m){var i=m.onClick,E=m.disabled,D=E===void 0?!1:E;return(0,p.jsx)(d.ZP,{className:"options-button",icon:(0,p.jsx)(t.Z,{}),disabled:D,title:(0,o.l)("button.edit"),onClick:function(){return i()}})}},95423:function(S,I,e){e.d(I,{t:function(){return m}});var o=e(97857),t=e.n(o),d=e(79935),n=e(42075),p=e(72269),s=e(67294),h=e(85893),m=function(E){var D=E.record,R=E.onChange,M=E.disabled,C=M===void 0?!1:M;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(n.Z,{className:"hidden-overflow",children:(0,h.jsx)(p.Z,t()(t()({},(0,d.uP)()),{},{checked:D.enabled,disabled:C,onChange:function(){return R()}}))})})}},47540:function(S,I,e){e.d(I,{E:function(){return s}});var o=e(58461),t=e(41913),d=e(14726),n=e(67294),p=e(85893),s=function(m){var i=m.onClick;return(0,p.jsx)(d.ZP,{className:"options-button",icon:(0,p.jsx)(o.M3,{}),title:(0,t.l)("button.delete"),onClick:function(){return i()}})}},39149:function(S,I,e){e.d(I,{Fu:function(){return a},HL:function(){return B},Td:function(){return K},Y2:function(){return F},Z1:function(){return U},nh:function(){return x},vE:function(){return C}});var o=e(68400),t=e.n(o),d=e(9361),n=e(97653),p,s,h,m,i,E,D,R=d.Z.getDesignToken,M=R(),C=n.ZP.div(p||(p=t()([`
  display: flex !important;
  justify-content: space-between;
  margin-left: 2vw;
  margin-right: 2vw;
`]))),B=n.ZP.div(s||(s=t()([`
  display: flex !important;
  justify-content: flex-end;
`]))),F=n.ZP.div(h||(h=t()([`
  height: 80vh;
  overflow: auto;
`]))),x=n.ZP.div(m||(m=t()([`
  position: absolute;
  color: #1890ff;
  font-size: large;
  z-index: 2;
  top: 50%;
`]))),a=n.ZP.div(i||(i=t()([`
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
`]))),K=n.ZP.div(E||(E=t()([`
  display: flex;
  height: 100%;
  justify-content: left;
  align-items: center;
`]))),U=n.ZP.div(D||(D=t()([`
  display: flex;
  height: 100%;
  justify-content: left;
  align-items: center;
`])))},99490:function(S,I,e){e.r(I),e.d(I,{default:function(){return Se}});var o=e(15009),t=e.n(o),d=e(97857),n=e.n(d),p=e(99289),s=e.n(p),h=e(5574),m=e.n(h),i=e(68166),E=e(28712),D=e(95423),R=e(47540),M=e(39149),C=e(49881),B=e(19632),F=e.n(B),x=e(66309),a=e(85893),K=function(c){var O=[];return c&&c.alertInstanceIds&&c.alertInstanceIds!==""&&(O=c.alertInstanceIds.split(",")),n()(n()({},c),{},{alertInstanceIds:O})},U=function(c,O){var T=c;return O.alertInstanceIds&&(T.alertInstanceIds=O.alertInstanceIds.join(","),delete O.alertInstanceIds),n()(n()({},T),O)},Q=function(c){return c.map(function(O){var T=(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(x.Z,{color:"processing",children:O.type}),O.name]});return{label:T,value:O.id.toString()}})},V=e(79935),v=e(41913),ue=e(5966),de=e(64317),ce=e(90672),fe=e(52688),ve=e(37476),se=e(57344),me=e(18922),q=e(14726),X=e(67294),pe=function(c){var O=c.onSubmit,T=c.onCancel,P=c.modalVisible,y=c.alertInstance,ee=c.values,W=me.Z.useForm(),N=m()(W,1),Y=N[0],ne=(0,X.useState)(n()({},ee)),G=m()(ne,2),L=G[0],te=G[1],ae=function(){var b=s()(t()().mark(function Z(){var u;return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Y.validateFields();case 2:u=l.sent,te(U(L,u)),O(U(L,u));case 5:case"end":return l.stop()}},Z)}));return function(){return b.apply(this,arguments)}}(),re=function(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ue.Z,{name:"name",label:(0,v.l)("rc.ag.name"),rules:[{required:!0,message:(0,v.l)("rc.ag.inputName")}],placeholder:(0,v.l)("rc.ag.inputName")}),(0,a.jsx)(de.Z,{name:"alertInstanceIds",label:(0,v.l)("rc.ag.alertInstanceIds"),rules:[{required:!0,message:(0,v.l)("rc.ag.chooseAlertInstanceIds")}],mode:"multiple",options:Q(y!=null?y:[])}),(0,a.jsx)(ce.Z,{name:"note",label:(0,v.l)("global.table.note"),placeholder:(0,v.l)("global.table.notePlaceholder")}),(0,a.jsx)(fe.Z,n()({name:"enabled",label:(0,v.l)("global.table.isEnable")},(0,V.uP)()))]})},le=function(){return[(0,a.jsx)(q.ZP,{onClick:function(){return T(!1)},children:(0,v.l)("button.cancel")},"GroupCancel"),(0,a.jsx)(q.ZP,{type:"primary",htmlType:"submit",autoFocus:!0,onClick:function(){return ae()},children:(0,v.l)("button.finish")},"GroupFinish")]};return(0,a.jsx)(ve.Y,n()(n()({title:L.id?(0,v.l)("rc.ag.modify"):(0,v.l)("rc.ag.create"),open:P},V.q6),{},{form:Y,initialValues:K(L),submitter:{render:function(){return F()(le())}},modalProps:{destroyOnClose:!0,onCancel:function(){return T(!1)}},children:re()}))},ie=(0,se.connect)(function(_){var c=_.Alert;return{alertInstance:c.instance}})(pe),he=e(13838),Ee=e(27227),H=e(21953),w=e(58023),z=e(81029),Ie=e(57900),Oe=e(36317),ge=e(24969),Ae=e(89359),Pe=e(11774),De=e(85576),Ce=e(35653),Te=e(42075),oe=e(11198),ye=e(83062),je=function(c){var O=(0,X.useState)(Oe.ql),T=m()(O,2),P=T[0],y=T[1],ee=(0,X.useRef)(),W=function(){var u=s()(t()().mark(function r(){var l,j=arguments;return t()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:l=j.length>0&&j[0]!==void 0?j[0]:"",(0,H.Ri)(w.Z.ALERT_GROUP,{keyword:l}).then(function($){return y(function(A){return n()(n()({},A),{},{alertGroupList:$})})});case 2:case"end":return g.stop()}},r)}));return function(){return u.apply(this,arguments)}}();(0,X.useEffect)(function(){W(),c.queryInstance()},[P.loading]);var N=function(){var u=s()(t()().mark(function r(l){return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return y(function(g){return n()(n()({},g),{},{loading:!0})}),f.next=3,l();case 3:return f.next=5,W();case 5:y(function(g){return n()(n()({},g),{},{loading:!1})});case 6:case"end":return f.stop()}},r)}));return function(l){return u.apply(this,arguments)}}(),Y=function(){var u=s()(t()().mark(function r(l){return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:De.Z.confirm({title:(0,v.l)("rc.ag.delete"),content:(0,v.l)("rc.ag.deleteConfirm"),okText:(0,v.l)("button.confirm"),cancelText:(0,v.l)("button.cancel"),onOk:function(){var g=s()(t()().mark(function A(){return t()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",N(s()(t()().mark(function Me(){return t()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,H.m0)(w.Z.ALERT_GROUP_DELETE,l));case 1:case"end":return J.stop()}},Me)}))));case 1:case"end":return k.stop()}},A)}));function $(){return g.apply(this,arguments)}return $}()});case 1:case"end":return f.stop()}},r)}));return function(l){return u.apply(this,arguments)}}(),ne=function(){var u=s()(t()().mark(function r(l){return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,N(s()(t()().mark(function g(){return t()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,H.Q$)(w.Z.ALERT_GROUP_ENABLE,{id:l.id}));case 1:case"end":return A.stop()}},g)})));case 2:case"end":return f.stop()}},r)}));return function(l){return u.apply(this,arguments)}}(),G=function(){y(function(r){return n()(n()({},r),{},{value:{},addedOpen:!1,editOpen:!1})})},L=function(){var u=s()(t()().mark(function r(l){return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,N(s()(t()().mark(function g(){return t()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,H.On)(w.Z.ALERT_GROUP_ADD_OR_UPDATE,l,function(){},function(){return G()}));case 1:case"end":return A.stop()}},g)})));case 2:case"end":return f.stop()}},r)}));return function(l){return u.apply(this,arguments)}}(),te=function(){return function(){return[(0,a.jsx)(Ce.Z.Search,{loading:P.loading,allowClear:!0,placeholder:(0,v.l)("rc.ag.search"),onSearch:function(l){return W(l)}},"_search"),(0,a.jsx)(C.FY,{path:z.k5.REGISTRATION_ALERT_GROUP_ADD,children:(0,a.jsxs)(q.ZP,{type:"primary",onClick:function(){return y(function(l){return n()(n()({},l),{},{addedOpen:!0})})},children:[(0,a.jsx)(ge.Z,{})," ",(0,v.l)("button.create")]},"CreateAlertGroup")},"create")]}},ae=function(r){y(function(l){return n()(n()({},l),{},{editOpen:!l.editOpen,value:r})})},re=function(r){return[(0,a.jsx)(C.FY,{path:z.k5.REGISTRATION_ALERT_GROUP_EDIT,children:(0,a.jsx)(E.m,{onClick:function(){return ae(r)}},"".concat(r.id,"_edit"))},"".concat(r.id,"_auth_edit")),(0,a.jsx)(C.FY,{path:z.k5.REGISTRATION_ALERT_GROUP_DELETE,children:(0,a.jsx)(R.E,{onClick:function(){return Y(r.id)}},"".concat(r.id,"_delete"))},"".concat(r.id,"_auth_delete"))]},le=function(r){var l,j=(l=r.alertInstanceIds.split(",").length)!==null&&l!==void 0?l:0;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Te.Z,{className:"hidden-overflow",children:[(0,a.jsx)(D.t,{disabled:!(0,C.ux)(z.k5.REGISTRATION_ALERT_GROUP_EDIT),record:r,onChange:function(){return ne(r)}},"".concat(r.id,"_enable")),(0,a.jsx)(x.Z,{color:"warning",children:(0,v.l)("rc.ag.alertCount","",{count:j})})]})})},b=function(r){return(0,a.jsx)(oe.Z,{size:"small",layout:"vertical",column:1,children:(0,a.jsx)(oe.Z.Item,{className:"hidden-overflow",children:(0,a.jsx)(ye.Z,{title:r.name,children:(0,a.jsx)(x.Z,{color:"success",children:r.name})},r.id)},r.id)})},Z=P.alertGroupList.map(function(u){return{subTitle:b(u),actions:(0,a.jsx)(M.vE,{children:re(u)}),avatar:(0,he.y)(Ie.X.GROUP,60),content:le(u)}});return(0,a.jsx)(i.Z,{children:(0,a.jsxs)(Pe._z,{title:!1,children:[(0,a.jsx)(Ae.Rs,n()(n()(n()({},V.xc),V.qX),{},{actionRef:ee,loading:P.loading,headerTitle:(0,v.l)("rc.ag.management"),toolBarRender:te(),dataSource:Z})),(0,a.jsx)(ie,{onSubmit:L,onCancel:G,modalVisible:P.addedOpen,values:{}}),P.value&&Object.keys(P.value).length>0&&(0,a.jsx)(ie,{onSubmit:L,onCancel:G,modalVisible:P.editOpen,values:P.value})]})})},Re=function(c){return{queryInstance:function(){return c({type:Ee.e1.queryInstance,payload:{}})}}},Se=(0,se.connect)(function(){return{}},Re)(je)},13838:function(S,I,e){e.d(I,{n:function(){return s},y:function(){return p}});var o=e(37500),t=e(72174),d=e(57900),n=e(85893),p=function(m,i){switch(m){case d.X.DINGTALK:return(0,n.jsx)(o.Em,{size:i});case d.X.WECHAT:return(0,n.jsx)(o.vN,{size:i});case d.X.FEISHU:return(0,n.jsx)(o.oE,{size:i});case d.X.SMS:return(0,n.jsx)(o.Jz,{size:i});case d.X.EMAIL:return(0,n.jsx)(o.$r,{size:i});case d.X.HTTP:return(0,n.jsx)(o.Dx,{size:i});case d.X.GROUP:return(0,n.jsx)(o.yu,{size:i});default:return(0,n.jsx)(o.v9,{size:i})}},s=function(m){var i;return((i=t.vV.find(function(E){return E.value===m}))===null||i===void 0?void 0:i.key)||""}},36317:function(S,I,e){e.d(I,{Ih:function(){return U},JB:function(){return R},Lc:function(){return C},Ln:function(){return B},RB:function(){return D},TH:function(){return Q},_W:function(){return K},_X:function(){return F},er:function(){return E},m4:function(){return a},qI:function(){return M},ql:function(){return n},sh:function(){return x}});var o=e(72174),t=e(57900),d=e(3259),n={alertGroupList:[],loading:!1,addedOpen:!1,editOpen:!1,value:{}},p={webhook:void 0,keyword:void 0,secret:void 0,isEnableProxy:!1,isAtAll:!1,atMobiles:[""],proxy:void 0,port:void 0,user:void 0,password:void 0},s={webhook:void 0,keyword:void 0,secret:void 0,isEnableProxy:!1,isAtAll:!1,users:[""],proxy:void 0,port:void 0,user:void 0,password:void 0},h={serverHost:void 0,serverPort:void 0,sender:void 0,receivers:[""],receiverCcs:[""],enableSmtpAuth:!1,starttlsEnable:!1,sslEnable:!1,smtpSslTrust:void 0,user:void 0,password:void 0},m={sendType:"wechat",isAtAll:!1,webhook:void 0,keyword:void 0,users:void 0,corpId:void 0,secret:void 0,agentId:void 0},i={suppliers:o.Ic.ALIBABA,accessKeyId:void 0,sdkAppId:void 0,accessKeySecret:void 0,signature:void 0,templateId:void 0,configId:(0,d.Zo)(32),weight:1,retryInterval:5,maxRetries:3,phoneNumbers:[""]},E={id:void 0,name:void 0,type:t.X.DINGTALK,params:p||s||h||m||i,enabled:!0,createTime:void 0,updateTime:void 0},D={alertInstanceList:[],loading:!1,addedOpen:!1,editOpen:!1,value:E},R={alertTemplateList:[],loading:!1,addedOpen:!1,editOpen:!1,value:{}},M={loading:!1,addedOpen:!1,editOpen:!1,value:{},configList:[]},C={loading:!1,addedOpen:!1,editOpen:!1,value:{},instanceList:[]},B={loading:!1,addedOpen:!1,editOpen:!1,value:{},drawerOpen:!1},F={loading:!1,addedOpen:!1,editOpen:!1,value:{},logOpen:!1,codeTreeOpen:!1,buildOpen:!1},x={logRecord:"",currentStep:0,showListOpen:!1,percent:0,steps:[]},a={loading:!1,addedOpen:!1,editOpen:!1,value:{},drawerOpen:!1},K={treeData:[],content:"",clickedNode:{},rightClickedNode:{},contextMenuOpen:!1,contextMenuPosition:{top:0,left:0},selectedKeys:[],editOpen:!1,editContent:"",uploadOpen:!1,value:{}},U={loading:!1,addedOpen:!1,editOpen:!1,value:{},drawerOpen:!1},Q={loading:!1,addedOpen:!1,editOpen:!1,value:{},isDetailPage:!1}}}]);
