"use strict";(self.webpackChunkdinky_web=self.webpackChunkdinky_web||[]).push([[7996],{68166:function(ne,D,t){var L=t(96012),R=t(85893),o=function(s){var N=s.children,h=(0,L.q_)({opacity:1,from:{opacity:0},config:{duration:100}});return(0,R.jsx)(L.q.h1,{style:h,children:N})};D.Z=o},60982:function(ne,D,t){t.d(D,{q:function(){return N}});var L=t(41913),R=t(24969),o=t(14726),F=t(67294),s=t(85893),N=function(O){var g=O.onClick;return(0,s.jsxs)(o.ZP,{type:"primary",onClick:g,children:[(0,s.jsx)(R.Z,{}),(0,L.l)("button.create")]})}},28712:function(ne,D,t){t.d(D,{m:function(){return N}});var L=t(41913),R=t(65987),o=t(14726),F=t(67294),s=t(85893),N=function(O){var g=O.onClick,M=O.disabled,A=M===void 0?!1:M;return(0,s.jsx)(o.ZP,{className:"options-button",icon:(0,s.jsx)(R.Z,{}),disabled:A,title:(0,L.l)("button.edit"),onClick:function(){return g()}})}},95423:function(ne,D,t){t.d(D,{t:function(){return O}});var L=t(97857),R=t.n(L),o=t(79935),F=t(42075),s=t(72269),N=t(67294),h=t(85893),O=function(M){var A=M.record,X=M.onChange,q=M.disabled,ee=q===void 0?!1:q;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(F.Z,{className:"hidden-overflow",children:(0,h.jsx)(s.Z,R()(R()({},(0,o.uP)()),{},{checked:A.enabled,disabled:ee,onChange:function(){return X()}}))})})}},63167:function(ne,D,t){t.d(D,{i:function(){return g}});var L=t(97857),R=t.n(L),o=t(58461),F=t(41913),s=t(86738),N=t(14726),h=t(67294),O=t(85893),g=function(A){var X=A.onClick,q=A.description,ee=A.disabled,re=ee===void 0?!1:ee,z=A.buttonIcon,Y=A.title,H=A.options;return(0,O.jsx)("span",{onClick:function(e){return e.stopPropagation()},children:(0,O.jsx)(s.Z,{placement:"topRight",title:Y!=null?Y:(0,F.l)("button.delete"),description:(0,O.jsxs)("div",{className:"needWrap",children:[q," "]}),onConfirm:X,disabled:re,okText:(0,F.l)("button.confirm"),cancelText:(0,F.l)("button.cancel"),children:(0,h.createElement)(N.ZP,R()(R()({},H),{},{title:Y!=null?Y:(0,F.l)("button.delete"),key:"DeleteIcon",disabled:re,htmlType:"submit",autoFocus:!0,icon:z!=null?z:(0,O.jsx)(o.M3,{})}))})})}},56980:function(ne,D,t){t.d(D,{G:function(){return N}});var L=t(58461),R=t(41913),o=t(14726),F=t(67294),s=t(85893),N=function(O){var g=O.onClick,M=O.disabled,A=M===void 0?!1:M;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.ZP,{className:"options-button",title:(0,R.l)("button.showLog"),disabled:A,icon:(0,s.jsx)(L.lW,{}),onClick:function(){return g()}})})}},48337:function(ne,D,t){t.r(D),t.d(D,{default:function(){return Vt}});var L=t(68166),R=t(15009),o=t.n(R),F=t(97857),s=t.n(F),N=t(99289),h=t.n(N),O=t(5574),g=t.n(O),M=t(60982),A=t(28712),X=t(95423),q=t(63167),ee=t(56980),re=t(58461),z=t(49881),Y=t(67939),H=t(21953),_=t(58023),e=t(41913),Te=t(89359),De=t(33734),Ce=t(66309),Ye=t(2487),m=t(67294),n=t(85893),Xe=function(u){var i=u.jarAndClassesList,f=u.projectId,v=(0,m.useRef)(),T=(0,m.useState)(!1),C=g()(T,2),j=C[0],Z=C[1],x=(0,m.useState)(),U=g()(x,2),W=U[0],I=U[1];(0,m.useEffect)(function(){I(i)},[i]);var y=[{title:(0,e.l)("rc.gp.level"),dataIndex:"orderLine",tooltip:(0,e.l)("rc.gp.ucl.orderLine.tooltip"),copyable:!0,render:function(E,S){return(0,n.jsx)(Ce.Z,{style:{marginLeft:10},color:S.orderLine>3?"default":"success",children:"No.".concat(S.orderLine)})}},{dataIndex:"index",valueType:"indexBorder"},{title:(0,e.l)("rc.gp.ucl.jarPath"),dataIndex:"jarPath",copyable:!0}],k=function(E){return(0,n.jsx)(Te.Rs,{dataSource:E.classList,rowKey:"index",size:"small",pagination:{pageSize:5,hideOnSinglePage:!0,showSizeChanger:!1},renderItem:function(l,a){return(0,n.jsx)(Ye.Z.Item,{className:"child-list",children:l},a)}})},B=function(){var w=h()(o()().mark(function E(S){var l,a;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return Z(!0),a=S.map(function(c,p){return s()(s()({},c),{},{orderLine:p+1})}),d.next=4,(0,H.vO)(_.Z.GIT_DRAGEND_SORT_JAR,(0,e.l)("rc.gp.ucl.jarOrder"),{projectId:f,jars:a});case 4:I(a),Z(!1),(l=v.current)===null||l===void 0||l.reload();case 7:case"end":return d.stop()}},E)}));return function(S){return w.apply(this,arguments)}}();return(0,n.jsx)(De.Z,{style:{overflowY:"auto",msOverflowY:"hidden",marginLeft:"0.5vw"},columns:y,toolBarRender:!1,sortDirections:["ascend"],showHeader:!1,actionRef:v,loading:j,dataSource:W,search:!1,rowKey:"orderLine",revalidateOnFocus:!0,pagination:{defaultPageSize:5,hideOnSinglePage:!0},expandable:{expandRowByClick:!1,expandedRowRender:function(E){return k(E)}},dragSortKey:"orderLine",onDragSortEnd:function(E,S,l){return B(l)}})},Le=Xe,Qe=function(u){var i=u.data,f=u.value,v=m.useState([]),T=g()(v,2),C=T[0],j=T[1];return(0,m.useEffect)(function(){j(i)},[i,f]),(0,n.jsx)("div",{style:{height:"50vh",overflowY:"auto"},children:(0,n.jsx)(Le,{projectId:f.id,jarAndClassesList:C})})},qe=Qe,be={1:{text:"Java"},2:{text:"Python"}},et=[{value:1,text:"Java"},{value:2,text:"Python"}],tt={1:{text:"HTTP/HTTPS"},2:{text:"SSH"}},nt=[{text:"HTTP/HTTPS",value:1},{text:"SSH",value:2}],rt={0:{title:(0,e.l)("rc.gp.notBuild"),text:(0,e.l)("rc.gp.notBuild"),status:"default"},1:{title:(0,e.l)("rc.gp.building"),text:(0,e.l)("rc.gp.building"),status:"processing"},2:{title:(0,e.l)("rc.gp.buildFail"),text:(0,e.l)("rc.gp.buildFail"),status:"error"},3:{title:(0,e.l)("rc.gp.buildSuccess"),text:(0,e.l)("rc.gp.buildSuccess"),status:"success"}},at=[{value:0,status:"default",text:(0,e.l)("rc.gp.notBuild")},{value:1,status:"processing",text:(0,e.l)("rc.gp.building")},{value:2,status:"error",text:(0,e.l)("rc.gp.buildFail")},{value:3,status:"success",text:(0,e.l)("rc.gp.buildSuccess")}],lt=[{label:"http/https",value:1},{label:"ssh",value:2}],st=function(u){return u.includes("dev")?"processing":u.includes("test")?"warning":u.includes("release")||u.includes("master")||u.includes("main")?"success":"default"},Ae={0:{title:(0,e.l)("rc.gp.build.step.0"),text:(0,e.l)("rc.gp.build.step.0"),status:"default"},1:{title:(0,e.l)("rc.gp.build.step.1"),text:(0,e.l)("rc.gp.build.step.1"),status:"default"}},it=s()(s()({},Ae),{},{2:{title:(0,e.l)("rc.gp.build.step.2"),text:(0,e.l)("rc.gp.build.step.2"),status:"processing"},3:{title:(0,e.l)("rc.gp.build.step.3"),text:(0,e.l)("rc.gp.build.step.3"),status:"error"},4:{title:(0,e.l)("rc.gp.build.step.4"),text:(0,e.l)("rc.gp.build.step.4"),status:"success"},5:{title:(0,e.l)("rc.gp.build.step.5"),text:(0,e.l)("rc.gp.build.step.5"),status:"success"},6:{title:(0,e.l)("rc.gp.build.step.6"),text:(0,e.l)("rc.gp.build.step.6"),status:"success"}}),ut=s()(s()({},Ae),{},{2:{title:(0,e.l)("rc.gp.build.step.2"),text:(0,e.l)("rc.gp.build.step.2"),status:"processing"},3:{title:(0,e.l)("rc.gp.build.step.4"),text:(0,e.l)("rc.gp.build.step.4"),status:"success"},4:{title:(0,e.l)("rc.gp.build.step.5"),text:(0,e.l)("rc.gp.build.step.5"),status:"success"},5:{title:(0,e.l)("rc.gp.build.step.6"),text:(0,e.l)("rc.gp.build.step.6"),status:"success"}}),nn=[{value:0,status:"default",text:(0,e.l)("rc.gp.build.step.0")},{value:1,status:"default",text:(0,e.l)("rc.gp.build.step.1")},{value:2,status:"processing",text:(0,e.l)("rc.gp.build.step.2")},{value:3,status:"error",text:(0,e.l)("rc.gp.build.step.3")},{value:4,status:"success",text:(0,e.l)("rc.gp.build.step.4")},{value:5,status:"success",text:(0,e.l)("rc.gp.build.step.5")},{value:6,status:"success",text:(0,e.l)("rc.gp.build.step.6")}],ot={"0%":"#8ac1ea","20%":"#99e5d0","40%":"#9ae77b","60%":"#59b732","80%":"#47d50a","100%":"#01ad31"},dt=t(9361),ct=t(42119),ft=t(38703),pt={height:"50vh",language:"javalog",lineNumbers:"on",showFloatButton:!0},vt=function(u){var i=u.values,f=u.steps,v=u.percent,T=u.currentStep,C=u.log,j=u.showList,Z=dt.Z.useToken(),x=Z.token,U={color:x.colorTextTertiary,backgroundColor:x.colorFillAlter,borderRadius:x.borderRadiusLG,border:"1px dashed ".concat(x.colorBorder),marginTop:16};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ct.Z,{initial:0,type:"navigation",status:"wait",size:"small",onChange:function(I){return I},current:T-1,items:f,percent:v}),(0,n.jsx)(ft.Z,{percent:v,strokeColor:ot}),(0,n.jsx)("div",{style:U,children:j?(0,n.jsx)(qe,{value:i,data:C}):(0,n.jsx)(Y.Z,s()({code:C||"",options:{scrollBeyondLastLine:!0}},pt))})]})},rn={1:{1:(0,e.l)("rc.gp.build.step.1"),2:(0,e.l)("rc.gp.build.step.2"),3:(0,e.l)("rc.gp.build.step.3"),4:(0,e.l)("rc.gp.build.step.4"),5:(0,e.l)("rc.gp.build.step.5"),6:(0,e.l)("rc.gp.build.step.6")},2:{1:(0,e.l)("rc.gp.build.step.1"),2:(0,e.l)("rc.gp.build.step.2"),3:(0,e.l)("rc.gp.build.step.3"),4:(0,e.l)("rc.gp.build.step.4"),5:(0,e.l)("rc.gp.build.step.5"),6:(0,e.l)("rc.gp.build.step.6")}},ht=[{key:1,title:(0,e.l)("rc.gp.build.step.1"),status:"wait"},{key:2,title:(0,e.l)("rc.gp.build.step.2"),status:"wait"},{key:3,title:(0,e.l)("rc.gp.build.step.3"),status:"wait"},{key:4,title:(0,e.l)("rc.gp.build.step.4"),status:"wait"},{key:5,title:(0,e.l)("rc.gp.build.step.5"),status:"wait"},{key:6,title:(0,e.l)("rc.gp.build.step.6"),status:"wait"}],gt=[{key:1,title:(0,e.l)("rc.gp.build.step.1"),status:"process"},{key:2,title:(0,e.l)("rc.gp.build.step.2"),status:"wait"},{key:3,title:(0,e.l)("rc.gp.build.step.4"),status:"wait"},{key:4,title:(0,e.l)("rc.gp.build.step.5"),status:"wait"},{key:5,title:(0,e.l)("rc.gp.build.step.6"),status:"wait"}],Be=function(u){var i="";return u===0?i="error":u===1?i="process":u===2?i="finish":i="wait",i},Ee=t(25538),Se=t(36317),Q=t(14726),we=t(85576),Me=function(u){var i,f,v,T,C=u.onOk,j=u.onReTry,Z=u.showLog,x=Z===void 0?!1:Z,U=u.onRebuild,W=u.title,I=u.values,y=(0,m.useState)(Se.sh),k=g()(y,2),B=k[0],w=k[1],E=(0,m.useState)({}),S=g()(E,2),l=S[0],a=S[1],r=(0,m.useState)(""),d=g()(r,2),c=d[0],p=d[1],P=(0,m.useState)(0),J=g()(P,2),b=J[0],ie=J[1],$t=(0,m.useState)(!1),Fe=g()($t,2),zt=Fe[0],Ne=Fe[1],Ht=(0,m.useState)(0),Ke=g()(Ht,2),ue=Ke[0],je=Ke[1],Yt=(0,m.useState)([]),ke=g()(Yt,2),te=ke[0],Xt=ke[1],Qt=function(ae){return(I.codeType===1?ht:gt)[ae-1].title};(0,m.useEffect)(function(){I.buildStep===0&&(je(0),ie(0));var V=(0,Ee.je)(_.Z.BASE_URL+_.Z.GIT_PROJECT_BUILD_STEP_LOGS+"?id="+I.id),ae=[],Je=0,We=0,ge=1,Ve=-1,$e="",Ie=!1,ze=0;return V.onmessage=function(tn){try{var me=JSON.parse(tn.data),G=me.currentStep,pe=me.type,ve=me.data,Oe=me.status;if(ze=G,pe===0){We===1&&(l={}),We++;var He=JSON.parse(ve);ge=He.length,je(parseInt(String(100/ge*G))),ie(G),ae=He.map(function($){return{key:$.step,title:Qt($.step),status:Be($.status),description:$.startTime,disabled:!0,onClick:function(){if(Ie&&$.step<=ze){if($.step===Ve)Ne(!0),p($e);else{var Re;Ne(!1),p((Re=l[$.step])===null||Re===void 0?void 0:Re.join(`
`))}ie($.step)}}}}),Je=G,Xt(ae)}if(pe!==0){if(pe===1){if(l[G]===void 0&&(l[G]=[]),ve!==void 0){var ye;l[G].push(ve),p((ye=l[G])===null||ye===void 0?void 0:ye.join(`
`))}}else pe===2?(Ve=G,$e=JSON.parse(ve)):pe===3&&(ae[G].description=ve);if(G>=Je&&(ie(G),je(parseInt(String(100/ge*G))),ae[G-1].status=Be(Oe)),Oe===2&&G===ge||Oe===0){ae.filter(function($){return $.status!="wait"}).forEach(function($){return $.disabled=!1}),Ie=!0,V.close();return}}}catch($){Ie=!0,V.close()}},function(){V.close()}},[]);var he=function(){C()},qt=function(){j==null||j()},en=[(0,n.jsx)(Q.ZP,{type:"primary",danger:!0,hidden:!j,disabled:((i=te[b-1])===null||i===void 0?void 0:i.status)!=="error",onClick:function(){return qt()},children:(0,e.l)("button.retry")},"retry"),(0,n.jsx)(Q.ZP,{type:"dashed",hidden:x,loading:b!==te.length&&ue!==99,disabled:j&&((f=te[b-1])===null||f===void 0?void 0:f.status)==="error",onClick:function(){return U()},children:(0,e.l)("button.rebuild")},"rebuild"),(0,n.jsx)(Q.ZP,{type:"primary",hidden:!x,danger:x,onClick:function(){return he()},children:(0,e.l)("button.close")},"close"),(0,n.jsx)(Q.ZP,{type:"primary",hidden:x,htmlType:"submit",autoFocus:!0,disabled:((v=te[b-1])===null||v===void 0?void 0:v.status)==="error"&&ue!==99,loading:b!==te.length&&ue!==99,onClick:function(){return he()},children:(0,e.l)("button.finish")},"finish"),(0,n.jsx)(Q.ZP,{hidden:!(b!==te.length&&ue!==99)||x,onClick:function(){return he()},children:((T=te[b-1])===null||T===void 0?void 0:T.status)==="error"&&ue!==99?(0,e.l)("button.close"):(0,e.l)("button.daemon")},"daemon")];return(0,n.jsx)(we.Z,{title:W,width:"85%",open:!0,maskClosable:!1,destroyOnClose:!0,centered:!0,closable:!1,onCancel:function(){return he()},footer:en,children:(0,n.jsx)(vt,{steps:te,percent:ue,currentStep:b,values:I,log:c,showList:zt})})},oe=t(7646),de=t(32983),mt={width:"100%",lineNumbers:"on"},Tt=function(u){var i=u.code,f=u.current,v=function(){return(0,oe.Tz)(f.name,".")},T=function(){return(0,oe.UJ)(f.name)?(0,n.jsx)(de.Z,{className:"code-content-empty",description:(0,e.l)("rc.gp.codeTree.unSupportView")}):i===""||i===null?(0,n.jsx)(de.Z,{className:"code-content-empty",description:(0,e.l)("rc.gp.codeTree.clickShow")}):(0,n.jsx)(Y.Z,s()(s()({},s()(s()({},mt),{},{height:parent.innerHeight-320})),{},{language:v(),showFloatButton:!0,code:i}))};return(0,n.jsx)(n.Fragment,{children:T()})},Ct=function K(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return u.map(function(i){var f=i.path+(0,oe.IV)()+i.name;return i.children?{isLeaf:!i.leaf,name:i.name,parentId:i.path,icon:(0,oe.hY)(i.name,".",i.leaf),content:i.content,path:i.path,title:i.name,key:f,children:K(i.children)}:{isLeaf:!i.leaf,name:i.name,parentId:i.path,icon:(0,oe.hY)(i.name,".",i.leaf),content:i.content,path:i.path,title:i.name,key:f}})},bt=t(83832),Et=t(5075),St=Et.Z.DirectoryTree,Pt=function(u){var i=u.loading,f=u.treeData,v=u.onNodeClick;return(0,n.jsx)(n.Fragment,{children:i?(0,n.jsx)(bt.S,{}):f.length>0?(0,n.jsx)(St,{className:"siderTree treeList gitCodeTree",onSelect:function(C,j){return v(j)},treeData:Ct(f)}):(0,n.jsx)(de.Z,{className:"code-content-empty"})})},xt=t(46482),_e=t(18127),Pe=t(38345),jt=function(u){var i=u.values,f=(0,m.useRef)(null),v=(0,m.useState)([]),T=g()(v,2),C=T[0],j=T[1],Z=(0,m.useState)(!1),x=g()(Z,2),U=x[0],W=x[1],I=(0,m.useState)(""),y=g()(I,2),k=y[0],B=y[1],w=(0,m.useState)({name:"",path:"",content:"",size:0,leaf:!1,children:[]}),E=g()(w,2),S=E[0],l=E[1],a=function(){var d=h()(o()().mark(function c(){return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return W(!0),P.next=3,(0,H.Cf)(_.Z.GIT_PROJECT_CODE_TREE,i.id).then(function(J){j(J)});case 3:W(!1);case 4:case"end":return P.stop()}},c)}));return function(){return d.apply(this,arguments)}}();(0,m.useEffect)(function(){a()},[i.id]);var r=function(c){var p=c.node;l(s()({},p)),B(p.content)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Pe.Z,{size:"small",bodyStyle:{height:parent.innerHeight-320,overflow:"auto"},children:(0,n.jsxs)(xt.o,{split:"vertical",defaultSizes:[100,500],minSize:150,className:"split-pane",children:[(0,n.jsx)(_e.Pane,{className:"split-pane",forwardRef:f,minSize:100,size:100,split:"horizontal",children:(0,n.jsx)(Pe.Z,{ghost:!0,hoverable:!0,bordered:!0,size:"small",bodyStyle:{height:parent.innerHeight,overflow:"auto"},colSpan:"20%",children:(0,n.jsx)(Pt,{treeData:C,onNodeClick:function(c){return r(c)},loading:U})})}),(0,n.jsx)(_e.Pane,{className:"split-pane",forwardRef:f,minSize:100,size:100,split:"horizontal",children:(0,n.jsx)(Pe.Z,{ghost:!0,hoverable:!0,bordered:!0,size:"small",bodyStyle:{height:parent.innerHeight},children:(0,n.jsx)(Tt,{code:k,current:S})})})]})})})},It=function(u){var i=u.values,f=u.modalVisible,v=u.onCancel;return(0,n.jsx)(we.Z,{title:(0,e.l)("rc.gp.codeTree"),width:"95%",styles:{body:{height:"calc(100vh - 300px)",overflow:"auto"}},centered:!0,closable:!1,open:f,onCancel:function(){return v()},destroyOnClose:!0,maskClosable:!1,cancelText:(0,e.l)("button.close"),okButtonProps:{style:{display:"none"}},children:(0,n.jsx)(jt,{values:i})})},Ot=t(19632),yt=t.n(Ot),Rt=t(63573),ce=t(79935),le=t(97269),fe=t(5966),Ze=t(64317),Dt=t(52688),Lt=t(86615),Ue=t(90672),At=t(34041),Bt=t(35653),xe=t(55742),wt={height:"15vh",width:"45vw",lineNumbers:"on",language:"shell"},Mt=function(u){var i=u.values,f=u.form,v=(0,m.useState)(i.type||1),T=g()(v,2),C=T[0],j=T[1],Z=(0,m.useState)(i.buildArgs||""),x=g()(Z,2),U=x[0],W=x[1],I=(0,m.useState)([]),y=g()(I,2),k=y[0],B=y[1],w=function(){var a=h()(o()().mark(function r(){var d;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=f.getFieldsValue(),p.next=3,(0,H.AZ)(_.Z.GIT_BRANCH,s()({},d)).then(function(P){B(P)});case 3:case"end":return p.stop()}},r)}));return function(){return a.apply(this,arguments)}}(),E=function(r){j(r),f.setFieldsValue({type:r,url:""})},S=function(){return(0,n.jsx)(At.default,{style:{width:"5vw"},defaultValue:C,onChange:E,options:lt})},l=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(le.A.Group,{children:[(0,n.jsx)(fe.Z,{name:"name",width:"sm",label:(0,e.l)("rc.gp.name"),rules:[{required:!0,message:(0,e.l)("rc.gp.namePlaceholder")}],placeholder:(0,e.l)("rc.gp.namePlaceholder")}),(0,n.jsx)(Ze.Z,{name:"type",hidden:!0,shouldUpdate:!0,initialValue:C}),(0,n.jsx)(fe.Z,{name:"url",width:"md",label:(0,e.l)("rc.gp.url"),placeholder:(0,e.l)("rc.gp.urlPlaceholder"),rules:[{required:!0,message:(0,e.l)("rc.gp.urlPlaceholder")}],addonBefore:S()}),(0,n.jsx)(Dt.Z,s()({width:"xs",name:"enabled",label:(0,e.l)("global.table.isEnable")},(0,ce.uP)()))]}),(0,n.jsxs)(le.A.Group,{children:[C!==2?(0,n.jsx)(fe.Z,{name:"username",allowClear:!0,width:"sm",label:(0,e.l)("rc.gp.username"),placeholder:(0,e.l)("rc.gp.usernamePlaceholder")}):(0,n.jsx)(fe.Z,{name:"privateKey",width:"xl",tooltip:(0,e.l)("rc.gp.privateKeyPlaceholder"),label:(0,e.l)("rc.gp.privateKey"),rules:[{required:!0,message:(0,e.l)("rc.gp.privateKeyPlaceholder")}],placeholder:(0,e.l)("rc.gp.privateKeyPlaceholder"),children:(0,n.jsx)(Bt.Z,{style:{width:"12vw"},onBlur:C===2?w:function(){return Promise},placeholder:(0,e.l)("rc.gp.privateKeyPlaceholder")})}),(0,n.jsx)(fe.Z.Password,{name:"password",width:"sm",label:(0,e.l)("rc.gp.password"),placeholder:(0,e.l)("rc.gp.passwordPlaceholder")}),(0,n.jsx)(Ze.Z,{options:k,name:"branch",width:"sm",label:(0,e.l)("rc.gp.branch"),placeholder:(0,e.l)("rc.gp.branchPlaceholder"),rules:[{required:!0,message:(0,e.l)("rc.gp.branchPlaceholder")}],fieldProps:{onFocus:w},showSearch:!0}),(0,n.jsx)(Lt.Z.Group,{name:"codeType",width:"xs",label:(0,e.l)("rc.gp.codeType"),rules:[{required:!0,message:(0,e.l)("rc.gp.codeTypePlaceholder")}],children:(0,n.jsxs)(xe.ZP.Group,{children:[(0,n.jsx)(xe.ZP,{value:1,children:be[1].text}),(0,n.jsx)(xe.ZP,{value:2,children:be[2].text})]})})]}),(0,n.jsx)(le.A.Group,{children:(0,n.jsx)(le.A.Item,{name:"buildArgs",label:(0,e.l)("rc.gp.buildArgs"),children:(0,n.jsx)(Rt.Z,s()({onChange:function(d){return W(d!=null?d:"")},code:U},wt))})}),(0,n.jsxs)(le.A.Group,{children:[(0,n.jsx)(Ue.Z,{name:"pom",width:"lg",label:(0,e.l)("rc.gp.pom"),placeholder:(0,e.l)("rc.gp.pomPlaceholder")}),(0,n.jsx)(Ue.Z,{name:"description",width:"lg",label:(0,e.l)("global.table.note"),placeholder:(0,e.l)("global.table.notePlaceholder")})]})]})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(le.A,{form:f,submitter:!1,initialValues:i,syncToInitialValues:!0,children:l()})})},_t=Mt,Zt=t(37476),Ut=t(18922),Gt=function(u){var i=Ut.Z.useForm(),f=g()(i,1),v=f[0],T=m.useMemo(function(){return{resetForm:function(){return v.resetFields()}}},[v]),C=m.useState(!1),j=g()(C,2),Z=j[0],x=j[1],U=u.onSubmit,W=u.onCancel,I=u.modalVisible,y=u.values;(0,m.useEffect)(function(){v.setFieldsValue(y)},[I,y,v]);var k=function(){W(),x(!1),T.resetForm()},B=function(){var E=h()(o()().mark(function S(){var l;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.validateFields();case 2:return l=r.sent,x(!0),r.next=6,U(s()(s()({},y),l));case 6:k();case 7:case"end":return r.stop()}},S)}));return function(){return E.apply(this,arguments)}}(),w=function(){return[(0,n.jsx)(Q.ZP,{onClick:function(){return k()},children:(0,e.l)("button.cancel")},"cancel"),(0,n.jsx)(Q.ZP,{loading:Z,type:"primary",htmlType:"submit",autoFocus:!0,onClick:function(){return B()},children:(0,e.l)("button.finish")},"finish")]};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Zt.Y,s()(s()({},ce.q6),{},{title:y.id?(0,e.l)("rc.gp.modify"):(0,e.l)("rc.gp.create"),open:I,form:v,submitter:{render:function(){return yt()(w())}},initialValues:y,modalProps:{destroyOnClose:!0,onCancel:function(){return k()}},onValuesChange:function(S,l){return v.setFieldsValue(l)},syncToInitialValues:!0,children:(0,n.jsx)(_t,{values:y,form:v})}))})},Ge=Gt,se=t(81029),Ft=t(65184),Nt=t(44726),Kt=t(86738),kt=function(){var u=(0,m.useState)(Se._X),i=g()(u,2),f=i[0],v=i[1],T=(0,m.useRef)(),C=function(){var l=h()(o()().mark(function a(r){var d;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return v(function(P){return s()(s()({},P),{},{loading:!0})}),p.next=3,r();case 3:v(function(P){return s()(s()({},P),{},{loading:!1})}),(d=T.current)===null||d===void 0||d.reload();case 5:case"end":return p.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),j=function(){var l=h()(o()().mark(function a(r){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,C(h()(o()().mark(function p(){return o()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,H.Q$)(_.Z.GIT_PROJECT_ENABLE,{id:r.id}));case 1:case"end":return J.stop()}},p)})));case 2:case"end":return c.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),Z=function(){var l=h()(o()().mark(function a(r){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:v(function(p){return s()(s()({},p),{},{value:r,logOpen:!0})});case 1:case"end":return c.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),x=function(){var l=h()(o()().mark(function a(r){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:v(function(p){return s()(s()({},p),{},{value:r,codeTreeOpen:!0})});case 1:case"end":return c.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),U=function(){var l=h()(o()().mark(function a(r){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,C(h()(o()().mark(function p(){var P;return o()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,H.Hc)(_.Z.GIT_PROJECT_BUILD,(0,e.l)("rc.gp.building"),{id:r.id});case 2:P=b.sent,P&&v(function(ie){return s()(s()({},ie),{},{value:r,buildOpen:!0})});case 4:case"end":return b.stop()}},p)})));case 2:case"end":return c.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),W=function(){var l=h()(o()().mark(function a(r){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",v(function(p){return s()(s()({},p),{},{value:r,editOpen:!0})}));case 1:case"end":return c.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),I=function(){var l=h()(o()().mark(function a(r){var d;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=r.map(function(P,J){return s()(s()({},P),{},{orderLine:J+1})}),p.next=3,C(h()(o()().mark(function P(){return o()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,H.vO)(_.Z.GIT_DRAGEND_SORT_PROJECT,(0,e.l)("rc.gp.ucl.projectOrder"),{sortList:d}));case 1:case"end":return b.stop()}},P)})));case 3:case"end":return p.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),y=function(){var l=h()(o()().mark(function a(r){var d;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,C(h()(o()().mark(function P(){return o()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,H.m0)(_.Z.GIT_PROJECT_DELETE,r);case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},P)})));case 2:return p.next=4,(0,Ee.et)(_.Z.GIT_PROJECT).then(function(P){return I(P.data)});case 4:(d=T.current)===null||d===void 0||d.reload();case 5:case"end":return p.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),k=[{title:(0,e.l)("rc.gp.level"),hideInSearch:!0,dataIndex:"id",tooltip:(0,e.l)("rc.gp.level.tooltip"),render:function(a,r){return(0,n.jsx)(Ce.Z,{style:{marginLeft:10},color:r.orderLine>3?"default":"success",children:"No.".concat(r.orderLine)})}},{title:(0,e.l)("rc.gp.name"),dataIndex:"name",ellipsis:!0,width:"10%"},{title:(0,e.l)("rc.gp.branch"),dataIndex:"branch",renderText:function(a,r){return(0,n.jsx)(Ce.Z,{icon:(0,n.jsx)(Ft.Z,{}),color:st(r.branch),children:r.branch})}},{title:(0,e.l)("rc.gp.url"),dataIndex:"url",copyable:!0,ellipsis:!0,width:"10%"},{title:(0,e.l)("rc.gp.codeType"),dataIndex:"codeType",hideInSearch:!0,filterMultiple:!1,width:"6%",valueEnum:be,filters:et},{title:(0,e.l)("rc.gp.type"),dataIndex:"type",hideInSearch:!0,filterMultiple:!1,width:"8%",valueEnum:tt,filters:nt},{title:(0,e.l)("rc.gp.buildStep"),dataIndex:"buildStep",hideInSearch:!0,valueEnum:function(a){return a.codeType===1?it:ut}},{title:(0,e.l)("rc.gp.buildState"),dataIndex:"buildState",hideInSearch:!0,filterMultiple:!1,filters:at,valueEnum:rt},{title:(0,e.l)("rc.gp.lastBuild"),dataIndex:"lastBuild",hideInSearch:!0,valueType:"dateTime",width:"12%"},{title:(0,e.l)("global.table.note"),dataIndex:"description",ellipsis:!0},{title:(0,e.l)("global.table.isEnable"),dataIndex:"enable",width:"6%",hideInSearch:!0,filters:(0,ce.em)(),filterMultiple:!1,valueEnum:(0,ce.ze)(),render:function(a,r){return(0,n.jsx)(X.t,{record:r,disabled:!(0,z.ux)(se.k5.REGISTRATION_GIT_PROJECT_EDIT),onChange:function(){return j(r)}},"".concat(r.id,"_enable"))}},{title:(0,e.l)("global.table.operate"),valueType:"option",width:"10%",fixed:"right",render:function(a,r){return[(0,n.jsx)(z.FY,{path:se.k5.REGISTRATION_GIT_PROJECT_SHOW_LOG,children:(0,n.jsx)(ee.G,{disabled:r.buildStep===0,onClick:function(){return Z(r)}},"".concat(r.id,"_showLog"))},"".concat(r.id,"_showLog")),(0,n.jsx)(Q.ZP,{className:"options-button",title:(0,e.l)("button.showCode"),icon:(0,n.jsx)(re.rq,{}),onClick:function(){return x(r)}},"".concat(r.id,"_code")),(0,n.jsx)(z.FY,{path:se.k5.REGISTRATION_GIT_PROJECT_BUILD,children:(0,n.jsx)(Kt.Z,{className:"options-button",placement:"topRight",title:(0,e.l)("button.build"),description:(0,e.l)("rc.gp.buildConfirm"),onConfirm:function(){return U(r)},okText:(0,e.l)("button.confirm"),cancelText:(0,e.l)("button.cancel"),children:(0,n.jsx)(Q.ZP,{title:(0,e.l)("button.build"),htmlType:"submit",autoFocus:!0,icon:(0,n.jsx)(Nt.Z,{})},"".concat(r.id,"_buildbtn"))},"".concat(r.id,"_build"))},"".concat(r.id,"_build")),(0,n.jsx)(z.FY,{path:se.k5.REGISTRATION_GIT_PROJECT_EDIT,children:(0,n.jsx)(A.m,{onClick:function(){return W(r)}},"".concat(r.id,"_edit"))},"".concat(r.id,"_edit")),(0,n.jsx)(z.FY,{path:se.k5.REGISTRATION_GIT_PROJECT_DELETE,children:(0,n.jsx)(q.i,{onClick:function(){return y(r.id)},description:(0,e.l)("rc.gp.deleteConfirm")},"".concat(r.id,"_delete"))},"".concat(r.id,"_delete"))]}}],B=function(){var a;v(Se._X),(a=T.current)===null||a===void 0||a.reload()},w=function(){var l=h()(o()().mark(function a(r){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,H.On)(_.Z.GIT_SAVE_UPDATE,r);case 2:B();case 3:case"end":return c.stop()}},a)}));return function(r){return l.apply(this,arguments)}}(),E=function(a){var r=a.udfClassMapList,d=a.id;return r?(0,n.jsx)(Le,{projectId:d,jarAndClassesList:JSON.parse(r)}):(0,n.jsx)(de.Z,{image:de.Z.PRESENTED_IMAGE_DEFAULT})},S=function(){var l=h()(o()().mark(function a(r){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return B(),c.next=3,U(r);case 3:case"end":return c.stop()}},a)}));return function(r){return l.apply(this,arguments)}}();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(De.Z,s()(s()({},ce.xc),{},{headerTitle:(0,e.l)("rc.gp.management"),columns:k,loading:f.loading,actionRef:T,dragSortKey:"id",toolBarRender:function(){return[(0,n.jsx)(z.FY,{path:se.k5.REGISTRATION_GIT_PROJECT_ADD,children:(0,n.jsx)(M.q,{onClick:function(){return v(function(r){return s()(s()({},r),{},{addedOpen:!0})})}},"gittable")},"create")]},expandable:{expandRowByClick:!1,expandedRowRender:function(a){return E(a)}},request:function(a,r,d){return(0,Ee.et)(_.Z.GIT_PROJECT,s()(s()({},a),{},{sorter:r,filter:d}))},onDragSortEnd:function(a,r,d){return I(d)}})),(0,n.jsx)(Ge,{onCancel:B,onSubmit:function(a){return w(a)},modalVisible:f.addedOpen,values:{}}),(0,n.jsx)(Ge,{onCancel:B,onSubmit:function(a){return w(a)},modalVisible:f.editOpen,values:f.value}),f.buildOpen&&(0,n.jsx)(Me,{title:(0,e.l)("rc.gp.build"),onOk:B,onRebuild:function(){return S(f.value)},onReTry:function(){return S(f.value)},values:f.value}),f.logOpen&&(0,n.jsx)(Me,{title:(0,e.l)("rc.gp.log"),onOk:B,showLog:f.logOpen,onRebuild:function(){return S(f.value)},values:f.value}),(0,n.jsx)(It,{modalVisible:f.codeTreeOpen,onCancel:B,values:f.value})]})},Jt=kt,Wt=t(11774),Vt=function(){return(0,n.jsx)(L.Z,{children:(0,n.jsx)(Wt._z,{title:!1,children:(0,n.jsx)(Jt,{})})})}},36317:function(ne,D,t){t.d(D,{Ih:function(){return e},JB:function(){return X},Lc:function(){return ee},Ln:function(){return re},RB:function(){return A},TH:function(){return Te},_W:function(){return _},_X:function(){return z},er:function(){return M},m4:function(){return H},qI:function(){return q},ql:function(){return F},sh:function(){return Y}});var L=t(72174),R=t(57900),o=t(3259),F={alertGroupList:[],loading:!1,addedOpen:!1,editOpen:!1,value:{}},s={webhook:void 0,keyword:void 0,secret:void 0,isEnableProxy:!1,isAtAll:!1,atMobiles:[""],proxy:void 0,port:void 0,user:void 0,password:void 0},N={webhook:void 0,keyword:void 0,secret:void 0,isEnableProxy:!1,isAtAll:!1,users:[""],proxy:void 0,port:void 0,user:void 0,password:void 0},h={serverHost:void 0,serverPort:void 0,sender:void 0,receivers:[""],receiverCcs:[""],enableSmtpAuth:!1,starttlsEnable:!1,sslEnable:!1,smtpSslTrust:void 0,user:void 0,password:void 0},O={sendType:"wechat",isAtAll:!1,webhook:void 0,keyword:void 0,users:void 0,corpId:void 0,secret:void 0,agentId:void 0},g={suppliers:L.Ic.ALIBABA,accessKeyId:void 0,sdkAppId:void 0,accessKeySecret:void 0,signature:void 0,templateId:void 0,configId:(0,o.Zo)(32),weight:1,retryInterval:5,maxRetries:3,phoneNumbers:[""]},M={id:void 0,name:void 0,type:R.X.DINGTALK,params:s||N||h||O||g,enabled:!0,createTime:void 0,updateTime:void 0},A={alertInstanceList:[],loading:!1,addedOpen:!1,editOpen:!1,value:M},X={alertTemplateList:[],loading:!1,addedOpen:!1,editOpen:!1,value:{}},q={loading:!1,addedOpen:!1,editOpen:!1,value:{},configList:[]},ee={loading:!1,addedOpen:!1,editOpen:!1,value:{},instanceList:[]},re={loading:!1,addedOpen:!1,editOpen:!1,value:{},drawerOpen:!1},z={loading:!1,addedOpen:!1,editOpen:!1,value:{},logOpen:!1,codeTreeOpen:!1,buildOpen:!1},Y={logRecord:"",currentStep:0,showListOpen:!1,percent:0,steps:[]},H={loading:!1,addedOpen:!1,editOpen:!1,value:{},drawerOpen:!1},_={treeData:[],content:"",clickedNode:{},rightClickedNode:{},contextMenuOpen:!1,contextMenuPosition:{top:0,left:0},selectedKeys:[],editOpen:!1,editContent:"",uploadOpen:!1,value:{}},e={loading:!1,addedOpen:!1,editOpen:!1,value:{},drawerOpen:!1},Te={loading:!1,addedOpen:!1,editOpen:!1,value:{},isDetailPage:!1}}}]);
